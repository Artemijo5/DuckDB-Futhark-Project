// Generated by Futhark 0.26.0 (prerelease - include info below when reporting bugs).
// git: 1de4f0c (Fri Jan 24 11:10:52 2025 +0100)
// Compiled with GHC 9.4.8.

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wunused-const-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#pragma clang diagnostic ignored "-Wunused-but-set-variable"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wunused-const-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg, const char *param_name, size_t new_value);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr, float *data);
int futhark_index_f32_1d(struct futhark_context *ctx, float *out, struct futhark_f32_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
struct futhark_f64_1d;
struct futhark_f64_1d *futhark_new_f64_1d(struct futhark_context *ctx, const double *data, int64_t dim0);
struct futhark_f64_1d *futhark_new_raw_f64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr);
int futhark_values_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr, double *data);
int futhark_index_f64_1d(struct futhark_context *ctx, double *out, struct futhark_f64_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr);
const int64_t *futhark_shape_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr);
struct futhark_i16_1d;
struct futhark_i16_1d *futhark_new_i16_1d(struct futhark_context *ctx, const int16_t *data, int64_t dim0);
struct futhark_i16_1d *futhark_new_raw_i16_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr);
int futhark_values_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr, int16_t *data);
int futhark_index_i16_1d(struct futhark_context *ctx, int16_t *out, struct futhark_i16_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr);
const int64_t *futhark_shape_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr);
struct futhark_i32_1d;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const int32_t *data, int64_t dim0);
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr);
int futhark_values_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr, int32_t *data);
int futhark_index_i32_1d(struct futhark_context *ctx, int32_t *out, struct futhark_i32_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr);
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr);
struct futhark_i64_1d;
struct futhark_i64_1d *futhark_new_i64_1d(struct futhark_context *ctx, const int64_t *data, int64_t dim0);
struct futhark_i64_1d *futhark_new_raw_i64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr);
int futhark_values_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr, int64_t *data);
int futhark_index_i64_1d(struct futhark_context *ctx, int64_t *out, struct futhark_i64_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr);
const int64_t *futhark_shape_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr);
struct futhark_u8_2d;
struct futhark_u8_2d *futhark_new_u8_2d(struct futhark_context *ctx, const uint8_t *data, int64_t dim0, int64_t dim1);
struct futhark_u8_2d *futhark_new_raw_u8_2d(struct futhark_context *ctx, unsigned char *data, int64_t dim0, int64_t dim1);
int futhark_free_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr);
int futhark_values_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr, uint8_t *data);
int futhark_index_u8_2d(struct futhark_context *ctx, uint8_t *out, struct futhark_u8_2d *arr, int64_t i0, int64_t i1);
unsigned char *futhark_values_raw_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr);
const int64_t *futhark_shape_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr);

// Opaque values
struct futhark_opaque_joinPairs_bsq;
struct futhark_opaque_joinPairs_double;
struct futhark_opaque_joinPairs_float;
struct futhark_opaque_joinPairs_int;
struct futhark_opaque_joinPairs_long;
struct futhark_opaque_joinPairs_short;
struct futhark_opaque_partitionInfo;
struct futhark_opaque_partitionedSet_GFTR;
struct futhark_opaque_partitionedSet_GFUR;
struct futhark_opaque_radix_hashTable;
struct futhark_opaque_sortInfo_double;
struct futhark_opaque_sortInfo_float;
struct futhark_opaque_sortInfo_int;
struct futhark_opaque_sortInfo_long;
struct futhark_opaque_sortInfo_short;
struct futhark_opaque_sortStruct_double;
struct futhark_opaque_sortStruct_float;
struct futhark_opaque_sortStruct_int;
struct futhark_opaque_sortStruct_long;
struct futhark_opaque_sortStruct_short;
int futhark_free_opaque_joinPairs_bsq(struct futhark_context *ctx, struct futhark_opaque_joinPairs_bsq *obj);
int futhark_store_opaque_joinPairs_bsq(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_bsq *obj, void **p, size_t *n);
struct futhark_opaque_joinPairs_bsq *futhark_restore_opaque_joinPairs_bsq(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_joinPairs_bsq_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_bsq *obj);
int futhark_project_opaque_joinPairs_bsq_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_bsq *obj);
int futhark_project_opaque_joinPairs_bsq_vs(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_joinPairs_bsq *obj);
int futhark_new_opaque_joinPairs_bsq(struct futhark_context *ctx, struct futhark_opaque_joinPairs_bsq **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_u8_2d *f_vs);
int futhark_free_opaque_joinPairs_double(struct futhark_context *ctx, struct futhark_opaque_joinPairs_double *obj);
int futhark_store_opaque_joinPairs_double(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_double *obj, void **p, size_t *n);
struct futhark_opaque_joinPairs_double *futhark_restore_opaque_joinPairs_double(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_joinPairs_double_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_double *obj);
int futhark_project_opaque_joinPairs_double_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_double *obj);
int futhark_project_opaque_joinPairs_double_vs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_joinPairs_double *obj);
int futhark_new_opaque_joinPairs_double(struct futhark_context *ctx, struct futhark_opaque_joinPairs_double **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_f64_1d *f_vs);
int futhark_free_opaque_joinPairs_float(struct futhark_context *ctx, struct futhark_opaque_joinPairs_float *obj);
int futhark_store_opaque_joinPairs_float(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_float *obj, void **p, size_t *n);
struct futhark_opaque_joinPairs_float *futhark_restore_opaque_joinPairs_float(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_joinPairs_float_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_float *obj);
int futhark_project_opaque_joinPairs_float_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_float *obj);
int futhark_project_opaque_joinPairs_float_vs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_joinPairs_float *obj);
int futhark_new_opaque_joinPairs_float(struct futhark_context *ctx, struct futhark_opaque_joinPairs_float **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_f32_1d *f_vs);
int futhark_free_opaque_joinPairs_int(struct futhark_context *ctx, struct futhark_opaque_joinPairs_int *obj);
int futhark_store_opaque_joinPairs_int(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_int *obj, void **p, size_t *n);
struct futhark_opaque_joinPairs_int *futhark_restore_opaque_joinPairs_int(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_joinPairs_int_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_int *obj);
int futhark_project_opaque_joinPairs_int_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_int *obj);
int futhark_project_opaque_joinPairs_int_vs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_joinPairs_int *obj);
int futhark_new_opaque_joinPairs_int(struct futhark_context *ctx, struct futhark_opaque_joinPairs_int **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_i32_1d *f_vs);
int futhark_free_opaque_joinPairs_long(struct futhark_context *ctx, struct futhark_opaque_joinPairs_long *obj);
int futhark_store_opaque_joinPairs_long(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_long *obj, void **p, size_t *n);
struct futhark_opaque_joinPairs_long *futhark_restore_opaque_joinPairs_long(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_joinPairs_long_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_long *obj);
int futhark_project_opaque_joinPairs_long_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_long *obj);
int futhark_project_opaque_joinPairs_long_vs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_long *obj);
int futhark_new_opaque_joinPairs_long(struct futhark_context *ctx, struct futhark_opaque_joinPairs_long **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_i64_1d *f_vs);
int futhark_free_opaque_joinPairs_short(struct futhark_context *ctx, struct futhark_opaque_joinPairs_short *obj);
int futhark_store_opaque_joinPairs_short(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_short *obj, void **p, size_t *n);
struct futhark_opaque_joinPairs_short *futhark_restore_opaque_joinPairs_short(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_joinPairs_short_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_short *obj);
int futhark_project_opaque_joinPairs_short_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_short *obj);
int futhark_project_opaque_joinPairs_short_vs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_joinPairs_short *obj);
int futhark_new_opaque_joinPairs_short(struct futhark_context *ctx, struct futhark_opaque_joinPairs_short **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_i16_1d *f_vs);
int futhark_free_opaque_partitionInfo(struct futhark_context *ctx, struct futhark_opaque_partitionInfo *obj);
int futhark_store_opaque_partitionInfo(struct futhark_context *ctx, const struct futhark_opaque_partitionInfo *obj, void **p, size_t *n);
struct futhark_opaque_partitionInfo *futhark_restore_opaque_partitionInfo(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_partitionInfo_bounds(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_partitionInfo *obj);
int futhark_project_opaque_partitionInfo_depths(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_partitionInfo *obj);
int futhark_project_opaque_partitionInfo_maxDepth(struct futhark_context *ctx, int32_t *out, const struct futhark_opaque_partitionInfo *obj);
int futhark_new_opaque_partitionInfo(struct futhark_context *ctx, struct futhark_opaque_partitionInfo **out, const struct futhark_i64_1d *f_bounds, const struct futhark_i32_1d *f_depths, const int32_t f_maxDepth);
int futhark_free_opaque_partitionedSet_GFTR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFTR *obj);
int futhark_store_opaque_partitionedSet_GFTR(struct futhark_context *ctx, const struct futhark_opaque_partitionedSet_GFTR *obj, void **p, size_t *n);
struct futhark_opaque_partitionedSet_GFTR *futhark_restore_opaque_partitionedSet_GFTR(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_partitionedSet_GFTR_ks(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_partitionedSet_GFTR *obj);
int futhark_project_opaque_partitionedSet_GFTR_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_partitionedSet_GFTR *obj);
int futhark_new_opaque_partitionedSet_GFTR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFTR **out, const struct futhark_u8_2d *f_ks, const struct futhark_u8_2d *f_pL);
int futhark_free_opaque_partitionedSet_GFUR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFUR *obj);
int futhark_store_opaque_partitionedSet_GFUR(struct futhark_context *ctx, const struct futhark_opaque_partitionedSet_GFUR *obj, void **p, size_t *n);
struct futhark_opaque_partitionedSet_GFUR *futhark_restore_opaque_partitionedSet_GFUR(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_partitionedSet_GFUR_idx(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_partitionedSet_GFUR *obj);
int futhark_project_opaque_partitionedSet_GFUR_ks(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_partitionedSet_GFUR *obj);
int futhark_new_opaque_partitionedSet_GFUR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFUR **out, const struct futhark_i64_1d *f_idx, const struct futhark_u8_2d *f_ks);
int futhark_free_opaque_radix_hashTable(struct futhark_context *ctx, struct futhark_opaque_radix_hashTable *obj);
int futhark_store_opaque_radix_hashTable(struct futhark_context *ctx, const struct futhark_opaque_radix_hashTable *obj, void **p, size_t *n);
struct futhark_opaque_radix_hashTable *futhark_restore_opaque_radix_hashTable(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_radix_hashTable_first_info_idx(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_radix_hashTable *obj);
int futhark_project_opaque_radix_hashTable_last_info_idx(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_radix_hashTable *obj);
int futhark_new_opaque_radix_hashTable(struct futhark_context *ctx, struct futhark_opaque_radix_hashTable **out, const struct futhark_i64_1d *f_first_info_idx, const struct futhark_i64_1d *f_last_info_idx);
int futhark_free_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double *obj);
int futhark_store_opaque_sortInfo_double(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_double *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_double *futhark_restore_opaque_sortInfo_double(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_double *obj);
int futhark_project_opaque_sortInfo_double_xs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_sortInfo_double *obj);
int futhark_new_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out, const struct futhark_i64_1d *f_is, const struct futhark_f64_1d *f_xs);
int futhark_free_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float *obj);
int futhark_store_opaque_sortInfo_float(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_float *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_float *futhark_restore_opaque_sortInfo_float(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_float *obj);
int futhark_project_opaque_sortInfo_float_xs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_sortInfo_float *obj);
int futhark_new_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out, const struct futhark_i64_1d *f_is, const struct futhark_f32_1d *f_xs);
int futhark_free_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int *obj);
int futhark_store_opaque_sortInfo_int(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_int *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_int *futhark_restore_opaque_sortInfo_int(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_int *obj);
int futhark_project_opaque_sortInfo_int_xs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_sortInfo_int *obj);
int futhark_new_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out, const struct futhark_i64_1d *f_is, const struct futhark_i32_1d *f_xs);
int futhark_free_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long *obj);
int futhark_store_opaque_sortInfo_long(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_long *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_long *futhark_restore_opaque_sortInfo_long(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj);
int futhark_project_opaque_sortInfo_long_xs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj);
int futhark_new_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_xs);
int futhark_free_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short *obj);
int futhark_store_opaque_sortInfo_short(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_short *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_short *futhark_restore_opaque_sortInfo_short(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_short *obj);
int futhark_project_opaque_sortInfo_short_xs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_sortInfo_short *obj);
int futhark_new_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out, const struct futhark_i64_1d *f_is, const struct futhark_i16_1d *f_xs);
int futhark_free_opaque_sortStruct_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double *obj);
int futhark_store_opaque_sortStruct_double(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_double *obj, void **p, size_t *n);
struct futhark_opaque_sortStruct_double *futhark_restore_opaque_sortStruct_double(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortStruct_double_k(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_sortStruct_double *obj);
int futhark_project_opaque_sortStruct_double_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_double *obj);
int futhark_new_opaque_sortStruct_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double **out, const struct futhark_f64_1d *f_k, const struct futhark_u8_2d *f_pL);
int futhark_free_opaque_sortStruct_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float *obj);
int futhark_store_opaque_sortStruct_float(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_float *obj, void **p, size_t *n);
struct futhark_opaque_sortStruct_float *futhark_restore_opaque_sortStruct_float(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortStruct_float_k(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_sortStruct_float *obj);
int futhark_project_opaque_sortStruct_float_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_float *obj);
int futhark_new_opaque_sortStruct_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float **out, const struct futhark_f32_1d *f_k, const struct futhark_u8_2d *f_pL);
int futhark_free_opaque_sortStruct_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int *obj);
int futhark_store_opaque_sortStruct_int(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_int *obj, void **p, size_t *n);
struct futhark_opaque_sortStruct_int *futhark_restore_opaque_sortStruct_int(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortStruct_int_k(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_sortStruct_int *obj);
int futhark_project_opaque_sortStruct_int_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_int *obj);
int futhark_new_opaque_sortStruct_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int **out, const struct futhark_i32_1d *f_k, const struct futhark_u8_2d *f_pL);
int futhark_free_opaque_sortStruct_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long *obj);
int futhark_store_opaque_sortStruct_long(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_long *obj, void **p, size_t *n);
struct futhark_opaque_sortStruct_long *futhark_restore_opaque_sortStruct_long(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortStruct_long_k(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortStruct_long *obj);
int futhark_project_opaque_sortStruct_long_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_long *obj);
int futhark_new_opaque_sortStruct_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long **out, const struct futhark_i64_1d *f_k, const struct futhark_u8_2d *f_pL);
int futhark_free_opaque_sortStruct_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short *obj);
int futhark_store_opaque_sortStruct_short(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_short *obj, void **p, size_t *n);
struct futhark_opaque_sortStruct_short *futhark_restore_opaque_sortStruct_short(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortStruct_short_k(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_sortStruct_short *obj);
int futhark_project_opaque_sortStruct_short_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_short *obj);
int futhark_new_opaque_sortStruct_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short **out, const struct futhark_i16_1d *f_k, const struct futhark_u8_2d *f_pL);

// Entry points
int futhark_entry_Inner_Radix_Hash_Join(struct futhark_context *ctx, struct futhark_opaque_joinPairs_bsq **out0, const int32_t in0, const struct futhark_u8_2d *in1, const struct futhark_u8_2d *in2, const struct futhark_opaque_partitionInfo *in3, const struct futhark_opaque_partitionInfo *in4, const struct futhark_opaque_radix_hashTable *in5, const int64_t in6);
int futhark_entry_argmin_double(struct futhark_context *ctx, int64_t *out0, const struct futhark_f64_1d *in0);
int futhark_entry_argmin_float(struct futhark_context *ctx, int64_t *out0, const struct futhark_f32_1d *in0);
int futhark_entry_argmin_int(struct futhark_context *ctx, int64_t *out0, const struct futhark_i32_1d *in0);
int futhark_entry_argmin_long(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0);
int futhark_entry_argmin_short(struct futhark_context *ctx, int64_t *out0, const struct futhark_i16_1d *in0);
int futhark_entry_calc_partitions_from_partitioned_set(struct futhark_context *ctx, struct futhark_opaque_partitionInfo **out0, const int32_t in0, const struct futhark_u8_2d *in1, const int64_t in2, const int64_t in3, const int32_t in4);
int futhark_entry_create_hash_table_from_partitioned_set(struct futhark_context *ctx, struct futhark_opaque_radix_hashTable **out0, const int32_t in0, const struct futhark_u8_2d *in1, const struct futhark_opaque_partitionInfo *in2, const int64_t in3);
int futhark_entry_gather_payloads_GFTR(struct futhark_context *ctx, struct futhark_u8_2d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const int64_t in3, const struct futhark_u8_2d *in4);
int futhark_entry_gather_payloads_double(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f64_1d *in3);
int futhark_entry_gather_payloads_double_GFUR(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_f64_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_f64_1d *in4);
int futhark_entry_gather_payloads_float(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f32_1d *in3);
int futhark_entry_gather_payloads_float_GFUR(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_f32_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_f32_1d *in4);
int futhark_entry_gather_payloads_int(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i32_1d *in3);
int futhark_entry_gather_payloads_int_GFUR(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i32_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_i32_1d *in4);
int futhark_entry_gather_payloads_long(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3);
int futhark_entry_gather_payloads_long_GFUR(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_i64_1d *in4);
int futhark_entry_gather_payloads_short(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i16_1d *in3);
int futhark_entry_gather_payloads_short_GFUR(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i16_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_i16_1d *in4);
int futhark_entry_inner_SMJ_double(struct futhark_context *ctx, struct futhark_opaque_joinPairs_double **out0, const struct futhark_f64_1d *in0, const struct futhark_f64_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5);
int futhark_entry_inner_SMJ_float(struct futhark_context *ctx, struct futhark_opaque_joinPairs_float **out0, const struct futhark_f32_1d *in0, const struct futhark_f32_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5);
int futhark_entry_inner_SMJ_int(struct futhark_context *ctx, struct futhark_opaque_joinPairs_int **out0, const struct futhark_i32_1d *in0, const struct futhark_i32_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5);
int futhark_entry_inner_SMJ_long(struct futhark_context *ctx, struct futhark_opaque_joinPairs_long **out0, const struct futhark_i64_1d *in0, const struct futhark_i64_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5);
int futhark_entry_inner_SMJ_short(struct futhark_context *ctx, struct futhark_opaque_joinPairs_short **out0, const struct futhark_i16_1d *in0, const struct futhark_i16_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5);
int futhark_entry_max_idx(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0);
int futhark_entry_mergeSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const struct futhark_f64_1d *in1);
int futhark_entry_mergeSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const struct futhark_f32_1d *in1);
int futhark_entry_mergeSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const struct futhark_i32_1d *in1);
int futhark_entry_mergeSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const struct futhark_i64_1d *in1);
int futhark_entry_mergeSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const struct futhark_i16_1d *in1);
int futhark_entry_mergeSortRelation_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double **out0, const struct futhark_opaque_sortStruct_double *in0);
int futhark_entry_mergeSortRelation_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float **out0, const struct futhark_opaque_sortStruct_float *in0);
int futhark_entry_mergeSortRelation_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int **out0, const struct futhark_opaque_sortStruct_int *in0);
int futhark_entry_mergeSortRelation_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long **out0, const struct futhark_opaque_sortStruct_long *in0);
int futhark_entry_mergeSortRelation_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short **out0, const struct futhark_opaque_sortStruct_short *in0);
int futhark_entry_min_idx(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0);
int futhark_entry_orderByIndices_double(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f64_1d *in3);
int futhark_entry_orderByIndices_float(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f32_1d *in3);
int futhark_entry_orderByIndices_int(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i32_1d *in3);
int futhark_entry_orderByIndices_long(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3);
int futhark_entry_orderByIndices_short(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i16_1d *in3);
int futhark_entry_partition_and_deepen_GFTR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFTR **out0, const int16_t in0, const int64_t in1, const int32_t in2, const struct futhark_u8_2d *in3, const struct futhark_u8_2d *in4, const int64_t in5, const int32_t in6);
int futhark_entry_partition_and_deepen_GFUR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFUR **out0, const int16_t in0, const int64_t in1, const int32_t in2, const struct futhark_u8_2d *in3, const int64_t in4, const int64_t in5, const int32_t in6);
int futhark_entry_radixSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const int16_t in1, const struct futhark_f64_1d *in2);
int futhark_entry_radixSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const int16_t in1, const struct futhark_f32_1d *in2);
int futhark_entry_radixSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const int16_t in1, const struct futhark_i32_1d *in2);
int futhark_entry_radixSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const int16_t in1, const struct futhark_i64_1d *in2);
int futhark_entry_radixSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const int16_t in1, const struct futhark_i16_1d *in2);
int futhark_entry_radixSortRelation_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double **out0, const int16_t in0, const struct futhark_opaque_sortStruct_double *in1);
int futhark_entry_radixSortRelation_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float **out0, const int16_t in0, const struct futhark_opaque_sortStruct_float *in1);
int futhark_entry_radixSortRelation_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int **out0, const int16_t in0, const struct futhark_opaque_sortStruct_int *in1);
int futhark_entry_radixSortRelation_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long **out0, const int16_t in0, const struct futhark_opaque_sortStruct_long *in1);
int futhark_entry_radixSortRelation_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short **out0, const int16_t in0, const struct futhark_opaque_sortStruct_short *in1);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
#define SCALAR_FUN_ATTR static inline
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);
static char *strclone(const char *str);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

static void str_builder_str(struct str_builder *b, const char *s) {
  size_t needed = strlen(s);
  if (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }
  strcpy(b->str+b->used, s);
  b->used += needed;
}

static void str_builder_char(struct str_builder *b, char c) {
  size_t needed = 1;
  if (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }
  b->str[b->used] = c;
  b->str[b->used+1] = 0;
  b->used += needed;
}

static void str_builder_json_str(struct str_builder* sb, const char* s) {
  str_builder_char(sb, '"');
  for (int j = 0; s[j]; j++) {
    char c = s[j];
    switch (c) {
    case '\n':
      str_builder_str(sb, "\\n");
      break;
    case '"':
      str_builder_str(sb, "\\\"");
      break;
    default:
      str_builder_char(sb, c);
    }
  }
  str_builder_char(sb, '"');
}

static char *strclone(const char *str) {
  size_t size = strlen(str) + 1;
  char *copy = (char*) malloc(size);
  if (copy == NULL) {
    return NULL;
  }

  memcpy(copy, str, size);
  return copy;
}

// Assumes NULL-terminated.
static char *strconcat(const char *src_fragments[]) {
  size_t src_len = 0;
  const char **p;

  for (p = src_fragments; *p; p++) {
    src_len += strlen(*p);
  }

  char *src = (char*) malloc(src_len + 1);
  size_t n = 0;
  for (p = src_fragments; *p; p++) {
    strcpy(src + n, *p);
    n += strlen(*p);
  }

  return src;
}

// End of util.h.
// Start of cache.h

#define CACHE_HASH_SIZE 8 // In 32-bit words.

struct cache_hash {
  uint32_t hash[CACHE_HASH_SIZE];
};

// Initialise a blank cache.
static void cache_hash_init(struct cache_hash *c);

// Hash some bytes and add them to the accumulated hash.
static void cache_hash(struct cache_hash *out, const char *in, size_t n);

// Try to restore cache contents from a file with the given name.
// Assumes the cache is invalid if it contains the given hash.
// Allocates memory and reads the cache conents, which is returned in
// *buf with size *buflen.  If the cache is successfully loaded, this
// function returns 0.  Otherwise it returns nonzero.  Errno is set if
// the failure to load the cache is due to anything except invalid
// cache conents.  Note that failing to restore the cache is not
// necessarily a problem: it might just be invalid or not created yet.
static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen);

// Store cache contents in the given file, with the given hash.
static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen);

// Now for the implementation.

static void cache_hash_init(struct cache_hash *c) {
  memset(c->hash, 0, CACHE_HASH_SIZE * sizeof(uint32_t));
}

static void cache_hash(struct cache_hash *out, const char *in, size_t n) {
  // Adaptation of djb2 for larger output size by storing intermediate
  // states.
  uint32_t hash = 5381;
  for (size_t i = 0; i < n; i++) {
    hash = ((hash << 5) + hash) + in[i];
    out->hash[i % CACHE_HASH_SIZE] ^= hash;
  }
}

#define CACHE_HEADER_SIZE 8
static const char cache_header[CACHE_HEADER_SIZE] = "FUTHARK\0";

static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen) {
  FILE *f = fopen(fname, "rb");

  if (f == NULL) {
    return 1;
  }

  char f_header[CACHE_HEADER_SIZE];

  if (fread(f_header, sizeof(char), CACHE_HEADER_SIZE, f) != CACHE_HEADER_SIZE) {
    goto error;
  }

  if (memcmp(f_header, cache_header, CACHE_HEADER_SIZE) != 0) {
    goto error;
  }

  if (fseek(f, 0, SEEK_END) != 0) {
    goto error;
  }
  int64_t f_size = (int64_t)ftell(f);
  if (fseek(f, CACHE_HEADER_SIZE, SEEK_SET) != 0) {
    goto error;
  }

  int64_t expected_size;

  if (fread(&expected_size, sizeof(int64_t), 1, f) != 1) {
    goto error;
  }

  if (f_size != expected_size) {
    errno = 0;
    goto error;
  }

  int32_t f_hash[CACHE_HASH_SIZE];

  if (fread(f_hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (memcmp(f_hash, hash->hash, CACHE_HASH_SIZE) != 0) {
    errno = 0;
    goto error;
  }

  *buflen = f_size - CACHE_HEADER_SIZE - sizeof(int64_t) - CACHE_HASH_SIZE*sizeof(int32_t);
  *buf = malloc(*buflen);
  if (fread(*buf, sizeof(char), *buflen, f) != *buflen) {
    free(*buf);
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen) {
  FILE *f = fopen(fname, "wb");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(cache_header, CACHE_HEADER_SIZE, 1, f) != 1) {
    goto error;
  }

  int64_t size = CACHE_HEADER_SIZE + sizeof(int64_t) + CACHE_HASH_SIZE*sizeof(int32_t) + buflen;

  if (fwrite(&size, sizeof(size), 1, f) != 1) {
    goto error;
  }

  if (fwrite(hash->hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (fwrite(buf, sizeof(unsigned char), buflen, f) != buflen) {
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

// End of cache.h
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

SCALAR_FUN_ATTR uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

SCALAR_FUN_ATTR float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

SCALAR_FUN_ATTR uint16_t halfbitsnextafter(uint16_t from, uint16_t to) {
  int fabs = from & 0x7FFF, tabs = to & 0x7FFF;
  if(fabs > 0x7C00 || tabs > 0x7C00) {
    return ((from&0x7FFF)>0x7C00) ? (from|0x200) : (to|0x200);
  }
  if(from == to || !(fabs|tabs)) {
    return to;
  }
  if(!fabs) {
    return (to&0x8000)+1;
  }
  unsigned int out =
    from +
    (((from>>15)^(unsigned int)((from^(0x8000|(0x8000-(from>>15))))<(to^(0x8000|(0x8000-(to>>15))))))<<1)
    - 1;
  return out;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

static int64_t get_wall_time_ns(void) {
  return get_wall_time() * 1000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.
// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.
// Start of free_list.h.

typedef uintptr_t fl_mem;

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries; // Pointer to entries.
  int capacity;                    // Number of entries.
  int used;                        // Number of valid entries.
  lock_t lock;                     // Thread safety.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
  create_lock(&l->lock);
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  lock_lock(&l->lock);
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      if (i > p) {
        l->entries[i].valid = 0;
      }
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
  lock_unlock(&l->lock);
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
  free_lock(&l->lock);
}

// Not part of the interface, so no locking.
static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem mem, const char *tag) {
  lock_lock(&l->lock);
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
  lock_unlock(&l->lock);
}

// Determine whether this entry in the free list is acceptable for
// satisfying the request.  Not public, so no locking.
static bool free_list_acceptable(size_t size, const char* tag, struct free_list_entry *entry) {
  // We check not just the hard requirement (is the entry acceptable
  // and big enough?) but also put a cap on how much wasted space
  // (internal fragmentation) we allow.  This is necessarily a
  // heuristic, and a crude one.

  if (!entry->valid) {
    return false;
  }

  if (size > entry->size) {
    return false;
  }

  // We know the block fits.  Now the question is whether it is too
  // big.  Our policy is as follows:
  //
  // 1) We don't care about wasted space below 4096 bytes (to avoid
  // churn in tiny allocations).
  //
  // 2) If the tag matches, we allow _any_ amount of wasted space.
  //
  // 3) Otherwise we allow up to 50% wasted space.

  if (entry->size < 4096) {
    return true;
  }

  if (entry->tag == tag) {
    return true;
  }

  if (entry->size < size * 2) {
    return true;
  }

  return false;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size, const char *tag,
                          size_t *size_out, fl_mem *mem_out) {
  lock_lock(&l->lock);
  int size_match = -1;
  int i;
  int ret = 1;
  for (i = 0; i < l->capacity; i++) {
    if (free_list_acceptable(size, tag, &l->entries[i]) &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    ret = 0;
  }
  lock_unlock(&l->lock);
  return ret;
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem *mem_out) {
  lock_lock(&l->lock);
  int ret = 1;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      ret = 0;
      break;
    }
  }
  lock_unlock(&l->lock);
  return ret;
}

// End of free_list.h.
// Start of event_list.h

typedef int (*event_report_fn)(struct str_builder*, void*);

struct event {
  void* data;
  event_report_fn f;
  const char* name;
  char *description;
};

struct event_list {
  struct event *events;
  int num_events;
  int capacity;
};

static void event_list_init(struct event_list *l) {
  l->capacity = 100;
  l->num_events = 0;
  l->events = calloc(l->capacity, sizeof(struct event));
}

static void event_list_free(struct event_list *l) {
  free(l->events);
}

static void add_event_to_list(struct event_list *l,
                              const char* name,
                              char* description,
                              void* data,
                              event_report_fn f) {
  if (l->num_events == l->capacity) {
    l->capacity *= 2;
    l->events = realloc(l->events, l->capacity * sizeof(struct event));
  }
  l->events[l->num_events].name = name;
  l->events[l->num_events].description = description;
  l->events[l->num_events].data = data;
  l->events[l->num_events].f = f;
  l->num_events++;
}

static int report_events_in_list(struct event_list *l,
                                 struct str_builder* sb) {
  int ret = 0;
  for (int i = 0; i < l->num_events; i++) {
    if (i != 0) {
      str_builder_str(sb, ",");
    }
    str_builder_str(sb, "{\"name\":");
    str_builder_json_str(sb, l->events[i].name);
    str_builder_str(sb, ",\"description\":");
    str_builder_json_str(sb, l->events[i].description);
    free(l->events[i].description);
    if (l->events[i].f(sb, l->events[i].data) != 0) {
      ret = 1;
      break;
    }
    str_builder(sb, "}");
  }
  event_list_free(l);
  event_list_init(l);
  return ret;
}

// End of event_list.h

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

SCALAR_FUN_ATTR int32_t futrts_to_bits32(float x);
SCALAR_FUN_ATTR float futrts_from_bits32(int32_t x);

SCALAR_FUN_ATTR uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

SCALAR_FUN_ATTR uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

SCALAR_FUN_ATTR uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

SCALAR_FUN_ATTR uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

#if ISPC

SCALAR_FUN_ATTR uint8_t udiv8(uint8_t x, uint8_t y) {
  // This strange pattern is used to prevent the ISPC compiler from
  // causing SIGFPEs and bogus results on divisions where inactive lanes
  // have 0-valued divisors. It ensures that any inactive lane instead
  // has a divisor of 1. https://github.com/ispc/ispc/issues/2292
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR uint16_t udiv16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR uint32_t udiv32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return x / ys;
}

SCALAR_FUN_ATTR uint64_t udiv64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return x / ys;
}

SCALAR_FUN_ATTR uint8_t udiv_up8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint16_t udiv_up16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint32_t udiv_up32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint64_t udiv_up64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint8_t umod8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR uint16_t umod16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return x % ys;
}

SCALAR_FUN_ATTR uint32_t umod32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR uint64_t umod64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint8_t umod_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR uint16_t umod_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR uint32_t umod_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR uint64_t umod_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int8_t sdiv8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int8_t q = x / ys;
  int8_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int16_t sdiv16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int16_t q = x / ys;
  int16_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int32_t sdiv32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  int32_t q = x / ys;
  int32_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int64_t sdiv64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int64_t q = x / ys;
  int64_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int8_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int16_t smod16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int16_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int32_t smod32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int32_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int64_t smod64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int64_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

SCALAR_FUN_ATTR int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

SCALAR_FUN_ATTR int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

SCALAR_FUN_ATTR int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

SCALAR_FUN_ATTR int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

SCALAR_FUN_ATTR int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

SCALAR_FUN_ATTR int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

SCALAR_FUN_ATTR int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

SCALAR_FUN_ATTR int8_t squot8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int16_t squot16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int32_t squot32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int64_t squot64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int8_t srem8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int16_t srem16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int32_t srem32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int64_t srem64(int64_t x, int64_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int8_t squot_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int16_t squot_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int32_t squot_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int64_t squot_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int8_t srem_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int16_t srem_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int32_t srem_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int64_t srem_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

#else

SCALAR_FUN_ATTR uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

SCALAR_FUN_ATTR int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

SCALAR_FUN_ATTR int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

SCALAR_FUN_ATTR int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

SCALAR_FUN_ATTR int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

SCALAR_FUN_ATTR int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

SCALAR_FUN_ATTR int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

SCALAR_FUN_ATTR int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

SCALAR_FUN_ATTR int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

#endif

SCALAR_FUN_ATTR int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

SCALAR_FUN_ATTR uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

SCALAR_FUN_ATTR uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

SCALAR_FUN_ATTR uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

SCALAR_FUN_ATTR uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool slt8(int8_t x, int8_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool slt16(int16_t x, int16_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool slt32(int32_t x, int32_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool slt64(int64_t x, int64_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR bool itob_i8_bool(int8_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR bool itob_i16_bool(int16_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR bool itob_i32_bool(int32_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR bool itob_i64_bool(int64_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR int8_t btoi_bool_i8(bool x) {
  return x;
}

SCALAR_FUN_ATTR int16_t btoi_bool_i16(bool x) {
  return x;
}

SCALAR_FUN_ATTR int32_t btoi_bool_i32(bool x) {
  return x;
}

SCALAR_FUN_ATTR int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

SCALAR_FUN_ATTR int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

SCALAR_FUN_ATTR int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

SCALAR_FUN_ATTR int32_t abs32(int32_t x) {
  return abs(x);
}

SCALAR_FUN_ATTR int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__) || defined(ISPC)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

SCALAR_FUN_ATTR int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

SCALAR_FUN_ATTR int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

SCALAR_FUN_ATTR int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

SCALAR_FUN_ATTR int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

SCALAR_FUN_ATTR int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

SCALAR_FUN_ATTR int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

SCALAR_FUN_ATTR int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR uint8_t  futrts_umul_hi8 ( uint8_t a,  uint8_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint8_t  futrts_smul_hi8 ( int8_t a,  int8_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint16_t futrts_smul_hi16(int16_t a, int16_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint32_t futrts_smul_hi32(int32_t a, int32_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_smul_hi64(int64_t a, int64_t b) { return mul_hi(a, b); }
#elif defined(__CUDA_ARCH__)
SCALAR_FUN_ATTR  uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return __umulhi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return __umul64hi(a, b); }
SCALAR_FUN_ATTR  uint8_t futrts_smul_hi8 ( int8_t a, int8_t b) { return ((int16_t)a) * ((int16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((int32_t)a) * ((int32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_smul_hi32(int32_t a, int32_t b) { return __mulhi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_smul_hi64(int64_t a, int64_t b) { return __mul64hi(a, b); }
#elif ISPC
SCALAR_FUN_ATTR uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 = al * bl;
  uint64_t p2 = al * bh;
  uint64_t p3 = ah * bl;
  uint64_t p4 = ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}
SCALAR_FUN_ATTR  int8_t futrts_smul_hi8 ( int8_t a,  int8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR int16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR int32_t futrts_smul_hi32(int32_t a, int32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
SCALAR_FUN_ATTR int64_t futrts_smul_hi64(int64_t a, int64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 =  al * bl;
  int64_t  p2 = al * bh;
  int64_t  p3 = ah * bl;
  uint64_t p4 =  ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}

#else // Not OpenCL, ISPC, or CUDA, but plain C.
SCALAR_FUN_ATTR uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return ((__uint128_t)a) * ((__uint128_t)b) >> 64; }
SCALAR_FUN_ATTR int8_t futrts_smul_hi8(int8_t a, int8_t b) { return ((int16_t)a) * ((int16_t)b) >> 8; }
SCALAR_FUN_ATTR int16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((int32_t)a) * ((int32_t)b) >> 16; }
SCALAR_FUN_ATTR int32_t futrts_smul_hi32(int32_t a, int32_t b) { return ((int64_t)a) * ((int64_t)b) >> 32; }
SCALAR_FUN_ATTR int64_t futrts_smul_hi64(int64_t a, int64_t b) { return ((__int128_t)a) * ((__int128_t)b) >> 64; }
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR  uint8_t futrts_umad_hi8 ( uint8_t a,  uint8_t b,  uint8_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint16_t futrts_umad_hi16(uint16_t a, uint16_t b, uint16_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint32_t futrts_umad_hi32(uint32_t a, uint32_t b, uint32_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint64_t futrts_umad_hi64(uint64_t a, uint64_t b, uint64_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR  uint8_t futrts_smad_hi8( int8_t a,  int8_t b,   int8_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint16_t futrts_smad_hi16(int16_t a, int16_t b, int16_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint32_t futrts_smad_hi32(int32_t a, int32_t b, int32_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint64_t futrts_smad_hi64(int64_t a, int64_t b, int64_t c) { return mad_hi(a, b, c); }
#else // Not OpenCL

SCALAR_FUN_ATTR  uint8_t futrts_umad_hi8( uint8_t a,  uint8_t b,  uint8_t c) { return futrts_umul_hi8(a, b) + c; }
SCALAR_FUN_ATTR uint16_t futrts_umad_hi16(uint16_t a, uint16_t b, uint16_t c) { return futrts_umul_hi16(a, b) + c; }
SCALAR_FUN_ATTR uint32_t futrts_umad_hi32(uint32_t a, uint32_t b, uint32_t c) { return futrts_umul_hi32(a, b) + c; }
SCALAR_FUN_ATTR uint64_t futrts_umad_hi64(uint64_t a, uint64_t b, uint64_t c) { return futrts_umul_hi64(a, b) + c; }
SCALAR_FUN_ATTR  uint8_t futrts_smad_hi8 ( int8_t a,  int8_t b,  int8_t c) { return futrts_smul_hi8(a, b) + c; }
SCALAR_FUN_ATTR uint16_t futrts_smad_hi16(int16_t a, int16_t b, int16_t c) { return futrts_smul_hi16(a, b) + c; }
SCALAR_FUN_ATTR uint32_t futrts_smad_hi32(int32_t a, int32_t b, int32_t c) { return futrts_smul_hi32(a, b) + c; }
SCALAR_FUN_ATTR uint64_t futrts_smad_hi64(int64_t a, int64_t b, int64_t c) { return futrts_smul_hi64(a, b) + c; }
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#elif ISPC

SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return count_leading_zeros((int32_t)(uint8_t)x)-24;
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return count_leading_zeros((int32_t)(uint16_t)x)-16;
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return count_leading_zeros(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return count_leading_zeros(x);
}

#else // Not OpenCL, ISPC or CUDA, but plain C.

SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#elif ISPC

SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : count_trailing_zeros((int32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : count_trailing_zeros((int32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  return count_trailing_zeros(x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  return count_trailing_zeros(x);
}

#else // Not OpenCL or CUDA, but plain C.

SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

SCALAR_FUN_ATTR float fdiv32(float x, float y) {
  return x / y;
}

SCALAR_FUN_ATTR float fadd32(float x, float y) {
  return x + y;
}

SCALAR_FUN_ATTR float fsub32(float x, float y) {
  return x - y;
}

SCALAR_FUN_ATTR float fmul32(float x, float y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt32(float x, float y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple32(float x, float y) {
  return x <= y;
}

SCALAR_FUN_ATTR float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
SCALAR_FUN_ATTR float fabs32(float x) {
  return fabs(x);
}

SCALAR_FUN_ATTR float fmax32(float x, float y) {
  return fmax(x, y);
}

SCALAR_FUN_ATTR float fmin32(float x, float y) {
  return fmin(x, y);
}

SCALAR_FUN_ATTR float fpow32(float x, float y) {
  return pow(x, y);
}

#elif ISPC

SCALAR_FUN_ATTR float fabs32(float x) {
  return abs(x);
}

SCALAR_FUN_ATTR float fmax32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

SCALAR_FUN_ATTR float fmin32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

SCALAR_FUN_ATTR float fpow32(float a, float b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

#else // Not OpenCL, but CUDA or plain C.

SCALAR_FUN_ATTR float fabs32(float x) {
  return fabsf(x);
}

SCALAR_FUN_ATTR float fmax32(float x, float y) {
  return fmaxf(x, y);
}

SCALAR_FUN_ATTR float fmin32(float x, float y) {
  return fminf(x, y);
}

SCALAR_FUN_ATTR float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

SCALAR_FUN_ATTR bool futrts_isnan32(float x) {
  return isnan(x);
}

#if ISPC

SCALAR_FUN_ATTR bool futrts_isinf32(float x) {
  return !isnan(x) && isnan(x - x);
}

SCALAR_FUN_ATTR bool futrts_isfinite32(float x) {
  return !isnan(x) && !futrts_isinf32(x);
}

#else

SCALAR_FUN_ATTR bool futrts_isinf32(float x) {
  return isinf(x);
}

#endif

SCALAR_FUN_ATTR int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

SCALAR_FUN_ATTR int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

SCALAR_FUN_ATTR int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

SCALAR_FUN_ATTR int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

SCALAR_FUN_ATTR uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

SCALAR_FUN_ATTR uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

SCALAR_FUN_ATTR uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

SCALAR_FUN_ATTR uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

SCALAR_FUN_ATTR bool ftob_f32_bool(float x) {
  return x != 0;
}

SCALAR_FUN_ATTR float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
SCALAR_FUN_ATTR float futrts_log32(float x) {
  return log(x);
}

SCALAR_FUN_ATTR float futrts_log2_32(float x) {
  return log2(x);
}

SCALAR_FUN_ATTR float futrts_log10_32(float x) {
  return log10(x);
}

SCALAR_FUN_ATTR float futrts_log1p_32(float x) {
  return log1p(x);
}

SCALAR_FUN_ATTR float futrts_sqrt32(float x) {
  return sqrt(x);
}

SCALAR_FUN_ATTR float futrts_cbrt32(float x) {
  return cbrt(x);
}

SCALAR_FUN_ATTR float futrts_exp32(float x) {
  return exp(x);
}

SCALAR_FUN_ATTR float futrts_cos32(float x) {
  return cos(x);
}

SCALAR_FUN_ATTR float futrts_sin32(float x) {
  return sin(x);
}

SCALAR_FUN_ATTR float futrts_tan32(float x) {
  return tan(x);
}

SCALAR_FUN_ATTR float futrts_acos32(float x) {
  return acos(x);
}

SCALAR_FUN_ATTR float futrts_asin32(float x) {
  return asin(x);
}

SCALAR_FUN_ATTR float futrts_atan32(float x) {
  return atan(x);
}

SCALAR_FUN_ATTR float futrts_cosh32(float x) {
  return cosh(x);
}

SCALAR_FUN_ATTR float futrts_sinh32(float x) {
  return sinh(x);
}

SCALAR_FUN_ATTR float futrts_tanh32(float x) {
  return tanh(x);
}

SCALAR_FUN_ATTR float futrts_acosh32(float x) {
  return acosh(x);
}

SCALAR_FUN_ATTR float futrts_asinh32(float x) {
  return asinh(x);
}

SCALAR_FUN_ATTR float futrts_atanh32(float x) {
  return atanh(x);
}

SCALAR_FUN_ATTR float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

SCALAR_FUN_ATTR float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

SCALAR_FUN_ATTR float futrts_gamma32(float x) {
  return tgamma(x);
}

SCALAR_FUN_ATTR float futrts_lgamma32(float x) {
  return lgamma(x);
}

SCALAR_FUN_ATTR float futrts_erf32(float x) {
  return erf(x);
}

SCALAR_FUN_ATTR float futrts_erfc32(float x) {
  return erfc(x);
}

SCALAR_FUN_ATTR float fmod32(float x, float y) {
  return fmod(x, y);
}

SCALAR_FUN_ATTR float futrts_round32(float x) {
  return rint(x);
}

SCALAR_FUN_ATTR float futrts_floor32(float x) {
  return floor(x);
}

SCALAR_FUN_ATTR float futrts_ceil32(float x) {
  return ceil(x);
}

SCALAR_FUN_ATTR float futrts_nextafter32(float x, float y) {
  return nextafter(x, y);
}

SCALAR_FUN_ATTR float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

SCALAR_FUN_ATTR float futrts_ldexp32(float x, int32_t y) {
  return ldexp(x, y);
}

SCALAR_FUN_ATTR float futrts_copysign32(float x, float y) {
  return copysign(x, y);
}

SCALAR_FUN_ATTR float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

SCALAR_FUN_ATTR float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#elif ISPC

SCALAR_FUN_ATTR float futrts_log32(float x) {
  return futrts_isfinite32(x) || (futrts_isinf32(x) && x < 0)? log(x) : x;
}

SCALAR_FUN_ATTR float futrts_log2_32(float x) {
  return futrts_log32(x) / log(2.0f);
}

SCALAR_FUN_ATTR float futrts_log10_32(float x) {
  return futrts_log32(x) / log(10.0f);
}

SCALAR_FUN_ATTR float futrts_log1p_32(float x) {
  if(x == -1.0f || (futrts_isinf32(x) && x > 0.0f)) return x / 0.0f;
  float y = 1.0f + x;
  float z = y - 1.0f;
  return log(y) - (z-x)/y;
}

SCALAR_FUN_ATTR float futrts_sqrt32(float x) {
  return sqrt(x);
}

extern "C" unmasked uniform float cbrtf(uniform float);
SCALAR_FUN_ATTR float futrts_cbrt32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR float futrts_exp32(float x) {
  return exp(x);
}

SCALAR_FUN_ATTR float futrts_cos32(float x) {
  return cos(x);
}

SCALAR_FUN_ATTR float futrts_sin32(float x) {
  return sin(x);
}

SCALAR_FUN_ATTR float futrts_tan32(float x) {
  return tan(x);
}

SCALAR_FUN_ATTR float futrts_acos32(float x) {
  return acos(x);
}

SCALAR_FUN_ATTR float futrts_asin32(float x) {
  return asin(x);
}

SCALAR_FUN_ATTR float futrts_atan32(float x) {
  return atan(x);
}

SCALAR_FUN_ATTR float futrts_cosh32(float x) {
  return (exp(x)+exp(-x)) / 2.0f;
}

SCALAR_FUN_ATTR float futrts_sinh32(float x) {
  return (exp(x)-exp(-x)) / 2.0f;
}

SCALAR_FUN_ATTR float futrts_tanh32(float x) {
  return futrts_sinh32(x)/futrts_cosh32(x);
}

SCALAR_FUN_ATTR float futrts_acosh32(float x) {
  float f = x+sqrt(x*x-1);
  if(futrts_isfinite32(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR float futrts_asinh32(float x) {
  float f = x+sqrt(x*x+1);
  if(futrts_isfinite32(f)) return log(f);
  return f;

}

SCALAR_FUN_ATTR float futrts_atanh32(float x) {
  float f = (1+x)/(1-x);
  if(futrts_isfinite32(f)) return log(f)/2.0f;
  return f;

}

SCALAR_FUN_ATTR float futrts_atan2_32(float x, float y) {
  return (x == 0.0f && y == 0.0f) ? 0.0f : atan2(x, y);
}

SCALAR_FUN_ATTR float futrts_hypot32(float x, float y) {
  if (futrts_isfinite32(x) && futrts_isfinite32(y)) {
    x = abs(x);
    y = abs(y);
    float a;
    float b;
    if (x >= y){
        a = x;
        b = y;
    } else {
        a = y;
        b = x;
    }
    if(b == 0){
      return a;
    }

    int e;
    float an;
    float bn;
    an = frexp (a, &e);
    bn = ldexp (b, - e);
    float cn;
    cn = sqrt (an * an + bn * bn);
    return ldexp (cn, e);
  } else {
    if (futrts_isinf32(x) || futrts_isinf32(y)) return INFINITY;
    else return x + y;
  }

}

extern "C" unmasked uniform float tgammaf(uniform float x);
SCALAR_FUN_ATTR float futrts_gamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = tgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
SCALAR_FUN_ATTR float futrts_lgamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = lgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erff(uniform float x);
SCALAR_FUN_ATTR float futrts_erf32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erff(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erfcf(uniform float x);
SCALAR_FUN_ATTR float futrts_erfc32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erfcf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR float fmod32(float x, float y) {
  return x - y * trunc(x/y);
}

SCALAR_FUN_ATTR float futrts_round32(float x) {
  return round(x);
}

SCALAR_FUN_ATTR float futrts_floor32(float x) {
  return floor(x);
}

SCALAR_FUN_ATTR float futrts_ceil32(float x) {
  return ceil(x);
}

extern "C" unmasked uniform float nextafterf(uniform float x, uniform float y);
SCALAR_FUN_ATTR float futrts_nextafter32(float x, float y) {
  float res;
  foreach_active (i) {
    uniform float r = nextafterf(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR float futrts_ldexp32(float x, int32_t y) {
  return x * pow((double)2.0, (double)y);
}

SCALAR_FUN_ATTR float futrts_copysign32(float x, float y) {
  int32_t xb = futrts_to_bits32(x);
  int32_t yb = futrts_to_bits32(y);
  return futrts_from_bits32((xb & ~(1<<31)) | (yb & (1<<31)));
}

SCALAR_FUN_ATTR float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

SCALAR_FUN_ATTR float futrts_fma32(float a, float b, float c) {
  return a * b + c;
}

#else // Not OpenCL or ISPC, but CUDA or plain C.

SCALAR_FUN_ATTR float futrts_log32(float x) {
  return logf(x);
}

SCALAR_FUN_ATTR float futrts_log2_32(float x) {
  return log2f(x);
}

SCALAR_FUN_ATTR float futrts_log10_32(float x) {
  return log10f(x);
}

SCALAR_FUN_ATTR float futrts_log1p_32(float x) {
  return log1pf(x);
}

SCALAR_FUN_ATTR float futrts_sqrt32(float x) {
  return sqrtf(x);
}

SCALAR_FUN_ATTR float futrts_cbrt32(float x) {
  return cbrtf(x);
}

SCALAR_FUN_ATTR float futrts_exp32(float x) {
  return expf(x);
}

SCALAR_FUN_ATTR float futrts_cos32(float x) {
  return cosf(x);
}

SCALAR_FUN_ATTR float futrts_sin32(float x) {
  return sinf(x);
}

SCALAR_FUN_ATTR float futrts_tan32(float x) {
  return tanf(x);
}

SCALAR_FUN_ATTR float futrts_acos32(float x) {
  return acosf(x);
}

SCALAR_FUN_ATTR float futrts_asin32(float x) {
  return asinf(x);
}

SCALAR_FUN_ATTR float futrts_atan32(float x) {
  return atanf(x);
}

SCALAR_FUN_ATTR float futrts_cosh32(float x) {
  return coshf(x);
}

SCALAR_FUN_ATTR float futrts_sinh32(float x) {
  return sinhf(x);
}

SCALAR_FUN_ATTR float futrts_tanh32(float x) {
  return tanhf(x);
}

SCALAR_FUN_ATTR float futrts_acosh32(float x) {
  return acoshf(x);
}

SCALAR_FUN_ATTR float futrts_asinh32(float x) {
  return asinhf(x);
}

SCALAR_FUN_ATTR float futrts_atanh32(float x) {
  return atanhf(x);
}

SCALAR_FUN_ATTR float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

SCALAR_FUN_ATTR float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

SCALAR_FUN_ATTR float futrts_gamma32(float x) {
  return tgammaf(x);
}

SCALAR_FUN_ATTR float futrts_lgamma32(float x) {
  return lgammaf(x);
}

SCALAR_FUN_ATTR float futrts_erf32(float x) {
  return erff(x);
}

SCALAR_FUN_ATTR float futrts_erfc32(float x) {
  return erfcf(x);
}

SCALAR_FUN_ATTR float fmod32(float x, float y) {
  return fmodf(x, y);
}

SCALAR_FUN_ATTR float futrts_round32(float x) {
  return rintf(x);
}

SCALAR_FUN_ATTR float futrts_floor32(float x) {
  return floorf(x);
}

SCALAR_FUN_ATTR float futrts_ceil32(float x) {
  return ceilf(x);
}

SCALAR_FUN_ATTR float futrts_nextafter32(float x, float y) {
  return nextafterf(x, y);
}

SCALAR_FUN_ATTR float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR float futrts_ldexp32(float x, int32_t y) {
  return ldexpf(x, y);
}

SCALAR_FUN_ATTR float futrts_copysign32(float x, float y) {
  return copysignf(x, y);
}

SCALAR_FUN_ATTR float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

SCALAR_FUN_ATTR float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

#if ISPC
SCALAR_FUN_ATTR int32_t futrts_to_bits32(float x) {
  return intbits(x);
}

SCALAR_FUN_ATTR float futrts_from_bits32(int32_t x) {
  return floatbits(x);
}
#else
SCALAR_FUN_ATTR int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}
#endif

SCALAR_FUN_ATTR float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#ifdef FUTHARK_F64_ENABLED

SCALAR_FUN_ATTR double futrts_from_bits64(int64_t x);
SCALAR_FUN_ATTR int64_t futrts_to_bits64(double x);

#if ISPC
SCALAR_FUN_ATTR bool futrts_isinf64(float x) {
  return !isnan(x) && isnan(x - x);
}

SCALAR_FUN_ATTR bool futrts_isfinite64(float x) {
  return !isnan(x) && !futrts_isinf64(x);
}

SCALAR_FUN_ATTR double fdiv64(double x, double y) {
  return x / y;
}

SCALAR_FUN_ATTR double fadd64(double x, double y) {
  return x + y;
}

SCALAR_FUN_ATTR double fsub64(double x, double y) {
  return x - y;
}

SCALAR_FUN_ATTR double fmul64(double x, double y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt64(double x, double y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple64(double x, double y) {
  return x <= y;
}

SCALAR_FUN_ATTR double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double fabs64(double x) {
  return abs(x);
}

SCALAR_FUN_ATTR double fmax64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

SCALAR_FUN_ATTR double fmin64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

SCALAR_FUN_ATTR double fpow64(double a, double b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

SCALAR_FUN_ATTR double futrts_log64(double x) {
  return futrts_isfinite64(x) || (futrts_isinf64(x) && x < 0)? log(x) : x;
}

SCALAR_FUN_ATTR double futrts_log2_64(double x) {
  return futrts_log64(x)/log(2.0d);
}

SCALAR_FUN_ATTR double futrts_log10_64(double x) {
  return futrts_log64(x)/log(10.0d);
}

SCALAR_FUN_ATTR double futrts_log1p_64(double x) {
  if(x == -1.0d || (futrts_isinf64(x) && x > 0.0d)) return x / 0.0d;
  double y = 1.0d + x;
  double z = y - 1.0d;
  return log(y) - (z-x)/y;
}

SCALAR_FUN_ATTR double futrts_sqrt64(double x) {
  return sqrt(x);
}

extern "C" unmasked uniform double cbrt(uniform double);
SCALAR_FUN_ATTR double futrts_cbrt64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_exp64(double x) {
  return exp(x);
}

SCALAR_FUN_ATTR double futrts_cos64(double x) {
  return cos(x);
}

SCALAR_FUN_ATTR double futrts_sin64(double x) {
  return sin(x);
}

SCALAR_FUN_ATTR double futrts_tan64(double x) {
  return tan(x);
}

SCALAR_FUN_ATTR double futrts_acos64(double x) {
  return acos(x);
}

SCALAR_FUN_ATTR double futrts_asin64(double x) {
  return asin(x);
}

SCALAR_FUN_ATTR double futrts_atan64(double x) {
  return atan(x);
}

SCALAR_FUN_ATTR double futrts_cosh64(double x) {
  return (exp(x)+exp(-x)) / 2.0d;
}

SCALAR_FUN_ATTR double futrts_sinh64(double x) {
  return (exp(x)-exp(-x)) / 2.0d;
}

SCALAR_FUN_ATTR double futrts_tanh64(double x) {
  return futrts_sinh64(x)/futrts_cosh64(x);
}

SCALAR_FUN_ATTR double futrts_acosh64(double x) {
  double f = x+sqrt(x*x-1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR double futrts_asinh64(double x) {
  double f = x+sqrt(x*x+1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR double futrts_atanh64(double x) {
  double f = (1.0d+x)/(1.0d-x);
  if(futrts_isfinite64(f)) return log(f)/2.0d;
  return f;

}

SCALAR_FUN_ATTR double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

extern "C" unmasked uniform double hypot(uniform double x, uniform double y);
SCALAR_FUN_ATTR double futrts_hypot64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = hypot(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double tgamma(uniform double x);
SCALAR_FUN_ATTR double futrts_gamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = tgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double lgamma(uniform double x);
SCALAR_FUN_ATTR double futrts_lgamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = lgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erf(uniform double x);
SCALAR_FUN_ATTR double futrts_erf64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erfc(uniform double x);
SCALAR_FUN_ATTR double futrts_erfc64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erfc(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_fma64(double a, double b, double c) {
  return a * b + c;
}

SCALAR_FUN_ATTR double futrts_round64(double x) {
  return round(x);
}

SCALAR_FUN_ATTR double futrts_ceil64(double x) {
  return ceil(x);
}

extern "C" unmasked uniform double nextafter(uniform float x, uniform double y);
SCALAR_FUN_ATTR float futrts_nextafter64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = nextafter(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_floor64(double x) {
  return floor(x);
}

SCALAR_FUN_ATTR bool futrts_isnan64(double x) {
  return isnan(x);
}

SCALAR_FUN_ATTR int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

SCALAR_FUN_ATTR int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

SCALAR_FUN_ATTR int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

SCALAR_FUN_ATTR int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

SCALAR_FUN_ATTR uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

SCALAR_FUN_ATTR uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

SCALAR_FUN_ATTR uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

SCALAR_FUN_ATTR uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

SCALAR_FUN_ATTR bool ftob_f64_bool(double x) {
  return x != 0.0;
}

SCALAR_FUN_ATTR double btof_bool_f64(bool x) {
  return x ? 1.0 : 0.0;
}

SCALAR_FUN_ATTR int64_t futrts_to_bits64(double x) {
  int64_t res;
  foreach_active (i) {
    uniform double tmp = extract(x, i);
    uniform int64_t r = *((uniform int64_t* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_from_bits64(int64_t x) {
  double res;
  foreach_active (i) {
    uniform int64_t tmp = extract(x, i);
    uniform double r = *((uniform double* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double fmod64(double x, double y) {
  return x - y * trunc(x/y);
}

SCALAR_FUN_ATTR double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0 ? 1.0d : 0.0d) - (x < 0 ? 1.0d : 0.0d);
}

SCALAR_FUN_ATTR double futrts_lerp64(double v0, double v1, double t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR double futrts_ldexp64(double x, int32_t y) {
  return x * pow((double)2.0, (double)y);
}

SCALAR_FUN_ATTR double futrts_copysign64(double x, double y) {
  int64_t xb = futrts_to_bits64(x);
  int64_t yb = futrts_to_bits64(y);
  return futrts_from_bits64((xb & ~(((int64_t)1)<<63)) | (yb & (((int64_t)1)<<63)));
}

SCALAR_FUN_ATTR double futrts_mad64(double a, double b, double c) {
  return a * b + c;
}

SCALAR_FUN_ATTR float fpconv_f32_f32(float x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f32_f64(float x) {
  return (double) x;
}

SCALAR_FUN_ATTR float fpconv_f64_f32(double x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f64_f64(double x) {
  return (double) x;
}

#else

SCALAR_FUN_ATTR double fdiv64(double x, double y) {
  return x / y;
}

SCALAR_FUN_ATTR double fadd64(double x, double y) {
  return x + y;
}

SCALAR_FUN_ATTR double fsub64(double x, double y) {
  return x - y;
}

SCALAR_FUN_ATTR double fmul64(double x, double y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt64(double x, double y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple64(double x, double y) {
  return x <= y;
}

SCALAR_FUN_ATTR double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double fabs64(double x) {
  return fabs(x);
}

SCALAR_FUN_ATTR double fmax64(double x, double y) {
  return fmax(x, y);
}

SCALAR_FUN_ATTR double fmin64(double x, double y) {
  return fmin(x, y);
}

SCALAR_FUN_ATTR double fpow64(double x, double y) {
  return pow(x, y);
}

SCALAR_FUN_ATTR double futrts_log64(double x) {
  return log(x);
}

SCALAR_FUN_ATTR double futrts_log2_64(double x) {
  return log2(x);
}

SCALAR_FUN_ATTR double futrts_log10_64(double x) {
  return log10(x);
}

SCALAR_FUN_ATTR double futrts_log1p_64(double x) {
  return log1p(x);
}

SCALAR_FUN_ATTR double futrts_sqrt64(double x) {
  return sqrt(x);
}

SCALAR_FUN_ATTR double futrts_cbrt64(double x) {
  return cbrt(x);
}

SCALAR_FUN_ATTR double futrts_exp64(double x) {
  return exp(x);
}

SCALAR_FUN_ATTR double futrts_cos64(double x) {
  return cos(x);
}

SCALAR_FUN_ATTR double futrts_sin64(double x) {
  return sin(x);
}

SCALAR_FUN_ATTR double futrts_tan64(double x) {
  return tan(x);
}

SCALAR_FUN_ATTR double futrts_acos64(double x) {
  return acos(x);
}

SCALAR_FUN_ATTR double futrts_asin64(double x) {
  return asin(x);
}

SCALAR_FUN_ATTR double futrts_atan64(double x) {
  return atan(x);
}

SCALAR_FUN_ATTR double futrts_cosh64(double x) {
  return cosh(x);
}

SCALAR_FUN_ATTR double futrts_sinh64(double x) {
  return sinh(x);
}

SCALAR_FUN_ATTR double futrts_tanh64(double x) {
  return tanh(x);
}

SCALAR_FUN_ATTR double futrts_acosh64(double x) {
  return acosh(x);
}

SCALAR_FUN_ATTR double futrts_asinh64(double x) {
  return asinh(x);
}

SCALAR_FUN_ATTR double futrts_atanh64(double x) {
  return atanh(x);
}

SCALAR_FUN_ATTR double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

SCALAR_FUN_ATTR double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

SCALAR_FUN_ATTR double futrts_gamma64(double x) {
  return tgamma(x);
}

SCALAR_FUN_ATTR double futrts_lgamma64(double x) {
  return lgamma(x);
}

SCALAR_FUN_ATTR double futrts_erf64(double x) {
  return erf(x);
}

SCALAR_FUN_ATTR double futrts_erfc64(double x) {
  return erfc(x);
}

SCALAR_FUN_ATTR double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

SCALAR_FUN_ATTR double futrts_round64(double x) {
  return rint(x);
}

SCALAR_FUN_ATTR double futrts_ceil64(double x) {
  return ceil(x);
}

SCALAR_FUN_ATTR float futrts_nextafter64(float x, float y) {
  return nextafter(x, y);
}

SCALAR_FUN_ATTR double futrts_floor64(double x) {
  return floor(x);
}

SCALAR_FUN_ATTR bool futrts_isnan64(double x) {
  return isnan(x);
}

SCALAR_FUN_ATTR bool futrts_isinf64(double x) {
  return isinf(x);
}

SCALAR_FUN_ATTR int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

SCALAR_FUN_ATTR int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

SCALAR_FUN_ATTR int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

SCALAR_FUN_ATTR int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

SCALAR_FUN_ATTR uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

SCALAR_FUN_ATTR uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

SCALAR_FUN_ATTR uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

SCALAR_FUN_ATTR uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

SCALAR_FUN_ATTR bool ftob_f64_bool(double x) {
  return x != 0;
}

SCALAR_FUN_ATTR double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

SCALAR_FUN_ATTR int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR double fmod64(double x, double y) {
  return fmod(x, y);
}

SCALAR_FUN_ATTR double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

SCALAR_FUN_ATTR double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

SCALAR_FUN_ATTR double futrts_ldexp64(double x, int32_t y) {
  return ldexp(x, y);
}

SCALAR_FUN_ATTR float futrts_copysign64(double x, double y) {
  return copysign(x, y);
}

SCALAR_FUN_ATTR double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

SCALAR_FUN_ATTR float fpconv_f32_f32(float x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f32_f64(float x) {
  return (double) x;
}

SCALAR_FUN_ATTR float fpconv_f64_f32(double x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600) && !(defined(ISPC))
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#elif ISPC
typedef float16 f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

SCALAR_FUN_ATTR f16 fadd16(f16 x, f16 y) {
  return x + y;
}

SCALAR_FUN_ATTR f16 fsub16(f16 x, f16 y) {
  return x - y;
}

SCALAR_FUN_ATTR f16 fmul16(f16 x, f16 y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt16(f16 x, f16 y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple16(f16 x, f16 y) {
  return x <= y;
}

SCALAR_FUN_ATTR f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

SCALAR_FUN_ATTR int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

SCALAR_FUN_ATTR int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

SCALAR_FUN_ATTR int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

SCALAR_FUN_ATTR uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

SCALAR_FUN_ATTR uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

SCALAR_FUN_ATTR uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

SCALAR_FUN_ATTR uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

SCALAR_FUN_ATTR bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

SCALAR_FUN_ATTR f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16
SCALAR_FUN_ATTR bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

#ifdef __OPENCL_VERSION__

SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return fabs(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#elif ISPC
SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return abs(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : max(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : min(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return fabsf(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

#if ISPC
SCALAR_FUN_ATTR bool futrts_isinf16(float x) {
  return !futrts_isnan16(x) && futrts_isnan16(x - x);
}
SCALAR_FUN_ATTR bool futrts_isfinite16(float x) {
  return !futrts_isnan16(x) && !futrts_isinf16(x);
}

#else

SCALAR_FUN_ATTR bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}
#endif

#ifdef __OPENCL_VERSION__
SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return log(x);
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return log2(x);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return log10(x);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  return log1p(x);
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  return cbrt(x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return exp(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return cos(x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return sin(x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return tan(x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return acos(x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return asin(x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return atan(x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  return erf(x);
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  return erfc(x);
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return rint(x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return floor(x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return nextafter(x, y);
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return ldexp(x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return copysign(x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}
#elif ISPC

SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return futrts_isfinite16(x) || (futrts_isinf16(x) && x < 0) ? log(x) : x;
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return futrts_log16(x) / log(2.0f16);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return futrts_log16(x) / log(10.0f16);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  if(x == -1.0f16 || (futrts_isinf16(x) && x > 0.0f16)) return x / 0.0f16;
  f16 y = 1.0f16 + x;
  f16 z = y - 1.0f16;
  return log(y) - (z-x)/y;
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return (float16)sqrt((float)x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return exp(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return (float16)cos((float)x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return (float16)sin((float)x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return (float16)tan((float)x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return (float16)acos((float)x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return (float16)asin((float)x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return (float16)atan((float)x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return (exp(x)+exp(-x)) / 2.0f16;
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return (exp(x)-exp(-x)) / 2.0f16;
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return futrts_sinh16(x)/futrts_cosh16(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x-1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x+1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  float16 f = (1+x)/(1-x);
  if(futrts_isfinite16(f)) return log(f)/2.0f16;
  return f;
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return (float16)atan2((float)x, (float)y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return (float16)futrts_hypot32((float)x, (float)y);
}

extern "C" unmasked uniform float tgammaf(uniform float x);
SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)tgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)lgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  f16 res = (f16)futrts_cbrt32((float)x);
  return res;
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  f16 res = (f16)futrts_erf32((float)x);
  return res;
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  f16 res = (f16)futrts_erfc32((float)x);
  return res;
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return x - y * (float16)trunc((float) (x/y));
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return (float16)round((float)x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return (float16)floor((float)x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return (float16)ceil((float)x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return (float16)futrts_nextafter32((float)x, (float) y);
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return futrts_ldexp32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return futrts_copysign32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

#else // Assume CUDA.

SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return hlog(x);
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  return (f16)log1pf((float)x);
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  return cbrtf(x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return hexp(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return hcos(x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return hsin(x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return tanf(x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return acosf(x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return asinf(x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return atanf(x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  return erff(x);
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  return erfcf(x);
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return rintf(x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return __ushort_as_half(halfbitsnextafter(__half_as_ushort(x), __half_as_ushort(y)));
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return futrts_ldexp32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return futrts_copysign32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#elif ISPC

SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  varying int16_t y = *((varying int16_t * uniform)&x);
  return y;
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  varying f16 y = *((varying f16 * uniform)&x);
  return y;
}
#else
SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return fabs32(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

SCALAR_FUN_ATTR bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

SCALAR_FUN_ATTR bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  return futrts_log1p_32(x);
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  return futrts_cbrt32(x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  return futrts_erf32(x);
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  return futrts_erfc32(x);
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return halfbits2float(halfbitsnextafter(float2halfbits(x), float2halfbits(y)));
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return futrts_ldexp32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return futrts_copysign32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

SCALAR_FUN_ATTR f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#endif

#endif

SCALAR_FUN_ATTR float fpconv_f16_f16(f16 x) {
  return x;
}

SCALAR_FUN_ATTR float fpconv_f16_f32(f16 x) {
  return x;
}

SCALAR_FUN_ATTR f16 fpconv_f32_f16(float x) {
  return (f16) x;
}

#ifdef FUTHARK_F64_ENABLED

SCALAR_FUN_ATTR double fpconv_f16_f64(f16 x) {
  return (double) x;
}

#if ISPC
SCALAR_FUN_ATTR f16 fpconv_f64_f16(double x) {
  return (f16) ((float)x);
}
#else
SCALAR_FUN_ATTR f16 fpconv_f64_f16(double x) {
  return (f16) x;
}
#endif
#endif


// End of scalar_f16.h.

// Start of context_prototypes.h
//
// Prototypes for the functions in context.h, or that will be called
// from those functions, that need to be available very early.

struct futhark_context_config;
struct futhark_context;

static void set_error(struct futhark_context* ctx, char *error);

// These are called in context/config new/free functions and contain
// shared setup.  They are generated by the compiler itself.
static int init_constants(struct futhark_context*);
static int free_constants(struct futhark_context*);
static void setup_program(struct futhark_context* ctx);
static void teardown_program(struct futhark_context *ctx);

// Allocate host memory.  Must be freed with host_free().
static void host_alloc(struct futhark_context* ctx, size_t size, const char* tag, size_t* size_out, void** mem_out);
// Allocate memory allocated with host_alloc().
static void host_free(struct futhark_context* ctx, size_t size, const char* tag, void* mem);

// Log that a copy has occurred.
static void log_copy(struct futhark_context* ctx,
                     const char *kind, int r,
                     int64_t dst_offset, int64_t dst_strides[r],
                     int64_t src_offset, int64_t src_strides[r],
                     int64_t shape[r]);

static void log_transpose(struct futhark_context* ctx,
                          int64_t k, int64_t m, int64_t n);

static bool lmad_map_tr(int64_t *num_arrays_out, int64_t *n_out, int64_t *m_out,
                        int r,
                        const int64_t dst_strides[r],
                        const int64_t src_strides[r],
                        const int64_t shape[r]);

static bool lmad_contiguous(int r, int64_t strides[r], int64_t shape[r]);

static bool lmad_memcpyable(int r,
                            int64_t dst_strides[r], int64_t src_strides[r], int64_t shape[r]);

static void add_event(struct futhark_context* ctx,
                      const char* name,
                      char* description,
                      void* data,
                      event_report_fn f);

// Functions that must be defined by the backend.
static void backend_context_config_setup(struct futhark_context_config* cfg);
static void backend_context_config_teardown(struct futhark_context_config* cfg);
static int backend_context_setup(struct futhark_context *ctx);
static void backend_context_teardown(struct futhark_context *ctx);

// End of of context_prototypes.h

struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct constants {
    int dummy;
};
struct tuning_params {
    int dummy;
};
static const int num_tuning_params = 0;
static const char *tuning_param_names[] = {NULL};
static const char *tuning_param_vars[] = {NULL};
static const char *tuning_param_classes[] = {NULL};
static int64_t tuning_param_defaults[] = {0};
// Start of backends/c.h

struct futhark_context_config {
  int in_use;
  int debugging;
  int profiling;
  int logging;
  char *cache_fname;
  int num_tuning_params;
  int64_t *tuning_params;
  const char** tuning_param_names;
  const char** tuning_param_vars;
  const char** tuning_param_classes;
};

static void backend_context_config_setup(struct futhark_context_config* cfg) {
  (void)cfg;
}

static void backend_context_config_teardown(struct futhark_context_config* cfg) {
  (void)cfg;
}

int futhark_context_config_set_tuning_param(struct futhark_context_config* cfg, const char *param_name, size_t param_value) {
  (void)cfg; (void)param_name; (void)param_value;
  return 1;
}

struct futhark_context {
  struct futhark_context_config* cfg;
  int detail_memory;
  int debugging;
  int profiling;
  int profiling_paused;
  int logging;
  lock_t lock;
  char *error;
  lock_t error_lock;
  FILE *log;
  struct constants *constants;
  struct free_list free_list;
  struct event_list event_list;
  int64_t peak_mem_usage_default;
  int64_t cur_mem_usage_default;
  struct program* program;
  bool program_initialised;
};

int backend_context_setup(struct futhark_context* ctx) {
  (void)ctx;
  return 0;
}

void backend_context_teardown(struct futhark_context* ctx) {
  (void)ctx;
}

int futhark_context_sync(struct futhark_context* ctx) {
  (void)ctx;
  return 0;
}

// End of backends/c.h

struct program {
    int dummy;
};
static void setup_program(struct futhark_context *ctx)
{
    (void) ctx;
    
    int error = 0;
    
    (void) error;
    ctx->program = malloc(sizeof(struct program));
}
static void teardown_program(struct futhark_context *ctx)
{
    (void) ctx;
    
    int error = 0;
    
    (void) error;
    free(ctx->program);
}
static void set_tuning_params(struct futhark_context *ctx)
{
    (void) ctx;
}
int memblock_unref(struct futhark_context *ctx, struct memblock *block, const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log, "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n", desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            host_free(ctx, (size_t) block->size, desc, (void *) block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log, "%lld bytes freed (now allocated: %lld bytes)\n", (long long) block->size, (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
int memblock_alloc(struct futhark_context *ctx, struct memblock *block, int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1, "Negative allocation of %lld bytes attempted for %s in %s.\n", (long long) size, desc, "default space", ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log, "Allocating %lld bytes for %s in %s (currently allocated: %lld bytes).\n", (long long) size, desc, "default space", (long long) ctx->cur_mem_usage_default);
    host_alloc(ctx, (size_t) size, desc, (size_t *) &size, (void *) &block->mem);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        
        long long new_usage = ctx->cur_mem_usage_default + size;
        
        if (ctx->detail_memory)
            fprintf(ctx->log, "Received block of %lld bytes; now allocated: %lld bytes", (long long) block->size, new_usage);
        ctx->cur_mem_usage_default = new_usage;
        if (new_usage > ctx->peak_mem_usage_default) {
            ctx->peak_mem_usage_default = new_usage;
            if (ctx->detail_memory)
                fprintf(ctx->log, " (new peak).\n");
        } else if (ctx->detail_memory)
            fprintf(ctx->log, ".\n");
        return FUTHARK_SUCCESS;
    } else {
        // We are naively assuming that any memory allocation error is due to OOM.
        lock_lock(&ctx->error_lock);
        
        char *old_error = ctx->error;
        
        ctx->error = msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s", "default space", (long long) size, (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        lock_unlock(&ctx->error_lock);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
int memblock_set(struct futhark_context *ctx, struct memblock *lhs, struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    str_builder_char(&builder, '{');
    str_builder_str(&builder, "\"memory\":{");
    str_builder(&builder, "\"default space\": %lld", (long long) ctx->peak_mem_usage_default);
    str_builder_str(&builder, "},\"events\":[");
    if (report_events_in_list(&ctx->event_list, &builder) != 0) {
        free(builder.str);
        return NULL;
    } else {
        str_builder_str(&builder, "]}");
        return builder.str;
    }
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

// Start of context.h

// Internal functions.

static void set_error(struct futhark_context* ctx, char *error) {
  lock_lock(&ctx->error_lock);
  if (ctx->error == NULL) {
    ctx->error = error;
  } else {
    free(error);
  }
  lock_unlock(&ctx->error_lock);
}

// XXX: should be static, but used in ispc_util.h
void lexical_realloc_error(struct futhark_context* ctx, size_t new_size) {
  set_error(ctx,
            msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                      (long long) new_size));
}

static int lexical_realloc(struct futhark_context *ctx,
                           unsigned char **ptr,
                           int64_t *old_size,
                           int64_t new_size) {
  unsigned char *new = realloc(*ptr, (size_t)new_size);
  if (new == NULL) {
    lexical_realloc_error(ctx, new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

static void free_all_in_free_list(struct futhark_context* ctx) {
  fl_mem mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, (fl_mem*)&mem) == 0) {
    free((void*)mem);
  }
}

static int is_small_alloc(size_t size) {
  return size < 1024*1024;
}

static void host_alloc(struct futhark_context* ctx,
                       size_t size, const char* tag, size_t* size_out, void** mem_out) {
  if (is_small_alloc(size) || free_list_find(&ctx->free_list, size, tag, size_out, (fl_mem*)mem_out) != 0) {
    *size_out = size;
    *mem_out = malloc(size);
  }
}

static void host_free(struct futhark_context* ctx,
                      size_t size, const char* tag, void* mem) {
  // Small allocations are handled by malloc()s own free list.  The
  // threshold here is kind of arbitrary, but seems to work OK.
  // Larger allocations are mmap()ed/munmapped() every time, which is
  // very slow, and Futhark programs tend to use a few very large
  // allocations.
  if (is_small_alloc(size)) {
    free(mem);
  } else {
    free_list_insert(&ctx->free_list, size, (fl_mem)mem, tag);
  }
}

static void add_event(struct futhark_context* ctx,
                      const char* name,
                      char* description,
                      void* data,
                      event_report_fn f) {
  if (ctx->logging) {
    fprintf(ctx->log, "Event: %s\n%s\n", name, description);
  }
  add_event_to_list(&ctx->event_list, name, description, data, f);
}

char *futhark_context_get_error(struct futhark_context *ctx) {
  char *error = ctx->error;
  ctx->error = NULL;
  return error;
}

void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag) {
    cfg->profiling = cfg->logging = cfg->debugging = flag;
}

void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag) {
    cfg->profiling = flag;
}

void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag) {
    cfg->logging = flag;
}

void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f) {
  cfg->cache_fname = strdup(f);
}

int futhark_get_tuning_param_count(void) {
  return num_tuning_params;
}

const char *futhark_get_tuning_param_name(int i) {
  return tuning_param_names[i];
}

const char *futhark_get_tuning_param_class(int i) {
    return tuning_param_classes[i];
}

void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f){
  ctx->log = f;
}

void futhark_context_pause_profiling(struct futhark_context *ctx) {
  ctx->profiling_paused = 1;
}

void futhark_context_unpause_profiling(struct futhark_context *ctx) {
  ctx->profiling_paused = 0;
}

struct futhark_context_config* futhark_context_config_new(void) {
  struct futhark_context_config* cfg = malloc(sizeof(struct futhark_context_config));
  if (cfg == NULL) {
    return NULL;
  }
  cfg->in_use = 0;
  cfg->debugging = 0;
  cfg->profiling = 0;
  cfg->logging = 0;
  cfg->cache_fname = NULL;
  cfg->num_tuning_params = num_tuning_params;
  cfg->tuning_params = malloc(cfg->num_tuning_params * sizeof(int64_t));
  memcpy(cfg->tuning_params, tuning_param_defaults,
         cfg->num_tuning_params * sizeof(int64_t));
  cfg->tuning_param_names = tuning_param_names;
  cfg->tuning_param_vars = tuning_param_vars;
  cfg->tuning_param_classes = tuning_param_classes;
  backend_context_config_setup(cfg);
  return cfg;
}

void futhark_context_config_free(struct futhark_context_config* cfg) {
  assert(!cfg->in_use);
  backend_context_config_teardown(cfg);
  free(cfg->cache_fname);
  free(cfg->tuning_params);
  free(cfg);
}

struct futhark_context* futhark_context_new(struct futhark_context_config* cfg) {
  struct futhark_context* ctx = malloc(sizeof(struct futhark_context));
  if (ctx == NULL) {
    return NULL;
  }
  assert(!cfg->in_use);
  ctx->cfg = cfg;
  ctx->cfg->in_use = 1;
  ctx->program_initialised = false;
  create_lock(&ctx->error_lock);
  create_lock(&ctx->lock);
  free_list_init(&ctx->free_list);
  event_list_init(&ctx->event_list);
  ctx->peak_mem_usage_default = 0;
  ctx->cur_mem_usage_default = 0;
  ctx->constants = malloc(sizeof(struct constants));
  ctx->debugging = cfg->debugging;
  ctx->logging = cfg->logging;
  ctx->detail_memory = cfg->logging;
  ctx->profiling = cfg->profiling;
  ctx->profiling_paused = 0;
  ctx->error = NULL;
  ctx->log = stderr;
  set_tuning_params(ctx);
  if (backend_context_setup(ctx) == 0) {
    setup_program(ctx);
    init_constants(ctx);
    ctx->program_initialised = true;
    (void)futhark_context_clear_caches(ctx);
    (void)futhark_context_sync(ctx);
  }
  return ctx;
}

void futhark_context_free(struct futhark_context* ctx) {
  if (ctx->program_initialised) {
    free_constants(ctx);
    teardown_program(ctx);
  }
  backend_context_teardown(ctx);
  free_all_in_free_list(ctx);
  free_list_destroy(&ctx->free_list);
  event_list_free(&ctx->event_list);
  free(ctx->constants);
  free(ctx->error);
  free_lock(&ctx->lock);
  free_lock(&ctx->error_lock);
  ctx->cfg->in_use = 0;
  free(ctx);
}

// End of context.h

// Start of copy.h

// Cache-oblivious map-transpose function.
#define GEN_MAP_TRANSPOSE(NAME, ELEM_TYPE)                              \
  static void map_transpose_##NAME                                      \
  (ELEM_TYPE* dst, ELEM_TYPE* src,                                      \
   int64_t k, int64_t m, int64_t n,                                     \
   int64_t cb, int64_t ce, int64_t rb, int64_t re)                      \
  {                                                                     \
  int32_t r = re - rb;                                                  \
  int32_t c = ce - cb;                                                  \
  if (k == 1) {                                                         \
    if (r <= 64 && c <= 64) {                                           \
      for (int64_t j = 0; j < c; j++) {                                 \
        for (int64_t i = 0; i < r; i++) {                               \
          dst[(j + cb) * n + (i + rb)] = src[(i + rb) * m + (j + cb)];  \
        }                                                               \
      }                                                                 \
    } else if (c <= r) {                                                \
      map_transpose_##NAME(dst, src, k, m, n, cb, ce, rb, rb + r/2);    \
      map_transpose_##NAME(dst, src, k, m, n, cb, ce, rb + r/2, re);    \
    } else {                                                            \
      map_transpose_##NAME(dst, src, k, m, n, cb, cb + c/2, rb, re);    \
      map_transpose_##NAME(dst, src, k, m, n, cb + c/2, ce, rb, re);    \
    }                                                                   \
  } else {                                                              \
  for (int64_t i = 0; i < k; i++) {                                     \
    map_transpose_##NAME(dst + i * m * n, src + i * m * n, 1, m, n, cb, ce, rb, re); \
  }\
} \
}

// Straightforward LMAD copy function.
#define GEN_LMAD_COPY_ELEMENTS(NAME, ELEM_TYPE)                         \
  static void lmad_copy_elements_##NAME(int r,                          \
                                        ELEM_TYPE* dst, int64_t dst_strides[r], \
                                        ELEM_TYPE *src, int64_t src_strides[r], \
                                        int64_t shape[r]) {             \
    if (r == 1) {                                                       \
      for (int i = 0; i < shape[0]; i++) {                              \
        dst[i*dst_strides[0]] = src[i*src_strides[0]];                  \
      }                                                                 \
    } else if (r > 1) {                                                 \
      for (int i = 0; i < shape[0]; i++) {                              \
        lmad_copy_elements_##NAME(r-1,                                  \
                                  dst+i*dst_strides[0], dst_strides+1,  \
                                  src+i*src_strides[0], src_strides+1,  \
                                  shape+1);                             \
      }                                                                 \
    }                                                                   \
  }                                                                     \

// Check whether this LMAD can be seen as a transposed 2D array.  This
// is done by checking every possible splitting point.
static bool lmad_is_tr(int64_t *n_out, int64_t *m_out,
                       int r,
                       const int64_t strides[r],
                       const int64_t shape[r]) {
  for (int i = 1; i < r; i++) {
    int n = 1, m = 1;
    bool ok = true;
    int64_t expected = 1;
    // Check strides before 'i'.
    for (int j = i-1; j >= 0; j--) {
      ok = ok && strides[j] == expected;
      expected *= shape[j];
      n *= shape[j];
    }
    // Check strides after 'i'.
    for (int j = r-1; j >= i; j--) {
      ok = ok && strides[j] == expected;
      expected *= shape[j];
      m *= shape[j];
    }
    if (ok) {
      *n_out = n;
      *m_out = m;
      return true;
    }
  }
  return false;
}

// This function determines whether the a 'dst' LMAD is row-major and
// 'src' LMAD is column-major.  Both LMADs are for arrays of the same
// shape.  Both LMADs are allowed to have additional dimensions "on
// top".  Essentially, this function determines whether a copy from
// 'src' to 'dst' is a "map(transpose)" that we know how to implement
// efficiently.  The LMADs can have arbitrary rank, and the main
// challenge here is checking whether the src LMAD actually
// corresponds to a 2D column-major layout by morally collapsing
// dimensions.  There is a lot of looping here, but the actual trip
// count is going to be very low in practice.
//
// Returns true if this is indeed a map(transpose), and writes the
// number of arrays, and moral array size to appropriate output
// parameters.
static bool lmad_map_tr(int64_t *num_arrays_out, int64_t *n_out, int64_t *m_out,
                        int r,
                        const int64_t dst_strides[r],
                        const int64_t src_strides[r],
                        const int64_t shape[r]) {
  int64_t rowmajor_strides[r];
  rowmajor_strides[r-1] = 1;

  for (int i = r-2; i >= 0; i--) {
    rowmajor_strides[i] = rowmajor_strides[i+1] * shape[i+1];
  }

  // map_r will be the number of mapped dimensions on top.
  int map_r = 0;
  int64_t num_arrays = 1;
  for (int i = 0; i < r; i++) {
    if (dst_strides[i] != rowmajor_strides[i] ||
        src_strides[i] != rowmajor_strides[i]) {
      break;
    } else {
      num_arrays *= shape[i];
      map_r++;
    }
  }

  *num_arrays_out = num_arrays;

  if (r==map_r) {
    return false;
  }

  if (memcmp(&rowmajor_strides[map_r],
             &dst_strides[map_r],
             sizeof(int64_t)*(r-map_r)) == 0) {
    return lmad_is_tr(n_out, m_out, r-map_r, src_strides+map_r, shape+map_r);
  } else if (memcmp(&rowmajor_strides[map_r],
                    &src_strides[map_r],
                    sizeof(int64_t)*(r-map_r)) == 0) {
    return lmad_is_tr(m_out, n_out, r-map_r, dst_strides+map_r, shape+map_r);
  }
  return false;
}

// Check if the strides correspond to row-major strides of *any*
// permutation of the shape.  This is done by recursive search with
// backtracking.  This is worst-case exponential, but hopefully the
// arrays we encounter do not have that many dimensions.
static bool lmad_contiguous_search(int checked, int64_t expected,
                                   int r,
                                   int64_t strides[r], int64_t shape[r], bool used[r]) {
  for (int i = 0; i < r; i++) {
    for (int j = 0; j < r; j++) {
      if (!used[j] && strides[j] == expected && strides[j] >= 0) {
        used[j] = true;
        if (checked+1 == r ||
            lmad_contiguous_search(checked+1, expected * shape[j], r, strides, shape, used)) {
          return true;
        }
        used[j] = false;
      }
    }
  }
  return false;
}

// Does this LMAD correspond to an array with positive strides and no
// holes?
static bool lmad_contiguous(int r, int64_t strides[r], int64_t shape[r]) {
  bool used[r];
  for (int i = 0; i < r; i++) {
    used[i] = false;
  }
  return lmad_contiguous_search(0, 1, r, strides, shape, used);
}

// Does this copy correspond to something that could be done with a
// memcpy()-like operation?  I.e. do the LMADs actually represent the
// same in-memory layout and are they contiguous?
static bool lmad_memcpyable(int r,
                            int64_t dst_strides[r], int64_t src_strides[r], int64_t shape[r]) {
  if (!lmad_contiguous(r, dst_strides, shape)) {
    return false;
  }
  for (int i = 0; i < r; i++) {
    if (dst_strides[i] != src_strides[i] && shape[i] != 1) {
      return false;
    }
  }
  return true;
}


static void log_copy(struct futhark_context* ctx,
                     const char *kind, int r,
                     int64_t dst_offset, int64_t dst_strides[r],
                     int64_t src_offset, int64_t src_strides[r],
                     int64_t shape[r]) {
  if (ctx->logging) {
    fprintf(ctx->log, "\n# Copy %s\n", kind);
    fprintf(ctx->log, "Shape: ");
    for (int i = 0; i < r; i++) { fprintf(ctx->log, "[%ld]", (long int)shape[i]); }
    fprintf(ctx->log, "\n");
    fprintf(ctx->log, "Dst offset: %ld\n", (long int)dst_offset);
    fprintf(ctx->log, "Dst strides:");
    for (int i = 0; i < r; i++) { fprintf(ctx->log, " %ld", (long int)dst_strides[i]); }
    fprintf(ctx->log, "\n");
    fprintf(ctx->log, "Src offset: %ld\n", (long int)src_offset);
    fprintf(ctx->log, "Src strides:");
    for (int i = 0; i < r; i++) { fprintf(ctx->log, " %ld", (long int)src_strides[i]); }
    fprintf(ctx->log, "\n");
  }
}

static void log_transpose(struct futhark_context* ctx,
                          int64_t k, int64_t n, int64_t m) {
  if (ctx->logging) {
    fprintf(ctx->log, "## Transpose\n");
    fprintf(ctx->log, "Arrays     : %ld\n", (long int)k);
    fprintf(ctx->log, "X elements : %ld\n", (long int)m);
    fprintf(ctx->log, "Y elements : %ld\n", (long int)n);
    fprintf(ctx->log, "\n");
  }
}

#define GEN_LMAD_COPY(NAME, ELEM_TYPE)                                  \
  static void lmad_copy_##NAME                                          \
  (struct futhark_context *ctx, int r,                                  \
   ELEM_TYPE* dst, int64_t dst_offset, int64_t dst_strides[r],          \
   ELEM_TYPE *src, int64_t src_offset, int64_t src_strides[r],          \
   int64_t shape[r]) {                                                  \
    log_copy(ctx, "CPU to CPU", r, dst_offset, dst_strides,             \
             src_offset, src_strides, shape);                           \
    int64_t size = 1;                                                   \
    for (int i = 0; i < r; i++) { size *= shape[i]; }                   \
    if (size == 0) { return; }                                          \
    int64_t k, n, m;                                                    \
    if (lmad_map_tr(&k, &n, &m,                                         \
                    r, dst_strides, src_strides, shape)) {              \
      log_transpose(ctx, k, n, m);                                      \
      map_transpose_##NAME                                              \
        (dst+dst_offset, src+src_offset, k, n, m, 0, n, 0, m);          \
    } else if (lmad_memcpyable(r, dst_strides, src_strides, shape)) {   \
      if (ctx->logging) {fprintf(ctx->log, "## Flat copy\n\n");}          \
      memcpy(dst+dst_offset, src+src_offset, size*sizeof(*dst));        \
    } else {                                                            \
      if (ctx->logging) {fprintf(ctx->log, "## General copy\n\n");}       \
      lmad_copy_elements_##NAME                                         \
        (r,                                                             \
         dst+dst_offset, dst_strides,                                   \
         src+src_offset, src_strides, shape);                           \
    }                                                                   \
  }

GEN_MAP_TRANSPOSE(1b, uint8_t)
GEN_MAP_TRANSPOSE(2b, uint16_t)
GEN_MAP_TRANSPOSE(4b, uint32_t)
GEN_MAP_TRANSPOSE(8b, uint64_t)

GEN_LMAD_COPY_ELEMENTS(1b, uint8_t)
GEN_LMAD_COPY_ELEMENTS(2b, uint16_t)
GEN_LMAD_COPY_ELEMENTS(4b, uint32_t)
GEN_LMAD_COPY_ELEMENTS(8b, uint64_t)

GEN_LMAD_COPY(1b, uint8_t)
GEN_LMAD_COPY(2b, uint16_t)
GEN_LMAD_COPY(4b, uint32_t)
GEN_LMAD_COPY(8b, uint64_t)

// End of copy.h

#define FUTHARK_FUN_ATTR static

FUTHARK_FUN_ATTR int futrts_entry_Inner_Radix_Hash_Join(struct futhark_context *ctx, struct memblock *mem_out_p_140541, struct memblock *mem_out_p_140542, struct memblock *mem_out_p_140543, int64_t *out_prim_out_140544, int64_t *out_prim_out_140545, int64_t *out_prim_out_140546, struct memblock pR_mem_139580, struct memblock pS_mem_139581, struct memblock bounds_mem_139582, struct memblock depths_mem_139583, struct memblock bounds_mem_139584, struct memblock depths_mem_139585, struct memblock first_info_idx_mem_139586, struct memblock last_info_idx_mem_139587, int64_t nR_119920, int64_t b_119921, int64_t nS_119922, int64_t dz2081U_119923, int64_t dz2081U_119924, int64_t dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925, int32_t radix_sizze_119926, int32_t maxDepth_119931, int32_t maxDepth_119934, int64_t scatter_psizze_119937);
FUTHARK_FUN_ATTR int futrts_entry_argmin_double(struct futhark_context *ctx, int64_t *out_prim_out_140582, struct memblock ks_mem_139580, int64_t n_62657);
FUTHARK_FUN_ATTR int futrts_entry_argmin_float(struct futhark_context *ctx, int64_t *out_prim_out_140583, struct memblock ks_mem_139580, int64_t n_62480);
FUTHARK_FUN_ATTR int futrts_entry_argmin_int(struct futhark_context *ctx, int64_t *out_prim_out_140584, struct memblock ks_mem_139580, int64_t n_62129);
FUTHARK_FUN_ATTR int futrts_entry_argmin_long(struct futhark_context *ctx, int64_t *out_prim_out_140585, struct memblock ks_mem_139580, int64_t n_62303);
FUTHARK_FUN_ATTR int futrts_entry_argmin_short(struct futhark_context *ctx, int64_t *out_prim_out_140586, struct memblock ks_mem_139580, int64_t n_61955);
FUTHARK_FUN_ATTR int futrts_entry_calc_partitions_from_partitioned_set(struct futhark_context *ctx, struct memblock *mem_out_p_140587, struct memblock *mem_out_p_140588, int64_t *out_prim_out_140589, int32_t *out_prim_out_140590, struct memblock pXs_mem_139580, int64_t n_116595, int64_t b_116596, int32_t radix_sizze_116597, int64_t offset_116599, int64_t sizze_thresh_116600, int32_t max_depth_116601);
FUTHARK_FUN_ATTR int futrts_entry_create_hash_table_from_partitioned_set(struct futhark_context *ctx, struct memblock *mem_out_p_140598, struct memblock *mem_out_p_140599, int64_t *out_prim_out_140600, struct memblock pXs_mem_139580, struct memblock bounds_mem_139581, struct memblock depths_mem_139582, int64_t n_117403, int64_t b_117404, int64_t dz2080U_117405, int64_t dz2081U_117406, int32_t radix_sizze_117407, int32_t maxDepth_117411, int64_t scatter_psizze_117412);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_GFTR(struct futhark_context *ctx, struct memblock *mem_out_p_140606, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_66270, int64_t dz2083U_66271, int64_t incr_66272, int64_t psizze_66273, int64_t pL_bytes_66275);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_double(struct futhark_context *ctx, struct memblock *mem_out_p_140607, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_65806, int64_t dz2083U_65807, int64_t incr_65808, int64_t psizze_65809);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_double_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140608, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_67778, int64_t n_67779, int64_t incr_67780, int64_t psizze_67781);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_float(struct futhark_context *ctx, struct memblock *mem_out_p_140609, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_65526, int64_t dz2083U_65527, int64_t incr_65528, int64_t psizze_65529);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_float_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140610, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_67477, int64_t n_67478, int64_t incr_67479, int64_t psizze_67480);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_int(struct futhark_context *ctx, struct memblock *mem_out_p_140611, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_64966, int64_t dz2083U_64967, int64_t incr_64968, int64_t psizze_64969);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_int_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140612, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_66875, int64_t n_66876, int64_t incr_66877, int64_t psizze_66878);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_long(struct futhark_context *ctx, struct memblock *mem_out_p_140613, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_65246, int64_t dz2083U_65247, int64_t incr_65248, int64_t psizze_65249);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_long_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140614, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_67176, int64_t n_67177, int64_t incr_67178, int64_t psizze_67179);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_short(struct futhark_context *ctx, struct memblock *mem_out_p_140615, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_64686, int64_t dz2083U_64687, int64_t incr_64688, int64_t psizze_64689);
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_short_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140616, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_66574, int64_t n_66575, int64_t incr_66576, int64_t psizze_66577);
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_double(struct futhark_context *ctx, struct memblock *mem_out_p_140617, struct memblock *mem_out_p_140618, struct memblock *mem_out_p_140619, int64_t *out_prim_out_140620, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_111847, int64_t nS_111848, int64_t offset_R_111851, int64_t offset_S_111852, int64_t partitionSizze_111853, int64_t scatter_psizze_111854);
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_float(struct futhark_context *ctx, struct memblock *mem_out_p_140640, struct memblock *mem_out_p_140641, struct memblock *mem_out_p_140642, int64_t *out_prim_out_140643, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_109390, int64_t nS_109391, int64_t offset_R_109394, int64_t offset_S_109395, int64_t partitionSizze_109396, int64_t scatter_psizze_109397);
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_int(struct futhark_context *ctx, struct memblock *mem_out_p_140663, struct memblock *mem_out_p_140664, struct memblock *mem_out_p_140665, int64_t *out_prim_out_140666, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_104488, int64_t nS_104489, int64_t offset_R_104492, int64_t offset_S_104493, int64_t partitionSizze_104494, int64_t scatter_psizze_104495);
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_long(struct futhark_context *ctx, struct memblock *mem_out_p_140686, struct memblock *mem_out_p_140687, struct memblock *mem_out_p_140688, int64_t *out_prim_out_140689, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_106933, int64_t nS_106934, int64_t offset_R_106937, int64_t offset_S_106938, int64_t partitionSizze_106939, int64_t scatter_psizze_106940);
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_short(struct futhark_context *ctx, struct memblock *mem_out_p_140709, struct memblock *mem_out_p_140710, struct memblock *mem_out_p_140711, int64_t *out_prim_out_140712, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_102031, int64_t nS_102032, int64_t offset_R_102035, int64_t offset_S_102036, int64_t partitionSizze_102037, int64_t scatter_psizze_102038);
FUTHARK_FUN_ATTR int futrts_entry_max_idx(struct futhark_context *ctx, int64_t *out_prim_out_140732, struct memblock eta_p_mem_139580, int64_t nz2080U_62734);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_140733, struct memblock *mem_out_p_140734, struct memblock xs_mem_139580, int64_t n_99449, int64_t incr_99450);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_140745, struct memblock *mem_out_p_140746, struct memblock xs_mem_139580, int64_t n_97304, int64_t incr_97305);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_140757, struct memblock *mem_out_p_140758, struct memblock xs_mem_139580, int64_t n_93018, int64_t incr_93019);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_140769, struct memblock *mem_out_p_140770, struct memblock xs_mem_139580, int64_t n_95159, int64_t incr_95160);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_140781, struct memblock *mem_out_p_140782, struct memblock xs_mem_139580, int64_t n_90873, int64_t incr_90874);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_double(struct futhark_context *ctx, struct memblock *mem_out_p_140793, struct memblock *mem_out_p_140794, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_84345, int64_t b_84346);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_float(struct futhark_context *ctx, struct memblock *mem_out_p_140805, struct memblock *mem_out_p_140806, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_81980, int64_t b_81981);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_int(struct futhark_context *ctx, struct memblock *mem_out_p_140817, struct memblock *mem_out_p_140818, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_77260, int64_t b_77261);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_long(struct futhark_context *ctx, struct memblock *mem_out_p_140829, struct memblock *mem_out_p_140830, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_79615, int64_t b_79616);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_short(struct futhark_context *ctx, struct memblock *mem_out_p_140841, struct memblock *mem_out_p_140842, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_74895, int64_t b_74896);
FUTHARK_FUN_ATTR int futrts_entry_min_idx(struct futhark_context *ctx, int64_t *out_prim_out_140853, struct memblock eta_p_mem_139580, int64_t nz2080U_62694);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_double(struct futhark_context *ctx, struct memblock *mem_out_p_140854, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_64404, int64_t incr_64405, int64_t block_sizze_64406);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_float(struct futhark_context *ctx, struct memblock *mem_out_p_140855, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_64070, int64_t incr_64071, int64_t block_sizze_64072);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_int(struct futhark_context *ctx, struct memblock *mem_out_p_140856, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_63402, int64_t incr_63403, int64_t block_sizze_63404);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_long(struct futhark_context *ctx, struct memblock *mem_out_p_140857, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_63736, int64_t incr_63737, int64_t block_sizze_63738);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_short(struct futhark_context *ctx, struct memblock *mem_out_p_140858, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_63068, int64_t incr_63069, int64_t block_sizze_63070);
FUTHARK_FUN_ATTR int futrts_entry_partition_and_deepen_GFTR(struct futhark_context *ctx, struct memblock *mem_out_p_140859, struct memblock *mem_out_p_140860, struct memblock xs_mem_139580, struct memblock pL_mem_139581, int64_t n_114415, int64_t b_114416, int64_t pL_b_114417, int16_t block_sizze_114418, int64_t gather_psizze_114419, int32_t radix_sizze_114420, int64_t sizze_thresh_114423, int32_t max_depth_114424);
FUTHARK_FUN_ATTR int futrts_entry_partition_and_deepen_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140872, struct memblock *mem_out_p_140873, struct memblock xs_mem_139580, int64_t n_115782, int64_t b_115783, int16_t block_sizze_115784, int64_t gather_psizze_115785, int32_t radix_sizze_115786, int64_t offset_115788, int64_t sizze_thresh_115789, int32_t max_depth_115790);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_140884, struct memblock *mem_out_p_140885, struct memblock xs_mem_139580, int64_t n_88727, int64_t incr_88728, int16_t block_sizze_88729);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_140889, struct memblock *mem_out_p_140890, struct memblock xs_mem_139580, int64_t n_87838, int64_t incr_87839, int16_t block_sizze_87840);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_140894, struct memblock *mem_out_p_140895, struct memblock xs_mem_139580, int64_t n_86081, int64_t incr_86082, int16_t block_sizze_86083);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_140899, struct memblock *mem_out_p_140900, struct memblock xs_mem_139580, int64_t n_86949, int64_t incr_86950, int16_t block_sizze_86951);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_140904, struct memblock *mem_out_p_140905, struct memblock xs_mem_139580, int64_t n_85213, int64_t incr_85214, int16_t block_sizze_85215);
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_double(struct futhark_context *ctx, struct memblock *mem_out_p_140909, struct memblock *mem_out_p_140910, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_72424, int64_t b_72425, int16_t block_sizze_72426);
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_float(struct futhark_context *ctx, struct memblock *mem_out_p_140915, struct memblock *mem_out_p_140916, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_71474, int64_t b_71475, int16_t block_sizze_71476);
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_int(struct futhark_context *ctx, struct memblock *mem_out_p_140921, struct memblock *mem_out_p_140922, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_69640, int64_t b_69641, int16_t block_sizze_69642);
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_long(struct futhark_context *ctx, struct memblock *mem_out_p_140927, struct memblock *mem_out_p_140928, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_70528, int64_t b_70529, int16_t block_sizze_70530);
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_short(struct futhark_context *ctx, struct memblock *mem_out_p_140933, struct memblock *mem_out_p_140934, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_68746, int64_t b_68747, int16_t block_sizze_68748);
FUTHARK_FUN_ATTR int futrts_getPartitionBounds_11848(struct futhark_context *ctx, struct memblock *mem_out_p_140939, struct memblock *mem_out_p_140940, int64_t *out_prim_out_140941, int64_t *out_prim_out_140942, int32_t *out_prim_out_140943, struct memblock pXs_mem_139580, int64_t n_113564, int64_t b_113565, int32_t curDepth_113566, int32_t i_113568, int32_t j_113569);
FUTHARK_FUN_ATTR int futrts_get_bit_1844(struct futhark_context *ctx, int32_t *out_prim_out_140949, int32_t bit_68124, int16_t x_68125);
FUTHARK_FUN_ATTR int futrts_get_bit_2253(struct futhark_context *ctx, int32_t *out_prim_out_140950, int32_t bit_69906, int64_t x_69907);
FUTHARK_FUN_ATTR int futrts_greatest_divisor_leq_than_5357(struct futhark_context *ctx, int64_t *out_prim_out_140951, int64_t upper_bound_72453, int64_t n_72454);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11363(struct futhark_context *ctx, struct memblock *mem_out_p_140952, struct memblock nameless_mem_139580, int64_t n_84370, int64_t incr_84371);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11384(struct futhark_context *ctx, struct memblock *mem_out_p_140953, struct memblock nameless_mem_139580, int64_t n_85238, int64_t incr_85239);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11406(struct futhark_context *ctx, struct memblock *mem_out_p_140954, struct memblock nameless_mem_139580, int64_t n_86106, int64_t incr_86107);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11428(struct futhark_context *ctx, struct memblock *mem_out_p_140955, struct memblock nameless_mem_139580, int64_t n_86974, int64_t incr_86975);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11449(struct futhark_context *ctx, struct memblock *mem_out_p_140956, struct memblock nameless_mem_139580, int64_t n_87863, int64_t incr_87864);
FUTHARK_FUN_ATTR int futrts_lifted_normalizze_10472(struct futhark_context *ctx, int64_t *out_prim_out_140957, int64_t *out_prim_out_140958, int64_t *out_prim_out_140959, int64_t *out_prim_out_140960, int64_t *out_prim_out_140961, int64_t slo_72683, int64_t shi_72684, int64_t tlo_72685, int64_t thi_72686, int64_t count_72687);
FUTHARK_FUN_ATTR int futrts_partitioned_scatter_11958(struct futhark_context *ctx, struct memblock *mem_out_p_140962, struct memblock dest_mem_139580, struct memblock is_mem_139581, struct memblock vs_mem_139582, int64_t nd_116929, int64_t n_116930, int64_t psizze_116931);
FUTHARK_FUN_ATTR int futrts_set_bit_2464(struct futhark_context *ctx, int8_t *out_prim_out_140964, int32_t bit_67818, int8_t x_67819, int32_t b_67820);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_u8_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_u8_2d *futhark_new_u8_2d(struct futhark_context *ctx, const uint8_t *data, int64_t dim0, int64_t dim1)
{
    int err = 0;
    struct futhark_u8_2d *bad = NULL;
    struct futhark_u8_2d *arr = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 1, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 1 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) (dim0 * dim1) * 1);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_u8_2d *futhark_new_raw_u8_2d(struct futhark_context *ctx, unsigned char *data, int64_t dim0, int64_t dim1)
{
    int err = 0;
    struct futhark_u8_2d *bad = NULL;
    struct futhark_u8_2d *arr = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr, uint8_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 1 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] * arr->shape[1]) * 1);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_u8_2d(struct futhark_context *ctx, uint8_t *out, struct futhark_u8_2d *arr, int64_t i0, int64_t i1)
{
    int err = 0;
    
    if ((i0 >= 0 && i0 < arr->shape[0]) && (i1 >= 0 && i1 < arr->shape[1])) {
        lock_lock(&ctx->lock);
        if (1 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 1 * (i0 * arr->shape[1] + i1 * 1), 1);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_u8_2d(struct futhark_context *ctx, struct futhark_u8_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i16_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i16_1d *futhark_new_i16_1d(struct futhark_context *ctx, const int16_t *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i16_1d *bad = NULL;
    struct futhark_i16_1d *arr = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 2, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 2 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 2);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_i16_1d *futhark_new_raw_i16_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i16_1d *bad = NULL;
    struct futhark_i16_1d *arr = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr, int16_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 2 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 2);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_i16_1d(struct futhark_context *ctx, int16_t *out, struct futhark_i16_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (2 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 2 * (i0 * 1), 2);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const int32_t *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr, int32_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_i32_1d(struct futhark_context *ctx, int32_t *out, struct futhark_i32_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (4 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 4 * (i0 * 1), 4);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i64_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i64_1d *futhark_new_i64_1d(struct futhark_context *ctx, const int64_t *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i64_1d *bad = NULL;
    struct futhark_i64_1d *arr = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 8, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 8 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 8);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_i64_1d *futhark_new_raw_i64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i64_1d *bad = NULL;
    struct futhark_i64_1d *arr = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr, int64_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 8 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 8);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_i64_1d(struct futhark_context *ctx, int64_t *out, struct futhark_i64_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (8 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 8 * (i0 * 1), 8);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const float *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr, float *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_f32_1d(struct futhark_context *ctx, float *out, struct futhark_f32_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (4 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 4 * (i0 * 1), 4);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f64_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f64_1d *futhark_new_f64_1d(struct futhark_context *ctx, const double *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f64_1d *bad = NULL;
    struct futhark_f64_1d *arr = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 8, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 8 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 8);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_f64_1d *futhark_new_raw_f64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f64_1d *bad = NULL;
    struct futhark_f64_1d *arr = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr, double *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 8 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 8);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_f64_1d(struct futhark_context *ctx, double *out, struct futhark_f64_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (8 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 8 * (i0 * 1), 8);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_opaque_sortStruct_short {
    struct futhark_i16_1d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_sortStruct_short_k(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_sortStruct_short *obj)
{
    (void) ctx;
    
    struct futhark_i16_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i16_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i16_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortStruct_short_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_short *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortStruct_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short **out, const struct futhark_i16_1d *f_k, const struct futhark_u8_2d *f_pL)
{
    struct futhark_opaque_sortStruct_short *v = malloc(sizeof(struct futhark_opaque_sortStruct_short));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i16_1d));
        *v->v0 = *f_k;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_pL;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortStruct_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortStruct_short(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_short *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i16_1d(ctx, obj->v0)[0] * sizeof(int16_t);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i16", 4);
        out += 4;
        memcpy(out, futhark_shape_i16_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i16_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i16_1d(ctx, obj->v0)[0] * sizeof(int16_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_sortStruct_short *futhark_restore_opaque_sortStruct_short(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortStruct_short *obj = malloc(sizeof(struct futhark_opaque_sortStruct_short));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i16", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int16_t);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_i16_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortStruct_int {
    struct futhark_i32_1d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_sortStruct_int_k(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_sortStruct_int *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortStruct_int_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_int *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortStruct_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int **out, const struct futhark_i32_1d *f_k, const struct futhark_u8_2d *f_pL)
{
    struct futhark_opaque_sortStruct_int *v = malloc(sizeof(struct futhark_opaque_sortStruct_int));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i32_1d));
        *v->v0 = *f_k;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_pL;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortStruct_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortStruct_int(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_int *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v0)[0] * sizeof(int32_t);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v0)[0] * sizeof(int32_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_sortStruct_int *futhark_restore_opaque_sortStruct_int(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortStruct_int *obj = malloc(sizeof(struct futhark_opaque_sortStruct_int));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int32_t);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_i32_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortStruct_long {
    struct futhark_i64_1d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_sortStruct_long_k(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortStruct_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortStruct_long_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_long *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortStruct_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long **out, const struct futhark_i64_1d *f_k, const struct futhark_u8_2d *f_pL)
{
    struct futhark_opaque_sortStruct_long *v = malloc(sizeof(struct futhark_opaque_sortStruct_long));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_k;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_pL;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortStruct_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortStruct_long(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_long *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_sortStruct_long *futhark_restore_opaque_sortStruct_long(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortStruct_long *obj = malloc(sizeof(struct futhark_opaque_sortStruct_long));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortStruct_float {
    struct futhark_f32_1d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_sortStruct_float_k(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_sortStruct_float *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortStruct_float_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_float *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortStruct_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float **out, const struct futhark_f32_1d *f_k, const struct futhark_u8_2d *f_pL)
{
    struct futhark_opaque_sortStruct_float *v = malloc(sizeof(struct futhark_opaque_sortStruct_float));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_f32_1d));
        *v->v0 = *f_k;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_pL;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortStruct_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortStruct_float(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_float *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v0)[0] * sizeof(float);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v0)[0] * sizeof(float);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_sortStruct_float *futhark_restore_opaque_sortStruct_float(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortStruct_float *obj = malloc(sizeof(struct futhark_opaque_sortStruct_float));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(float);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_f32_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortStruct_double {
    struct futhark_f64_1d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_sortStruct_double_k(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_sortStruct_double *obj)
{
    (void) ctx;
    
    struct futhark_f64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_f64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortStruct_double_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_sortStruct_double *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortStruct_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double **out, const struct futhark_f64_1d *f_k, const struct futhark_u8_2d *f_pL)
{
    struct futhark_opaque_sortStruct_double *v = malloc(sizeof(struct futhark_opaque_sortStruct_double));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_f64_1d));
        *v->v0 = *f_k;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_pL;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortStruct_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortStruct_double(struct futhark_context *ctx, const struct futhark_opaque_sortStruct_double *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_f64_1d(ctx, obj->v0)[0] * sizeof(double);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f64", 4);
        out += 4;
        memcpy(out, futhark_shape_f64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f64_1d(ctx, obj->v0)[0] * sizeof(double);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_sortStruct_double *futhark_restore_opaque_sortStruct_double(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortStruct_double *obj = malloc(sizeof(struct futhark_opaque_sortStruct_double));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(double);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_f64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_short {
    struct futhark_i64_1d *v0;
    struct futhark_i16_1d *v1;
};
int futhark_project_opaque_sortInfo_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_short_xs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_sortInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i16_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i16_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i16_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out, const struct futhark_i64_1d *f_is, const struct futhark_i16_1d *f_xs)
{
    struct futhark_opaque_sortInfo_short *v = malloc(sizeof(struct futhark_opaque_sortInfo_short));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i16_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_short(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_short *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i16_1d(ctx, obj->v1)[0] * sizeof(int16_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i16", 4);
        out += 4;
        memcpy(out, futhark_shape_i16_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i16_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i16_1d(ctx, obj->v1)[0] * sizeof(int16_t);
    }
    return ret;
}
struct futhark_opaque_sortInfo_short *futhark_restore_opaque_sortInfo_short(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_short *obj = malloc(sizeof(struct futhark_opaque_sortInfo_short));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i16", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int16_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i16_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_int {
    struct futhark_i64_1d *v0;
    struct futhark_i32_1d *v1;
};
int futhark_project_opaque_sortInfo_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_int_xs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_sortInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out, const struct futhark_i64_1d *f_is, const struct futhark_i32_1d *f_xs)
{
    struct futhark_opaque_sortInfo_int *v = malloc(sizeof(struct futhark_opaque_sortInfo_int));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i32_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_int(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_int *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v1)[0] * sizeof(int32_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v1)[0] * sizeof(int32_t);
    }
    return ret;
}
struct futhark_opaque_sortInfo_int *futhark_restore_opaque_sortInfo_int(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_int *obj = malloc(sizeof(struct futhark_opaque_sortInfo_int));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int32_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_long {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
};
int futhark_project_opaque_sortInfo_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_long_xs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_xs)
{
    struct futhark_opaque_sortInfo_long *v = malloc(sizeof(struct futhark_opaque_sortInfo_long));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_long(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_long *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    }
    return ret;
}
struct futhark_opaque_sortInfo_long *futhark_restore_opaque_sortInfo_long(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_long *obj = malloc(sizeof(struct futhark_opaque_sortInfo_long));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_float {
    struct futhark_i64_1d *v0;
    struct futhark_f32_1d *v1;
};
int futhark_project_opaque_sortInfo_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_float_xs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_sortInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out, const struct futhark_i64_1d *f_is, const struct futhark_f32_1d *f_xs)
{
    struct futhark_opaque_sortInfo_float *v = malloc(sizeof(struct futhark_opaque_sortInfo_float));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_f32_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_float(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_float *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * sizeof(float);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * sizeof(float);
    }
    return ret;
}
struct futhark_opaque_sortInfo_float *futhark_restore_opaque_sortInfo_float(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_float *obj = malloc(sizeof(struct futhark_opaque_sortInfo_float));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(float);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_double {
    struct futhark_i64_1d *v0;
    struct futhark_f64_1d *v1;
};
int futhark_project_opaque_sortInfo_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_double_xs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_sortInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_f64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_f64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out, const struct futhark_i64_1d *f_is, const struct futhark_f64_1d *f_xs)
{
    struct futhark_opaque_sortInfo_double *v = malloc(sizeof(struct futhark_opaque_sortInfo_double));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_f64_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_double(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_double *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f64_1d(ctx, obj->v1)[0] * sizeof(double);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f64", 4);
        out += 4;
        memcpy(out, futhark_shape_f64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f64_1d(ctx, obj->v1)[0] * sizeof(double);
    }
    return ret;
}
struct futhark_opaque_sortInfo_double *futhark_restore_opaque_sortInfo_double(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_double *obj = malloc(sizeof(struct futhark_opaque_sortInfo_double));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(double);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_joinPairs_short {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i16_1d *v2;
};
int futhark_project_opaque_joinPairs_short_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_short_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_short_vs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_joinPairs_short *obj)
{
    (void) ctx;
    
    struct futhark_i16_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i16_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i16_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_joinPairs_short(struct futhark_context *ctx, struct futhark_opaque_joinPairs_short **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_i16_1d *f_vs)
{
    struct futhark_opaque_joinPairs_short *v = malloc(sizeof(struct futhark_opaque_joinPairs_short));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_ix;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_iy;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i16_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_joinPairs_short(struct futhark_context *ctx, struct futhark_opaque_joinPairs_short *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_joinPairs_short(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_short *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i16_1d(ctx, obj->v2)[0] * sizeof(int16_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i16", 4);
        out += 4;
        memcpy(out, futhark_shape_i16_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i16_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i16_1d(ctx, obj->v2)[0] * sizeof(int16_t);
    }
    return ret;
}
struct futhark_opaque_joinPairs_short *futhark_restore_opaque_joinPairs_short(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_joinPairs_short *obj = malloc(sizeof(struct futhark_opaque_joinPairs_short));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i16", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int16_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i16_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_joinPairs_int {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i32_1d *v2;
};
int futhark_project_opaque_joinPairs_int_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_int_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_int_vs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_joinPairs_int *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_joinPairs_int(struct futhark_context *ctx, struct futhark_opaque_joinPairs_int **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_i32_1d *f_vs)
{
    struct futhark_opaque_joinPairs_int *v = malloc(sizeof(struct futhark_opaque_joinPairs_int));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_ix;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_iy;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i32_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_joinPairs_int(struct futhark_context *ctx, struct futhark_opaque_joinPairs_int *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_joinPairs_int(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_int *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v2)[0] * sizeof(int32_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v2)[0] * sizeof(int32_t);
    }
    return ret;
}
struct futhark_opaque_joinPairs_int *futhark_restore_opaque_joinPairs_int(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_joinPairs_int *obj = malloc(sizeof(struct futhark_opaque_joinPairs_int));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int32_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_joinPairs_long {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i64_1d *v2;
};
int futhark_project_opaque_joinPairs_long_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_long_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_long_vs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_joinPairs_long(struct futhark_context *ctx, struct futhark_opaque_joinPairs_long **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_i64_1d *f_vs)
{
    struct futhark_opaque_joinPairs_long *v = malloc(sizeof(struct futhark_opaque_joinPairs_long));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_ix;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_iy;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i64_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_joinPairs_long(struct futhark_context *ctx, struct futhark_opaque_joinPairs_long *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_joinPairs_long(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_long *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v2)[0] * sizeof(int64_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v2)[0] * sizeof(int64_t);
    }
    return ret;
}
struct futhark_opaque_joinPairs_long *futhark_restore_opaque_joinPairs_long(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_joinPairs_long *obj = malloc(sizeof(struct futhark_opaque_joinPairs_long));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int64_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i64_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_joinPairs_float {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_f32_1d *v2;
};
int futhark_project_opaque_joinPairs_float_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_float_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_float_vs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_joinPairs_float *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_joinPairs_float(struct futhark_context *ctx, struct futhark_opaque_joinPairs_float **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_f32_1d *f_vs)
{
    struct futhark_opaque_joinPairs_float *v = malloc(sizeof(struct futhark_opaque_joinPairs_float));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_ix;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_iy;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_f32_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_joinPairs_float(struct futhark_context *ctx, struct futhark_opaque_joinPairs_float *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_joinPairs_float(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_float *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v2)[0] * sizeof(float);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v2)[0] * sizeof(float);
    }
    return ret;
}
struct futhark_opaque_joinPairs_float *futhark_restore_opaque_joinPairs_float(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_joinPairs_float *obj = malloc(sizeof(struct futhark_opaque_joinPairs_float));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(float);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_joinPairs_double {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_f64_1d *v2;
};
int futhark_project_opaque_joinPairs_double_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_double_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_double_vs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_joinPairs_double *obj)
{
    (void) ctx;
    
    struct futhark_f64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f64_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_f64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_joinPairs_double(struct futhark_context *ctx, struct futhark_opaque_joinPairs_double **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_f64_1d *f_vs)
{
    struct futhark_opaque_joinPairs_double *v = malloc(sizeof(struct futhark_opaque_joinPairs_double));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_ix;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_iy;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_f64_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_joinPairs_double(struct futhark_context *ctx, struct futhark_opaque_joinPairs_double *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_joinPairs_double(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_double *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f64_1d(ctx, obj->v2)[0] * sizeof(double);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f64", 4);
        out += 4;
        memcpy(out, futhark_shape_f64_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f64_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f64_1d(ctx, obj->v2)[0] * sizeof(double);
    }
    return ret;
}
struct futhark_opaque_joinPairs_double *futhark_restore_opaque_joinPairs_double(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_joinPairs_double *obj = malloc(sizeof(struct futhark_opaque_joinPairs_double));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(double);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f64_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_partitionedSet_GFTR {
    struct futhark_u8_2d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_partitionedSet_GFTR_ks(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_partitionedSet_GFTR *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v0, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_partitionedSet_GFTR_pL(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_partitionedSet_GFTR *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_partitionedSet_GFTR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFTR **out, const struct futhark_u8_2d *f_ks, const struct futhark_u8_2d *f_pL)
{
    struct futhark_opaque_partitionedSet_GFTR *v = malloc(sizeof(struct futhark_opaque_partitionedSet_GFTR));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_u8_2d));
        *v->v0 = *f_ks;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_pL;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_partitionedSet_GFTR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFTR *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_partitionedSet_GFTR(struct futhark_context *ctx, const struct futhark_opaque_partitionedSet_GFTR *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v0)[0] * futhark_shape_u8_2d(ctx, obj->v0)[1] * sizeof(int8_t);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v0), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v0, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v0)[0] * futhark_shape_u8_2d(ctx, obj->v0)[1] * sizeof(int8_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_partitionedSet_GFTR *futhark_restore_opaque_partitionedSet_GFTR(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_partitionedSet_GFTR *obj = malloc(sizeof(struct futhark_opaque_partitionedSet_GFTR));
    int64_t shape_0[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * shape_0[1] * sizeof(int8_t);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_u8_2d(ctx, data_0, shape_0[0], shape_0[1]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_partitionedSet_GFUR {
    struct futhark_i64_1d *v0;
    struct futhark_u8_2d *v1;
};
int futhark_project_opaque_partitionedSet_GFUR_idx(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_partitionedSet_GFUR *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_partitionedSet_GFUR_ks(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_partitionedSet_GFUR *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v1, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_partitionedSet_GFUR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFUR **out, const struct futhark_i64_1d *f_idx, const struct futhark_u8_2d *f_ks)
{
    struct futhark_opaque_partitionedSet_GFUR *v = malloc(sizeof(struct futhark_opaque_partitionedSet_GFUR));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_idx;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_u8_2d));
        *v->v1 = *f_ks;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_partitionedSet_GFUR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFUR *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_partitionedSet_GFUR(struct futhark_context *ctx, const struct futhark_opaque_partitionedSet_GFUR *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v1), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v1, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v1)[0] * futhark_shape_u8_2d(ctx, obj->v1)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_partitionedSet_GFUR *futhark_restore_opaque_partitionedSet_GFUR(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_partitionedSet_GFUR *obj = malloc(sizeof(struct futhark_opaque_partitionedSet_GFUR));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * shape_1[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_u8_2d(ctx, data_1, shape_1[0], shape_1[1]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_partitionInfo {
    struct futhark_i64_1d *v0;
    struct futhark_i32_1d *v1;
    int32_t v2;
};
int futhark_project_opaque_partitionInfo_bounds(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_partitionInfo *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_partitionInfo_depths(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_partitionInfo *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_partitionInfo_maxDepth(struct futhark_context *ctx, int32_t *out, const struct futhark_opaque_partitionInfo *obj)
{
    (void) ctx;
    
    int32_t v;
    
    v = obj->v2;
    *out = v;
    return 0;
}
int futhark_new_opaque_partitionInfo(struct futhark_context *ctx, struct futhark_opaque_partitionInfo **out, const struct futhark_i64_1d *f_bounds, const struct futhark_i32_1d *f_depths, const int32_t f_maxDepth)
{
    struct futhark_opaque_partitionInfo *v = malloc(sizeof(struct futhark_opaque_partitionInfo));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_bounds;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i32_1d));
        *v->v1 = *f_depths;
        (void) (*v->v1->mem.references)++;
    }
    v->v2 = f_maxDepth;
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_partitionInfo(struct futhark_context *ctx, struct futhark_opaque_partitionInfo *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_partitionInfo(struct futhark_context *ctx, const struct futhark_opaque_partitionInfo *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v1)[0] * sizeof(int32_t);
    int64_t size_2 = 7 + 0 * sizeof(int64_t) + 1 * sizeof(int32_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v1)[0] * sizeof(int32_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, &obj->v2, sizeof(obj->v2));
        out += sizeof(obj->v2);
    }
    return ret;
}
struct futhark_opaque_partitionInfo *futhark_restore_opaque_partitionInfo(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_partitionInfo *obj = malloc(sizeof(struct futhark_opaque_partitionInfo));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int32_t);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    src += sizeof(obj->v2);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        memcpy(&obj->v2, data_2, sizeof(obj->v2));
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_radix_hashTable {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
};
int futhark_project_opaque_radix_hashTable_first_info_idx(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_radix_hashTable *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_radix_hashTable_last_info_idx(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_radix_hashTable *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_radix_hashTable(struct futhark_context *ctx, struct futhark_opaque_radix_hashTable **out, const struct futhark_i64_1d *f_first_info_idx, const struct futhark_i64_1d *f_last_info_idx)
{
    struct futhark_opaque_radix_hashTable *v = malloc(sizeof(struct futhark_opaque_radix_hashTable));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_first_info_idx;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_last_info_idx;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_radix_hashTable(struct futhark_context *ctx, struct futhark_opaque_radix_hashTable *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_radix_hashTable(struct futhark_context *ctx, const struct futhark_opaque_radix_hashTable *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    }
    return ret;
}
struct futhark_opaque_radix_hashTable *futhark_restore_opaque_radix_hashTable(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_radix_hashTable *obj = malloc(sizeof(struct futhark_opaque_radix_hashTable));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_joinPairs_bsq {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_u8_2d *v2;
};
int futhark_project_opaque_joinPairs_bsq_ix(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_bsq *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_bsq_iy(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_joinPairs_bsq *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_joinPairs_bsq_vs(struct futhark_context *ctx, struct futhark_u8_2d **out, const struct futhark_opaque_joinPairs_bsq *obj)
{
    (void) ctx;
    
    struct futhark_u8_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_u8_2d));
    memcpy(v, obj->v2, sizeof(struct futhark_u8_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_joinPairs_bsq(struct futhark_context *ctx, struct futhark_opaque_joinPairs_bsq **out, const struct futhark_i64_1d *f_ix, const struct futhark_i64_1d *f_iy, const struct futhark_u8_2d *f_vs)
{
    struct futhark_opaque_joinPairs_bsq *v = malloc(sizeof(struct futhark_opaque_joinPairs_bsq));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_ix;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_iy;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_u8_2d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_joinPairs_bsq(struct futhark_context *ctx, struct futhark_opaque_joinPairs_bsq *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_joinPairs_bsq(struct futhark_context *ctx, const struct futhark_opaque_joinPairs_bsq *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 2 * sizeof(int64_t) + futhark_shape_u8_2d(ctx, obj->v2)[0] * futhark_shape_u8_2d(ctx, obj->v2)[1] * sizeof(int8_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, "  u8", 4);
        out += 4;
        memcpy(out, futhark_shape_u8_2d(ctx, obj->v2), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_u8_2d(ctx, obj->v2, (void *) out);
        out += futhark_shape_u8_2d(ctx, obj->v2)[0] * futhark_shape_u8_2d(ctx, obj->v2)[1] * sizeof(int8_t);
    }
    return ret;
}
struct futhark_opaque_joinPairs_bsq *futhark_restore_opaque_joinPairs_bsq(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_joinPairs_bsq *obj = malloc(sizeof(struct futhark_opaque_joinPairs_bsq));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, "  u8", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * shape_2[1] * sizeof(int8_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_u8_2d(ctx, data_2, shape_2[0], shape_2[1]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_u8_2d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}

FUTHARK_FUN_ATTR int futrts_entry_Inner_Radix_Hash_Join(struct futhark_context *ctx, struct memblock *mem_out_p_140541, struct memblock *mem_out_p_140542, struct memblock *mem_out_p_140543, int64_t *out_prim_out_140544, int64_t *out_prim_out_140545, int64_t *out_prim_out_140546, struct memblock pR_mem_139580, struct memblock pS_mem_139581, struct memblock bounds_mem_139582, struct memblock depths_mem_139583, struct memblock bounds_mem_139584, struct memblock depths_mem_139585, struct memblock first_info_idx_mem_139586, struct memblock last_info_idx_mem_139587, int64_t nR_119920, int64_t b_119921, int64_t nS_119922, int64_t dz2081U_119923, int64_t dz2081U_119924, int64_t dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925, int32_t radix_sizze_119926, int32_t maxDepth_119931, int32_t maxDepth_119934, int64_t scatter_psizze_119937)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139589_cached_sizze_140547 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139597_cached_sizze_140548 = 0;
    unsigned char *mem_139597 = NULL;
    int64_t mem_139599_cached_sizze_140549 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140550 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139603_cached_sizze_140551 = 0;
    unsigned char *mem_139603 = NULL;
    int64_t mem_139616_cached_sizze_140552 = 0;
    unsigned char *mem_139616 = NULL;
    int64_t mem_139626_cached_sizze_140553 = 0;
    unsigned char *mem_139626 = NULL;
    int64_t mem_139627_cached_sizze_140554 = 0;
    unsigned char *mem_139627 = NULL;
    int64_t mem_139640_cached_sizze_140555 = 0;
    unsigned char *mem_139640 = NULL;
    int64_t mem_139641_cached_sizze_140556 = 0;
    unsigned char *mem_139641 = NULL;
    int64_t mem_139654_cached_sizze_140557 = 0;
    unsigned char *mem_139654 = NULL;
    int64_t mem_139655_cached_sizze_140558 = 0;
    unsigned char *mem_139655 = NULL;
    int64_t mem_139668_cached_sizze_140559 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139669_cached_sizze_140560 = 0;
    unsigned char *mem_139669 = NULL;
    int64_t mem_139685_cached_sizze_140561 = 0;
    unsigned char *mem_139685 = NULL;
    int64_t mem_139686_cached_sizze_140562 = 0;
    unsigned char *mem_139686 = NULL;
    int64_t mem_139699_cached_sizze_140563 = 0;
    unsigned char *mem_139699 = NULL;
    int64_t mem_139700_cached_sizze_140564 = 0;
    unsigned char *mem_139700 = NULL;
    int64_t mem_139716_cached_sizze_140565 = 0;
    unsigned char *mem_139716 = NULL;
    int64_t mem_139717_cached_sizze_140566 = 0;
    unsigned char *mem_139717 = NULL;
    int64_t mem_139730_cached_sizze_140567 = 0;
    unsigned char *mem_139730 = NULL;
    int64_t mem_139731_cached_sizze_140568 = 0;
    unsigned char *mem_139731 = NULL;
    int64_t mem_139747_cached_sizze_140569 = 0;
    unsigned char *mem_139747 = NULL;
    int64_t mem_139748_cached_sizze_140570 = 0;
    unsigned char *mem_139748 = NULL;
    int64_t mem_139761_cached_sizze_140571 = 0;
    unsigned char *mem_139761 = NULL;
    int64_t mem_139762_cached_sizze_140572 = 0;
    unsigned char *mem_139762 = NULL;
    int64_t mem_139788_cached_sizze_140573 = 0;
    unsigned char *mem_139788 = NULL;
    int64_t mem_139790_cached_sizze_140574 = 0;
    unsigned char *mem_139790 = NULL;
    int64_t mem_139792_cached_sizze_140575 = 0;
    unsigned char *mem_139792 = NULL;
    int64_t mem_139907_cached_sizze_140576 = 0;
    unsigned char *mem_139907 = NULL;
    int64_t mem_139908_cached_sizze_140577 = 0;
    unsigned char *mem_139908 = NULL;
    int64_t mem_139922_cached_sizze_140578 = 0;
    unsigned char *mem_139922 = NULL;
    int64_t mem_140052_cached_sizze_140579 = 0;
    unsigned char *mem_140052 = NULL;
    int64_t mem_140053_cached_sizze_140580 = 0;
    unsigned char *mem_140053 = NULL;
    int64_t mem_140067_cached_sizze_140581 = 0;
    unsigned char *mem_140067 = NULL;
    struct memblock mem_param_tmp_140425;
    
    mem_param_tmp_140425.references = NULL;
    
    struct memblock mem_param_tmp_140424;
    
    mem_param_tmp_140424.references = NULL;
    
    struct memblock mem_param_tmp_140423;
    
    mem_param_tmp_140423.references = NULL;
    
    struct memblock mem_140157;
    
    mem_140157.references = NULL;
    
    struct memblock mem_140155;
    
    mem_140155.references = NULL;
    
    struct memblock mem_140153;
    
    mem_140153.references = NULL;
    
    struct memblock mem_param_tmp_140434;
    
    mem_param_tmp_140434.references = NULL;
    
    struct memblock mem_param_tmp_140433;
    
    mem_param_tmp_140433.references = NULL;
    
    struct memblock mem_param_tmp_140432;
    
    mem_param_tmp_140432.references = NULL;
    
    struct memblock mem_140141;
    
    mem_140141.references = NULL;
    
    struct memblock mem_140139;
    
    mem_140139.references = NULL;
    
    struct memblock mem_140137;
    
    mem_140137.references = NULL;
    
    struct memblock mem_139887;
    
    mem_139887.references = NULL;
    
    struct memblock mem_139879;
    
    mem_139879.references = NULL;
    
    struct memblock mem_param_tmp_140515;
    
    mem_param_tmp_140515.references = NULL;
    
    struct memblock mem_param_tmp_140514;
    
    mem_param_tmp_140514.references = NULL;
    
    struct memblock mem_param_tmp_140513;
    
    mem_param_tmp_140513.references = NULL;
    
    struct memblock mem_139867;
    
    mem_139867.references = NULL;
    
    struct memblock mem_139865;
    
    mem_139865.references = NULL;
    
    struct memblock mem_139863;
    
    mem_139863.references = NULL;
    
    struct memblock mem_param_tmp_140522;
    
    mem_param_tmp_140522.references = NULL;
    
    struct memblock mem_139851;
    
    mem_139851.references = NULL;
    
    struct memblock ext_mem_139854;
    
    ext_mem_139854.references = NULL;
    
    struct memblock mem_param_139848;
    
    mem_param_139848.references = NULL;
    
    struct memblock ext_mem_139857;
    
    ext_mem_139857.references = NULL;
    
    struct memblock mem_param_139845;
    
    mem_param_139845.references = NULL;
    
    struct memblock mem_param_139842;
    
    mem_param_139842.references = NULL;
    
    struct memblock mem_param_139839;
    
    mem_param_139839.references = NULL;
    
    struct memblock ext_mem_139875;
    
    ext_mem_139875.references = NULL;
    
    struct memblock ext_mem_139876;
    
    ext_mem_139876.references = NULL;
    
    struct memblock ext_mem_139877;
    
    ext_mem_139877.references = NULL;
    
    struct memblock mem_139964;
    
    mem_139964.references = NULL;
    
    struct memblock mem_139956;
    
    mem_139956.references = NULL;
    
    struct memblock mem_param_tmp_140492;
    
    mem_param_tmp_140492.references = NULL;
    
    struct memblock mem_param_tmp_140491;
    
    mem_param_tmp_140491.references = NULL;
    
    struct memblock mem_param_tmp_140490;
    
    mem_param_tmp_140490.references = NULL;
    
    struct memblock mem_139942;
    
    mem_139942.references = NULL;
    
    struct memblock ext_mem_139938;
    
    ext_mem_139938.references = NULL;
    
    struct memblock mem_139934;
    
    mem_139934.references = NULL;
    
    struct memblock mem_139944;
    
    mem_139944.references = NULL;
    
    struct memblock mem_139940;
    
    mem_139940.references = NULL;
    
    struct memblock mem_param_139905;
    
    mem_param_139905.references = NULL;
    
    struct memblock mem_param_139902;
    
    mem_param_139902.references = NULL;
    
    struct memblock mem_param_139899;
    
    mem_param_139899.references = NULL;
    
    struct memblock ext_mem_139952;
    
    ext_mem_139952.references = NULL;
    
    struct memblock ext_mem_139953;
    
    ext_mem_139953.references = NULL;
    
    struct memblock ext_mem_139954;
    
    ext_mem_139954.references = NULL;
    
    struct memblock mem_139936;
    
    mem_139936.references = NULL;
    
    struct memblock mem_139895;
    
    mem_139895.references = NULL;
    
    struct memblock ext_mem_139974;
    
    ext_mem_139974.references = NULL;
    
    struct memblock ext_mem_139977;
    
    ext_mem_139977.references = NULL;
    
    struct memblock ext_mem_139980;
    
    ext_mem_139980.references = NULL;
    
    struct memblock mem_140032;
    
    mem_140032.references = NULL;
    
    struct memblock mem_140024;
    
    mem_140024.references = NULL;
    
    struct memblock mem_param_tmp_140468;
    
    mem_param_tmp_140468.references = NULL;
    
    struct memblock mem_param_tmp_140467;
    
    mem_param_tmp_140467.references = NULL;
    
    struct memblock mem_param_tmp_140466;
    
    mem_param_tmp_140466.references = NULL;
    
    struct memblock mem_140012;
    
    mem_140012.references = NULL;
    
    struct memblock mem_140010;
    
    mem_140010.references = NULL;
    
    struct memblock mem_140008;
    
    mem_140008.references = NULL;
    
    struct memblock mem_param_tmp_140475;
    
    mem_param_tmp_140475.references = NULL;
    
    struct memblock mem_139996;
    
    mem_139996.references = NULL;
    
    struct memblock ext_mem_139999;
    
    ext_mem_139999.references = NULL;
    
    struct memblock mem_param_139993;
    
    mem_param_139993.references = NULL;
    
    struct memblock ext_mem_140002;
    
    ext_mem_140002.references = NULL;
    
    struct memblock mem_param_139990;
    
    mem_param_139990.references = NULL;
    
    struct memblock mem_param_139987;
    
    mem_param_139987.references = NULL;
    
    struct memblock mem_param_139984;
    
    mem_param_139984.references = NULL;
    
    struct memblock ext_mem_140020;
    
    ext_mem_140020.references = NULL;
    
    struct memblock ext_mem_140021;
    
    ext_mem_140021.references = NULL;
    
    struct memblock ext_mem_140022;
    
    ext_mem_140022.references = NULL;
    
    struct memblock mem_140109;
    
    mem_140109.references = NULL;
    
    struct memblock mem_140101;
    
    mem_140101.references = NULL;
    
    struct memblock mem_param_tmp_140445;
    
    mem_param_tmp_140445.references = NULL;
    
    struct memblock mem_param_tmp_140444;
    
    mem_param_tmp_140444.references = NULL;
    
    struct memblock mem_param_tmp_140443;
    
    mem_param_tmp_140443.references = NULL;
    
    struct memblock mem_140087;
    
    mem_140087.references = NULL;
    
    struct memblock ext_mem_140083;
    
    ext_mem_140083.references = NULL;
    
    struct memblock mem_140079;
    
    mem_140079.references = NULL;
    
    struct memblock mem_140089;
    
    mem_140089.references = NULL;
    
    struct memblock mem_140085;
    
    mem_140085.references = NULL;
    
    struct memblock mem_param_140050;
    
    mem_param_140050.references = NULL;
    
    struct memblock mem_param_140047;
    
    mem_param_140047.references = NULL;
    
    struct memblock mem_param_140044;
    
    mem_param_140044.references = NULL;
    
    struct memblock ext_mem_140097;
    
    ext_mem_140097.references = NULL;
    
    struct memblock ext_mem_140098;
    
    ext_mem_140098.references = NULL;
    
    struct memblock ext_mem_140099;
    
    ext_mem_140099.references = NULL;
    
    struct memblock mem_140081;
    
    mem_140081.references = NULL;
    
    struct memblock mem_140040;
    
    mem_140040.references = NULL;
    
    struct memblock ext_mem_140119;
    
    ext_mem_140119.references = NULL;
    
    struct memblock ext_mem_140122;
    
    ext_mem_140122.references = NULL;
    
    struct memblock ext_mem_140125;
    
    ext_mem_140125.references = NULL;
    
    struct memblock ext_mem_140129;
    
    ext_mem_140129.references = NULL;
    
    struct memblock ext_mem_140132;
    
    ext_mem_140132.references = NULL;
    
    struct memblock ext_mem_140135;
    
    ext_mem_140135.references = NULL;
    
    struct memblock mem_param_139835;
    
    mem_param_139835.references = NULL;
    
    struct memblock mem_param_139831;
    
    mem_param_139831.references = NULL;
    
    struct memblock mem_param_139828;
    
    mem_param_139828.references = NULL;
    
    struct memblock ext_mem_140149;
    
    ext_mem_140149.references = NULL;
    
    struct memblock ext_mem_140150;
    
    ext_mem_140150.references = NULL;
    
    struct memblock ext_mem_140151;
    
    ext_mem_140151.references = NULL;
    
    struct memblock mem_param_139825;
    
    mem_param_139825.references = NULL;
    
    struct memblock mem_param_139821;
    
    mem_param_139821.references = NULL;
    
    struct memblock mem_param_139818;
    
    mem_param_139818.references = NULL;
    
    struct memblock ext_mem_140165;
    
    ext_mem_140165.references = NULL;
    
    struct memblock ext_mem_140166;
    
    ext_mem_140166.references = NULL;
    
    struct memblock ext_mem_140167;
    
    ext_mem_140167.references = NULL;
    
    struct memblock mem_139815;
    
    mem_139815.references = NULL;
    
    struct memblock mem_139814;
    
    mem_139814.references = NULL;
    
    struct memblock mem_139813;
    
    mem_139813.references = NULL;
    
    struct memblock mem_139812;
    
    mem_139812.references = NULL;
    
    struct memblock mem_139811;
    
    mem_139811.references = NULL;
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140323;
    int64_t prim_out_140324;
    int64_t prim_out_140325;
    int64_t i32_res_125320 = sext_i32_i64(radix_sizze_119926);
    bool nonnegative_125321 = sle64((int64_t) 0, i32_res_125320);
    bool nonzzero_cert_125322;
    
    if (!nonnegative_125321) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "negative exponent", "-> #0  ftHashJoin.fut:7:47-308:53\n   #1  ftRelational.fut:302:1-320:70\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t arg_125323 = shl64((int64_t) 1, i32_res_125320);
    bool assert_cond_125324 = arg_125323 == dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925;
    bool assert_c_125325;
    
    if (!assert_cond_125324) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: entry point arguments have invalid sizes.", "-> #0  unknown location\n   #1  ftRelational.fut:302:1-320:70\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139588 = (int64_t) 8 * b_119921;
    
    if (mem_139589_cached_sizze_140547 < bytes_139588) {
        err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140547, bytes_139588);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < b_119921; i_139365++) {
        int64_t zm_lhs_131287 = sub64(b_119921, i_139365);
        int64_t lifted_lambda_res_131288 = sub64(zm_lhs_131287, (int64_t) 1);
        
        ((int64_t *) mem_139589)[i_139365] = lifted_lambda_res_131288;
    }
    
    int32_t getRadix_arg1_131289 = sub32(radix_sizze_119926, 1);
    int32_t i64_res_131290 = sext_i64_i32(b_119921);
    int32_t zm_lhs_131291 = mul32(8, i64_res_131290);
    int32_t min_arg1_131292 = sub32(zm_lhs_131291, 1);
    int32_t min_res_131293 = smin32(getRadix_arg1_131289, min_arg1_131292);
    int32_t i32_arg0_131297 = sub32(i64_res_131290, 1);
    int64_t i32_res_131298 = sext_i32_i64(i32_arg0_131297);
    int32_t zm_rhs_131300 = sdiv32(min_res_131293, 8);
    int32_t zm_lhs_131301 = sub32(i64_res_131290, zm_rhs_131300);
    int32_t i32_arg0_131302 = sub32(zm_lhs_131301, 1);
    int64_t i32_res_131303 = sext_i32_i64(i32_arg0_131302);
    int64_t min_arg1_131305 = sub64(bytes_139588, (int64_t) 1);
    int64_t min_res_131306 = smin64(i32_res_131303, min_arg1_131305);
    int32_t lastBit_131308 = smod32(min_res_131293, 8);
    int32_t zm_lhs_131311 = sub32(8, lastBit_131308);
    int32_t i32_arg0_131312 = sub32(zm_lhs_131311, 1);
    int8_t unsign_arg0_131313 = zext_i32_i8(i32_arg0_131312);
    int8_t unsign_arg0_131314 = lshr8((int8_t) -1, unsign_arg0_131313);
    bool x_131323 = sle64((int64_t) 0, i32_res_131298);
    bool y_131324 = slt64(i32_res_131298, b_119921);
    bool bounds_check_131325 = x_131323 && y_131324;
    bool index_certs_131326;
    
    if (!bounds_check_131325) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_131298, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_131334 = sle64((int64_t) 0, min_res_131306);
    bool y_131335 = slt64(min_res_131306, b_119921);
    bool bounds_check_131336 = x_131334 && y_131335;
    bool index_certs_131337;
    
    if (!bounds_check_131336) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_131306, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139596 = (int64_t) 8 * dz2081U_119923;
    
    if (mem_139597_cached_sizze_140548 < bytes_139596) {
        err = lexical_realloc(ctx, &mem_139597, &mem_139597_cached_sizze_140548, bytes_139596);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139599_cached_sizze_140549 < bytes_139596) {
        err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140549, bytes_139596);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139601_cached_sizze_140550 < bytes_139596) {
        err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140550, bytes_139596);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139603_cached_sizze_140551 < bytes_139596) {
        err = lexical_realloc(ctx, &mem_139603, &mem_139603_cached_sizze_140551, bytes_139596);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139616_cached_sizze_140552 < b_119921) {
        err = lexical_realloc(ctx, &mem_139616, &mem_139616_cached_sizze_140552, b_119921);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139465;
    int64_t scanacc_139455 = (int64_t) 0;
    
    for (int64_t i_139460 = 0; i_139460 < dz2081U_119923; i_139460++) {
        int64_t radix_to_idx_arg1_131684 = ((int64_t *) bounds_mem_139582.mem)[i_139460];
        bool x_131685 = sle64((int64_t) 0, radix_to_idx_arg1_131684);
        bool y_131686 = slt64(radix_to_idx_arg1_131684, nR_119920);
        bool bounds_check_131687 = x_131685 && y_131686;
        bool index_certs_131688;
        
        if (!bounds_check_131687) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) radix_to_idx_arg1_131684, "] out of bounds for array of shape [", (long long) nR_119920, "].", "-> #0  ftHashJoin.fut:339:39-56\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < b_119921; i_139369++) {
            int8_t eta_p_131692 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139369];
            bool cond_131693 = sle64(i_139369, i32_res_131298);
            bool cond_t_res_131694 = sle64(min_res_131306, i_139369);
            bool x_131695 = cond_131693 && cond_t_res_131694;
            int8_t lifted_lambda_res_131696;
            
            if (x_131695) {
                lifted_lambda_res_131696 = eta_p_131692;
            } else {
                lifted_lambda_res_131696 = (int8_t) 0;
            }
            ((int8_t *) mem_139616)[i_139369] = lifted_lambda_res_131696;
        }
        
        int8_t za_lhs_131697 = ((int8_t *) mem_139616)[i32_res_131298];
        int8_t mod1_x_131698 = (int8_t) -1 & za_lhs_131697;
        
        ((int8_t *) mem_139616)[i32_res_131298] = mod1_x_131698;
        
        int8_t za_lhs_131700 = ((int8_t *) mem_139616)[min_res_131306];
        int8_t tmp_131701 = unsign_arg0_131314 & za_lhs_131700;
        
        ((int8_t *) mem_139616)[min_res_131306] = tmp_131701;
        
        int64_t defunc_res_138965;
        int64_t redout_139371 = (int64_t) 0;
        
        for (int64_t i_139372 = 0; i_139372 < b_119921; i_139372++) {
            int8_t eta_p_132813 = ((int8_t *) mem_139616)[i_139372];
            int64_t eta_p_132814 = ((int64_t *) mem_139589)[i_139372];
            int64_t u8_res_132815 = zext_i8_i64(eta_p_132813);
            int64_t zlzl_rhs_132816 = mul64((int64_t) 8, eta_p_132814);
            int64_t zt_rhs_132817 = shl64((int64_t) 1, zlzl_rhs_132816);
            int64_t lifted_lambda_res_132818 = mul64(u8_res_132815, zt_rhs_132817);
            int64_t zp_res_131714 = add64(lifted_lambda_res_132818, redout_139371);
            int64_t redout_tmp_140333 = zp_res_131714;
            
            redout_139371 = redout_tmp_140333;
        }
        defunc_res_138965 = redout_139371;
        
        bool x_131715 = sle64((int64_t) 0, defunc_res_138965);
        bool y_131716 = slt64(defunc_res_138965, dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925);
        bool bounds_check_131717 = x_131715 && y_131716;
        bool index_certs_131718;
        
        if (!bounds_check_131717) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_res_138965, "] out of bounds for array of shape [", (long long) dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925, "].", "-> #0  ftHashJoin.fut:341:19-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t spi_131719 = ((int64_t *) first_info_idx_mem_139586.mem)[defunc_res_138965];
        bool cond_131720 = spi_131719 == (int64_t) -1;
        int64_t lifted_lambda_res_131721;
        int64_t lifted_lambda_res_131722;
        
        if (cond_131720) {
            lifted_lambda_res_131721 = (int64_t) -1;
            lifted_lambda_res_131722 = (int64_t) -1;
        } else {
            int32_t zeze_lhs_131723 = ((int32_t *) depths_mem_139583.mem)[i_139460];
            bool cond_131724 = zeze_lhs_131723 == 1;
            bool cond_131725;
            
            if (cond_131724) {
                cond_131725 = 1;
            } else {
                bool x_131726 = sle64((int64_t) 0, spi_131719);
                bool y_131727 = slt64(spi_131719, dz2081U_119924);
                bool bounds_check_131728 = x_131726 && y_131727;
                bool index_certs_131729;
                
                if (!bounds_check_131728) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) spi_131719, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:347:42-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t zeze_lhs_131730 = ((int32_t *) depths_mem_139585.mem)[spi_131719];
                bool cond_f_res_131731 = zeze_lhs_131730 == 1;
                
                cond_131725 = cond_f_res_131731;
            }
            
            bool x_140227 = !cond_131725;
            int64_t last_potential_spi_131736;
            
            if (x_140227) {
                int64_t x_140229 = ((int64_t *) last_info_idx_mem_139587.mem)[defunc_res_138965];
                
                last_potential_spi_131736 = x_140229;
            } else {
                last_potential_spi_131736 = (int64_t) 0;
            }
            
            int64_t zs_lhs_131737 = sub64(last_potential_spi_131736, spi_131719);
            int64_t max_arg1_131738 = sdiv64(zs_lhs_131737, (int64_t) 2);
            int64_t max_res_131739 = smax64((int64_t) 1, max_arg1_131738);
            bool loop_cond_131740 = slt64((int64_t) 0, max_res_131739);
            int64_t lifted_lambda_res_f_res_131732;
            int64_t lifted_lambda_res_f_res_131733;
            
            if (cond_131725) {
                int64_t tmp_138491 = ((int64_t *) last_info_idx_mem_139587.mem)[defunc_res_138965];
                
                lifted_lambda_res_f_res_131732 = spi_131719;
                lifted_lambda_res_f_res_131733 = tmp_138491;
            } else {
                int64_t i32_res_131745 = sext_i32_i64(i32_arg0_131297);
                bool x_131749 = sle64((int64_t) 0, i32_res_131745);
                bool y_131750 = slt64(i32_res_131745, b_119921);
                bool bounds_check_131751 = x_131749 && y_131750;
                bool loop_not_taken_131752 = !loop_cond_131740;
                bool protect_assert_disj_131753 = bounds_check_131751 || loop_not_taken_131752;
                bool index_certs_131754;
                
                if (!protect_assert_disj_131753) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_131745, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t min_arg1_131743 = sub32(zm_lhs_131291, 1);
                
                if (mem_139626_cached_sizze_140553 < b_119921) {
                    err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140553, b_119921);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_139627_cached_sizze_140554 < b_119921) {
                    err = lexical_realloc(ctx, &mem_139627, &mem_139627_cached_sizze_140554, b_119921);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                
                bool lifted_lambda_res_f_res_f_res_131755;
                int64_t lifted_lambda_res_f_res_f_res_131756;
                int64_t lifted_lambda_res_f_res_f_res_131757;
                bool loop_while_131758;
                int64_t first_spi_131759;
                int64_t step_131760;
                
                loop_while_131758 = loop_cond_131740;
                first_spi_131759 = spi_131719;
                step_131760 = max_res_131739;
                while (loop_while_131758) {
                    bool x_131761 = sle64((int64_t) 0, first_spi_131759);
                    bool y_131762 = slt64(first_spi_131759, dz2081U_119924);
                    bool bounds_check_131763 = x_131761 && y_131762;
                    bool index_certs_131764;
                    
                    if (!bounds_check_131763) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) first_spi_131759, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:358:32-51\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t cur_S_131765 = ((int64_t *) bounds_mem_139584.mem)[first_spi_131759];
                    bool x_131766 = sle64((int64_t) 0, cur_S_131765);
                    bool y_131767 = slt64(cur_S_131765, nS_119922);
                    bool bounds_check_131768 = x_131766 && y_131767;
                    bool index_certs_131769;
                    
                    if (!bounds_check_131768) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) cur_S_131765, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:358:29-52\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t min_arg1_131771 = ((int32_t *) depths_mem_139585.mem)[first_spi_131759];
                    int32_t min_res_131772 = smin32(zeze_lhs_131723, min_arg1_131771);
                    bool cond_131773 = slt64(spi_131719, first_spi_131759);
                    int64_t tmp_138492 = sub64(first_spi_131759, (int64_t) 1);
                    bool x_138493 = sle64((int64_t) 0, tmp_138492);
                    bool y_138494 = slt64(tmp_138492, dz2081U_119924);
                    bool bounds_check_138495 = x_138493 && y_138494;
                    bool loop_not_taken_140221 = !cond_131773;
                    bool protect_assert_disj_140222 = bounds_check_138495 || loop_not_taken_140221;
                    bool index_certs_138496;
                    
                    if (!protect_assert_disj_140222) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138492, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:360:59-80\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t zm_lhs_131815 = mul32(radix_sizze_119926, min_res_131772);
                    int32_t byteSeq_eq_arg1_131816 = sub32(zm_lhs_131815, 1);
                    int32_t min_res_131817 = smin32(min_arg1_131743, byteSeq_eq_arg1_131816);
                    int32_t zm_rhs_131818 = sdiv32(min_res_131817, 8);
                    int32_t zm_lhs_131819 = sub32(i64_res_131290, zm_rhs_131818);
                    int32_t i32_arg0_131820 = sub32(zm_lhs_131819, 1);
                    int64_t i32_res_131821 = sext_i32_i64(i32_arg0_131820);
                    int64_t min_res_131822 = smin64(min_arg1_131305, i32_res_131821);
                    bool y_131839 = slt64(min_res_131822, b_119921);
                    bool x_131838 = sle64((int64_t) 0, min_res_131822);
                    bool bounds_check_131840 = x_131838 && y_131839;
                    bool index_certs_131841;
                    
                    if (!bounds_check_131840) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_131822, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t lmad_ext_139623 = b_119921 * cur_S_131765;
                    int64_t tmp_138497;
                    
                    if (cond_131773) {
                        int64_t x_140223 = ((int64_t *) bounds_mem_139584.mem)[tmp_138492];
                        
                        tmp_138497 = x_140223;
                    } else {
                        tmp_138497 = (int64_t) 0;
                    }
                    
                    int64_t lmad_ext_139624 = b_119921 * tmp_138497;
                    int64_t ext_139625;
                    
                    if (cond_131773) {
                        ext_139625 = lmad_ext_139624;
                    } else {
                        ext_139625 = lmad_ext_139623;
                    }
                    if (cond_131773) {
                        bool x_138498 = sle64((int64_t) 0, tmp_138497);
                        bool y_138499 = slt64(tmp_138497, nS_119922);
                        bool bounds_check_138500 = x_138498 && y_138499;
                        bool index_certs_138501;
                        
                        if (!bounds_check_138500) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138497, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:360:56-81\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                    }
                    
                    int32_t prev_depth_131786;
                    
                    if (cond_131773) {
                        bool index_certs_138507;
                        
                        if (!bounds_check_138495) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138492, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:361:83-104\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t min_arg1_138508 = ((int32_t *) depths_mem_139585.mem)[tmp_138492];
                        int32_t min_res_138509 = smin32(zeze_lhs_131723, min_arg1_138508);
                        
                        prev_depth_131786 = min_res_138509;
                    } else {
                        prev_depth_131786 = min_res_131772;
                    }
                    
                    bool cond_131794 = slt64(first_spi_131759, last_potential_spi_131736);
                    
                    for (int64_t i_139377 = 0; i_139377 < b_119921; i_139377++) {
                        int8_t eta_p_132828 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139377];
                        int8_t eta_p_132829 = ((int8_t *) pS_mem_139581.mem)[cur_S_131765 * b_119921 + i_139377];
                        bool cond_132831 = sle64(i_139377, i32_res_131745);
                        bool cond_t_res_132832 = sle64(min_res_131822, i_139377);
                        bool x_132833 = cond_132831 && cond_t_res_132832;
                        int8_t lifted_lambda_res_132834;
                        
                        if (x_132833) {
                            lifted_lambda_res_132834 = eta_p_132828;
                        } else {
                            lifted_lambda_res_132834 = (int8_t) 0;
                        }
                        
                        int8_t lifted_lambda_res_132839;
                        
                        if (x_132833) {
                            lifted_lambda_res_132839 = eta_p_132829;
                        } else {
                            lifted_lambda_res_132839 = (int8_t) 0;
                        }
                        ((int8_t *) mem_139626)[i_139377] = lifted_lambda_res_132839;
                        ((int8_t *) mem_139627)[i_139377] = lifted_lambda_res_132834;
                    }
                    
                    int8_t za_lhs_131852 = ((int8_t *) mem_139626)[i32_res_131745];
                    int8_t mod1_x_131853 = (int8_t) -1 & za_lhs_131852;
                    
                    ((int8_t *) mem_139626)[i32_res_131745] = mod1_x_131853;
                    
                    int8_t za_lhs_131855 = ((int8_t *) mem_139626)[min_res_131822];
                    int32_t lastBit_131823 = smod32(min_res_131817, 8);
                    int32_t zm_lhs_131824 = sub32(8, lastBit_131823);
                    int32_t i32_arg0_131825 = sub32(zm_lhs_131824, 1);
                    int8_t unsign_arg0_131826 = zext_i32_i8(i32_arg0_131825);
                    int8_t unsign_arg0_131827 = lshr8((int8_t) -1, unsign_arg0_131826);
                    int8_t tmp_131856 = unsign_arg0_131827 & za_lhs_131855;
                    
                    ((int8_t *) mem_139626)[min_res_131822] = tmp_131856;
                    
                    int8_t za_lhs_131835 = ((int8_t *) mem_139627)[i32_res_131745];
                    int8_t mod1_x_131836 = (int8_t) -1 & za_lhs_131835;
                    
                    ((int8_t *) mem_139627)[i32_res_131745] = mod1_x_131836;
                    
                    int8_t za_lhs_131842 = ((int8_t *) mem_139627)[min_res_131822];
                    int8_t tmp_131843 = unsign_arg0_131827 & za_lhs_131842;
                    
                    ((int8_t *) mem_139627)[min_res_131822] = tmp_131843;
                    
                    bool defunc_0_reduce_res_138733;
                    bool redout_139380 = 1;
                    
                    for (int64_t i_139381 = 0; i_139381 < b_119921; i_139381++) {
                        int8_t eta_p_132822 = ((int8_t *) mem_139627)[i_139381];
                        int8_t eta_p_132823 = ((int8_t *) mem_139626)[i_139381];
                        bool defunc_0_f_res_132824 = eta_p_132822 == eta_p_132823;
                        bool x_131866 = defunc_0_f_res_132824 && redout_139380;
                        bool redout_tmp_140339 = x_131866;
                        
                        redout_139380 = redout_tmp_140339;
                    }
                    defunc_0_reduce_res_138733 = redout_139380;
                    
                    bool cond_131867;
                    
                    if (defunc_0_reduce_res_138733) {
                        bool cond_138513 = first_spi_131759 == spi_131719;
                        bool cond_t_res_138514;
                        
                        if (cond_138513) {
                            cond_t_res_138514 = 1;
                        } else {
                            int32_t zm_lhs_138515 = mul32(radix_sizze_119926, prev_depth_131786);
                            int32_t byteSeq_neq_arg1_138516 = sub32(zm_lhs_138515, 1);
                            int32_t min_res_138517 = smin32(min_arg1_131743, byteSeq_neq_arg1_138516);
                            int32_t zm_rhs_138518 = sdiv32(min_res_138517, 8);
                            int32_t zm_lhs_138519 = sub32(i64_res_131290, zm_rhs_138518);
                            int32_t i32_arg0_138520 = sub32(zm_lhs_138519, 1);
                            int64_t i32_res_138521 = sext_i32_i64(i32_arg0_138520);
                            int64_t min_res_138522 = smin64(min_arg1_131305, i32_res_138521);
                            bool index_certs_138543;
                            
                            if (!bounds_check_131751) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_131745, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool x_138547 = sle64((int64_t) 0, min_res_138522);
                            bool y_138548 = slt64(min_res_138522, b_119921);
                            bool bounds_check_138549 = x_138547 && y_138548;
                            bool index_certs_138550;
                            
                            if (!bounds_check_138549) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_138522, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t lastBit_138523 = smod32(min_res_138517, 8);
                            int32_t zm_lhs_138524 = sub32(8, lastBit_138523);
                            int32_t i32_arg0_138525 = sub32(zm_lhs_138524, 1);
                            int8_t unsign_arg0_138526 = zext_i32_i8(i32_arg0_138525);
                            int8_t unsign_arg0_138527 = lshr8((int8_t) -1, unsign_arg0_138526);
                            
                            if (mem_139640_cached_sizze_140555 < b_119921) {
                                err = lexical_realloc(ctx, &mem_139640, &mem_139640_cached_sizze_140555, b_119921);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_139641_cached_sizze_140556 < b_119921) {
                                err = lexical_realloc(ctx, &mem_139641, &mem_139641_cached_sizze_140556, b_119921);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_139386 = 0; i_139386 < b_119921; i_139386++) {
                                int8_t eta_p_138531 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139386];
                                int8_t eta_p_138532 = ((int8_t *) pS_mem_139581.mem)[ext_139625 + i_139386];
                                bool cond_138533 = sle64(i_139386, i32_res_131745);
                                bool cond_t_res_138534 = sle64(min_res_138522, i_139386);
                                bool x_138535 = cond_138533 && cond_t_res_138534;
                                int8_t lifted_lambda_res_138536;
                                
                                if (x_138535) {
                                    lifted_lambda_res_138536 = eta_p_138531;
                                } else {
                                    lifted_lambda_res_138536 = (int8_t) 0;
                                }
                                
                                int8_t lifted_lambda_res_138540;
                                
                                if (x_138535) {
                                    lifted_lambda_res_138540 = eta_p_138532;
                                } else {
                                    lifted_lambda_res_138540 = (int8_t) 0;
                                }
                                ((int8_t *) mem_139640)[i_139386] = lifted_lambda_res_138540;
                                ((int8_t *) mem_139641)[i_139386] = lifted_lambda_res_138536;
                            }
                            
                            int8_t za_lhs_138544 = ((int8_t *) mem_139641)[i32_res_131745];
                            int8_t mod1_x_138545 = (int8_t) -1 & za_lhs_138544;
                            
                            ((int8_t *) mem_139641)[i32_res_131745] = mod1_x_138545;
                            
                            int8_t za_lhs_138551 = ((int8_t *) mem_139641)[min_res_138522];
                            int8_t tmp_138552 = unsign_arg0_138527 & za_lhs_138551;
                            
                            ((int8_t *) mem_139641)[min_res_138522] = tmp_138552;
                            
                            int8_t za_lhs_138554 = ((int8_t *) mem_139640)[i32_res_131745];
                            int8_t mod1_x_138555 = (int8_t) -1 & za_lhs_138554;
                            
                            ((int8_t *) mem_139640)[i32_res_131745] = mod1_x_138555;
                            
                            int8_t za_lhs_138557 = ((int8_t *) mem_139640)[min_res_138522];
                            int8_t tmp_138558 = unsign_arg0_138527 & za_lhs_138557;
                            
                            ((int8_t *) mem_139640)[min_res_138522] = tmp_138558;
                            
                            bool defunc_0_reduce_res_138560;
                            bool redout_139389 = 0;
                            
                            for (int64_t i_139390 = 0; i_139390 < b_119921; i_139390++) {
                                int8_t eta_p_138561 = ((int8_t *) mem_139641)[i_139390];
                                int8_t eta_p_138562 = ((int8_t *) mem_139640)[i_139390];
                                bool defunc_0_f_res_138563 = eta_p_138561 == eta_p_138562;
                                bool defunc_0_f_res_138564 = !defunc_0_f_res_138563;
                                bool defunc_0_op_res_138567 = defunc_0_f_res_138564 || redout_139389;
                                bool redout_tmp_140342 = defunc_0_op_res_138567;
                                
                                redout_139389 = redout_tmp_140342;
                            }
                            defunc_0_reduce_res_138560 = redout_139389;
                            cond_t_res_138514 = defunc_0_reduce_res_138560;
                        }
                        cond_131867 = cond_t_res_138514;
                    } else {
                        cond_131867 = 0;
                    }
                    
                    int32_t next_depth_131807;
                    
                    if (cond_131794) {
                        int64_t min_arg1_138569 = add64((int64_t) 1, first_spi_131759);
                        bool x_138570 = sle64((int64_t) 0, min_arg1_138569);
                        bool y_138571 = slt64(min_arg1_138569, dz2081U_119924);
                        bool bounds_check_138572 = x_138570 && y_138571;
                        bool index_certs_138573;
                        
                        if (!bounds_check_138572) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_arg1_138569, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:363:98-119\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t min_arg1_138574 = ((int32_t *) depths_mem_139585.mem)[min_arg1_138569];
                        int32_t min_res_138575 = smin32(zeze_lhs_131723, min_arg1_138574);
                        
                        next_depth_131807 = min_res_138575;
                    } else {
                        next_depth_131807 = min_res_131772;
                    }
                    
                    bool loop_cond_t_res_131926 = slt32(0, min_res_131772);
                    int64_t loopres_131924;
                    int64_t loopres_131925;
                    
                    if (cond_131867) {
                        loopres_131924 = first_spi_131759;
                        loopres_131925 = (int64_t) 0;
                    } else {
                        bool loop_cond_t_res_131927 = slt64((int64_t) 0, b_119921);
                        
                        if (mem_139654_cached_sizze_140557 < b_119921) {
                            err = lexical_realloc(ctx, &mem_139654, &mem_139654_cached_sizze_140557, b_119921);
                            if (err != FUTHARK_SUCCESS)
                                goto cleanup;
                        }
                        if (mem_139655_cached_sizze_140558 < b_119921) {
                            err = lexical_realloc(ctx, &mem_139655, &mem_139655_cached_sizze_140558, b_119921);
                            if (err != FUTHARK_SUCCESS)
                                goto cleanup;
                        }
                        
                        bool radix_gt_res_131928;
                        int32_t radix_gt_res_131929;
                        bool radix_gt_res_131930;
                        bool loop_while_131931;
                        int32_t p_131932;
                        bool p_131933;
                        
                        loop_while_131931 = loop_cond_t_res_131926;
                        p_131932 = 0;
                        p_131933 = 0;
                        while (loop_while_131931) {
                            int32_t zt_rhs_131934 = add32(1, p_131932);
                            int32_t zm_lhs_131935 = mul32(radix_sizze_119926, zt_rhs_131934);
                            int32_t byteSeq_lt_arg1_131936 = sub32(zm_lhs_131935, 1);
                            int32_t byteSeq_lt_arg0_131937 = mul32(radix_sizze_119926, p_131932);
                            int32_t min_res_131938 = smin32(min_arg1_131743, byteSeq_lt_arg1_131936);
                            int32_t zm_rhs_131939 = sdiv32(byteSeq_lt_arg0_131937, 8);
                            int32_t zm_lhs_131940 = sub32(i64_res_131290, zm_rhs_131939);
                            int32_t i32_arg0_131941 = sub32(zm_lhs_131940, 1);
                            int64_t i32_res_131942 = sext_i32_i64(i32_arg0_131941);
                            int32_t zm_rhs_131943 = sdiv32(min_res_131938, 8);
                            int32_t zm_lhs_131944 = sub32(i64_res_131290, zm_rhs_131943);
                            int32_t i32_arg0_131945 = sub32(zm_lhs_131944, 1);
                            int64_t i32_res_131946 = sext_i32_i64(i32_arg0_131945);
                            int64_t min_res_131947 = smin64(min_arg1_131305, i32_res_131946);
                            bool x_131963 = sle64((int64_t) 0, i32_res_131942);
                            bool y_131964 = slt64(i32_res_131942, b_119921);
                            bool bounds_check_131965 = x_131963 && y_131964;
                            bool index_certs_131966;
                            
                            if (!bounds_check_131965) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_131942, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool x_131970 = sle64((int64_t) 0, min_res_131947);
                            bool y_131971 = slt64(min_res_131947, b_119921);
                            bool bounds_check_131972 = x_131970 && y_131971;
                            bool index_certs_131973;
                            
                            if (!bounds_check_131972) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_131947, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t firstBit_131948 = smod32(byteSeq_lt_arg0_131937, 8);
                            int32_t lastBit_131949 = smod32(min_res_131938, 8);
                            int8_t unsign_arg0_131950 = zext_i32_i8(firstBit_131948);
                            int8_t first_bitMask_131951 = shl8((int8_t) -1, unsign_arg0_131950);
                            int32_t zm_lhs_131952 = sub32(8, lastBit_131949);
                            int32_t i32_arg0_131953 = sub32(zm_lhs_131952, 1);
                            int8_t unsign_arg0_131954 = zext_i32_i8(i32_arg0_131953);
                            int8_t unsign_arg0_131955 = lshr8((int8_t) -1, unsign_arg0_131954);
                            
                            for (int64_t i_139395 = 0; i_139395 < b_119921; i_139395++) {
                                int8_t eta_p_133188 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139395];
                                int8_t eta_p_133189 = ((int8_t *) pS_mem_139581.mem)[cur_S_131765 * b_119921 + i_139395];
                                bool cond_133191 = sle64(i_139395, i32_res_131942);
                                bool cond_t_res_133192 = sle64(min_res_131947, i_139395);
                                bool x_133193 = cond_133191 && cond_t_res_133192;
                                int8_t lifted_lambda_res_133194;
                                
                                if (x_133193) {
                                    lifted_lambda_res_133194 = eta_p_133188;
                                } else {
                                    lifted_lambda_res_133194 = (int8_t) 0;
                                }
                                
                                int8_t lifted_lambda_res_133199;
                                
                                if (x_133193) {
                                    lifted_lambda_res_133199 = eta_p_133189;
                                } else {
                                    lifted_lambda_res_133199 = (int8_t) 0;
                                }
                                ((int8_t *) mem_139654)[i_139395] = lifted_lambda_res_133199;
                                ((int8_t *) mem_139655)[i_139395] = lifted_lambda_res_133194;
                            }
                            
                            int8_t za_lhs_131967 = ((int8_t *) mem_139655)[i32_res_131942];
                            int8_t mod1_x_131968 = first_bitMask_131951 & za_lhs_131967;
                            
                            ((int8_t *) mem_139655)[i32_res_131942] = mod1_x_131968;
                            
                            int8_t za_lhs_131974 = ((int8_t *) mem_139655)[min_res_131947];
                            int8_t tmp_131975 = unsign_arg0_131955 & za_lhs_131974;
                            
                            ((int8_t *) mem_139655)[min_res_131947] = tmp_131975;
                            
                            int8_t za_lhs_131984 = ((int8_t *) mem_139654)[i32_res_131942];
                            int8_t mod1_x_131985 = first_bitMask_131951 & za_lhs_131984;
                            
                            ((int8_t *) mem_139654)[i32_res_131942] = mod1_x_131985;
                            
                            int8_t za_lhs_131987 = ((int8_t *) mem_139654)[min_res_131947];
                            int8_t tmp_131988 = unsign_arg0_131955 & za_lhs_131987;
                            
                            ((int8_t *) mem_139654)[min_res_131947] = tmp_131988;
                            
                            bool byteSeq_lt_res_131990;
                            int64_t byteSeq_lt_res_131991;
                            bool byteSeq_lt_res_131992;
                            bool loop_while_131993;
                            int64_t p_131994;
                            bool p_131995;
                            
                            loop_while_131993 = loop_cond_t_res_131927;
                            p_131994 = (int64_t) 0;
                            p_131995 = 0;
                            while (loop_while_131993) {
                                bool x_131996 = sle64((int64_t) 0, p_131994);
                                bool y_131997 = slt64(p_131994, b_119921);
                                bool bounds_check_131998 = x_131996 && y_131997;
                                bool index_certs_131999;
                                
                                if (!bounds_check_131998) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_131994, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:78:17-27\n   #1  ftHashJoin.fut:177:17-83\n   #2  ftHashJoin.fut:369:20-61\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int8_t zl_lhs_132000 = ((int8_t *) mem_139655)[p_131994];
                                int8_t zl_rhs_132001 = ((int8_t *) mem_139654)[p_131994];
                                bool dlt_132002 = ult8(zl_lhs_132000, zl_rhs_132001);
                                bool dgt_132003 = ult8(zl_rhs_132001, zl_lhs_132000);
                                bool tmp_132004 = dlt_132002 || dgt_132003;
                                bool cond_132005 = !tmp_132004;
                                int64_t tmp_132006;
                                
                                if (cond_132005) {
                                    int64_t tmp_t_res_138576 = add64((int64_t) 1, p_131994);
                                    
                                    tmp_132006 = tmp_t_res_138576;
                                } else {
                                    tmp_132006 = b_119921;
                                }
                                
                                bool cond_132008 = !dlt_132002;
                                bool loop_cond_t_res_132009 = slt64(tmp_132006, b_119921);
                                bool x_132010 = cond_132008 && loop_cond_t_res_132009;
                                bool loop_while_tmp_140348 = x_132010;
                                int64_t p_tmp_140349 = tmp_132006;
                                bool p_tmp_140350 = dlt_132002;
                                
                                loop_while_131993 = loop_while_tmp_140348;
                                p_131994 = p_tmp_140349;
                                p_131995 = p_tmp_140350;
                            }
                            byteSeq_lt_res_131990 = loop_while_131993;
                            byteSeq_lt_res_131991 = p_131994;
                            byteSeq_lt_res_131992 = p_131995;
                            
                            bool byteSeq_gt_res_132011;
                            int64_t byteSeq_gt_res_132012;
                            bool byteSeq_gt_res_132013;
                            bool loop_while_132014;
                            int64_t p_132015;
                            bool p_132016;
                            
                            loop_while_132014 = loop_cond_t_res_131927;
                            p_132015 = (int64_t) 0;
                            p_132016 = 0;
                            while (loop_while_132014) {
                                bool x_132017 = sle64((int64_t) 0, p_132015);
                                bool y_132018 = slt64(p_132015, b_119921);
                                bool bounds_check_132019 = x_132017 && y_132018;
                                bool index_certs_132020;
                                
                                if (!bounds_check_132019) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132015, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:111:17-27\n   #1  ftHashJoin.fut:178:17-83\n   #2  ftHashJoin.fut:369:20-61\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int8_t zl_lhs_132021 = ((int8_t *) mem_139655)[p_132015];
                                int8_t zl_rhs_132022 = ((int8_t *) mem_139654)[p_132015];
                                bool dlt_132023 = ult8(zl_lhs_132021, zl_rhs_132022);
                                bool dgt_132024 = ult8(zl_rhs_132022, zl_lhs_132021);
                                bool tmp_132025 = dlt_132023 || dgt_132024;
                                bool cond_132026 = !tmp_132025;
                                int64_t tmp_132027;
                                
                                if (cond_132026) {
                                    int64_t tmp_t_res_138577 = add64((int64_t) 1, p_132015);
                                    
                                    tmp_132027 = tmp_t_res_138577;
                                } else {
                                    tmp_132027 = b_119921;
                                }
                                
                                bool cond_132029 = !dgt_132024;
                                bool loop_cond_t_res_132030 = slt64(tmp_132027, b_119921);
                                bool x_132031 = cond_132029 && loop_cond_t_res_132030;
                                bool loop_while_tmp_140351 = x_132031;
                                int64_t p_tmp_140352 = tmp_132027;
                                bool p_tmp_140353 = dgt_132024;
                                
                                loop_while_132014 = loop_while_tmp_140351;
                                p_132015 = p_tmp_140352;
                                p_132016 = p_tmp_140353;
                            }
                            byteSeq_gt_res_132011 = loop_while_132014;
                            byteSeq_gt_res_132012 = p_132015;
                            byteSeq_gt_res_132013 = p_132016;
                            
                            bool tmp_132032 = byteSeq_lt_res_131992 || byteSeq_gt_res_132013;
                            bool cond_132033 = !tmp_132032;
                            int32_t tmp_132034;
                            
                            if (cond_132033) {
                                tmp_132034 = zt_rhs_131934;
                            } else {
                                tmp_132034 = min_res_131772;
                            }
                            
                            bool cond_132035 = !byteSeq_gt_res_132013;
                            bool loop_cond_t_res_132036 = slt32(tmp_132034, min_res_131772);
                            bool x_132037 = cond_132035 && loop_cond_t_res_132036;
                            bool loop_while_tmp_140343 = x_132037;
                            int32_t p_tmp_140344 = tmp_132034;
                            bool p_tmp_140345 = byteSeq_gt_res_132013;
                            
                            loop_while_131931 = loop_while_tmp_140343;
                            p_131932 = p_tmp_140344;
                            p_131933 = p_tmp_140345;
                        }
                        radix_gt_res_131928 = loop_while_131931;
                        radix_gt_res_131929 = p_131932;
                        radix_gt_res_131930 = p_131933;
                        
                        int64_t loopres_f_res_132038;
                        int64_t loopres_f_res_132039;
                        
                        if (radix_gt_res_131930) {
                            bool cond_138595 = first_spi_131759 == last_potential_spi_131736;
                            int64_t tmp_138599 = add64((int64_t) 1, first_spi_131759);
                            bool x_138600 = sle64((int64_t) 0, tmp_138599);
                            bool y_138601 = slt64(tmp_138599, dz2081U_119924);
                            bool bounds_check_138602 = x_138600 && y_138601;
                            bool loop_not_taken_140211 = !cond_131794;
                            bool protect_assert_disj_140212 = bounds_check_138602 || loop_not_taken_140211;
                            bool protect_assert_disj_140243 = cond_138595 || protect_assert_disj_140212;
                            bool index_certs_138603;
                            
                            if (!protect_assert_disj_140243) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138599, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:362:74-95\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool loop_cond_t_res_138610 = slt32(0, next_depth_131807);
                            bool x_140240 = !cond_138595;
                            bool protect_cond_conj_140244 = cond_131794 && x_140240;
                            int64_t tmp_138604;
                            
                            if (protect_cond_conj_140244) {
                                int64_t x_140213 = ((int64_t *) bounds_mem_139584.mem)[tmp_138599];
                                
                                tmp_138604 = x_140213;
                            } else {
                                tmp_138604 = (int64_t) 0;
                            }
                            
                            int64_t lmad_ext_139683 = b_119921 * tmp_138604;
                            int64_t ext_139684;
                            
                            if (cond_131794) {
                                ext_139684 = lmad_ext_139683;
                            } else {
                                ext_139684 = lmad_ext_139623;
                            }
                            
                            int64_t loopres_f_res_t_res_138596;
                            int64_t loopres_f_res_t_res_138597;
                            
                            if (cond_138595) {
                                loopres_f_res_t_res_138596 = (int64_t) -1;
                                loopres_f_res_t_res_138597 = (int64_t) 0;
                            } else {
                                if (cond_131794) {
                                    bool x_138605 = sle64((int64_t) 0, tmp_138604);
                                    bool y_138606 = slt64(tmp_138604, nS_119922);
                                    bool bounds_check_138607 = x_138605 && y_138606;
                                    bool index_certs_138608;
                                    
                                    if (!bounds_check_138607) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138604, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:362:71-96\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                }
                                if (mem_139685_cached_sizze_140561 < b_119921) {
                                    err = lexical_realloc(ctx, &mem_139685, &mem_139685_cached_sizze_140561, b_119921);
                                    if (err != FUTHARK_SUCCESS)
                                        goto cleanup;
                                }
                                if (mem_139686_cached_sizze_140562 < b_119921) {
                                    err = lexical_realloc(ctx, &mem_139686, &mem_139686_cached_sizze_140562, b_119921);
                                    if (err != FUTHARK_SUCCESS)
                                        goto cleanup;
                                }
                                
                                bool radix_lt_res_138611;
                                int32_t radix_lt_res_138612;
                                bool radix_lt_res_138613;
                                bool loop_while_138614;
                                int32_t p_138615;
                                bool p_138616;
                                
                                loop_while_138614 = loop_cond_t_res_138610;
                                p_138615 = 0;
                                p_138616 = 0;
                                while (loop_while_138614) {
                                    int32_t zt_rhs_138617 = add32(1, p_138615);
                                    int32_t zm_lhs_138618 = mul32(radix_sizze_119926, zt_rhs_138617);
                                    int32_t byteSeq_lt_arg1_138619 = sub32(zm_lhs_138618, 1);
                                    int32_t byteSeq_lt_arg0_138620 = mul32(radix_sizze_119926, p_138615);
                                    int32_t min_res_138621 = smin32(min_arg1_131743, byteSeq_lt_arg1_138619);
                                    int32_t zm_rhs_138622 = sdiv32(byteSeq_lt_arg0_138620, 8);
                                    int32_t zm_lhs_138623 = sub32(i64_res_131290, zm_rhs_138622);
                                    int32_t i32_arg0_138624 = sub32(zm_lhs_138623, 1);
                                    int64_t i32_res_138625 = sext_i32_i64(i32_arg0_138624);
                                    int32_t zm_rhs_138626 = sdiv32(min_res_138621, 8);
                                    int32_t zm_lhs_138627 = sub32(i64_res_131290, zm_rhs_138626);
                                    int32_t i32_arg0_138628 = sub32(zm_lhs_138627, 1);
                                    int64_t i32_res_138629 = sext_i32_i64(i32_arg0_138628);
                                    int64_t min_res_138630 = smin64(min_arg1_131305, i32_res_138629);
                                    bool x_138654 = sle64((int64_t) 0, i32_res_138625);
                                    bool y_138655 = slt64(i32_res_138625, b_119921);
                                    bool bounds_check_138656 = x_138654 && y_138655;
                                    bool index_certs_138657;
                                    
                                    if (!bounds_check_138656) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_138625, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_138661 = sle64((int64_t) 0, min_res_138630);
                                    bool y_138662 = slt64(min_res_138630, b_119921);
                                    bool bounds_check_138663 = x_138661 && y_138662;
                                    bool index_certs_138664;
                                    
                                    if (!bounds_check_138663) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_138630, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int32_t firstBit_138631 = smod32(byteSeq_lt_arg0_138620, 8);
                                    int32_t lastBit_138632 = smod32(min_res_138621, 8);
                                    int8_t unsign_arg0_138633 = zext_i32_i8(firstBit_138631);
                                    int8_t first_bitMask_138634 = shl8((int8_t) -1, unsign_arg0_138633);
                                    int32_t zm_lhs_138635 = sub32(8, lastBit_138632);
                                    int32_t i32_arg0_138636 = sub32(zm_lhs_138635, 1);
                                    int8_t unsign_arg0_138637 = zext_i32_i8(i32_arg0_138636);
                                    int8_t unsign_arg0_138638 = lshr8((int8_t) -1, unsign_arg0_138637);
                                    
                                    for (int64_t i_139402 = 0; i_139402 < b_119921; i_139402++) {
                                        int8_t eta_p_138642 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139402];
                                        int8_t eta_p_138643 = ((int8_t *) pS_mem_139581.mem)[ext_139684 + i_139402];
                                        bool cond_138644 = sle64(i_139402, i32_res_138625);
                                        bool cond_t_res_138645 = sle64(min_res_138630, i_139402);
                                        bool x_138646 = cond_138644 && cond_t_res_138645;
                                        int8_t lifted_lambda_res_138647;
                                        
                                        if (x_138646) {
                                            lifted_lambda_res_138647 = eta_p_138642;
                                        } else {
                                            lifted_lambda_res_138647 = (int8_t) 0;
                                        }
                                        
                                        int8_t lifted_lambda_res_138651;
                                        
                                        if (x_138646) {
                                            lifted_lambda_res_138651 = eta_p_138643;
                                        } else {
                                            lifted_lambda_res_138651 = (int8_t) 0;
                                        }
                                        ((int8_t *) mem_139685)[i_139402] = lifted_lambda_res_138651;
                                        ((int8_t *) mem_139686)[i_139402] = lifted_lambda_res_138647;
                                    }
                                    
                                    int8_t za_lhs_138658 = ((int8_t *) mem_139686)[i32_res_138625];
                                    int8_t mod1_x_138659 = first_bitMask_138634 & za_lhs_138658;
                                    
                                    ((int8_t *) mem_139686)[i32_res_138625] = mod1_x_138659;
                                    
                                    int8_t za_lhs_138665 = ((int8_t *) mem_139686)[min_res_138630];
                                    int8_t tmp_138666 = unsign_arg0_138638 & za_lhs_138665;
                                    
                                    ((int8_t *) mem_139686)[min_res_138630] = tmp_138666;
                                    
                                    int8_t za_lhs_138668 = ((int8_t *) mem_139685)[i32_res_138625];
                                    int8_t mod1_x_138669 = first_bitMask_138634 & za_lhs_138668;
                                    
                                    ((int8_t *) mem_139685)[i32_res_138625] = mod1_x_138669;
                                    
                                    int8_t za_lhs_138671 = ((int8_t *) mem_139685)[min_res_138630];
                                    int8_t tmp_138672 = unsign_arg0_138638 & za_lhs_138671;
                                    
                                    ((int8_t *) mem_139685)[min_res_138630] = tmp_138672;
                                    
                                    bool byteSeq_lt_res_138674;
                                    int64_t byteSeq_lt_res_138675;
                                    bool byteSeq_lt_res_138676;
                                    bool loop_while_138677;
                                    int64_t p_138678;
                                    bool p_138679;
                                    
                                    loop_while_138677 = loop_cond_t_res_131927;
                                    p_138678 = (int64_t) 0;
                                    p_138679 = 0;
                                    while (loop_while_138677) {
                                        bool x_138680 = sle64((int64_t) 0, p_138678);
                                        bool y_138681 = slt64(p_138678, b_119921);
                                        bool bounds_check_138682 = x_138680 && y_138681;
                                        bool index_certs_138683;
                                        
                                        if (!bounds_check_138682) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_138678, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:78:17-27\n   #1  ftHashJoin.fut:148:17-83\n   #2  ftHashJoin.fut:372:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int8_t zl_lhs_138684 = ((int8_t *) mem_139686)[p_138678];
                                        int8_t zl_rhs_138685 = ((int8_t *) mem_139685)[p_138678];
                                        bool dlt_138686 = ult8(zl_lhs_138684, zl_rhs_138685);
                                        bool dgt_138687 = ult8(zl_rhs_138685, zl_lhs_138684);
                                        bool tmp_138688 = dlt_138686 || dgt_138687;
                                        bool cond_138689 = !tmp_138688;
                                        int64_t tmp_138690;
                                        
                                        if (cond_138689) {
                                            int64_t tmp_t_res_138691 = add64((int64_t) 1, p_138678);
                                            
                                            tmp_138690 = tmp_t_res_138691;
                                        } else {
                                            tmp_138690 = b_119921;
                                        }
                                        
                                        bool cond_138692 = !dlt_138686;
                                        bool loop_cond_t_res_138693 = slt64(tmp_138690, b_119921);
                                        bool x_138694 = cond_138692 && loop_cond_t_res_138693;
                                        bool loop_while_tmp_140359 = x_138694;
                                        int64_t p_tmp_140360 = tmp_138690;
                                        bool p_tmp_140361 = dlt_138686;
                                        
                                        loop_while_138677 = loop_while_tmp_140359;
                                        p_138678 = p_tmp_140360;
                                        p_138679 = p_tmp_140361;
                                    }
                                    byteSeq_lt_res_138674 = loop_while_138677;
                                    byteSeq_lt_res_138675 = p_138678;
                                    byteSeq_lt_res_138676 = p_138679;
                                    
                                    bool byteSeq_gt_res_138695;
                                    int64_t byteSeq_gt_res_138696;
                                    bool byteSeq_gt_res_138697;
                                    bool loop_while_138698;
                                    int64_t p_138699;
                                    bool p_138700;
                                    
                                    loop_while_138698 = loop_cond_t_res_131927;
                                    p_138699 = (int64_t) 0;
                                    p_138700 = 0;
                                    while (loop_while_138698) {
                                        bool x_138701 = sle64((int64_t) 0, p_138699);
                                        bool y_138702 = slt64(p_138699, b_119921);
                                        bool bounds_check_138703 = x_138701 && y_138702;
                                        bool index_certs_138704;
                                        
                                        if (!bounds_check_138703) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_138699, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:111:17-27\n   #1  ftHashJoin.fut:149:17-83\n   #2  ftHashJoin.fut:372:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int8_t zl_lhs_138705 = ((int8_t *) mem_139686)[p_138699];
                                        int8_t zl_rhs_138706 = ((int8_t *) mem_139685)[p_138699];
                                        bool dlt_138707 = ult8(zl_lhs_138705, zl_rhs_138706);
                                        bool dgt_138708 = ult8(zl_rhs_138706, zl_lhs_138705);
                                        bool tmp_138709 = dlt_138707 || dgt_138708;
                                        bool cond_138710 = !tmp_138709;
                                        int64_t tmp_138711;
                                        
                                        if (cond_138710) {
                                            int64_t tmp_t_res_138712 = add64((int64_t) 1, p_138699);
                                            
                                            tmp_138711 = tmp_t_res_138712;
                                        } else {
                                            tmp_138711 = b_119921;
                                        }
                                        
                                        bool cond_138713 = !dgt_138708;
                                        bool loop_cond_t_res_138714 = slt64(tmp_138711, b_119921);
                                        bool x_138715 = cond_138713 && loop_cond_t_res_138714;
                                        bool loop_while_tmp_140362 = x_138715;
                                        int64_t p_tmp_140363 = tmp_138711;
                                        bool p_tmp_140364 = dgt_138708;
                                        
                                        loop_while_138698 = loop_while_tmp_140362;
                                        p_138699 = p_tmp_140363;
                                        p_138700 = p_tmp_140364;
                                    }
                                    byteSeq_gt_res_138695 = loop_while_138698;
                                    byteSeq_gt_res_138696 = p_138699;
                                    byteSeq_gt_res_138697 = p_138700;
                                    
                                    bool tmp_138716 = byteSeq_lt_res_138676 || byteSeq_gt_res_138697;
                                    bool cond_138717 = !tmp_138716;
                                    int32_t tmp_138718;
                                    
                                    if (cond_138717) {
                                        tmp_138718 = zt_rhs_138617;
                                    } else {
                                        tmp_138718 = next_depth_131807;
                                    }
                                    
                                    bool cond_138719 = !byteSeq_lt_res_138676;
                                    bool loop_cond_t_res_138720 = slt32(tmp_138718, next_depth_131807);
                                    bool x_138721 = cond_138719 && loop_cond_t_res_138720;
                                    bool loop_while_tmp_140354 = x_138721;
                                    int32_t p_tmp_140355 = tmp_138718;
                                    bool p_tmp_140356 = byteSeq_lt_res_138676;
                                    
                                    loop_while_138614 = loop_while_tmp_140354;
                                    p_138615 = p_tmp_140355;
                                    p_138616 = p_tmp_140356;
                                }
                                radix_lt_res_138611 = loop_while_138614;
                                radix_lt_res_138612 = p_138615;
                                radix_lt_res_138613 = p_138616;
                                
                                int64_t loopres_f_res_t_res_f_res_138722;
                                int64_t loopres_f_res_t_res_f_res_138723;
                                
                                if (radix_lt_res_138613) {
                                    loopres_f_res_t_res_f_res_138722 = (int64_t) -1;
                                    loopres_f_res_t_res_f_res_138723 = (int64_t) 0;
                                } else {
                                    int64_t tmp_138724 = add64(first_spi_131759, step_131760);
                                    int64_t max_arg1_138725 = sdiv64(step_131760, (int64_t) 2);
                                    int64_t max_res_138726 = smax64((int64_t) 1, max_arg1_138725);
                                    
                                    loopres_f_res_t_res_f_res_138722 = tmp_138724;
                                    loopres_f_res_t_res_f_res_138723 = max_res_138726;
                                }
                                loopres_f_res_t_res_138596 = loopres_f_res_t_res_f_res_138722;
                                loopres_f_res_t_res_138597 = loopres_f_res_t_res_f_res_138723;
                            }
                            loopres_f_res_132038 = loopres_f_res_t_res_138596;
                            loopres_f_res_132039 = loopres_f_res_t_res_138597;
                        } else {
                            bool cond_132159 = first_spi_131759 == spi_131719;
                            bool loop_cond_t_res_132162 = slt32(0, prev_depth_131786);
                            int64_t loopres_f_res_f_res_132160;
                            int64_t loopres_f_res_f_res_132161;
                            
                            if (cond_132159) {
                                loopres_f_res_f_res_132160 = (int64_t) -1;
                                loopres_f_res_f_res_132161 = (int64_t) 0;
                            } else {
                                if (mem_139668_cached_sizze_140559 < b_119921) {
                                    err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140559, b_119921);
                                    if (err != FUTHARK_SUCCESS)
                                        goto cleanup;
                                }
                                if (mem_139669_cached_sizze_140560 < b_119921) {
                                    err = lexical_realloc(ctx, &mem_139669, &mem_139669_cached_sizze_140560, b_119921);
                                    if (err != FUTHARK_SUCCESS)
                                        goto cleanup;
                                }
                                
                                bool radix_gt_res_132163;
                                int32_t radix_gt_res_132164;
                                bool radix_gt_res_132165;
                                bool loop_while_132166;
                                int32_t p_132167;
                                bool p_132168;
                                
                                loop_while_132166 = loop_cond_t_res_132162;
                                p_132167 = 0;
                                p_132168 = 0;
                                while (loop_while_132166) {
                                    int32_t zt_rhs_132169 = add32(1, p_132167);
                                    int32_t zm_lhs_132170 = mul32(radix_sizze_119926, zt_rhs_132169);
                                    int32_t byteSeq_lt_arg1_132171 = sub32(zm_lhs_132170, 1);
                                    int32_t byteSeq_lt_arg0_132172 = mul32(radix_sizze_119926, p_132167);
                                    int32_t min_res_132173 = smin32(min_arg1_131743, byteSeq_lt_arg1_132171);
                                    int32_t zm_rhs_132174 = sdiv32(byteSeq_lt_arg0_132172, 8);
                                    int32_t zm_lhs_132175 = sub32(i64_res_131290, zm_rhs_132174);
                                    int32_t i32_arg0_132176 = sub32(zm_lhs_132175, 1);
                                    int64_t i32_res_132177 = sext_i32_i64(i32_arg0_132176);
                                    int32_t zm_rhs_132178 = sdiv32(min_res_132173, 8);
                                    int32_t zm_lhs_132179 = sub32(i64_res_131290, zm_rhs_132178);
                                    int32_t i32_arg0_132180 = sub32(zm_lhs_132179, 1);
                                    int64_t i32_res_132181 = sext_i32_i64(i32_arg0_132180);
                                    int64_t min_res_132182 = smin64(min_arg1_131305, i32_res_132181);
                                    bool x_132198 = sle64((int64_t) 0, i32_res_132177);
                                    bool y_132199 = slt64(i32_res_132177, b_119921);
                                    bool bounds_check_132200 = x_132198 && y_132199;
                                    bool index_certs_132201;
                                    
                                    if (!bounds_check_132200) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_132177, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_132205 = sle64((int64_t) 0, min_res_132182);
                                    bool y_132206 = slt64(min_res_132182, b_119921);
                                    bool bounds_check_132207 = x_132205 && y_132206;
                                    bool index_certs_132208;
                                    
                                    if (!bounds_check_132207) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_132182, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int32_t firstBit_132183 = smod32(byteSeq_lt_arg0_132172, 8);
                                    int32_t lastBit_132184 = smod32(min_res_132173, 8);
                                    int8_t unsign_arg0_132185 = zext_i32_i8(firstBit_132183);
                                    int8_t first_bitMask_132186 = shl8((int8_t) -1, unsign_arg0_132185);
                                    int32_t zm_lhs_132187 = sub32(8, lastBit_132184);
                                    int32_t i32_arg0_132188 = sub32(zm_lhs_132187, 1);
                                    int8_t unsign_arg0_132189 = zext_i32_i8(i32_arg0_132188);
                                    int8_t unsign_arg0_132190 = lshr8((int8_t) -1, unsign_arg0_132189);
                                    
                                    for (int64_t i_139409 = 0; i_139409 < b_119921; i_139409++) {
                                        int8_t eta_p_133149 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139409];
                                        int8_t eta_p_133150 = ((int8_t *) pS_mem_139581.mem)[ext_139625 + i_139409];
                                        bool cond_133152 = sle64(i_139409, i32_res_132177);
                                        bool cond_t_res_133153 = sle64(min_res_132182, i_139409);
                                        bool x_133154 = cond_133152 && cond_t_res_133153;
                                        int8_t lifted_lambda_res_133155;
                                        
                                        if (x_133154) {
                                            lifted_lambda_res_133155 = eta_p_133149;
                                        } else {
                                            lifted_lambda_res_133155 = (int8_t) 0;
                                        }
                                        
                                        int8_t lifted_lambda_res_133160;
                                        
                                        if (x_133154) {
                                            lifted_lambda_res_133160 = eta_p_133150;
                                        } else {
                                            lifted_lambda_res_133160 = (int8_t) 0;
                                        }
                                        ((int8_t *) mem_139668)[i_139409] = lifted_lambda_res_133160;
                                        ((int8_t *) mem_139669)[i_139409] = lifted_lambda_res_133155;
                                    }
                                    
                                    int8_t za_lhs_132202 = ((int8_t *) mem_139669)[i32_res_132177];
                                    int8_t mod1_x_132203 = first_bitMask_132186 & za_lhs_132202;
                                    
                                    ((int8_t *) mem_139669)[i32_res_132177] = mod1_x_132203;
                                    
                                    int8_t za_lhs_132209 = ((int8_t *) mem_139669)[min_res_132182];
                                    int8_t tmp_132210 = unsign_arg0_132190 & za_lhs_132209;
                                    
                                    ((int8_t *) mem_139669)[min_res_132182] = tmp_132210;
                                    
                                    int8_t za_lhs_132219 = ((int8_t *) mem_139668)[i32_res_132177];
                                    int8_t mod1_x_132220 = first_bitMask_132186 & za_lhs_132219;
                                    
                                    ((int8_t *) mem_139668)[i32_res_132177] = mod1_x_132220;
                                    
                                    int8_t za_lhs_132222 = ((int8_t *) mem_139668)[min_res_132182];
                                    int8_t tmp_132223 = unsign_arg0_132190 & za_lhs_132222;
                                    
                                    ((int8_t *) mem_139668)[min_res_132182] = tmp_132223;
                                    
                                    bool byteSeq_lt_res_132225;
                                    int64_t byteSeq_lt_res_132226;
                                    bool byteSeq_lt_res_132227;
                                    bool loop_while_132228;
                                    int64_t p_132229;
                                    bool p_132230;
                                    
                                    loop_while_132228 = loop_cond_t_res_131927;
                                    p_132229 = (int64_t) 0;
                                    p_132230 = 0;
                                    while (loop_while_132228) {
                                        bool x_132231 = sle64((int64_t) 0, p_132229);
                                        bool y_132232 = slt64(p_132229, b_119921);
                                        bool bounds_check_132233 = x_132231 && y_132232;
                                        bool index_certs_132234;
                                        
                                        if (!bounds_check_132233) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132229, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:78:17-27\n   #1  ftHashJoin.fut:177:17-83\n   #2  ftHashJoin.fut:376:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int8_t zl_lhs_132235 = ((int8_t *) mem_139669)[p_132229];
                                        int8_t zl_rhs_132236 = ((int8_t *) mem_139668)[p_132229];
                                        bool dlt_132237 = ult8(zl_lhs_132235, zl_rhs_132236);
                                        bool dgt_132238 = ult8(zl_rhs_132236, zl_lhs_132235);
                                        bool tmp_132239 = dlt_132237 || dgt_132238;
                                        bool cond_132240 = !tmp_132239;
                                        int64_t tmp_132241;
                                        
                                        if (cond_132240) {
                                            int64_t tmp_t_res_138727 = add64((int64_t) 1, p_132229);
                                            
                                            tmp_132241 = tmp_t_res_138727;
                                        } else {
                                            tmp_132241 = b_119921;
                                        }
                                        
                                        bool cond_132243 = !dlt_132237;
                                        bool loop_cond_t_res_132244 = slt64(tmp_132241, b_119921);
                                        bool x_132245 = cond_132243 && loop_cond_t_res_132244;
                                        bool loop_while_tmp_140370 = x_132245;
                                        int64_t p_tmp_140371 = tmp_132241;
                                        bool p_tmp_140372 = dlt_132237;
                                        
                                        loop_while_132228 = loop_while_tmp_140370;
                                        p_132229 = p_tmp_140371;
                                        p_132230 = p_tmp_140372;
                                    }
                                    byteSeq_lt_res_132225 = loop_while_132228;
                                    byteSeq_lt_res_132226 = p_132229;
                                    byteSeq_lt_res_132227 = p_132230;
                                    
                                    bool byteSeq_gt_res_132246;
                                    int64_t byteSeq_gt_res_132247;
                                    bool byteSeq_gt_res_132248;
                                    bool loop_while_132249;
                                    int64_t p_132250;
                                    bool p_132251;
                                    
                                    loop_while_132249 = loop_cond_t_res_131927;
                                    p_132250 = (int64_t) 0;
                                    p_132251 = 0;
                                    while (loop_while_132249) {
                                        bool x_132252 = sle64((int64_t) 0, p_132250);
                                        bool y_132253 = slt64(p_132250, b_119921);
                                        bool bounds_check_132254 = x_132252 && y_132253;
                                        bool index_certs_132255;
                                        
                                        if (!bounds_check_132254) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132250, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:111:17-27\n   #1  ftHashJoin.fut:178:17-83\n   #2  ftHashJoin.fut:376:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int8_t zl_lhs_132256 = ((int8_t *) mem_139669)[p_132250];
                                        int8_t zl_rhs_132257 = ((int8_t *) mem_139668)[p_132250];
                                        bool dlt_132258 = ult8(zl_lhs_132256, zl_rhs_132257);
                                        bool dgt_132259 = ult8(zl_rhs_132257, zl_lhs_132256);
                                        bool tmp_132260 = dlt_132258 || dgt_132259;
                                        bool cond_132261 = !tmp_132260;
                                        int64_t tmp_132262;
                                        
                                        if (cond_132261) {
                                            int64_t tmp_t_res_138728 = add64((int64_t) 1, p_132250);
                                            
                                            tmp_132262 = tmp_t_res_138728;
                                        } else {
                                            tmp_132262 = b_119921;
                                        }
                                        
                                        bool cond_132264 = !dgt_132259;
                                        bool loop_cond_t_res_132265 = slt64(tmp_132262, b_119921);
                                        bool x_132266 = cond_132264 && loop_cond_t_res_132265;
                                        bool loop_while_tmp_140373 = x_132266;
                                        int64_t p_tmp_140374 = tmp_132262;
                                        bool p_tmp_140375 = dgt_132259;
                                        
                                        loop_while_132249 = loop_while_tmp_140373;
                                        p_132250 = p_tmp_140374;
                                        p_132251 = p_tmp_140375;
                                    }
                                    byteSeq_gt_res_132246 = loop_while_132249;
                                    byteSeq_gt_res_132247 = p_132250;
                                    byteSeq_gt_res_132248 = p_132251;
                                    
                                    bool tmp_132267 = byteSeq_lt_res_132227 || byteSeq_gt_res_132248;
                                    bool cond_132268 = !tmp_132267;
                                    int32_t tmp_132269;
                                    
                                    if (cond_132268) {
                                        tmp_132269 = zt_rhs_132169;
                                    } else {
                                        tmp_132269 = prev_depth_131786;
                                    }
                                    
                                    bool cond_132270 = !byteSeq_gt_res_132248;
                                    bool loop_cond_t_res_132271 = slt32(tmp_132269, prev_depth_131786);
                                    bool x_132272 = cond_132270 && loop_cond_t_res_132271;
                                    bool loop_while_tmp_140365 = x_132272;
                                    int32_t p_tmp_140366 = tmp_132269;
                                    bool p_tmp_140367 = byteSeq_gt_res_132248;
                                    
                                    loop_while_132166 = loop_while_tmp_140365;
                                    p_132167 = p_tmp_140366;
                                    p_132168 = p_tmp_140367;
                                }
                                radix_gt_res_132163 = loop_while_132166;
                                radix_gt_res_132164 = p_132167;
                                radix_gt_res_132165 = p_132168;
                                
                                int64_t loopres_f_res_f_res_f_res_132273;
                                int64_t loopres_f_res_f_res_f_res_132274;
                                
                                if (radix_gt_res_132165) {
                                    loopres_f_res_f_res_f_res_132273 = (int64_t) -1;
                                    loopres_f_res_f_res_f_res_132274 = (int64_t) 0;
                                } else {
                                    int64_t tmp_132275 = sub64(first_spi_131759, step_131760);
                                    int64_t max_arg1_132276 = sdiv64(step_131760, (int64_t) 2);
                                    int64_t max_res_132277 = smax64((int64_t) 1, max_arg1_132276);
                                    
                                    loopres_f_res_f_res_f_res_132273 = tmp_132275;
                                    loopres_f_res_f_res_f_res_132274 = max_res_132277;
                                }
                                loopres_f_res_f_res_132160 = loopres_f_res_f_res_f_res_132273;
                                loopres_f_res_f_res_132161 = loopres_f_res_f_res_f_res_132274;
                            }
                            loopres_f_res_132038 = loopres_f_res_f_res_132160;
                            loopres_f_res_132039 = loopres_f_res_f_res_132161;
                        }
                        loopres_131924 = loopres_f_res_132038;
                        loopres_131925 = loopres_f_res_132039;
                    }
                    
                    bool loop_cond_132278 = slt64((int64_t) 0, loopres_131925);
                    bool loop_while_tmp_140334 = loop_cond_132278;
                    int64_t first_spi_tmp_140335 = loopres_131924;
                    int64_t step_tmp_140336 = loopres_131925;
                    
                    loop_while_131758 = loop_while_tmp_140334;
                    first_spi_131759 = first_spi_tmp_140335;
                    step_131760 = step_tmp_140336;
                }
                lifted_lambda_res_f_res_f_res_131755 = loop_while_131758;
                lifted_lambda_res_f_res_f_res_131756 = first_spi_131759;
                lifted_lambda_res_f_res_f_res_131757 = step_131760;
                
                bool cond_132279 = slt64(lifted_lambda_res_f_res_f_res_131756, (int64_t) 0);
                int64_t lifted_lambda_res_f_res_f_res_132280;
                
                if (cond_132279) {
                    lifted_lambda_res_f_res_f_res_132280 = lifted_lambda_res_f_res_f_res_131756;
                } else {
                    if (mem_139699_cached_sizze_140563 < b_119921) {
                        err = lexical_realloc(ctx, &mem_139699, &mem_139699_cached_sizze_140563, b_119921);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139700_cached_sizze_140564 < b_119921) {
                        err = lexical_realloc(ctx, &mem_139700, &mem_139700_cached_sizze_140564, b_119921);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    
                    bool lifted_lambda_res_f_res_f_res_f_res_132281;
                    int64_t lifted_lambda_res_f_res_f_res_f_res_132282;
                    int64_t lifted_lambda_res_f_res_f_res_f_res_132283;
                    bool loop_while_132284;
                    int64_t last_spi_132285;
                    int64_t step_132286;
                    
                    loop_while_132284 = loop_cond_131740;
                    last_spi_132285 = last_potential_spi_131736;
                    step_132286 = max_res_131739;
                    while (loop_while_132284) {
                        bool x_132287 = sle64((int64_t) 0, last_spi_132285);
                        bool y_132288 = slt64(last_spi_132285, dz2081U_119924);
                        bool bounds_check_132289 = x_132287 && y_132288;
                        bool index_certs_132290;
                        
                        if (!bounds_check_132289) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) last_spi_132285, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:382:32-50\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t cur_S_132291 = ((int64_t *) bounds_mem_139584.mem)[last_spi_132285];
                        bool x_132292 = sle64((int64_t) 0, cur_S_132291);
                        bool y_132293 = slt64(cur_S_132291, nS_119922);
                        bool bounds_check_132294 = x_132292 && y_132293;
                        bool index_certs_132295;
                        
                        if (!bounds_check_132294) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) cur_S_132291, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:382:29-51\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t min_arg1_132297 = ((int32_t *) depths_mem_139585.mem)[last_spi_132285];
                        int32_t min_res_132298 = smin32(zeze_lhs_131723, min_arg1_132297);
                        int32_t zm_lhs_132341 = mul32(radix_sizze_119926, min_res_132298);
                        int32_t byteSeq_eq_arg1_132342 = sub32(zm_lhs_132341, 1);
                        int32_t min_res_132343 = smin32(min_arg1_131743, byteSeq_eq_arg1_132342);
                        int32_t zm_rhs_132344 = sdiv32(min_res_132343, 8);
                        int32_t zm_lhs_132345 = sub32(i64_res_131290, zm_rhs_132344);
                        int32_t i32_arg0_132346 = sub32(zm_lhs_132345, 1);
                        int64_t i32_res_132347 = sext_i32_i64(i32_arg0_132346);
                        int64_t min_res_132348 = smin64(min_arg1_131305, i32_res_132347);
                        bool y_132365 = slt64(min_res_132348, b_119921);
                        bool x_132364 = sle64((int64_t) 0, min_res_132348);
                        bool bounds_check_132366 = x_132364 && y_132365;
                        bool index_certs_132367;
                        
                        if (!bounds_check_132366) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_132348, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_132320 = slt64(last_spi_132285, last_potential_spi_131736);
                        int64_t tmp_138741 = add64((int64_t) 1, last_spi_132285);
                        bool x_138742 = sle64((int64_t) 0, tmp_138741);
                        bool y_138743 = slt64(tmp_138741, dz2081U_119924);
                        bool bounds_check_138744 = x_138742 && y_138743;
                        bool loop_not_taken_140201 = !cond_132320;
                        bool protect_assert_disj_140202 = bounds_check_138744 || loop_not_taken_140201;
                        bool index_certs_138745;
                        
                        if (!protect_assert_disj_140202) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138741, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:386:73-93\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_132299 = slt64(spi_131719, last_spi_132285);
                        
                        for (int64_t i_139416 = 0; i_139416 < b_119921; i_139416++) {
                            int8_t eta_p_133837 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139416];
                            int8_t eta_p_133838 = ((int8_t *) pS_mem_139581.mem)[cur_S_132291 * b_119921 + i_139416];
                            bool cond_133840 = sle64(i_139416, i32_res_131745);
                            bool cond_t_res_133841 = sle64(min_res_132348, i_139416);
                            bool x_133842 = cond_133840 && cond_t_res_133841;
                            int8_t lifted_lambda_res_133843;
                            
                            if (x_133842) {
                                lifted_lambda_res_133843 = eta_p_133837;
                            } else {
                                lifted_lambda_res_133843 = (int8_t) 0;
                            }
                            
                            int8_t lifted_lambda_res_133848;
                            
                            if (x_133842) {
                                lifted_lambda_res_133848 = eta_p_133838;
                            } else {
                                lifted_lambda_res_133848 = (int8_t) 0;
                            }
                            ((int8_t *) mem_139699)[i_139416] = lifted_lambda_res_133848;
                            ((int8_t *) mem_139700)[i_139416] = lifted_lambda_res_133843;
                        }
                        
                        int8_t za_lhs_132378 = ((int8_t *) mem_139699)[i32_res_131745];
                        int8_t mod1_x_132379 = (int8_t) -1 & za_lhs_132378;
                        
                        ((int8_t *) mem_139699)[i32_res_131745] = mod1_x_132379;
                        
                        int8_t za_lhs_132381 = ((int8_t *) mem_139699)[min_res_132348];
                        int32_t lastBit_132349 = smod32(min_res_132343, 8);
                        int32_t zm_lhs_132350 = sub32(8, lastBit_132349);
                        int32_t i32_arg0_132351 = sub32(zm_lhs_132350, 1);
                        int8_t unsign_arg0_132352 = zext_i32_i8(i32_arg0_132351);
                        int8_t unsign_arg0_132353 = lshr8((int8_t) -1, unsign_arg0_132352);
                        int8_t tmp_132382 = unsign_arg0_132353 & za_lhs_132381;
                        
                        ((int8_t *) mem_139699)[min_res_132348] = tmp_132382;
                        
                        int8_t za_lhs_132361 = ((int8_t *) mem_139700)[i32_res_131745];
                        int8_t mod1_x_132362 = (int8_t) -1 & za_lhs_132361;
                        
                        ((int8_t *) mem_139700)[i32_res_131745] = mod1_x_132362;
                        
                        int8_t za_lhs_132368 = ((int8_t *) mem_139700)[min_res_132348];
                        int8_t tmp_132369 = unsign_arg0_132353 & za_lhs_132368;
                        
                        ((int8_t *) mem_139700)[min_res_132348] = tmp_132369;
                        
                        bool defunc_0_reduce_res_138963;
                        bool redout_139419 = 1;
                        
                        for (int64_t i_139420 = 0; i_139420 < b_119921; i_139420++) {
                            int8_t eta_p_133831 = ((int8_t *) mem_139700)[i_139420];
                            int8_t eta_p_133832 = ((int8_t *) mem_139699)[i_139420];
                            bool defunc_0_f_res_133833 = eta_p_133831 == eta_p_133832;
                            bool x_132392 = defunc_0_f_res_133833 && redout_139419;
                            bool redout_tmp_140381 = x_132392;
                            
                            redout_139419 = redout_tmp_140381;
                        }
                        defunc_0_reduce_res_138963 = redout_139419;
                        
                        int32_t next_depth_132333;
                        
                        if (cond_132320) {
                            bool index_certs_138738;
                            
                            if (!bounds_check_138744) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138741, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:387:97-117\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t min_arg1_138739 = ((int32_t *) depths_mem_139585.mem)[tmp_138741];
                            int32_t min_res_138740 = smin32(zeze_lhs_131723, min_arg1_138739);
                            
                            next_depth_132333 = min_res_138740;
                        } else {
                            next_depth_132333 = min_res_132298;
                        }
                        
                        int64_t lmad_ext_139713 = b_119921 * cur_S_132291;
                        int64_t tmp_138746;
                        
                        if (cond_132320) {
                            int64_t x_140203 = ((int64_t *) bounds_mem_139584.mem)[tmp_138741];
                            
                            tmp_138746 = x_140203;
                        } else {
                            tmp_138746 = (int64_t) 0;
                        }
                        
                        int64_t lmad_ext_139714 = b_119921 * tmp_138746;
                        int64_t ext_139715;
                        
                        if (cond_132320) {
                            ext_139715 = lmad_ext_139714;
                        } else {
                            ext_139715 = lmad_ext_139713;
                        }
                        if (cond_132320) {
                            bool x_138747 = sle64((int64_t) 0, tmp_138746);
                            bool y_138748 = slt64(tmp_138746, nS_119922);
                            bool bounds_check_138749 = x_138747 && y_138748;
                            bool index_certs_138750;
                            
                            if (!bounds_check_138749) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138746, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:386:70-94\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                        }
                        
                        bool cond_132393;
                        
                        if (defunc_0_reduce_res_138963) {
                            bool cond_138755 = last_spi_132285 == last_potential_spi_131736;
                            bool cond_t_res_138756;
                            
                            if (cond_138755) {
                                cond_t_res_138756 = 1;
                            } else {
                                int32_t zm_lhs_138757 = mul32(radix_sizze_119926, next_depth_132333);
                                int32_t byteSeq_neq_arg1_138758 = sub32(zm_lhs_138757, 1);
                                int32_t min_res_138759 = smin32(min_arg1_131743, byteSeq_neq_arg1_138758);
                                int32_t zm_rhs_138760 = sdiv32(min_res_138759, 8);
                                int32_t zm_lhs_138761 = sub32(i64_res_131290, zm_rhs_138760);
                                int32_t i32_arg0_138762 = sub32(zm_lhs_138761, 1);
                                int64_t i32_res_138763 = sext_i32_i64(i32_arg0_138762);
                                int64_t min_res_138764 = smin64(min_arg1_131305, i32_res_138763);
                                bool index_certs_138785;
                                
                                if (!bounds_check_131751) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_131745, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_138789 = sle64((int64_t) 0, min_res_138764);
                                bool y_138790 = slt64(min_res_138764, b_119921);
                                bool bounds_check_138791 = x_138789 && y_138790;
                                bool index_certs_138792;
                                
                                if (!bounds_check_138791) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_138764, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int32_t lastBit_138765 = smod32(min_res_138759, 8);
                                int32_t zm_lhs_138766 = sub32(8, lastBit_138765);
                                int32_t i32_arg0_138767 = sub32(zm_lhs_138766, 1);
                                int8_t unsign_arg0_138768 = zext_i32_i8(i32_arg0_138767);
                                int8_t unsign_arg0_138769 = lshr8((int8_t) -1, unsign_arg0_138768);
                                
                                if (mem_139716_cached_sizze_140565 < b_119921) {
                                    err = lexical_realloc(ctx, &mem_139716, &mem_139716_cached_sizze_140565, b_119921);
                                    if (err != FUTHARK_SUCCESS)
                                        goto cleanup;
                                }
                                if (mem_139717_cached_sizze_140566 < b_119921) {
                                    err = lexical_realloc(ctx, &mem_139717, &mem_139717_cached_sizze_140566, b_119921);
                                    if (err != FUTHARK_SUCCESS)
                                        goto cleanup;
                                }
                                for (int64_t i_139425 = 0; i_139425 < b_119921; i_139425++) {
                                    int8_t eta_p_138773 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139425];
                                    int8_t eta_p_138774 = ((int8_t *) pS_mem_139581.mem)[ext_139715 + i_139425];
                                    bool cond_138775 = sle64(i_139425, i32_res_131745);
                                    bool cond_t_res_138776 = sle64(min_res_138764, i_139425);
                                    bool x_138777 = cond_138775 && cond_t_res_138776;
                                    int8_t lifted_lambda_res_138778;
                                    
                                    if (x_138777) {
                                        lifted_lambda_res_138778 = eta_p_138773;
                                    } else {
                                        lifted_lambda_res_138778 = (int8_t) 0;
                                    }
                                    
                                    int8_t lifted_lambda_res_138782;
                                    
                                    if (x_138777) {
                                        lifted_lambda_res_138782 = eta_p_138774;
                                    } else {
                                        lifted_lambda_res_138782 = (int8_t) 0;
                                    }
                                    ((int8_t *) mem_139716)[i_139425] = lifted_lambda_res_138782;
                                    ((int8_t *) mem_139717)[i_139425] = lifted_lambda_res_138778;
                                }
                                
                                int8_t za_lhs_138786 = ((int8_t *) mem_139717)[i32_res_131745];
                                int8_t mod1_x_138787 = (int8_t) -1 & za_lhs_138786;
                                
                                ((int8_t *) mem_139717)[i32_res_131745] = mod1_x_138787;
                                
                                int8_t za_lhs_138793 = ((int8_t *) mem_139717)[min_res_138764];
                                int8_t tmp_138794 = unsign_arg0_138769 & za_lhs_138793;
                                
                                ((int8_t *) mem_139717)[min_res_138764] = tmp_138794;
                                
                                int8_t za_lhs_138796 = ((int8_t *) mem_139716)[i32_res_131745];
                                int8_t mod1_x_138797 = (int8_t) -1 & za_lhs_138796;
                                
                                ((int8_t *) mem_139716)[i32_res_131745] = mod1_x_138797;
                                
                                int8_t za_lhs_138799 = ((int8_t *) mem_139716)[min_res_138764];
                                int8_t tmp_138800 = unsign_arg0_138769 & za_lhs_138799;
                                
                                ((int8_t *) mem_139716)[min_res_138764] = tmp_138800;
                                
                                bool defunc_0_reduce_res_138802;
                                bool redout_139428 = 0;
                                
                                for (int64_t i_139429 = 0; i_139429 < b_119921; i_139429++) {
                                    int8_t eta_p_138803 = ((int8_t *) mem_139717)[i_139429];
                                    int8_t eta_p_138804 = ((int8_t *) mem_139716)[i_139429];
                                    bool defunc_0_f_res_138805 = eta_p_138803 == eta_p_138804;
                                    bool defunc_0_f_res_138806 = !defunc_0_f_res_138805;
                                    bool defunc_0_op_res_138809 = defunc_0_f_res_138806 || redout_139428;
                                    bool redout_tmp_140384 = defunc_0_op_res_138809;
                                    
                                    redout_139428 = redout_tmp_140384;
                                }
                                defunc_0_reduce_res_138802 = redout_139428;
                                cond_t_res_138756 = defunc_0_reduce_res_138802;
                            }
                            cond_132393 = cond_t_res_138756;
                        } else {
                            cond_132393 = 0;
                        }
                        
                        int32_t prev_depth_132312;
                        
                        if (cond_132299) {
                            int64_t min_arg1_138811 = sub64(last_spi_132285, (int64_t) 1);
                            bool x_138812 = sle64((int64_t) 0, min_arg1_138811);
                            bool y_138813 = slt64(min_arg1_138811, dz2081U_119924);
                            bool bounds_check_138814 = x_138812 && y_138813;
                            bool index_certs_138815;
                            
                            if (!bounds_check_138814) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_arg1_138811, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:385:82-102\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t min_arg1_138816 = ((int32_t *) depths_mem_139585.mem)[min_arg1_138811];
                            int32_t min_res_138817 = smin32(zeze_lhs_131723, min_arg1_138816);
                            
                            prev_depth_132312 = min_res_138817;
                        } else {
                            prev_depth_132312 = min_res_132298;
                        }
                        
                        bool loop_cond_t_res_132452 = slt32(0, min_res_132298);
                        int64_t loopres_132450;
                        int64_t loopres_132451;
                        
                        if (cond_132393) {
                            loopres_132450 = last_spi_132285;
                            loopres_132451 = (int64_t) 0;
                        } else {
                            bool loop_cond_t_res_132453 = slt64((int64_t) 0, b_119921);
                            
                            if (mem_139730_cached_sizze_140567 < b_119921) {
                                err = lexical_realloc(ctx, &mem_139730, &mem_139730_cached_sizze_140567, b_119921);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_139731_cached_sizze_140568 < b_119921) {
                                err = lexical_realloc(ctx, &mem_139731, &mem_139731_cached_sizze_140568, b_119921);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            
                            bool radix_gt_res_132454;
                            int32_t radix_gt_res_132455;
                            bool radix_gt_res_132456;
                            bool loop_while_132457;
                            int32_t p_132458;
                            bool p_132459;
                            
                            loop_while_132457 = loop_cond_t_res_132452;
                            p_132458 = 0;
                            p_132459 = 0;
                            while (loop_while_132457) {
                                int32_t zt_rhs_132460 = add32(1, p_132458);
                                int32_t zm_lhs_132461 = mul32(radix_sizze_119926, zt_rhs_132460);
                                int32_t byteSeq_lt_arg1_132462 = sub32(zm_lhs_132461, 1);
                                int32_t byteSeq_lt_arg0_132463 = mul32(radix_sizze_119926, p_132458);
                                int32_t min_res_132464 = smin32(min_arg1_131743, byteSeq_lt_arg1_132462);
                                int32_t zm_rhs_132465 = sdiv32(byteSeq_lt_arg0_132463, 8);
                                int32_t zm_lhs_132466 = sub32(i64_res_131290, zm_rhs_132465);
                                int32_t i32_arg0_132467 = sub32(zm_lhs_132466, 1);
                                int64_t i32_res_132468 = sext_i32_i64(i32_arg0_132467);
                                int32_t zm_rhs_132469 = sdiv32(min_res_132464, 8);
                                int32_t zm_lhs_132470 = sub32(i64_res_131290, zm_rhs_132469);
                                int32_t i32_arg0_132471 = sub32(zm_lhs_132470, 1);
                                int64_t i32_res_132472 = sext_i32_i64(i32_arg0_132471);
                                int64_t min_res_132473 = smin64(min_arg1_131305, i32_res_132472);
                                bool x_132489 = sle64((int64_t) 0, i32_res_132468);
                                bool y_132490 = slt64(i32_res_132468, b_119921);
                                bool bounds_check_132491 = x_132489 && y_132490;
                                bool index_certs_132492;
                                
                                if (!bounds_check_132491) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_132468, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_132496 = sle64((int64_t) 0, min_res_132473);
                                bool y_132497 = slt64(min_res_132473, b_119921);
                                bool bounds_check_132498 = x_132496 && y_132497;
                                bool index_certs_132499;
                                
                                if (!bounds_check_132498) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_132473, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int32_t firstBit_132474 = smod32(byteSeq_lt_arg0_132463, 8);
                                int32_t lastBit_132475 = smod32(min_res_132464, 8);
                                int8_t unsign_arg0_132476 = zext_i32_i8(firstBit_132474);
                                int8_t first_bitMask_132477 = shl8((int8_t) -1, unsign_arg0_132476);
                                int32_t zm_lhs_132478 = sub32(8, lastBit_132475);
                                int32_t i32_arg0_132479 = sub32(zm_lhs_132478, 1);
                                int8_t unsign_arg0_132480 = zext_i32_i8(i32_arg0_132479);
                                int8_t unsign_arg0_132481 = lshr8((int8_t) -1, unsign_arg0_132480);
                                
                                for (int64_t i_139434 = 0; i_139434 < b_119921; i_139434++) {
                                    int8_t eta_p_134167 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139434];
                                    int8_t eta_p_134168 = ((int8_t *) pS_mem_139581.mem)[cur_S_132291 * b_119921 + i_139434];
                                    bool cond_134170 = sle64(i_139434, i32_res_132468);
                                    bool cond_t_res_134171 = sle64(min_res_132473, i_139434);
                                    bool x_134172 = cond_134170 && cond_t_res_134171;
                                    int8_t lifted_lambda_res_134173;
                                    
                                    if (x_134172) {
                                        lifted_lambda_res_134173 = eta_p_134167;
                                    } else {
                                        lifted_lambda_res_134173 = (int8_t) 0;
                                    }
                                    
                                    int8_t lifted_lambda_res_134178;
                                    
                                    if (x_134172) {
                                        lifted_lambda_res_134178 = eta_p_134168;
                                    } else {
                                        lifted_lambda_res_134178 = (int8_t) 0;
                                    }
                                    ((int8_t *) mem_139730)[i_139434] = lifted_lambda_res_134178;
                                    ((int8_t *) mem_139731)[i_139434] = lifted_lambda_res_134173;
                                }
                                
                                int8_t za_lhs_132493 = ((int8_t *) mem_139731)[i32_res_132468];
                                int8_t mod1_x_132494 = first_bitMask_132477 & za_lhs_132493;
                                
                                ((int8_t *) mem_139731)[i32_res_132468] = mod1_x_132494;
                                
                                int8_t za_lhs_132500 = ((int8_t *) mem_139731)[min_res_132473];
                                int8_t tmp_132501 = unsign_arg0_132481 & za_lhs_132500;
                                
                                ((int8_t *) mem_139731)[min_res_132473] = tmp_132501;
                                
                                int8_t za_lhs_132510 = ((int8_t *) mem_139730)[i32_res_132468];
                                int8_t mod1_x_132511 = first_bitMask_132477 & za_lhs_132510;
                                
                                ((int8_t *) mem_139730)[i32_res_132468] = mod1_x_132511;
                                
                                int8_t za_lhs_132513 = ((int8_t *) mem_139730)[min_res_132473];
                                int8_t tmp_132514 = unsign_arg0_132481 & za_lhs_132513;
                                
                                ((int8_t *) mem_139730)[min_res_132473] = tmp_132514;
                                
                                bool byteSeq_lt_res_132516;
                                int64_t byteSeq_lt_res_132517;
                                bool byteSeq_lt_res_132518;
                                bool loop_while_132519;
                                int64_t p_132520;
                                bool p_132521;
                                
                                loop_while_132519 = loop_cond_t_res_132453;
                                p_132520 = (int64_t) 0;
                                p_132521 = 0;
                                while (loop_while_132519) {
                                    bool x_132522 = sle64((int64_t) 0, p_132520);
                                    bool y_132523 = slt64(p_132520, b_119921);
                                    bool bounds_check_132524 = x_132522 && y_132523;
                                    bool index_certs_132525;
                                    
                                    if (!bounds_check_132524) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132520, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:78:17-27\n   #1  ftHashJoin.fut:177:17-83\n   #2  ftHashJoin.fut:393:20-61\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int8_t zl_lhs_132526 = ((int8_t *) mem_139731)[p_132520];
                                    int8_t zl_rhs_132527 = ((int8_t *) mem_139730)[p_132520];
                                    bool dlt_132528 = ult8(zl_lhs_132526, zl_rhs_132527);
                                    bool dgt_132529 = ult8(zl_rhs_132527, zl_lhs_132526);
                                    bool tmp_132530 = dlt_132528 || dgt_132529;
                                    bool cond_132531 = !tmp_132530;
                                    int64_t tmp_132532;
                                    
                                    if (cond_132531) {
                                        int64_t tmp_t_res_138818 = add64((int64_t) 1, p_132520);
                                        
                                        tmp_132532 = tmp_t_res_138818;
                                    } else {
                                        tmp_132532 = b_119921;
                                    }
                                    
                                    bool cond_132534 = !dlt_132528;
                                    bool loop_cond_t_res_132535 = slt64(tmp_132532, b_119921);
                                    bool x_132536 = cond_132534 && loop_cond_t_res_132535;
                                    bool loop_while_tmp_140390 = x_132536;
                                    int64_t p_tmp_140391 = tmp_132532;
                                    bool p_tmp_140392 = dlt_132528;
                                    
                                    loop_while_132519 = loop_while_tmp_140390;
                                    p_132520 = p_tmp_140391;
                                    p_132521 = p_tmp_140392;
                                }
                                byteSeq_lt_res_132516 = loop_while_132519;
                                byteSeq_lt_res_132517 = p_132520;
                                byteSeq_lt_res_132518 = p_132521;
                                
                                bool byteSeq_gt_res_132537;
                                int64_t byteSeq_gt_res_132538;
                                bool byteSeq_gt_res_132539;
                                bool loop_while_132540;
                                int64_t p_132541;
                                bool p_132542;
                                
                                loop_while_132540 = loop_cond_t_res_132453;
                                p_132541 = (int64_t) 0;
                                p_132542 = 0;
                                while (loop_while_132540) {
                                    bool x_132543 = sle64((int64_t) 0, p_132541);
                                    bool y_132544 = slt64(p_132541, b_119921);
                                    bool bounds_check_132545 = x_132543 && y_132544;
                                    bool index_certs_132546;
                                    
                                    if (!bounds_check_132545) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132541, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:111:17-27\n   #1  ftHashJoin.fut:178:17-83\n   #2  ftHashJoin.fut:393:20-61\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int8_t zl_lhs_132547 = ((int8_t *) mem_139731)[p_132541];
                                    int8_t zl_rhs_132548 = ((int8_t *) mem_139730)[p_132541];
                                    bool dlt_132549 = ult8(zl_lhs_132547, zl_rhs_132548);
                                    bool dgt_132550 = ult8(zl_rhs_132548, zl_lhs_132547);
                                    bool tmp_132551 = dlt_132549 || dgt_132550;
                                    bool cond_132552 = !tmp_132551;
                                    int64_t tmp_132553;
                                    
                                    if (cond_132552) {
                                        int64_t tmp_t_res_138819 = add64((int64_t) 1, p_132541);
                                        
                                        tmp_132553 = tmp_t_res_138819;
                                    } else {
                                        tmp_132553 = b_119921;
                                    }
                                    
                                    bool cond_132555 = !dgt_132550;
                                    bool loop_cond_t_res_132556 = slt64(tmp_132553, b_119921);
                                    bool x_132557 = cond_132555 && loop_cond_t_res_132556;
                                    bool loop_while_tmp_140393 = x_132557;
                                    int64_t p_tmp_140394 = tmp_132553;
                                    bool p_tmp_140395 = dgt_132550;
                                    
                                    loop_while_132540 = loop_while_tmp_140393;
                                    p_132541 = p_tmp_140394;
                                    p_132542 = p_tmp_140395;
                                }
                                byteSeq_gt_res_132537 = loop_while_132540;
                                byteSeq_gt_res_132538 = p_132541;
                                byteSeq_gt_res_132539 = p_132542;
                                
                                bool tmp_132558 = byteSeq_lt_res_132518 || byteSeq_gt_res_132539;
                                bool cond_132559 = !tmp_132558;
                                int32_t tmp_132560;
                                
                                if (cond_132559) {
                                    tmp_132560 = zt_rhs_132460;
                                } else {
                                    tmp_132560 = min_res_132298;
                                }
                                
                                bool cond_132561 = !byteSeq_gt_res_132539;
                                bool loop_cond_t_res_132562 = slt32(tmp_132560, min_res_132298);
                                bool x_132563 = cond_132561 && loop_cond_t_res_132562;
                                bool loop_while_tmp_140385 = x_132563;
                                int32_t p_tmp_140386 = tmp_132560;
                                bool p_tmp_140387 = byteSeq_gt_res_132539;
                                
                                loop_while_132457 = loop_while_tmp_140385;
                                p_132458 = p_tmp_140386;
                                p_132459 = p_tmp_140387;
                            }
                            radix_gt_res_132454 = loop_while_132457;
                            radix_gt_res_132455 = p_132458;
                            radix_gt_res_132456 = p_132459;
                            
                            int64_t loopres_f_res_132564;
                            int64_t loopres_f_res_132565;
                            
                            if (radix_gt_res_132456) {
                                bool cond_138826 = last_spi_132285 == last_potential_spi_131736;
                                bool loop_cond_t_res_138829 = slt32(0, next_depth_132333);
                                int64_t loopres_f_res_t_res_138827;
                                int64_t loopres_f_res_t_res_138828;
                                
                                if (cond_138826) {
                                    loopres_f_res_t_res_138827 = (int64_t) -1;
                                    loopres_f_res_t_res_138828 = (int64_t) 0;
                                } else {
                                    if (mem_139761_cached_sizze_140571 < b_119921) {
                                        err = lexical_realloc(ctx, &mem_139761, &mem_139761_cached_sizze_140571, b_119921);
                                        if (err != FUTHARK_SUCCESS)
                                            goto cleanup;
                                    }
                                    if (mem_139762_cached_sizze_140572 < b_119921) {
                                        err = lexical_realloc(ctx, &mem_139762, &mem_139762_cached_sizze_140572, b_119921);
                                        if (err != FUTHARK_SUCCESS)
                                            goto cleanup;
                                    }
                                    
                                    bool radix_lt_res_138830;
                                    int32_t radix_lt_res_138831;
                                    bool radix_lt_res_138832;
                                    bool loop_while_138833;
                                    int32_t p_138834;
                                    bool p_138835;
                                    
                                    loop_while_138833 = loop_cond_t_res_138829;
                                    p_138834 = 0;
                                    p_138835 = 0;
                                    while (loop_while_138833) {
                                        int32_t zt_rhs_138836 = add32(1, p_138834);
                                        int32_t zm_lhs_138837 = mul32(radix_sizze_119926, zt_rhs_138836);
                                        int32_t byteSeq_lt_arg1_138838 = sub32(zm_lhs_138837, 1);
                                        int32_t byteSeq_lt_arg0_138839 = mul32(radix_sizze_119926, p_138834);
                                        int32_t min_res_138840 = smin32(min_arg1_131743, byteSeq_lt_arg1_138838);
                                        int32_t zm_rhs_138841 = sdiv32(byteSeq_lt_arg0_138839, 8);
                                        int32_t zm_lhs_138842 = sub32(i64_res_131290, zm_rhs_138841);
                                        int32_t i32_arg0_138843 = sub32(zm_lhs_138842, 1);
                                        int64_t i32_res_138844 = sext_i32_i64(i32_arg0_138843);
                                        int32_t zm_rhs_138845 = sdiv32(min_res_138840, 8);
                                        int32_t zm_lhs_138846 = sub32(i64_res_131290, zm_rhs_138845);
                                        int32_t i32_arg0_138847 = sub32(zm_lhs_138846, 1);
                                        int64_t i32_res_138848 = sext_i32_i64(i32_arg0_138847);
                                        int64_t min_res_138849 = smin64(min_arg1_131305, i32_res_138848);
                                        bool x_138873 = sle64((int64_t) 0, i32_res_138844);
                                        bool y_138874 = slt64(i32_res_138844, b_119921);
                                        bool bounds_check_138875 = x_138873 && y_138874;
                                        bool index_certs_138876;
                                        
                                        if (!bounds_check_138875) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_138844, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_138880 = sle64((int64_t) 0, min_res_138849);
                                        bool y_138881 = slt64(min_res_138849, b_119921);
                                        bool bounds_check_138882 = x_138880 && y_138881;
                                        bool index_certs_138883;
                                        
                                        if (!bounds_check_138882) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_138849, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int32_t firstBit_138850 = smod32(byteSeq_lt_arg0_138839, 8);
                                        int32_t lastBit_138851 = smod32(min_res_138840, 8);
                                        int8_t unsign_arg0_138852 = zext_i32_i8(firstBit_138850);
                                        int8_t first_bitMask_138853 = shl8((int8_t) -1, unsign_arg0_138852);
                                        int32_t zm_lhs_138854 = sub32(8, lastBit_138851);
                                        int32_t i32_arg0_138855 = sub32(zm_lhs_138854, 1);
                                        int8_t unsign_arg0_138856 = zext_i32_i8(i32_arg0_138855);
                                        int8_t unsign_arg0_138857 = lshr8((int8_t) -1, unsign_arg0_138856);
                                        
                                        for (int64_t i_139441 = 0; i_139441 < b_119921; i_139441++) {
                                            int8_t eta_p_138861 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139441];
                                            int8_t eta_p_138862 = ((int8_t *) pS_mem_139581.mem)[ext_139715 + i_139441];
                                            bool cond_138863 = sle64(i_139441, i32_res_138844);
                                            bool cond_t_res_138864 = sle64(min_res_138849, i_139441);
                                            bool x_138865 = cond_138863 && cond_t_res_138864;
                                            int8_t lifted_lambda_res_138866;
                                            
                                            if (x_138865) {
                                                lifted_lambda_res_138866 = eta_p_138861;
                                            } else {
                                                lifted_lambda_res_138866 = (int8_t) 0;
                                            }
                                            
                                            int8_t lifted_lambda_res_138870;
                                            
                                            if (x_138865) {
                                                lifted_lambda_res_138870 = eta_p_138862;
                                            } else {
                                                lifted_lambda_res_138870 = (int8_t) 0;
                                            }
                                            ((int8_t *) mem_139761)[i_139441] = lifted_lambda_res_138870;
                                            ((int8_t *) mem_139762)[i_139441] = lifted_lambda_res_138866;
                                        }
                                        
                                        int8_t za_lhs_138877 = ((int8_t *) mem_139762)[i32_res_138844];
                                        int8_t mod1_x_138878 = first_bitMask_138853 & za_lhs_138877;
                                        
                                        ((int8_t *) mem_139762)[i32_res_138844] = mod1_x_138878;
                                        
                                        int8_t za_lhs_138884 = ((int8_t *) mem_139762)[min_res_138849];
                                        int8_t tmp_138885 = unsign_arg0_138857 & za_lhs_138884;
                                        
                                        ((int8_t *) mem_139762)[min_res_138849] = tmp_138885;
                                        
                                        int8_t za_lhs_138887 = ((int8_t *) mem_139761)[i32_res_138844];
                                        int8_t mod1_x_138888 = first_bitMask_138853 & za_lhs_138887;
                                        
                                        ((int8_t *) mem_139761)[i32_res_138844] = mod1_x_138888;
                                        
                                        int8_t za_lhs_138890 = ((int8_t *) mem_139761)[min_res_138849];
                                        int8_t tmp_138891 = unsign_arg0_138857 & za_lhs_138890;
                                        
                                        ((int8_t *) mem_139761)[min_res_138849] = tmp_138891;
                                        
                                        bool byteSeq_lt_res_138893;
                                        int64_t byteSeq_lt_res_138894;
                                        bool byteSeq_lt_res_138895;
                                        bool loop_while_138896;
                                        int64_t p_138897;
                                        bool p_138898;
                                        
                                        loop_while_138896 = loop_cond_t_res_132453;
                                        p_138897 = (int64_t) 0;
                                        p_138898 = 0;
                                        while (loop_while_138896) {
                                            bool x_138899 = sle64((int64_t) 0, p_138897);
                                            bool y_138900 = slt64(p_138897, b_119921);
                                            bool bounds_check_138901 = x_138899 && y_138900;
                                            bool index_certs_138902;
                                            
                                            if (!bounds_check_138901) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_138897, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:78:17-27\n   #1  ftHashJoin.fut:148:17-83\n   #2  ftHashJoin.fut:396:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int8_t zl_lhs_138903 = ((int8_t *) mem_139762)[p_138897];
                                            int8_t zl_rhs_138904 = ((int8_t *) mem_139761)[p_138897];
                                            bool dlt_138905 = ult8(zl_lhs_138903, zl_rhs_138904);
                                            bool dgt_138906 = ult8(zl_rhs_138904, zl_lhs_138903);
                                            bool tmp_138907 = dlt_138905 || dgt_138906;
                                            bool cond_138908 = !tmp_138907;
                                            int64_t tmp_138909;
                                            
                                            if (cond_138908) {
                                                int64_t tmp_t_res_138910 = add64((int64_t) 1, p_138897);
                                                
                                                tmp_138909 = tmp_t_res_138910;
                                            } else {
                                                tmp_138909 = b_119921;
                                            }
                                            
                                            bool cond_138911 = !dlt_138905;
                                            bool loop_cond_t_res_138912 = slt64(tmp_138909, b_119921);
                                            bool x_138913 = cond_138911 && loop_cond_t_res_138912;
                                            bool loop_while_tmp_140401 = x_138913;
                                            int64_t p_tmp_140402 = tmp_138909;
                                            bool p_tmp_140403 = dlt_138905;
                                            
                                            loop_while_138896 = loop_while_tmp_140401;
                                            p_138897 = p_tmp_140402;
                                            p_138898 = p_tmp_140403;
                                        }
                                        byteSeq_lt_res_138893 = loop_while_138896;
                                        byteSeq_lt_res_138894 = p_138897;
                                        byteSeq_lt_res_138895 = p_138898;
                                        
                                        bool byteSeq_gt_res_138914;
                                        int64_t byteSeq_gt_res_138915;
                                        bool byteSeq_gt_res_138916;
                                        bool loop_while_138917;
                                        int64_t p_138918;
                                        bool p_138919;
                                        
                                        loop_while_138917 = loop_cond_t_res_132453;
                                        p_138918 = (int64_t) 0;
                                        p_138919 = 0;
                                        while (loop_while_138917) {
                                            bool x_138920 = sle64((int64_t) 0, p_138918);
                                            bool y_138921 = slt64(p_138918, b_119921);
                                            bool bounds_check_138922 = x_138920 && y_138921;
                                            bool index_certs_138923;
                                            
                                            if (!bounds_check_138922) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_138918, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:111:17-27\n   #1  ftHashJoin.fut:149:17-83\n   #2  ftHashJoin.fut:396:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int8_t zl_lhs_138924 = ((int8_t *) mem_139762)[p_138918];
                                            int8_t zl_rhs_138925 = ((int8_t *) mem_139761)[p_138918];
                                            bool dlt_138926 = ult8(zl_lhs_138924, zl_rhs_138925);
                                            bool dgt_138927 = ult8(zl_rhs_138925, zl_lhs_138924);
                                            bool tmp_138928 = dlt_138926 || dgt_138927;
                                            bool cond_138929 = !tmp_138928;
                                            int64_t tmp_138930;
                                            
                                            if (cond_138929) {
                                                int64_t tmp_t_res_138931 = add64((int64_t) 1, p_138918);
                                                
                                                tmp_138930 = tmp_t_res_138931;
                                            } else {
                                                tmp_138930 = b_119921;
                                            }
                                            
                                            bool cond_138932 = !dgt_138927;
                                            bool loop_cond_t_res_138933 = slt64(tmp_138930, b_119921);
                                            bool x_138934 = cond_138932 && loop_cond_t_res_138933;
                                            bool loop_while_tmp_140404 = x_138934;
                                            int64_t p_tmp_140405 = tmp_138930;
                                            bool p_tmp_140406 = dgt_138927;
                                            
                                            loop_while_138917 = loop_while_tmp_140404;
                                            p_138918 = p_tmp_140405;
                                            p_138919 = p_tmp_140406;
                                        }
                                        byteSeq_gt_res_138914 = loop_while_138917;
                                        byteSeq_gt_res_138915 = p_138918;
                                        byteSeq_gt_res_138916 = p_138919;
                                        
                                        bool tmp_138935 = byteSeq_lt_res_138895 || byteSeq_gt_res_138916;
                                        bool cond_138936 = !tmp_138935;
                                        int32_t tmp_138937;
                                        
                                        if (cond_138936) {
                                            tmp_138937 = zt_rhs_138836;
                                        } else {
                                            tmp_138937 = next_depth_132333;
                                        }
                                        
                                        bool cond_138938 = !byteSeq_lt_res_138895;
                                        bool loop_cond_t_res_138939 = slt32(tmp_138937, next_depth_132333);
                                        bool x_138940 = cond_138938 && loop_cond_t_res_138939;
                                        bool loop_while_tmp_140396 = x_138940;
                                        int32_t p_tmp_140397 = tmp_138937;
                                        bool p_tmp_140398 = byteSeq_lt_res_138895;
                                        
                                        loop_while_138833 = loop_while_tmp_140396;
                                        p_138834 = p_tmp_140397;
                                        p_138835 = p_tmp_140398;
                                    }
                                    radix_lt_res_138830 = loop_while_138833;
                                    radix_lt_res_138831 = p_138834;
                                    radix_lt_res_138832 = p_138835;
                                    
                                    int64_t loopres_f_res_t_res_f_res_138941;
                                    int64_t loopres_f_res_t_res_f_res_138942;
                                    
                                    if (radix_lt_res_138832) {
                                        loopres_f_res_t_res_f_res_138941 = (int64_t) -1;
                                        loopres_f_res_t_res_f_res_138942 = (int64_t) 0;
                                    } else {
                                        int64_t tmp_138943 = add64(last_spi_132285, step_132286);
                                        int64_t max_arg1_138944 = sdiv64(step_132286, (int64_t) 2);
                                        int64_t max_res_138945 = smax64((int64_t) 1, max_arg1_138944);
                                        
                                        loopres_f_res_t_res_f_res_138941 = tmp_138943;
                                        loopres_f_res_t_res_f_res_138942 = max_res_138945;
                                    }
                                    loopres_f_res_t_res_138827 = loopres_f_res_t_res_f_res_138941;
                                    loopres_f_res_t_res_138828 = loopres_f_res_t_res_f_res_138942;
                                }
                                loopres_f_res_132564 = loopres_f_res_t_res_138827;
                                loopres_f_res_132565 = loopres_f_res_t_res_138828;
                            } else {
                                bool cond_132685 = last_spi_132285 == spi_131719;
                                int64_t tmp_138946 = sub64(last_spi_132285, (int64_t) 1);
                                bool x_138947 = sle64((int64_t) 0, tmp_138946);
                                bool y_138948 = slt64(tmp_138946, dz2081U_119924);
                                bool bounds_check_138949 = x_138947 && y_138948;
                                bool loop_not_taken_140193 = !cond_132299;
                                bool protect_assert_disj_140194 = bounds_check_138949 || loop_not_taken_140193;
                                bool protect_assert_disj_140238 = cond_132685 || protect_assert_disj_140194;
                                bool index_certs_138950;
                                
                                if (!protect_assert_disj_140238) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138946, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:384:58-78\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool loop_cond_t_res_132688 = slt32(0, prev_depth_132312);
                                bool x_140235 = !cond_132685;
                                bool protect_cond_conj_140239 = cond_132299 && x_140235;
                                int64_t tmp_138951;
                                
                                if (protect_cond_conj_140239) {
                                    int64_t x_140195 = ((int64_t *) bounds_mem_139584.mem)[tmp_138946];
                                    
                                    tmp_138951 = x_140195;
                                } else {
                                    tmp_138951 = (int64_t) 0;
                                }
                                
                                int64_t lmad_ext_139745 = b_119921 * tmp_138951;
                                int64_t ext_139746;
                                
                                if (cond_132299) {
                                    ext_139746 = lmad_ext_139745;
                                } else {
                                    ext_139746 = lmad_ext_139713;
                                }
                                
                                int64_t loopres_f_res_f_res_132686;
                                int64_t loopres_f_res_f_res_132687;
                                
                                if (cond_132685) {
                                    loopres_f_res_f_res_132686 = (int64_t) -1;
                                    loopres_f_res_f_res_132687 = (int64_t) 0;
                                } else {
                                    if (cond_132299) {
                                        bool x_138952 = sle64((int64_t) 0, tmp_138951);
                                        bool y_138953 = slt64(tmp_138951, nS_119922);
                                        bool bounds_check_138954 = x_138952 && y_138953;
                                        bool index_certs_138955;
                                        
                                        if (!bounds_check_138954) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_138951, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:384:55-79\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:338:8-404:6\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                    }
                                    if (mem_139747_cached_sizze_140569 < b_119921) {
                                        err = lexical_realloc(ctx, &mem_139747, &mem_139747_cached_sizze_140569, b_119921);
                                        if (err != FUTHARK_SUCCESS)
                                            goto cleanup;
                                    }
                                    if (mem_139748_cached_sizze_140570 < b_119921) {
                                        err = lexical_realloc(ctx, &mem_139748, &mem_139748_cached_sizze_140570, b_119921);
                                        if (err != FUTHARK_SUCCESS)
                                            goto cleanup;
                                    }
                                    
                                    bool radix_gt_res_132689;
                                    int32_t radix_gt_res_132690;
                                    bool radix_gt_res_132691;
                                    bool loop_while_132692;
                                    int32_t p_132693;
                                    bool p_132694;
                                    
                                    loop_while_132692 = loop_cond_t_res_132688;
                                    p_132693 = 0;
                                    p_132694 = 0;
                                    while (loop_while_132692) {
                                        int32_t zt_rhs_132695 = add32(1, p_132693);
                                        int32_t zm_lhs_132696 = mul32(radix_sizze_119926, zt_rhs_132695);
                                        int32_t byteSeq_lt_arg1_132697 = sub32(zm_lhs_132696, 1);
                                        int32_t byteSeq_lt_arg0_132698 = mul32(radix_sizze_119926, p_132693);
                                        int32_t min_res_132699 = smin32(min_arg1_131743, byteSeq_lt_arg1_132697);
                                        int32_t zm_rhs_132700 = sdiv32(byteSeq_lt_arg0_132698, 8);
                                        int32_t zm_lhs_132701 = sub32(i64_res_131290, zm_rhs_132700);
                                        int32_t i32_arg0_132702 = sub32(zm_lhs_132701, 1);
                                        int64_t i32_res_132703 = sext_i32_i64(i32_arg0_132702);
                                        int32_t zm_rhs_132704 = sdiv32(min_res_132699, 8);
                                        int32_t zm_lhs_132705 = sub32(i64_res_131290, zm_rhs_132704);
                                        int32_t i32_arg0_132706 = sub32(zm_lhs_132705, 1);
                                        int64_t i32_res_132707 = sext_i32_i64(i32_arg0_132706);
                                        int64_t min_res_132708 = smin64(min_arg1_131305, i32_res_132707);
                                        bool x_132724 = sle64((int64_t) 0, i32_res_132703);
                                        bool y_132725 = slt64(i32_res_132703, b_119921);
                                        bool bounds_check_132726 = x_132724 && y_132725;
                                        bool index_certs_132727;
                                        
                                        if (!bounds_check_132726) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_132703, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_132731 = sle64((int64_t) 0, min_res_132708);
                                        bool y_132732 = slt64(min_res_132708, b_119921);
                                        bool bounds_check_132733 = x_132731 && y_132732;
                                        bool index_certs_132734;
                                        
                                        if (!bounds_check_132733) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_132708, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int32_t firstBit_132709 = smod32(byteSeq_lt_arg0_132698, 8);
                                        int32_t lastBit_132710 = smod32(min_res_132699, 8);
                                        int8_t unsign_arg0_132711 = zext_i32_i8(firstBit_132709);
                                        int8_t first_bitMask_132712 = shl8((int8_t) -1, unsign_arg0_132711);
                                        int32_t zm_lhs_132713 = sub32(8, lastBit_132710);
                                        int32_t i32_arg0_132714 = sub32(zm_lhs_132713, 1);
                                        int8_t unsign_arg0_132715 = zext_i32_i8(i32_arg0_132714);
                                        int8_t unsign_arg0_132716 = lshr8((int8_t) -1, unsign_arg0_132715);
                                        
                                        for (int64_t i_139448 = 0; i_139448 < b_119921; i_139448++) {
                                            int8_t eta_p_134094 = ((int8_t *) pR_mem_139580.mem)[radix_to_idx_arg1_131684 * b_119921 + i_139448];
                                            int8_t eta_p_134095 = ((int8_t *) pS_mem_139581.mem)[ext_139746 + i_139448];
                                            bool cond_134097 = sle64(i_139448, i32_res_132703);
                                            bool cond_t_res_134098 = sle64(min_res_132708, i_139448);
                                            bool x_134099 = cond_134097 && cond_t_res_134098;
                                            int8_t lifted_lambda_res_134100;
                                            
                                            if (x_134099) {
                                                lifted_lambda_res_134100 = eta_p_134094;
                                            } else {
                                                lifted_lambda_res_134100 = (int8_t) 0;
                                            }
                                            
                                            int8_t lifted_lambda_res_134105;
                                            
                                            if (x_134099) {
                                                lifted_lambda_res_134105 = eta_p_134095;
                                            } else {
                                                lifted_lambda_res_134105 = (int8_t) 0;
                                            }
                                            ((int8_t *) mem_139747)[i_139448] = lifted_lambda_res_134105;
                                            ((int8_t *) mem_139748)[i_139448] = lifted_lambda_res_134100;
                                        }
                                        
                                        int8_t za_lhs_132728 = ((int8_t *) mem_139748)[i32_res_132703];
                                        int8_t mod1_x_132729 = first_bitMask_132712 & za_lhs_132728;
                                        
                                        ((int8_t *) mem_139748)[i32_res_132703] = mod1_x_132729;
                                        
                                        int8_t za_lhs_132735 = ((int8_t *) mem_139748)[min_res_132708];
                                        int8_t tmp_132736 = unsign_arg0_132716 & za_lhs_132735;
                                        
                                        ((int8_t *) mem_139748)[min_res_132708] = tmp_132736;
                                        
                                        int8_t za_lhs_132745 = ((int8_t *) mem_139747)[i32_res_132703];
                                        int8_t mod1_x_132746 = first_bitMask_132712 & za_lhs_132745;
                                        
                                        ((int8_t *) mem_139747)[i32_res_132703] = mod1_x_132746;
                                        
                                        int8_t za_lhs_132748 = ((int8_t *) mem_139747)[min_res_132708];
                                        int8_t tmp_132749 = unsign_arg0_132716 & za_lhs_132748;
                                        
                                        ((int8_t *) mem_139747)[min_res_132708] = tmp_132749;
                                        
                                        bool byteSeq_lt_res_132751;
                                        int64_t byteSeq_lt_res_132752;
                                        bool byteSeq_lt_res_132753;
                                        bool loop_while_132754;
                                        int64_t p_132755;
                                        bool p_132756;
                                        
                                        loop_while_132754 = loop_cond_t_res_132453;
                                        p_132755 = (int64_t) 0;
                                        p_132756 = 0;
                                        while (loop_while_132754) {
                                            bool x_132757 = sle64((int64_t) 0, p_132755);
                                            bool y_132758 = slt64(p_132755, b_119921);
                                            bool bounds_check_132759 = x_132757 && y_132758;
                                            bool index_certs_132760;
                                            
                                            if (!bounds_check_132759) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132755, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:78:17-27\n   #1  ftHashJoin.fut:177:17-83\n   #2  ftHashJoin.fut:400:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int8_t zl_lhs_132761 = ((int8_t *) mem_139748)[p_132755];
                                            int8_t zl_rhs_132762 = ((int8_t *) mem_139747)[p_132755];
                                            bool dlt_132763 = ult8(zl_lhs_132761, zl_rhs_132762);
                                            bool dgt_132764 = ult8(zl_rhs_132762, zl_lhs_132761);
                                            bool tmp_132765 = dlt_132763 || dgt_132764;
                                            bool cond_132766 = !tmp_132765;
                                            int64_t tmp_132767;
                                            
                                            if (cond_132766) {
                                                int64_t tmp_t_res_138957 = add64((int64_t) 1, p_132755);
                                                
                                                tmp_132767 = tmp_t_res_138957;
                                            } else {
                                                tmp_132767 = b_119921;
                                            }
                                            
                                            bool cond_132769 = !dlt_132763;
                                            bool loop_cond_t_res_132770 = slt64(tmp_132767, b_119921);
                                            bool x_132771 = cond_132769 && loop_cond_t_res_132770;
                                            bool loop_while_tmp_140412 = x_132771;
                                            int64_t p_tmp_140413 = tmp_132767;
                                            bool p_tmp_140414 = dlt_132763;
                                            
                                            loop_while_132754 = loop_while_tmp_140412;
                                            p_132755 = p_tmp_140413;
                                            p_132756 = p_tmp_140414;
                                        }
                                        byteSeq_lt_res_132751 = loop_while_132754;
                                        byteSeq_lt_res_132752 = p_132755;
                                        byteSeq_lt_res_132753 = p_132756;
                                        
                                        bool byteSeq_gt_res_132772;
                                        int64_t byteSeq_gt_res_132773;
                                        bool byteSeq_gt_res_132774;
                                        bool loop_while_132775;
                                        int64_t p_132776;
                                        bool p_132777;
                                        
                                        loop_while_132775 = loop_cond_t_res_132453;
                                        p_132776 = (int64_t) 0;
                                        p_132777 = 0;
                                        while (loop_while_132775) {
                                            bool x_132778 = sle64((int64_t) 0, p_132776);
                                            bool y_132779 = slt64(p_132776, b_119921);
                                            bool bounds_check_132780 = x_132778 && y_132779;
                                            bool index_certs_132781;
                                            
                                            if (!bounds_check_132780) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_132776, "] out of bounds for array of shape [", (long long) b_119921, "].", "-> #0  ftHashJoin.fut:111:17-27\n   #1  ftHashJoin.fut:178:17-83\n   #2  ftHashJoin.fut:400:23-66\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftHashJoin.fut:338:8-404:6\n   #5  ftRelational.fut:308:4-318:18\n   #6  ftRelational.fut:302:1-320:70\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int8_t zl_lhs_132782 = ((int8_t *) mem_139748)[p_132776];
                                            int8_t zl_rhs_132783 = ((int8_t *) mem_139747)[p_132776];
                                            bool dlt_132784 = ult8(zl_lhs_132782, zl_rhs_132783);
                                            bool dgt_132785 = ult8(zl_rhs_132783, zl_lhs_132782);
                                            bool tmp_132786 = dlt_132784 || dgt_132785;
                                            bool cond_132787 = !tmp_132786;
                                            int64_t tmp_132788;
                                            
                                            if (cond_132787) {
                                                int64_t tmp_t_res_138958 = add64((int64_t) 1, p_132776);
                                                
                                                tmp_132788 = tmp_t_res_138958;
                                            } else {
                                                tmp_132788 = b_119921;
                                            }
                                            
                                            bool cond_132790 = !dgt_132785;
                                            bool loop_cond_t_res_132791 = slt64(tmp_132788, b_119921);
                                            bool x_132792 = cond_132790 && loop_cond_t_res_132791;
                                            bool loop_while_tmp_140415 = x_132792;
                                            int64_t p_tmp_140416 = tmp_132788;
                                            bool p_tmp_140417 = dgt_132785;
                                            
                                            loop_while_132775 = loop_while_tmp_140415;
                                            p_132776 = p_tmp_140416;
                                            p_132777 = p_tmp_140417;
                                        }
                                        byteSeq_gt_res_132772 = loop_while_132775;
                                        byteSeq_gt_res_132773 = p_132776;
                                        byteSeq_gt_res_132774 = p_132777;
                                        
                                        bool tmp_132793 = byteSeq_lt_res_132753 || byteSeq_gt_res_132774;
                                        bool cond_132794 = !tmp_132793;
                                        int32_t tmp_132795;
                                        
                                        if (cond_132794) {
                                            tmp_132795 = zt_rhs_132695;
                                        } else {
                                            tmp_132795 = prev_depth_132312;
                                        }
                                        
                                        bool cond_132796 = !byteSeq_gt_res_132774;
                                        bool loop_cond_t_res_132797 = slt32(tmp_132795, prev_depth_132312);
                                        bool x_132798 = cond_132796 && loop_cond_t_res_132797;
                                        bool loop_while_tmp_140407 = x_132798;
                                        int32_t p_tmp_140408 = tmp_132795;
                                        bool p_tmp_140409 = byteSeq_gt_res_132774;
                                        
                                        loop_while_132692 = loop_while_tmp_140407;
                                        p_132693 = p_tmp_140408;
                                        p_132694 = p_tmp_140409;
                                    }
                                    radix_gt_res_132689 = loop_while_132692;
                                    radix_gt_res_132690 = p_132693;
                                    radix_gt_res_132691 = p_132694;
                                    
                                    int64_t loopres_f_res_f_res_f_res_132799;
                                    int64_t loopres_f_res_f_res_f_res_132800;
                                    
                                    if (radix_gt_res_132691) {
                                        loopres_f_res_f_res_f_res_132799 = (int64_t) -1;
                                        loopres_f_res_f_res_f_res_132800 = (int64_t) 0;
                                    } else {
                                        int64_t tmp_132801 = sub64(last_spi_132285, step_132286);
                                        int64_t max_arg1_132802 = sdiv64(step_132286, (int64_t) 2);
                                        int64_t max_res_132803 = smax64((int64_t) 1, max_arg1_132802);
                                        
                                        loopres_f_res_f_res_f_res_132799 = tmp_132801;
                                        loopres_f_res_f_res_f_res_132800 = max_res_132803;
                                    }
                                    loopres_f_res_f_res_132686 = loopres_f_res_f_res_f_res_132799;
                                    loopres_f_res_f_res_132687 = loopres_f_res_f_res_f_res_132800;
                                }
                                loopres_f_res_132564 = loopres_f_res_f_res_132686;
                                loopres_f_res_132565 = loopres_f_res_f_res_132687;
                            }
                            loopres_132450 = loopres_f_res_132564;
                            loopres_132451 = loopres_f_res_132565;
                        }
                        
                        bool loop_cond_132804 = slt64((int64_t) 0, loopres_132451);
                        bool loop_while_tmp_140376 = loop_cond_132804;
                        int64_t last_spi_tmp_140377 = loopres_132450;
                        int64_t step_tmp_140378 = loopres_132451;
                        
                        loop_while_132284 = loop_while_tmp_140376;
                        last_spi_132285 = last_spi_tmp_140377;
                        step_132286 = step_tmp_140378;
                    }
                    lifted_lambda_res_f_res_f_res_f_res_132281 = loop_while_132284;
                    lifted_lambda_res_f_res_f_res_f_res_132282 = last_spi_132285;
                    lifted_lambda_res_f_res_f_res_f_res_132283 = step_132286;
                    lifted_lambda_res_f_res_f_res_132280 = lifted_lambda_res_f_res_f_res_f_res_132282;
                }
                lifted_lambda_res_f_res_131732 = lifted_lambda_res_f_res_f_res_131756;
                lifted_lambda_res_f_res_131733 = lifted_lambda_res_f_res_f_res_132280;
            }
            lifted_lambda_res_131721 = lifted_lambda_res_f_res_131732;
            lifted_lambda_res_131722 = lifted_lambda_res_f_res_131733;
        }
        
        bool cond_132807 = sle64((int64_t) 0, lifted_lambda_res_131721);
        bool lifted_lambda_res_t_res_132808 = sle64((int64_t) 0, lifted_lambda_res_131722);
        bool x_132809 = cond_132807 && lifted_lambda_res_t_res_132808;
        int64_t defunc_0_f_res_132810 = btoi_bool_i64(x_132809);
        int64_t defunc_0_op_res_125992 = add64(defunc_0_f_res_132810, scanacc_139455);
        
        ((int64_t *) mem_139597)[i_139460] = defunc_0_op_res_125992;
        ((int64_t *) mem_139599)[i_139460] = defunc_0_f_res_132810;
        ((int64_t *) mem_139601)[i_139460] = lifted_lambda_res_131721;
        ((int64_t *) mem_139603)[i_139460] = lifted_lambda_res_131722;
        
        int64_t scanacc_tmp_140327 = defunc_0_op_res_125992;
        
        scanacc_139455 = scanacc_tmp_140327;
    }
    discard_139465 = scanacc_139455;
    
    bool cond_125993 = dz2081U_119923 == (int64_t) 0;
    bool x_125994 = !cond_125993;
    int64_t tmp_125995 = sub64(dz2081U_119923, (int64_t) 1);
    bool x_125996 = sle64((int64_t) 0, tmp_125995);
    bool y_125997 = slt64(tmp_125995, dz2081U_119923);
    bool bounds_check_125998 = x_125996 && y_125997;
    bool protect_assert_disj_125999 = cond_125993 || bounds_check_125998;
    bool index_certs_126000;
    
    if (!protect_assert_disj_125999) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_125995, "] out of bounds for array of shape [", (long long) dz2081U_119923, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:405:8-51\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_126001;
    
    if (x_125994) {
        int64_t x_138966 = ((int64_t *) mem_139597)[tmp_125995];
        
        m_f_res_126001 = x_138966;
    } else {
        m_f_res_126001 = (int64_t) 0;
    }
    
    int64_t m_126003;
    
    if (cond_125993) {
        m_126003 = (int64_t) 0;
    } else {
        m_126003 = m_f_res_126001;
    }
    
    int64_t m_126013 = sub64(m_126003, (int64_t) 1);
    bool i_p_m_t_s_leq_w_126015 = slt64(m_126013, dz2081U_119923);
    bool zzero_leq_i_p_m_t_s_126014 = sle64((int64_t) 0, m_126013);
    bool y_126017 = zzero_leq_i_p_m_t_s_126014 && i_p_m_t_s_leq_w_126015;
    bool i_lte_j_126016 = sle64((int64_t) 0, m_126003);
    bool forwards_ok_126018 = i_lte_j_126016 && y_126017;
    bool eq_x_zz_126010 = (int64_t) 0 == m_f_res_126001;
    bool p_and_eq_x_y_126011 = x_125994 && eq_x_zz_126010;
    bool empty_slice_126012 = cond_125993 || p_and_eq_x_y_126011;
    bool ok_or_empty_126019 = empty_slice_126012 || forwards_ok_126018;
    bool index_certs_126020;
    
    if (!ok_or_empty_126019) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_126003, "] out of bounds for array of shape [", (long long) dz2081U_119923, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:405:8-51\n   #3  ftRelational.fut:308:4-318:18\n   #4  ftRelational.fut:302:1-320:70\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139787 = (int64_t) 8 * m_126003;
    
    if (mem_139788_cached_sizze_140573 < bytes_139787) {
        err = lexical_realloc(ctx, &mem_139788, &mem_139788_cached_sizze_140573, bytes_139787);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139788, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139603, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_126003});
    if (mem_139790_cached_sizze_140574 < bytes_139787) {
        err = lexical_realloc(ctx, &mem_139790, &mem_139790_cached_sizze_140574, bytes_139787);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139790, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_126003});
    if (mem_139792_cached_sizze_140575 < bytes_139787) {
        err = lexical_realloc(ctx, &mem_139792, &mem_139792_cached_sizze_140575, bytes_139787);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140418 = 0; i_140418 < m_126003; i_140418++) {
        int64_t x_140419 = (int64_t) 0 + i_140418 * (int64_t) 1;
        
        ((int64_t *) mem_139792)[i_140418] = x_140419;
    }
    for (int64_t write_iter_139466 = 0; write_iter_139466 < dz2081U_119923; write_iter_139466++) {
        int64_t write_iv_139470 = ((int64_t *) mem_139599)[write_iter_139466];
        int64_t write_iv_139471 = ((int64_t *) mem_139597)[write_iter_139466];
        int64_t write_iv_139473 = ((int64_t *) mem_139601)[write_iter_139466];
        int64_t write_iv_139474 = ((int64_t *) mem_139603)[write_iter_139466];
        bool cond_131665 = write_iv_139470 == (int64_t) 1;
        int64_t lifted_lambda_res_131666;
        
        if (cond_131665) {
            int64_t lifted_lambda_res_t_res_138967 = sub64(write_iv_139471, (int64_t) 1);
            
            lifted_lambda_res_131666 = lifted_lambda_res_t_res_138967;
        } else {
            lifted_lambda_res_131666 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131666) && slt64(lifted_lambda_res_131666, m_126003)) {
            ((int64_t *) mem_139792)[lifted_lambda_res_131666] = write_iter_139466;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131666) && slt64(lifted_lambda_res_131666, m_126003)) {
            ((int64_t *) mem_139790)[lifted_lambda_res_131666] = write_iv_139473;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131666) && slt64(lifted_lambda_res_131666, m_126003)) {
            ((int64_t *) mem_139788)[lifted_lambda_res_131666] = write_iv_139474;
        }
    }
    if (memblock_alloc(ctx, &mem_139811, (int64_t) 0, "mem_139811")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139812, (int64_t) 0, "mem_139812")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139813, (int64_t) 0, "mem_139813")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139814, (int64_t) 0, "mem_139814")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139815, (int64_t) 0, "mem_139815")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t zl_rhs_126041 = sub64(dz2081U_119924, (int64_t) 1);
    int64_t join_hashPartitions_res_126042;
    int64_t join_hashPartitions_res_126043;
    int64_t join_hashPartitions_res_126044;
    int64_t loop_dz2081Uz2080U_126049;
    int64_t loop_dz2081Uz2081U_126050;
    int64_t loop_dz2081Uz2082U_126051;
    
    if (memblock_set(ctx, &mem_param_139818, &mem_139812, "mem_139812") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139821, &mem_139813, "mem_139813") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139825, &mem_139811, "mem_139811") != 0)
        return 1;
    loop_dz2081Uz2080U_126049 = (int64_t) 0;
    loop_dz2081Uz2081U_126050 = (int64_t) 0;
    loop_dz2081Uz2082U_126051 = (int64_t) 0;
    for (int64_t i_126048 = 0; i_126048 < m_126003; i_126048++) {
        int64_t p_match_126055 = ((int64_t *) mem_139792)[i_126048];
        int64_t p_match_126056 = ((int64_t *) mem_139790)[i_126048];
        int64_t p_match_126057 = ((int64_t *) mem_139788)[i_126048];
        bool x_126058 = sle64((int64_t) 0, p_match_126055);
        bool y_126059 = slt64(p_match_126055, dz2081U_119923);
        bool bounds_check_126060 = x_126058 && y_126059;
        bool index_certs_126061;
        
        if (!bounds_check_126060) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_match_126055, "] out of bounds for array of shape [", (long long) dz2081U_119923, "].", "-> #0  ftHashJoin.fut:478:18-42\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t r_lb_126062 = ((int64_t *) bounds_mem_139582.mem)[p_match_126055];
        bool cond_126063 = slt64(p_match_126055, tmp_125995);
        int64_t tmp_126064 = add64((int64_t) 1, p_match_126055);
        bool x_126065 = sle64((int64_t) 0, tmp_126064);
        bool y_126066 = slt64(tmp_126064, dz2081U_119923);
        bool bounds_check_126067 = x_126065 && y_126066;
        bool loop_not_taken_126068 = !cond_126063;
        bool protect_assert_disj_126069 = bounds_check_126067 || loop_not_taken_126068;
        bool index_certs_126070;
        
        if (!protect_assert_disj_126069) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_126064, "] out of bounds for array of shape [", (long long) dz2081U_119923, "].", "-> #0  ftHashJoin.fut:479:49-77\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t r_ub_t_res_126071;
        
        if (cond_126063) {
            int64_t x_138968 = ((int64_t *) bounds_mem_139582.mem)[tmp_126064];
            
            r_ub_t_res_126071 = x_138968;
        } else {
            r_ub_t_res_126071 = (int64_t) 0;
        }
        
        int64_t r_ub_126073;
        
        if (cond_126063) {
            r_ub_126073 = r_ub_t_res_126071;
        } else {
            r_ub_126073 = nR_119920;
        }
        
        int64_t j_m_i_126074 = sub64(r_ub_126073, r_lb_126062);
        bool empty_slice_126075 = j_m_i_126074 == (int64_t) 0;
        int64_t m_126076 = sub64(j_m_i_126074, (int64_t) 1);
        int64_t i_p_m_t_s_126077 = add64(r_lb_126062, m_126076);
        bool zzero_leq_i_p_m_t_s_126078 = sle64((int64_t) 0, i_p_m_t_s_126077);
        bool i_p_m_t_s_leq_w_126079 = slt64(i_p_m_t_s_126077, nR_119920);
        bool zzero_lte_i_126080 = sle64((int64_t) 0, r_lb_126062);
        bool i_lte_j_126081 = sle64(r_lb_126062, r_ub_126073);
        bool y_126082 = i_p_m_t_s_leq_w_126079 && zzero_lte_i_126080;
        bool y_126083 = zzero_leq_i_p_m_t_s_126078 && y_126082;
        bool forwards_ok_126084 = i_lte_j_126081 && y_126083;
        bool ok_or_empty_126085 = empty_slice_126075 || forwards_ok_126084;
        bool index_certs_126086;
        
        if (!ok_or_empty_126085) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) r_lb_126062, ":", (long long) r_ub_126073, "] out of bounds for array of shape [", (long long) nR_119920, "].", "-> #0  ftHashJoin.fut:480:20-33\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool bounds_invalid_upwards_126088 = slt64(p_match_126057, p_match_126056);
        int64_t distance_upwards_exclusive_126089 = sub64(p_match_126057, p_match_126056);
        int64_t distance_126090 = add64((int64_t) 1, distance_upwards_exclusive_126089);
        bool valid_126091 = !bounds_invalid_upwards_126088;
        bool range_valid_c_126092;
        
        if (!valid_126091) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) p_match_126056, "...", (long long) p_match_126057, " is invalid.", "-> #0  ftHashJoin.fut:483:27-52\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool cond_131365 = slt64((int64_t) 6, j_m_i_126074);
        int64_t bytes_140039 = (int64_t) 8 * j_m_i_126074;
        int64_t loopres_126093;
        int64_t loopres_126094;
        int64_t loopres_126095;
        int64_t loop_dz2083Uz2084U_126100;
        int64_t loop_dz2083Uz2085U_126101;
        int64_t loop_dz2083Uz2086U_126102;
        
        if (memblock_set(ctx, &mem_param_139828, &mem_139815, "mem_139815") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139831, &mem_139815, "mem_139815") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139835, &mem_139814, "mem_139814") != 0)
            return 1;
        loop_dz2083Uz2084U_126100 = (int64_t) 0;
        loop_dz2083Uz2085U_126101 = (int64_t) 0;
        loop_dz2083Uz2086U_126102 = (int64_t) 0;
        for (int64_t i_126099 = 0; i_126099 < distance_126090; i_126099++) {
            int64_t index_primexp_126106 = add64(p_match_126056, i_126099);
            bool x_126107 = sle64((int64_t) 0, index_primexp_126106);
            bool y_126108 = slt64(index_primexp_126106, dz2081U_119924);
            bool bounds_check_126109 = x_126107 && y_126108;
            bool index_certs_126110;
            
            if (!bounds_check_126109) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_126106, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:484:22-46\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t s_lb_126111 = ((int64_t *) bounds_mem_139584.mem)[index_primexp_126106];
            bool cond_126112 = slt64(index_primexp_126106, zl_rhs_126041);
            int64_t tmp_126113 = add64((int64_t) 1, index_primexp_126106);
            bool x_126114 = sle64((int64_t) 0, tmp_126113);
            bool y_126115 = slt64(tmp_126113, dz2081U_119924);
            bool bounds_check_126116 = x_126114 && y_126115;
            bool loop_not_taken_126117 = !cond_126112;
            bool protect_assert_disj_126118 = bounds_check_126116 || loop_not_taken_126117;
            bool index_certs_126119;
            
            if (!protect_assert_disj_126118) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_126113, "] out of bounds for array of shape [", (long long) dz2081U_119924, "].", "-> #0  ftHashJoin.fut:485:53-79\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t s_ub_t_res_126120;
            
            if (cond_126112) {
                int64_t x_138969 = ((int64_t *) bounds_mem_139584.mem)[tmp_126113];
                
                s_ub_t_res_126120 = x_138969;
            } else {
                s_ub_t_res_126120 = (int64_t) 0;
            }
            
            int64_t s_ub_126122;
            
            if (cond_126112) {
                s_ub_126122 = s_ub_t_res_126120;
            } else {
                s_ub_126122 = nS_119922;
            }
            
            int64_t j_m_i_126123 = sub64(s_ub_126122, s_lb_126111);
            bool empty_slice_126124 = j_m_i_126123 == (int64_t) 0;
            int64_t m_126125 = sub64(j_m_i_126123, (int64_t) 1);
            int64_t i_p_m_t_s_126126 = add64(s_lb_126111, m_126125);
            bool zzero_leq_i_p_m_t_s_126127 = sle64((int64_t) 0, i_p_m_t_s_126126);
            bool i_p_m_t_s_leq_w_126128 = slt64(i_p_m_t_s_126126, nS_119922);
            bool zzero_lte_i_126129 = sle64((int64_t) 0, s_lb_126111);
            bool i_lte_j_126130 = sle64(s_lb_126111, s_ub_126122);
            bool y_126131 = i_p_m_t_s_leq_w_126128 && zzero_lte_i_126129;
            bool y_126132 = zzero_leq_i_p_m_t_s_126127 && y_126131;
            bool forwards_ok_126133 = i_lte_j_126130 && y_126132;
            bool ok_or_empty_126134 = empty_slice_126124 || forwards_ok_126133;
            bool index_certs_126135;
            
            if (!ok_or_empty_126134) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) s_lb_126111, ":", (long long) s_ub_126122, "] out of bounds for array of shape [", (long long) nS_119922, "].", "-> #0  ftHashJoin.fut:486:24-37\n   #1  ftRelational.fut:306:4-320:70\n   #2  ftRelational.fut:302:1-320:70\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool cond_131505 = slt64((int64_t) 6, j_m_i_126123);
            bool cond_126137 = sle64(j_m_i_126123, j_m_i_126074);
            int64_t bytes_139894 = (int64_t) 8 * j_m_i_126123;
            int64_t find_joinPairs_res_126138;
            int64_t find_joinPairs_res_126139;
            int64_t find_joinPairs_res_126140;
            
            if (cond_126137) {
                int64_t do_find_joinPairs_res_139079;
                int64_t do_find_joinPairs_res_139080;
                int64_t do_find_joinPairs_res_139081;
                
                if (cond_131365) {
                    if (memblock_alloc(ctx, &mem_140040, bytes_140039, "mem_140040")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_140441 = 0; i_140441 < j_m_i_126074; i_140441++) {
                        int64_t x_140442 = (int64_t) 0 + i_140441 * (int64_t) 1;
                        
                        ((int64_t *) mem_140040.mem)[i_140441] = x_140442;
                    }
                    if (mem_140052_cached_sizze_140579 < bytes_140039) {
                        err = lexical_realloc(ctx, &mem_140052, &mem_140052_cached_sizze_140579, bytes_140039);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_140053_cached_sizze_140580 < j_m_i_126074) {
                        err = lexical_realloc(ctx, &mem_140053, &mem_140053_cached_sizze_140580, j_m_i_126074);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_140067_cached_sizze_140581 < bytes_140039) {
                        err = lexical_realloc(ctx, &mem_140067, &mem_140067_cached_sizze_140581, bytes_140039);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_140081, bytes_140039, "mem_140081")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t do_find_joinPairs_res_t_res_139086;
                    int64_t do_find_joinPairs_res_t_res_139087;
                    int64_t do_find_joinPairs_res_t_res_139088;
                    int64_t loop_dz2085U_139093;
                    int64_t loop_dz2086U_139094;
                    int64_t loop_dz2087U_139095;
                    
                    if (memblock_set(ctx, &mem_param_140044, &mem_139814, "mem_139814") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_140047, &mem_139815, "mem_139815") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_140050, &mem_139815, "mem_139815") != 0)
                        return 1;
                    loop_dz2085U_139093 = (int64_t) 0;
                    loop_dz2086U_139094 = (int64_t) 0;
                    loop_dz2087U_139095 = (int64_t) 0;
                    for (int64_t i_139092 = 0; i_139092 < j_m_i_126123; i_139092++) {
                        int64_t slice_139099 = s_lb_126111 + i_139092;
                        int64_t discard_139489;
                        int64_t defunc_res_139102;
                        int64_t scanacc_139482;
                        int64_t redout_139484;
                        
                        scanacc_139482 = (int64_t) 0;
                        redout_139484 = (int64_t) 0;
                        for (int64_t i_139486 = 0; i_139486 < j_m_i_126074; i_139486++) {
                            int64_t slice_139548 = r_lb_126062 + i_139486;
                            bool defunc_0_reduce_res_139105;
                            bool redout_139478 = 1;
                            
                            for (int64_t i_139479 = 0; i_139479 < b_119921; i_139479++) {
                                int8_t eta_p_139106 = ((int8_t *) pR_mem_139580.mem)[slice_139548 * b_119921 + i_139479];
                                int8_t eta_p_139107 = ((int8_t *) pS_mem_139581.mem)[slice_139099 * b_119921 + i_139479];
                                bool defunc_0_f_res_139108 = eta_p_139106 == eta_p_139107;
                                bool x_139111 = defunc_0_f_res_139108 && redout_139478;
                                bool redout_tmp_140456 = x_139111;
                                
                                redout_139478 = redout_tmp_140456;
                            }
                            defunc_0_reduce_res_139105 = redout_139478;
                            
                            int64_t bool_res_139113 = btoi_bool_i64(defunc_0_reduce_res_139105);
                            int64_t defunc_0_op_res_139117 = add64(bool_res_139113, scanacc_139482);
                            int64_t zp_res_139120 = add64(bool_res_139113, redout_139484);
                            
                            ((int64_t *) mem_140052)[i_139486] = defunc_0_op_res_139117;
                            ((bool *) mem_140053)[i_139486] = defunc_0_reduce_res_139105;
                            
                            int64_t scanacc_tmp_140452 = defunc_0_op_res_139117;
                            int64_t redout_tmp_140454 = zp_res_139120;
                            
                            scanacc_139482 = scanacc_tmp_140452;
                            redout_139484 = redout_tmp_140454;
                        }
                        discard_139489 = scanacc_139482;
                        defunc_res_139102 = redout_139484;
                        
                        int64_t bytes_140076 = (int64_t) 8 * defunc_res_139102;
                        int64_t conc_tmp_139158 = loop_dz2085U_139093 + defunc_res_139102;
                        int64_t bytes_140084 = b_119921 * conc_tmp_139158;
                        int64_t conc_tmp_139160 = loop_dz2086U_139094 + defunc_res_139102;
                        int64_t bytes_140086 = (int64_t) 8 * conc_tmp_139160;
                        int64_t conc_tmp_139162 = loop_dz2087U_139095 + defunc_res_139102;
                        int64_t bytes_140088 = (int64_t) 8 * conc_tmp_139162;
                        
                        for (int64_t i_139492 = 0; i_139492 < j_m_i_126074; i_139492++) {
                            bool eta_p_139141 = ((bool *) mem_140053)[i_139492];
                            int64_t zv_lhs_139142 = add64((int64_t) -1, i_139492);
                            int64_t tmp_139143 = smod64(zv_lhs_139142, j_m_i_126074);
                            int64_t lifted_lambda_res_139144 = ((int64_t *) mem_140052)[tmp_139143];
                            bool cond_139145 = i_139492 == (int64_t) 0;
                            int64_t lifted_lambda_res_139146;
                            
                            if (cond_139145) {
                                lifted_lambda_res_139146 = (int64_t) 0;
                            } else {
                                lifted_lambda_res_139146 = lifted_lambda_res_139144;
                            }
                            
                            int64_t lifted_lambda_res_139147;
                            
                            if (eta_p_139141) {
                                lifted_lambda_res_139147 = lifted_lambda_res_139146;
                            } else {
                                lifted_lambda_res_139147 = (int64_t) -1;
                            }
                            ((int64_t *) mem_140067)[i_139492] = lifted_lambda_res_139147;
                        }
                        if (memblock_alloc(ctx, &mem_140085, bytes_140084, "mem_140085")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140458 = 0; nest_i_140458 < defunc_res_139102; nest_i_140458++) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_140085.mem, b_119921 * loop_dz2085U_139093 + nest_i_140458 * b_119921, (int64_t []) {(int64_t) 1}, (uint8_t *) pS_mem_139581.mem, slice_139099 * b_119921, (int64_t []) {(int64_t) 1}, (int64_t []) {b_119921});
                        }
                        if (memblock_alloc(ctx, &mem_140089, bytes_140088, "mem_140089")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140459 = 0; nest_i_140459 < defunc_res_139102; nest_i_140459++) {
                            ((int64_t *) mem_140089.mem)[loop_dz2087U_139095 + nest_i_140459] = i_139092;
                        }
                        if (memblock_alloc(ctx, &mem_140079, bytes_140076, "mem_140079")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140460 = 0; nest_i_140460 < defunc_res_139102; nest_i_140460++) {
                            ((int64_t *) mem_140079.mem)[nest_i_140460] = (int64_t) 0;
                        }
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140081.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_140067, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_126074});
                        if (futrts_partitioned_scatter_11958(ctx, &ext_mem_140083, mem_140079, mem_140081, mem_140040, defunc_res_139102, j_m_i_126074, scatter_psizze_119937) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_unref(ctx, &mem_140079, "mem_140079") != 0)
                            return 1;
                        
                        int64_t tmp_offs_140461 = (int64_t) 0;
                        
                        lmad_copy_1b(ctx, 2, (uint8_t *) mem_140085.mem, b_119921 * tmp_offs_140461, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_param_140044.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loop_dz2085U_139093, b_119921});
                        tmp_offs_140461 += loop_dz2085U_139093;
                        if (!(b_119921 * tmp_offs_140461 == b_119921 * loop_dz2085U_139093)) {
                            lmad_copy_1b(ctx, 2, (uint8_t *) mem_140085.mem, b_119921 * tmp_offs_140461, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_140085.mem, b_119921 * loop_dz2085U_139093, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {defunc_res_139102, b_119921});
                        }
                        tmp_offs_140461 += defunc_res_139102;
                        if (memblock_alloc(ctx, &mem_140087, bytes_140086, "mem_140087")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t tmp_offs_140462 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140087.mem, tmp_offs_140462, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_140047.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2086U_139094});
                        tmp_offs_140462 += loop_dz2086U_139094;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140087.mem, tmp_offs_140462, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_140083.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {defunc_res_139102});
                        tmp_offs_140462 += defunc_res_139102;
                        if (memblock_unref(ctx, &ext_mem_140083, "ext_mem_140083") != 0)
                            return 1;
                        
                        int64_t tmp_offs_140463 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140089.mem, tmp_offs_140463, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_140050.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2087U_139095});
                        tmp_offs_140463 += loop_dz2087U_139095;
                        if (!(tmp_offs_140463 == loop_dz2087U_139095)) {
                            lmad_copy_8b(ctx, 1, (uint64_t *) mem_140089.mem, tmp_offs_140463, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_140089.mem, loop_dz2087U_139095, (int64_t []) {(int64_t) 1}, (int64_t []) {defunc_res_139102});
                        }
                        tmp_offs_140463 += defunc_res_139102;
                        if (memblock_set(ctx, &mem_param_tmp_140443, &mem_140085, "mem_140085") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140444, &mem_140087, "mem_140087") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140445, &mem_140089, "mem_140089") != 0)
                            return 1;
                        
                        int64_t loop_dz2085U_tmp_140446 = conc_tmp_139158;
                        int64_t loop_dz2086U_tmp_140447 = conc_tmp_139160;
                        int64_t loop_dz2087U_tmp_140448 = conc_tmp_139162;
                        
                        if (memblock_set(ctx, &mem_param_140044, &mem_param_tmp_140443, "mem_param_tmp_140443") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_140047, &mem_param_tmp_140444, "mem_param_tmp_140444") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_140050, &mem_param_tmp_140445, "mem_param_tmp_140445") != 0)
                            return 1;
                        loop_dz2085U_139093 = loop_dz2085U_tmp_140446;
                        loop_dz2086U_139094 = loop_dz2086U_tmp_140447;
                        loop_dz2087U_139095 = loop_dz2087U_tmp_140448;
                    }
                    if (memblock_set(ctx, &ext_mem_140099, &mem_param_140044, "mem_param_140044") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140098, &mem_param_140047, "mem_param_140047") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140097, &mem_param_140050, "mem_param_140050") != 0)
                        return 1;
                    do_find_joinPairs_res_t_res_139086 = loop_dz2085U_139093;
                    do_find_joinPairs_res_t_res_139087 = loop_dz2086U_139094;
                    do_find_joinPairs_res_t_res_139088 = loop_dz2087U_139095;
                    if (memblock_unref(ctx, &mem_140040, "mem_140040") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_140081, "mem_140081") != 0)
                        return 1;
                    
                    int64_t bytes_140100 = (int64_t) 8 * do_find_joinPairs_res_t_res_139087;
                    int64_t bytes_140108 = (int64_t) 8 * do_find_joinPairs_res_t_res_139088;
                    
                    if (memblock_alloc(ctx, &mem_140101, bytes_140100, "mem_140101")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139496 = 0; i_139496 < do_find_joinPairs_res_t_res_139087; i_139496++) {
                        int64_t eta_p_139165 = ((int64_t *) ext_mem_140098.mem)[i_139496];
                        int64_t lifted_lambda_res_139166 = add64(r_lb_126062, eta_p_139165);
                        
                        ((int64_t *) mem_140101.mem)[i_139496] = lifted_lambda_res_139166;
                    }
                    if (memblock_unref(ctx, &ext_mem_140098, "ext_mem_140098") != 0)
                        return 1;
                    if (memblock_alloc(ctx, &mem_140109, bytes_140108, "mem_140109")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139500 = 0; i_139500 < do_find_joinPairs_res_t_res_139088; i_139500++) {
                        int64_t eta_p_139173 = ((int64_t *) ext_mem_140097.mem)[i_139500];
                        int64_t lifted_lambda_res_139174 = add64(s_lb_126111, eta_p_139173);
                        
                        ((int64_t *) mem_140109.mem)[i_139500] = lifted_lambda_res_139174;
                    }
                    if (memblock_unref(ctx, &ext_mem_140097, "ext_mem_140097") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140125, &mem_140101, "mem_140101") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140122, &mem_140109, "mem_140109") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140119, &ext_mem_140099, "ext_mem_140099") != 0)
                        return 1;
                    do_find_joinPairs_res_139079 = do_find_joinPairs_res_t_res_139087;
                    do_find_joinPairs_res_139080 = do_find_joinPairs_res_t_res_139088;
                    do_find_joinPairs_res_139081 = do_find_joinPairs_res_t_res_139086;
                } else {
                    int64_t do_find_joinPairs_res_f_res_139180;
                    int64_t do_find_joinPairs_res_f_res_139181;
                    int64_t do_find_joinPairs_res_f_res_139182;
                    int64_t loop_dz2081Uz2080Uz2081U_139187;
                    int64_t loop_dz2081Uz2080Uz2082U_139188;
                    int64_t loop_dz2081Uz2080Uz2083U_139189;
                    
                    if (memblock_set(ctx, &mem_param_139984, &mem_139814, "mem_139814") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_139987, &mem_139815, "mem_139815") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_139990, &mem_139815, "mem_139815") != 0)
                        return 1;
                    loop_dz2081Uz2080Uz2081U_139187 = (int64_t) 0;
                    loop_dz2081Uz2080Uz2082U_139188 = (int64_t) 0;
                    loop_dz2081Uz2080Uz2083U_139189 = (int64_t) 0;
                    for (int64_t i_139186 = 0; i_139186 < j_m_i_126074; i_139186++) {
                        int64_t slice_139193 = r_lb_126062 + i_139186;
                        int64_t matches_139195;
                        int64_t loop_dz2081Uz2081Uz2082U_139198;
                        
                        if (memblock_set(ctx, &mem_param_139993, &mem_139815, "mem_139815") != 0)
                            return 1;
                        loop_dz2081Uz2081Uz2082U_139198 = (int64_t) 0;
                        for (int64_t i_139197 = 0; i_139197 < j_m_i_126123; i_139197++) {
                            int64_t slice_139200 = s_lb_126111 + i_139197;
                            bool defunc_0_reduce_res_139202;
                            bool redout_139502 = 1;
                            
                            for (int64_t i_139503 = 0; i_139503 < b_119921; i_139503++) {
                                int8_t eta_p_139203 = ((int8_t *) pR_mem_139580.mem)[slice_139193 * b_119921 + i_139503];
                                int8_t eta_p_139204 = ((int8_t *) pS_mem_139581.mem)[slice_139200 * b_119921 + i_139503];
                                bool defunc_0_f_res_139205 = eta_p_139203 == eta_p_139204;
                                bool x_139208 = defunc_0_f_res_139205 && redout_139502;
                                bool redout_tmp_140478 = x_139208;
                                
                                redout_139502 = redout_tmp_140478;
                            }
                            defunc_0_reduce_res_139202 = redout_139502;
                            
                            int64_t conc_tmp_139216 = (int64_t) 1 + loop_dz2081Uz2081Uz2082U_139198;
                            int64_t loopres_139217;
                            
                            if (defunc_0_reduce_res_139202) {
                                loopres_139217 = conc_tmp_139216;
                            } else {
                                loopres_139217 = loop_dz2081Uz2081Uz2082U_139198;
                            }
                            
                            int64_t bytes_139995 = (int64_t) 8 * loopres_139217;
                            
                            if (defunc_0_reduce_res_139202) {
                                if (memblock_alloc(ctx, &mem_139996, bytes_139995, "mem_139996")) {
                                    err = 1;
                                    goto cleanup;
                                }
                                for (int64_t nest_i_140479 = 0; nest_i_140479 < (int64_t) 1; nest_i_140479++) {
                                    ((int64_t *) mem_139996.mem)[loop_dz2081Uz2081Uz2082U_139198 + nest_i_140479] = i_139197;
                                }
                                
                                int64_t tmp_offs_140480 = (int64_t) 0;
                                
                                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139996.mem, tmp_offs_140480, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139993.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2081Uz2082U_139198});
                                tmp_offs_140480 += loop_dz2081Uz2081Uz2082U_139198;
                                if (!(tmp_offs_140480 == loop_dz2081Uz2081Uz2082U_139198)) {
                                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139996.mem, tmp_offs_140480, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139996.mem, loop_dz2081Uz2081Uz2082U_139198, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 1});
                                }
                                tmp_offs_140480 += (int64_t) 1;
                                if (memblock_set(ctx, &ext_mem_139999, &mem_139996, "mem_139996") != 0)
                                    return 1;
                            } else if (memblock_set(ctx, &ext_mem_139999, &mem_param_139993, "mem_param_139993") != 0)
                                return 1;
                            if (memblock_set(ctx, &mem_param_tmp_140475, &ext_mem_139999, "ext_mem_139999") != 0)
                                return 1;
                            
                            int64_t loop_dz2081Uz2081Uz2082U_tmp_140476 = loopres_139217;
                            
                            if (memblock_set(ctx, &mem_param_139993, &mem_param_tmp_140475, "mem_param_tmp_140475") != 0)
                                return 1;
                            loop_dz2081Uz2081Uz2082U_139198 = loop_dz2081Uz2081Uz2082U_tmp_140476;
                        }
                        if (memblock_set(ctx, &ext_mem_140002, &mem_param_139993, "mem_param_139993") != 0)
                            return 1;
                        matches_139195 = loop_dz2081Uz2081Uz2082U_139198;
                        
                        int64_t conc_tmp_139224 = loop_dz2081Uz2080Uz2081U_139187 + matches_139195;
                        int64_t bytes_140007 = b_119921 * conc_tmp_139224;
                        int64_t conc_tmp_139226 = loop_dz2081Uz2080Uz2082U_139188 + matches_139195;
                        int64_t bytes_140009 = (int64_t) 8 * conc_tmp_139226;
                        int64_t conc_tmp_139228 = loop_dz2081Uz2080Uz2083U_139189 + matches_139195;
                        int64_t bytes_140011 = (int64_t) 8 * conc_tmp_139228;
                        
                        if (memblock_alloc(ctx, &mem_140008, bytes_140007, "mem_140008")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140481 = 0; nest_i_140481 < matches_139195; nest_i_140481++) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_140008.mem, b_119921 * loop_dz2081Uz2080Uz2081U_139187 + nest_i_140481 * b_119921, (int64_t []) {(int64_t) 1}, (uint8_t *) pR_mem_139580.mem, slice_139193 * b_119921, (int64_t []) {(int64_t) 1}, (int64_t []) {b_119921});
                        }
                        if (memblock_alloc(ctx, &mem_140010, bytes_140009, "mem_140010")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140482 = 0; nest_i_140482 < matches_139195; nest_i_140482++) {
                            ((int64_t *) mem_140010.mem)[loop_dz2081Uz2080Uz2082U_139188 + nest_i_140482] = i_139186;
                        }
                        
                        int64_t tmp_offs_140483 = (int64_t) 0;
                        
                        lmad_copy_1b(ctx, 2, (uint8_t *) mem_140008.mem, b_119921 * tmp_offs_140483, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_param_139984.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loop_dz2081Uz2080Uz2081U_139187, b_119921});
                        tmp_offs_140483 += loop_dz2081Uz2080Uz2081U_139187;
                        if (!(b_119921 * tmp_offs_140483 == b_119921 * loop_dz2081Uz2080Uz2081U_139187)) {
                            lmad_copy_1b(ctx, 2, (uint8_t *) mem_140008.mem, b_119921 * tmp_offs_140483, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_140008.mem, b_119921 * loop_dz2081Uz2080Uz2081U_139187, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {matches_139195, b_119921});
                        }
                        tmp_offs_140483 += matches_139195;
                        
                        int64_t tmp_offs_140484 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140010.mem, tmp_offs_140484, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139987.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2080Uz2082U_139188});
                        tmp_offs_140484 += loop_dz2081Uz2080Uz2082U_139188;
                        if (!(tmp_offs_140484 == loop_dz2081Uz2080Uz2082U_139188)) {
                            lmad_copy_8b(ctx, 1, (uint64_t *) mem_140010.mem, tmp_offs_140484, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_140010.mem, loop_dz2081Uz2080Uz2082U_139188, (int64_t []) {(int64_t) 1}, (int64_t []) {matches_139195});
                        }
                        tmp_offs_140484 += matches_139195;
                        if (memblock_alloc(ctx, &mem_140012, bytes_140011, "mem_140012")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t tmp_offs_140485 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140012.mem, tmp_offs_140485, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139990.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2080Uz2083U_139189});
                        tmp_offs_140485 += loop_dz2081Uz2080Uz2083U_139189;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140012.mem, tmp_offs_140485, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_140002.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {matches_139195});
                        tmp_offs_140485 += matches_139195;
                        if (memblock_unref(ctx, &ext_mem_140002, "ext_mem_140002") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140466, &mem_140008, "mem_140008") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140467, &mem_140010, "mem_140010") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140468, &mem_140012, "mem_140012") != 0)
                            return 1;
                        
                        int64_t loop_dz2081Uz2080Uz2081U_tmp_140469 = conc_tmp_139224;
                        int64_t loop_dz2081Uz2080Uz2082U_tmp_140470 = conc_tmp_139226;
                        int64_t loop_dz2081Uz2080Uz2083U_tmp_140471 = conc_tmp_139228;
                        
                        if (memblock_set(ctx, &mem_param_139984, &mem_param_tmp_140466, "mem_param_tmp_140466") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_139987, &mem_param_tmp_140467, "mem_param_tmp_140467") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_139990, &mem_param_tmp_140468, "mem_param_tmp_140468") != 0)
                            return 1;
                        loop_dz2081Uz2080Uz2081U_139187 = loop_dz2081Uz2080Uz2081U_tmp_140469;
                        loop_dz2081Uz2080Uz2082U_139188 = loop_dz2081Uz2080Uz2082U_tmp_140470;
                        loop_dz2081Uz2080Uz2083U_139189 = loop_dz2081Uz2080Uz2083U_tmp_140471;
                    }
                    if (memblock_set(ctx, &ext_mem_140022, &mem_param_139984, "mem_param_139984") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140021, &mem_param_139987, "mem_param_139987") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140020, &mem_param_139990, "mem_param_139990") != 0)
                        return 1;
                    do_find_joinPairs_res_f_res_139180 = loop_dz2081Uz2080Uz2081U_139187;
                    do_find_joinPairs_res_f_res_139181 = loop_dz2081Uz2080Uz2082U_139188;
                    do_find_joinPairs_res_f_res_139182 = loop_dz2081Uz2080Uz2083U_139189;
                    
                    int64_t bytes_140023 = (int64_t) 8 * do_find_joinPairs_res_f_res_139181;
                    int64_t bytes_140031 = (int64_t) 8 * do_find_joinPairs_res_f_res_139182;
                    
                    if (memblock_alloc(ctx, &mem_140024, bytes_140023, "mem_140024")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139506 = 0; i_139506 < do_find_joinPairs_res_f_res_139181; i_139506++) {
                        int64_t eta_p_139231 = ((int64_t *) ext_mem_140021.mem)[i_139506];
                        int64_t lifted_lambda_res_139232 = add64(r_lb_126062, eta_p_139231);
                        
                        ((int64_t *) mem_140024.mem)[i_139506] = lifted_lambda_res_139232;
                    }
                    if (memblock_unref(ctx, &ext_mem_140021, "ext_mem_140021") != 0)
                        return 1;
                    if (memblock_alloc(ctx, &mem_140032, bytes_140031, "mem_140032")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139510 = 0; i_139510 < do_find_joinPairs_res_f_res_139182; i_139510++) {
                        int64_t eta_p_139239 = ((int64_t *) ext_mem_140020.mem)[i_139510];
                        int64_t lifted_lambda_res_139240 = add64(s_lb_126111, eta_p_139239);
                        
                        ((int64_t *) mem_140032.mem)[i_139510] = lifted_lambda_res_139240;
                    }
                    if (memblock_unref(ctx, &ext_mem_140020, "ext_mem_140020") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140125, &mem_140024, "mem_140024") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140122, &mem_140032, "mem_140032") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_140119, &ext_mem_140022, "ext_mem_140022") != 0)
                        return 1;
                    do_find_joinPairs_res_139079 = do_find_joinPairs_res_f_res_139181;
                    do_find_joinPairs_res_139080 = do_find_joinPairs_res_f_res_139182;
                    do_find_joinPairs_res_139081 = do_find_joinPairs_res_f_res_139180;
                }
                if (memblock_set(ctx, &ext_mem_140135, &ext_mem_140125, "ext_mem_140125") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_140132, &ext_mem_140122, "ext_mem_140122") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_140129, &ext_mem_140119, "ext_mem_140119") != 0)
                    return 1;
                find_joinPairs_res_126138 = do_find_joinPairs_res_139079;
                find_joinPairs_res_126139 = do_find_joinPairs_res_139080;
                find_joinPairs_res_126140 = do_find_joinPairs_res_139081;
            } else {
                int64_t do_find_joinPairs_res_131506;
                int64_t do_find_joinPairs_res_131507;
                int64_t do_find_joinPairs_res_131508;
                
                if (cond_131505) {
                    if (memblock_alloc(ctx, &mem_139895, bytes_139894, "mem_139895")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_140488 = 0; i_140488 < j_m_i_126123; i_140488++) {
                        int64_t x_140489 = (int64_t) 0 + i_140488 * (int64_t) 1;
                        
                        ((int64_t *) mem_139895.mem)[i_140488] = x_140489;
                    }
                    if (mem_139907_cached_sizze_140576 < bytes_139894) {
                        err = lexical_realloc(ctx, &mem_139907, &mem_139907_cached_sizze_140576, bytes_139894);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139908_cached_sizze_140577 < j_m_i_126123) {
                        err = lexical_realloc(ctx, &mem_139908, &mem_139908_cached_sizze_140577, j_m_i_126123);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139922_cached_sizze_140578 < bytes_139894) {
                        err = lexical_realloc(ctx, &mem_139922, &mem_139922_cached_sizze_140578, bytes_139894);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_139936, bytes_139894, "mem_139936")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t do_find_joinPairs_res_t_res_139255;
                    int64_t do_find_joinPairs_res_t_res_139256;
                    int64_t do_find_joinPairs_res_t_res_139257;
                    int64_t loop_dz2085U_139262;
                    int64_t loop_dz2086U_139263;
                    int64_t loop_dz2087U_139264;
                    
                    if (memblock_set(ctx, &mem_param_139899, &mem_139814, "mem_139814") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_139902, &mem_139815, "mem_139815") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_139905, &mem_139815, "mem_139815") != 0)
                        return 1;
                    loop_dz2085U_139262 = (int64_t) 0;
                    loop_dz2086U_139263 = (int64_t) 0;
                    loop_dz2087U_139264 = (int64_t) 0;
                    for (int64_t i_139261 = 0; i_139261 < j_m_i_126074; i_139261++) {
                        int64_t slice_139268 = r_lb_126062 + i_139261;
                        int64_t discard_139523;
                        int64_t defunc_res_139271;
                        int64_t scanacc_139516;
                        int64_t redout_139518;
                        
                        scanacc_139516 = (int64_t) 0;
                        redout_139518 = (int64_t) 0;
                        for (int64_t i_139520 = 0; i_139520 < j_m_i_126123; i_139520++) {
                            int64_t slice_139551 = s_lb_126111 + i_139520;
                            bool defunc_0_reduce_res_139274;
                            bool redout_139512 = 1;
                            
                            for (int64_t i_139513 = 0; i_139513 < b_119921; i_139513++) {
                                int8_t eta_p_139275 = ((int8_t *) pS_mem_139581.mem)[slice_139551 * b_119921 + i_139513];
                                int8_t eta_p_139276 = ((int8_t *) pR_mem_139580.mem)[slice_139268 * b_119921 + i_139513];
                                bool defunc_0_f_res_139277 = eta_p_139275 == eta_p_139276;
                                bool x_139280 = defunc_0_f_res_139277 && redout_139512;
                                bool redout_tmp_140503 = x_139280;
                                
                                redout_139512 = redout_tmp_140503;
                            }
                            defunc_0_reduce_res_139274 = redout_139512;
                            
                            int64_t bool_res_139282 = btoi_bool_i64(defunc_0_reduce_res_139274);
                            int64_t defunc_0_op_res_139286 = add64(bool_res_139282, scanacc_139516);
                            int64_t zp_res_139289 = add64(bool_res_139282, redout_139518);
                            
                            ((int64_t *) mem_139907)[i_139520] = defunc_0_op_res_139286;
                            ((bool *) mem_139908)[i_139520] = defunc_0_reduce_res_139274;
                            
                            int64_t scanacc_tmp_140499 = defunc_0_op_res_139286;
                            int64_t redout_tmp_140501 = zp_res_139289;
                            
                            scanacc_139516 = scanacc_tmp_140499;
                            redout_139518 = redout_tmp_140501;
                        }
                        discard_139523 = scanacc_139516;
                        defunc_res_139271 = redout_139518;
                        
                        int64_t bytes_139931 = (int64_t) 8 * defunc_res_139271;
                        int64_t conc_tmp_139327 = loop_dz2085U_139262 + defunc_res_139271;
                        int64_t bytes_139939 = b_119921 * conc_tmp_139327;
                        int64_t conc_tmp_139329 = loop_dz2086U_139263 + defunc_res_139271;
                        int64_t bytes_139941 = (int64_t) 8 * conc_tmp_139329;
                        int64_t conc_tmp_139331 = loop_dz2087U_139264 + defunc_res_139271;
                        int64_t bytes_139943 = (int64_t) 8 * conc_tmp_139331;
                        
                        for (int64_t i_139526 = 0; i_139526 < j_m_i_126123; i_139526++) {
                            bool eta_p_139310 = ((bool *) mem_139908)[i_139526];
                            int64_t zv_lhs_139311 = add64((int64_t) -1, i_139526);
                            int64_t tmp_139312 = smod64(zv_lhs_139311, j_m_i_126123);
                            int64_t lifted_lambda_res_139313 = ((int64_t *) mem_139907)[tmp_139312];
                            bool cond_139314 = i_139526 == (int64_t) 0;
                            int64_t lifted_lambda_res_139315;
                            
                            if (cond_139314) {
                                lifted_lambda_res_139315 = (int64_t) 0;
                            } else {
                                lifted_lambda_res_139315 = lifted_lambda_res_139313;
                            }
                            
                            int64_t lifted_lambda_res_139316;
                            
                            if (eta_p_139310) {
                                lifted_lambda_res_139316 = lifted_lambda_res_139315;
                            } else {
                                lifted_lambda_res_139316 = (int64_t) -1;
                            }
                            ((int64_t *) mem_139922)[i_139526] = lifted_lambda_res_139316;
                        }
                        if (memblock_alloc(ctx, &mem_139940, bytes_139939, "mem_139940")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140505 = 0; nest_i_140505 < defunc_res_139271; nest_i_140505++) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_139940.mem, b_119921 * loop_dz2085U_139262 + nest_i_140505 * b_119921, (int64_t []) {(int64_t) 1}, (uint8_t *) pR_mem_139580.mem, slice_139268 * b_119921, (int64_t []) {(int64_t) 1}, (int64_t []) {b_119921});
                        }
                        if (memblock_alloc(ctx, &mem_139944, bytes_139943, "mem_139944")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140506 = 0; nest_i_140506 < defunc_res_139271; nest_i_140506++) {
                            ((int64_t *) mem_139944.mem)[loop_dz2087U_139264 + nest_i_140506] = i_139261;
                        }
                        if (memblock_alloc(ctx, &mem_139934, bytes_139931, "mem_139934")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140507 = 0; nest_i_140507 < defunc_res_139271; nest_i_140507++) {
                            ((int64_t *) mem_139934.mem)[nest_i_140507] = (int64_t) 0;
                        }
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139936.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139922, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_126123});
                        if (futrts_partitioned_scatter_11958(ctx, &ext_mem_139938, mem_139934, mem_139936, mem_139895, defunc_res_139271, j_m_i_126123, scatter_psizze_119937) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_unref(ctx, &mem_139934, "mem_139934") != 0)
                            return 1;
                        
                        int64_t tmp_offs_140508 = (int64_t) 0;
                        
                        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139940.mem, b_119921 * tmp_offs_140508, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_param_139899.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loop_dz2085U_139262, b_119921});
                        tmp_offs_140508 += loop_dz2085U_139262;
                        if (!(b_119921 * tmp_offs_140508 == b_119921 * loop_dz2085U_139262)) {
                            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139940.mem, b_119921 * tmp_offs_140508, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_139940.mem, b_119921 * loop_dz2085U_139262, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {defunc_res_139271, b_119921});
                        }
                        tmp_offs_140508 += defunc_res_139271;
                        if (memblock_alloc(ctx, &mem_139942, bytes_139941, "mem_139942")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t tmp_offs_140509 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139942.mem, tmp_offs_140509, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139902.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2086U_139263});
                        tmp_offs_140509 += loop_dz2086U_139263;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139942.mem, tmp_offs_140509, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139938.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {defunc_res_139271});
                        tmp_offs_140509 += defunc_res_139271;
                        if (memblock_unref(ctx, &ext_mem_139938, "ext_mem_139938") != 0)
                            return 1;
                        
                        int64_t tmp_offs_140510 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139944.mem, tmp_offs_140510, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139905.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2087U_139264});
                        tmp_offs_140510 += loop_dz2087U_139264;
                        if (!(tmp_offs_140510 == loop_dz2087U_139264)) {
                            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139944.mem, tmp_offs_140510, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139944.mem, loop_dz2087U_139264, (int64_t []) {(int64_t) 1}, (int64_t []) {defunc_res_139271});
                        }
                        tmp_offs_140510 += defunc_res_139271;
                        if (memblock_set(ctx, &mem_param_tmp_140490, &mem_139940, "mem_139940") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140491, &mem_139942, "mem_139942") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140492, &mem_139944, "mem_139944") != 0)
                            return 1;
                        
                        int64_t loop_dz2085U_tmp_140493 = conc_tmp_139327;
                        int64_t loop_dz2086U_tmp_140494 = conc_tmp_139329;
                        int64_t loop_dz2087U_tmp_140495 = conc_tmp_139331;
                        
                        if (memblock_set(ctx, &mem_param_139899, &mem_param_tmp_140490, "mem_param_tmp_140490") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_139902, &mem_param_tmp_140491, "mem_param_tmp_140491") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_139905, &mem_param_tmp_140492, "mem_param_tmp_140492") != 0)
                            return 1;
                        loop_dz2085U_139262 = loop_dz2085U_tmp_140493;
                        loop_dz2086U_139263 = loop_dz2086U_tmp_140494;
                        loop_dz2087U_139264 = loop_dz2087U_tmp_140495;
                    }
                    if (memblock_set(ctx, &ext_mem_139954, &mem_param_139899, "mem_param_139899") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139953, &mem_param_139902, "mem_param_139902") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139952, &mem_param_139905, "mem_param_139905") != 0)
                        return 1;
                    do_find_joinPairs_res_t_res_139255 = loop_dz2085U_139262;
                    do_find_joinPairs_res_t_res_139256 = loop_dz2086U_139263;
                    do_find_joinPairs_res_t_res_139257 = loop_dz2087U_139264;
                    if (memblock_unref(ctx, &mem_139895, "mem_139895") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_139936, "mem_139936") != 0)
                        return 1;
                    
                    int64_t bytes_139955 = (int64_t) 8 * do_find_joinPairs_res_t_res_139256;
                    int64_t bytes_139963 = (int64_t) 8 * do_find_joinPairs_res_t_res_139257;
                    
                    if (memblock_alloc(ctx, &mem_139956, bytes_139955, "mem_139956")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139530 = 0; i_139530 < do_find_joinPairs_res_t_res_139256; i_139530++) {
                        int64_t eta_p_139334 = ((int64_t *) ext_mem_139953.mem)[i_139530];
                        int64_t lifted_lambda_res_139335 = add64(s_lb_126111, eta_p_139334);
                        
                        ((int64_t *) mem_139956.mem)[i_139530] = lifted_lambda_res_139335;
                    }
                    if (memblock_unref(ctx, &ext_mem_139953, "ext_mem_139953") != 0)
                        return 1;
                    if (memblock_alloc(ctx, &mem_139964, bytes_139963, "mem_139964")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139534 = 0; i_139534 < do_find_joinPairs_res_t_res_139257; i_139534++) {
                        int64_t eta_p_139342 = ((int64_t *) ext_mem_139952.mem)[i_139534];
                        int64_t lifted_lambda_res_139343 = add64(r_lb_126062, eta_p_139342);
                        
                        ((int64_t *) mem_139964.mem)[i_139534] = lifted_lambda_res_139343;
                    }
                    if (memblock_unref(ctx, &ext_mem_139952, "ext_mem_139952") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139980, &mem_139956, "mem_139956") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139977, &mem_139964, "mem_139964") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139974, &ext_mem_139954, "ext_mem_139954") != 0)
                        return 1;
                    do_find_joinPairs_res_131506 = do_find_joinPairs_res_t_res_139256;
                    do_find_joinPairs_res_131507 = do_find_joinPairs_res_t_res_139257;
                    do_find_joinPairs_res_131508 = do_find_joinPairs_res_t_res_139255;
                } else {
                    int64_t do_find_joinPairs_res_f_res_131588;
                    int64_t do_find_joinPairs_res_f_res_131589;
                    int64_t do_find_joinPairs_res_f_res_131590;
                    int64_t loop_dz2081Uz2080Uz2081U_131595;
                    int64_t loop_dz2081Uz2080Uz2082U_131596;
                    int64_t loop_dz2081Uz2080Uz2083U_131597;
                    
                    if (memblock_set(ctx, &mem_param_139839, &mem_139814, "mem_139814") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_139842, &mem_139815, "mem_139815") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_139845, &mem_139815, "mem_139815") != 0)
                        return 1;
                    loop_dz2081Uz2080Uz2081U_131595 = (int64_t) 0;
                    loop_dz2081Uz2080Uz2082U_131596 = (int64_t) 0;
                    loop_dz2081Uz2080Uz2083U_131597 = (int64_t) 0;
                    for (int64_t i_131594 = 0; i_131594 < j_m_i_126123; i_131594++) {
                        int64_t slice_131642 = s_lb_126111 + i_131594;
                        int64_t matches_131602;
                        int64_t loop_dz2081Uz2081Uz2082U_131605;
                        
                        if (memblock_set(ctx, &mem_param_139848, &mem_139815, "mem_139815") != 0)
                            return 1;
                        loop_dz2081Uz2081Uz2082U_131605 = (int64_t) 0;
                        for (int64_t i_131604 = 0; i_131604 < j_m_i_126074; i_131604++) {
                            int64_t slice_131641 = r_lb_126062 + i_131604;
                            bool defunc_0_reduce_res_139351;
                            bool redout_139536 = 1;
                            
                            for (int64_t i_139537 = 0; i_139537 < b_119921; i_139537++) {
                                int8_t eta_p_137670 = ((int8_t *) pS_mem_139581.mem)[slice_131642 * b_119921 + i_139537];
                                int8_t eta_p_137671 = ((int8_t *) pR_mem_139580.mem)[slice_131641 * b_119921 + i_139537];
                                bool defunc_0_f_res_137672 = eta_p_137670 == eta_p_137671;
                                bool x_131616 = defunc_0_f_res_137672 && redout_139536;
                                bool redout_tmp_140525 = x_131616;
                                
                                redout_139536 = redout_tmp_140525;
                            }
                            defunc_0_reduce_res_139351 = redout_139536;
                            
                            int64_t conc_tmp_131617 = (int64_t) 1 + loop_dz2081Uz2081Uz2082U_131605;
                            int64_t loopres_131618;
                            
                            if (defunc_0_reduce_res_139351) {
                                loopres_131618 = conc_tmp_131617;
                            } else {
                                loopres_131618 = loop_dz2081Uz2081Uz2082U_131605;
                            }
                            
                            int64_t bytes_139850 = (int64_t) 8 * loopres_131618;
                            
                            if (defunc_0_reduce_res_139351) {
                                if (memblock_alloc(ctx, &mem_139851, bytes_139850, "mem_139851")) {
                                    err = 1;
                                    goto cleanup;
                                }
                                for (int64_t nest_i_140526 = 0; nest_i_140526 < (int64_t) 1; nest_i_140526++) {
                                    ((int64_t *) mem_139851.mem)[loop_dz2081Uz2081Uz2082U_131605 + nest_i_140526] = i_131604;
                                }
                                
                                int64_t tmp_offs_140527 = (int64_t) 0;
                                
                                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139851.mem, tmp_offs_140527, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139848.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2081Uz2082U_131605});
                                tmp_offs_140527 += loop_dz2081Uz2081Uz2082U_131605;
                                if (!(tmp_offs_140527 == loop_dz2081Uz2081Uz2082U_131605)) {
                                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139851.mem, tmp_offs_140527, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139851.mem, loop_dz2081Uz2081Uz2082U_131605, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 1});
                                }
                                tmp_offs_140527 += (int64_t) 1;
                                if (memblock_set(ctx, &ext_mem_139854, &mem_139851, "mem_139851") != 0)
                                    return 1;
                            } else if (memblock_set(ctx, &ext_mem_139854, &mem_param_139848, "mem_param_139848") != 0)
                                return 1;
                            if (memblock_set(ctx, &mem_param_tmp_140522, &ext_mem_139854, "ext_mem_139854") != 0)
                                return 1;
                            
                            int64_t loop_dz2081Uz2081Uz2082U_tmp_140523 = loopres_131618;
                            
                            if (memblock_set(ctx, &mem_param_139848, &mem_param_tmp_140522, "mem_param_tmp_140522") != 0)
                                return 1;
                            loop_dz2081Uz2081Uz2082U_131605 = loop_dz2081Uz2081Uz2082U_tmp_140523;
                        }
                        if (memblock_set(ctx, &ext_mem_139857, &mem_param_139848, "mem_param_139848") != 0)
                            return 1;
                        matches_131602 = loop_dz2081Uz2081Uz2082U_131605;
                        
                        int64_t conc_tmp_131625 = loop_dz2081Uz2080Uz2081U_131595 + matches_131602;
                        int64_t bytes_139862 = b_119921 * conc_tmp_131625;
                        int64_t conc_tmp_131627 = loop_dz2081Uz2080Uz2082U_131596 + matches_131602;
                        int64_t bytes_139864 = (int64_t) 8 * conc_tmp_131627;
                        int64_t conc_tmp_131629 = loop_dz2081Uz2080Uz2083U_131597 + matches_131602;
                        int64_t bytes_139866 = (int64_t) 8 * conc_tmp_131629;
                        
                        if (memblock_alloc(ctx, &mem_139863, bytes_139862, "mem_139863")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140528 = 0; nest_i_140528 < matches_131602; nest_i_140528++) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_139863.mem, b_119921 * loop_dz2081Uz2080Uz2081U_131595 + nest_i_140528 * b_119921, (int64_t []) {(int64_t) 1}, (uint8_t *) pS_mem_139581.mem, slice_131642 * b_119921, (int64_t []) {(int64_t) 1}, (int64_t []) {b_119921});
                        }
                        if (memblock_alloc(ctx, &mem_139865, bytes_139864, "mem_139865")) {
                            err = 1;
                            goto cleanup;
                        }
                        for (int64_t nest_i_140529 = 0; nest_i_140529 < matches_131602; nest_i_140529++) {
                            ((int64_t *) mem_139865.mem)[loop_dz2081Uz2080Uz2082U_131596 + nest_i_140529] = i_131594;
                        }
                        
                        int64_t tmp_offs_140530 = (int64_t) 0;
                        
                        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139863.mem, b_119921 * tmp_offs_140530, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_param_139839.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loop_dz2081Uz2080Uz2081U_131595, b_119921});
                        tmp_offs_140530 += loop_dz2081Uz2080Uz2081U_131595;
                        if (!(b_119921 * tmp_offs_140530 == b_119921 * loop_dz2081Uz2080Uz2081U_131595)) {
                            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139863.mem, b_119921 * tmp_offs_140530, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_139863.mem, b_119921 * loop_dz2081Uz2080Uz2081U_131595, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {matches_131602, b_119921});
                        }
                        tmp_offs_140530 += matches_131602;
                        
                        int64_t tmp_offs_140531 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139865.mem, tmp_offs_140531, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139842.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2080Uz2082U_131596});
                        tmp_offs_140531 += loop_dz2081Uz2080Uz2082U_131596;
                        if (!(tmp_offs_140531 == loop_dz2081Uz2080Uz2082U_131596)) {
                            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139865.mem, tmp_offs_140531, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139865.mem, loop_dz2081Uz2080Uz2082U_131596, (int64_t []) {(int64_t) 1}, (int64_t []) {matches_131602});
                        }
                        tmp_offs_140531 += matches_131602;
                        if (memblock_alloc(ctx, &mem_139867, bytes_139866, "mem_139867")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t tmp_offs_140532 = (int64_t) 0;
                        
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139867.mem, tmp_offs_140532, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139845.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2080Uz2083U_131597});
                        tmp_offs_140532 += loop_dz2081Uz2080Uz2083U_131597;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139867.mem, tmp_offs_140532, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139857.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {matches_131602});
                        tmp_offs_140532 += matches_131602;
                        if (memblock_unref(ctx, &ext_mem_139857, "ext_mem_139857") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140513, &mem_139863, "mem_139863") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140514, &mem_139865, "mem_139865") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_tmp_140515, &mem_139867, "mem_139867") != 0)
                            return 1;
                        
                        int64_t loop_dz2081Uz2080Uz2081U_tmp_140516 = conc_tmp_131625;
                        int64_t loop_dz2081Uz2080Uz2082U_tmp_140517 = conc_tmp_131627;
                        int64_t loop_dz2081Uz2080Uz2083U_tmp_140518 = conc_tmp_131629;
                        
                        if (memblock_set(ctx, &mem_param_139839, &mem_param_tmp_140513, "mem_param_tmp_140513") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_139842, &mem_param_tmp_140514, "mem_param_tmp_140514") != 0)
                            return 1;
                        if (memblock_set(ctx, &mem_param_139845, &mem_param_tmp_140515, "mem_param_tmp_140515") != 0)
                            return 1;
                        loop_dz2081Uz2080Uz2081U_131595 = loop_dz2081Uz2080Uz2081U_tmp_140516;
                        loop_dz2081Uz2080Uz2082U_131596 = loop_dz2081Uz2080Uz2082U_tmp_140517;
                        loop_dz2081Uz2080Uz2083U_131597 = loop_dz2081Uz2080Uz2083U_tmp_140518;
                    }
                    if (memblock_set(ctx, &ext_mem_139877, &mem_param_139839, "mem_param_139839") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139876, &mem_param_139842, "mem_param_139842") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139875, &mem_param_139845, "mem_param_139845") != 0)
                        return 1;
                    do_find_joinPairs_res_f_res_131588 = loop_dz2081Uz2080Uz2081U_131595;
                    do_find_joinPairs_res_f_res_131589 = loop_dz2081Uz2080Uz2082U_131596;
                    do_find_joinPairs_res_f_res_131590 = loop_dz2081Uz2080Uz2083U_131597;
                    
                    int64_t bytes_139878 = (int64_t) 8 * do_find_joinPairs_res_f_res_131589;
                    int64_t bytes_139886 = (int64_t) 8 * do_find_joinPairs_res_f_res_131590;
                    
                    if (memblock_alloc(ctx, &mem_139879, bytes_139878, "mem_139879")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139540 = 0; i_139540 < do_find_joinPairs_res_f_res_131589; i_139540++) {
                        int64_t eta_p_131632 = ((int64_t *) ext_mem_139876.mem)[i_139540];
                        int64_t lifted_lambda_res_131633 = add64(s_lb_126111, eta_p_131632);
                        
                        ((int64_t *) mem_139879.mem)[i_139540] = lifted_lambda_res_131633;
                    }
                    if (memblock_unref(ctx, &ext_mem_139876, "ext_mem_139876") != 0)
                        return 1;
                    if (memblock_alloc(ctx, &mem_139887, bytes_139886, "mem_139887")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139544 = 0; i_139544 < do_find_joinPairs_res_f_res_131590; i_139544++) {
                        int64_t eta_p_131635 = ((int64_t *) ext_mem_139875.mem)[i_139544];
                        int64_t lifted_lambda_res_131636 = add64(r_lb_126062, eta_p_131635);
                        
                        ((int64_t *) mem_139887.mem)[i_139544] = lifted_lambda_res_131636;
                    }
                    if (memblock_unref(ctx, &ext_mem_139875, "ext_mem_139875") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139980, &mem_139879, "mem_139879") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139977, &mem_139887, "mem_139887") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139974, &ext_mem_139877, "ext_mem_139877") != 0)
                        return 1;
                    do_find_joinPairs_res_131506 = do_find_joinPairs_res_f_res_131589;
                    do_find_joinPairs_res_131507 = do_find_joinPairs_res_f_res_131590;
                    do_find_joinPairs_res_131508 = do_find_joinPairs_res_f_res_131588;
                }
                if (memblock_set(ctx, &ext_mem_140135, &ext_mem_139977, "ext_mem_139977") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_140132, &ext_mem_139980, "ext_mem_139980") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_140129, &ext_mem_139974, "ext_mem_139974") != 0)
                    return 1;
                find_joinPairs_res_126138 = do_find_joinPairs_res_131507;
                find_joinPairs_res_126139 = do_find_joinPairs_res_131506;
                find_joinPairs_res_126140 = do_find_joinPairs_res_131508;
            }
            
            int64_t conc_tmp_126156 = loop_dz2083Uz2086U_126102 + find_joinPairs_res_126140;
            int64_t bytes_140136 = b_119921 * conc_tmp_126156;
            int64_t conc_tmp_126158 = loop_dz2083Uz2084U_126100 + find_joinPairs_res_126138;
            int64_t bytes_140138 = (int64_t) 8 * conc_tmp_126158;
            int64_t conc_tmp_126160 = loop_dz2083Uz2085U_126101 + find_joinPairs_res_126139;
            int64_t bytes_140140 = (int64_t) 8 * conc_tmp_126160;
            
            if (memblock_alloc(ctx, &mem_140137, bytes_140136, "mem_140137")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_140535 = (int64_t) 0;
            
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_140137.mem, b_119921 * tmp_offs_140535, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_param_139835.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loop_dz2083Uz2086U_126102, b_119921});
            tmp_offs_140535 += loop_dz2083Uz2086U_126102;
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_140137.mem, b_119921 * tmp_offs_140535, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) ext_mem_140129.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {find_joinPairs_res_126140, b_119921});
            tmp_offs_140535 += find_joinPairs_res_126140;
            if (memblock_unref(ctx, &ext_mem_140129, "ext_mem_140129") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_140139, bytes_140138, "mem_140139")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_140536 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_140139.mem, tmp_offs_140536, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139828.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2083Uz2084U_126100});
            tmp_offs_140536 += loop_dz2083Uz2084U_126100;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_140139.mem, tmp_offs_140536, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_140135.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {find_joinPairs_res_126138});
            tmp_offs_140536 += find_joinPairs_res_126138;
            if (memblock_unref(ctx, &ext_mem_140135, "ext_mem_140135") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_140141, bytes_140140, "mem_140141")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_140537 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_140141.mem, tmp_offs_140537, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139831.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2083Uz2085U_126101});
            tmp_offs_140537 += loop_dz2083Uz2085U_126101;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_140141.mem, tmp_offs_140537, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_140132.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {find_joinPairs_res_126139});
            tmp_offs_140537 += find_joinPairs_res_126139;
            if (memblock_unref(ctx, &ext_mem_140132, "ext_mem_140132") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140432, &mem_140139, "mem_140139") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140433, &mem_140141, "mem_140141") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140434, &mem_140137, "mem_140137") != 0)
                return 1;
            
            int64_t loop_dz2083Uz2084U_tmp_140435 = conc_tmp_126158;
            int64_t loop_dz2083Uz2085U_tmp_140436 = conc_tmp_126160;
            int64_t loop_dz2083Uz2086U_tmp_140437 = conc_tmp_126156;
            
            if (memblock_set(ctx, &mem_param_139828, &mem_param_tmp_140432, "mem_param_tmp_140432") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139831, &mem_param_tmp_140433, "mem_param_tmp_140433") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139835, &mem_param_tmp_140434, "mem_param_tmp_140434") != 0)
                return 1;
            loop_dz2083Uz2084U_126100 = loop_dz2083Uz2084U_tmp_140435;
            loop_dz2083Uz2085U_126101 = loop_dz2083Uz2085U_tmp_140436;
            loop_dz2083Uz2086U_126102 = loop_dz2083Uz2086U_tmp_140437;
        }
        if (memblock_set(ctx, &ext_mem_140151, &mem_param_139828, "mem_param_139828") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_140150, &mem_param_139831, "mem_param_139831") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_140149, &mem_param_139835, "mem_param_139835") != 0)
            return 1;
        loopres_126093 = loop_dz2083Uz2084U_126100;
        loopres_126094 = loop_dz2083Uz2085U_126101;
        loopres_126095 = loop_dz2083Uz2086U_126102;
        
        int64_t conc_tmp_126162 = loop_dz2081Uz2082U_126051 + loopres_126095;
        int64_t bytes_140152 = b_119921 * conc_tmp_126162;
        int64_t conc_tmp_126164 = loop_dz2081Uz2080U_126049 + loopres_126093;
        int64_t bytes_140154 = (int64_t) 8 * conc_tmp_126164;
        int64_t conc_tmp_126166 = loop_dz2081Uz2081U_126050 + loopres_126094;
        int64_t bytes_140156 = (int64_t) 8 * conc_tmp_126166;
        
        if (memblock_alloc(ctx, &mem_140153, bytes_140152, "mem_140153")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_140538 = (int64_t) 0;
        
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_140153.mem, b_119921 * tmp_offs_140538, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) mem_param_139825.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loop_dz2081Uz2082U_126051, b_119921});
        tmp_offs_140538 += loop_dz2081Uz2082U_126051;
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_140153.mem, b_119921 * tmp_offs_140538, (int64_t []) {b_119921, (int64_t) 1}, (uint8_t *) ext_mem_140149.mem, (int64_t) 0, (int64_t []) {b_119921, (int64_t) 1}, (int64_t []) {loopres_126095, b_119921});
        tmp_offs_140538 += loopres_126095;
        if (memblock_unref(ctx, &ext_mem_140149, "ext_mem_140149") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_140155, bytes_140154, "mem_140155")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_140539 = (int64_t) 0;
        
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140155.mem, tmp_offs_140539, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139818.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2080U_126049});
        tmp_offs_140539 += loop_dz2081Uz2080U_126049;
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140155.mem, tmp_offs_140539, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_140151.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_126093});
        tmp_offs_140539 += loopres_126093;
        if (memblock_unref(ctx, &ext_mem_140151, "ext_mem_140151") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_140157, bytes_140156, "mem_140157")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_140540 = (int64_t) 0;
        
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140157.mem, tmp_offs_140540, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139821.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2081U_126050});
        tmp_offs_140540 += loop_dz2081Uz2081U_126050;
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_140157.mem, tmp_offs_140540, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_140150.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_126094});
        tmp_offs_140540 += loopres_126094;
        if (memblock_unref(ctx, &ext_mem_140150, "ext_mem_140150") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140423, &mem_140155, "mem_140155") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140424, &mem_140157, "mem_140157") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140425, &mem_140153, "mem_140153") != 0)
            return 1;
        
        int64_t loop_dz2081Uz2080U_tmp_140426 = conc_tmp_126164;
        int64_t loop_dz2081Uz2081U_tmp_140427 = conc_tmp_126166;
        int64_t loop_dz2081Uz2082U_tmp_140428 = conc_tmp_126162;
        
        if (memblock_set(ctx, &mem_param_139818, &mem_param_tmp_140423, "mem_param_tmp_140423") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139821, &mem_param_tmp_140424, "mem_param_tmp_140424") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139825, &mem_param_tmp_140425, "mem_param_tmp_140425") != 0)
            return 1;
        loop_dz2081Uz2080U_126049 = loop_dz2081Uz2080U_tmp_140426;
        loop_dz2081Uz2081U_126050 = loop_dz2081Uz2081U_tmp_140427;
        loop_dz2081Uz2082U_126051 = loop_dz2081Uz2082U_tmp_140428;
    }
    if (memblock_set(ctx, &ext_mem_140167, &mem_param_139818, "mem_param_139818") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_140166, &mem_param_139821, "mem_param_139821") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_140165, &mem_param_139825, "mem_param_139825") != 0)
        return 1;
    join_hashPartitions_res_126042 = loop_dz2081Uz2080U_126049;
    join_hashPartitions_res_126043 = loop_dz2081Uz2081U_126050;
    join_hashPartitions_res_126044 = loop_dz2081Uz2082U_126051;
    if (memblock_unref(ctx, &mem_139811, "mem_139811") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139812, "mem_139812") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139813, "mem_139813") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139814, "mem_139814") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139815, "mem_139815") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &ext_mem_140167, "ext_mem_140167") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &ext_mem_140166, "ext_mem_140166") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140322, &ext_mem_140165, "ext_mem_140165") != 0)
        return 1;
    prim_out_140323 = join_hashPartitions_res_126042;
    prim_out_140324 = join_hashPartitions_res_126043;
    prim_out_140325 = join_hashPartitions_res_126044;
    if (memblock_set(ctx, &*mem_out_p_140541, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140542, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140543, &mem_out_140322, "mem_out_140322") != 0)
        return 1;
    *out_prim_out_140544 = prim_out_140323;
    *out_prim_out_140545 = prim_out_140324;
    *out_prim_out_140546 = prim_out_140325;
    
  cleanup:
    {
        free(mem_139589);
        free(mem_139597);
        free(mem_139599);
        free(mem_139601);
        free(mem_139603);
        free(mem_139616);
        free(mem_139626);
        free(mem_139627);
        free(mem_139640);
        free(mem_139641);
        free(mem_139654);
        free(mem_139655);
        free(mem_139668);
        free(mem_139669);
        free(mem_139685);
        free(mem_139686);
        free(mem_139699);
        free(mem_139700);
        free(mem_139716);
        free(mem_139717);
        free(mem_139730);
        free(mem_139731);
        free(mem_139747);
        free(mem_139748);
        free(mem_139761);
        free(mem_139762);
        free(mem_139788);
        free(mem_139790);
        free(mem_139792);
        free(mem_139907);
        free(mem_139908);
        free(mem_139922);
        free(mem_140052);
        free(mem_140053);
        free(mem_140067);
        if (memblock_unref(ctx, &mem_param_tmp_140425, "mem_param_tmp_140425") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140424, "mem_param_tmp_140424") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140423, "mem_param_tmp_140423") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140157, "mem_140157") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140155, "mem_140155") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140153, "mem_140153") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140434, "mem_param_tmp_140434") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140433, "mem_param_tmp_140433") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140432, "mem_param_tmp_140432") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140141, "mem_140141") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140139, "mem_140139") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140137, "mem_140137") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139887, "mem_139887") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139879, "mem_139879") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140515, "mem_param_tmp_140515") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140514, "mem_param_tmp_140514") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140513, "mem_param_tmp_140513") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139867, "mem_139867") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139865, "mem_139865") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139863, "mem_139863") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140522, "mem_param_tmp_140522") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139851, "mem_139851") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139854, "ext_mem_139854") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139848, "mem_param_139848") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139857, "ext_mem_139857") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139845, "mem_param_139845") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139842, "mem_param_139842") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139839, "mem_param_139839") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139875, "ext_mem_139875") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139876, "ext_mem_139876") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139877, "ext_mem_139877") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139964, "mem_139964") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139956, "mem_139956") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140492, "mem_param_tmp_140492") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140491, "mem_param_tmp_140491") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140490, "mem_param_tmp_140490") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139942, "mem_139942") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139938, "ext_mem_139938") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139934, "mem_139934") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139944, "mem_139944") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139940, "mem_139940") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139905, "mem_param_139905") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139902, "mem_param_139902") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139899, "mem_param_139899") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139952, "ext_mem_139952") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139953, "ext_mem_139953") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139954, "ext_mem_139954") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139936, "mem_139936") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139895, "mem_139895") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139974, "ext_mem_139974") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139977, "ext_mem_139977") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139980, "ext_mem_139980") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140032, "mem_140032") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140024, "mem_140024") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140468, "mem_param_tmp_140468") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140467, "mem_param_tmp_140467") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140466, "mem_param_tmp_140466") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140012, "mem_140012") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140010, "mem_140010") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140008, "mem_140008") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140475, "mem_param_tmp_140475") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139996, "mem_139996") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139999, "ext_mem_139999") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139993, "mem_param_139993") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140002, "ext_mem_140002") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139990, "mem_param_139990") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139987, "mem_param_139987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139984, "mem_param_139984") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140020, "ext_mem_140020") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140021, "ext_mem_140021") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140022, "ext_mem_140022") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140109, "mem_140109") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140101, "mem_140101") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140445, "mem_param_tmp_140445") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140444, "mem_param_tmp_140444") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140443, "mem_param_tmp_140443") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140087, "mem_140087") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140083, "ext_mem_140083") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140079, "mem_140079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140089, "mem_140089") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140085, "mem_140085") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_140050, "mem_param_140050") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_140047, "mem_param_140047") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_140044, "mem_param_140044") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140097, "ext_mem_140097") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140098, "ext_mem_140098") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140099, "ext_mem_140099") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140081, "mem_140081") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_140040, "mem_140040") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140119, "ext_mem_140119") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140122, "ext_mem_140122") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140125, "ext_mem_140125") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140129, "ext_mem_140129") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140132, "ext_mem_140132") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140135, "ext_mem_140135") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139835, "mem_param_139835") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139831, "mem_param_139831") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139828, "mem_param_139828") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140149, "ext_mem_140149") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140150, "ext_mem_140150") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140151, "ext_mem_140151") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139825, "mem_param_139825") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139821, "mem_param_139821") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139818, "mem_param_139818") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140165, "ext_mem_140165") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140166, "ext_mem_140166") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_140167, "ext_mem_140167") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139815, "mem_139815") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139814, "mem_139814") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139813, "mem_139813") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139812, "mem_139812") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139811, "mem_139811") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140322, "mem_out_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_double(struct futhark_context *ctx, int64_t *out_prim_out_140582, struct memblock ks_mem_139580, int64_t n_62657)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_comm_res_131659;
    double defunc_0_reduce_comm_res_131660;
    int64_t redout_139363;
    double redout_139364;
    
    redout_139363 = n_62657;
    redout_139364 = INFINITY;
    for (int64_t i_139365 = 0; i_139365 < n_62657; i_139365++) {
        double x_121397 = ((double *) ks_mem_139580.mem)[i_139365];
        bool defunc_0_lt_res_121402 = redout_139364 < x_121397;
        bool defunc_0_eq_res_121404 = redout_139364 == x_121397;
        bool cond_f_res_t_res_121405 = slt64(redout_139363, i_139365);
        bool x_121406 = defunc_0_eq_res_121404 && cond_f_res_t_res_121405;
        bool x_130097 = !defunc_0_lt_res_121402;
        bool y_130098 = x_121406 && x_130097;
        bool cond_121403 = defunc_0_lt_res_121402 || y_130098;
        int64_t defunc_0_op_res_121407;
        
        if (cond_121403) {
            defunc_0_op_res_121407 = redout_139363;
        } else {
            defunc_0_op_res_121407 = i_139365;
        }
        
        double defunc_0_op_res_121408;
        
        if (cond_121403) {
            defunc_0_op_res_121408 = redout_139364;
        } else {
            defunc_0_op_res_121408 = x_121397;
        }
        
        int64_t redout_tmp_140321 = defunc_0_op_res_121407;
        double redout_tmp_140322 = defunc_0_op_res_121408;
        
        redout_139363 = redout_tmp_140321;
        redout_139364 = redout_tmp_140322;
    }
    defunc_0_reduce_comm_res_131659 = redout_139363;
    defunc_0_reduce_comm_res_131660 = redout_139364;
    prim_out_140320 = defunc_0_reduce_comm_res_131659;
    *out_prim_out_140582 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_float(struct futhark_context *ctx, int64_t *out_prim_out_140583, struct memblock ks_mem_139580, int64_t n_62480)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_comm_res_131659;
    float defunc_0_reduce_comm_res_131660;
    int64_t redout_139363;
    float redout_139364;
    
    redout_139363 = n_62480;
    redout_139364 = INFINITY;
    for (int64_t i_139365 = 0; i_139365 < n_62480; i_139365++) {
        float x_121397 = ((float *) ks_mem_139580.mem)[i_139365];
        bool defunc_0_lt_res_121402 = redout_139364 < x_121397;
        bool defunc_0_eq_res_121404 = redout_139364 == x_121397;
        bool cond_f_res_t_res_121405 = slt64(redout_139363, i_139365);
        bool x_121406 = defunc_0_eq_res_121404 && cond_f_res_t_res_121405;
        bool x_130097 = !defunc_0_lt_res_121402;
        bool y_130098 = x_121406 && x_130097;
        bool cond_121403 = defunc_0_lt_res_121402 || y_130098;
        int64_t defunc_0_op_res_121407;
        
        if (cond_121403) {
            defunc_0_op_res_121407 = redout_139363;
        } else {
            defunc_0_op_res_121407 = i_139365;
        }
        
        float defunc_0_op_res_121408;
        
        if (cond_121403) {
            defunc_0_op_res_121408 = redout_139364;
        } else {
            defunc_0_op_res_121408 = x_121397;
        }
        
        int64_t redout_tmp_140321 = defunc_0_op_res_121407;
        float redout_tmp_140322 = defunc_0_op_res_121408;
        
        redout_139363 = redout_tmp_140321;
        redout_139364 = redout_tmp_140322;
    }
    defunc_0_reduce_comm_res_131659 = redout_139363;
    defunc_0_reduce_comm_res_131660 = redout_139364;
    prim_out_140320 = defunc_0_reduce_comm_res_131659;
    *out_prim_out_140583 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_int(struct futhark_context *ctx, int64_t *out_prim_out_140584, struct memblock ks_mem_139580, int64_t n_62129)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_comm_res_131659;
    int32_t defunc_0_reduce_comm_res_131660;
    int64_t redout_139363;
    int32_t redout_139364;
    
    redout_139363 = n_62129;
    redout_139364 = 2147483647;
    for (int64_t i_139365 = 0; i_139365 < n_62129; i_139365++) {
        int32_t x_121397 = ((int32_t *) ks_mem_139580.mem)[i_139365];
        bool defunc_0_lt_res_121402 = slt32(redout_139364, x_121397);
        bool defunc_0_eq_res_121404 = redout_139364 == x_121397;
        bool cond_f_res_t_res_121405 = slt64(redout_139363, i_139365);
        bool x_121406 = defunc_0_eq_res_121404 && cond_f_res_t_res_121405;
        bool x_130097 = !defunc_0_lt_res_121402;
        bool y_130098 = x_121406 && x_130097;
        bool cond_121403 = defunc_0_lt_res_121402 || y_130098;
        int64_t defunc_0_op_res_121407;
        
        if (cond_121403) {
            defunc_0_op_res_121407 = redout_139363;
        } else {
            defunc_0_op_res_121407 = i_139365;
        }
        
        int32_t defunc_0_op_res_121408;
        
        if (cond_121403) {
            defunc_0_op_res_121408 = redout_139364;
        } else {
            defunc_0_op_res_121408 = x_121397;
        }
        
        int64_t redout_tmp_140321 = defunc_0_op_res_121407;
        int32_t redout_tmp_140322 = defunc_0_op_res_121408;
        
        redout_139363 = redout_tmp_140321;
        redout_139364 = redout_tmp_140322;
    }
    defunc_0_reduce_comm_res_131659 = redout_139363;
    defunc_0_reduce_comm_res_131660 = redout_139364;
    prim_out_140320 = defunc_0_reduce_comm_res_131659;
    *out_prim_out_140584 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_long(struct futhark_context *ctx, int64_t *out_prim_out_140585, struct memblock ks_mem_139580, int64_t n_62303)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_comm_res_131659;
    int64_t defunc_0_reduce_comm_res_131660;
    int64_t redout_139363;
    int64_t redout_139364;
    
    redout_139363 = n_62303;
    redout_139364 = (int64_t) 9223372036854775807;
    for (int64_t i_139365 = 0; i_139365 < n_62303; i_139365++) {
        int64_t x_121397 = ((int64_t *) ks_mem_139580.mem)[i_139365];
        bool defunc_0_lt_res_121402 = slt64(redout_139364, x_121397);
        bool defunc_0_eq_res_121404 = redout_139364 == x_121397;
        bool cond_f_res_t_res_121405 = slt64(redout_139363, i_139365);
        bool x_121406 = defunc_0_eq_res_121404 && cond_f_res_t_res_121405;
        bool x_130097 = !defunc_0_lt_res_121402;
        bool y_130098 = x_121406 && x_130097;
        bool cond_121403 = defunc_0_lt_res_121402 || y_130098;
        int64_t defunc_0_op_res_121407;
        
        if (cond_121403) {
            defunc_0_op_res_121407 = redout_139363;
        } else {
            defunc_0_op_res_121407 = i_139365;
        }
        
        int64_t defunc_0_op_res_121408;
        
        if (cond_121403) {
            defunc_0_op_res_121408 = redout_139364;
        } else {
            defunc_0_op_res_121408 = x_121397;
        }
        
        int64_t redout_tmp_140321 = defunc_0_op_res_121407;
        int64_t redout_tmp_140322 = defunc_0_op_res_121408;
        
        redout_139363 = redout_tmp_140321;
        redout_139364 = redout_tmp_140322;
    }
    defunc_0_reduce_comm_res_131659 = redout_139363;
    defunc_0_reduce_comm_res_131660 = redout_139364;
    prim_out_140320 = defunc_0_reduce_comm_res_131659;
    *out_prim_out_140585 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_short(struct futhark_context *ctx, int64_t *out_prim_out_140586, struct memblock ks_mem_139580, int64_t n_61955)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_comm_res_131659;
    int16_t defunc_0_reduce_comm_res_131660;
    int64_t redout_139363;
    int16_t redout_139364;
    
    redout_139363 = n_61955;
    redout_139364 = (int16_t) 32767;
    for (int64_t i_139365 = 0; i_139365 < n_61955; i_139365++) {
        int16_t x_121397 = ((int16_t *) ks_mem_139580.mem)[i_139365];
        bool defunc_0_lt_res_121402 = slt16(redout_139364, x_121397);
        bool defunc_0_eq_res_121404 = redout_139364 == x_121397;
        bool cond_f_res_t_res_121405 = slt64(redout_139363, i_139365);
        bool x_121406 = defunc_0_eq_res_121404 && cond_f_res_t_res_121405;
        bool x_130097 = !defunc_0_lt_res_121402;
        bool y_130098 = x_121406 && x_130097;
        bool cond_121403 = defunc_0_lt_res_121402 || y_130098;
        int64_t defunc_0_op_res_121407;
        
        if (cond_121403) {
            defunc_0_op_res_121407 = redout_139363;
        } else {
            defunc_0_op_res_121407 = i_139365;
        }
        
        int16_t defunc_0_op_res_121408;
        
        if (cond_121403) {
            defunc_0_op_res_121408 = redout_139364;
        } else {
            defunc_0_op_res_121408 = x_121397;
        }
        
        int64_t redout_tmp_140321 = defunc_0_op_res_121407;
        int16_t redout_tmp_140322 = defunc_0_op_res_121408;
        
        redout_139363 = redout_tmp_140321;
        redout_139364 = redout_tmp_140322;
    }
    defunc_0_reduce_comm_res_131659 = redout_139363;
    defunc_0_reduce_comm_res_131660 = redout_139364;
    prim_out_140320 = defunc_0_reduce_comm_res_131659;
    *out_prim_out_140586 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_calc_partitions_from_partitioned_set(struct futhark_context *ctx, struct memblock *mem_out_p_140587, struct memblock *mem_out_p_140588, int64_t *out_prim_out_140589, int32_t *out_prim_out_140590, struct memblock pXs_mem_139580, int64_t n_116595, int64_t b_116596, int32_t radix_sizze_116597, int64_t offset_116599, int64_t sizze_thresh_116600, int32_t max_depth_116601)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139590_cached_sizze_140591 = 0;
    unsigned char *mem_139590 = NULL;
    int64_t mem_139592_cached_sizze_140592 = 0;
    unsigned char *mem_139592 = NULL;
    int64_t mem_139594_cached_sizze_140593 = 0;
    unsigned char *mem_139594 = NULL;
    int64_t mem_139596_cached_sizze_140594 = 0;
    unsigned char *mem_139596 = NULL;
    int64_t mem_139622_cached_sizze_140595 = 0;
    unsigned char *mem_139622 = NULL;
    int64_t mem_139624_cached_sizze_140596 = 0;
    unsigned char *mem_139624 = NULL;
    int64_t mem_139626_cached_sizze_140597 = 0;
    unsigned char *mem_139626 = NULL;
    struct memblock mem_139681;
    
    mem_139681.references = NULL;
    
    struct memblock mem_param_tmp_140325;
    
    mem_param_tmp_140325.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140343;
    
    mem_param_tmp_140343.references = NULL;
    
    struct memblock mem_param_tmp_140342;
    
    mem_param_tmp_140342.references = NULL;
    
    struct memblock mem_139667;
    
    mem_139667.references = NULL;
    
    struct memblock mem_139665;
    
    mem_139665.references = NULL;
    
    struct memblock ext_mem_139654;
    
    ext_mem_139654.references = NULL;
    
    struct memblock ext_mem_139655;
    
    ext_mem_139655.references = NULL;
    
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock mem_param_139650;
    
    mem_param_139650.references = NULL;
    
    struct memblock mem_param_139647;
    
    mem_param_139647.references = NULL;
    
    struct memblock ext_mem_139672;
    
    ext_mem_139672.references = NULL;
    
    struct memblock ext_mem_139673;
    
    ext_mem_139673.references = NULL;
    
    struct memblock mem_param_139588;
    
    mem_param_139588.references = NULL;
    
    struct memblock mem_param_139585;
    
    mem_param_139585.references = NULL;
    
    struct memblock ext_mem_139678;
    
    ext_mem_139678.references = NULL;
    
    struct memblock ext_mem_139679;
    
    ext_mem_139679.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock ext_mem_139582;
    
    ext_mem_139582.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140322;
    int32_t prim_out_140323;
    int32_t getPartitionBounds_arg3_122325 = sub32(radix_sizze_116597, 1);
    int64_t calc_partitions_from_partitioned_set_res_122326;
    int64_t calc_partitions_from_partitioned_set_res_122327;
    int32_t calc_partitions_from_partitioned_set_res_122330;
    
    if (futrts_getPartitionBounds_11848(ctx, &ext_mem_139582, &ext_mem_139581, &calc_partitions_from_partitioned_set_res_122326, &calc_partitions_from_partitioned_set_res_122327, &calc_partitions_from_partitioned_set_res_122330, pXs_mem_139580, n_116595, b_116596, 1, 0, getPartitionBounds_arg3_122325) != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool cond_122331 = slt32(calc_partitions_from_partitioned_set_res_122330, max_depth_116601);
    int64_t calc_partitions_from_partitioned_set_res_122332;
    int64_t calc_partitions_from_partitioned_set_res_122333;
    bool calc_partitions_from_partitioned_set_res_122334;
    int32_t calc_partitions_from_partitioned_set_res_122337;
    int64_t loop_dz2088U_122338;
    int64_t loop_dz2089U_122339;
    bool loop_while_122340;
    int32_t p_122343;
    
    if (memblock_set(ctx, &mem_param_139585, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139588, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    loop_dz2088U_122338 = calc_partitions_from_partitioned_set_res_122326;
    loop_dz2089U_122339 = calc_partitions_from_partitioned_set_res_122327;
    loop_while_122340 = cond_122331;
    p_122343 = calc_partitions_from_partitioned_set_res_122330;
    while (loop_while_122340) {
        int64_t zl_rhs_122346 = sub64(loop_dz2088U_122338, (int64_t) 1);
        int64_t bytes_139589 = (int64_t) 8 * loop_dz2088U_122338;
        
        if (mem_139590_cached_sizze_140591 < bytes_139589) {
            err = lexical_realloc(ctx, &mem_139590, &mem_139590_cached_sizze_140591, bytes_139589);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139592_cached_sizze_140592 < bytes_139589) {
            err = lexical_realloc(ctx, &mem_139592, &mem_139592_cached_sizze_140592, bytes_139589);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139594_cached_sizze_140593 < bytes_139589) {
            err = lexical_realloc(ctx, &mem_139594, &mem_139594_cached_sizze_140593, bytes_139589);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139596_cached_sizze_140594 < bytes_139589) {
            err = lexical_realloc(ctx, &mem_139596, &mem_139596_cached_sizze_140594, bytes_139589);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int64_t discard_139377;
        int64_t scanacc_139367 = (int64_t) 0;
        
        for (int64_t i_139372 = 0; i_139372 < loop_dz2088U_122338; i_139372++) {
            int64_t tmp_131683 = ((int64_t *) mem_param_139585.mem)[i_139372];
            bool cond_131684 = slt64(i_139372, zl_rhs_122346);
            int64_t tmp_131685;
            
            if (cond_131684) {
                int64_t tmp_131723 = add64((int64_t) 1, i_139372);
                bool x_131724 = sle64((int64_t) 0, tmp_131723);
                bool y_131725 = slt64(tmp_131723, loop_dz2088U_122338);
                bool bounds_check_131726 = x_131724 && y_131725;
                bool index_certs_131727;
                
                if (!bounds_check_131726) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131723, "] out of bounds for array of shape [", (long long) loop_dz2088U_122338, "].", "-> #0  ftRelational.fut:244:55-62\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftRelational.fut:232:1-269:32\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t tmp_t_res_131728 = ((int64_t *) mem_param_139585.mem)[tmp_131723];
                
                tmp_131685 = tmp_t_res_131728;
            } else {
                tmp_131685 = n_116595;
            }
            
            int64_t zg_lhs_131694 = sub64(tmp_131685, tmp_131683);
            bool lifted_lambda_res_131695 = slt64(sizze_thresh_116600, zg_lhs_131694);
            int64_t defunc_0_f_res_131696 = btoi_bool_i64(lifted_lambda_res_131695);
            int64_t defunc_0_op_res_122378 = add64(defunc_0_f_res_131696, scanacc_139367);
            
            ((int64_t *) mem_139590)[i_139372] = defunc_0_op_res_122378;
            ((int64_t *) mem_139592)[i_139372] = defunc_0_f_res_131696;
            ((int64_t *) mem_139594)[i_139372] = tmp_131683;
            ((int64_t *) mem_139596)[i_139372] = tmp_131685;
            
            int64_t scanacc_tmp_140332 = defunc_0_op_res_122378;
            
            scanacc_139367 = scanacc_tmp_140332;
        }
        discard_139377 = scanacc_139367;
        
        bool cond_122379 = loop_dz2088U_122338 == (int64_t) 0;
        bool x_122380 = !cond_122379;
        bool x_122382 = sle64((int64_t) 0, zl_rhs_122346);
        bool y_122383 = slt64(zl_rhs_122346, loop_dz2088U_122338);
        bool bounds_check_122384 = x_122382 && y_122383;
        bool protect_assert_disj_122385 = cond_122379 || bounds_check_122384;
        bool index_certs_122386;
        
        if (!protect_assert_disj_122385) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_rhs_122346, "] out of bounds for array of shape [", (long long) loop_dz2088U_122338, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftRelational.fut:232:1-269:32\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t m_f_res_122387;
        
        if (x_122380) {
            int64_t x_131729 = ((int64_t *) mem_139590)[zl_rhs_122346];
            
            m_f_res_122387 = x_131729;
        } else {
            m_f_res_122387 = (int64_t) 0;
        }
        
        int64_t m_122389;
        
        if (cond_122379) {
            m_122389 = (int64_t) 0;
        } else {
            m_122389 = m_f_res_122387;
        }
        
        int64_t m_122399 = sub64(m_122389, (int64_t) 1);
        bool i_p_m_t_s_leq_w_122401 = slt64(m_122399, loop_dz2088U_122338);
        bool zzero_leq_i_p_m_t_s_122400 = sle64((int64_t) 0, m_122399);
        bool y_122403 = zzero_leq_i_p_m_t_s_122400 && i_p_m_t_s_leq_w_122401;
        bool i_lte_j_122402 = sle64((int64_t) 0, m_122389);
        bool forwards_ok_122404 = i_lte_j_122402 && y_122403;
        bool eq_x_zz_122396 = (int64_t) 0 == m_f_res_122387;
        bool p_and_eq_x_y_122397 = x_122380 && eq_x_zz_122396;
        bool empty_slice_122398 = cond_122379 || p_and_eq_x_y_122397;
        bool ok_or_empty_122405 = empty_slice_122398 || forwards_ok_122404;
        bool index_certs_122406;
        
        if (!ok_or_empty_122405) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_122389, "] out of bounds for array of shape [", (long long) loop_dz2088U_122338, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftRelational.fut:232:1-269:32\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139621 = (int64_t) 8 * m_122389;
        
        if (mem_139622_cached_sizze_140595 < bytes_139621) {
            err = lexical_realloc(ctx, &mem_139622, &mem_139622_cached_sizze_140595, bytes_139621);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_140337 = 0; i_140337 < m_122389; i_140337++) {
            int64_t x_140338 = (int64_t) 0 + i_140337 * (int64_t) 1;
            
            ((int64_t *) mem_139622)[i_140337] = x_140338;
        }
        if (mem_139624_cached_sizze_140596 < bytes_139621) {
            err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140596, bytes_139621);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139596, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_122389});
        if (mem_139626_cached_sizze_140597 < bytes_139621) {
            err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140597, bytes_139621);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139626, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139594, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_122389});
        for (int64_t write_iter_139378 = 0; write_iter_139378 < loop_dz2088U_122338; write_iter_139378++) {
            int64_t write_iv_139382 = ((int64_t *) mem_139592)[write_iter_139378];
            int64_t write_iv_139383 = ((int64_t *) mem_139590)[write_iter_139378];
            int64_t write_iv_139384 = ((int64_t *) mem_139594)[write_iter_139378];
            int64_t write_iv_139385 = ((int64_t *) mem_139596)[write_iter_139378];
            bool cond_131665 = write_iv_139382 == (int64_t) 1;
            int64_t lifted_lambda_res_131666;
            
            if (cond_131665) {
                int64_t lifted_lambda_res_t_res_131730 = sub64(write_iv_139383, (int64_t) 1);
                
                lifted_lambda_res_131666 = lifted_lambda_res_t_res_131730;
            } else {
                lifted_lambda_res_131666 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_131666) && slt64(lifted_lambda_res_131666, m_122389)) {
                ((int64_t *) mem_139626)[lifted_lambda_res_131666] = write_iv_139384;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_131666) && slt64(lifted_lambda_res_131666, m_122389)) {
                ((int64_t *) mem_139624)[lifted_lambda_res_131666] = write_iv_139385;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_131666) && slt64(lifted_lambda_res_131666, m_122389)) {
                ((int64_t *) mem_139622)[lifted_lambda_res_131666] = write_iter_139378;
            }
        }
        
        int32_t new_i_122420 = mul32(radix_sizze_116597, p_122343);
        int32_t zt_rhs_122421 = add32(1, p_122343);
        int32_t zm_lhs_122422 = mul32(radix_sizze_116597, zt_rhs_122421);
        int32_t new_j_122423 = sub32(zm_lhs_122422, 1);
        int64_t loopres_122424;
        int64_t loopres_122425;
        int32_t loopres_122428;
        int64_t loopres_122429;
        int64_t loopres_122430;
        int64_t loop_dz2084Uz2089U_122432;
        int64_t loop_dz2085Uz2080U_122433;
        int32_t q_122436;
        int64_t ad_122437;
        int64_t ox_122438;
        
        if (memblock_set(ctx, &mem_param_139647, &mem_param_139585, "mem_param_139585") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139650, &mem_param_139588, "mem_param_139588") != 0)
            return 1;
        loop_dz2084Uz2089U_122432 = loop_dz2088U_122338;
        loop_dz2085Uz2080U_122433 = loop_dz2089U_122339;
        q_122436 = p_122343;
        ad_122437 = (int64_t) 0;
        ox_122438 = (int64_t) 0;
        for (int64_t i_122431 = 0; i_122431 < m_122389; i_122431++) {
            int64_t bounds_122439 = ((int64_t *) mem_139626)[i_122431];
            int64_t bounds_122440 = ((int64_t *) mem_139624)[i_122431];
            int64_t bounds_122441 = ((int64_t *) mem_139622)[i_122431];
            int64_t dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_122442 = sub64(bounds_122440, bounds_122439);
            bool empty_slice_122443 = dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_122442 == (int64_t) 0;
            int64_t m_122444 = sub64(dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_122442, (int64_t) 1);
            int64_t i_p_m_t_s_122445 = add64(bounds_122439, m_122444);
            bool zzero_leq_i_p_m_t_s_122446 = sle64((int64_t) 0, i_p_m_t_s_122445);
            bool i_p_m_t_s_leq_w_122447 = slt64(i_p_m_t_s_122445, n_116595);
            bool zzero_lte_i_122448 = sle64((int64_t) 0, bounds_122439);
            bool i_lte_j_122449 = sle64(bounds_122439, bounds_122440);
            bool y_122450 = i_p_m_t_s_leq_w_122447 && zzero_lte_i_122448;
            bool y_122451 = zzero_leq_i_p_m_t_s_122446 && y_122450;
            bool forwards_ok_122452 = i_lte_j_122449 && y_122451;
            bool ok_or_empty_122453 = empty_slice_122443 || forwards_ok_122452;
            bool index_certs_122454;
            
            if (!ok_or_empty_122453) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bounds_122439, ":", (long long) bounds_122440, "] out of bounds for array of shape [", (long long) n_116595, "].", "-> #0  ftRelational.fut:250:21-43\n   #1  ftRelational.fut:232:1-269:32\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139651 = b_116596 * dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_122442;
            
            if (memblock_alloc(ctx, &mem_139652, bytes_139651, "mem_139652")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139652.mem, (int64_t) 0, (int64_t []) {b_116596, (int64_t) 1}, (uint8_t *) pXs_mem_139580.mem, b_116596 * bounds_122439, (int64_t []) {b_116596, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_122442, b_116596});
            
            int64_t loopres_122458;
            int64_t loopres_122459;
            int32_t loopres_122462;
            
            if (futrts_getPartitionBounds_11848(ctx, &ext_mem_139655, &ext_mem_139654, &loopres_122458, &loopres_122459, &loopres_122462, mem_139652, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_122442, b_116596, zt_rhs_122421, new_i_122420, new_j_122423) != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
                return 1;
            
            int64_t zm_lhs_122463 = add64(ox_122438, bounds_122441);
            int64_t stitch_122464 = sub64(zm_lhs_122463, ad_122437);
            bool empty_slice_122465 = stitch_122464 == (int64_t) 0;
            int64_t m_122466 = sub64(stitch_122464, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_122467 = sle64((int64_t) 0, m_122466);
            bool i_p_m_t_s_leq_w_122468 = slt64(m_122466, loop_dz2084Uz2089U_122432);
            bool i_lte_j_122469 = sle64((int64_t) 0, stitch_122464);
            bool y_122470 = zzero_leq_i_p_m_t_s_122467 && i_p_m_t_s_leq_w_122468;
            bool forwards_ok_122471 = i_lte_j_122469 && y_122470;
            bool ok_or_empty_122472 = empty_slice_122465 || forwards_ok_122471;
            bool index_certs_122473;
            
            if (!ok_or_empty_122472) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) stitch_122464, "] out of bounds for array of shape [", (long long) loop_dz2084Uz2089U_122432, "].", "-> #0  ftRelational.fut:258:18-36\n   #1  ftRelational.fut:232:1-269:32\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t conc_tmp_122478 = loopres_122458 + stitch_122464;
            int64_t zpzp_rhs_122479 = add64((int64_t) 1, stitch_122464);
            int64_t j_m_i_122480 = sub64(loop_dz2084Uz2089U_122432, zpzp_rhs_122479);
            bool empty_slice_122481 = j_m_i_122480 == (int64_t) 0;
            int64_t m_122482 = sub64(j_m_i_122480, (int64_t) 1);
            int64_t i_p_m_t_s_122483 = add64(zpzp_rhs_122479, m_122482);
            bool zzero_leq_i_p_m_t_s_122484 = sle64((int64_t) 0, i_p_m_t_s_122483);
            bool i_p_m_t_s_leq_w_122485 = slt64(i_p_m_t_s_122483, loop_dz2084Uz2089U_122432);
            bool zzero_lte_i_122486 = sle64((int64_t) 0, zpzp_rhs_122479);
            bool i_lte_j_122487 = sle64(zpzp_rhs_122479, loop_dz2084Uz2089U_122432);
            bool y_122488 = i_p_m_t_s_leq_w_122485 && zzero_lte_i_122486;
            bool y_122489 = zzero_leq_i_p_m_t_s_122484 && y_122488;
            bool forwards_ok_122490 = i_lte_j_122487 && y_122489;
            bool ok_or_empty_122491 = empty_slice_122481 || forwards_ok_122490;
            bool index_certs_122492;
            
            if (!ok_or_empty_122491) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zpzp_rhs_122479, ":", (long long) loop_dz2084Uz2089U_122432, "] out of bounds for array of shape [", (long long) loop_dz2084Uz2089U_122432, "].", "-> #0  ftRelational.fut:258:90-126\n   #1  ftRelational.fut:232:1-269:32\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t conc_tmp_122494 = conc_tmp_122478 + j_m_i_122480;
            int64_t bytes_139664 = (int64_t) 8 * conc_tmp_122494;
            bool i_p_m_t_s_leq_w_122496 = slt64(m_122466, loop_dz2085Uz2080U_122433);
            bool y_122497 = zzero_leq_i_p_m_t_s_122467 && i_p_m_t_s_leq_w_122496;
            bool ok_or_empty_122498 = empty_slice_122465 || y_122497;
            bool index_certs_122499;
            
            if (!ok_or_empty_122498) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) stitch_122464, "] out of bounds for array of shape [", (long long) loop_dz2085Uz2080U_122433, "].", "-> #0  ftRelational.fut:259:18-36\n   #1  ftRelational.fut:232:1-269:32\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t conc_tmp_122501 = loopres_122459 + stitch_122464;
            int64_t j_m_i_122502 = sub64(loop_dz2085Uz2080U_122433, zpzp_rhs_122479);
            bool empty_slice_122503 = j_m_i_122502 == (int64_t) 0;
            int64_t m_122504 = sub64(j_m_i_122502, (int64_t) 1);
            int64_t i_p_m_t_s_122505 = add64(zpzp_rhs_122479, m_122504);
            bool zzero_leq_i_p_m_t_s_122506 = sle64((int64_t) 0, i_p_m_t_s_122505);
            bool i_p_m_t_s_leq_w_122507 = slt64(i_p_m_t_s_122505, loop_dz2085Uz2080U_122433);
            bool i_lte_j_122508 = sle64(zpzp_rhs_122479, loop_dz2085Uz2080U_122433);
            bool y_122509 = zzero_lte_i_122486 && i_p_m_t_s_leq_w_122507;
            bool y_122510 = zzero_leq_i_p_m_t_s_122506 && y_122509;
            bool forwards_ok_122511 = i_lte_j_122508 && y_122510;
            bool ok_or_empty_122512 = empty_slice_122503 || forwards_ok_122511;
            bool index_certs_122513;
            
            if (!ok_or_empty_122512) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zpzp_rhs_122479, ":", (long long) loop_dz2085Uz2080U_122433, "] out of bounds for array of shape [", (long long) loop_dz2085Uz2080U_122433, "].", "-> #0  ftRelational.fut:259:62-98\n   #1  ftRelational.fut:232:1-269:32\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t conc_tmp_122515 = conc_tmp_122501 + j_m_i_122502;
            int64_t bytes_139666 = (int64_t) 4 * conc_tmp_122515;
            
            if (memblock_alloc(ctx, &mem_139665, bytes_139664, "mem_139665")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139392 = 0; i_139392 < loopres_122458; i_139392++) {
                int64_t eta_p_122476 = ((int64_t *) ext_mem_139655.mem)[i_139392];
                int64_t lifted_lambda_res_122477 = add64(bounds_122439, eta_p_122476);
                
                ((int64_t *) mem_139665.mem)[stitch_122464 + i_139392] = lifted_lambda_res_122477;
            }
            if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
                return 1;
            
            int64_t tmp_offs_140352 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139665.mem, tmp_offs_140352, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139647.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {stitch_122464});
            tmp_offs_140352 += stitch_122464;
            if (!(tmp_offs_140352 == stitch_122464)) {
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139665.mem, tmp_offs_140352, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139665.mem, stitch_122464, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_122458});
            }
            tmp_offs_140352 += loopres_122458;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139665.mem, tmp_offs_140352, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139647.mem, (int64_t) 0 + (int64_t) 1 * zpzp_rhs_122479, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_122480});
            tmp_offs_140352 += j_m_i_122480;
            if (memblock_alloc(ctx, &mem_139667, bytes_139666, "mem_139667")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_140353 = (int64_t) 0;
            
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139667.mem, tmp_offs_140353, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139650.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {stitch_122464});
            tmp_offs_140353 += stitch_122464;
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139667.mem, tmp_offs_140353, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139654.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_122459});
            tmp_offs_140353 += loopres_122459;
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139667.mem, tmp_offs_140353, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139650.mem, (int64_t) 0 + (int64_t) 1 * zpzp_rhs_122479, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_122502});
            tmp_offs_140353 += j_m_i_122502;
            if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
                return 1;
            
            int64_t tmp_122517 = add64((int64_t) 1, ad_122437);
            int64_t tmp_122518 = add64(ox_122438, loopres_122458);
            
            if (memblock_set(ctx, &mem_param_tmp_140342, &mem_139665, "mem_139665") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140343, &mem_139667, "mem_139667") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2089U_tmp_140344 = conc_tmp_122494;
            int64_t loop_dz2085Uz2080U_tmp_140345 = conc_tmp_122515;
            int32_t q_tmp_140348 = zt_rhs_122421;
            int64_t ad_tmp_140349 = tmp_122517;
            int64_t ox_tmp_140350 = tmp_122518;
            
            if (memblock_set(ctx, &mem_param_139647, &mem_param_tmp_140342, "mem_param_tmp_140342") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139650, &mem_param_tmp_140343, "mem_param_tmp_140343") != 0)
                return 1;
            loop_dz2084Uz2089U_122432 = loop_dz2084Uz2089U_tmp_140344;
            loop_dz2085Uz2080U_122433 = loop_dz2085Uz2080U_tmp_140345;
            q_122436 = q_tmp_140348;
            ad_122437 = ad_tmp_140349;
            ox_122438 = ox_tmp_140350;
        }
        if (memblock_set(ctx, &ext_mem_139673, &mem_param_139647, "mem_param_139647") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139672, &mem_param_139650, "mem_param_139650") != 0)
            return 1;
        loopres_122424 = loop_dz2084Uz2089U_122432;
        loopres_122425 = loop_dz2085Uz2080U_122433;
        loopres_122428 = q_122436;
        loopres_122429 = ad_122437;
        loopres_122430 = ox_122438;
        
        bool tmp_122519 = slt64((int64_t) 0, m_122389);
        bool cond_122520 = slt32(loopres_122428, max_depth_116601);
        bool x_122521 = tmp_122519 && cond_122520;
        
        if (memblock_set(ctx, &mem_param_tmp_140324, &ext_mem_139673, "ext_mem_139673") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140325, &ext_mem_139672, "ext_mem_139672") != 0)
            return 1;
        
        int64_t loop_dz2088U_tmp_140326 = loopres_122424;
        int64_t loop_dz2089U_tmp_140327 = loopres_122425;
        bool loop_while_tmp_140328 = x_122521;
        int32_t p_tmp_140331 = loopres_122428;
        
        if (memblock_set(ctx, &mem_param_139585, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139588, &mem_param_tmp_140325, "mem_param_tmp_140325") != 0)
            return 1;
        loop_dz2088U_122338 = loop_dz2088U_tmp_140326;
        loop_dz2089U_122339 = loop_dz2089U_tmp_140327;
        loop_while_122340 = loop_while_tmp_140328;
        p_122343 = p_tmp_140331;
    }
    if (memblock_set(ctx, &ext_mem_139679, &mem_param_139585, "mem_param_139585") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139678, &mem_param_139588, "mem_param_139588") != 0)
        return 1;
    calc_partitions_from_partitioned_set_res_122332 = loop_dz2088U_122338;
    calc_partitions_from_partitioned_set_res_122333 = loop_dz2089U_122339;
    calc_partitions_from_partitioned_set_res_122334 = loop_while_122340;
    calc_partitions_from_partitioned_set_res_122337 = p_122343;
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    
    int64_t bytes_139680 = (int64_t) 8 * calc_partitions_from_partitioned_set_res_122332;
    bool dim_match_122525 = calc_partitions_from_partitioned_set_res_122332 == calc_partitions_from_partitioned_set_res_122333;
    bool empty_or_match_cert_122526;
    
    if (!dim_match_122525) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) calc_partitions_from_partitioned_set_res_122333, "] cannot match shape of type `[", (long long) calc_partitions_from_partitioned_set_res_122332, "]i32`.", "-> #0  ftRelational.fut:267:14-54\n   #1  ftRelational.fut:232:1-269:32\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139681, bytes_139680, "mem_139681")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139396 = 0; i_139396 < calc_partitions_from_partitioned_set_res_122332; i_139396++) {
        int64_t eta_p_122523 = ((int64_t *) ext_mem_139679.mem)[i_139396];
        int64_t lifted_lambda_res_122524 = add64(offset_116599, eta_p_122523);
        
        ((int64_t *) mem_139681.mem)[i_139396] = lifted_lambda_res_122524;
    }
    if (memblock_unref(ctx, &ext_mem_139679, "ext_mem_139679") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139681, "mem_139681") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &ext_mem_139678, "ext_mem_139678") != 0)
        return 1;
    prim_out_140322 = calc_partitions_from_partitioned_set_res_122332;
    prim_out_140323 = calc_partitions_from_partitioned_set_res_122337;
    if (memblock_set(ctx, &*mem_out_p_140587, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140588, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    *out_prim_out_140589 = prim_out_140322;
    *out_prim_out_140590 = prim_out_140323;
    
  cleanup:
    {
        free(mem_139590);
        free(mem_139592);
        free(mem_139594);
        free(mem_139596);
        free(mem_139622);
        free(mem_139624);
        free(mem_139626);
        if (memblock_unref(ctx, &mem_139681, "mem_139681") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140325, "mem_param_tmp_140325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140343, "mem_param_tmp_140343") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140342, "mem_param_tmp_140342") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139667, "mem_139667") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139665, "mem_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139650, "mem_param_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139647, "mem_param_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139672, "ext_mem_139672") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139673, "ext_mem_139673") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139588, "mem_param_139588") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139585, "mem_param_139585") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139678, "ext_mem_139678") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139679, "ext_mem_139679") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_create_hash_table_from_partitioned_set(struct futhark_context *ctx, struct memblock *mem_out_p_140598, struct memblock *mem_out_p_140599, int64_t *out_prim_out_140600, struct memblock pXs_mem_139580, struct memblock bounds_mem_139581, struct memblock depths_mem_139582, int64_t n_117403, int64_t b_117404, int64_t dz2080U_117405, int64_t dz2081U_117406, int32_t radix_sizze_117407, int32_t maxDepth_117411, int64_t scatter_psizze_117412)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140601 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139594_cached_sizze_140602 = 0;
    unsigned char *mem_139594 = NULL;
    int64_t mem_139598_cached_sizze_140603 = 0;
    unsigned char *mem_139598 = NULL;
    int64_t mem_139630_cached_sizze_140604 = 0;
    unsigned char *mem_139630 = NULL;
    int64_t mem_139632_cached_sizze_140605 = 0;
    unsigned char *mem_139632 = NULL;
    struct memblock ext_mem_139656;
    
    ext_mem_139656.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock ext_mem_139650;
    
    ext_mem_139650.references = NULL;
    
    struct memblock mem_139648;
    
    mem_139648.references = NULL;
    
    struct memblock mem_139646;
    
    mem_139646.references = NULL;
    
    struct memblock mem_139609;
    
    mem_139609.references = NULL;
    
    struct memblock mem_139608;
    
    mem_139608.references = NULL;
    
    struct memblock mem_139622;
    
    mem_139622.references = NULL;
    
    struct memblock ext_mem_139625;
    
    ext_mem_139625.references = NULL;
    
    struct memblock ext_mem_139628;
    
    ext_mem_139628.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140322;
    int64_t bytes_139583 = (int64_t) 8 * dz2080U_117405;
    int64_t i32_res_121239 = sext_i32_i64(radix_sizze_117407);
    bool nonnegative_121240 = sle64((int64_t) 0, i32_res_121239);
    bool nonzzero_cert_121241;
    
    if (!nonnegative_121240) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "negative exponent", "-> #0  ftRelational.fut:296:78-83\n   #1  ftRelational.fut:271:1-298:86\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242 = shl64((int64_t) 1, i32_res_121239);
    int64_t bytes_139585 = (int64_t) 8 * b_117404;
    int32_t getRadix_arg1_131289 = sub32(radix_sizze_117407, 1);
    int32_t i64_res_131290 = sext_i64_i32(b_117404);
    int32_t zm_lhs_131291 = mul32(8, i64_res_131290);
    int32_t min_arg1_131292 = sub32(zm_lhs_131291, 1);
    int32_t min_res_131293 = smin32(getRadix_arg1_131289, min_arg1_131292);
    int32_t i32_arg0_131297 = sub32(i64_res_131290, 1);
    int64_t i32_res_131298 = sext_i32_i64(i32_arg0_131297);
    int32_t zm_rhs_131300 = sdiv32(min_res_131293, 8);
    int32_t zm_lhs_131301 = sub32(i64_res_131290, zm_rhs_131300);
    int32_t i32_arg0_131302 = sub32(zm_lhs_131301, 1);
    int64_t i32_res_131303 = sext_i32_i64(i32_arg0_131302);
    int64_t min_arg1_131305 = sub64(bytes_139585, (int64_t) 1);
    int64_t min_res_131306 = smin64(i32_res_131303, min_arg1_131305);
    bool x_131323 = sle64((int64_t) 0, i32_res_131298);
    bool y_131324 = slt64(i32_res_131298, b_117404);
    bool bounds_check_131325 = x_131323 && y_131324;
    bool index_certs_131326;
    
    if (!bounds_check_131325) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_131298, "] out of bounds for array of shape [", (long long) b_117404, "].", "-> #0  ftHashJoin.fut:31:48-64\n   #1  ftRelational.fut:271:1-298:86\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_131334 = sle64((int64_t) 0, min_res_131306);
    bool y_131335 = slt64(min_res_131306, b_117404);
    bool bounds_check_131336 = x_131334 && y_131335;
    bool index_certs_131337;
    
    if (!bounds_check_131336) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_131306, "] out of bounds for array of shape [", (long long) b_117404, "].", "-> #0  ftHashJoin.fut:32:38-54\n   #1  ftRelational.fut:271:1-298:86\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139645 = (int64_t) 8 * dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140323 = 0; i_140323 < dz2080U_117405; i_140323++) {
        int64_t x_140324 = (int64_t) 0 + i_140323 * (int64_t) 1;
        
        ((int64_t *) mem_139584.mem)[i_140323] = x_140324;
    }
    if (mem_139586_cached_sizze_140601 < bytes_139585) {
        err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140601, bytes_139585);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < b_117404; i_139365++) {
        int64_t zm_lhs_131287 = sub64(b_117404, i_139365);
        int64_t lifted_lambda_res_131288 = sub64(zm_lhs_131287, (int64_t) 1);
        
        ((int64_t *) mem_139586)[i_139365] = lifted_lambda_res_131288;
    }
    
    int32_t lastBit_131308 = smod32(min_res_131293, 8);
    int32_t zm_lhs_131311 = sub32(8, lastBit_131308);
    int32_t i32_arg0_131312 = sub32(zm_lhs_131311, 1);
    int8_t unsign_arg0_131313 = zext_i32_i8(i32_arg0_131312);
    int8_t unsign_arg0_131314 = lshr8((int8_t) -1, unsign_arg0_131313);
    
    if (mem_139594_cached_sizze_140602 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139594, &mem_139594_cached_sizze_140602, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139598_cached_sizze_140603 < b_117404) {
        err = lexical_realloc(ctx, &mem_139598, &mem_139598_cached_sizze_140603, b_117404);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139375 = 0; i_139375 < dz2080U_117405; i_139375++) {
        int64_t radix_to_idx_arg1_121250 = ((int64_t *) bounds_mem_139581.mem)[i_139375];
        bool x_121251 = sle64((int64_t) 0, radix_to_idx_arg1_121250);
        bool y_121252 = slt64(radix_to_idx_arg1_121250, n_117403);
        bool bounds_check_121253 = x_121251 && y_121252;
        bool index_certs_121254;
        
        if (!bounds_check_121253) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) radix_to_idx_arg1_121250, "] out of bounds for array of shape [", (long long) n_117403, "].", "-> #0  ftRelational.fut:281:46-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftRelational.fut:271:1-298:86\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < b_117404; i_139369++) {
            int8_t eta_p_131318 = ((int8_t *) pXs_mem_139580.mem)[radix_to_idx_arg1_121250 * b_117404 + i_139369];
            bool cond_131319 = sle64(i_139369, i32_res_131298);
            bool cond_t_res_131320 = sle64(min_res_131306, i_139369);
            bool x_131321 = cond_131319 && cond_t_res_131320;
            int8_t lifted_lambda_res_131322;
            
            if (x_131321) {
                lifted_lambda_res_131322 = eta_p_131318;
            } else {
                lifted_lambda_res_131322 = (int8_t) 0;
            }
            ((int8_t *) mem_139598)[i_139369] = lifted_lambda_res_131322;
        }
        
        int8_t za_lhs_131327 = ((int8_t *) mem_139598)[i32_res_131298];
        int8_t mod1_x_131328 = (int8_t) -1 & za_lhs_131327;
        
        ((int8_t *) mem_139598)[i32_res_131298] = mod1_x_131328;
        
        int8_t za_lhs_131338 = ((int8_t *) mem_139598)[min_res_131306];
        int8_t tmp_131339 = unsign_arg0_131314 & za_lhs_131338;
        
        ((int8_t *) mem_139598)[min_res_131306] = tmp_131339;
        
        int64_t defunc_res_131703;
        int64_t redout_139371 = (int64_t) 0;
        
        for (int64_t i_139372 = 0; i_139372 < b_117404; i_139372++) {
            int8_t eta_p_131678 = ((int8_t *) mem_139598)[i_139372];
            int64_t eta_p_131679 = ((int64_t *) mem_139586)[i_139372];
            int64_t u8_res_131680 = zext_i8_i64(eta_p_131678);
            int64_t zlzl_rhs_131681 = mul64((int64_t) 8, eta_p_131679);
            int64_t zt_rhs_131682 = shl64((int64_t) 1, zlzl_rhs_131681);
            int64_t lifted_lambda_res_131683 = mul64(u8_res_131680, zt_rhs_131682);
            int64_t zp_res_131356 = add64(lifted_lambda_res_131683, redout_139371);
            int64_t redout_tmp_140328 = zp_res_131356;
            
            redout_139371 = redout_tmp_140328;
        }
        defunc_res_131703 = redout_139371;
        ((int64_t *) mem_139594)[i_139375] = defunc_res_131703;
    }
    
    bool cond_121260 = maxDepth_117411 == 1;
    
    if (cond_121260) {
        if (memblock_alloc(ctx, &mem_139622, dz2080U_117405, "mem_139622")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140329 = 0; nest_i_140329 < dz2080U_117405; nest_i_140329++) {
            ((bool *) mem_139622.mem)[nest_i_140329] = 1;
        }
        if (memblock_set(ctx, &ext_mem_139628, &mem_139622, "mem_139622") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139625, &mem_139622, "mem_139622") != 0)
            return 1;
    } else {
        int64_t zeze_rhs_121264 = sub64(dz2080U_117405, (int64_t) 1);
        
        if (memblock_alloc(ctx, &mem_139608, dz2080U_117405, "mem_139608")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139609, dz2080U_117405, "mem_139609")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139381 = 0; i_139381 < dz2080U_117405; i_139381++) {
            int64_t cur_i_121272 = ((int64_t *) mem_139594)[i_139381];
            bool cond_121273 = i_139381 == (int64_t) 0;
            int64_t pre_i_121274;
            
            if (cond_121273) {
                pre_i_121274 = (int64_t) -1;
            } else {
                int64_t tmp_121275 = sub64(i_139381, (int64_t) 1);
                bool x_121276 = sle64((int64_t) 0, tmp_121275);
                bool y_121277 = slt64(tmp_121275, dz2080U_117405);
                bool bounds_check_121278 = x_121276 && y_121277;
                bool index_certs_121279;
                
                if (!bounds_check_121278) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_121275, "] out of bounds for array of shape [", (long long) dz2080U_117405, "].", "-> #0  ftRelational.fut:288:42-74\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftRelational.fut:286:10-293:8\n   #3  ftRelational.fut:271:1-298:86\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t pre_i_f_res_121280 = ((int64_t *) mem_139594)[tmp_121275];
                
                pre_i_121274 = pre_i_f_res_121280;
            }
            
            bool is_first_121281 = cur_i_121272 == pre_i_121274;
            bool is_first_121282 = !is_first_121281;
            bool cond_121283 = i_139381 == zeze_rhs_121264;
            int64_t pos_i_121284;
            
            if (cond_121283) {
                pos_i_121284 = (int64_t) -1;
            } else {
                int64_t tmp_121285 = add64((int64_t) 1, i_139381);
                bool x_121286 = sle64((int64_t) 0, tmp_121285);
                bool y_121287 = slt64(tmp_121285, dz2080U_117405);
                bool bounds_check_121288 = x_121286 && y_121287;
                bool index_certs_121289;
                
                if (!bounds_check_121288) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_121285, "] out of bounds for array of shape [", (long long) dz2080U_117405, "].", "-> #0  ftRelational.fut:290:46-78\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftRelational.fut:286:10-293:8\n   #3  ftRelational.fut:271:1-298:86\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t pos_i_f_res_121290 = ((int64_t *) mem_139594)[tmp_121285];
                
                pos_i_121284 = pos_i_f_res_121290;
            }
            
            bool is_last_121291 = cur_i_121272 == pos_i_121284;
            bool is_last_121292 = !is_last_121291;
            
            ((bool *) mem_139608.mem)[i_139381] = is_first_121282;
            ((bool *) mem_139609.mem)[i_139381] = is_last_121292;
        }
        if (memblock_set(ctx, &ext_mem_139628, &mem_139608, "mem_139608") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139625, &mem_139609, "mem_139609") != 0)
            return 1;
    }
    if (mem_139630_cached_sizze_140604 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139630, &mem_139630_cached_sizze_140604, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139632_cached_sizze_140605 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139632, &mem_139632_cached_sizze_140605, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139388 = 0; i_139388 < dz2080U_117405; i_139388++) {
        bool eta_p_131660 = ((bool *) ext_mem_139628.mem)[i_139388];
        bool eta_p_131662 = ((bool *) ext_mem_139625.mem)[i_139388];
        int64_t lifted_lambda_res_131664;
        
        if (eta_p_131660) {
            int64_t lifted_lambda_res_t_res_131711 = ((int64_t *) mem_139594)[i_139388];
            
            lifted_lambda_res_131664 = lifted_lambda_res_t_res_131711;
        } else {
            lifted_lambda_res_131664 = (int64_t) -1;
        }
        
        int64_t lifted_lambda_res_131671;
        
        if (eta_p_131662) {
            int64_t lifted_lambda_res_t_res_131716 = ((int64_t *) mem_139594)[i_139388];
            
            lifted_lambda_res_131671 = lifted_lambda_res_t_res_131716;
        } else {
            lifted_lambda_res_131671 = (int64_t) -1;
        }
        ((int64_t *) mem_139630)[i_139388] = lifted_lambda_res_131671;
        ((int64_t *) mem_139632)[i_139388] = lifted_lambda_res_131664;
    }
    if (memblock_unref(ctx, &ext_mem_139625, "ext_mem_139625") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139628, "ext_mem_139628") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139646, bytes_139645, "mem_139646")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140334 = 0; nest_i_140334 < dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242; nest_i_140334++) {
        ((int64_t *) mem_139646.mem)[nest_i_140334] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139648, bytes_139583, "mem_139648")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139632, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dz2080U_117405});
    if (futrts_partitioned_scatter_11958(ctx, &ext_mem_139650, mem_139646, mem_139648, mem_139584, dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242, dz2080U_117405, scatter_psizze_117412) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_unref(ctx, &mem_139646, "mem_139646") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139648, "mem_139648") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139652, bytes_139645, "mem_139652")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140335 = 0; nest_i_140335 < dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242; nest_i_140335++) {
        ((int64_t *) mem_139652.mem)[nest_i_140335] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139654, bytes_139583, "mem_139654")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139630, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dz2080U_117405});
    if (futrts_partitioned_scatter_11958(ctx, &ext_mem_139656, mem_139652, mem_139654, mem_139584, dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242, dz2080U_117405, scatter_psizze_117412) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &ext_mem_139650, "ext_mem_139650") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &ext_mem_139656, "ext_mem_139656") != 0)
        return 1;
    prim_out_140322 = dzlz7bUZLztztZRz20U2z20Ursz7dUzg_121242;
    if (memblock_set(ctx, &*mem_out_p_140598, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140599, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    *out_prim_out_140600 = prim_out_140322;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139594);
        free(mem_139598);
        free(mem_139630);
        free(mem_139632);
        if (memblock_unref(ctx, &ext_mem_139656, "ext_mem_139656") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139650, "ext_mem_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139648, "mem_139648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139646, "mem_139646") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139609, "mem_139609") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139608, "mem_139608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139622, "mem_139622") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139625, "ext_mem_139625") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139628, "ext_mem_139628") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_GFTR(struct futhark_context *ctx, struct memblock *mem_out_p_140606, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_66270, int64_t dz2083U_66271, int64_t incr_66272, int64_t psizze_66273, int64_t pL_bytes_66275)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139625;
    
    mem_139625.references = NULL;
    
    struct memblock mem_param_tmp_140325;
    
    mem_param_tmp_140325.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock mem_139602;
    
    mem_139602.references = NULL;
    
    struct memblock mem_139600;
    
    mem_139600.references = NULL;
    
    struct memblock mem_param_139598;
    
    mem_param_139598.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139622;
    
    ext_mem_139622.references = NULL;
    
    struct memblock ext_mem_139623;
    
    ext_mem_139623.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * niz2084U_66270;
    bool zzero_121396 = psizze_66273 == (int64_t) 0;
    bool nonzzero_121397 = !zzero_121396;
    bool nonzzero_cert_121398;
    
    if (!nonzzero_121397) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftRelational.fut:52:1-53:69\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = niz2084U_66270 * pL_bytes_66275;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < niz2084U_66270; i_139365++) {
        int64_t eta_p_121392 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121393 = sub64(eta_p_121392, incr_66272);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121393;
    }
    
    int64_t zm_lhs_121394 = add64(dz2083U_66271, psizze_66273);
    int64_t zs_lhs_121395 = sub64(zm_lhs_121394, (int64_t) 1);
    int64_t m_121399 = sdiv64(zs_lhs_121395, psizze_66273);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < niz2084U_66270; nest_i_140322++) {
        for (int64_t nest_i_140323 = 0; nest_i_140323 < pL_bytes_66275; nest_i_140323++) {
            ((int8_t *) mem_139591.mem)[nest_i_140322 * pL_bytes_66275 + nest_i_140323] = (int8_t) 0;
        }
    }
    
    bool loop_cond_121401 = slt64((int64_t) 0, m_121399);
    bool partitioned_gather_res_121402;
    int64_t partitioned_gather_res_121405;
    bool loop_while_121406;
    int64_t p_121409;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139598, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121406 = loop_cond_121401;
    p_121409 = (int64_t) 0;
    while (loop_while_121406) {
        int64_t lower_bound_121410 = mul64(psizze_66273, p_121409);
        int64_t min_arg1_121411 = add64(psizze_66273, lower_bound_121410);
        int64_t min_res_121412 = smin64(dz2083U_66271, min_arg1_121411);
        int64_t j_m_i_121413 = sub64(min_res_121412, lower_bound_121410);
        bool empty_slice_121414 = j_m_i_121413 == (int64_t) 0;
        int64_t m_121415 = sub64(j_m_i_121413, (int64_t) 1);
        int64_t i_p_m_t_s_121416 = add64(lower_bound_121410, m_121415);
        bool zzero_leq_i_p_m_t_s_121417 = sle64((int64_t) 0, i_p_m_t_s_121416);
        bool i_p_m_t_s_leq_w_121418 = slt64(i_p_m_t_s_121416, dz2083U_66271);
        bool zzero_lte_i_121419 = sle64((int64_t) 0, lower_bound_121410);
        bool i_lte_j_121420 = sle64(lower_bound_121410, min_res_121412);
        bool y_121421 = i_p_m_t_s_leq_w_121418 && zzero_lte_i_121419;
        bool y_121422 = zzero_leq_i_p_m_t_s_121417 && y_121421;
        bool forwards_ok_121423 = i_lte_j_121420 && y_121422;
        bool ok_or_empty_121424 = empty_slice_121414 || forwards_ok_121423;
        bool index_certs_121425;
        
        if (!ok_or_empty_121424) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121410, ":", (long long) min_res_121412, "] out of bounds for array of shape [", (long long) dz2083U_66271, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftRelational.fut:52:1-53:69\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139600, bytes_139582, "mem_139600")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139600.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_66270});
        if (memblock_alloc(ctx, &mem_139602, bytes_139590, "mem_139602")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < niz2084U_66270; i_139369++) {
            int64_t eta_p_121428 = ((int64_t *) mem_param_139594.mem)[i_139369];
            bool cond_121430 = sle64(lower_bound_121410, eta_p_121428);
            bool cond_t_res_121431 = slt64(eta_p_121428, min_res_121412);
            bool x_121432 = cond_121430 && cond_t_res_121431;
            int64_t binop_y_139607 = pL_bytes_66275 * i_139369;
            int64_t lmad_ext_139609 = pL_bytes_66275 * eta_p_121428;
            int64_t ext_139611;
            
            if (x_121432) {
                ext_139611 = lmad_ext_139609;
            } else {
                ext_139611 = binop_y_139607;
            }
            if (x_121432) {
                int64_t tmp_131659 = sub64(eta_p_121428, lower_bound_121410);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121413);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121413, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftRelational.fut:52:1-53:69\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_139612, &ys_mem_139581, "ys_mem_139581") != 0)
                    return 1;
            } else if (memblock_set(ctx, &ext_mem_139612, &mem_param_139598, "mem_param_139598") != 0)
                return 1;
            lmad_copy_1b(ctx, 1, (uint8_t *) mem_139602.mem, i_139369 * pL_bytes_66275, (int64_t []) {(int64_t) 1}, (uint8_t *) ext_mem_139612.mem, ext_139611, (int64_t []) {(int64_t) 1}, (int64_t []) {pL_bytes_66275});
            if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
                return 1;
        }
        
        int64_t tmp_121440 = add64((int64_t) 1, p_121409);
        bool loop_cond_121441 = slt64(tmp_121440, m_121399);
        
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140325, &mem_139602, "mem_139602") != 0)
            return 1;
        
        bool loop_while_tmp_140326 = loop_cond_121441;
        int64_t p_tmp_140329 = tmp_121440;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139598, &mem_param_tmp_140325, "mem_param_tmp_140325") != 0)
            return 1;
        loop_while_121406 = loop_while_tmp_140326;
        p_121409 = p_tmp_140329;
    }
    if (memblock_set(ctx, &ext_mem_139623, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139622, &mem_param_139598, "mem_param_139598") != 0)
        return 1;
    partitioned_gather_res_121402 = loop_while_121406;
    partitioned_gather_res_121405 = p_121409;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139625, bytes_139590, "mem_139625")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139625.mem, (int64_t) 0, (int64_t []) {pL_bytes_66275, (int64_t) 1}, (uint8_t *) ext_mem_139622.mem, (int64_t) 0, (int64_t []) {pL_bytes_66275, (int64_t) 1}, (int64_t []) {niz2084U_66270, pL_bytes_66275});
    if (memblock_unref(ctx, &ext_mem_139622, "ext_mem_139622") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139625, "mem_139625") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140606, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139625, "mem_139625") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140325, "mem_param_tmp_140325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139602, "mem_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139598, "mem_param_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139622, "ext_mem_139622") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139623, "ext_mem_139623") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_double(struct futhark_context *ctx, struct memblock *mem_out_p_140607, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_65806, int64_t dz2083U_65807, int64_t incr_65808, int64_t psizze_65809)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * niz2084U_65806;
    bool zzero_121394 = psizze_65809 == (int64_t) 0;
    bool nonzzero_121395 = !zzero_121394;
    bool nonzzero_cert_121396;
    
    if (!nonzzero_121395) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftRelational.fut:50:5-41\n   #2  ftRelational.fut:49:1-50:41\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < niz2084U_65806; i_139365++) {
        int64_t eta_p_121390 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121391 = sub64(eta_p_121390, incr_65808);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121391;
    }
    
    int64_t zm_lhs_121392 = add64(dz2083U_65807, psizze_65809);
    int64_t zs_lhs_121393 = sub64(zm_lhs_121392, (int64_t) 1);
    int64_t m_121397 = sdiv64(zs_lhs_121393, psizze_65809);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139582, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < niz2084U_65806; nest_i_140322++) {
        ((double *) mem_139591.mem)[nest_i_140322] = 0.0;
    }
    
    bool loop_cond_121399 = slt64((int64_t) 0, m_121397);
    bool partitioned_gather_res_121400;
    int64_t partitioned_gather_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_65809, p_121407);
        int64_t min_arg1_121409 = add64(psizze_65809, lower_bound_121408);
        int64_t min_res_121410 = smin64(dz2083U_65807, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, dz2083U_65807);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) dz2083U_65807, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftRelational.fut:50:5-41\n   #2  ftRelational.fut:49:1-50:41\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_65806});
        if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < niz2084U_65806; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139594.mem)[i_139369];
            double eta_p_121427 = ((double *) mem_param_139597.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            double lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftRelational.fut:50:5-41\n   #4  ftRelational.fut:49:1-50:41\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                double tmp_131664 = ((double *) ys_mem_139581.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((double *) mem_139601.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121397);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121439;
        int64_t p_tmp_140328 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140325;
        p_121407 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121400 = loop_while_121404;
    partitioned_gather_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139582, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_65806});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140607, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_double_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140608, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_67778, int64_t n_67779, int64_t incr_67780, int64_t psizze_67781)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_param_tmp_140322;
    
    mem_param_tmp_140322.references = NULL;
    
    struct memblock mem_139600;
    
    mem_139600.references = NULL;
    
    struct memblock mem_139598;
    
    mem_139598.references = NULL;
    
    struct memblock mem_param_139596;
    
    mem_param_139596.references = NULL;
    
    struct memblock mem_param_139593;
    
    mem_param_139593.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139583 = (int64_t) 8 * ni_67778;
    bool zzero_121395 = psizze_67781 == (int64_t) 0;
    bool nonzzero_121396 = !zzero_121395;
    bool nonzzero_cert_121397;
    
    if (!nonzzero_121396) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:43:22-28\n   #1  ftRelational.fut:64:5-50\n   #2  ftRelational.fut:63:1-64:50\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < ni_67778; i_139365++) {
        int64_t eta_p_121391 = ((int64_t *) is_mem_139581.mem)[i_139365];
        int64_t lifted_lambda_res_121392 = sub64(eta_p_121391, incr_67780);
        
        ((int64_t *) mem_139584.mem)[i_139365] = lifted_lambda_res_121392;
    }
    
    int64_t zm_lhs_121393 = add64(n_67779, psizze_67781);
    int64_t zs_lhs_121394 = sub64(zm_lhs_121393, (int64_t) 1);
    int64_t m_121398 = sdiv64(zs_lhs_121394, psizze_67781);
    bool loop_cond_121399 = slt64((int64_t) 0, m_121398);
    bool partitioned_gather_over_array_res_121400;
    int64_t partitioned_gather_over_array_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139593, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139596, &preVals_mem_139580, "preVals_mem_139580") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_67781, p_121407);
        int64_t min_arg1_121409 = add64(psizze_67781, lower_bound_121408);
        int64_t min_res_121410 = smin64(n_67779, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, n_67779);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) n_67779, "].", "-> #0  ftbasics.fut:49:18-45\n   #1  ftRelational.fut:64:5-50\n   #2  ftRelational.fut:63:1-64:50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139598, bytes_139583, "mem_139598")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139598.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139593.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_67778});
        if (memblock_alloc(ctx, &mem_139600, bytes_139583, "mem_139600")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < ni_67778; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139593.mem)[i_139369];
            double eta_p_121427 = ((double *) mem_param_139596.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            double lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:52:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:50:30-54:6\n   #3  ftRelational.fut:64:5-50\n   #4  ftRelational.fut:63:1-64:50\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                double tmp_131664 = ((double *) ys_mem_139582.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((double *) mem_139600.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121398);
        
        if (memblock_set(ctx, &mem_param_tmp_140322, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139600, "mem_139600") != 0)
            return 1;
        
        bool loop_while_tmp_140324 = loop_cond_121439;
        int64_t p_tmp_140327 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139593, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139596, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140324;
        p_121407 = p_tmp_140327;
    }
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139593, "mem_param_139593") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139611, &mem_param_139596, "mem_param_139596") != 0)
        return 1;
    partitioned_gather_over_array_res_121400 = loop_while_121404;
    partitioned_gather_over_array_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139614, bytes_139583, "mem_139614")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139611.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_67778});
    if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139614, "mem_139614") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140608, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139596, "mem_param_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139593, "mem_param_139593") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_float(struct futhark_context *ctx, struct memblock *mem_out_p_140609, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_65526, int64_t dz2083U_65527, int64_t incr_65528, int64_t psizze_65529)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * niz2084U_65526;
    bool zzero_121394 = psizze_65529 == (int64_t) 0;
    bool nonzzero_121395 = !zzero_121394;
    bool nonzzero_cert_121396;
    
    if (!nonzzero_121395) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftRelational.fut:48:5-41\n   #2  ftRelational.fut:47:1-48:41\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = (int64_t) 4 * niz2084U_65526;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < niz2084U_65526; i_139365++) {
        int64_t eta_p_121390 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121391 = sub64(eta_p_121390, incr_65528);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121391;
    }
    
    int64_t zm_lhs_121392 = add64(dz2083U_65527, psizze_65529);
    int64_t zs_lhs_121393 = sub64(zm_lhs_121392, (int64_t) 1);
    int64_t m_121397 = sdiv64(zs_lhs_121393, psizze_65529);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < niz2084U_65526; nest_i_140322++) {
        ((float *) mem_139591.mem)[nest_i_140322] = 0.0F;
    }
    
    bool loop_cond_121399 = slt64((int64_t) 0, m_121397);
    bool partitioned_gather_res_121400;
    int64_t partitioned_gather_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_65529, p_121407);
        int64_t min_arg1_121409 = add64(psizze_65529, lower_bound_121408);
        int64_t min_res_121410 = smin64(dz2083U_65527, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, dz2083U_65527);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) dz2083U_65527, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftRelational.fut:48:5-41\n   #2  ftRelational.fut:47:1-48:41\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_65526});
        if (memblock_alloc(ctx, &mem_139601, bytes_139590, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < niz2084U_65526; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139594.mem)[i_139369];
            float eta_p_121427 = ((float *) mem_param_139597.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            float lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftRelational.fut:48:5-41\n   #4  ftRelational.fut:47:1-48:41\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float tmp_131664 = ((float *) ys_mem_139581.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((float *) mem_139601.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121397);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121439;
        int64_t p_tmp_140328 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140325;
        p_121407 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121400 = loop_while_121404;
    partitioned_gather_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139590, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_65526});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140609, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_float_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140610, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_67477, int64_t n_67478, int64_t incr_67479, int64_t psizze_67480)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_param_tmp_140322;
    
    mem_param_tmp_140322.references = NULL;
    
    struct memblock mem_139600;
    
    mem_139600.references = NULL;
    
    struct memblock mem_139598;
    
    mem_139598.references = NULL;
    
    struct memblock mem_param_139596;
    
    mem_param_139596.references = NULL;
    
    struct memblock mem_param_139593;
    
    mem_param_139593.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139583 = (int64_t) 8 * ni_67477;
    bool zzero_121395 = psizze_67480 == (int64_t) 0;
    bool nonzzero_121396 = !zzero_121395;
    bool nonzzero_cert_121397;
    
    if (!nonzzero_121396) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:43:22-28\n   #1  ftRelational.fut:62:5-50\n   #2  ftRelational.fut:61:1-62:50\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139613 = (int64_t) 4 * ni_67477;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < ni_67477; i_139365++) {
        int64_t eta_p_121391 = ((int64_t *) is_mem_139581.mem)[i_139365];
        int64_t lifted_lambda_res_121392 = sub64(eta_p_121391, incr_67479);
        
        ((int64_t *) mem_139584.mem)[i_139365] = lifted_lambda_res_121392;
    }
    
    int64_t zm_lhs_121393 = add64(n_67478, psizze_67480);
    int64_t zs_lhs_121394 = sub64(zm_lhs_121393, (int64_t) 1);
    int64_t m_121398 = sdiv64(zs_lhs_121394, psizze_67480);
    bool loop_cond_121399 = slt64((int64_t) 0, m_121398);
    bool partitioned_gather_over_array_res_121400;
    int64_t partitioned_gather_over_array_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139593, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139596, &preVals_mem_139580, "preVals_mem_139580") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_67480, p_121407);
        int64_t min_arg1_121409 = add64(psizze_67480, lower_bound_121408);
        int64_t min_res_121410 = smin64(n_67478, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, n_67478);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) n_67478, "].", "-> #0  ftbasics.fut:49:18-45\n   #1  ftRelational.fut:62:5-50\n   #2  ftRelational.fut:61:1-62:50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139598, bytes_139583, "mem_139598")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139598.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139593.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_67477});
        if (memblock_alloc(ctx, &mem_139600, bytes_139613, "mem_139600")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < ni_67477; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139593.mem)[i_139369];
            float eta_p_121427 = ((float *) mem_param_139596.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            float lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:52:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:50:30-54:6\n   #3  ftRelational.fut:62:5-50\n   #4  ftRelational.fut:61:1-62:50\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float tmp_131664 = ((float *) ys_mem_139582.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((float *) mem_139600.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121398);
        
        if (memblock_set(ctx, &mem_param_tmp_140322, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139600, "mem_139600") != 0)
            return 1;
        
        bool loop_while_tmp_140324 = loop_cond_121439;
        int64_t p_tmp_140327 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139593, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139596, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140324;
        p_121407 = p_tmp_140327;
    }
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139593, "mem_param_139593") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139611, &mem_param_139596, "mem_param_139596") != 0)
        return 1;
    partitioned_gather_over_array_res_121400 = loop_while_121404;
    partitioned_gather_over_array_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139614, bytes_139613, "mem_139614")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139611.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_67477});
    if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139614, "mem_139614") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140610, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139596, "mem_param_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139593, "mem_param_139593") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_int(struct futhark_context *ctx, struct memblock *mem_out_p_140611, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_64966, int64_t dz2083U_64967, int64_t incr_64968, int64_t psizze_64969)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * niz2084U_64966;
    bool zzero_121394 = psizze_64969 == (int64_t) 0;
    bool nonzzero_121395 = !zzero_121394;
    bool nonzzero_cert_121396;
    
    if (!nonzzero_121395) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftRelational.fut:44:5-41\n   #2  ftRelational.fut:43:1-44:41\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = (int64_t) 4 * niz2084U_64966;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < niz2084U_64966; i_139365++) {
        int64_t eta_p_121390 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121391 = sub64(eta_p_121390, incr_64968);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121391;
    }
    
    int64_t zm_lhs_121392 = add64(dz2083U_64967, psizze_64969);
    int64_t zs_lhs_121393 = sub64(zm_lhs_121392, (int64_t) 1);
    int64_t m_121397 = sdiv64(zs_lhs_121393, psizze_64969);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < niz2084U_64966; nest_i_140322++) {
        ((int32_t *) mem_139591.mem)[nest_i_140322] = 0;
    }
    
    bool loop_cond_121399 = slt64((int64_t) 0, m_121397);
    bool partitioned_gather_res_121400;
    int64_t partitioned_gather_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_64969, p_121407);
        int64_t min_arg1_121409 = add64(psizze_64969, lower_bound_121408);
        int64_t min_res_121410 = smin64(dz2083U_64967, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, dz2083U_64967);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) dz2083U_64967, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftRelational.fut:44:5-41\n   #2  ftRelational.fut:43:1-44:41\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_64966});
        if (memblock_alloc(ctx, &mem_139601, bytes_139590, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < niz2084U_64966; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139594.mem)[i_139369];
            int32_t eta_p_121427 = ((int32_t *) mem_param_139597.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            int32_t lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftRelational.fut:44:5-41\n   #4  ftRelational.fut:43:1-44:41\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t tmp_131664 = ((int32_t *) ys_mem_139581.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((int32_t *) mem_139601.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121397);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121439;
        int64_t p_tmp_140328 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140325;
        p_121407 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121400 = loop_while_121404;
    partitioned_gather_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139590, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_64966});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140611, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_int_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140612, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_66875, int64_t n_66876, int64_t incr_66877, int64_t psizze_66878)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_param_tmp_140322;
    
    mem_param_tmp_140322.references = NULL;
    
    struct memblock mem_139600;
    
    mem_139600.references = NULL;
    
    struct memblock mem_139598;
    
    mem_139598.references = NULL;
    
    struct memblock mem_param_139596;
    
    mem_param_139596.references = NULL;
    
    struct memblock mem_param_139593;
    
    mem_param_139593.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139583 = (int64_t) 8 * ni_66875;
    bool zzero_121395 = psizze_66878 == (int64_t) 0;
    bool nonzzero_121396 = !zzero_121395;
    bool nonzzero_cert_121397;
    
    if (!nonzzero_121396) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:43:22-28\n   #1  ftRelational.fut:58:5-50\n   #2  ftRelational.fut:57:1-58:50\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139613 = (int64_t) 4 * ni_66875;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < ni_66875; i_139365++) {
        int64_t eta_p_121391 = ((int64_t *) is_mem_139581.mem)[i_139365];
        int64_t lifted_lambda_res_121392 = sub64(eta_p_121391, incr_66877);
        
        ((int64_t *) mem_139584.mem)[i_139365] = lifted_lambda_res_121392;
    }
    
    int64_t zm_lhs_121393 = add64(n_66876, psizze_66878);
    int64_t zs_lhs_121394 = sub64(zm_lhs_121393, (int64_t) 1);
    int64_t m_121398 = sdiv64(zs_lhs_121394, psizze_66878);
    bool loop_cond_121399 = slt64((int64_t) 0, m_121398);
    bool partitioned_gather_over_array_res_121400;
    int64_t partitioned_gather_over_array_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139593, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139596, &preVals_mem_139580, "preVals_mem_139580") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_66878, p_121407);
        int64_t min_arg1_121409 = add64(psizze_66878, lower_bound_121408);
        int64_t min_res_121410 = smin64(n_66876, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, n_66876);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) n_66876, "].", "-> #0  ftbasics.fut:49:18-45\n   #1  ftRelational.fut:58:5-50\n   #2  ftRelational.fut:57:1-58:50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139598, bytes_139583, "mem_139598")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139598.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139593.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_66875});
        if (memblock_alloc(ctx, &mem_139600, bytes_139613, "mem_139600")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < ni_66875; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139593.mem)[i_139369];
            int32_t eta_p_121427 = ((int32_t *) mem_param_139596.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            int32_t lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:52:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:50:30-54:6\n   #3  ftRelational.fut:58:5-50\n   #4  ftRelational.fut:57:1-58:50\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t tmp_131664 = ((int32_t *) ys_mem_139582.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((int32_t *) mem_139600.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121398);
        
        if (memblock_set(ctx, &mem_param_tmp_140322, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139600, "mem_139600") != 0)
            return 1;
        
        bool loop_while_tmp_140324 = loop_cond_121439;
        int64_t p_tmp_140327 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139593, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139596, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140324;
        p_121407 = p_tmp_140327;
    }
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139593, "mem_param_139593") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139611, &mem_param_139596, "mem_param_139596") != 0)
        return 1;
    partitioned_gather_over_array_res_121400 = loop_while_121404;
    partitioned_gather_over_array_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139614, bytes_139613, "mem_139614")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139611.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_66875});
    if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139614, "mem_139614") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140612, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139596, "mem_param_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139593, "mem_param_139593") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_long(struct futhark_context *ctx, struct memblock *mem_out_p_140613, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_65246, int64_t dz2083U_65247, int64_t incr_65248, int64_t psizze_65249)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * niz2084U_65246;
    bool zzero_121394 = psizze_65249 == (int64_t) 0;
    bool nonzzero_121395 = !zzero_121394;
    bool nonzzero_cert_121396;
    
    if (!nonzzero_121395) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftRelational.fut:46:5-41\n   #2  ftRelational.fut:45:1-46:41\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < niz2084U_65246; i_139365++) {
        int64_t eta_p_121390 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121391 = sub64(eta_p_121390, incr_65248);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121391;
    }
    
    int64_t zm_lhs_121392 = add64(dz2083U_65247, psizze_65249);
    int64_t zs_lhs_121393 = sub64(zm_lhs_121392, (int64_t) 1);
    int64_t m_121397 = sdiv64(zs_lhs_121393, psizze_65249);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139582, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < niz2084U_65246; nest_i_140322++) {
        ((int64_t *) mem_139591.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    bool loop_cond_121399 = slt64((int64_t) 0, m_121397);
    bool partitioned_gather_res_121400;
    int64_t partitioned_gather_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_65249, p_121407);
        int64_t min_arg1_121409 = add64(psizze_65249, lower_bound_121408);
        int64_t min_res_121410 = smin64(dz2083U_65247, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, dz2083U_65247);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) dz2083U_65247, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftRelational.fut:46:5-41\n   #2  ftRelational.fut:45:1-46:41\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_65246});
        if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < niz2084U_65246; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139594.mem)[i_139369];
            int64_t eta_p_121427 = ((int64_t *) mem_param_139597.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            int64_t lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftRelational.fut:46:5-41\n   #4  ftRelational.fut:45:1-46:41\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t tmp_131664 = ((int64_t *) ys_mem_139581.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((int64_t *) mem_139601.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121397);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121439;
        int64_t p_tmp_140328 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140325;
        p_121407 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121400 = loop_while_121404;
    partitioned_gather_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139582, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_65246});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140613, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_long_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140614, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_67176, int64_t n_67177, int64_t incr_67178, int64_t psizze_67179)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_param_tmp_140322;
    
    mem_param_tmp_140322.references = NULL;
    
    struct memblock mem_139600;
    
    mem_139600.references = NULL;
    
    struct memblock mem_139598;
    
    mem_139598.references = NULL;
    
    struct memblock mem_param_139596;
    
    mem_param_139596.references = NULL;
    
    struct memblock mem_param_139593;
    
    mem_param_139593.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139583 = (int64_t) 8 * ni_67176;
    bool zzero_121395 = psizze_67179 == (int64_t) 0;
    bool nonzzero_121396 = !zzero_121395;
    bool nonzzero_cert_121397;
    
    if (!nonzzero_121396) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:43:22-28\n   #1  ftRelational.fut:60:5-50\n   #2  ftRelational.fut:59:1-60:50\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < ni_67176; i_139365++) {
        int64_t eta_p_121391 = ((int64_t *) is_mem_139581.mem)[i_139365];
        int64_t lifted_lambda_res_121392 = sub64(eta_p_121391, incr_67178);
        
        ((int64_t *) mem_139584.mem)[i_139365] = lifted_lambda_res_121392;
    }
    
    int64_t zm_lhs_121393 = add64(n_67177, psizze_67179);
    int64_t zs_lhs_121394 = sub64(zm_lhs_121393, (int64_t) 1);
    int64_t m_121398 = sdiv64(zs_lhs_121394, psizze_67179);
    bool loop_cond_121399 = slt64((int64_t) 0, m_121398);
    bool partitioned_gather_over_array_res_121400;
    int64_t partitioned_gather_over_array_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139593, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139596, &preVals_mem_139580, "preVals_mem_139580") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_67179, p_121407);
        int64_t min_arg1_121409 = add64(psizze_67179, lower_bound_121408);
        int64_t min_res_121410 = smin64(n_67177, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, n_67177);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) n_67177, "].", "-> #0  ftbasics.fut:49:18-45\n   #1  ftRelational.fut:60:5-50\n   #2  ftRelational.fut:59:1-60:50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139598, bytes_139583, "mem_139598")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139598.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139593.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_67176});
        if (memblock_alloc(ctx, &mem_139600, bytes_139583, "mem_139600")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < ni_67176; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139593.mem)[i_139369];
            int64_t eta_p_121427 = ((int64_t *) mem_param_139596.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            int64_t lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:52:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:50:30-54:6\n   #3  ftRelational.fut:60:5-50\n   #4  ftRelational.fut:59:1-60:50\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t tmp_131664 = ((int64_t *) ys_mem_139582.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((int64_t *) mem_139600.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121398);
        
        if (memblock_set(ctx, &mem_param_tmp_140322, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139600, "mem_139600") != 0)
            return 1;
        
        bool loop_while_tmp_140324 = loop_cond_121439;
        int64_t p_tmp_140327 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139593, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139596, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140324;
        p_121407 = p_tmp_140327;
    }
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139593, "mem_param_139593") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139611, &mem_param_139596, "mem_param_139596") != 0)
        return 1;
    partitioned_gather_over_array_res_121400 = loop_while_121404;
    partitioned_gather_over_array_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139614, bytes_139583, "mem_139614")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139611.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_67176});
    if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139614, "mem_139614") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140614, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139596, "mem_param_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139593, "mem_param_139593") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_short(struct futhark_context *ctx, struct memblock *mem_out_p_140615, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t niz2084U_64686, int64_t dz2083U_64687, int64_t incr_64688, int64_t psizze_64689)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * niz2084U_64686;
    bool zzero_121394 = psizze_64689 == (int64_t) 0;
    bool nonzzero_121395 = !zzero_121394;
    bool nonzzero_cert_121396;
    
    if (!nonzzero_121395) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftRelational.fut:42:5-41\n   #2  ftRelational.fut:41:1-42:41\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = (int64_t) 2 * niz2084U_64686;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < niz2084U_64686; i_139365++) {
        int64_t eta_p_121390 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121391 = sub64(eta_p_121390, incr_64688);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121391;
    }
    
    int64_t zm_lhs_121392 = add64(dz2083U_64687, psizze_64689);
    int64_t zs_lhs_121393 = sub64(zm_lhs_121392, (int64_t) 1);
    int64_t m_121397 = sdiv64(zs_lhs_121393, psizze_64689);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < niz2084U_64686; nest_i_140322++) {
        ((int16_t *) mem_139591.mem)[nest_i_140322] = (int16_t) 0;
    }
    
    bool loop_cond_121399 = slt64((int64_t) 0, m_121397);
    bool partitioned_gather_res_121400;
    int64_t partitioned_gather_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_64689, p_121407);
        int64_t min_arg1_121409 = add64(psizze_64689, lower_bound_121408);
        int64_t min_res_121410 = smin64(dz2083U_64687, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, dz2083U_64687);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) dz2083U_64687, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftRelational.fut:42:5-41\n   #2  ftRelational.fut:41:1-42:41\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_64686});
        if (memblock_alloc(ctx, &mem_139601, bytes_139590, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < niz2084U_64686; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139594.mem)[i_139369];
            int16_t eta_p_121427 = ((int16_t *) mem_param_139597.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            int16_t lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftRelational.fut:42:5-41\n   #4  ftRelational.fut:41:1-42:41\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int16_t tmp_131664 = ((int16_t *) ys_mem_139581.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((int16_t *) mem_139601.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121397);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121439;
        int64_t p_tmp_140328 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140325;
        p_121407 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121400 = loop_while_121404;
    partitioned_gather_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139590, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {niz2084U_64686});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140615, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_gather_payloads_short_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140616, struct memblock preVals_mem_139580, struct memblock is_mem_139581, struct memblock ys_mem_139582, int64_t ni_66574, int64_t n_66575, int64_t incr_66576, int64_t psizze_66577)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_param_tmp_140322;
    
    mem_param_tmp_140322.references = NULL;
    
    struct memblock mem_139600;
    
    mem_139600.references = NULL;
    
    struct memblock mem_139598;
    
    mem_139598.references = NULL;
    
    struct memblock mem_param_139596;
    
    mem_param_139596.references = NULL;
    
    struct memblock mem_param_139593;
    
    mem_param_139593.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139583 = (int64_t) 8 * ni_66574;
    bool zzero_121395 = psizze_66577 == (int64_t) 0;
    bool nonzzero_121396 = !zzero_121395;
    bool nonzzero_cert_121397;
    
    if (!nonzzero_121396) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:43:22-28\n   #1  ftRelational.fut:56:5-50\n   #2  ftRelational.fut:55:1-56:50\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139613 = (int64_t) 2 * ni_66574;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < ni_66574; i_139365++) {
        int64_t eta_p_121391 = ((int64_t *) is_mem_139581.mem)[i_139365];
        int64_t lifted_lambda_res_121392 = sub64(eta_p_121391, incr_66576);
        
        ((int64_t *) mem_139584.mem)[i_139365] = lifted_lambda_res_121392;
    }
    
    int64_t zm_lhs_121393 = add64(n_66575, psizze_66577);
    int64_t zs_lhs_121394 = sub64(zm_lhs_121393, (int64_t) 1);
    int64_t m_121398 = sdiv64(zs_lhs_121394, psizze_66577);
    bool loop_cond_121399 = slt64((int64_t) 0, m_121398);
    bool partitioned_gather_over_array_res_121400;
    int64_t partitioned_gather_over_array_res_121403;
    bool loop_while_121404;
    int64_t p_121407;
    
    if (memblock_set(ctx, &mem_param_139593, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139596, &preVals_mem_139580, "preVals_mem_139580") != 0)
        return 1;
    loop_while_121404 = loop_cond_121399;
    p_121407 = (int64_t) 0;
    while (loop_while_121404) {
        int64_t lower_bound_121408 = mul64(psizze_66577, p_121407);
        int64_t min_arg1_121409 = add64(psizze_66577, lower_bound_121408);
        int64_t min_res_121410 = smin64(n_66575, min_arg1_121409);
        int64_t j_m_i_121411 = sub64(min_res_121410, lower_bound_121408);
        bool empty_slice_121412 = j_m_i_121411 == (int64_t) 0;
        int64_t m_121413 = sub64(j_m_i_121411, (int64_t) 1);
        int64_t i_p_m_t_s_121414 = add64(lower_bound_121408, m_121413);
        bool zzero_leq_i_p_m_t_s_121415 = sle64((int64_t) 0, i_p_m_t_s_121414);
        bool i_p_m_t_s_leq_w_121416 = slt64(i_p_m_t_s_121414, n_66575);
        bool zzero_lte_i_121417 = sle64((int64_t) 0, lower_bound_121408);
        bool i_lte_j_121418 = sle64(lower_bound_121408, min_res_121410);
        bool y_121419 = i_p_m_t_s_leq_w_121416 && zzero_lte_i_121417;
        bool y_121420 = zzero_leq_i_p_m_t_s_121415 && y_121419;
        bool forwards_ok_121421 = i_lte_j_121418 && y_121420;
        bool ok_or_empty_121422 = empty_slice_121412 || forwards_ok_121421;
        bool index_certs_121423;
        
        if (!ok_or_empty_121422) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121408, ":", (long long) min_res_121410, "] out of bounds for array of shape [", (long long) n_66575, "].", "-> #0  ftbasics.fut:49:18-45\n   #1  ftRelational.fut:56:5-50\n   #2  ftRelational.fut:55:1-56:50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139598, bytes_139583, "mem_139598")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139598.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139593.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_66574});
        if (memblock_alloc(ctx, &mem_139600, bytes_139613, "mem_139600")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < ni_66574; i_139369++) {
            int64_t eta_p_121426 = ((int64_t *) mem_param_139593.mem)[i_139369];
            int16_t eta_p_121427 = ((int16_t *) mem_param_139596.mem)[i_139369];
            bool cond_121428 = sle64(lower_bound_121408, eta_p_121426);
            bool cond_t_res_121429 = slt64(eta_p_121426, min_res_121410);
            bool x_121430 = cond_121428 && cond_t_res_121429;
            int16_t lifted_lambda_res_121431;
            
            if (x_121430) {
                int64_t tmp_131659 = sub64(eta_p_121426, lower_bound_121408);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121411);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121411, "].", "-> #0  ftbasics.fut:52:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:50:30-54:6\n   #3  ftRelational.fut:56:5-50\n   #4  ftRelational.fut:55:1-56:50\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int16_t tmp_131664 = ((int16_t *) ys_mem_139582.mem)[eta_p_121426];
                
                lifted_lambda_res_121431 = tmp_131664;
            } else {
                lifted_lambda_res_121431 = eta_p_121427;
            }
            ((int16_t *) mem_139600.mem)[i_139369] = lifted_lambda_res_121431;
        }
        
        int64_t tmp_121438 = add64((int64_t) 1, p_121407);
        bool loop_cond_121439 = slt64(tmp_121438, m_121398);
        
        if (memblock_set(ctx, &mem_param_tmp_140322, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139600, "mem_139600") != 0)
            return 1;
        
        bool loop_while_tmp_140324 = loop_cond_121439;
        int64_t p_tmp_140327 = tmp_121438;
        
        if (memblock_set(ctx, &mem_param_139593, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139596, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        loop_while_121404 = loop_while_tmp_140324;
        p_121407 = p_tmp_140327;
    }
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139593, "mem_param_139593") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139611, &mem_param_139596, "mem_param_139596") != 0)
        return 1;
    partitioned_gather_over_array_res_121400 = loop_while_121404;
    partitioned_gather_over_array_res_121403 = p_121407;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139614, bytes_139613, "mem_139614")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139611.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {ni_66574});
    if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139614, "mem_139614") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140616, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140322, "mem_param_tmp_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139600, "mem_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139598, "mem_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139596, "mem_param_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139593, "mem_param_139593") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_double(struct futhark_context *ctx, struct memblock *mem_out_p_140617, struct memblock *mem_out_p_140618, struct memblock *mem_out_p_140619, int64_t *out_prim_out_140620, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_111847, int64_t nS_111848, int64_t offset_R_111851, int64_t offset_S_111852, int64_t partitionSizze_111853, int64_t scatter_psizze_111854)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139648_cached_sizze_140621 = 0;
    unsigned char *mem_139648 = NULL;
    int64_t mem_139650_cached_sizze_140622 = 0;
    unsigned char *mem_139650 = NULL;
    int64_t mem_139664_cached_sizze_140623 = 0;
    unsigned char *mem_139664 = NULL;
    int64_t mem_139672_cached_sizze_140624 = 0;
    unsigned char *mem_139672 = NULL;
    int64_t mem_139674_cached_sizze_140625 = 0;
    unsigned char *mem_139674 = NULL;
    int64_t mem_139676_cached_sizze_140626 = 0;
    unsigned char *mem_139676 = NULL;
    int64_t mem_139678_cached_sizze_140627 = 0;
    unsigned char *mem_139678 = NULL;
    int64_t mem_139680_cached_sizze_140628 = 0;
    unsigned char *mem_139680 = NULL;
    int64_t mem_139682_cached_sizze_140629 = 0;
    unsigned char *mem_139682 = NULL;
    int64_t mem_139684_cached_sizze_140630 = 0;
    unsigned char *mem_139684 = NULL;
    int64_t mem_139728_cached_sizze_140631 = 0;
    unsigned char *mem_139728 = NULL;
    int64_t mem_139751_cached_sizze_140632 = 0;
    unsigned char *mem_139751 = NULL;
    int64_t mem_139753_cached_sizze_140633 = 0;
    unsigned char *mem_139753 = NULL;
    int64_t mem_139755_cached_sizze_140634 = 0;
    unsigned char *mem_139755 = NULL;
    int64_t mem_139784_cached_sizze_140635 = 0;
    unsigned char *mem_139784 = NULL;
    int64_t mem_139786_cached_sizze_140636 = 0;
    unsigned char *mem_139786 = NULL;
    int64_t mem_139809_cached_sizze_140637 = 0;
    unsigned char *mem_139809 = NULL;
    int64_t mem_139811_cached_sizze_140638 = 0;
    unsigned char *mem_139811 = NULL;
    int64_t mem_139813_cached_sizze_140639 = 0;
    unsigned char *mem_139813 = NULL;
    struct memblock mem_139840;
    
    mem_139840.references = NULL;
    
    struct memblock mem_139838;
    
    mem_139838.references = NULL;
    
    struct memblock mem_139836;
    
    mem_139836.references = NULL;
    
    struct memblock mem_param_tmp_140385;
    
    mem_param_tmp_140385.references = NULL;
    
    struct memblock mem_param_tmp_140384;
    
    mem_param_tmp_140384.references = NULL;
    
    struct memblock mem_param_tmp_140383;
    
    mem_param_tmp_140383.references = NULL;
    
    struct memblock mem_139825;
    
    mem_139825.references = NULL;
    
    struct memblock mem_139823;
    
    mem_139823.references = NULL;
    
    struct memblock mem_139821;
    
    mem_139821.references = NULL;
    
    struct memblock mem_param_139807;
    
    mem_param_139807.references = NULL;
    
    struct memblock mem_param_139804;
    
    mem_param_139804.references = NULL;
    
    struct memblock mem_param_139801;
    
    mem_param_139801.references = NULL;
    
    struct memblock ext_mem_139832;
    
    ext_mem_139832.references = NULL;
    
    struct memblock ext_mem_139833;
    
    ext_mem_139833.references = NULL;
    
    struct memblock ext_mem_139834;
    
    ext_mem_139834.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139738;
    
    mem_139738.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_139640;
    
    mem_139640.references = NULL;
    
    struct memblock mem_139638;
    
    mem_139638.references = NULL;
    
    struct memblock mem_param_tmp_140336;
    
    mem_param_tmp_140336.references = NULL;
    
    struct memblock mem_param_tmp_140335;
    
    mem_param_tmp_140335.references = NULL;
    
    struct memblock mem_139606;
    
    mem_139606.references = NULL;
    
    struct memblock mem_139604;
    
    mem_139604.references = NULL;
    
    struct memblock ext_mem_139621;
    
    ext_mem_139621.references = NULL;
    
    struct memblock ext_mem_139624;
    
    ext_mem_139624.references = NULL;
    
    struct memblock ext_mem_139627;
    
    ext_mem_139627.references = NULL;
    
    struct memblock ext_mem_139630;
    
    ext_mem_139630.references = NULL;
    
    struct memblock mem_param_139602;
    
    mem_param_139602.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139635;
    
    ext_mem_139635.references = NULL;
    
    struct memblock ext_mem_139636;
    
    ext_mem_139636.references = NULL;
    
    struct memblock mem_139596;
    
    mem_139596.references = NULL;
    
    struct memblock mem_139594;
    
    mem_139594.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock ext_mem_139645;
    
    ext_mem_139645.references = NULL;
    
    struct memblock ext_mem_139646;
    
    ext_mem_139646.references = NULL;
    
    struct memblock mem_139586;
    
    mem_139586.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock ext_mem_139582;
    
    ext_mem_139582.references = NULL;
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140323;
    int64_t zm_lhs_123919 = add64(nR_111847, partitionSizze_111853);
    int64_t zs_lhs_123920 = sub64(zm_lhs_123919, (int64_t) 1);
    bool zzero_123921 = partitionSizze_111853 == (int64_t) 0;
    bool nonzzero_123922 = !zzero_123921;
    bool nonzzero_cert_123923;
    
    if (!nonzzero_123922) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftSMJ.fut:276:43-57\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t numIter_R_123924 = sdiv64(zs_lhs_123920, partitionSizze_111853);
    int64_t zm_lhs_123925 = add64(nS_111848, partitionSizze_111853);
    int64_t zs_lhs_123926 = sub64(zm_lhs_123925, (int64_t) 1);
    int64_t numIter_S_123927 = sdiv64(zs_lhs_123926, partitionSizze_111853);
    
    if (futrts_indicesWithIncrement_11449(ctx, &ext_mem_139582, tR_mem_139580, nR_111847, offset_R_111851) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_139583 = (int64_t) 8 * nR_111847;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140324 = 0; nest_i_140324 < nR_111847; nest_i_140324++) {
        ((int64_t *) mem_139584.mem)[nest_i_140324] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139586, bytes_139583, "mem_139586")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140325 = 0; nest_i_140325 < nR_111847; nest_i_140325++) {
        ((int64_t *) mem_139586.mem)[nest_i_140325] = (int64_t) 0;
    }
    
    bool loop_cond_123931 = slt64((int64_t) 0, numIter_R_123924);
    bool defunc_0_mergeJoin_res_123932;
    int64_t defunc_0_mergeJoin_res_123933;
    int64_t defunc_0_mergeJoin_res_123936;
    bool loop_while_123937;
    int64_t iter_123938;
    int64_t first_relevant_in_S_123941;
    
    if (memblock_set(ctx, &mem_param_139589, &mem_139586, "mem_139586") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &mem_139584, "mem_139584") != 0)
        return 1;
    loop_while_123937 = loop_cond_123931;
    iter_123938 = (int64_t) 0;
    first_relevant_in_S_123941 = (int64_t) 0;
    while (loop_while_123937) {
        int64_t tR_start_123942 = mul64(partitionSizze_111853, iter_123938);
        int64_t min_arg1_123943 = add64(partitionSizze_111853, tR_start_123942);
        int64_t min_res_123944 = smin64(nR_111847, min_arg1_123943);
        int64_t dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 = sub64(min_res_123944, tR_start_123942);
        bool empty_slice_123946 = dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 == (int64_t) 0;
        int64_t m_123947 = sub64(dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, (int64_t) 1);
        int64_t i_p_m_t_s_123948 = add64(tR_start_123942, m_123947);
        bool zzero_leq_i_p_m_t_s_123949 = sle64((int64_t) 0, i_p_m_t_s_123948);
        bool i_p_m_t_s_leq_w_123950 = slt64(i_p_m_t_s_123948, nR_111847);
        bool zzero_lte_i_123951 = sle64((int64_t) 0, tR_start_123942);
        bool i_lte_j_123952 = sle64(tR_start_123942, min_res_123944);
        bool y_123953 = i_p_m_t_s_leq_w_123950 && zzero_lte_i_123951;
        bool y_123954 = zzero_leq_i_p_m_t_s_123949 && y_123953;
        bool forwards_ok_123955 = i_lte_j_123952 && y_123954;
        bool ok_or_empty_123956 = empty_slice_123946 || forwards_ok_123955;
        bool index_certs_123957;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_111847, "].", "-> #0  ftSMJ.fut:283:17-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139593 = (int64_t) 8 * dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945;
        bool cond_123961 = slt64(first_relevant_in_S_123941, numIter_S_123927);
        bool y_123962 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool loop_not_taken_123963 = !cond_123961;
        bool protect_assert_disj_123964 = y_123962 || loop_not_taken_123963;
        bool index_certs_123965;
        
        if (!protect_assert_disj_123964) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:298:26-34\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool x_123968 = sle64((int64_t) 0, m_123947);
        bool y_123969 = slt64(m_123947, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool bounds_check_123970 = x_123968 && y_123969;
        bool protect_assert_disj_123971 = loop_not_taken_123963 || bounds_check_123970;
        bool index_certs_123972;
        
        if (!protect_assert_disj_123971) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:299:42-61\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_124186;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_111847, "].", "-> #0  ftSMJ.fut:199:15-63\n   #1  ftSMJ.fut:309:20-64\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139594, bytes_139593, "mem_139594")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140333 = 0; nest_i_140333 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140333++) {
            ((int64_t *) mem_139594.mem)[nest_i_140333] = (int64_t) -1;
        }
        if (memblock_alloc(ctx, &mem_139596, bytes_139593, "mem_139596")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140334 = 0; nest_i_140334 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140334++) {
            ((int64_t *) mem_139596.mem)[nest_i_140334] = (int64_t) 0;
        }
        
        double gt_lhs_123966;
        
        if (cond_123961) {
            double x_132197 = ((double *) tR_mem_139580.mem)[tR_start_123942];
            
            gt_lhs_123966 = x_132197;
        } else {
            gt_lhs_123966 = 0.0;
        }
        
        double gt_rhs_123973;
        
        if (cond_123961) {
            double x_132198 = ((double *) tR_mem_139580.mem)[i_p_m_t_s_123948];
            
            gt_rhs_123973 = x_132198;
        } else {
            gt_rhs_123973 = 0.0;
        }
        
        int64_t ext_139634;
        int64_t ext_139633;
        int64_t ext_139632;
        int64_t ext_139631;
        bool loopres_123975;
        int64_t loopres_123976;
        int64_t loopres_123979;
        bool loop_while_123980;
        int64_t s_iter_123981;
        int64_t minRelevant_123984;
        int64_t ctx_param_ext_139597;
        int64_t ctx_param_ext_139598;
        int64_t ctx_param_ext_139600;
        int64_t ctx_param_ext_139601;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139602, &mem_139594, "mem_139594") != 0)
            return 1;
        ctx_param_ext_139597 = (int64_t) 0;
        ctx_param_ext_139598 = (int64_t) 1;
        ctx_param_ext_139600 = (int64_t) 0;
        ctx_param_ext_139601 = (int64_t) 1;
        loop_while_123980 = cond_123961;
        s_iter_123981 = first_relevant_in_S_123941;
        minRelevant_123984 = first_relevant_in_S_123941;
        while (loop_while_123980) {
            int64_t tS_start_123985 = mul64(partitionSizze_111853, s_iter_123981);
            int64_t min_arg1_123986 = add64(partitionSizze_111853, tS_start_123985);
            int64_t min_res_123987 = smin64(nS_111848, min_arg1_123986);
            int64_t dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 = sub64(min_res_123987, tS_start_123985);
            bool empty_slice_123989 = dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 == (int64_t) 0;
            int64_t m_123990 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 1);
            int64_t i_p_m_t_s_123991 = add64(tS_start_123985, m_123990);
            bool zzero_leq_i_p_m_t_s_123992 = sle64((int64_t) 0, i_p_m_t_s_123991);
            bool i_p_m_t_s_leq_w_123993 = slt64(i_p_m_t_s_123991, nS_111848);
            bool zzero_lte_i_123994 = sle64((int64_t) 0, tS_start_123985);
            bool i_lte_j_123995 = sle64(tS_start_123985, min_res_123987);
            bool y_123996 = i_p_m_t_s_leq_w_123993 && zzero_lte_i_123994;
            bool y_123997 = zzero_leq_i_p_m_t_s_123992 && y_123996;
            bool forwards_ok_123998 = i_lte_j_123995 && y_123997;
            bool ok_or_empty_123999 = empty_slice_123989 || forwards_ok_123998;
            bool index_certs_124000;
            
            if (!ok_or_empty_123999) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tS_start_123985, ":", (long long) min_res_123987, "] out of bounds for array of shape [", (long long) nS_111848, "].", "-> #0  ftSMJ.fut:296:19-38\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_124001 = sle64((int64_t) 0, m_123990);
            bool y_124002 = slt64(m_123990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool bounds_check_124003 = x_124001 && y_124002;
            bool index_certs_124004;
            
            if (!bounds_check_124003) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:298:40-59\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_124007 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool index_certs_124008;
            
            if (!y_124007) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:299:28-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            double gt_rhs_124005 = ((double *) tS_mem_139581.mem)[i_p_m_t_s_123991];
            bool defunc_0_gt_res_124006 = gt_rhs_124005 < gt_lhs_123966;
            double gt_lhs_124009 = ((double *) tS_mem_139581.mem)[tS_start_123985];
            bool defunc_0_gt_res_124010 = gt_rhs_123973 < gt_lhs_124009;
            bool thisStillRel_124011 = !defunc_0_gt_res_124010;
            int64_t ext_139623;
            
            if (defunc_0_gt_res_124010) {
                ext_139623 = ctx_param_ext_139597;
            } else {
                ext_139623 = (int64_t) 0;
            }
            
            int64_t ext_139622;
            
            if (defunc_0_gt_res_124010) {
                ext_139622 = ctx_param_ext_139598;
            } else {
                ext_139622 = (int64_t) 1;
            }
            
            int64_t ext_139620;
            
            if (defunc_0_gt_res_124010) {
                ext_139620 = ctx_param_ext_139600;
            } else {
                ext_139620 = (int64_t) 0;
            }
            
            int64_t ext_139619;
            
            if (defunc_0_gt_res_124010) {
                ext_139619 = ctx_param_ext_139601;
            } else {
                ext_139619 = (int64_t) 1;
            }
            
            int64_t ext_139629;
            
            if (defunc_0_gt_res_124006) {
                ext_139629 = ctx_param_ext_139597;
            } else {
                ext_139629 = ext_139623;
            }
            
            int64_t ext_139628;
            
            if (defunc_0_gt_res_124006) {
                ext_139628 = ctx_param_ext_139598;
            } else {
                ext_139628 = ext_139622;
            }
            
            int64_t ext_139626;
            
            if (defunc_0_gt_res_124006) {
                ext_139626 = ctx_param_ext_139600;
            } else {
                ext_139626 = ext_139620;
            }
            
            int64_t ext_139625;
            
            if (defunc_0_gt_res_124006) {
                ext_139625 = ctx_param_ext_139601;
            } else {
                ext_139625 = ext_139619;
            }
            
            int64_t loopres_124012;
            bool loopres_124015;
            int64_t loopres_124016;
            
            if (defunc_0_gt_res_124006) {
                int64_t tmp_132199 = add64((int64_t) 1, s_iter_123981);
                
                if (memblock_set(ctx, &ext_mem_139630, &mem_param_139599, "mem_param_139599") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &mem_param_139602, "mem_param_139602") != 0)
                    return 1;
                loopres_124012 = tmp_132199;
                loopres_124015 = 1;
                loopres_124016 = tmp_132199;
            } else {
                int64_t loopres_f_res_124018;
                bool loopres_f_res_124021;
                
                if (defunc_0_gt_res_124010) {
                    if (memblock_set(ctx, &ext_mem_139624, &mem_param_139599, "mem_param_139599") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_param_139602, "mem_param_139602") != 0)
                        return 1;
                    loopres_f_res_124018 = s_iter_123981;
                    loopres_f_res_124021 = thisStillRel_124011;
                } else {
                    bool index_certs_124022;
                    
                    if (!bounds_check_123970) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:303:50-69\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double gt_rhs_124023 = ((double *) tR_mem_139580.mem)[i_p_m_t_s_123948];
                    bool defunc_0_gt_res_124024 = gt_rhs_124023 < gt_rhs_124005;
                    bool nextRel_124025 = !defunc_0_gt_res_124024;
                    int64_t find_joinTuples_arg3_124026 = add64(offset_S_111852, tS_start_123985);
                    int64_t max_arg1_124027 = sdiv64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 2);
                    int64_t max_res_124028 = smax64((int64_t) 1, max_arg1_124027);
                    bool loop_cond_124029 = slt64((int64_t) 0, max_res_124028);
                    
                    if (memblock_alloc(ctx, &mem_139604, bytes_139593, "mem_139604")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_139606, bytes_139593, "mem_139606")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; i_139367++) {
                        int64_t eta_p_131913 = ((int64_t *) mem_param_139599.mem)[ctx_param_ext_139597 + i_139367 * ctx_param_ext_139598];
                        int64_t slice_139554 = tR_start_123942 + i_139367;
                        double eta_p_131914 = ((double *) tR_mem_139580.mem)[slice_139554];
                        int64_t eta_p_131915 = ((int64_t *) mem_param_139602.mem)[ctx_param_ext_139600 + i_139367 * ctx_param_ext_139601];
                        bool defunc_0_f_res_131916;
                        int64_t defunc_0_f_res_131917;
                        int64_t defunc_0_f_res_131918;
                        bool loop_while_131919;
                        int64_t first_match_131920;
                        int64_t step_131921;
                        
                        loop_while_131919 = loop_cond_124029;
                        first_match_131920 = (int64_t) 0;
                        step_131921 = max_res_124028;
                        while (loop_while_131919) {
                            bool x_131922 = sle64((int64_t) 0, first_match_131920);
                            bool y_131923 = slt64(first_match_131920, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                            bool bounds_check_131924 = x_131922 && y_131923;
                            bool index_certs_131925;
                            
                            if (!bounds_check_131924) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) first_match_131920, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:219:20-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131926 = tS_start_123985 + first_match_131920;
                            double sv_131927 = ((double *) tS_mem_139581.mem)[slice_131926];
                            bool cond_131928 = first_match_131920 == (int64_t) 0;
                            double pv_131929;
                            
                            if (cond_131928) {
                                pv_131929 = sv_131927;
                            } else {
                                int64_t tmp_131930 = sub64(first_match_131920, (int64_t) 1);
                                bool x_131931 = sle64((int64_t) 0, tmp_131930);
                                bool y_131932 = slt64(tmp_131930, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131933 = x_131931 && y_131932;
                                bool index_certs_131934;
                                
                                if (!bounds_check_131933) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131930, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:220:51-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131935 = tS_start_123985 + tmp_131930;
                                double pv_f_res_131936 = ((double *) tS_mem_139581.mem)[slice_131935];
                                
                                pv_131929 = pv_f_res_131936;
                            }
                            
                            bool cond_131937 = first_match_131920 == m_123990;
                            double nv_131938;
                            
                            if (cond_131937) {
                                nv_131938 = sv_131927;
                            } else {
                                int64_t tmp_131939 = add64((int64_t) 1, first_match_131920);
                                bool x_131940 = sle64((int64_t) 0, tmp_131939);
                                bool y_131941 = slt64(tmp_131939, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131942 = x_131940 && y_131941;
                                bool index_certs_131943;
                                
                                if (!bounds_check_131942) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131939, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:221:54-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131944 = tS_start_123985 + tmp_131939;
                                double nv_f_res_131945 = ((double *) tS_mem_139581.mem)[slice_131944];
                                
                                nv_131938 = nv_f_res_131945;
                            }
                            
                            bool defunc_0_eq_res_131946 = sv_131927 == eta_p_131914;
                            bool defunc_0_gt_res_131947 = pv_131929 < eta_p_131914;
                            bool x_131948 = !cond_131928;
                            bool y_131949 = defunc_0_gt_res_131947 && x_131948;
                            bool cond_t_res_131950 = cond_131928 || y_131949;
                            bool x_131951 = defunc_0_eq_res_131946 && cond_t_res_131950;
                            int64_t loopres_131952;
                            int64_t loopres_131953;
                            
                            if (x_131951) {
                                loopres_131952 = first_match_131920;
                                loopres_131953 = (int64_t) 0;
                            } else {
                                int64_t loopres_f_res_131954;
                                int64_t loopres_f_res_131955;
                                
                                if (defunc_0_eq_res_131946) {
                                    int64_t tmp_132200 = sub64(first_match_131920, step_131921);
                                    int64_t max_arg1_132201 = sdiv64(step_131921, (int64_t) 2);
                                    int64_t max_res_132202 = smax64((int64_t) 1, max_arg1_132201);
                                    
                                    loopres_f_res_131954 = tmp_132200;
                                    loopres_f_res_131955 = max_res_132202;
                                } else {
                                    bool defunc_0_gt_res_131959 = eta_p_131914 < sv_131927;
                                    int64_t loopres_f_res_f_res_131960;
                                    int64_t loopres_f_res_f_res_131961;
                                    
                                    if (defunc_0_gt_res_131959) {
                                        int64_t loopres_f_res_f_res_t_res_132203;
                                        int64_t loopres_f_res_f_res_t_res_132204;
                                        
                                        if (cond_t_res_131950) {
                                            loopres_f_res_f_res_t_res_132203 = (int64_t) -1;
                                            loopres_f_res_f_res_t_res_132204 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_132205 = sub64(first_match_131920, step_131921);
                                            int64_t max_arg1_132206 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_132207 = smax64((int64_t) 1, max_arg1_132206);
                                            
                                            loopres_f_res_f_res_t_res_132203 = tmp_132205;
                                            loopres_f_res_f_res_t_res_132204 = max_res_132207;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_t_res_132203;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_t_res_132204;
                                    } else {
                                        bool defunc_0_gt_res_131969 = eta_p_131914 < nv_131938;
                                        bool x_131970 = !cond_131937;
                                        bool y_131971 = defunc_0_gt_res_131969 && x_131970;
                                        bool cond_131972 = cond_131937 || y_131971;
                                        int64_t loopres_f_res_f_res_f_res_131973;
                                        int64_t loopres_f_res_f_res_f_res_131974;
                                        
                                        if (cond_131972) {
                                            loopres_f_res_f_res_f_res_131973 = (int64_t) -1;
                                            loopres_f_res_f_res_f_res_131974 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_131975 = add64(first_match_131920, step_131921);
                                            int64_t max_arg1_131976 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_131977 = smax64((int64_t) 1, max_arg1_131976);
                                            
                                            loopres_f_res_f_res_f_res_131973 = tmp_131975;
                                            loopres_f_res_f_res_f_res_131974 = max_res_131977;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_f_res_131973;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_f_res_131974;
                                    }
                                    loopres_f_res_131954 = loopres_f_res_f_res_131960;
                                    loopres_f_res_131955 = loopres_f_res_f_res_131961;
                                }
                                loopres_131952 = loopres_f_res_131954;
                                loopres_131953 = loopres_f_res_131955;
                            }
                            
                            bool loop_cond_131978 = slt64((int64_t) 0, loopres_131953);
                            bool loop_while_tmp_140348 = loop_cond_131978;
                            int64_t first_match_tmp_140349 = loopres_131952;
                            int64_t step_tmp_140350 = loopres_131953;
                            
                            loop_while_131919 = loop_while_tmp_140348;
                            first_match_131920 = first_match_tmp_140349;
                            step_131921 = step_tmp_140350;
                        }
                        defunc_0_f_res_131916 = loop_while_131919;
                        defunc_0_f_res_131917 = first_match_131920;
                        defunc_0_f_res_131918 = step_131921;
                        
                        int64_t zs_lhs_131979 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, defunc_0_f_res_131917);
                        int64_t max_arg1_131980 = sdiv64(zs_lhs_131979, (int64_t) 2);
                        int64_t max_res_131981 = smax64((int64_t) 1, max_arg1_131980);
                        bool cond_131982 = defunc_0_f_res_131917 == (int64_t) -1;
                        int64_t defunc_0_f_res_131983;
                        
                        if (cond_131982) {
                            defunc_0_f_res_131983 = (int64_t) -1;
                        } else {
                            bool loop_cond_131985 = slt64((int64_t) 0, max_res_131981);
                            bool defunc_0_f_res_f_res_131986;
                            int64_t defunc_0_f_res_f_res_131987;
                            int64_t defunc_0_f_res_f_res_131988;
                            bool loop_while_131989;
                            int64_t last_match_131990;
                            int64_t step_131991;
                            
                            loop_while_131989 = loop_cond_131985;
                            last_match_131990 = m_123990;
                            step_131991 = max_res_131981;
                            while (loop_while_131989) {
                                bool x_131992 = sle64((int64_t) 0, last_match_131990);
                                bool y_131993 = slt64(last_match_131990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131994 = x_131992 && y_131993;
                                bool index_certs_131995;
                                
                                if (!bounds_check_131994) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) last_match_131990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:240:20-34\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131996 = tS_start_123985 + last_match_131990;
                                double sv_131997 = ((double *) tS_mem_139581.mem)[slice_131996];
                                bool cond_131998 = last_match_131990 == defunc_0_f_res_131917;
                                double pv_131999;
                                
                                if (cond_131998) {
                                    pv_131999 = sv_131997;
                                } else {
                                    int64_t tmp_132000 = sub64(last_match_131990, (int64_t) 1);
                                    bool x_132001 = sle64((int64_t) 0, tmp_132000);
                                    bool y_132002 = slt64(tmp_132000, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132003 = x_132001 && y_132002;
                                    bool index_certs_132004;
                                    
                                    if (!bounds_check_132003) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132000, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:241:52-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132005 = tS_start_123985 + tmp_132000;
                                    double pv_f_res_132006 = ((double *) tS_mem_139581.mem)[slice_132005];
                                    
                                    pv_131999 = pv_f_res_132006;
                                }
                                
                                bool cond_132007 = last_match_131990 == m_123990;
                                double nv_132008;
                                
                                if (cond_132007) {
                                    nv_132008 = sv_131997;
                                } else {
                                    int64_t tmp_132009 = add64((int64_t) 1, last_match_131990);
                                    bool x_132010 = sle64((int64_t) 0, tmp_132009);
                                    bool y_132011 = slt64(tmp_132009, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132012 = x_132010 && y_132011;
                                    bool index_certs_132013;
                                    
                                    if (!bounds_check_132012) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132009, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:242:53-69\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132014 = tS_start_123985 + tmp_132009;
                                    double nv_f_res_132015 = ((double *) tS_mem_139581.mem)[slice_132014];
                                    
                                    nv_132008 = nv_f_res_132015;
                                }
                                
                                bool defunc_0_eq_res_132016 = sv_131997 == eta_p_131914;
                                bool defunc_0_gt_res_132017 = eta_p_131914 < nv_132008;
                                bool x_132018 = !cond_132007;
                                bool y_132019 = defunc_0_gt_res_132017 && x_132018;
                                bool cond_t_res_132020 = cond_132007 || y_132019;
                                bool x_132021 = defunc_0_eq_res_132016 && cond_t_res_132020;
                                int64_t loopres_132022;
                                int64_t loopres_132023;
                                
                                if (x_132021) {
                                    loopres_132022 = last_match_131990;
                                    loopres_132023 = (int64_t) 0;
                                } else {
                                    int64_t loopres_f_res_132024;
                                    int64_t loopres_f_res_132025;
                                    
                                    if (defunc_0_eq_res_132016) {
                                        int64_t tmp_132208 = add64(last_match_131990, step_131991);
                                        int64_t max_arg1_132209 = sdiv64(step_131991, (int64_t) 2);
                                        int64_t max_res_132210 = smax64((int64_t) 1, max_arg1_132209);
                                        
                                        loopres_f_res_132024 = tmp_132208;
                                        loopres_f_res_132025 = max_res_132210;
                                    } else {
                                        bool defunc_0_gt_res_132029 = eta_p_131914 < sv_131997;
                                        int64_t loopres_f_res_f_res_132030;
                                        int64_t loopres_f_res_f_res_132031;
                                        
                                        if (defunc_0_gt_res_132029) {
                                            bool defunc_0_gt_res_132211 = pv_131999 < eta_p_131914;
                                            bool x_132212 = !cond_131998;
                                            bool y_132213 = defunc_0_gt_res_132211 && x_132212;
                                            bool cond_132214 = cond_131998 || y_132213;
                                            int64_t loopres_f_res_f_res_t_res_132215;
                                            int64_t loopres_f_res_f_res_t_res_132216;
                                            
                                            if (cond_132214) {
                                                loopres_f_res_f_res_t_res_132215 = (int64_t) -1;
                                                loopres_f_res_f_res_t_res_132216 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132217 = sub64(last_match_131990, step_131991);
                                                int64_t max_arg1_132218 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132219 = smax64((int64_t) 1, max_arg1_132218);
                                                
                                                loopres_f_res_f_res_t_res_132215 = tmp_132217;
                                                loopres_f_res_f_res_t_res_132216 = max_res_132219;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_t_res_132215;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_t_res_132216;
                                        } else {
                                            int64_t loopres_f_res_f_res_f_res_132041;
                                            int64_t loopres_f_res_f_res_f_res_132042;
                                            
                                            if (cond_t_res_132020) {
                                                loopres_f_res_f_res_f_res_132041 = (int64_t) -1;
                                                loopres_f_res_f_res_f_res_132042 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132043 = add64(last_match_131990, step_131991);
                                                int64_t max_arg1_132044 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132045 = smax64((int64_t) 1, max_arg1_132044);
                                                
                                                loopres_f_res_f_res_f_res_132041 = tmp_132043;
                                                loopres_f_res_f_res_f_res_132042 = max_res_132045;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_f_res_132041;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_f_res_132042;
                                        }
                                        loopres_f_res_132024 = loopres_f_res_f_res_132030;
                                        loopres_f_res_132025 = loopres_f_res_f_res_132031;
                                    }
                                    loopres_132022 = loopres_f_res_132024;
                                    loopres_132023 = loopres_f_res_132025;
                                }
                                
                                bool loop_cond_132046 = slt64((int64_t) 0, loopres_132023);
                                bool loop_while_tmp_140351 = loop_cond_132046;
                                int64_t last_match_tmp_140352 = loopres_132022;
                                int64_t step_tmp_140353 = loopres_132023;
                                
                                loop_while_131989 = loop_while_tmp_140351;
                                last_match_131990 = last_match_tmp_140352;
                                step_131991 = step_tmp_140353;
                            }
                            defunc_0_f_res_f_res_131986 = loop_while_131989;
                            defunc_0_f_res_f_res_131987 = last_match_131990;
                            defunc_0_f_res_f_res_131988 = step_131991;
                            defunc_0_f_res_131983 = defunc_0_f_res_f_res_131987;
                        }
                        
                        bool cond_132047 = slt64(defunc_0_f_res_131983, (int64_t) 0);
                        int64_t cm_132048;
                        
                        if (cond_132047) {
                            cm_132048 = (int64_t) 0;
                        } else {
                            int64_t zp_lhs_132049 = sub64(defunc_0_f_res_131983, defunc_0_f_res_131917);
                            int64_t cm_f_res_132050 = add64((int64_t) 1, zp_lhs_132049);
                            
                            cm_132048 = cm_f_res_132050;
                        }
                        
                        bool cond_132053 = slt64(defunc_0_f_res_131917, (int64_t) 0);
                        int64_t lifted_lambda_res_132054;
                        
                        if (cond_132053) {
                            lifted_lambda_res_132054 = defunc_0_f_res_131917;
                        } else {
                            int64_t lifted_lambda_res_f_res_132055 = add64(find_joinTuples_arg3_124026, defunc_0_f_res_131917);
                            
                            lifted_lambda_res_132054 = lifted_lambda_res_f_res_132055;
                        }
                        
                        bool cond_132057 = slt64(eta_p_131915, (int64_t) 0);
                        int64_t lifted_lambda_res_132058;
                        
                        if (cond_132057) {
                            lifted_lambda_res_132058 = lifted_lambda_res_132054;
                        } else {
                            lifted_lambda_res_132058 = eta_p_131915;
                        }
                        
                        int64_t defunc_0_f_res_132061 = add64(eta_p_131913, cm_132048);
                        
                        ((int64_t *) mem_139604.mem)[i_139367] = defunc_0_f_res_132061;
                        ((int64_t *) mem_139606.mem)[i_139367] = lifted_lambda_res_132058;
                    }
                    
                    int64_t tmp_124182 = add64((int64_t) 1, s_iter_123981);
                    
                    if (memblock_set(ctx, &ext_mem_139624, &mem_139604, "mem_139604") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_139606, "mem_139606") != 0)
                        return 1;
                    loopres_f_res_124018 = tmp_124182;
                    loopres_f_res_124021 = nextRel_124025;
                }
                if (memblock_set(ctx, &ext_mem_139630, &ext_mem_139624, "ext_mem_139624") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &ext_mem_139621, "ext_mem_139621") != 0)
                    return 1;
                loopres_124012 = loopres_f_res_124018;
                loopres_124015 = loopres_f_res_124021;
                loopres_124016 = minRelevant_123984;
            }
            
            bool cond_124183 = slt64(loopres_124012, numIter_S_123927);
            bool x_124184 = loopres_124015 && cond_124183;
            
            if (memblock_set(ctx, &mem_param_tmp_140335, &ext_mem_139630, "ext_mem_139630") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140336, &ext_mem_139627, "ext_mem_139627") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_140337 = ext_139629;
            int64_t ctx_param_ext_tmp_140338 = ext_139628;
            int64_t ctx_param_ext_tmp_140339 = ext_139626;
            int64_t ctx_param_ext_tmp_140340 = ext_139625;
            bool loop_while_tmp_140341 = x_124184;
            int64_t s_iter_tmp_140342 = loopres_124012;
            int64_t minRelevant_tmp_140345 = loopres_124016;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139602, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
                return 1;
            ctx_param_ext_139597 = ctx_param_ext_tmp_140337;
            ctx_param_ext_139598 = ctx_param_ext_tmp_140338;
            ctx_param_ext_139600 = ctx_param_ext_tmp_140339;
            ctx_param_ext_139601 = ctx_param_ext_tmp_140340;
            loop_while_123980 = loop_while_tmp_140341;
            s_iter_123981 = s_iter_tmp_140342;
            minRelevant_123984 = minRelevant_tmp_140345;
        }
        if (memblock_set(ctx, &ext_mem_139636, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139635, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        ext_139634 = ctx_param_ext_139597;
        ext_139633 = ctx_param_ext_139598;
        ext_139632 = ctx_param_ext_139600;
        ext_139631 = ctx_param_ext_139601;
        loopres_123975 = loop_while_123980;
        loopres_123976 = s_iter_123981;
        loopres_123979 = minRelevant_123984;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139638, bytes_139583, "mem_139638")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139592.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_111847});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139635.mem, ext_139632, (int64_t []) {ext_139631}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139640, bytes_139583, "mem_139640")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_111847});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139636.mem, ext_139634, (int64_t []) {ext_139633}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        
        int64_t tmp_124190 = add64((int64_t) 1, iter_123938);
        bool loop_cond_124191 = slt64(tmp_124190, numIter_R_123924);
        
        if (memblock_set(ctx, &mem_param_tmp_140326, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &mem_139638, "mem_139638") != 0)
            return 1;
        
        bool loop_while_tmp_140328 = loop_cond_124191;
        int64_t iter_tmp_140329 = tmp_124190;
        int64_t first_relevant_in_S_tmp_140332 = loopres_123979;
        
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        loop_while_123937 = loop_while_tmp_140328;
        iter_123938 = iter_tmp_140329;
        first_relevant_in_S_123941 = first_relevant_in_S_tmp_140332;
    }
    if (memblock_set(ctx, &ext_mem_139646, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139645, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    defunc_0_mergeJoin_res_123932 = loop_while_123937;
    defunc_0_mergeJoin_res_123933 = iter_123938;
    defunc_0_mergeJoin_res_123936 = first_relevant_in_S_123941;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
        return 1;
    if (mem_139648_cached_sizze_140621 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139648, &mem_139648_cached_sizze_140621, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139650_cached_sizze_140622 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139650, &mem_139650_cached_sizze_140622, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139378;
    int64_t scanacc_139372 = (int64_t) 0;
    
    for (int64_t i_139375 = 0; i_139375 < nR_111847; i_139375++) {
        int64_t zg_lhs_131722 = ((int64_t *) ext_mem_139646.mem)[i_139375];
        bool lifted_lambda_res_131723 = slt64((int64_t) 0, zg_lhs_131722);
        int64_t defunc_0_f_res_131724 = btoi_bool_i64(lifted_lambda_res_131723);
        int64_t defunc_0_op_res_124201 = add64(defunc_0_f_res_131724, scanacc_139372);
        
        ((int64_t *) mem_139648)[i_139375] = defunc_0_op_res_124201;
        ((int64_t *) mem_139650)[i_139375] = defunc_0_f_res_131724;
        
        int64_t scanacc_tmp_140354 = defunc_0_op_res_124201;
        
        scanacc_139372 = scanacc_tmp_140354;
    }
    discard_139378 = scanacc_139372;
    
    bool cond_124202 = nR_111847 == (int64_t) 0;
    bool x_124203 = !cond_124202;
    int64_t tmp_124204 = sub64(nR_111847, (int64_t) 1);
    bool x_124205 = sle64((int64_t) 0, tmp_124204);
    bool y_124206 = slt64(tmp_124204, nR_111847);
    bool bounds_check_124207 = x_124205 && y_124206;
    bool protect_assert_disj_124208 = cond_124202 || bounds_check_124207;
    bool index_certs_124209;
    
    if (!protect_assert_disj_124208) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_124204, "] out of bounds for array of shape [", (long long) nR_111847, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124210;
    
    if (x_124203) {
        int64_t x_132222 = ((int64_t *) mem_139648)[tmp_124204];
        
        m_f_res_124210 = x_132222;
    } else {
        m_f_res_124210 = (int64_t) 0;
    }
    
    int64_t m_124212;
    
    if (cond_124202) {
        m_124212 = (int64_t) 0;
    } else {
        m_124212 = m_f_res_124210;
    }
    
    int64_t m_124222 = sub64(m_124212, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124224 = slt64(m_124222, nR_111847);
    bool zzero_leq_i_p_m_t_s_124223 = sle64((int64_t) 0, m_124222);
    bool y_124226 = zzero_leq_i_p_m_t_s_124223 && i_p_m_t_s_leq_w_124224;
    bool i_lte_j_124225 = sle64((int64_t) 0, m_124212);
    bool forwards_ok_124227 = i_lte_j_124225 && y_124226;
    bool eq_x_zz_124219 = (int64_t) 0 == m_f_res_124210;
    bool p_and_eq_x_y_124220 = x_124203 && eq_x_zz_124219;
    bool empty_slice_124221 = cond_124202 || p_and_eq_x_y_124220;
    bool ok_or_empty_124228 = empty_slice_124221 || forwards_ok_124227;
    bool index_certs_124229;
    
    if (!ok_or_empty_124228) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124212, "] out of bounds for array of shape [", (long long) nR_111847, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139663 = (int64_t) 8 * m_124212;
    
    if (mem_139664_cached_sizze_140623 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139664, &mem_139664_cached_sizze_140623, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140357 = 0; i_140357 < m_124212; i_140357++) {
        int64_t x_140358 = (int64_t) 0 + i_140357 * (int64_t) 1;
        
        ((int64_t *) mem_139664)[i_140357] = x_140358;
    }
    for (int64_t write_iter_139379 = 0; write_iter_139379 < nR_111847; write_iter_139379++) {
        int64_t write_iv_139381 = ((int64_t *) mem_139650)[write_iter_139379];
        int64_t write_iv_139382 = ((int64_t *) mem_139648)[write_iter_139379];
        bool cond_131712 = write_iv_139381 == (int64_t) 1;
        int64_t lifted_lambda_res_131713;
        
        if (cond_131712) {
            int64_t lifted_lambda_res_t_res_132223 = sub64(write_iv_139382, (int64_t) 1);
            
            lifted_lambda_res_131713 = lifted_lambda_res_t_res_132223;
        } else {
            lifted_lambda_res_131713 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131713) && slt64(lifted_lambda_res_131713, m_124212)) {
            ((int64_t *) mem_139664)[lifted_lambda_res_131713] = write_iter_139379;
        }
    }
    if (mem_139672_cached_sizze_140624 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139672, &mem_139672_cached_sizze_140624, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139674_cached_sizze_140625 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139674, &mem_139674_cached_sizze_140625, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139676_cached_sizze_140626 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139676, &mem_139676_cached_sizze_140626, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139678_cached_sizze_140627 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139678, &mem_139678_cached_sizze_140627, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139680_cached_sizze_140628 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139680, &mem_139680_cached_sizze_140628, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139682_cached_sizze_140629 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139682, &mem_139682_cached_sizze_140629, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139684_cached_sizze_140630 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139684, &mem_139684_cached_sizze_140630, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139409;
    int64_t discard_139410;
    int64_t scanacc_139392;
    int64_t scanacc_139393;
    
    scanacc_139392 = (int64_t) 0;
    scanacc_139393 = (int64_t) 0;
    for (int64_t i_139401 = 0; i_139401 < m_124212; i_139401++) {
        int64_t eta_p_131730 = ((int64_t *) mem_139664)[i_139401];
        bool x_131732 = sle64((int64_t) 0, eta_p_131730);
        bool y_131733 = slt64(eta_p_131730, nR_111847);
        bool bounds_check_131734 = x_131732 && y_131733;
        bool index_certs_131735;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_111847, "].", "-> #0  ftSMJ.fut:328:40-50\n   #1  ftRelational.fut:200:78-81\n   #2  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_131748;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_111847, "].", "-> #0  ftSMJ.fut:329:51-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:329:39-87\n   #3  ftSMJ.fut:373:7-374:73\n   #4  ftRelational.fut:200:78-81\n   #5  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_131736 = ((int64_t *) ext_mem_139646.mem)[eta_p_131730];
        bool lifted_lambda_res_131738 = slt64((int64_t) 1, lifted_lambda_res_131736);
        int64_t defunc_0_f_res_131739 = btoi_bool_i64(lifted_lambda_res_131738);
        double tmp_131749 = ((double *) tR_mem_139580.mem)[eta_p_131730];
        int64_t tmp_131750 = ((int64_t *) ext_mem_139582.mem)[eta_p_131730];
        int64_t tmp_131751 = ((int64_t *) ext_mem_139645.mem)[eta_p_131730];
        int64_t defunc_0_op_res_124345 = add64(defunc_0_f_res_131739, scanacc_139392);
        int64_t lifted_lambda_res_124252 = add64(lifted_lambda_res_131736, scanacc_139393);
        
        ((int64_t *) mem_139672)[i_139401] = defunc_0_op_res_124345;
        ((int64_t *) mem_139674)[i_139401] = lifted_lambda_res_124252;
        ((double *) mem_139676)[i_139401] = tmp_131749;
        ((int64_t *) mem_139678)[i_139401] = tmp_131750;
        ((int64_t *) mem_139680)[i_139401] = tmp_131751;
        ((int64_t *) mem_139682)[i_139401] = defunc_0_f_res_131739;
        ((int64_t *) mem_139684)[i_139401] = lifted_lambda_res_131736;
        
        int64_t scanacc_tmp_140360 = defunc_0_op_res_124345;
        int64_t scanacc_tmp_140361 = lifted_lambda_res_124252;
        
        scanacc_139392 = scanacc_tmp_140360;
        scanacc_139393 = scanacc_tmp_140361;
    }
    discard_139409 = scanacc_139392;
    discard_139410 = scanacc_139393;
    if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
        return 1;
    if (mem_139728_cached_sizze_140631 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139728, &mem_139728_cached_sizze_140631, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139413 = 0; i_139413 < m_124212; i_139413++) {
        int64_t zv_lhs_131676 = add64((int64_t) -1, i_139413);
        int64_t tmp_131677 = smod64(zv_lhs_131676, m_124212);
        int64_t lifted_lambda_res_131678 = ((int64_t *) mem_139674)[tmp_131677];
        bool cond_131680 = i_139413 == (int64_t) 0;
        int64_t lifted_lambda_res_131681;
        
        if (cond_131680) {
            lifted_lambda_res_131681 = (int64_t) 0;
        } else {
            lifted_lambda_res_131681 = lifted_lambda_res_131678;
        }
        ((int64_t *) mem_139728)[i_139413] = lifted_lambda_res_131681;
    }
    
    bool cond_124264 = slt64((int64_t) 0, m_124212);
    bool y_124265 = slt64(m_124222, m_124212);
    bool bounds_check_124266 = zzero_leq_i_p_m_t_s_124223 && y_124265;
    bool loop_not_taken_124267 = !cond_124264;
    bool protect_assert_disj_124268 = bounds_check_124266 || loop_not_taken_124267;
    bool index_certs_124269;
    
    if (!protect_assert_disj_124268) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  ftSMJ.fut:335:10-41\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_lhs_124270;
    
    if (cond_124264) {
        int64_t x_132224 = ((int64_t *) mem_139728)[m_124222];
        
        zp_lhs_124270 = x_132224;
    } else {
        zp_lhs_124270 = (int64_t) 0;
    }
    
    int64_t zp_rhs_124272;
    
    if (cond_124264) {
        int64_t x_132225 = ((int64_t *) mem_139684)[m_124222];
        
        zp_rhs_124272 = x_132225;
    } else {
        zp_rhs_124272 = (int64_t) 0;
    }
    
    int64_t n_pairs_t_res_124274 = add64(zp_lhs_124270, zp_rhs_124272);
    int64_t n_pairs_124275;
    
    if (cond_124264) {
        n_pairs_124275 = n_pairs_t_res_124274;
    } else {
        n_pairs_124275 = (int64_t) 0;
    }
    
    int64_t bytes_139735 = (int64_t) 8 * n_pairs_124275;
    bool zzero_124281 = scatter_psizze_111854 == (int64_t) 0;
    bool nonzzero_124282 = !zzero_124281;
    bool nonzzero_cert_124283;
    
    if (!nonzzero_124282) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_124346 = !empty_slice_124221;
    bool protect_assert_disj_124347 = empty_slice_124221 || bounds_check_124266;
    bool index_certs_124348;
    
    if (!protect_assert_disj_124347) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124349;
    
    if (x_124346) {
        int64_t x_132230 = ((int64_t *) mem_139672)[m_124222];
        
        m_f_res_124349 = x_132230;
    } else {
        m_f_res_124349 = (int64_t) 0;
    }
    
    int64_t m_124351;
    
    if (empty_slice_124221) {
        m_124351 = (int64_t) 0;
    } else {
        m_124351 = m_f_res_124349;
    }
    
    int64_t m_124361 = sub64(m_124351, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124363 = slt64(m_124361, m_124212);
    bool zzero_leq_i_p_m_t_s_124362 = sle64((int64_t) 0, m_124361);
    bool y_124365 = zzero_leq_i_p_m_t_s_124362 && i_p_m_t_s_leq_w_124363;
    bool i_lte_j_124364 = sle64((int64_t) 0, m_124351);
    bool forwards_ok_124366 = i_lte_j_124364 && y_124365;
    bool eq_x_zz_124358 = (int64_t) 0 == m_f_res_124349;
    bool p_and_eq_x_y_124359 = x_124346 && eq_x_zz_124358;
    bool empty_slice_124360 = empty_slice_124221 || p_and_eq_x_y_124359;
    bool ok_or_empty_124367 = empty_slice_124360 || forwards_ok_124366;
    bool index_certs_124368;
    
    if (!ok_or_empty_124367) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124351, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:200:78-81\n   #4  ftRelational.fut:191:1-200:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139783 = (int64_t) 8 * m_124351;
    
    if (memblock_alloc(ctx, &mem_139736, bytes_139735, "mem_139736")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140370 = 0; nest_i_140370 < n_pairs_124275; nest_i_140370++) {
        ((double *) mem_139736.mem)[nest_i_140370] = 0.0;
    }
    if (memblock_alloc(ctx, &mem_139738, bytes_139735, "mem_139738")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140371 = 0; nest_i_140371 < n_pairs_124275; nest_i_140371++) {
        ((int64_t *) mem_139738.mem)[nest_i_140371] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139740, bytes_139735, "mem_139740")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140372 = 0; nest_i_140372 < n_pairs_124275; nest_i_140372++) {
        ((int64_t *) mem_139740.mem)[nest_i_140372] = (int64_t) -1;
    }
    
    int64_t zm_lhs_124279 = add64(scatter_psizze_111854, n_pairs_124275);
    int64_t zs_lhs_124280 = sub64(zm_lhs_124279, (int64_t) 1);
    int64_t m_124284 = sdiv64(zs_lhs_124280, scatter_psizze_111854);
    bool loop_cond_124285 = slt64((int64_t) 0, m_124284);
    bool partitioned_scatter_res_124286;
    int64_t partitioned_scatter_res_124290;
    bool loop_while_124291;
    int64_t p_124295;
    
    loop_while_124291 = loop_cond_124285;
    p_124295 = (int64_t) 0;
    while (loop_while_124291) {
        int64_t lower_bound_124296 = mul64(scatter_psizze_111854, p_124295);
        int64_t min_arg1_124297 = add64(scatter_psizze_111854, lower_bound_124296);
        int64_t min_res_124298 = smin64(n_pairs_124275, min_arg1_124297);
        int64_t j_m_i_124299 = sub64(min_res_124298, lower_bound_124296);
        bool empty_slice_124300 = j_m_i_124299 == (int64_t) 0;
        int64_t m_124301 = sub64(j_m_i_124299, (int64_t) 1);
        int64_t i_p_m_t_s_124302 = add64(lower_bound_124296, m_124301);
        bool zzero_leq_i_p_m_t_s_124303 = sle64((int64_t) 0, i_p_m_t_s_124302);
        bool i_p_m_t_s_leq_w_124304 = slt64(i_p_m_t_s_124302, n_pairs_124275);
        bool zzero_lte_i_124305 = sle64((int64_t) 0, lower_bound_124296);
        bool i_lte_j_124306 = sle64(lower_bound_124296, min_res_124298);
        bool y_124307 = i_p_m_t_s_leq_w_124304 && zzero_lte_i_124305;
        bool y_124308 = zzero_leq_i_p_m_t_s_124303 && y_124307;
        bool forwards_ok_124309 = i_lte_j_124306 && y_124308;
        bool ok_or_empty_124310 = empty_slice_124300 || forwards_ok_124309;
        bool index_certs_124311;
        
        if (!ok_or_empty_124310) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124296, ":", (long long) min_res_124298, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139750 = (int64_t) 8 * j_m_i_124299;
        
        if (mem_139751_cached_sizze_140632 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139751, &mem_139751_cached_sizze_140632, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139736.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139753_cached_sizze_140633 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139753, &mem_139753_cached_sizze_140633, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139738.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139755_cached_sizze_140634 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139755, &mem_139755_cached_sizze_140634, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139740.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        for (int64_t write_iter_139415 = 0; write_iter_139415 < m_124212; write_iter_139415++) {
            int64_t write_iv_139419 = ((int64_t *) mem_139728)[write_iter_139415];
            double write_iv_139420 = ((double *) mem_139676)[write_iter_139415];
            int64_t write_iv_139421 = ((int64_t *) mem_139678)[write_iter_139415];
            int64_t write_iv_139422 = ((int64_t *) mem_139680)[write_iter_139415];
            bool cond_132183 = sle64(lower_bound_124296, write_iv_139419);
            bool cond_t_res_132184 = slt64(write_iv_139419, min_res_124298);
            bool x_132185 = cond_132183 && cond_t_res_132184;
            int64_t lifted_lambda_res_132186;
            
            if (x_132185) {
                int64_t lifted_lambda_res_t_res_132226 = sub64(write_iv_139419, lower_bound_124296);
                
                lifted_lambda_res_132186 = lifted_lambda_res_t_res_132226;
            } else {
                lifted_lambda_res_132186 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((double *) mem_139751)[lifted_lambda_res_132186] = write_iv_139420;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139753)[lifted_lambda_res_132186] = write_iv_139421;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139755)[lifted_lambda_res_132186] = write_iv_139422;
            }
        }
        
        int64_t tmp_124325 = add64((int64_t) 1, p_124295);
        
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139736.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139738.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139740.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        
        bool loop_cond_124336 = slt64(tmp_124325, m_124284);
        bool loop_while_tmp_140373 = loop_cond_124336;
        int64_t p_tmp_140377 = tmp_124325;
        
        loop_while_124291 = loop_while_tmp_140373;
        p_124295 = p_tmp_140377;
    }
    partitioned_scatter_res_124286 = loop_while_124291;
    partitioned_scatter_res_124290 = p_124295;
    if (mem_139784_cached_sizze_140635 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139784, &mem_139784_cached_sizze_140635, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139784, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139684, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    if (mem_139786_cached_sizze_140636 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139786, &mem_139786_cached_sizze_140636, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139786, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139728, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    for (int64_t write_iter_139426 = 0; write_iter_139426 < m_124212; write_iter_139426++) {
        int64_t write_iv_139429 = ((int64_t *) mem_139682)[write_iter_139426];
        int64_t write_iv_139430 = ((int64_t *) mem_139672)[write_iter_139426];
        int64_t write_iv_139431 = ((int64_t *) mem_139728)[write_iter_139426];
        int64_t write_iv_139432 = ((int64_t *) mem_139684)[write_iter_139426];
        bool cond_131664 = write_iv_139429 == (int64_t) 1;
        int64_t lifted_lambda_res_131665;
        
        if (cond_131664) {
            int64_t lifted_lambda_res_t_res_132231 = sub64(write_iv_139430, (int64_t) 1);
            
            lifted_lambda_res_131665 = lifted_lambda_res_t_res_132231;
        } else {
            lifted_lambda_res_131665 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139786)[lifted_lambda_res_131665] = write_iv_139431;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139784)[lifted_lambda_res_131665] = write_iv_139432;
        }
    }
    
    bool cond_124378 = slt64((int64_t) 0, m_124351);
    bool loop_cond_t_res_124379 = slt64(m_124212, n_pairs_124275);
    bool x_124380 = cond_124378 && loop_cond_t_res_124379;
    bool joinTups_to_joinPairs_InnerJoin_res_124381;
    int64_t joinTups_to_joinPairs_InnerJoin_res_124385;
    bool loop_while_124386;
    int64_t p_124390;
    
    if (memblock_set(ctx, &mem_param_139801, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139804, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139807, &mem_139740, "mem_139740") != 0)
        return 1;
    loop_while_124386 = x_124380;
    p_124390 = (int64_t) 0;
    while (loop_while_124386) {
        bool x_124391 = sle64((int64_t) 0, p_124390);
        bool y_124392 = slt64(p_124390, m_124351);
        bool bounds_check_124393 = x_124391 && y_124392;
        bool index_certs_124394;
        
        if (!bounds_check_124393) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_124390, "] out of bounds for array of shape [", (long long) m_124351, "].", "-> #0  ftSMJ.fut:350:13-42\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124395 = ((int64_t *) mem_139786)[p_124390];
        int64_t loopres_124396 = ((int64_t *) mem_139784)[p_124390];
        bool x_124397 = sle64((int64_t) 0, loopres_124395);
        bool y_124398 = slt64(loopres_124395, n_pairs_124275);
        bool bounds_check_124399 = x_124397 && y_124398;
        bool index_certs_124400;
        
        if (!bounds_check_124399) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:352:52-61\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139808 = (int64_t) 8 * loopres_124396;
        int64_t tmp_124411 = add64(loopres_124395, loopres_124396);
        bool empty_slice_124415 = loopres_124396 == (int64_t) 0;
        int64_t m_124416 = sub64(loopres_124396, (int64_t) 1);
        int64_t i_p_m_t_s_124417 = add64(loopres_124395, m_124416);
        bool zzero_leq_i_p_m_t_s_124418 = sle64((int64_t) 0, i_p_m_t_s_124417);
        bool i_p_m_t_s_leq_w_124419 = slt64(i_p_m_t_s_124417, n_pairs_124275);
        bool i_lte_j_124420 = sle64(loopres_124395, tmp_124411);
        bool y_124421 = x_124397 && i_p_m_t_s_leq_w_124419;
        bool y_124422 = zzero_leq_i_p_m_t_s_124418 && y_124421;
        bool forwards_ok_124423 = i_lte_j_124420 && y_124422;
        bool ok_or_empty_124424 = empty_slice_124415 || forwards_ok_124423;
        bool index_certs_124425;
        
        if (!ok_or_empty_124424) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, ":", (long long) tmp_124411, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:356:14-55\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:200:78-81\n   #3  ftRelational.fut:191:1-200:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        double loopres_124401 = ((double *) mem_param_139801.mem)[loopres_124395];
        int64_t loopres_124402 = ((int64_t *) mem_param_139804.mem)[loopres_124395];
        int64_t loopres_124403 = ((int64_t *) mem_param_139807.mem)[loopres_124395];
        
        if (mem_139809_cached_sizze_140637 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139809, &mem_139809_cached_sizze_140637, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140391 = 0; nest_i_140391 < loopres_124396; nest_i_140391++) {
            ((double *) mem_139809)[nest_i_140391] = loopres_124401;
        }
        if (mem_139811_cached_sizze_140638 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139811, &mem_139811_cached_sizze_140638, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140392 = 0; nest_i_140392 < loopres_124396; nest_i_140392++) {
            ((int64_t *) mem_139811)[nest_i_140392] = loopres_124402;
        }
        if (mem_139813_cached_sizze_140639 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139813, &mem_139813_cached_sizze_140639, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139437 = 0; i_139437 < loopres_124396; i_139437++) {
            int64_t tmp_124409 = add64(loopres_124403, i_139437);
            
            ((int64_t *) mem_139813)[i_139437] = tmp_124409;
        }
        
        int64_t tmp_124410 = add64((int64_t) 1, p_124390);
        
        if (memblock_alloc(ctx, &mem_139821, bytes_139735, "mem_139821")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139821.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139801.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139823, bytes_139735, "mem_139823")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139804.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139825, bytes_139735, "mem_139825")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139807.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139821.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139809, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139811, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139813, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        
        bool cond_124429 = slt64(tmp_124410, m_124351);
        bool x_124430 = loop_cond_t_res_124379 && cond_124429;
        
        if (memblock_set(ctx, &mem_param_tmp_140383, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140384, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140385, &mem_139825, "mem_139825") != 0)
            return 1;
        
        bool loop_while_tmp_140386 = x_124430;
        int64_t p_tmp_140390 = tmp_124410;
        
        if (memblock_set(ctx, &mem_param_139801, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139804, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139807, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        loop_while_124386 = loop_while_tmp_140386;
        p_124390 = p_tmp_140390;
    }
    if (memblock_set(ctx, &ext_mem_139834, &mem_param_139801, "mem_param_139801") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139833, &mem_param_139804, "mem_param_139804") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139832, &mem_param_139807, "mem_param_139807") != 0)
        return 1;
    joinTups_to_joinPairs_InnerJoin_res_124381 = loop_while_124386;
    joinTups_to_joinPairs_InnerJoin_res_124385 = p_124390;
    if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139836, bytes_139735, "mem_139836")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139836.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139834.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139838, bytes_139735, "mem_139838")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139838.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139833.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139840, bytes_139735, "mem_139840")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139840.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139832.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139838, "mem_139838") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139840, "mem_139840") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140322, &mem_139836, "mem_139836") != 0)
        return 1;
    prim_out_140323 = n_pairs_124275;
    if (memblock_set(ctx, &*mem_out_p_140617, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140618, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140619, &mem_out_140322, "mem_out_140322") != 0)
        return 1;
    *out_prim_out_140620 = prim_out_140323;
    
  cleanup:
    {
        free(mem_139648);
        free(mem_139650);
        free(mem_139664);
        free(mem_139672);
        free(mem_139674);
        free(mem_139676);
        free(mem_139678);
        free(mem_139680);
        free(mem_139682);
        free(mem_139684);
        free(mem_139728);
        free(mem_139751);
        free(mem_139753);
        free(mem_139755);
        free(mem_139784);
        free(mem_139786);
        free(mem_139809);
        free(mem_139811);
        free(mem_139813);
        if (memblock_unref(ctx, &mem_139840, "mem_139840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139838, "mem_139838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139836, "mem_139836") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139825, "mem_139825") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139807, "mem_param_139807") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139804, "mem_param_139804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139801, "mem_param_139801") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139638, "mem_139638") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139606, "mem_139606") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139604, "mem_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139621, "ext_mem_139621") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139624, "ext_mem_139624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139627, "ext_mem_139627") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139630, "ext_mem_139630") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140322, "mem_out_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_float(struct futhark_context *ctx, struct memblock *mem_out_p_140640, struct memblock *mem_out_p_140641, struct memblock *mem_out_p_140642, int64_t *out_prim_out_140643, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_109390, int64_t nS_109391, int64_t offset_R_109394, int64_t offset_S_109395, int64_t partitionSizze_109396, int64_t scatter_psizze_109397)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139648_cached_sizze_140644 = 0;
    unsigned char *mem_139648 = NULL;
    int64_t mem_139650_cached_sizze_140645 = 0;
    unsigned char *mem_139650 = NULL;
    int64_t mem_139664_cached_sizze_140646 = 0;
    unsigned char *mem_139664 = NULL;
    int64_t mem_139672_cached_sizze_140647 = 0;
    unsigned char *mem_139672 = NULL;
    int64_t mem_139674_cached_sizze_140648 = 0;
    unsigned char *mem_139674 = NULL;
    int64_t mem_139676_cached_sizze_140649 = 0;
    unsigned char *mem_139676 = NULL;
    int64_t mem_139678_cached_sizze_140650 = 0;
    unsigned char *mem_139678 = NULL;
    int64_t mem_139680_cached_sizze_140651 = 0;
    unsigned char *mem_139680 = NULL;
    int64_t mem_139682_cached_sizze_140652 = 0;
    unsigned char *mem_139682 = NULL;
    int64_t mem_139684_cached_sizze_140653 = 0;
    unsigned char *mem_139684 = NULL;
    int64_t mem_139728_cached_sizze_140654 = 0;
    unsigned char *mem_139728 = NULL;
    int64_t mem_139751_cached_sizze_140655 = 0;
    unsigned char *mem_139751 = NULL;
    int64_t mem_139753_cached_sizze_140656 = 0;
    unsigned char *mem_139753 = NULL;
    int64_t mem_139755_cached_sizze_140657 = 0;
    unsigned char *mem_139755 = NULL;
    int64_t mem_139784_cached_sizze_140658 = 0;
    unsigned char *mem_139784 = NULL;
    int64_t mem_139786_cached_sizze_140659 = 0;
    unsigned char *mem_139786 = NULL;
    int64_t mem_139809_cached_sizze_140660 = 0;
    unsigned char *mem_139809 = NULL;
    int64_t mem_139811_cached_sizze_140661 = 0;
    unsigned char *mem_139811 = NULL;
    int64_t mem_139813_cached_sizze_140662 = 0;
    unsigned char *mem_139813 = NULL;
    struct memblock mem_139840;
    
    mem_139840.references = NULL;
    
    struct memblock mem_139838;
    
    mem_139838.references = NULL;
    
    struct memblock mem_139836;
    
    mem_139836.references = NULL;
    
    struct memblock mem_param_tmp_140385;
    
    mem_param_tmp_140385.references = NULL;
    
    struct memblock mem_param_tmp_140384;
    
    mem_param_tmp_140384.references = NULL;
    
    struct memblock mem_param_tmp_140383;
    
    mem_param_tmp_140383.references = NULL;
    
    struct memblock mem_139825;
    
    mem_139825.references = NULL;
    
    struct memblock mem_139823;
    
    mem_139823.references = NULL;
    
    struct memblock mem_139821;
    
    mem_139821.references = NULL;
    
    struct memblock mem_param_139807;
    
    mem_param_139807.references = NULL;
    
    struct memblock mem_param_139804;
    
    mem_param_139804.references = NULL;
    
    struct memblock mem_param_139801;
    
    mem_param_139801.references = NULL;
    
    struct memblock ext_mem_139832;
    
    ext_mem_139832.references = NULL;
    
    struct memblock ext_mem_139833;
    
    ext_mem_139833.references = NULL;
    
    struct memblock ext_mem_139834;
    
    ext_mem_139834.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139738;
    
    mem_139738.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_139640;
    
    mem_139640.references = NULL;
    
    struct memblock mem_139638;
    
    mem_139638.references = NULL;
    
    struct memblock mem_param_tmp_140336;
    
    mem_param_tmp_140336.references = NULL;
    
    struct memblock mem_param_tmp_140335;
    
    mem_param_tmp_140335.references = NULL;
    
    struct memblock mem_139606;
    
    mem_139606.references = NULL;
    
    struct memblock mem_139604;
    
    mem_139604.references = NULL;
    
    struct memblock ext_mem_139621;
    
    ext_mem_139621.references = NULL;
    
    struct memblock ext_mem_139624;
    
    ext_mem_139624.references = NULL;
    
    struct memblock ext_mem_139627;
    
    ext_mem_139627.references = NULL;
    
    struct memblock ext_mem_139630;
    
    ext_mem_139630.references = NULL;
    
    struct memblock mem_param_139602;
    
    mem_param_139602.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139635;
    
    ext_mem_139635.references = NULL;
    
    struct memblock ext_mem_139636;
    
    ext_mem_139636.references = NULL;
    
    struct memblock mem_139596;
    
    mem_139596.references = NULL;
    
    struct memblock mem_139594;
    
    mem_139594.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock ext_mem_139645;
    
    ext_mem_139645.references = NULL;
    
    struct memblock ext_mem_139646;
    
    ext_mem_139646.references = NULL;
    
    struct memblock mem_139586;
    
    mem_139586.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock ext_mem_139582;
    
    ext_mem_139582.references = NULL;
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140323;
    int64_t zm_lhs_123919 = add64(nR_109390, partitionSizze_109396);
    int64_t zs_lhs_123920 = sub64(zm_lhs_123919, (int64_t) 1);
    bool zzero_123921 = partitionSizze_109396 == (int64_t) 0;
    bool nonzzero_123922 = !zzero_123921;
    bool nonzzero_cert_123923;
    
    if (!nonzzero_123922) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftSMJ.fut:276:43-57\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t numIter_R_123924 = sdiv64(zs_lhs_123920, partitionSizze_109396);
    int64_t zm_lhs_123925 = add64(nS_109391, partitionSizze_109396);
    int64_t zs_lhs_123926 = sub64(zm_lhs_123925, (int64_t) 1);
    int64_t numIter_S_123927 = sdiv64(zs_lhs_123926, partitionSizze_109396);
    
    if (futrts_indicesWithIncrement_11428(ctx, &ext_mem_139582, tR_mem_139580, nR_109390, offset_R_109394) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_139583 = (int64_t) 8 * nR_109390;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140324 = 0; nest_i_140324 < nR_109390; nest_i_140324++) {
        ((int64_t *) mem_139584.mem)[nest_i_140324] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139586, bytes_139583, "mem_139586")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140325 = 0; nest_i_140325 < nR_109390; nest_i_140325++) {
        ((int64_t *) mem_139586.mem)[nest_i_140325] = (int64_t) 0;
    }
    
    bool loop_cond_123931 = slt64((int64_t) 0, numIter_R_123924);
    bool defunc_0_mergeJoin_res_123932;
    int64_t defunc_0_mergeJoin_res_123933;
    int64_t defunc_0_mergeJoin_res_123936;
    bool loop_while_123937;
    int64_t iter_123938;
    int64_t first_relevant_in_S_123941;
    
    if (memblock_set(ctx, &mem_param_139589, &mem_139586, "mem_139586") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &mem_139584, "mem_139584") != 0)
        return 1;
    loop_while_123937 = loop_cond_123931;
    iter_123938 = (int64_t) 0;
    first_relevant_in_S_123941 = (int64_t) 0;
    while (loop_while_123937) {
        int64_t tR_start_123942 = mul64(partitionSizze_109396, iter_123938);
        int64_t min_arg1_123943 = add64(partitionSizze_109396, tR_start_123942);
        int64_t min_res_123944 = smin64(nR_109390, min_arg1_123943);
        int64_t dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 = sub64(min_res_123944, tR_start_123942);
        bool empty_slice_123946 = dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 == (int64_t) 0;
        int64_t m_123947 = sub64(dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, (int64_t) 1);
        int64_t i_p_m_t_s_123948 = add64(tR_start_123942, m_123947);
        bool zzero_leq_i_p_m_t_s_123949 = sle64((int64_t) 0, i_p_m_t_s_123948);
        bool i_p_m_t_s_leq_w_123950 = slt64(i_p_m_t_s_123948, nR_109390);
        bool zzero_lte_i_123951 = sle64((int64_t) 0, tR_start_123942);
        bool i_lte_j_123952 = sle64(tR_start_123942, min_res_123944);
        bool y_123953 = i_p_m_t_s_leq_w_123950 && zzero_lte_i_123951;
        bool y_123954 = zzero_leq_i_p_m_t_s_123949 && y_123953;
        bool forwards_ok_123955 = i_lte_j_123952 && y_123954;
        bool ok_or_empty_123956 = empty_slice_123946 || forwards_ok_123955;
        bool index_certs_123957;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_109390, "].", "-> #0  ftSMJ.fut:283:17-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139593 = (int64_t) 8 * dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945;
        bool cond_123961 = slt64(first_relevant_in_S_123941, numIter_S_123927);
        bool y_123962 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool loop_not_taken_123963 = !cond_123961;
        bool protect_assert_disj_123964 = y_123962 || loop_not_taken_123963;
        bool index_certs_123965;
        
        if (!protect_assert_disj_123964) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:298:26-34\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool x_123968 = sle64((int64_t) 0, m_123947);
        bool y_123969 = slt64(m_123947, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool bounds_check_123970 = x_123968 && y_123969;
        bool protect_assert_disj_123971 = loop_not_taken_123963 || bounds_check_123970;
        bool index_certs_123972;
        
        if (!protect_assert_disj_123971) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:299:42-61\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_124186;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_109390, "].", "-> #0  ftSMJ.fut:199:15-63\n   #1  ftSMJ.fut:309:20-64\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139594, bytes_139593, "mem_139594")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140333 = 0; nest_i_140333 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140333++) {
            ((int64_t *) mem_139594.mem)[nest_i_140333] = (int64_t) -1;
        }
        if (memblock_alloc(ctx, &mem_139596, bytes_139593, "mem_139596")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140334 = 0; nest_i_140334 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140334++) {
            ((int64_t *) mem_139596.mem)[nest_i_140334] = (int64_t) 0;
        }
        
        float gt_lhs_123966;
        
        if (cond_123961) {
            float x_132197 = ((float *) tR_mem_139580.mem)[tR_start_123942];
            
            gt_lhs_123966 = x_132197;
        } else {
            gt_lhs_123966 = 0.0F;
        }
        
        float gt_rhs_123973;
        
        if (cond_123961) {
            float x_132198 = ((float *) tR_mem_139580.mem)[i_p_m_t_s_123948];
            
            gt_rhs_123973 = x_132198;
        } else {
            gt_rhs_123973 = 0.0F;
        }
        
        int64_t ext_139634;
        int64_t ext_139633;
        int64_t ext_139632;
        int64_t ext_139631;
        bool loopres_123975;
        int64_t loopres_123976;
        int64_t loopres_123979;
        bool loop_while_123980;
        int64_t s_iter_123981;
        int64_t minRelevant_123984;
        int64_t ctx_param_ext_139597;
        int64_t ctx_param_ext_139598;
        int64_t ctx_param_ext_139600;
        int64_t ctx_param_ext_139601;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139602, &mem_139594, "mem_139594") != 0)
            return 1;
        ctx_param_ext_139597 = (int64_t) 0;
        ctx_param_ext_139598 = (int64_t) 1;
        ctx_param_ext_139600 = (int64_t) 0;
        ctx_param_ext_139601 = (int64_t) 1;
        loop_while_123980 = cond_123961;
        s_iter_123981 = first_relevant_in_S_123941;
        minRelevant_123984 = first_relevant_in_S_123941;
        while (loop_while_123980) {
            int64_t tS_start_123985 = mul64(partitionSizze_109396, s_iter_123981);
            int64_t min_arg1_123986 = add64(partitionSizze_109396, tS_start_123985);
            int64_t min_res_123987 = smin64(nS_109391, min_arg1_123986);
            int64_t dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 = sub64(min_res_123987, tS_start_123985);
            bool empty_slice_123989 = dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 == (int64_t) 0;
            int64_t m_123990 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 1);
            int64_t i_p_m_t_s_123991 = add64(tS_start_123985, m_123990);
            bool zzero_leq_i_p_m_t_s_123992 = sle64((int64_t) 0, i_p_m_t_s_123991);
            bool i_p_m_t_s_leq_w_123993 = slt64(i_p_m_t_s_123991, nS_109391);
            bool zzero_lte_i_123994 = sle64((int64_t) 0, tS_start_123985);
            bool i_lte_j_123995 = sle64(tS_start_123985, min_res_123987);
            bool y_123996 = i_p_m_t_s_leq_w_123993 && zzero_lte_i_123994;
            bool y_123997 = zzero_leq_i_p_m_t_s_123992 && y_123996;
            bool forwards_ok_123998 = i_lte_j_123995 && y_123997;
            bool ok_or_empty_123999 = empty_slice_123989 || forwards_ok_123998;
            bool index_certs_124000;
            
            if (!ok_or_empty_123999) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tS_start_123985, ":", (long long) min_res_123987, "] out of bounds for array of shape [", (long long) nS_109391, "].", "-> #0  ftSMJ.fut:296:19-38\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_124001 = sle64((int64_t) 0, m_123990);
            bool y_124002 = slt64(m_123990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool bounds_check_124003 = x_124001 && y_124002;
            bool index_certs_124004;
            
            if (!bounds_check_124003) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:298:40-59\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_124007 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool index_certs_124008;
            
            if (!y_124007) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:299:28-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            float gt_rhs_124005 = ((float *) tS_mem_139581.mem)[i_p_m_t_s_123991];
            bool defunc_0_gt_res_124006 = gt_rhs_124005 < gt_lhs_123966;
            float gt_lhs_124009 = ((float *) tS_mem_139581.mem)[tS_start_123985];
            bool defunc_0_gt_res_124010 = gt_rhs_123973 < gt_lhs_124009;
            bool thisStillRel_124011 = !defunc_0_gt_res_124010;
            int64_t ext_139623;
            
            if (defunc_0_gt_res_124010) {
                ext_139623 = ctx_param_ext_139597;
            } else {
                ext_139623 = (int64_t) 0;
            }
            
            int64_t ext_139622;
            
            if (defunc_0_gt_res_124010) {
                ext_139622 = ctx_param_ext_139598;
            } else {
                ext_139622 = (int64_t) 1;
            }
            
            int64_t ext_139620;
            
            if (defunc_0_gt_res_124010) {
                ext_139620 = ctx_param_ext_139600;
            } else {
                ext_139620 = (int64_t) 0;
            }
            
            int64_t ext_139619;
            
            if (defunc_0_gt_res_124010) {
                ext_139619 = ctx_param_ext_139601;
            } else {
                ext_139619 = (int64_t) 1;
            }
            
            int64_t ext_139629;
            
            if (defunc_0_gt_res_124006) {
                ext_139629 = ctx_param_ext_139597;
            } else {
                ext_139629 = ext_139623;
            }
            
            int64_t ext_139628;
            
            if (defunc_0_gt_res_124006) {
                ext_139628 = ctx_param_ext_139598;
            } else {
                ext_139628 = ext_139622;
            }
            
            int64_t ext_139626;
            
            if (defunc_0_gt_res_124006) {
                ext_139626 = ctx_param_ext_139600;
            } else {
                ext_139626 = ext_139620;
            }
            
            int64_t ext_139625;
            
            if (defunc_0_gt_res_124006) {
                ext_139625 = ctx_param_ext_139601;
            } else {
                ext_139625 = ext_139619;
            }
            
            int64_t loopres_124012;
            bool loopres_124015;
            int64_t loopres_124016;
            
            if (defunc_0_gt_res_124006) {
                int64_t tmp_132199 = add64((int64_t) 1, s_iter_123981);
                
                if (memblock_set(ctx, &ext_mem_139630, &mem_param_139599, "mem_param_139599") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &mem_param_139602, "mem_param_139602") != 0)
                    return 1;
                loopres_124012 = tmp_132199;
                loopres_124015 = 1;
                loopres_124016 = tmp_132199;
            } else {
                int64_t loopres_f_res_124018;
                bool loopres_f_res_124021;
                
                if (defunc_0_gt_res_124010) {
                    if (memblock_set(ctx, &ext_mem_139624, &mem_param_139599, "mem_param_139599") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_param_139602, "mem_param_139602") != 0)
                        return 1;
                    loopres_f_res_124018 = s_iter_123981;
                    loopres_f_res_124021 = thisStillRel_124011;
                } else {
                    bool index_certs_124022;
                    
                    if (!bounds_check_123970) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:303:50-69\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float gt_rhs_124023 = ((float *) tR_mem_139580.mem)[i_p_m_t_s_123948];
                    bool defunc_0_gt_res_124024 = gt_rhs_124023 < gt_rhs_124005;
                    bool nextRel_124025 = !defunc_0_gt_res_124024;
                    int64_t find_joinTuples_arg3_124026 = add64(offset_S_109395, tS_start_123985);
                    int64_t max_arg1_124027 = sdiv64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 2);
                    int64_t max_res_124028 = smax64((int64_t) 1, max_arg1_124027);
                    bool loop_cond_124029 = slt64((int64_t) 0, max_res_124028);
                    
                    if (memblock_alloc(ctx, &mem_139604, bytes_139593, "mem_139604")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_139606, bytes_139593, "mem_139606")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; i_139367++) {
                        int64_t eta_p_131913 = ((int64_t *) mem_param_139599.mem)[ctx_param_ext_139597 + i_139367 * ctx_param_ext_139598];
                        int64_t slice_139554 = tR_start_123942 + i_139367;
                        float eta_p_131914 = ((float *) tR_mem_139580.mem)[slice_139554];
                        int64_t eta_p_131915 = ((int64_t *) mem_param_139602.mem)[ctx_param_ext_139600 + i_139367 * ctx_param_ext_139601];
                        bool defunc_0_f_res_131916;
                        int64_t defunc_0_f_res_131917;
                        int64_t defunc_0_f_res_131918;
                        bool loop_while_131919;
                        int64_t first_match_131920;
                        int64_t step_131921;
                        
                        loop_while_131919 = loop_cond_124029;
                        first_match_131920 = (int64_t) 0;
                        step_131921 = max_res_124028;
                        while (loop_while_131919) {
                            bool x_131922 = sle64((int64_t) 0, first_match_131920);
                            bool y_131923 = slt64(first_match_131920, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                            bool bounds_check_131924 = x_131922 && y_131923;
                            bool index_certs_131925;
                            
                            if (!bounds_check_131924) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) first_match_131920, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:219:20-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131926 = tS_start_123985 + first_match_131920;
                            float sv_131927 = ((float *) tS_mem_139581.mem)[slice_131926];
                            bool cond_131928 = first_match_131920 == (int64_t) 0;
                            float pv_131929;
                            
                            if (cond_131928) {
                                pv_131929 = sv_131927;
                            } else {
                                int64_t tmp_131930 = sub64(first_match_131920, (int64_t) 1);
                                bool x_131931 = sle64((int64_t) 0, tmp_131930);
                                bool y_131932 = slt64(tmp_131930, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131933 = x_131931 && y_131932;
                                bool index_certs_131934;
                                
                                if (!bounds_check_131933) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131930, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:220:51-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131935 = tS_start_123985 + tmp_131930;
                                float pv_f_res_131936 = ((float *) tS_mem_139581.mem)[slice_131935];
                                
                                pv_131929 = pv_f_res_131936;
                            }
                            
                            bool cond_131937 = first_match_131920 == m_123990;
                            float nv_131938;
                            
                            if (cond_131937) {
                                nv_131938 = sv_131927;
                            } else {
                                int64_t tmp_131939 = add64((int64_t) 1, first_match_131920);
                                bool x_131940 = sle64((int64_t) 0, tmp_131939);
                                bool y_131941 = slt64(tmp_131939, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131942 = x_131940 && y_131941;
                                bool index_certs_131943;
                                
                                if (!bounds_check_131942) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131939, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:221:54-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131944 = tS_start_123985 + tmp_131939;
                                float nv_f_res_131945 = ((float *) tS_mem_139581.mem)[slice_131944];
                                
                                nv_131938 = nv_f_res_131945;
                            }
                            
                            bool defunc_0_eq_res_131946 = sv_131927 == eta_p_131914;
                            bool defunc_0_gt_res_131947 = pv_131929 < eta_p_131914;
                            bool x_131948 = !cond_131928;
                            bool y_131949 = defunc_0_gt_res_131947 && x_131948;
                            bool cond_t_res_131950 = cond_131928 || y_131949;
                            bool x_131951 = defunc_0_eq_res_131946 && cond_t_res_131950;
                            int64_t loopres_131952;
                            int64_t loopres_131953;
                            
                            if (x_131951) {
                                loopres_131952 = first_match_131920;
                                loopres_131953 = (int64_t) 0;
                            } else {
                                int64_t loopres_f_res_131954;
                                int64_t loopres_f_res_131955;
                                
                                if (defunc_0_eq_res_131946) {
                                    int64_t tmp_132200 = sub64(first_match_131920, step_131921);
                                    int64_t max_arg1_132201 = sdiv64(step_131921, (int64_t) 2);
                                    int64_t max_res_132202 = smax64((int64_t) 1, max_arg1_132201);
                                    
                                    loopres_f_res_131954 = tmp_132200;
                                    loopres_f_res_131955 = max_res_132202;
                                } else {
                                    bool defunc_0_gt_res_131959 = eta_p_131914 < sv_131927;
                                    int64_t loopres_f_res_f_res_131960;
                                    int64_t loopres_f_res_f_res_131961;
                                    
                                    if (defunc_0_gt_res_131959) {
                                        int64_t loopres_f_res_f_res_t_res_132203;
                                        int64_t loopres_f_res_f_res_t_res_132204;
                                        
                                        if (cond_t_res_131950) {
                                            loopres_f_res_f_res_t_res_132203 = (int64_t) -1;
                                            loopres_f_res_f_res_t_res_132204 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_132205 = sub64(first_match_131920, step_131921);
                                            int64_t max_arg1_132206 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_132207 = smax64((int64_t) 1, max_arg1_132206);
                                            
                                            loopres_f_res_f_res_t_res_132203 = tmp_132205;
                                            loopres_f_res_f_res_t_res_132204 = max_res_132207;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_t_res_132203;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_t_res_132204;
                                    } else {
                                        bool defunc_0_gt_res_131969 = eta_p_131914 < nv_131938;
                                        bool x_131970 = !cond_131937;
                                        bool y_131971 = defunc_0_gt_res_131969 && x_131970;
                                        bool cond_131972 = cond_131937 || y_131971;
                                        int64_t loopres_f_res_f_res_f_res_131973;
                                        int64_t loopres_f_res_f_res_f_res_131974;
                                        
                                        if (cond_131972) {
                                            loopres_f_res_f_res_f_res_131973 = (int64_t) -1;
                                            loopres_f_res_f_res_f_res_131974 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_131975 = add64(first_match_131920, step_131921);
                                            int64_t max_arg1_131976 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_131977 = smax64((int64_t) 1, max_arg1_131976);
                                            
                                            loopres_f_res_f_res_f_res_131973 = tmp_131975;
                                            loopres_f_res_f_res_f_res_131974 = max_res_131977;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_f_res_131973;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_f_res_131974;
                                    }
                                    loopres_f_res_131954 = loopres_f_res_f_res_131960;
                                    loopres_f_res_131955 = loopres_f_res_f_res_131961;
                                }
                                loopres_131952 = loopres_f_res_131954;
                                loopres_131953 = loopres_f_res_131955;
                            }
                            
                            bool loop_cond_131978 = slt64((int64_t) 0, loopres_131953);
                            bool loop_while_tmp_140348 = loop_cond_131978;
                            int64_t first_match_tmp_140349 = loopres_131952;
                            int64_t step_tmp_140350 = loopres_131953;
                            
                            loop_while_131919 = loop_while_tmp_140348;
                            first_match_131920 = first_match_tmp_140349;
                            step_131921 = step_tmp_140350;
                        }
                        defunc_0_f_res_131916 = loop_while_131919;
                        defunc_0_f_res_131917 = first_match_131920;
                        defunc_0_f_res_131918 = step_131921;
                        
                        int64_t zs_lhs_131979 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, defunc_0_f_res_131917);
                        int64_t max_arg1_131980 = sdiv64(zs_lhs_131979, (int64_t) 2);
                        int64_t max_res_131981 = smax64((int64_t) 1, max_arg1_131980);
                        bool cond_131982 = defunc_0_f_res_131917 == (int64_t) -1;
                        int64_t defunc_0_f_res_131983;
                        
                        if (cond_131982) {
                            defunc_0_f_res_131983 = (int64_t) -1;
                        } else {
                            bool loop_cond_131985 = slt64((int64_t) 0, max_res_131981);
                            bool defunc_0_f_res_f_res_131986;
                            int64_t defunc_0_f_res_f_res_131987;
                            int64_t defunc_0_f_res_f_res_131988;
                            bool loop_while_131989;
                            int64_t last_match_131990;
                            int64_t step_131991;
                            
                            loop_while_131989 = loop_cond_131985;
                            last_match_131990 = m_123990;
                            step_131991 = max_res_131981;
                            while (loop_while_131989) {
                                bool x_131992 = sle64((int64_t) 0, last_match_131990);
                                bool y_131993 = slt64(last_match_131990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131994 = x_131992 && y_131993;
                                bool index_certs_131995;
                                
                                if (!bounds_check_131994) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) last_match_131990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:240:20-34\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131996 = tS_start_123985 + last_match_131990;
                                float sv_131997 = ((float *) tS_mem_139581.mem)[slice_131996];
                                bool cond_131998 = last_match_131990 == defunc_0_f_res_131917;
                                float pv_131999;
                                
                                if (cond_131998) {
                                    pv_131999 = sv_131997;
                                } else {
                                    int64_t tmp_132000 = sub64(last_match_131990, (int64_t) 1);
                                    bool x_132001 = sle64((int64_t) 0, tmp_132000);
                                    bool y_132002 = slt64(tmp_132000, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132003 = x_132001 && y_132002;
                                    bool index_certs_132004;
                                    
                                    if (!bounds_check_132003) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132000, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:241:52-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132005 = tS_start_123985 + tmp_132000;
                                    float pv_f_res_132006 = ((float *) tS_mem_139581.mem)[slice_132005];
                                    
                                    pv_131999 = pv_f_res_132006;
                                }
                                
                                bool cond_132007 = last_match_131990 == m_123990;
                                float nv_132008;
                                
                                if (cond_132007) {
                                    nv_132008 = sv_131997;
                                } else {
                                    int64_t tmp_132009 = add64((int64_t) 1, last_match_131990);
                                    bool x_132010 = sle64((int64_t) 0, tmp_132009);
                                    bool y_132011 = slt64(tmp_132009, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132012 = x_132010 && y_132011;
                                    bool index_certs_132013;
                                    
                                    if (!bounds_check_132012) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132009, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:242:53-69\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132014 = tS_start_123985 + tmp_132009;
                                    float nv_f_res_132015 = ((float *) tS_mem_139581.mem)[slice_132014];
                                    
                                    nv_132008 = nv_f_res_132015;
                                }
                                
                                bool defunc_0_eq_res_132016 = sv_131997 == eta_p_131914;
                                bool defunc_0_gt_res_132017 = eta_p_131914 < nv_132008;
                                bool x_132018 = !cond_132007;
                                bool y_132019 = defunc_0_gt_res_132017 && x_132018;
                                bool cond_t_res_132020 = cond_132007 || y_132019;
                                bool x_132021 = defunc_0_eq_res_132016 && cond_t_res_132020;
                                int64_t loopres_132022;
                                int64_t loopres_132023;
                                
                                if (x_132021) {
                                    loopres_132022 = last_match_131990;
                                    loopres_132023 = (int64_t) 0;
                                } else {
                                    int64_t loopres_f_res_132024;
                                    int64_t loopres_f_res_132025;
                                    
                                    if (defunc_0_eq_res_132016) {
                                        int64_t tmp_132208 = add64(last_match_131990, step_131991);
                                        int64_t max_arg1_132209 = sdiv64(step_131991, (int64_t) 2);
                                        int64_t max_res_132210 = smax64((int64_t) 1, max_arg1_132209);
                                        
                                        loopres_f_res_132024 = tmp_132208;
                                        loopres_f_res_132025 = max_res_132210;
                                    } else {
                                        bool defunc_0_gt_res_132029 = eta_p_131914 < sv_131997;
                                        int64_t loopres_f_res_f_res_132030;
                                        int64_t loopres_f_res_f_res_132031;
                                        
                                        if (defunc_0_gt_res_132029) {
                                            bool defunc_0_gt_res_132211 = pv_131999 < eta_p_131914;
                                            bool x_132212 = !cond_131998;
                                            bool y_132213 = defunc_0_gt_res_132211 && x_132212;
                                            bool cond_132214 = cond_131998 || y_132213;
                                            int64_t loopres_f_res_f_res_t_res_132215;
                                            int64_t loopres_f_res_f_res_t_res_132216;
                                            
                                            if (cond_132214) {
                                                loopres_f_res_f_res_t_res_132215 = (int64_t) -1;
                                                loopres_f_res_f_res_t_res_132216 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132217 = sub64(last_match_131990, step_131991);
                                                int64_t max_arg1_132218 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132219 = smax64((int64_t) 1, max_arg1_132218);
                                                
                                                loopres_f_res_f_res_t_res_132215 = tmp_132217;
                                                loopres_f_res_f_res_t_res_132216 = max_res_132219;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_t_res_132215;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_t_res_132216;
                                        } else {
                                            int64_t loopres_f_res_f_res_f_res_132041;
                                            int64_t loopres_f_res_f_res_f_res_132042;
                                            
                                            if (cond_t_res_132020) {
                                                loopres_f_res_f_res_f_res_132041 = (int64_t) -1;
                                                loopres_f_res_f_res_f_res_132042 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132043 = add64(last_match_131990, step_131991);
                                                int64_t max_arg1_132044 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132045 = smax64((int64_t) 1, max_arg1_132044);
                                                
                                                loopres_f_res_f_res_f_res_132041 = tmp_132043;
                                                loopres_f_res_f_res_f_res_132042 = max_res_132045;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_f_res_132041;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_f_res_132042;
                                        }
                                        loopres_f_res_132024 = loopres_f_res_f_res_132030;
                                        loopres_f_res_132025 = loopres_f_res_f_res_132031;
                                    }
                                    loopres_132022 = loopres_f_res_132024;
                                    loopres_132023 = loopres_f_res_132025;
                                }
                                
                                bool loop_cond_132046 = slt64((int64_t) 0, loopres_132023);
                                bool loop_while_tmp_140351 = loop_cond_132046;
                                int64_t last_match_tmp_140352 = loopres_132022;
                                int64_t step_tmp_140353 = loopres_132023;
                                
                                loop_while_131989 = loop_while_tmp_140351;
                                last_match_131990 = last_match_tmp_140352;
                                step_131991 = step_tmp_140353;
                            }
                            defunc_0_f_res_f_res_131986 = loop_while_131989;
                            defunc_0_f_res_f_res_131987 = last_match_131990;
                            defunc_0_f_res_f_res_131988 = step_131991;
                            defunc_0_f_res_131983 = defunc_0_f_res_f_res_131987;
                        }
                        
                        bool cond_132047 = slt64(defunc_0_f_res_131983, (int64_t) 0);
                        int64_t cm_132048;
                        
                        if (cond_132047) {
                            cm_132048 = (int64_t) 0;
                        } else {
                            int64_t zp_lhs_132049 = sub64(defunc_0_f_res_131983, defunc_0_f_res_131917);
                            int64_t cm_f_res_132050 = add64((int64_t) 1, zp_lhs_132049);
                            
                            cm_132048 = cm_f_res_132050;
                        }
                        
                        bool cond_132053 = slt64(defunc_0_f_res_131917, (int64_t) 0);
                        int64_t lifted_lambda_res_132054;
                        
                        if (cond_132053) {
                            lifted_lambda_res_132054 = defunc_0_f_res_131917;
                        } else {
                            int64_t lifted_lambda_res_f_res_132055 = add64(find_joinTuples_arg3_124026, defunc_0_f_res_131917);
                            
                            lifted_lambda_res_132054 = lifted_lambda_res_f_res_132055;
                        }
                        
                        bool cond_132057 = slt64(eta_p_131915, (int64_t) 0);
                        int64_t lifted_lambda_res_132058;
                        
                        if (cond_132057) {
                            lifted_lambda_res_132058 = lifted_lambda_res_132054;
                        } else {
                            lifted_lambda_res_132058 = eta_p_131915;
                        }
                        
                        int64_t defunc_0_f_res_132061 = add64(eta_p_131913, cm_132048);
                        
                        ((int64_t *) mem_139604.mem)[i_139367] = defunc_0_f_res_132061;
                        ((int64_t *) mem_139606.mem)[i_139367] = lifted_lambda_res_132058;
                    }
                    
                    int64_t tmp_124182 = add64((int64_t) 1, s_iter_123981);
                    
                    if (memblock_set(ctx, &ext_mem_139624, &mem_139604, "mem_139604") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_139606, "mem_139606") != 0)
                        return 1;
                    loopres_f_res_124018 = tmp_124182;
                    loopres_f_res_124021 = nextRel_124025;
                }
                if (memblock_set(ctx, &ext_mem_139630, &ext_mem_139624, "ext_mem_139624") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &ext_mem_139621, "ext_mem_139621") != 0)
                    return 1;
                loopres_124012 = loopres_f_res_124018;
                loopres_124015 = loopres_f_res_124021;
                loopres_124016 = minRelevant_123984;
            }
            
            bool cond_124183 = slt64(loopres_124012, numIter_S_123927);
            bool x_124184 = loopres_124015 && cond_124183;
            
            if (memblock_set(ctx, &mem_param_tmp_140335, &ext_mem_139630, "ext_mem_139630") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140336, &ext_mem_139627, "ext_mem_139627") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_140337 = ext_139629;
            int64_t ctx_param_ext_tmp_140338 = ext_139628;
            int64_t ctx_param_ext_tmp_140339 = ext_139626;
            int64_t ctx_param_ext_tmp_140340 = ext_139625;
            bool loop_while_tmp_140341 = x_124184;
            int64_t s_iter_tmp_140342 = loopres_124012;
            int64_t minRelevant_tmp_140345 = loopres_124016;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139602, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
                return 1;
            ctx_param_ext_139597 = ctx_param_ext_tmp_140337;
            ctx_param_ext_139598 = ctx_param_ext_tmp_140338;
            ctx_param_ext_139600 = ctx_param_ext_tmp_140339;
            ctx_param_ext_139601 = ctx_param_ext_tmp_140340;
            loop_while_123980 = loop_while_tmp_140341;
            s_iter_123981 = s_iter_tmp_140342;
            minRelevant_123984 = minRelevant_tmp_140345;
        }
        if (memblock_set(ctx, &ext_mem_139636, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139635, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        ext_139634 = ctx_param_ext_139597;
        ext_139633 = ctx_param_ext_139598;
        ext_139632 = ctx_param_ext_139600;
        ext_139631 = ctx_param_ext_139601;
        loopres_123975 = loop_while_123980;
        loopres_123976 = s_iter_123981;
        loopres_123979 = minRelevant_123984;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139638, bytes_139583, "mem_139638")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139592.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_109390});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139635.mem, ext_139632, (int64_t []) {ext_139631}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139640, bytes_139583, "mem_139640")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_109390});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139636.mem, ext_139634, (int64_t []) {ext_139633}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        
        int64_t tmp_124190 = add64((int64_t) 1, iter_123938);
        bool loop_cond_124191 = slt64(tmp_124190, numIter_R_123924);
        
        if (memblock_set(ctx, &mem_param_tmp_140326, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &mem_139638, "mem_139638") != 0)
            return 1;
        
        bool loop_while_tmp_140328 = loop_cond_124191;
        int64_t iter_tmp_140329 = tmp_124190;
        int64_t first_relevant_in_S_tmp_140332 = loopres_123979;
        
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        loop_while_123937 = loop_while_tmp_140328;
        iter_123938 = iter_tmp_140329;
        first_relevant_in_S_123941 = first_relevant_in_S_tmp_140332;
    }
    if (memblock_set(ctx, &ext_mem_139646, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139645, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    defunc_0_mergeJoin_res_123932 = loop_while_123937;
    defunc_0_mergeJoin_res_123933 = iter_123938;
    defunc_0_mergeJoin_res_123936 = first_relevant_in_S_123941;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
        return 1;
    if (mem_139648_cached_sizze_140644 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139648, &mem_139648_cached_sizze_140644, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139650_cached_sizze_140645 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139650, &mem_139650_cached_sizze_140645, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139378;
    int64_t scanacc_139372 = (int64_t) 0;
    
    for (int64_t i_139375 = 0; i_139375 < nR_109390; i_139375++) {
        int64_t zg_lhs_131722 = ((int64_t *) ext_mem_139646.mem)[i_139375];
        bool lifted_lambda_res_131723 = slt64((int64_t) 0, zg_lhs_131722);
        int64_t defunc_0_f_res_131724 = btoi_bool_i64(lifted_lambda_res_131723);
        int64_t defunc_0_op_res_124201 = add64(defunc_0_f_res_131724, scanacc_139372);
        
        ((int64_t *) mem_139648)[i_139375] = defunc_0_op_res_124201;
        ((int64_t *) mem_139650)[i_139375] = defunc_0_f_res_131724;
        
        int64_t scanacc_tmp_140354 = defunc_0_op_res_124201;
        
        scanacc_139372 = scanacc_tmp_140354;
    }
    discard_139378 = scanacc_139372;
    
    bool cond_124202 = nR_109390 == (int64_t) 0;
    bool x_124203 = !cond_124202;
    int64_t tmp_124204 = sub64(nR_109390, (int64_t) 1);
    bool x_124205 = sle64((int64_t) 0, tmp_124204);
    bool y_124206 = slt64(tmp_124204, nR_109390);
    bool bounds_check_124207 = x_124205 && y_124206;
    bool protect_assert_disj_124208 = cond_124202 || bounds_check_124207;
    bool index_certs_124209;
    
    if (!protect_assert_disj_124208) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_124204, "] out of bounds for array of shape [", (long long) nR_109390, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124210;
    
    if (x_124203) {
        int64_t x_132222 = ((int64_t *) mem_139648)[tmp_124204];
        
        m_f_res_124210 = x_132222;
    } else {
        m_f_res_124210 = (int64_t) 0;
    }
    
    int64_t m_124212;
    
    if (cond_124202) {
        m_124212 = (int64_t) 0;
    } else {
        m_124212 = m_f_res_124210;
    }
    
    int64_t m_124222 = sub64(m_124212, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124224 = slt64(m_124222, nR_109390);
    bool zzero_leq_i_p_m_t_s_124223 = sle64((int64_t) 0, m_124222);
    bool y_124226 = zzero_leq_i_p_m_t_s_124223 && i_p_m_t_s_leq_w_124224;
    bool i_lte_j_124225 = sle64((int64_t) 0, m_124212);
    bool forwards_ok_124227 = i_lte_j_124225 && y_124226;
    bool eq_x_zz_124219 = (int64_t) 0 == m_f_res_124210;
    bool p_and_eq_x_y_124220 = x_124203 && eq_x_zz_124219;
    bool empty_slice_124221 = cond_124202 || p_and_eq_x_y_124220;
    bool ok_or_empty_124228 = empty_slice_124221 || forwards_ok_124227;
    bool index_certs_124229;
    
    if (!ok_or_empty_124228) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124212, "] out of bounds for array of shape [", (long long) nR_109390, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139663 = (int64_t) 8 * m_124212;
    
    if (mem_139664_cached_sizze_140646 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139664, &mem_139664_cached_sizze_140646, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140357 = 0; i_140357 < m_124212; i_140357++) {
        int64_t x_140358 = (int64_t) 0 + i_140357 * (int64_t) 1;
        
        ((int64_t *) mem_139664)[i_140357] = x_140358;
    }
    for (int64_t write_iter_139379 = 0; write_iter_139379 < nR_109390; write_iter_139379++) {
        int64_t write_iv_139381 = ((int64_t *) mem_139650)[write_iter_139379];
        int64_t write_iv_139382 = ((int64_t *) mem_139648)[write_iter_139379];
        bool cond_131712 = write_iv_139381 == (int64_t) 1;
        int64_t lifted_lambda_res_131713;
        
        if (cond_131712) {
            int64_t lifted_lambda_res_t_res_132223 = sub64(write_iv_139382, (int64_t) 1);
            
            lifted_lambda_res_131713 = lifted_lambda_res_t_res_132223;
        } else {
            lifted_lambda_res_131713 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131713) && slt64(lifted_lambda_res_131713, m_124212)) {
            ((int64_t *) mem_139664)[lifted_lambda_res_131713] = write_iter_139379;
        }
    }
    if (mem_139672_cached_sizze_140647 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139672, &mem_139672_cached_sizze_140647, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139674_cached_sizze_140648 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139674, &mem_139674_cached_sizze_140648, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t bytes_139675 = (int64_t) 4 * m_124212;
    
    if (mem_139676_cached_sizze_140649 < bytes_139675) {
        err = lexical_realloc(ctx, &mem_139676, &mem_139676_cached_sizze_140649, bytes_139675);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139678_cached_sizze_140650 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139678, &mem_139678_cached_sizze_140650, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139680_cached_sizze_140651 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139680, &mem_139680_cached_sizze_140651, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139682_cached_sizze_140652 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139682, &mem_139682_cached_sizze_140652, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139684_cached_sizze_140653 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139684, &mem_139684_cached_sizze_140653, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139409;
    int64_t discard_139410;
    int64_t scanacc_139392;
    int64_t scanacc_139393;
    
    scanacc_139392 = (int64_t) 0;
    scanacc_139393 = (int64_t) 0;
    for (int64_t i_139401 = 0; i_139401 < m_124212; i_139401++) {
        int64_t eta_p_131730 = ((int64_t *) mem_139664)[i_139401];
        bool x_131732 = sle64((int64_t) 0, eta_p_131730);
        bool y_131733 = slt64(eta_p_131730, nR_109390);
        bool bounds_check_131734 = x_131732 && y_131733;
        bool index_certs_131735;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_109390, "].", "-> #0  ftSMJ.fut:328:40-50\n   #1  ftRelational.fut:189:78-81\n   #2  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_131748;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_109390, "].", "-> #0  ftSMJ.fut:329:51-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:329:39-87\n   #3  ftSMJ.fut:373:7-374:73\n   #4  ftRelational.fut:189:78-81\n   #5  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_131736 = ((int64_t *) ext_mem_139646.mem)[eta_p_131730];
        bool lifted_lambda_res_131738 = slt64((int64_t) 1, lifted_lambda_res_131736);
        int64_t defunc_0_f_res_131739 = btoi_bool_i64(lifted_lambda_res_131738);
        float tmp_131749 = ((float *) tR_mem_139580.mem)[eta_p_131730];
        int64_t tmp_131750 = ((int64_t *) ext_mem_139582.mem)[eta_p_131730];
        int64_t tmp_131751 = ((int64_t *) ext_mem_139645.mem)[eta_p_131730];
        int64_t defunc_0_op_res_124345 = add64(defunc_0_f_res_131739, scanacc_139392);
        int64_t lifted_lambda_res_124252 = add64(lifted_lambda_res_131736, scanacc_139393);
        
        ((int64_t *) mem_139672)[i_139401] = defunc_0_op_res_124345;
        ((int64_t *) mem_139674)[i_139401] = lifted_lambda_res_124252;
        ((float *) mem_139676)[i_139401] = tmp_131749;
        ((int64_t *) mem_139678)[i_139401] = tmp_131750;
        ((int64_t *) mem_139680)[i_139401] = tmp_131751;
        ((int64_t *) mem_139682)[i_139401] = defunc_0_f_res_131739;
        ((int64_t *) mem_139684)[i_139401] = lifted_lambda_res_131736;
        
        int64_t scanacc_tmp_140360 = defunc_0_op_res_124345;
        int64_t scanacc_tmp_140361 = lifted_lambda_res_124252;
        
        scanacc_139392 = scanacc_tmp_140360;
        scanacc_139393 = scanacc_tmp_140361;
    }
    discard_139409 = scanacc_139392;
    discard_139410 = scanacc_139393;
    if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
        return 1;
    if (mem_139728_cached_sizze_140654 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139728, &mem_139728_cached_sizze_140654, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139413 = 0; i_139413 < m_124212; i_139413++) {
        int64_t zv_lhs_131676 = add64((int64_t) -1, i_139413);
        int64_t tmp_131677 = smod64(zv_lhs_131676, m_124212);
        int64_t lifted_lambda_res_131678 = ((int64_t *) mem_139674)[tmp_131677];
        bool cond_131680 = i_139413 == (int64_t) 0;
        int64_t lifted_lambda_res_131681;
        
        if (cond_131680) {
            lifted_lambda_res_131681 = (int64_t) 0;
        } else {
            lifted_lambda_res_131681 = lifted_lambda_res_131678;
        }
        ((int64_t *) mem_139728)[i_139413] = lifted_lambda_res_131681;
    }
    
    bool cond_124264 = slt64((int64_t) 0, m_124212);
    bool y_124265 = slt64(m_124222, m_124212);
    bool bounds_check_124266 = zzero_leq_i_p_m_t_s_124223 && y_124265;
    bool loop_not_taken_124267 = !cond_124264;
    bool protect_assert_disj_124268 = bounds_check_124266 || loop_not_taken_124267;
    bool index_certs_124269;
    
    if (!protect_assert_disj_124268) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  ftSMJ.fut:335:10-41\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_lhs_124270;
    
    if (cond_124264) {
        int64_t x_132224 = ((int64_t *) mem_139728)[m_124222];
        
        zp_lhs_124270 = x_132224;
    } else {
        zp_lhs_124270 = (int64_t) 0;
    }
    
    int64_t zp_rhs_124272;
    
    if (cond_124264) {
        int64_t x_132225 = ((int64_t *) mem_139684)[m_124222];
        
        zp_rhs_124272 = x_132225;
    } else {
        zp_rhs_124272 = (int64_t) 0;
    }
    
    int64_t n_pairs_t_res_124274 = add64(zp_lhs_124270, zp_rhs_124272);
    int64_t n_pairs_124275;
    
    if (cond_124264) {
        n_pairs_124275 = n_pairs_t_res_124274;
    } else {
        n_pairs_124275 = (int64_t) 0;
    }
    
    int64_t bytes_139735 = (int64_t) 4 * n_pairs_124275;
    int64_t bytes_139737 = (int64_t) 8 * n_pairs_124275;
    bool zzero_124281 = scatter_psizze_109397 == (int64_t) 0;
    bool nonzzero_124282 = !zzero_124281;
    bool nonzzero_cert_124283;
    
    if (!nonzzero_124282) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_124346 = !empty_slice_124221;
    bool protect_assert_disj_124347 = empty_slice_124221 || bounds_check_124266;
    bool index_certs_124348;
    
    if (!protect_assert_disj_124347) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124349;
    
    if (x_124346) {
        int64_t x_132230 = ((int64_t *) mem_139672)[m_124222];
        
        m_f_res_124349 = x_132230;
    } else {
        m_f_res_124349 = (int64_t) 0;
    }
    
    int64_t m_124351;
    
    if (empty_slice_124221) {
        m_124351 = (int64_t) 0;
    } else {
        m_124351 = m_f_res_124349;
    }
    
    int64_t m_124361 = sub64(m_124351, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124363 = slt64(m_124361, m_124212);
    bool zzero_leq_i_p_m_t_s_124362 = sle64((int64_t) 0, m_124361);
    bool y_124365 = zzero_leq_i_p_m_t_s_124362 && i_p_m_t_s_leq_w_124363;
    bool i_lte_j_124364 = sle64((int64_t) 0, m_124351);
    bool forwards_ok_124366 = i_lte_j_124364 && y_124365;
    bool eq_x_zz_124358 = (int64_t) 0 == m_f_res_124349;
    bool p_and_eq_x_y_124359 = x_124346 && eq_x_zz_124358;
    bool empty_slice_124360 = empty_slice_124221 || p_and_eq_x_y_124359;
    bool ok_or_empty_124367 = empty_slice_124360 || forwards_ok_124366;
    bool index_certs_124368;
    
    if (!ok_or_empty_124367) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124351, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:189:78-81\n   #4  ftRelational.fut:180:1-189:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139783 = (int64_t) 8 * m_124351;
    
    if (memblock_alloc(ctx, &mem_139736, bytes_139735, "mem_139736")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140370 = 0; nest_i_140370 < n_pairs_124275; nest_i_140370++) {
        ((float *) mem_139736.mem)[nest_i_140370] = 0.0F;
    }
    if (memblock_alloc(ctx, &mem_139738, bytes_139737, "mem_139738")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140371 = 0; nest_i_140371 < n_pairs_124275; nest_i_140371++) {
        ((int64_t *) mem_139738.mem)[nest_i_140371] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139740, bytes_139737, "mem_139740")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140372 = 0; nest_i_140372 < n_pairs_124275; nest_i_140372++) {
        ((int64_t *) mem_139740.mem)[nest_i_140372] = (int64_t) -1;
    }
    
    int64_t zm_lhs_124279 = add64(scatter_psizze_109397, n_pairs_124275);
    int64_t zs_lhs_124280 = sub64(zm_lhs_124279, (int64_t) 1);
    int64_t m_124284 = sdiv64(zs_lhs_124280, scatter_psizze_109397);
    bool loop_cond_124285 = slt64((int64_t) 0, m_124284);
    bool partitioned_scatter_res_124286;
    int64_t partitioned_scatter_res_124290;
    bool loop_while_124291;
    int64_t p_124295;
    
    loop_while_124291 = loop_cond_124285;
    p_124295 = (int64_t) 0;
    while (loop_while_124291) {
        int64_t lower_bound_124296 = mul64(scatter_psizze_109397, p_124295);
        int64_t min_arg1_124297 = add64(scatter_psizze_109397, lower_bound_124296);
        int64_t min_res_124298 = smin64(n_pairs_124275, min_arg1_124297);
        int64_t j_m_i_124299 = sub64(min_res_124298, lower_bound_124296);
        bool empty_slice_124300 = j_m_i_124299 == (int64_t) 0;
        int64_t m_124301 = sub64(j_m_i_124299, (int64_t) 1);
        int64_t i_p_m_t_s_124302 = add64(lower_bound_124296, m_124301);
        bool zzero_leq_i_p_m_t_s_124303 = sle64((int64_t) 0, i_p_m_t_s_124302);
        bool i_p_m_t_s_leq_w_124304 = slt64(i_p_m_t_s_124302, n_pairs_124275);
        bool zzero_lte_i_124305 = sle64((int64_t) 0, lower_bound_124296);
        bool i_lte_j_124306 = sle64(lower_bound_124296, min_res_124298);
        bool y_124307 = i_p_m_t_s_leq_w_124304 && zzero_lte_i_124305;
        bool y_124308 = zzero_leq_i_p_m_t_s_124303 && y_124307;
        bool forwards_ok_124309 = i_lte_j_124306 && y_124308;
        bool ok_or_empty_124310 = empty_slice_124300 || forwards_ok_124309;
        bool index_certs_124311;
        
        if (!ok_or_empty_124310) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124296, ":", (long long) min_res_124298, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139750 = (int64_t) 4 * j_m_i_124299;
        int64_t bytes_139752 = (int64_t) 8 * j_m_i_124299;
        
        if (mem_139751_cached_sizze_140655 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139751, &mem_139751_cached_sizze_140655, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139736.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139753_cached_sizze_140656 < bytes_139752) {
            err = lexical_realloc(ctx, &mem_139753, &mem_139753_cached_sizze_140656, bytes_139752);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139738.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139755_cached_sizze_140657 < bytes_139752) {
            err = lexical_realloc(ctx, &mem_139755, &mem_139755_cached_sizze_140657, bytes_139752);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139740.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        for (int64_t write_iter_139415 = 0; write_iter_139415 < m_124212; write_iter_139415++) {
            int64_t write_iv_139419 = ((int64_t *) mem_139728)[write_iter_139415];
            float write_iv_139420 = ((float *) mem_139676)[write_iter_139415];
            int64_t write_iv_139421 = ((int64_t *) mem_139678)[write_iter_139415];
            int64_t write_iv_139422 = ((int64_t *) mem_139680)[write_iter_139415];
            bool cond_132183 = sle64(lower_bound_124296, write_iv_139419);
            bool cond_t_res_132184 = slt64(write_iv_139419, min_res_124298);
            bool x_132185 = cond_132183 && cond_t_res_132184;
            int64_t lifted_lambda_res_132186;
            
            if (x_132185) {
                int64_t lifted_lambda_res_t_res_132226 = sub64(write_iv_139419, lower_bound_124296);
                
                lifted_lambda_res_132186 = lifted_lambda_res_t_res_132226;
            } else {
                lifted_lambda_res_132186 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((float *) mem_139751)[lifted_lambda_res_132186] = write_iv_139420;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139753)[lifted_lambda_res_132186] = write_iv_139421;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139755)[lifted_lambda_res_132186] = write_iv_139422;
            }
        }
        
        int64_t tmp_124325 = add64((int64_t) 1, p_124295);
        
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139736.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139738.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139740.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        
        bool loop_cond_124336 = slt64(tmp_124325, m_124284);
        bool loop_while_tmp_140373 = loop_cond_124336;
        int64_t p_tmp_140377 = tmp_124325;
        
        loop_while_124291 = loop_while_tmp_140373;
        p_124295 = p_tmp_140377;
    }
    partitioned_scatter_res_124286 = loop_while_124291;
    partitioned_scatter_res_124290 = p_124295;
    if (mem_139784_cached_sizze_140658 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139784, &mem_139784_cached_sizze_140658, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139784, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139684, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    if (mem_139786_cached_sizze_140659 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139786, &mem_139786_cached_sizze_140659, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139786, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139728, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    for (int64_t write_iter_139426 = 0; write_iter_139426 < m_124212; write_iter_139426++) {
        int64_t write_iv_139429 = ((int64_t *) mem_139682)[write_iter_139426];
        int64_t write_iv_139430 = ((int64_t *) mem_139672)[write_iter_139426];
        int64_t write_iv_139431 = ((int64_t *) mem_139728)[write_iter_139426];
        int64_t write_iv_139432 = ((int64_t *) mem_139684)[write_iter_139426];
        bool cond_131664 = write_iv_139429 == (int64_t) 1;
        int64_t lifted_lambda_res_131665;
        
        if (cond_131664) {
            int64_t lifted_lambda_res_t_res_132231 = sub64(write_iv_139430, (int64_t) 1);
            
            lifted_lambda_res_131665 = lifted_lambda_res_t_res_132231;
        } else {
            lifted_lambda_res_131665 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139786)[lifted_lambda_res_131665] = write_iv_139431;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139784)[lifted_lambda_res_131665] = write_iv_139432;
        }
    }
    
    bool cond_124378 = slt64((int64_t) 0, m_124351);
    bool loop_cond_t_res_124379 = slt64(m_124212, n_pairs_124275);
    bool x_124380 = cond_124378 && loop_cond_t_res_124379;
    bool joinTups_to_joinPairs_InnerJoin_res_124381;
    int64_t joinTups_to_joinPairs_InnerJoin_res_124385;
    bool loop_while_124386;
    int64_t p_124390;
    
    if (memblock_set(ctx, &mem_param_139801, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139804, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139807, &mem_139740, "mem_139740") != 0)
        return 1;
    loop_while_124386 = x_124380;
    p_124390 = (int64_t) 0;
    while (loop_while_124386) {
        bool x_124391 = sle64((int64_t) 0, p_124390);
        bool y_124392 = slt64(p_124390, m_124351);
        bool bounds_check_124393 = x_124391 && y_124392;
        bool index_certs_124394;
        
        if (!bounds_check_124393) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_124390, "] out of bounds for array of shape [", (long long) m_124351, "].", "-> #0  ftSMJ.fut:350:13-42\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124395 = ((int64_t *) mem_139786)[p_124390];
        int64_t loopres_124396 = ((int64_t *) mem_139784)[p_124390];
        bool x_124397 = sle64((int64_t) 0, loopres_124395);
        bool y_124398 = slt64(loopres_124395, n_pairs_124275);
        bool bounds_check_124399 = x_124397 && y_124398;
        bool index_certs_124400;
        
        if (!bounds_check_124399) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:352:52-61\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139808 = (int64_t) 4 * loopres_124396;
        int64_t bytes_139810 = (int64_t) 8 * loopres_124396;
        int64_t tmp_124411 = add64(loopres_124395, loopres_124396);
        bool empty_slice_124415 = loopres_124396 == (int64_t) 0;
        int64_t m_124416 = sub64(loopres_124396, (int64_t) 1);
        int64_t i_p_m_t_s_124417 = add64(loopres_124395, m_124416);
        bool zzero_leq_i_p_m_t_s_124418 = sle64((int64_t) 0, i_p_m_t_s_124417);
        bool i_p_m_t_s_leq_w_124419 = slt64(i_p_m_t_s_124417, n_pairs_124275);
        bool i_lte_j_124420 = sle64(loopres_124395, tmp_124411);
        bool y_124421 = x_124397 && i_p_m_t_s_leq_w_124419;
        bool y_124422 = zzero_leq_i_p_m_t_s_124418 && y_124421;
        bool forwards_ok_124423 = i_lte_j_124420 && y_124422;
        bool ok_or_empty_124424 = empty_slice_124415 || forwards_ok_124423;
        bool index_certs_124425;
        
        if (!ok_or_empty_124424) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, ":", (long long) tmp_124411, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:356:14-55\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:189:78-81\n   #3  ftRelational.fut:180:1-189:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float loopres_124401 = ((float *) mem_param_139801.mem)[loopres_124395];
        int64_t loopres_124402 = ((int64_t *) mem_param_139804.mem)[loopres_124395];
        int64_t loopres_124403 = ((int64_t *) mem_param_139807.mem)[loopres_124395];
        
        if (mem_139809_cached_sizze_140660 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139809, &mem_139809_cached_sizze_140660, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140391 = 0; nest_i_140391 < loopres_124396; nest_i_140391++) {
            ((float *) mem_139809)[nest_i_140391] = loopres_124401;
        }
        if (mem_139811_cached_sizze_140661 < bytes_139810) {
            err = lexical_realloc(ctx, &mem_139811, &mem_139811_cached_sizze_140661, bytes_139810);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140392 = 0; nest_i_140392 < loopres_124396; nest_i_140392++) {
            ((int64_t *) mem_139811)[nest_i_140392] = loopres_124402;
        }
        if (mem_139813_cached_sizze_140662 < bytes_139810) {
            err = lexical_realloc(ctx, &mem_139813, &mem_139813_cached_sizze_140662, bytes_139810);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139437 = 0; i_139437 < loopres_124396; i_139437++) {
            int64_t tmp_124409 = add64(loopres_124403, i_139437);
            
            ((int64_t *) mem_139813)[i_139437] = tmp_124409;
        }
        
        int64_t tmp_124410 = add64((int64_t) 1, p_124390);
        
        if (memblock_alloc(ctx, &mem_139821, bytes_139735, "mem_139821")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139821.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139801.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139823, bytes_139737, "mem_139823")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139804.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139825, bytes_139737, "mem_139825")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139807.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139821.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139809, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139811, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139813, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        
        bool cond_124429 = slt64(tmp_124410, m_124351);
        bool x_124430 = loop_cond_t_res_124379 && cond_124429;
        
        if (memblock_set(ctx, &mem_param_tmp_140383, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140384, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140385, &mem_139825, "mem_139825") != 0)
            return 1;
        
        bool loop_while_tmp_140386 = x_124430;
        int64_t p_tmp_140390 = tmp_124410;
        
        if (memblock_set(ctx, &mem_param_139801, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139804, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139807, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        loop_while_124386 = loop_while_tmp_140386;
        p_124390 = p_tmp_140390;
    }
    if (memblock_set(ctx, &ext_mem_139834, &mem_param_139801, "mem_param_139801") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139833, &mem_param_139804, "mem_param_139804") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139832, &mem_param_139807, "mem_param_139807") != 0)
        return 1;
    joinTups_to_joinPairs_InnerJoin_res_124381 = loop_while_124386;
    joinTups_to_joinPairs_InnerJoin_res_124385 = p_124390;
    if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139836, bytes_139735, "mem_139836")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139836.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139834.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139838, bytes_139737, "mem_139838")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139838.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139833.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139840, bytes_139737, "mem_139840")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139840.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139832.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139838, "mem_139838") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139840, "mem_139840") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140322, &mem_139836, "mem_139836") != 0)
        return 1;
    prim_out_140323 = n_pairs_124275;
    if (memblock_set(ctx, &*mem_out_p_140640, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140641, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140642, &mem_out_140322, "mem_out_140322") != 0)
        return 1;
    *out_prim_out_140643 = prim_out_140323;
    
  cleanup:
    {
        free(mem_139648);
        free(mem_139650);
        free(mem_139664);
        free(mem_139672);
        free(mem_139674);
        free(mem_139676);
        free(mem_139678);
        free(mem_139680);
        free(mem_139682);
        free(mem_139684);
        free(mem_139728);
        free(mem_139751);
        free(mem_139753);
        free(mem_139755);
        free(mem_139784);
        free(mem_139786);
        free(mem_139809);
        free(mem_139811);
        free(mem_139813);
        if (memblock_unref(ctx, &mem_139840, "mem_139840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139838, "mem_139838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139836, "mem_139836") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139825, "mem_139825") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139807, "mem_param_139807") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139804, "mem_param_139804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139801, "mem_param_139801") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139638, "mem_139638") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139606, "mem_139606") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139604, "mem_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139621, "ext_mem_139621") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139624, "ext_mem_139624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139627, "ext_mem_139627") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139630, "ext_mem_139630") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140322, "mem_out_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_int(struct futhark_context *ctx, struct memblock *mem_out_p_140663, struct memblock *mem_out_p_140664, struct memblock *mem_out_p_140665, int64_t *out_prim_out_140666, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_104488, int64_t nS_104489, int64_t offset_R_104492, int64_t offset_S_104493, int64_t partitionSizze_104494, int64_t scatter_psizze_104495)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139648_cached_sizze_140667 = 0;
    unsigned char *mem_139648 = NULL;
    int64_t mem_139650_cached_sizze_140668 = 0;
    unsigned char *mem_139650 = NULL;
    int64_t mem_139664_cached_sizze_140669 = 0;
    unsigned char *mem_139664 = NULL;
    int64_t mem_139672_cached_sizze_140670 = 0;
    unsigned char *mem_139672 = NULL;
    int64_t mem_139674_cached_sizze_140671 = 0;
    unsigned char *mem_139674 = NULL;
    int64_t mem_139676_cached_sizze_140672 = 0;
    unsigned char *mem_139676 = NULL;
    int64_t mem_139678_cached_sizze_140673 = 0;
    unsigned char *mem_139678 = NULL;
    int64_t mem_139680_cached_sizze_140674 = 0;
    unsigned char *mem_139680 = NULL;
    int64_t mem_139682_cached_sizze_140675 = 0;
    unsigned char *mem_139682 = NULL;
    int64_t mem_139684_cached_sizze_140676 = 0;
    unsigned char *mem_139684 = NULL;
    int64_t mem_139728_cached_sizze_140677 = 0;
    unsigned char *mem_139728 = NULL;
    int64_t mem_139751_cached_sizze_140678 = 0;
    unsigned char *mem_139751 = NULL;
    int64_t mem_139753_cached_sizze_140679 = 0;
    unsigned char *mem_139753 = NULL;
    int64_t mem_139755_cached_sizze_140680 = 0;
    unsigned char *mem_139755 = NULL;
    int64_t mem_139784_cached_sizze_140681 = 0;
    unsigned char *mem_139784 = NULL;
    int64_t mem_139786_cached_sizze_140682 = 0;
    unsigned char *mem_139786 = NULL;
    int64_t mem_139809_cached_sizze_140683 = 0;
    unsigned char *mem_139809 = NULL;
    int64_t mem_139811_cached_sizze_140684 = 0;
    unsigned char *mem_139811 = NULL;
    int64_t mem_139813_cached_sizze_140685 = 0;
    unsigned char *mem_139813 = NULL;
    struct memblock mem_139840;
    
    mem_139840.references = NULL;
    
    struct memblock mem_139838;
    
    mem_139838.references = NULL;
    
    struct memblock mem_139836;
    
    mem_139836.references = NULL;
    
    struct memblock mem_param_tmp_140385;
    
    mem_param_tmp_140385.references = NULL;
    
    struct memblock mem_param_tmp_140384;
    
    mem_param_tmp_140384.references = NULL;
    
    struct memblock mem_param_tmp_140383;
    
    mem_param_tmp_140383.references = NULL;
    
    struct memblock mem_139825;
    
    mem_139825.references = NULL;
    
    struct memblock mem_139823;
    
    mem_139823.references = NULL;
    
    struct memblock mem_139821;
    
    mem_139821.references = NULL;
    
    struct memblock mem_param_139807;
    
    mem_param_139807.references = NULL;
    
    struct memblock mem_param_139804;
    
    mem_param_139804.references = NULL;
    
    struct memblock mem_param_139801;
    
    mem_param_139801.references = NULL;
    
    struct memblock ext_mem_139832;
    
    ext_mem_139832.references = NULL;
    
    struct memblock ext_mem_139833;
    
    ext_mem_139833.references = NULL;
    
    struct memblock ext_mem_139834;
    
    ext_mem_139834.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139738;
    
    mem_139738.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_139640;
    
    mem_139640.references = NULL;
    
    struct memblock mem_139638;
    
    mem_139638.references = NULL;
    
    struct memblock mem_param_tmp_140336;
    
    mem_param_tmp_140336.references = NULL;
    
    struct memblock mem_param_tmp_140335;
    
    mem_param_tmp_140335.references = NULL;
    
    struct memblock mem_139606;
    
    mem_139606.references = NULL;
    
    struct memblock mem_139604;
    
    mem_139604.references = NULL;
    
    struct memblock ext_mem_139621;
    
    ext_mem_139621.references = NULL;
    
    struct memblock ext_mem_139624;
    
    ext_mem_139624.references = NULL;
    
    struct memblock ext_mem_139627;
    
    ext_mem_139627.references = NULL;
    
    struct memblock ext_mem_139630;
    
    ext_mem_139630.references = NULL;
    
    struct memblock mem_param_139602;
    
    mem_param_139602.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139635;
    
    ext_mem_139635.references = NULL;
    
    struct memblock ext_mem_139636;
    
    ext_mem_139636.references = NULL;
    
    struct memblock mem_139596;
    
    mem_139596.references = NULL;
    
    struct memblock mem_139594;
    
    mem_139594.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock ext_mem_139645;
    
    ext_mem_139645.references = NULL;
    
    struct memblock ext_mem_139646;
    
    ext_mem_139646.references = NULL;
    
    struct memblock mem_139586;
    
    mem_139586.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock ext_mem_139582;
    
    ext_mem_139582.references = NULL;
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140323;
    int64_t zm_lhs_123919 = add64(nR_104488, partitionSizze_104494);
    int64_t zs_lhs_123920 = sub64(zm_lhs_123919, (int64_t) 1);
    bool zzero_123921 = partitionSizze_104494 == (int64_t) 0;
    bool nonzzero_123922 = !zzero_123921;
    bool nonzzero_cert_123923;
    
    if (!nonzzero_123922) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftSMJ.fut:276:43-57\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t numIter_R_123924 = sdiv64(zs_lhs_123920, partitionSizze_104494);
    int64_t zm_lhs_123925 = add64(nS_104489, partitionSizze_104494);
    int64_t zs_lhs_123926 = sub64(zm_lhs_123925, (int64_t) 1);
    int64_t numIter_S_123927 = sdiv64(zs_lhs_123926, partitionSizze_104494);
    
    if (futrts_indicesWithIncrement_11384(ctx, &ext_mem_139582, tR_mem_139580, nR_104488, offset_R_104492) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_139583 = (int64_t) 8 * nR_104488;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140324 = 0; nest_i_140324 < nR_104488; nest_i_140324++) {
        ((int64_t *) mem_139584.mem)[nest_i_140324] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139586, bytes_139583, "mem_139586")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140325 = 0; nest_i_140325 < nR_104488; nest_i_140325++) {
        ((int64_t *) mem_139586.mem)[nest_i_140325] = (int64_t) 0;
    }
    
    bool loop_cond_123931 = slt64((int64_t) 0, numIter_R_123924);
    bool defunc_0_mergeJoin_res_123932;
    int64_t defunc_0_mergeJoin_res_123933;
    int64_t defunc_0_mergeJoin_res_123936;
    bool loop_while_123937;
    int64_t iter_123938;
    int64_t first_relevant_in_S_123941;
    
    if (memblock_set(ctx, &mem_param_139589, &mem_139586, "mem_139586") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &mem_139584, "mem_139584") != 0)
        return 1;
    loop_while_123937 = loop_cond_123931;
    iter_123938 = (int64_t) 0;
    first_relevant_in_S_123941 = (int64_t) 0;
    while (loop_while_123937) {
        int64_t tR_start_123942 = mul64(partitionSizze_104494, iter_123938);
        int64_t min_arg1_123943 = add64(partitionSizze_104494, tR_start_123942);
        int64_t min_res_123944 = smin64(nR_104488, min_arg1_123943);
        int64_t dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 = sub64(min_res_123944, tR_start_123942);
        bool empty_slice_123946 = dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 == (int64_t) 0;
        int64_t m_123947 = sub64(dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, (int64_t) 1);
        int64_t i_p_m_t_s_123948 = add64(tR_start_123942, m_123947);
        bool zzero_leq_i_p_m_t_s_123949 = sle64((int64_t) 0, i_p_m_t_s_123948);
        bool i_p_m_t_s_leq_w_123950 = slt64(i_p_m_t_s_123948, nR_104488);
        bool zzero_lte_i_123951 = sle64((int64_t) 0, tR_start_123942);
        bool i_lte_j_123952 = sle64(tR_start_123942, min_res_123944);
        bool y_123953 = i_p_m_t_s_leq_w_123950 && zzero_lte_i_123951;
        bool y_123954 = zzero_leq_i_p_m_t_s_123949 && y_123953;
        bool forwards_ok_123955 = i_lte_j_123952 && y_123954;
        bool ok_or_empty_123956 = empty_slice_123946 || forwards_ok_123955;
        bool index_certs_123957;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_104488, "].", "-> #0  ftSMJ.fut:283:17-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139593 = (int64_t) 8 * dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945;
        bool cond_123961 = slt64(first_relevant_in_S_123941, numIter_S_123927);
        bool y_123962 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool loop_not_taken_123963 = !cond_123961;
        bool protect_assert_disj_123964 = y_123962 || loop_not_taken_123963;
        bool index_certs_123965;
        
        if (!protect_assert_disj_123964) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:298:26-34\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool x_123968 = sle64((int64_t) 0, m_123947);
        bool y_123969 = slt64(m_123947, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool bounds_check_123970 = x_123968 && y_123969;
        bool protect_assert_disj_123971 = loop_not_taken_123963 || bounds_check_123970;
        bool index_certs_123972;
        
        if (!protect_assert_disj_123971) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:299:42-61\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_124186;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_104488, "].", "-> #0  ftSMJ.fut:199:15-63\n   #1  ftSMJ.fut:309:20-64\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139594, bytes_139593, "mem_139594")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140333 = 0; nest_i_140333 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140333++) {
            ((int64_t *) mem_139594.mem)[nest_i_140333] = (int64_t) -1;
        }
        if (memblock_alloc(ctx, &mem_139596, bytes_139593, "mem_139596")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140334 = 0; nest_i_140334 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140334++) {
            ((int64_t *) mem_139596.mem)[nest_i_140334] = (int64_t) 0;
        }
        
        int32_t gt_lhs_123966;
        
        if (cond_123961) {
            int32_t x_132197 = ((int32_t *) tR_mem_139580.mem)[tR_start_123942];
            
            gt_lhs_123966 = x_132197;
        } else {
            gt_lhs_123966 = 0;
        }
        
        int32_t gt_rhs_123973;
        
        if (cond_123961) {
            int32_t x_132198 = ((int32_t *) tR_mem_139580.mem)[i_p_m_t_s_123948];
            
            gt_rhs_123973 = x_132198;
        } else {
            gt_rhs_123973 = 0;
        }
        
        int64_t ext_139634;
        int64_t ext_139633;
        int64_t ext_139632;
        int64_t ext_139631;
        bool loopres_123975;
        int64_t loopres_123976;
        int64_t loopres_123979;
        bool loop_while_123980;
        int64_t s_iter_123981;
        int64_t minRelevant_123984;
        int64_t ctx_param_ext_139597;
        int64_t ctx_param_ext_139598;
        int64_t ctx_param_ext_139600;
        int64_t ctx_param_ext_139601;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139602, &mem_139594, "mem_139594") != 0)
            return 1;
        ctx_param_ext_139597 = (int64_t) 0;
        ctx_param_ext_139598 = (int64_t) 1;
        ctx_param_ext_139600 = (int64_t) 0;
        ctx_param_ext_139601 = (int64_t) 1;
        loop_while_123980 = cond_123961;
        s_iter_123981 = first_relevant_in_S_123941;
        minRelevant_123984 = first_relevant_in_S_123941;
        while (loop_while_123980) {
            int64_t tS_start_123985 = mul64(partitionSizze_104494, s_iter_123981);
            int64_t min_arg1_123986 = add64(partitionSizze_104494, tS_start_123985);
            int64_t min_res_123987 = smin64(nS_104489, min_arg1_123986);
            int64_t dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 = sub64(min_res_123987, tS_start_123985);
            bool empty_slice_123989 = dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 == (int64_t) 0;
            int64_t m_123990 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 1);
            int64_t i_p_m_t_s_123991 = add64(tS_start_123985, m_123990);
            bool zzero_leq_i_p_m_t_s_123992 = sle64((int64_t) 0, i_p_m_t_s_123991);
            bool i_p_m_t_s_leq_w_123993 = slt64(i_p_m_t_s_123991, nS_104489);
            bool zzero_lte_i_123994 = sle64((int64_t) 0, tS_start_123985);
            bool i_lte_j_123995 = sle64(tS_start_123985, min_res_123987);
            bool y_123996 = i_p_m_t_s_leq_w_123993 && zzero_lte_i_123994;
            bool y_123997 = zzero_leq_i_p_m_t_s_123992 && y_123996;
            bool forwards_ok_123998 = i_lte_j_123995 && y_123997;
            bool ok_or_empty_123999 = empty_slice_123989 || forwards_ok_123998;
            bool index_certs_124000;
            
            if (!ok_or_empty_123999) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tS_start_123985, ":", (long long) min_res_123987, "] out of bounds for array of shape [", (long long) nS_104489, "].", "-> #0  ftSMJ.fut:296:19-38\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_124001 = sle64((int64_t) 0, m_123990);
            bool y_124002 = slt64(m_123990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool bounds_check_124003 = x_124001 && y_124002;
            bool index_certs_124004;
            
            if (!bounds_check_124003) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:298:40-59\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_124007 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool index_certs_124008;
            
            if (!y_124007) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:299:28-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t gt_rhs_124005 = ((int32_t *) tS_mem_139581.mem)[i_p_m_t_s_123991];
            bool defunc_0_gt_res_124006 = slt32(gt_rhs_124005, gt_lhs_123966);
            int32_t gt_lhs_124009 = ((int32_t *) tS_mem_139581.mem)[tS_start_123985];
            bool defunc_0_gt_res_124010 = slt32(gt_rhs_123973, gt_lhs_124009);
            bool thisStillRel_124011 = !defunc_0_gt_res_124010;
            int64_t ext_139623;
            
            if (defunc_0_gt_res_124010) {
                ext_139623 = ctx_param_ext_139597;
            } else {
                ext_139623 = (int64_t) 0;
            }
            
            int64_t ext_139622;
            
            if (defunc_0_gt_res_124010) {
                ext_139622 = ctx_param_ext_139598;
            } else {
                ext_139622 = (int64_t) 1;
            }
            
            int64_t ext_139620;
            
            if (defunc_0_gt_res_124010) {
                ext_139620 = ctx_param_ext_139600;
            } else {
                ext_139620 = (int64_t) 0;
            }
            
            int64_t ext_139619;
            
            if (defunc_0_gt_res_124010) {
                ext_139619 = ctx_param_ext_139601;
            } else {
                ext_139619 = (int64_t) 1;
            }
            
            int64_t ext_139629;
            
            if (defunc_0_gt_res_124006) {
                ext_139629 = ctx_param_ext_139597;
            } else {
                ext_139629 = ext_139623;
            }
            
            int64_t ext_139628;
            
            if (defunc_0_gt_res_124006) {
                ext_139628 = ctx_param_ext_139598;
            } else {
                ext_139628 = ext_139622;
            }
            
            int64_t ext_139626;
            
            if (defunc_0_gt_res_124006) {
                ext_139626 = ctx_param_ext_139600;
            } else {
                ext_139626 = ext_139620;
            }
            
            int64_t ext_139625;
            
            if (defunc_0_gt_res_124006) {
                ext_139625 = ctx_param_ext_139601;
            } else {
                ext_139625 = ext_139619;
            }
            
            int64_t loopres_124012;
            bool loopres_124015;
            int64_t loopres_124016;
            
            if (defunc_0_gt_res_124006) {
                int64_t tmp_132199 = add64((int64_t) 1, s_iter_123981);
                
                if (memblock_set(ctx, &ext_mem_139630, &mem_param_139599, "mem_param_139599") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &mem_param_139602, "mem_param_139602") != 0)
                    return 1;
                loopres_124012 = tmp_132199;
                loopres_124015 = 1;
                loopres_124016 = tmp_132199;
            } else {
                int64_t loopres_f_res_124018;
                bool loopres_f_res_124021;
                
                if (defunc_0_gt_res_124010) {
                    if (memblock_set(ctx, &ext_mem_139624, &mem_param_139599, "mem_param_139599") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_param_139602, "mem_param_139602") != 0)
                        return 1;
                    loopres_f_res_124018 = s_iter_123981;
                    loopres_f_res_124021 = thisStillRel_124011;
                } else {
                    bool index_certs_124022;
                    
                    if (!bounds_check_123970) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:303:50-69\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t gt_rhs_124023 = ((int32_t *) tR_mem_139580.mem)[i_p_m_t_s_123948];
                    bool defunc_0_gt_res_124024 = slt32(gt_rhs_124023, gt_rhs_124005);
                    bool nextRel_124025 = !defunc_0_gt_res_124024;
                    int64_t find_joinTuples_arg3_124026 = add64(offset_S_104493, tS_start_123985);
                    int64_t max_arg1_124027 = sdiv64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 2);
                    int64_t max_res_124028 = smax64((int64_t) 1, max_arg1_124027);
                    bool loop_cond_124029 = slt64((int64_t) 0, max_res_124028);
                    
                    if (memblock_alloc(ctx, &mem_139604, bytes_139593, "mem_139604")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_139606, bytes_139593, "mem_139606")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; i_139367++) {
                        int64_t eta_p_131913 = ((int64_t *) mem_param_139599.mem)[ctx_param_ext_139597 + i_139367 * ctx_param_ext_139598];
                        int64_t slice_139554 = tR_start_123942 + i_139367;
                        int32_t eta_p_131914 = ((int32_t *) tR_mem_139580.mem)[slice_139554];
                        int64_t eta_p_131915 = ((int64_t *) mem_param_139602.mem)[ctx_param_ext_139600 + i_139367 * ctx_param_ext_139601];
                        bool defunc_0_f_res_131916;
                        int64_t defunc_0_f_res_131917;
                        int64_t defunc_0_f_res_131918;
                        bool loop_while_131919;
                        int64_t first_match_131920;
                        int64_t step_131921;
                        
                        loop_while_131919 = loop_cond_124029;
                        first_match_131920 = (int64_t) 0;
                        step_131921 = max_res_124028;
                        while (loop_while_131919) {
                            bool x_131922 = sle64((int64_t) 0, first_match_131920);
                            bool y_131923 = slt64(first_match_131920, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                            bool bounds_check_131924 = x_131922 && y_131923;
                            bool index_certs_131925;
                            
                            if (!bounds_check_131924) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) first_match_131920, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:219:20-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131926 = tS_start_123985 + first_match_131920;
                            int32_t sv_131927 = ((int32_t *) tS_mem_139581.mem)[slice_131926];
                            bool cond_131928 = first_match_131920 == (int64_t) 0;
                            int32_t pv_131929;
                            
                            if (cond_131928) {
                                pv_131929 = sv_131927;
                            } else {
                                int64_t tmp_131930 = sub64(first_match_131920, (int64_t) 1);
                                bool x_131931 = sle64((int64_t) 0, tmp_131930);
                                bool y_131932 = slt64(tmp_131930, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131933 = x_131931 && y_131932;
                                bool index_certs_131934;
                                
                                if (!bounds_check_131933) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131930, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:220:51-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131935 = tS_start_123985 + tmp_131930;
                                int32_t pv_f_res_131936 = ((int32_t *) tS_mem_139581.mem)[slice_131935];
                                
                                pv_131929 = pv_f_res_131936;
                            }
                            
                            bool cond_131937 = first_match_131920 == m_123990;
                            int32_t nv_131938;
                            
                            if (cond_131937) {
                                nv_131938 = sv_131927;
                            } else {
                                int64_t tmp_131939 = add64((int64_t) 1, first_match_131920);
                                bool x_131940 = sle64((int64_t) 0, tmp_131939);
                                bool y_131941 = slt64(tmp_131939, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131942 = x_131940 && y_131941;
                                bool index_certs_131943;
                                
                                if (!bounds_check_131942) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131939, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:221:54-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131944 = tS_start_123985 + tmp_131939;
                                int32_t nv_f_res_131945 = ((int32_t *) tS_mem_139581.mem)[slice_131944];
                                
                                nv_131938 = nv_f_res_131945;
                            }
                            
                            bool defunc_0_eq_res_131946 = sv_131927 == eta_p_131914;
                            bool defunc_0_gt_res_131947 = slt32(pv_131929, eta_p_131914);
                            bool x_131948 = !cond_131928;
                            bool y_131949 = defunc_0_gt_res_131947 && x_131948;
                            bool cond_t_res_131950 = cond_131928 || y_131949;
                            bool x_131951 = defunc_0_eq_res_131946 && cond_t_res_131950;
                            int64_t loopres_131952;
                            int64_t loopres_131953;
                            
                            if (x_131951) {
                                loopres_131952 = first_match_131920;
                                loopres_131953 = (int64_t) 0;
                            } else {
                                int64_t loopres_f_res_131954;
                                int64_t loopres_f_res_131955;
                                
                                if (defunc_0_eq_res_131946) {
                                    int64_t tmp_132200 = sub64(first_match_131920, step_131921);
                                    int64_t max_arg1_132201 = sdiv64(step_131921, (int64_t) 2);
                                    int64_t max_res_132202 = smax64((int64_t) 1, max_arg1_132201);
                                    
                                    loopres_f_res_131954 = tmp_132200;
                                    loopres_f_res_131955 = max_res_132202;
                                } else {
                                    bool defunc_0_gt_res_131959 = slt32(eta_p_131914, sv_131927);
                                    int64_t loopres_f_res_f_res_131960;
                                    int64_t loopres_f_res_f_res_131961;
                                    
                                    if (defunc_0_gt_res_131959) {
                                        int64_t loopres_f_res_f_res_t_res_132203;
                                        int64_t loopres_f_res_f_res_t_res_132204;
                                        
                                        if (cond_t_res_131950) {
                                            loopres_f_res_f_res_t_res_132203 = (int64_t) -1;
                                            loopres_f_res_f_res_t_res_132204 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_132205 = sub64(first_match_131920, step_131921);
                                            int64_t max_arg1_132206 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_132207 = smax64((int64_t) 1, max_arg1_132206);
                                            
                                            loopres_f_res_f_res_t_res_132203 = tmp_132205;
                                            loopres_f_res_f_res_t_res_132204 = max_res_132207;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_t_res_132203;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_t_res_132204;
                                    } else {
                                        bool defunc_0_gt_res_131969 = slt32(eta_p_131914, nv_131938);
                                        bool x_131970 = !cond_131937;
                                        bool y_131971 = defunc_0_gt_res_131969 && x_131970;
                                        bool cond_131972 = cond_131937 || y_131971;
                                        int64_t loopres_f_res_f_res_f_res_131973;
                                        int64_t loopres_f_res_f_res_f_res_131974;
                                        
                                        if (cond_131972) {
                                            loopres_f_res_f_res_f_res_131973 = (int64_t) -1;
                                            loopres_f_res_f_res_f_res_131974 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_131975 = add64(first_match_131920, step_131921);
                                            int64_t max_arg1_131976 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_131977 = smax64((int64_t) 1, max_arg1_131976);
                                            
                                            loopres_f_res_f_res_f_res_131973 = tmp_131975;
                                            loopres_f_res_f_res_f_res_131974 = max_res_131977;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_f_res_131973;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_f_res_131974;
                                    }
                                    loopres_f_res_131954 = loopres_f_res_f_res_131960;
                                    loopres_f_res_131955 = loopres_f_res_f_res_131961;
                                }
                                loopres_131952 = loopres_f_res_131954;
                                loopres_131953 = loopres_f_res_131955;
                            }
                            
                            bool loop_cond_131978 = slt64((int64_t) 0, loopres_131953);
                            bool loop_while_tmp_140348 = loop_cond_131978;
                            int64_t first_match_tmp_140349 = loopres_131952;
                            int64_t step_tmp_140350 = loopres_131953;
                            
                            loop_while_131919 = loop_while_tmp_140348;
                            first_match_131920 = first_match_tmp_140349;
                            step_131921 = step_tmp_140350;
                        }
                        defunc_0_f_res_131916 = loop_while_131919;
                        defunc_0_f_res_131917 = first_match_131920;
                        defunc_0_f_res_131918 = step_131921;
                        
                        int64_t zs_lhs_131979 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, defunc_0_f_res_131917);
                        int64_t max_arg1_131980 = sdiv64(zs_lhs_131979, (int64_t) 2);
                        int64_t max_res_131981 = smax64((int64_t) 1, max_arg1_131980);
                        bool cond_131982 = defunc_0_f_res_131917 == (int64_t) -1;
                        int64_t defunc_0_f_res_131983;
                        
                        if (cond_131982) {
                            defunc_0_f_res_131983 = (int64_t) -1;
                        } else {
                            bool loop_cond_131985 = slt64((int64_t) 0, max_res_131981);
                            bool defunc_0_f_res_f_res_131986;
                            int64_t defunc_0_f_res_f_res_131987;
                            int64_t defunc_0_f_res_f_res_131988;
                            bool loop_while_131989;
                            int64_t last_match_131990;
                            int64_t step_131991;
                            
                            loop_while_131989 = loop_cond_131985;
                            last_match_131990 = m_123990;
                            step_131991 = max_res_131981;
                            while (loop_while_131989) {
                                bool x_131992 = sle64((int64_t) 0, last_match_131990);
                                bool y_131993 = slt64(last_match_131990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131994 = x_131992 && y_131993;
                                bool index_certs_131995;
                                
                                if (!bounds_check_131994) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) last_match_131990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:240:20-34\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131996 = tS_start_123985 + last_match_131990;
                                int32_t sv_131997 = ((int32_t *) tS_mem_139581.mem)[slice_131996];
                                bool cond_131998 = last_match_131990 == defunc_0_f_res_131917;
                                int32_t pv_131999;
                                
                                if (cond_131998) {
                                    pv_131999 = sv_131997;
                                } else {
                                    int64_t tmp_132000 = sub64(last_match_131990, (int64_t) 1);
                                    bool x_132001 = sle64((int64_t) 0, tmp_132000);
                                    bool y_132002 = slt64(tmp_132000, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132003 = x_132001 && y_132002;
                                    bool index_certs_132004;
                                    
                                    if (!bounds_check_132003) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132000, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:241:52-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132005 = tS_start_123985 + tmp_132000;
                                    int32_t pv_f_res_132006 = ((int32_t *) tS_mem_139581.mem)[slice_132005];
                                    
                                    pv_131999 = pv_f_res_132006;
                                }
                                
                                bool cond_132007 = last_match_131990 == m_123990;
                                int32_t nv_132008;
                                
                                if (cond_132007) {
                                    nv_132008 = sv_131997;
                                } else {
                                    int64_t tmp_132009 = add64((int64_t) 1, last_match_131990);
                                    bool x_132010 = sle64((int64_t) 0, tmp_132009);
                                    bool y_132011 = slt64(tmp_132009, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132012 = x_132010 && y_132011;
                                    bool index_certs_132013;
                                    
                                    if (!bounds_check_132012) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132009, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:242:53-69\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132014 = tS_start_123985 + tmp_132009;
                                    int32_t nv_f_res_132015 = ((int32_t *) tS_mem_139581.mem)[slice_132014];
                                    
                                    nv_132008 = nv_f_res_132015;
                                }
                                
                                bool defunc_0_eq_res_132016 = sv_131997 == eta_p_131914;
                                bool defunc_0_gt_res_132017 = slt32(eta_p_131914, nv_132008);
                                bool x_132018 = !cond_132007;
                                bool y_132019 = defunc_0_gt_res_132017 && x_132018;
                                bool cond_t_res_132020 = cond_132007 || y_132019;
                                bool x_132021 = defunc_0_eq_res_132016 && cond_t_res_132020;
                                int64_t loopres_132022;
                                int64_t loopres_132023;
                                
                                if (x_132021) {
                                    loopres_132022 = last_match_131990;
                                    loopres_132023 = (int64_t) 0;
                                } else {
                                    int64_t loopres_f_res_132024;
                                    int64_t loopres_f_res_132025;
                                    
                                    if (defunc_0_eq_res_132016) {
                                        int64_t tmp_132208 = add64(last_match_131990, step_131991);
                                        int64_t max_arg1_132209 = sdiv64(step_131991, (int64_t) 2);
                                        int64_t max_res_132210 = smax64((int64_t) 1, max_arg1_132209);
                                        
                                        loopres_f_res_132024 = tmp_132208;
                                        loopres_f_res_132025 = max_res_132210;
                                    } else {
                                        bool defunc_0_gt_res_132029 = slt32(eta_p_131914, sv_131997);
                                        int64_t loopres_f_res_f_res_132030;
                                        int64_t loopres_f_res_f_res_132031;
                                        
                                        if (defunc_0_gt_res_132029) {
                                            bool defunc_0_gt_res_132211 = slt32(pv_131999, eta_p_131914);
                                            bool x_132212 = !cond_131998;
                                            bool y_132213 = defunc_0_gt_res_132211 && x_132212;
                                            bool cond_132214 = cond_131998 || y_132213;
                                            int64_t loopres_f_res_f_res_t_res_132215;
                                            int64_t loopres_f_res_f_res_t_res_132216;
                                            
                                            if (cond_132214) {
                                                loopres_f_res_f_res_t_res_132215 = (int64_t) -1;
                                                loopres_f_res_f_res_t_res_132216 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132217 = sub64(last_match_131990, step_131991);
                                                int64_t max_arg1_132218 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132219 = smax64((int64_t) 1, max_arg1_132218);
                                                
                                                loopres_f_res_f_res_t_res_132215 = tmp_132217;
                                                loopres_f_res_f_res_t_res_132216 = max_res_132219;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_t_res_132215;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_t_res_132216;
                                        } else {
                                            int64_t loopres_f_res_f_res_f_res_132041;
                                            int64_t loopres_f_res_f_res_f_res_132042;
                                            
                                            if (cond_t_res_132020) {
                                                loopres_f_res_f_res_f_res_132041 = (int64_t) -1;
                                                loopres_f_res_f_res_f_res_132042 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132043 = add64(last_match_131990, step_131991);
                                                int64_t max_arg1_132044 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132045 = smax64((int64_t) 1, max_arg1_132044);
                                                
                                                loopres_f_res_f_res_f_res_132041 = tmp_132043;
                                                loopres_f_res_f_res_f_res_132042 = max_res_132045;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_f_res_132041;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_f_res_132042;
                                        }
                                        loopres_f_res_132024 = loopres_f_res_f_res_132030;
                                        loopres_f_res_132025 = loopres_f_res_f_res_132031;
                                    }
                                    loopres_132022 = loopres_f_res_132024;
                                    loopres_132023 = loopres_f_res_132025;
                                }
                                
                                bool loop_cond_132046 = slt64((int64_t) 0, loopres_132023);
                                bool loop_while_tmp_140351 = loop_cond_132046;
                                int64_t last_match_tmp_140352 = loopres_132022;
                                int64_t step_tmp_140353 = loopres_132023;
                                
                                loop_while_131989 = loop_while_tmp_140351;
                                last_match_131990 = last_match_tmp_140352;
                                step_131991 = step_tmp_140353;
                            }
                            defunc_0_f_res_f_res_131986 = loop_while_131989;
                            defunc_0_f_res_f_res_131987 = last_match_131990;
                            defunc_0_f_res_f_res_131988 = step_131991;
                            defunc_0_f_res_131983 = defunc_0_f_res_f_res_131987;
                        }
                        
                        bool cond_132047 = slt64(defunc_0_f_res_131983, (int64_t) 0);
                        int64_t cm_132048;
                        
                        if (cond_132047) {
                            cm_132048 = (int64_t) 0;
                        } else {
                            int64_t zp_lhs_132049 = sub64(defunc_0_f_res_131983, defunc_0_f_res_131917);
                            int64_t cm_f_res_132050 = add64((int64_t) 1, zp_lhs_132049);
                            
                            cm_132048 = cm_f_res_132050;
                        }
                        
                        bool cond_132053 = slt64(defunc_0_f_res_131917, (int64_t) 0);
                        int64_t lifted_lambda_res_132054;
                        
                        if (cond_132053) {
                            lifted_lambda_res_132054 = defunc_0_f_res_131917;
                        } else {
                            int64_t lifted_lambda_res_f_res_132055 = add64(find_joinTuples_arg3_124026, defunc_0_f_res_131917);
                            
                            lifted_lambda_res_132054 = lifted_lambda_res_f_res_132055;
                        }
                        
                        bool cond_132057 = slt64(eta_p_131915, (int64_t) 0);
                        int64_t lifted_lambda_res_132058;
                        
                        if (cond_132057) {
                            lifted_lambda_res_132058 = lifted_lambda_res_132054;
                        } else {
                            lifted_lambda_res_132058 = eta_p_131915;
                        }
                        
                        int64_t defunc_0_f_res_132061 = add64(eta_p_131913, cm_132048);
                        
                        ((int64_t *) mem_139604.mem)[i_139367] = defunc_0_f_res_132061;
                        ((int64_t *) mem_139606.mem)[i_139367] = lifted_lambda_res_132058;
                    }
                    
                    int64_t tmp_124182 = add64((int64_t) 1, s_iter_123981);
                    
                    if (memblock_set(ctx, &ext_mem_139624, &mem_139604, "mem_139604") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_139606, "mem_139606") != 0)
                        return 1;
                    loopres_f_res_124018 = tmp_124182;
                    loopres_f_res_124021 = nextRel_124025;
                }
                if (memblock_set(ctx, &ext_mem_139630, &ext_mem_139624, "ext_mem_139624") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &ext_mem_139621, "ext_mem_139621") != 0)
                    return 1;
                loopres_124012 = loopres_f_res_124018;
                loopres_124015 = loopres_f_res_124021;
                loopres_124016 = minRelevant_123984;
            }
            
            bool cond_124183 = slt64(loopres_124012, numIter_S_123927);
            bool x_124184 = loopres_124015 && cond_124183;
            
            if (memblock_set(ctx, &mem_param_tmp_140335, &ext_mem_139630, "ext_mem_139630") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140336, &ext_mem_139627, "ext_mem_139627") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_140337 = ext_139629;
            int64_t ctx_param_ext_tmp_140338 = ext_139628;
            int64_t ctx_param_ext_tmp_140339 = ext_139626;
            int64_t ctx_param_ext_tmp_140340 = ext_139625;
            bool loop_while_tmp_140341 = x_124184;
            int64_t s_iter_tmp_140342 = loopres_124012;
            int64_t minRelevant_tmp_140345 = loopres_124016;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139602, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
                return 1;
            ctx_param_ext_139597 = ctx_param_ext_tmp_140337;
            ctx_param_ext_139598 = ctx_param_ext_tmp_140338;
            ctx_param_ext_139600 = ctx_param_ext_tmp_140339;
            ctx_param_ext_139601 = ctx_param_ext_tmp_140340;
            loop_while_123980 = loop_while_tmp_140341;
            s_iter_123981 = s_iter_tmp_140342;
            minRelevant_123984 = minRelevant_tmp_140345;
        }
        if (memblock_set(ctx, &ext_mem_139636, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139635, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        ext_139634 = ctx_param_ext_139597;
        ext_139633 = ctx_param_ext_139598;
        ext_139632 = ctx_param_ext_139600;
        ext_139631 = ctx_param_ext_139601;
        loopres_123975 = loop_while_123980;
        loopres_123976 = s_iter_123981;
        loopres_123979 = minRelevant_123984;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139638, bytes_139583, "mem_139638")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139592.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_104488});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139635.mem, ext_139632, (int64_t []) {ext_139631}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139640, bytes_139583, "mem_139640")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_104488});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139636.mem, ext_139634, (int64_t []) {ext_139633}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        
        int64_t tmp_124190 = add64((int64_t) 1, iter_123938);
        bool loop_cond_124191 = slt64(tmp_124190, numIter_R_123924);
        
        if (memblock_set(ctx, &mem_param_tmp_140326, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &mem_139638, "mem_139638") != 0)
            return 1;
        
        bool loop_while_tmp_140328 = loop_cond_124191;
        int64_t iter_tmp_140329 = tmp_124190;
        int64_t first_relevant_in_S_tmp_140332 = loopres_123979;
        
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        loop_while_123937 = loop_while_tmp_140328;
        iter_123938 = iter_tmp_140329;
        first_relevant_in_S_123941 = first_relevant_in_S_tmp_140332;
    }
    if (memblock_set(ctx, &ext_mem_139646, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139645, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    defunc_0_mergeJoin_res_123932 = loop_while_123937;
    defunc_0_mergeJoin_res_123933 = iter_123938;
    defunc_0_mergeJoin_res_123936 = first_relevant_in_S_123941;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
        return 1;
    if (mem_139648_cached_sizze_140667 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139648, &mem_139648_cached_sizze_140667, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139650_cached_sizze_140668 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139650, &mem_139650_cached_sizze_140668, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139378;
    int64_t scanacc_139372 = (int64_t) 0;
    
    for (int64_t i_139375 = 0; i_139375 < nR_104488; i_139375++) {
        int64_t zg_lhs_131722 = ((int64_t *) ext_mem_139646.mem)[i_139375];
        bool lifted_lambda_res_131723 = slt64((int64_t) 0, zg_lhs_131722);
        int64_t defunc_0_f_res_131724 = btoi_bool_i64(lifted_lambda_res_131723);
        int64_t defunc_0_op_res_124201 = add64(defunc_0_f_res_131724, scanacc_139372);
        
        ((int64_t *) mem_139648)[i_139375] = defunc_0_op_res_124201;
        ((int64_t *) mem_139650)[i_139375] = defunc_0_f_res_131724;
        
        int64_t scanacc_tmp_140354 = defunc_0_op_res_124201;
        
        scanacc_139372 = scanacc_tmp_140354;
    }
    discard_139378 = scanacc_139372;
    
    bool cond_124202 = nR_104488 == (int64_t) 0;
    bool x_124203 = !cond_124202;
    int64_t tmp_124204 = sub64(nR_104488, (int64_t) 1);
    bool x_124205 = sle64((int64_t) 0, tmp_124204);
    bool y_124206 = slt64(tmp_124204, nR_104488);
    bool bounds_check_124207 = x_124205 && y_124206;
    bool protect_assert_disj_124208 = cond_124202 || bounds_check_124207;
    bool index_certs_124209;
    
    if (!protect_assert_disj_124208) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_124204, "] out of bounds for array of shape [", (long long) nR_104488, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124210;
    
    if (x_124203) {
        int64_t x_132222 = ((int64_t *) mem_139648)[tmp_124204];
        
        m_f_res_124210 = x_132222;
    } else {
        m_f_res_124210 = (int64_t) 0;
    }
    
    int64_t m_124212;
    
    if (cond_124202) {
        m_124212 = (int64_t) 0;
    } else {
        m_124212 = m_f_res_124210;
    }
    
    int64_t m_124222 = sub64(m_124212, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124224 = slt64(m_124222, nR_104488);
    bool zzero_leq_i_p_m_t_s_124223 = sle64((int64_t) 0, m_124222);
    bool y_124226 = zzero_leq_i_p_m_t_s_124223 && i_p_m_t_s_leq_w_124224;
    bool i_lte_j_124225 = sle64((int64_t) 0, m_124212);
    bool forwards_ok_124227 = i_lte_j_124225 && y_124226;
    bool eq_x_zz_124219 = (int64_t) 0 == m_f_res_124210;
    bool p_and_eq_x_y_124220 = x_124203 && eq_x_zz_124219;
    bool empty_slice_124221 = cond_124202 || p_and_eq_x_y_124220;
    bool ok_or_empty_124228 = empty_slice_124221 || forwards_ok_124227;
    bool index_certs_124229;
    
    if (!ok_or_empty_124228) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124212, "] out of bounds for array of shape [", (long long) nR_104488, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139663 = (int64_t) 8 * m_124212;
    
    if (mem_139664_cached_sizze_140669 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139664, &mem_139664_cached_sizze_140669, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140357 = 0; i_140357 < m_124212; i_140357++) {
        int64_t x_140358 = (int64_t) 0 + i_140357 * (int64_t) 1;
        
        ((int64_t *) mem_139664)[i_140357] = x_140358;
    }
    for (int64_t write_iter_139379 = 0; write_iter_139379 < nR_104488; write_iter_139379++) {
        int64_t write_iv_139381 = ((int64_t *) mem_139650)[write_iter_139379];
        int64_t write_iv_139382 = ((int64_t *) mem_139648)[write_iter_139379];
        bool cond_131712 = write_iv_139381 == (int64_t) 1;
        int64_t lifted_lambda_res_131713;
        
        if (cond_131712) {
            int64_t lifted_lambda_res_t_res_132223 = sub64(write_iv_139382, (int64_t) 1);
            
            lifted_lambda_res_131713 = lifted_lambda_res_t_res_132223;
        } else {
            lifted_lambda_res_131713 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131713) && slt64(lifted_lambda_res_131713, m_124212)) {
            ((int64_t *) mem_139664)[lifted_lambda_res_131713] = write_iter_139379;
        }
    }
    if (mem_139672_cached_sizze_140670 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139672, &mem_139672_cached_sizze_140670, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139674_cached_sizze_140671 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139674, &mem_139674_cached_sizze_140671, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t bytes_139675 = (int64_t) 4 * m_124212;
    
    if (mem_139676_cached_sizze_140672 < bytes_139675) {
        err = lexical_realloc(ctx, &mem_139676, &mem_139676_cached_sizze_140672, bytes_139675);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139678_cached_sizze_140673 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139678, &mem_139678_cached_sizze_140673, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139680_cached_sizze_140674 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139680, &mem_139680_cached_sizze_140674, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139682_cached_sizze_140675 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139682, &mem_139682_cached_sizze_140675, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139684_cached_sizze_140676 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139684, &mem_139684_cached_sizze_140676, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139409;
    int64_t discard_139410;
    int64_t scanacc_139392;
    int64_t scanacc_139393;
    
    scanacc_139392 = (int64_t) 0;
    scanacc_139393 = (int64_t) 0;
    for (int64_t i_139401 = 0; i_139401 < m_124212; i_139401++) {
        int64_t eta_p_131730 = ((int64_t *) mem_139664)[i_139401];
        bool x_131732 = sle64((int64_t) 0, eta_p_131730);
        bool y_131733 = slt64(eta_p_131730, nR_104488);
        bool bounds_check_131734 = x_131732 && y_131733;
        bool index_certs_131735;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_104488, "].", "-> #0  ftSMJ.fut:328:40-50\n   #1  ftRelational.fut:167:78-81\n   #2  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_131748;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_104488, "].", "-> #0  ftSMJ.fut:329:51-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:329:39-87\n   #3  ftSMJ.fut:373:7-374:73\n   #4  ftRelational.fut:167:78-81\n   #5  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_131736 = ((int64_t *) ext_mem_139646.mem)[eta_p_131730];
        bool lifted_lambda_res_131738 = slt64((int64_t) 1, lifted_lambda_res_131736);
        int64_t defunc_0_f_res_131739 = btoi_bool_i64(lifted_lambda_res_131738);
        int32_t tmp_131749 = ((int32_t *) tR_mem_139580.mem)[eta_p_131730];
        int64_t tmp_131750 = ((int64_t *) ext_mem_139582.mem)[eta_p_131730];
        int64_t tmp_131751 = ((int64_t *) ext_mem_139645.mem)[eta_p_131730];
        int64_t defunc_0_op_res_124345 = add64(defunc_0_f_res_131739, scanacc_139392);
        int64_t lifted_lambda_res_124252 = add64(lifted_lambda_res_131736, scanacc_139393);
        
        ((int64_t *) mem_139672)[i_139401] = defunc_0_op_res_124345;
        ((int64_t *) mem_139674)[i_139401] = lifted_lambda_res_124252;
        ((int32_t *) mem_139676)[i_139401] = tmp_131749;
        ((int64_t *) mem_139678)[i_139401] = tmp_131750;
        ((int64_t *) mem_139680)[i_139401] = tmp_131751;
        ((int64_t *) mem_139682)[i_139401] = defunc_0_f_res_131739;
        ((int64_t *) mem_139684)[i_139401] = lifted_lambda_res_131736;
        
        int64_t scanacc_tmp_140360 = defunc_0_op_res_124345;
        int64_t scanacc_tmp_140361 = lifted_lambda_res_124252;
        
        scanacc_139392 = scanacc_tmp_140360;
        scanacc_139393 = scanacc_tmp_140361;
    }
    discard_139409 = scanacc_139392;
    discard_139410 = scanacc_139393;
    if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
        return 1;
    if (mem_139728_cached_sizze_140677 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139728, &mem_139728_cached_sizze_140677, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139413 = 0; i_139413 < m_124212; i_139413++) {
        int64_t zv_lhs_131676 = add64((int64_t) -1, i_139413);
        int64_t tmp_131677 = smod64(zv_lhs_131676, m_124212);
        int64_t lifted_lambda_res_131678 = ((int64_t *) mem_139674)[tmp_131677];
        bool cond_131680 = i_139413 == (int64_t) 0;
        int64_t lifted_lambda_res_131681;
        
        if (cond_131680) {
            lifted_lambda_res_131681 = (int64_t) 0;
        } else {
            lifted_lambda_res_131681 = lifted_lambda_res_131678;
        }
        ((int64_t *) mem_139728)[i_139413] = lifted_lambda_res_131681;
    }
    
    bool cond_124264 = slt64((int64_t) 0, m_124212);
    bool y_124265 = slt64(m_124222, m_124212);
    bool bounds_check_124266 = zzero_leq_i_p_m_t_s_124223 && y_124265;
    bool loop_not_taken_124267 = !cond_124264;
    bool protect_assert_disj_124268 = bounds_check_124266 || loop_not_taken_124267;
    bool index_certs_124269;
    
    if (!protect_assert_disj_124268) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  ftSMJ.fut:335:10-41\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_lhs_124270;
    
    if (cond_124264) {
        int64_t x_132224 = ((int64_t *) mem_139728)[m_124222];
        
        zp_lhs_124270 = x_132224;
    } else {
        zp_lhs_124270 = (int64_t) 0;
    }
    
    int64_t zp_rhs_124272;
    
    if (cond_124264) {
        int64_t x_132225 = ((int64_t *) mem_139684)[m_124222];
        
        zp_rhs_124272 = x_132225;
    } else {
        zp_rhs_124272 = (int64_t) 0;
    }
    
    int64_t n_pairs_t_res_124274 = add64(zp_lhs_124270, zp_rhs_124272);
    int64_t n_pairs_124275;
    
    if (cond_124264) {
        n_pairs_124275 = n_pairs_t_res_124274;
    } else {
        n_pairs_124275 = (int64_t) 0;
    }
    
    int64_t bytes_139735 = (int64_t) 4 * n_pairs_124275;
    int64_t bytes_139737 = (int64_t) 8 * n_pairs_124275;
    bool zzero_124281 = scatter_psizze_104495 == (int64_t) 0;
    bool nonzzero_124282 = !zzero_124281;
    bool nonzzero_cert_124283;
    
    if (!nonzzero_124282) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_124346 = !empty_slice_124221;
    bool protect_assert_disj_124347 = empty_slice_124221 || bounds_check_124266;
    bool index_certs_124348;
    
    if (!protect_assert_disj_124347) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124349;
    
    if (x_124346) {
        int64_t x_132230 = ((int64_t *) mem_139672)[m_124222];
        
        m_f_res_124349 = x_132230;
    } else {
        m_f_res_124349 = (int64_t) 0;
    }
    
    int64_t m_124351;
    
    if (empty_slice_124221) {
        m_124351 = (int64_t) 0;
    } else {
        m_124351 = m_f_res_124349;
    }
    
    int64_t m_124361 = sub64(m_124351, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124363 = slt64(m_124361, m_124212);
    bool zzero_leq_i_p_m_t_s_124362 = sle64((int64_t) 0, m_124361);
    bool y_124365 = zzero_leq_i_p_m_t_s_124362 && i_p_m_t_s_leq_w_124363;
    bool i_lte_j_124364 = sle64((int64_t) 0, m_124351);
    bool forwards_ok_124366 = i_lte_j_124364 && y_124365;
    bool eq_x_zz_124358 = (int64_t) 0 == m_f_res_124349;
    bool p_and_eq_x_y_124359 = x_124346 && eq_x_zz_124358;
    bool empty_slice_124360 = empty_slice_124221 || p_and_eq_x_y_124359;
    bool ok_or_empty_124367 = empty_slice_124360 || forwards_ok_124366;
    bool index_certs_124368;
    
    if (!ok_or_empty_124367) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124351, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:167:78-81\n   #4  ftRelational.fut:158:1-167:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139783 = (int64_t) 8 * m_124351;
    
    if (memblock_alloc(ctx, &mem_139736, bytes_139735, "mem_139736")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140370 = 0; nest_i_140370 < n_pairs_124275; nest_i_140370++) {
        ((int32_t *) mem_139736.mem)[nest_i_140370] = 0;
    }
    if (memblock_alloc(ctx, &mem_139738, bytes_139737, "mem_139738")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140371 = 0; nest_i_140371 < n_pairs_124275; nest_i_140371++) {
        ((int64_t *) mem_139738.mem)[nest_i_140371] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139740, bytes_139737, "mem_139740")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140372 = 0; nest_i_140372 < n_pairs_124275; nest_i_140372++) {
        ((int64_t *) mem_139740.mem)[nest_i_140372] = (int64_t) -1;
    }
    
    int64_t zm_lhs_124279 = add64(scatter_psizze_104495, n_pairs_124275);
    int64_t zs_lhs_124280 = sub64(zm_lhs_124279, (int64_t) 1);
    int64_t m_124284 = sdiv64(zs_lhs_124280, scatter_psizze_104495);
    bool loop_cond_124285 = slt64((int64_t) 0, m_124284);
    bool partitioned_scatter_res_124286;
    int64_t partitioned_scatter_res_124290;
    bool loop_while_124291;
    int64_t p_124295;
    
    loop_while_124291 = loop_cond_124285;
    p_124295 = (int64_t) 0;
    while (loop_while_124291) {
        int64_t lower_bound_124296 = mul64(scatter_psizze_104495, p_124295);
        int64_t min_arg1_124297 = add64(scatter_psizze_104495, lower_bound_124296);
        int64_t min_res_124298 = smin64(n_pairs_124275, min_arg1_124297);
        int64_t j_m_i_124299 = sub64(min_res_124298, lower_bound_124296);
        bool empty_slice_124300 = j_m_i_124299 == (int64_t) 0;
        int64_t m_124301 = sub64(j_m_i_124299, (int64_t) 1);
        int64_t i_p_m_t_s_124302 = add64(lower_bound_124296, m_124301);
        bool zzero_leq_i_p_m_t_s_124303 = sle64((int64_t) 0, i_p_m_t_s_124302);
        bool i_p_m_t_s_leq_w_124304 = slt64(i_p_m_t_s_124302, n_pairs_124275);
        bool zzero_lte_i_124305 = sle64((int64_t) 0, lower_bound_124296);
        bool i_lte_j_124306 = sle64(lower_bound_124296, min_res_124298);
        bool y_124307 = i_p_m_t_s_leq_w_124304 && zzero_lte_i_124305;
        bool y_124308 = zzero_leq_i_p_m_t_s_124303 && y_124307;
        bool forwards_ok_124309 = i_lte_j_124306 && y_124308;
        bool ok_or_empty_124310 = empty_slice_124300 || forwards_ok_124309;
        bool index_certs_124311;
        
        if (!ok_or_empty_124310) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124296, ":", (long long) min_res_124298, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139750 = (int64_t) 4 * j_m_i_124299;
        int64_t bytes_139752 = (int64_t) 8 * j_m_i_124299;
        
        if (mem_139751_cached_sizze_140678 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139751, &mem_139751_cached_sizze_140678, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139736.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139753_cached_sizze_140679 < bytes_139752) {
            err = lexical_realloc(ctx, &mem_139753, &mem_139753_cached_sizze_140679, bytes_139752);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139738.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139755_cached_sizze_140680 < bytes_139752) {
            err = lexical_realloc(ctx, &mem_139755, &mem_139755_cached_sizze_140680, bytes_139752);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139740.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        for (int64_t write_iter_139415 = 0; write_iter_139415 < m_124212; write_iter_139415++) {
            int64_t write_iv_139419 = ((int64_t *) mem_139728)[write_iter_139415];
            int32_t write_iv_139420 = ((int32_t *) mem_139676)[write_iter_139415];
            int64_t write_iv_139421 = ((int64_t *) mem_139678)[write_iter_139415];
            int64_t write_iv_139422 = ((int64_t *) mem_139680)[write_iter_139415];
            bool cond_132183 = sle64(lower_bound_124296, write_iv_139419);
            bool cond_t_res_132184 = slt64(write_iv_139419, min_res_124298);
            bool x_132185 = cond_132183 && cond_t_res_132184;
            int64_t lifted_lambda_res_132186;
            
            if (x_132185) {
                int64_t lifted_lambda_res_t_res_132226 = sub64(write_iv_139419, lower_bound_124296);
                
                lifted_lambda_res_132186 = lifted_lambda_res_t_res_132226;
            } else {
                lifted_lambda_res_132186 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int32_t *) mem_139751)[lifted_lambda_res_132186] = write_iv_139420;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139753)[lifted_lambda_res_132186] = write_iv_139421;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139755)[lifted_lambda_res_132186] = write_iv_139422;
            }
        }
        
        int64_t tmp_124325 = add64((int64_t) 1, p_124295);
        
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139736.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139738.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139740.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        
        bool loop_cond_124336 = slt64(tmp_124325, m_124284);
        bool loop_while_tmp_140373 = loop_cond_124336;
        int64_t p_tmp_140377 = tmp_124325;
        
        loop_while_124291 = loop_while_tmp_140373;
        p_124295 = p_tmp_140377;
    }
    partitioned_scatter_res_124286 = loop_while_124291;
    partitioned_scatter_res_124290 = p_124295;
    if (mem_139784_cached_sizze_140681 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139784, &mem_139784_cached_sizze_140681, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139784, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139684, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    if (mem_139786_cached_sizze_140682 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139786, &mem_139786_cached_sizze_140682, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139786, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139728, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    for (int64_t write_iter_139426 = 0; write_iter_139426 < m_124212; write_iter_139426++) {
        int64_t write_iv_139429 = ((int64_t *) mem_139682)[write_iter_139426];
        int64_t write_iv_139430 = ((int64_t *) mem_139672)[write_iter_139426];
        int64_t write_iv_139431 = ((int64_t *) mem_139728)[write_iter_139426];
        int64_t write_iv_139432 = ((int64_t *) mem_139684)[write_iter_139426];
        bool cond_131664 = write_iv_139429 == (int64_t) 1;
        int64_t lifted_lambda_res_131665;
        
        if (cond_131664) {
            int64_t lifted_lambda_res_t_res_132231 = sub64(write_iv_139430, (int64_t) 1);
            
            lifted_lambda_res_131665 = lifted_lambda_res_t_res_132231;
        } else {
            lifted_lambda_res_131665 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139786)[lifted_lambda_res_131665] = write_iv_139431;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139784)[lifted_lambda_res_131665] = write_iv_139432;
        }
    }
    
    bool cond_124378 = slt64((int64_t) 0, m_124351);
    bool loop_cond_t_res_124379 = slt64(m_124212, n_pairs_124275);
    bool x_124380 = cond_124378 && loop_cond_t_res_124379;
    bool joinTups_to_joinPairs_InnerJoin_res_124381;
    int64_t joinTups_to_joinPairs_InnerJoin_res_124385;
    bool loop_while_124386;
    int64_t p_124390;
    
    if (memblock_set(ctx, &mem_param_139801, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139804, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139807, &mem_139740, "mem_139740") != 0)
        return 1;
    loop_while_124386 = x_124380;
    p_124390 = (int64_t) 0;
    while (loop_while_124386) {
        bool x_124391 = sle64((int64_t) 0, p_124390);
        bool y_124392 = slt64(p_124390, m_124351);
        bool bounds_check_124393 = x_124391 && y_124392;
        bool index_certs_124394;
        
        if (!bounds_check_124393) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_124390, "] out of bounds for array of shape [", (long long) m_124351, "].", "-> #0  ftSMJ.fut:350:13-42\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124395 = ((int64_t *) mem_139786)[p_124390];
        int64_t loopres_124396 = ((int64_t *) mem_139784)[p_124390];
        bool x_124397 = sle64((int64_t) 0, loopres_124395);
        bool y_124398 = slt64(loopres_124395, n_pairs_124275);
        bool bounds_check_124399 = x_124397 && y_124398;
        bool index_certs_124400;
        
        if (!bounds_check_124399) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:352:52-61\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139808 = (int64_t) 4 * loopres_124396;
        int64_t bytes_139810 = (int64_t) 8 * loopres_124396;
        int64_t tmp_124411 = add64(loopres_124395, loopres_124396);
        bool empty_slice_124415 = loopres_124396 == (int64_t) 0;
        int64_t m_124416 = sub64(loopres_124396, (int64_t) 1);
        int64_t i_p_m_t_s_124417 = add64(loopres_124395, m_124416);
        bool zzero_leq_i_p_m_t_s_124418 = sle64((int64_t) 0, i_p_m_t_s_124417);
        bool i_p_m_t_s_leq_w_124419 = slt64(i_p_m_t_s_124417, n_pairs_124275);
        bool i_lte_j_124420 = sle64(loopres_124395, tmp_124411);
        bool y_124421 = x_124397 && i_p_m_t_s_leq_w_124419;
        bool y_124422 = zzero_leq_i_p_m_t_s_124418 && y_124421;
        bool forwards_ok_124423 = i_lte_j_124420 && y_124422;
        bool ok_or_empty_124424 = empty_slice_124415 || forwards_ok_124423;
        bool index_certs_124425;
        
        if (!ok_or_empty_124424) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, ":", (long long) tmp_124411, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:356:14-55\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:167:78-81\n   #3  ftRelational.fut:158:1-167:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t loopres_124401 = ((int32_t *) mem_param_139801.mem)[loopres_124395];
        int64_t loopres_124402 = ((int64_t *) mem_param_139804.mem)[loopres_124395];
        int64_t loopres_124403 = ((int64_t *) mem_param_139807.mem)[loopres_124395];
        
        if (mem_139809_cached_sizze_140683 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139809, &mem_139809_cached_sizze_140683, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140391 = 0; nest_i_140391 < loopres_124396; nest_i_140391++) {
            ((int32_t *) mem_139809)[nest_i_140391] = loopres_124401;
        }
        if (mem_139811_cached_sizze_140684 < bytes_139810) {
            err = lexical_realloc(ctx, &mem_139811, &mem_139811_cached_sizze_140684, bytes_139810);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140392 = 0; nest_i_140392 < loopres_124396; nest_i_140392++) {
            ((int64_t *) mem_139811)[nest_i_140392] = loopres_124402;
        }
        if (mem_139813_cached_sizze_140685 < bytes_139810) {
            err = lexical_realloc(ctx, &mem_139813, &mem_139813_cached_sizze_140685, bytes_139810);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139437 = 0; i_139437 < loopres_124396; i_139437++) {
            int64_t tmp_124409 = add64(loopres_124403, i_139437);
            
            ((int64_t *) mem_139813)[i_139437] = tmp_124409;
        }
        
        int64_t tmp_124410 = add64((int64_t) 1, p_124390);
        
        if (memblock_alloc(ctx, &mem_139821, bytes_139735, "mem_139821")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139821.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139801.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139823, bytes_139737, "mem_139823")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139804.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139825, bytes_139737, "mem_139825")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139807.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139821.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139809, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139811, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139813, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        
        bool cond_124429 = slt64(tmp_124410, m_124351);
        bool x_124430 = loop_cond_t_res_124379 && cond_124429;
        
        if (memblock_set(ctx, &mem_param_tmp_140383, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140384, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140385, &mem_139825, "mem_139825") != 0)
            return 1;
        
        bool loop_while_tmp_140386 = x_124430;
        int64_t p_tmp_140390 = tmp_124410;
        
        if (memblock_set(ctx, &mem_param_139801, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139804, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139807, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        loop_while_124386 = loop_while_tmp_140386;
        p_124390 = p_tmp_140390;
    }
    if (memblock_set(ctx, &ext_mem_139834, &mem_param_139801, "mem_param_139801") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139833, &mem_param_139804, "mem_param_139804") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139832, &mem_param_139807, "mem_param_139807") != 0)
        return 1;
    joinTups_to_joinPairs_InnerJoin_res_124381 = loop_while_124386;
    joinTups_to_joinPairs_InnerJoin_res_124385 = p_124390;
    if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139836, bytes_139735, "mem_139836")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139836.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139834.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139838, bytes_139737, "mem_139838")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139838.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139833.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139840, bytes_139737, "mem_139840")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139840.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139832.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139838, "mem_139838") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139840, "mem_139840") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140322, &mem_139836, "mem_139836") != 0)
        return 1;
    prim_out_140323 = n_pairs_124275;
    if (memblock_set(ctx, &*mem_out_p_140663, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140664, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140665, &mem_out_140322, "mem_out_140322") != 0)
        return 1;
    *out_prim_out_140666 = prim_out_140323;
    
  cleanup:
    {
        free(mem_139648);
        free(mem_139650);
        free(mem_139664);
        free(mem_139672);
        free(mem_139674);
        free(mem_139676);
        free(mem_139678);
        free(mem_139680);
        free(mem_139682);
        free(mem_139684);
        free(mem_139728);
        free(mem_139751);
        free(mem_139753);
        free(mem_139755);
        free(mem_139784);
        free(mem_139786);
        free(mem_139809);
        free(mem_139811);
        free(mem_139813);
        if (memblock_unref(ctx, &mem_139840, "mem_139840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139838, "mem_139838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139836, "mem_139836") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139825, "mem_139825") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139807, "mem_param_139807") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139804, "mem_param_139804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139801, "mem_param_139801") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139638, "mem_139638") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139606, "mem_139606") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139604, "mem_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139621, "ext_mem_139621") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139624, "ext_mem_139624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139627, "ext_mem_139627") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139630, "ext_mem_139630") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140322, "mem_out_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_long(struct futhark_context *ctx, struct memblock *mem_out_p_140686, struct memblock *mem_out_p_140687, struct memblock *mem_out_p_140688, int64_t *out_prim_out_140689, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_106933, int64_t nS_106934, int64_t offset_R_106937, int64_t offset_S_106938, int64_t partitionSizze_106939, int64_t scatter_psizze_106940)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139648_cached_sizze_140690 = 0;
    unsigned char *mem_139648 = NULL;
    int64_t mem_139650_cached_sizze_140691 = 0;
    unsigned char *mem_139650 = NULL;
    int64_t mem_139664_cached_sizze_140692 = 0;
    unsigned char *mem_139664 = NULL;
    int64_t mem_139672_cached_sizze_140693 = 0;
    unsigned char *mem_139672 = NULL;
    int64_t mem_139674_cached_sizze_140694 = 0;
    unsigned char *mem_139674 = NULL;
    int64_t mem_139676_cached_sizze_140695 = 0;
    unsigned char *mem_139676 = NULL;
    int64_t mem_139678_cached_sizze_140696 = 0;
    unsigned char *mem_139678 = NULL;
    int64_t mem_139680_cached_sizze_140697 = 0;
    unsigned char *mem_139680 = NULL;
    int64_t mem_139682_cached_sizze_140698 = 0;
    unsigned char *mem_139682 = NULL;
    int64_t mem_139684_cached_sizze_140699 = 0;
    unsigned char *mem_139684 = NULL;
    int64_t mem_139728_cached_sizze_140700 = 0;
    unsigned char *mem_139728 = NULL;
    int64_t mem_139751_cached_sizze_140701 = 0;
    unsigned char *mem_139751 = NULL;
    int64_t mem_139753_cached_sizze_140702 = 0;
    unsigned char *mem_139753 = NULL;
    int64_t mem_139755_cached_sizze_140703 = 0;
    unsigned char *mem_139755 = NULL;
    int64_t mem_139784_cached_sizze_140704 = 0;
    unsigned char *mem_139784 = NULL;
    int64_t mem_139786_cached_sizze_140705 = 0;
    unsigned char *mem_139786 = NULL;
    int64_t mem_139809_cached_sizze_140706 = 0;
    unsigned char *mem_139809 = NULL;
    int64_t mem_139811_cached_sizze_140707 = 0;
    unsigned char *mem_139811 = NULL;
    int64_t mem_139813_cached_sizze_140708 = 0;
    unsigned char *mem_139813 = NULL;
    struct memblock mem_139840;
    
    mem_139840.references = NULL;
    
    struct memblock mem_139838;
    
    mem_139838.references = NULL;
    
    struct memblock mem_139836;
    
    mem_139836.references = NULL;
    
    struct memblock mem_param_tmp_140385;
    
    mem_param_tmp_140385.references = NULL;
    
    struct memblock mem_param_tmp_140384;
    
    mem_param_tmp_140384.references = NULL;
    
    struct memblock mem_param_tmp_140383;
    
    mem_param_tmp_140383.references = NULL;
    
    struct memblock mem_139825;
    
    mem_139825.references = NULL;
    
    struct memblock mem_139823;
    
    mem_139823.references = NULL;
    
    struct memblock mem_139821;
    
    mem_139821.references = NULL;
    
    struct memblock mem_param_139807;
    
    mem_param_139807.references = NULL;
    
    struct memblock mem_param_139804;
    
    mem_param_139804.references = NULL;
    
    struct memblock mem_param_139801;
    
    mem_param_139801.references = NULL;
    
    struct memblock ext_mem_139832;
    
    ext_mem_139832.references = NULL;
    
    struct memblock ext_mem_139833;
    
    ext_mem_139833.references = NULL;
    
    struct memblock ext_mem_139834;
    
    ext_mem_139834.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139738;
    
    mem_139738.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_139640;
    
    mem_139640.references = NULL;
    
    struct memblock mem_139638;
    
    mem_139638.references = NULL;
    
    struct memblock mem_param_tmp_140336;
    
    mem_param_tmp_140336.references = NULL;
    
    struct memblock mem_param_tmp_140335;
    
    mem_param_tmp_140335.references = NULL;
    
    struct memblock mem_139606;
    
    mem_139606.references = NULL;
    
    struct memblock mem_139604;
    
    mem_139604.references = NULL;
    
    struct memblock ext_mem_139621;
    
    ext_mem_139621.references = NULL;
    
    struct memblock ext_mem_139624;
    
    ext_mem_139624.references = NULL;
    
    struct memblock ext_mem_139627;
    
    ext_mem_139627.references = NULL;
    
    struct memblock ext_mem_139630;
    
    ext_mem_139630.references = NULL;
    
    struct memblock mem_param_139602;
    
    mem_param_139602.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139635;
    
    ext_mem_139635.references = NULL;
    
    struct memblock ext_mem_139636;
    
    ext_mem_139636.references = NULL;
    
    struct memblock mem_139596;
    
    mem_139596.references = NULL;
    
    struct memblock mem_139594;
    
    mem_139594.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock ext_mem_139645;
    
    ext_mem_139645.references = NULL;
    
    struct memblock ext_mem_139646;
    
    ext_mem_139646.references = NULL;
    
    struct memblock mem_139586;
    
    mem_139586.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock ext_mem_139582;
    
    ext_mem_139582.references = NULL;
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140323;
    int64_t zm_lhs_123919 = add64(nR_106933, partitionSizze_106939);
    int64_t zs_lhs_123920 = sub64(zm_lhs_123919, (int64_t) 1);
    bool zzero_123921 = partitionSizze_106939 == (int64_t) 0;
    bool nonzzero_123922 = !zzero_123921;
    bool nonzzero_cert_123923;
    
    if (!nonzzero_123922) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftSMJ.fut:276:43-57\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t numIter_R_123924 = sdiv64(zs_lhs_123920, partitionSizze_106939);
    int64_t zm_lhs_123925 = add64(nS_106934, partitionSizze_106939);
    int64_t zs_lhs_123926 = sub64(zm_lhs_123925, (int64_t) 1);
    int64_t numIter_S_123927 = sdiv64(zs_lhs_123926, partitionSizze_106939);
    
    if (futrts_indicesWithIncrement_11406(ctx, &ext_mem_139582, tR_mem_139580, nR_106933, offset_R_106937) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_139583 = (int64_t) 8 * nR_106933;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140324 = 0; nest_i_140324 < nR_106933; nest_i_140324++) {
        ((int64_t *) mem_139584.mem)[nest_i_140324] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139586, bytes_139583, "mem_139586")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140325 = 0; nest_i_140325 < nR_106933; nest_i_140325++) {
        ((int64_t *) mem_139586.mem)[nest_i_140325] = (int64_t) 0;
    }
    
    bool loop_cond_123931 = slt64((int64_t) 0, numIter_R_123924);
    bool defunc_0_mergeJoin_res_123932;
    int64_t defunc_0_mergeJoin_res_123933;
    int64_t defunc_0_mergeJoin_res_123936;
    bool loop_while_123937;
    int64_t iter_123938;
    int64_t first_relevant_in_S_123941;
    
    if (memblock_set(ctx, &mem_param_139589, &mem_139586, "mem_139586") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &mem_139584, "mem_139584") != 0)
        return 1;
    loop_while_123937 = loop_cond_123931;
    iter_123938 = (int64_t) 0;
    first_relevant_in_S_123941 = (int64_t) 0;
    while (loop_while_123937) {
        int64_t tR_start_123942 = mul64(partitionSizze_106939, iter_123938);
        int64_t min_arg1_123943 = add64(partitionSizze_106939, tR_start_123942);
        int64_t min_res_123944 = smin64(nR_106933, min_arg1_123943);
        int64_t dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 = sub64(min_res_123944, tR_start_123942);
        bool empty_slice_123946 = dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 == (int64_t) 0;
        int64_t m_123947 = sub64(dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, (int64_t) 1);
        int64_t i_p_m_t_s_123948 = add64(tR_start_123942, m_123947);
        bool zzero_leq_i_p_m_t_s_123949 = sle64((int64_t) 0, i_p_m_t_s_123948);
        bool i_p_m_t_s_leq_w_123950 = slt64(i_p_m_t_s_123948, nR_106933);
        bool zzero_lte_i_123951 = sle64((int64_t) 0, tR_start_123942);
        bool i_lte_j_123952 = sle64(tR_start_123942, min_res_123944);
        bool y_123953 = i_p_m_t_s_leq_w_123950 && zzero_lte_i_123951;
        bool y_123954 = zzero_leq_i_p_m_t_s_123949 && y_123953;
        bool forwards_ok_123955 = i_lte_j_123952 && y_123954;
        bool ok_or_empty_123956 = empty_slice_123946 || forwards_ok_123955;
        bool index_certs_123957;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_106933, "].", "-> #0  ftSMJ.fut:283:17-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139593 = (int64_t) 8 * dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945;
        bool cond_123961 = slt64(first_relevant_in_S_123941, numIter_S_123927);
        bool y_123962 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool loop_not_taken_123963 = !cond_123961;
        bool protect_assert_disj_123964 = y_123962 || loop_not_taken_123963;
        bool index_certs_123965;
        
        if (!protect_assert_disj_123964) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:298:26-34\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool x_123968 = sle64((int64_t) 0, m_123947);
        bool y_123969 = slt64(m_123947, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool bounds_check_123970 = x_123968 && y_123969;
        bool protect_assert_disj_123971 = loop_not_taken_123963 || bounds_check_123970;
        bool index_certs_123972;
        
        if (!protect_assert_disj_123971) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:299:42-61\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_124186;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_106933, "].", "-> #0  ftSMJ.fut:199:15-63\n   #1  ftSMJ.fut:309:20-64\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139594, bytes_139593, "mem_139594")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140333 = 0; nest_i_140333 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140333++) {
            ((int64_t *) mem_139594.mem)[nest_i_140333] = (int64_t) -1;
        }
        if (memblock_alloc(ctx, &mem_139596, bytes_139593, "mem_139596")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140334 = 0; nest_i_140334 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140334++) {
            ((int64_t *) mem_139596.mem)[nest_i_140334] = (int64_t) 0;
        }
        
        int64_t gt_lhs_123966;
        
        if (cond_123961) {
            int64_t x_132197 = ((int64_t *) tR_mem_139580.mem)[tR_start_123942];
            
            gt_lhs_123966 = x_132197;
        } else {
            gt_lhs_123966 = (int64_t) 0;
        }
        
        int64_t gt_rhs_123973;
        
        if (cond_123961) {
            int64_t x_132198 = ((int64_t *) tR_mem_139580.mem)[i_p_m_t_s_123948];
            
            gt_rhs_123973 = x_132198;
        } else {
            gt_rhs_123973 = (int64_t) 0;
        }
        
        int64_t ext_139634;
        int64_t ext_139633;
        int64_t ext_139632;
        int64_t ext_139631;
        bool loopres_123975;
        int64_t loopres_123976;
        int64_t loopres_123979;
        bool loop_while_123980;
        int64_t s_iter_123981;
        int64_t minRelevant_123984;
        int64_t ctx_param_ext_139597;
        int64_t ctx_param_ext_139598;
        int64_t ctx_param_ext_139600;
        int64_t ctx_param_ext_139601;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139602, &mem_139594, "mem_139594") != 0)
            return 1;
        ctx_param_ext_139597 = (int64_t) 0;
        ctx_param_ext_139598 = (int64_t) 1;
        ctx_param_ext_139600 = (int64_t) 0;
        ctx_param_ext_139601 = (int64_t) 1;
        loop_while_123980 = cond_123961;
        s_iter_123981 = first_relevant_in_S_123941;
        minRelevant_123984 = first_relevant_in_S_123941;
        while (loop_while_123980) {
            int64_t tS_start_123985 = mul64(partitionSizze_106939, s_iter_123981);
            int64_t min_arg1_123986 = add64(partitionSizze_106939, tS_start_123985);
            int64_t min_res_123987 = smin64(nS_106934, min_arg1_123986);
            int64_t dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 = sub64(min_res_123987, tS_start_123985);
            bool empty_slice_123989 = dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 == (int64_t) 0;
            int64_t m_123990 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 1);
            int64_t i_p_m_t_s_123991 = add64(tS_start_123985, m_123990);
            bool zzero_leq_i_p_m_t_s_123992 = sle64((int64_t) 0, i_p_m_t_s_123991);
            bool i_p_m_t_s_leq_w_123993 = slt64(i_p_m_t_s_123991, nS_106934);
            bool zzero_lte_i_123994 = sle64((int64_t) 0, tS_start_123985);
            bool i_lte_j_123995 = sle64(tS_start_123985, min_res_123987);
            bool y_123996 = i_p_m_t_s_leq_w_123993 && zzero_lte_i_123994;
            bool y_123997 = zzero_leq_i_p_m_t_s_123992 && y_123996;
            bool forwards_ok_123998 = i_lte_j_123995 && y_123997;
            bool ok_or_empty_123999 = empty_slice_123989 || forwards_ok_123998;
            bool index_certs_124000;
            
            if (!ok_or_empty_123999) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tS_start_123985, ":", (long long) min_res_123987, "] out of bounds for array of shape [", (long long) nS_106934, "].", "-> #0  ftSMJ.fut:296:19-38\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_124001 = sle64((int64_t) 0, m_123990);
            bool y_124002 = slt64(m_123990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool bounds_check_124003 = x_124001 && y_124002;
            bool index_certs_124004;
            
            if (!bounds_check_124003) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:298:40-59\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_124007 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool index_certs_124008;
            
            if (!y_124007) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:299:28-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t gt_rhs_124005 = ((int64_t *) tS_mem_139581.mem)[i_p_m_t_s_123991];
            bool defunc_0_gt_res_124006 = slt64(gt_rhs_124005, gt_lhs_123966);
            int64_t gt_lhs_124009 = ((int64_t *) tS_mem_139581.mem)[tS_start_123985];
            bool defunc_0_gt_res_124010 = slt64(gt_rhs_123973, gt_lhs_124009);
            bool thisStillRel_124011 = !defunc_0_gt_res_124010;
            int64_t ext_139623;
            
            if (defunc_0_gt_res_124010) {
                ext_139623 = ctx_param_ext_139597;
            } else {
                ext_139623 = (int64_t) 0;
            }
            
            int64_t ext_139622;
            
            if (defunc_0_gt_res_124010) {
                ext_139622 = ctx_param_ext_139598;
            } else {
                ext_139622 = (int64_t) 1;
            }
            
            int64_t ext_139620;
            
            if (defunc_0_gt_res_124010) {
                ext_139620 = ctx_param_ext_139600;
            } else {
                ext_139620 = (int64_t) 0;
            }
            
            int64_t ext_139619;
            
            if (defunc_0_gt_res_124010) {
                ext_139619 = ctx_param_ext_139601;
            } else {
                ext_139619 = (int64_t) 1;
            }
            
            int64_t ext_139629;
            
            if (defunc_0_gt_res_124006) {
                ext_139629 = ctx_param_ext_139597;
            } else {
                ext_139629 = ext_139623;
            }
            
            int64_t ext_139628;
            
            if (defunc_0_gt_res_124006) {
                ext_139628 = ctx_param_ext_139598;
            } else {
                ext_139628 = ext_139622;
            }
            
            int64_t ext_139626;
            
            if (defunc_0_gt_res_124006) {
                ext_139626 = ctx_param_ext_139600;
            } else {
                ext_139626 = ext_139620;
            }
            
            int64_t ext_139625;
            
            if (defunc_0_gt_res_124006) {
                ext_139625 = ctx_param_ext_139601;
            } else {
                ext_139625 = ext_139619;
            }
            
            int64_t loopres_124012;
            bool loopres_124015;
            int64_t loopres_124016;
            
            if (defunc_0_gt_res_124006) {
                int64_t tmp_132199 = add64((int64_t) 1, s_iter_123981);
                
                if (memblock_set(ctx, &ext_mem_139630, &mem_param_139599, "mem_param_139599") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &mem_param_139602, "mem_param_139602") != 0)
                    return 1;
                loopres_124012 = tmp_132199;
                loopres_124015 = 1;
                loopres_124016 = tmp_132199;
            } else {
                int64_t loopres_f_res_124018;
                bool loopres_f_res_124021;
                
                if (defunc_0_gt_res_124010) {
                    if (memblock_set(ctx, &ext_mem_139624, &mem_param_139599, "mem_param_139599") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_param_139602, "mem_param_139602") != 0)
                        return 1;
                    loopres_f_res_124018 = s_iter_123981;
                    loopres_f_res_124021 = thisStillRel_124011;
                } else {
                    bool index_certs_124022;
                    
                    if (!bounds_check_123970) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:303:50-69\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t gt_rhs_124023 = ((int64_t *) tR_mem_139580.mem)[i_p_m_t_s_123948];
                    bool defunc_0_gt_res_124024 = slt64(gt_rhs_124023, gt_rhs_124005);
                    bool nextRel_124025 = !defunc_0_gt_res_124024;
                    int64_t find_joinTuples_arg3_124026 = add64(offset_S_106938, tS_start_123985);
                    int64_t max_arg1_124027 = sdiv64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 2);
                    int64_t max_res_124028 = smax64((int64_t) 1, max_arg1_124027);
                    bool loop_cond_124029 = slt64((int64_t) 0, max_res_124028);
                    
                    if (memblock_alloc(ctx, &mem_139604, bytes_139593, "mem_139604")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_139606, bytes_139593, "mem_139606")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; i_139367++) {
                        int64_t eta_p_131913 = ((int64_t *) mem_param_139599.mem)[ctx_param_ext_139597 + i_139367 * ctx_param_ext_139598];
                        int64_t slice_139554 = tR_start_123942 + i_139367;
                        int64_t eta_p_131914 = ((int64_t *) tR_mem_139580.mem)[slice_139554];
                        int64_t eta_p_131915 = ((int64_t *) mem_param_139602.mem)[ctx_param_ext_139600 + i_139367 * ctx_param_ext_139601];
                        bool defunc_0_f_res_131916;
                        int64_t defunc_0_f_res_131917;
                        int64_t defunc_0_f_res_131918;
                        bool loop_while_131919;
                        int64_t first_match_131920;
                        int64_t step_131921;
                        
                        loop_while_131919 = loop_cond_124029;
                        first_match_131920 = (int64_t) 0;
                        step_131921 = max_res_124028;
                        while (loop_while_131919) {
                            bool x_131922 = sle64((int64_t) 0, first_match_131920);
                            bool y_131923 = slt64(first_match_131920, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                            bool bounds_check_131924 = x_131922 && y_131923;
                            bool index_certs_131925;
                            
                            if (!bounds_check_131924) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) first_match_131920, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:219:20-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131926 = tS_start_123985 + first_match_131920;
                            int64_t sv_131927 = ((int64_t *) tS_mem_139581.mem)[slice_131926];
                            bool cond_131928 = first_match_131920 == (int64_t) 0;
                            int64_t pv_131929;
                            
                            if (cond_131928) {
                                pv_131929 = sv_131927;
                            } else {
                                int64_t tmp_131930 = sub64(first_match_131920, (int64_t) 1);
                                bool x_131931 = sle64((int64_t) 0, tmp_131930);
                                bool y_131932 = slt64(tmp_131930, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131933 = x_131931 && y_131932;
                                bool index_certs_131934;
                                
                                if (!bounds_check_131933) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131930, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:220:51-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131935 = tS_start_123985 + tmp_131930;
                                int64_t pv_f_res_131936 = ((int64_t *) tS_mem_139581.mem)[slice_131935];
                                
                                pv_131929 = pv_f_res_131936;
                            }
                            
                            bool cond_131937 = first_match_131920 == m_123990;
                            int64_t nv_131938;
                            
                            if (cond_131937) {
                                nv_131938 = sv_131927;
                            } else {
                                int64_t tmp_131939 = add64((int64_t) 1, first_match_131920);
                                bool x_131940 = sle64((int64_t) 0, tmp_131939);
                                bool y_131941 = slt64(tmp_131939, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131942 = x_131940 && y_131941;
                                bool index_certs_131943;
                                
                                if (!bounds_check_131942) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131939, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:221:54-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131944 = tS_start_123985 + tmp_131939;
                                int64_t nv_f_res_131945 = ((int64_t *) tS_mem_139581.mem)[slice_131944];
                                
                                nv_131938 = nv_f_res_131945;
                            }
                            
                            bool defunc_0_eq_res_131946 = sv_131927 == eta_p_131914;
                            bool defunc_0_gt_res_131947 = slt64(pv_131929, eta_p_131914);
                            bool x_131948 = !cond_131928;
                            bool y_131949 = defunc_0_gt_res_131947 && x_131948;
                            bool cond_t_res_131950 = cond_131928 || y_131949;
                            bool x_131951 = defunc_0_eq_res_131946 && cond_t_res_131950;
                            int64_t loopres_131952;
                            int64_t loopres_131953;
                            
                            if (x_131951) {
                                loopres_131952 = first_match_131920;
                                loopres_131953 = (int64_t) 0;
                            } else {
                                int64_t loopres_f_res_131954;
                                int64_t loopres_f_res_131955;
                                
                                if (defunc_0_eq_res_131946) {
                                    int64_t tmp_132200 = sub64(first_match_131920, step_131921);
                                    int64_t max_arg1_132201 = sdiv64(step_131921, (int64_t) 2);
                                    int64_t max_res_132202 = smax64((int64_t) 1, max_arg1_132201);
                                    
                                    loopres_f_res_131954 = tmp_132200;
                                    loopres_f_res_131955 = max_res_132202;
                                } else {
                                    bool defunc_0_gt_res_131959 = slt64(eta_p_131914, sv_131927);
                                    int64_t loopres_f_res_f_res_131960;
                                    int64_t loopres_f_res_f_res_131961;
                                    
                                    if (defunc_0_gt_res_131959) {
                                        int64_t loopres_f_res_f_res_t_res_132203;
                                        int64_t loopres_f_res_f_res_t_res_132204;
                                        
                                        if (cond_t_res_131950) {
                                            loopres_f_res_f_res_t_res_132203 = (int64_t) -1;
                                            loopres_f_res_f_res_t_res_132204 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_132205 = sub64(first_match_131920, step_131921);
                                            int64_t max_arg1_132206 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_132207 = smax64((int64_t) 1, max_arg1_132206);
                                            
                                            loopres_f_res_f_res_t_res_132203 = tmp_132205;
                                            loopres_f_res_f_res_t_res_132204 = max_res_132207;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_t_res_132203;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_t_res_132204;
                                    } else {
                                        bool defunc_0_gt_res_131969 = slt64(eta_p_131914, nv_131938);
                                        bool x_131970 = !cond_131937;
                                        bool y_131971 = defunc_0_gt_res_131969 && x_131970;
                                        bool cond_131972 = cond_131937 || y_131971;
                                        int64_t loopres_f_res_f_res_f_res_131973;
                                        int64_t loopres_f_res_f_res_f_res_131974;
                                        
                                        if (cond_131972) {
                                            loopres_f_res_f_res_f_res_131973 = (int64_t) -1;
                                            loopres_f_res_f_res_f_res_131974 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_131975 = add64(first_match_131920, step_131921);
                                            int64_t max_arg1_131976 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_131977 = smax64((int64_t) 1, max_arg1_131976);
                                            
                                            loopres_f_res_f_res_f_res_131973 = tmp_131975;
                                            loopres_f_res_f_res_f_res_131974 = max_res_131977;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_f_res_131973;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_f_res_131974;
                                    }
                                    loopres_f_res_131954 = loopres_f_res_f_res_131960;
                                    loopres_f_res_131955 = loopres_f_res_f_res_131961;
                                }
                                loopres_131952 = loopres_f_res_131954;
                                loopres_131953 = loopres_f_res_131955;
                            }
                            
                            bool loop_cond_131978 = slt64((int64_t) 0, loopres_131953);
                            bool loop_while_tmp_140348 = loop_cond_131978;
                            int64_t first_match_tmp_140349 = loopres_131952;
                            int64_t step_tmp_140350 = loopres_131953;
                            
                            loop_while_131919 = loop_while_tmp_140348;
                            first_match_131920 = first_match_tmp_140349;
                            step_131921 = step_tmp_140350;
                        }
                        defunc_0_f_res_131916 = loop_while_131919;
                        defunc_0_f_res_131917 = first_match_131920;
                        defunc_0_f_res_131918 = step_131921;
                        
                        int64_t zs_lhs_131979 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, defunc_0_f_res_131917);
                        int64_t max_arg1_131980 = sdiv64(zs_lhs_131979, (int64_t) 2);
                        int64_t max_res_131981 = smax64((int64_t) 1, max_arg1_131980);
                        bool cond_131982 = defunc_0_f_res_131917 == (int64_t) -1;
                        int64_t defunc_0_f_res_131983;
                        
                        if (cond_131982) {
                            defunc_0_f_res_131983 = (int64_t) -1;
                        } else {
                            bool loop_cond_131985 = slt64((int64_t) 0, max_res_131981);
                            bool defunc_0_f_res_f_res_131986;
                            int64_t defunc_0_f_res_f_res_131987;
                            int64_t defunc_0_f_res_f_res_131988;
                            bool loop_while_131989;
                            int64_t last_match_131990;
                            int64_t step_131991;
                            
                            loop_while_131989 = loop_cond_131985;
                            last_match_131990 = m_123990;
                            step_131991 = max_res_131981;
                            while (loop_while_131989) {
                                bool x_131992 = sle64((int64_t) 0, last_match_131990);
                                bool y_131993 = slt64(last_match_131990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131994 = x_131992 && y_131993;
                                bool index_certs_131995;
                                
                                if (!bounds_check_131994) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) last_match_131990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:240:20-34\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131996 = tS_start_123985 + last_match_131990;
                                int64_t sv_131997 = ((int64_t *) tS_mem_139581.mem)[slice_131996];
                                bool cond_131998 = last_match_131990 == defunc_0_f_res_131917;
                                int64_t pv_131999;
                                
                                if (cond_131998) {
                                    pv_131999 = sv_131997;
                                } else {
                                    int64_t tmp_132000 = sub64(last_match_131990, (int64_t) 1);
                                    bool x_132001 = sle64((int64_t) 0, tmp_132000);
                                    bool y_132002 = slt64(tmp_132000, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132003 = x_132001 && y_132002;
                                    bool index_certs_132004;
                                    
                                    if (!bounds_check_132003) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132000, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:241:52-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132005 = tS_start_123985 + tmp_132000;
                                    int64_t pv_f_res_132006 = ((int64_t *) tS_mem_139581.mem)[slice_132005];
                                    
                                    pv_131999 = pv_f_res_132006;
                                }
                                
                                bool cond_132007 = last_match_131990 == m_123990;
                                int64_t nv_132008;
                                
                                if (cond_132007) {
                                    nv_132008 = sv_131997;
                                } else {
                                    int64_t tmp_132009 = add64((int64_t) 1, last_match_131990);
                                    bool x_132010 = sle64((int64_t) 0, tmp_132009);
                                    bool y_132011 = slt64(tmp_132009, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132012 = x_132010 && y_132011;
                                    bool index_certs_132013;
                                    
                                    if (!bounds_check_132012) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132009, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:242:53-69\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132014 = tS_start_123985 + tmp_132009;
                                    int64_t nv_f_res_132015 = ((int64_t *) tS_mem_139581.mem)[slice_132014];
                                    
                                    nv_132008 = nv_f_res_132015;
                                }
                                
                                bool defunc_0_eq_res_132016 = sv_131997 == eta_p_131914;
                                bool defunc_0_gt_res_132017 = slt64(eta_p_131914, nv_132008);
                                bool x_132018 = !cond_132007;
                                bool y_132019 = defunc_0_gt_res_132017 && x_132018;
                                bool cond_t_res_132020 = cond_132007 || y_132019;
                                bool x_132021 = defunc_0_eq_res_132016 && cond_t_res_132020;
                                int64_t loopres_132022;
                                int64_t loopres_132023;
                                
                                if (x_132021) {
                                    loopres_132022 = last_match_131990;
                                    loopres_132023 = (int64_t) 0;
                                } else {
                                    int64_t loopres_f_res_132024;
                                    int64_t loopres_f_res_132025;
                                    
                                    if (defunc_0_eq_res_132016) {
                                        int64_t tmp_132208 = add64(last_match_131990, step_131991);
                                        int64_t max_arg1_132209 = sdiv64(step_131991, (int64_t) 2);
                                        int64_t max_res_132210 = smax64((int64_t) 1, max_arg1_132209);
                                        
                                        loopres_f_res_132024 = tmp_132208;
                                        loopres_f_res_132025 = max_res_132210;
                                    } else {
                                        bool defunc_0_gt_res_132029 = slt64(eta_p_131914, sv_131997);
                                        int64_t loopres_f_res_f_res_132030;
                                        int64_t loopres_f_res_f_res_132031;
                                        
                                        if (defunc_0_gt_res_132029) {
                                            bool defunc_0_gt_res_132211 = slt64(pv_131999, eta_p_131914);
                                            bool x_132212 = !cond_131998;
                                            bool y_132213 = defunc_0_gt_res_132211 && x_132212;
                                            bool cond_132214 = cond_131998 || y_132213;
                                            int64_t loopres_f_res_f_res_t_res_132215;
                                            int64_t loopres_f_res_f_res_t_res_132216;
                                            
                                            if (cond_132214) {
                                                loopres_f_res_f_res_t_res_132215 = (int64_t) -1;
                                                loopres_f_res_f_res_t_res_132216 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132217 = sub64(last_match_131990, step_131991);
                                                int64_t max_arg1_132218 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132219 = smax64((int64_t) 1, max_arg1_132218);
                                                
                                                loopres_f_res_f_res_t_res_132215 = tmp_132217;
                                                loopres_f_res_f_res_t_res_132216 = max_res_132219;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_t_res_132215;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_t_res_132216;
                                        } else {
                                            int64_t loopres_f_res_f_res_f_res_132041;
                                            int64_t loopres_f_res_f_res_f_res_132042;
                                            
                                            if (cond_t_res_132020) {
                                                loopres_f_res_f_res_f_res_132041 = (int64_t) -1;
                                                loopres_f_res_f_res_f_res_132042 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132043 = add64(last_match_131990, step_131991);
                                                int64_t max_arg1_132044 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132045 = smax64((int64_t) 1, max_arg1_132044);
                                                
                                                loopres_f_res_f_res_f_res_132041 = tmp_132043;
                                                loopres_f_res_f_res_f_res_132042 = max_res_132045;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_f_res_132041;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_f_res_132042;
                                        }
                                        loopres_f_res_132024 = loopres_f_res_f_res_132030;
                                        loopres_f_res_132025 = loopres_f_res_f_res_132031;
                                    }
                                    loopres_132022 = loopres_f_res_132024;
                                    loopres_132023 = loopres_f_res_132025;
                                }
                                
                                bool loop_cond_132046 = slt64((int64_t) 0, loopres_132023);
                                bool loop_while_tmp_140351 = loop_cond_132046;
                                int64_t last_match_tmp_140352 = loopres_132022;
                                int64_t step_tmp_140353 = loopres_132023;
                                
                                loop_while_131989 = loop_while_tmp_140351;
                                last_match_131990 = last_match_tmp_140352;
                                step_131991 = step_tmp_140353;
                            }
                            defunc_0_f_res_f_res_131986 = loop_while_131989;
                            defunc_0_f_res_f_res_131987 = last_match_131990;
                            defunc_0_f_res_f_res_131988 = step_131991;
                            defunc_0_f_res_131983 = defunc_0_f_res_f_res_131987;
                        }
                        
                        bool cond_132047 = slt64(defunc_0_f_res_131983, (int64_t) 0);
                        int64_t cm_132048;
                        
                        if (cond_132047) {
                            cm_132048 = (int64_t) 0;
                        } else {
                            int64_t zp_lhs_132049 = sub64(defunc_0_f_res_131983, defunc_0_f_res_131917);
                            int64_t cm_f_res_132050 = add64((int64_t) 1, zp_lhs_132049);
                            
                            cm_132048 = cm_f_res_132050;
                        }
                        
                        bool cond_132053 = slt64(defunc_0_f_res_131917, (int64_t) 0);
                        int64_t lifted_lambda_res_132054;
                        
                        if (cond_132053) {
                            lifted_lambda_res_132054 = defunc_0_f_res_131917;
                        } else {
                            int64_t lifted_lambda_res_f_res_132055 = add64(find_joinTuples_arg3_124026, defunc_0_f_res_131917);
                            
                            lifted_lambda_res_132054 = lifted_lambda_res_f_res_132055;
                        }
                        
                        bool cond_132057 = slt64(eta_p_131915, (int64_t) 0);
                        int64_t lifted_lambda_res_132058;
                        
                        if (cond_132057) {
                            lifted_lambda_res_132058 = lifted_lambda_res_132054;
                        } else {
                            lifted_lambda_res_132058 = eta_p_131915;
                        }
                        
                        int64_t defunc_0_f_res_132061 = add64(eta_p_131913, cm_132048);
                        
                        ((int64_t *) mem_139604.mem)[i_139367] = defunc_0_f_res_132061;
                        ((int64_t *) mem_139606.mem)[i_139367] = lifted_lambda_res_132058;
                    }
                    
                    int64_t tmp_124182 = add64((int64_t) 1, s_iter_123981);
                    
                    if (memblock_set(ctx, &ext_mem_139624, &mem_139604, "mem_139604") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_139606, "mem_139606") != 0)
                        return 1;
                    loopres_f_res_124018 = tmp_124182;
                    loopres_f_res_124021 = nextRel_124025;
                }
                if (memblock_set(ctx, &ext_mem_139630, &ext_mem_139624, "ext_mem_139624") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &ext_mem_139621, "ext_mem_139621") != 0)
                    return 1;
                loopres_124012 = loopres_f_res_124018;
                loopres_124015 = loopres_f_res_124021;
                loopres_124016 = minRelevant_123984;
            }
            
            bool cond_124183 = slt64(loopres_124012, numIter_S_123927);
            bool x_124184 = loopres_124015 && cond_124183;
            
            if (memblock_set(ctx, &mem_param_tmp_140335, &ext_mem_139630, "ext_mem_139630") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140336, &ext_mem_139627, "ext_mem_139627") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_140337 = ext_139629;
            int64_t ctx_param_ext_tmp_140338 = ext_139628;
            int64_t ctx_param_ext_tmp_140339 = ext_139626;
            int64_t ctx_param_ext_tmp_140340 = ext_139625;
            bool loop_while_tmp_140341 = x_124184;
            int64_t s_iter_tmp_140342 = loopres_124012;
            int64_t minRelevant_tmp_140345 = loopres_124016;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139602, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
                return 1;
            ctx_param_ext_139597 = ctx_param_ext_tmp_140337;
            ctx_param_ext_139598 = ctx_param_ext_tmp_140338;
            ctx_param_ext_139600 = ctx_param_ext_tmp_140339;
            ctx_param_ext_139601 = ctx_param_ext_tmp_140340;
            loop_while_123980 = loop_while_tmp_140341;
            s_iter_123981 = s_iter_tmp_140342;
            minRelevant_123984 = minRelevant_tmp_140345;
        }
        if (memblock_set(ctx, &ext_mem_139636, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139635, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        ext_139634 = ctx_param_ext_139597;
        ext_139633 = ctx_param_ext_139598;
        ext_139632 = ctx_param_ext_139600;
        ext_139631 = ctx_param_ext_139601;
        loopres_123975 = loop_while_123980;
        loopres_123976 = s_iter_123981;
        loopres_123979 = minRelevant_123984;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139638, bytes_139583, "mem_139638")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139592.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_106933});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139635.mem, ext_139632, (int64_t []) {ext_139631}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139640, bytes_139583, "mem_139640")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_106933});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139636.mem, ext_139634, (int64_t []) {ext_139633}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        
        int64_t tmp_124190 = add64((int64_t) 1, iter_123938);
        bool loop_cond_124191 = slt64(tmp_124190, numIter_R_123924);
        
        if (memblock_set(ctx, &mem_param_tmp_140326, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &mem_139638, "mem_139638") != 0)
            return 1;
        
        bool loop_while_tmp_140328 = loop_cond_124191;
        int64_t iter_tmp_140329 = tmp_124190;
        int64_t first_relevant_in_S_tmp_140332 = loopres_123979;
        
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        loop_while_123937 = loop_while_tmp_140328;
        iter_123938 = iter_tmp_140329;
        first_relevant_in_S_123941 = first_relevant_in_S_tmp_140332;
    }
    if (memblock_set(ctx, &ext_mem_139646, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139645, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    defunc_0_mergeJoin_res_123932 = loop_while_123937;
    defunc_0_mergeJoin_res_123933 = iter_123938;
    defunc_0_mergeJoin_res_123936 = first_relevant_in_S_123941;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
        return 1;
    if (mem_139648_cached_sizze_140690 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139648, &mem_139648_cached_sizze_140690, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139650_cached_sizze_140691 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139650, &mem_139650_cached_sizze_140691, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139378;
    int64_t scanacc_139372 = (int64_t) 0;
    
    for (int64_t i_139375 = 0; i_139375 < nR_106933; i_139375++) {
        int64_t zg_lhs_131722 = ((int64_t *) ext_mem_139646.mem)[i_139375];
        bool lifted_lambda_res_131723 = slt64((int64_t) 0, zg_lhs_131722);
        int64_t defunc_0_f_res_131724 = btoi_bool_i64(lifted_lambda_res_131723);
        int64_t defunc_0_op_res_124201 = add64(defunc_0_f_res_131724, scanacc_139372);
        
        ((int64_t *) mem_139648)[i_139375] = defunc_0_op_res_124201;
        ((int64_t *) mem_139650)[i_139375] = defunc_0_f_res_131724;
        
        int64_t scanacc_tmp_140354 = defunc_0_op_res_124201;
        
        scanacc_139372 = scanacc_tmp_140354;
    }
    discard_139378 = scanacc_139372;
    
    bool cond_124202 = nR_106933 == (int64_t) 0;
    bool x_124203 = !cond_124202;
    int64_t tmp_124204 = sub64(nR_106933, (int64_t) 1);
    bool x_124205 = sle64((int64_t) 0, tmp_124204);
    bool y_124206 = slt64(tmp_124204, nR_106933);
    bool bounds_check_124207 = x_124205 && y_124206;
    bool protect_assert_disj_124208 = cond_124202 || bounds_check_124207;
    bool index_certs_124209;
    
    if (!protect_assert_disj_124208) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_124204, "] out of bounds for array of shape [", (long long) nR_106933, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124210;
    
    if (x_124203) {
        int64_t x_132222 = ((int64_t *) mem_139648)[tmp_124204];
        
        m_f_res_124210 = x_132222;
    } else {
        m_f_res_124210 = (int64_t) 0;
    }
    
    int64_t m_124212;
    
    if (cond_124202) {
        m_124212 = (int64_t) 0;
    } else {
        m_124212 = m_f_res_124210;
    }
    
    int64_t m_124222 = sub64(m_124212, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124224 = slt64(m_124222, nR_106933);
    bool zzero_leq_i_p_m_t_s_124223 = sle64((int64_t) 0, m_124222);
    bool y_124226 = zzero_leq_i_p_m_t_s_124223 && i_p_m_t_s_leq_w_124224;
    bool i_lte_j_124225 = sle64((int64_t) 0, m_124212);
    bool forwards_ok_124227 = i_lte_j_124225 && y_124226;
    bool eq_x_zz_124219 = (int64_t) 0 == m_f_res_124210;
    bool p_and_eq_x_y_124220 = x_124203 && eq_x_zz_124219;
    bool empty_slice_124221 = cond_124202 || p_and_eq_x_y_124220;
    bool ok_or_empty_124228 = empty_slice_124221 || forwards_ok_124227;
    bool index_certs_124229;
    
    if (!ok_or_empty_124228) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124212, "] out of bounds for array of shape [", (long long) nR_106933, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139663 = (int64_t) 8 * m_124212;
    
    if (mem_139664_cached_sizze_140692 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139664, &mem_139664_cached_sizze_140692, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140357 = 0; i_140357 < m_124212; i_140357++) {
        int64_t x_140358 = (int64_t) 0 + i_140357 * (int64_t) 1;
        
        ((int64_t *) mem_139664)[i_140357] = x_140358;
    }
    for (int64_t write_iter_139379 = 0; write_iter_139379 < nR_106933; write_iter_139379++) {
        int64_t write_iv_139381 = ((int64_t *) mem_139650)[write_iter_139379];
        int64_t write_iv_139382 = ((int64_t *) mem_139648)[write_iter_139379];
        bool cond_131712 = write_iv_139381 == (int64_t) 1;
        int64_t lifted_lambda_res_131713;
        
        if (cond_131712) {
            int64_t lifted_lambda_res_t_res_132223 = sub64(write_iv_139382, (int64_t) 1);
            
            lifted_lambda_res_131713 = lifted_lambda_res_t_res_132223;
        } else {
            lifted_lambda_res_131713 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131713) && slt64(lifted_lambda_res_131713, m_124212)) {
            ((int64_t *) mem_139664)[lifted_lambda_res_131713] = write_iter_139379;
        }
    }
    if (mem_139672_cached_sizze_140693 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139672, &mem_139672_cached_sizze_140693, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139674_cached_sizze_140694 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139674, &mem_139674_cached_sizze_140694, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139676_cached_sizze_140695 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139676, &mem_139676_cached_sizze_140695, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139678_cached_sizze_140696 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139678, &mem_139678_cached_sizze_140696, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139680_cached_sizze_140697 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139680, &mem_139680_cached_sizze_140697, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139682_cached_sizze_140698 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139682, &mem_139682_cached_sizze_140698, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139684_cached_sizze_140699 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139684, &mem_139684_cached_sizze_140699, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139409;
    int64_t discard_139410;
    int64_t scanacc_139392;
    int64_t scanacc_139393;
    
    scanacc_139392 = (int64_t) 0;
    scanacc_139393 = (int64_t) 0;
    for (int64_t i_139401 = 0; i_139401 < m_124212; i_139401++) {
        int64_t eta_p_131730 = ((int64_t *) mem_139664)[i_139401];
        bool x_131732 = sle64((int64_t) 0, eta_p_131730);
        bool y_131733 = slt64(eta_p_131730, nR_106933);
        bool bounds_check_131734 = x_131732 && y_131733;
        bool index_certs_131735;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_106933, "].", "-> #0  ftSMJ.fut:328:40-50\n   #1  ftRelational.fut:178:78-81\n   #2  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_131748;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_106933, "].", "-> #0  ftSMJ.fut:329:51-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:329:39-87\n   #3  ftSMJ.fut:373:7-374:73\n   #4  ftRelational.fut:178:78-81\n   #5  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_131736 = ((int64_t *) ext_mem_139646.mem)[eta_p_131730];
        bool lifted_lambda_res_131738 = slt64((int64_t) 1, lifted_lambda_res_131736);
        int64_t defunc_0_f_res_131739 = btoi_bool_i64(lifted_lambda_res_131738);
        int64_t tmp_131749 = ((int64_t *) tR_mem_139580.mem)[eta_p_131730];
        int64_t tmp_131750 = ((int64_t *) ext_mem_139582.mem)[eta_p_131730];
        int64_t tmp_131751 = ((int64_t *) ext_mem_139645.mem)[eta_p_131730];
        int64_t defunc_0_op_res_124345 = add64(defunc_0_f_res_131739, scanacc_139392);
        int64_t lifted_lambda_res_124252 = add64(lifted_lambda_res_131736, scanacc_139393);
        
        ((int64_t *) mem_139672)[i_139401] = defunc_0_op_res_124345;
        ((int64_t *) mem_139674)[i_139401] = lifted_lambda_res_124252;
        ((int64_t *) mem_139676)[i_139401] = tmp_131749;
        ((int64_t *) mem_139678)[i_139401] = tmp_131750;
        ((int64_t *) mem_139680)[i_139401] = tmp_131751;
        ((int64_t *) mem_139682)[i_139401] = defunc_0_f_res_131739;
        ((int64_t *) mem_139684)[i_139401] = lifted_lambda_res_131736;
        
        int64_t scanacc_tmp_140360 = defunc_0_op_res_124345;
        int64_t scanacc_tmp_140361 = lifted_lambda_res_124252;
        
        scanacc_139392 = scanacc_tmp_140360;
        scanacc_139393 = scanacc_tmp_140361;
    }
    discard_139409 = scanacc_139392;
    discard_139410 = scanacc_139393;
    if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
        return 1;
    if (mem_139728_cached_sizze_140700 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139728, &mem_139728_cached_sizze_140700, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139413 = 0; i_139413 < m_124212; i_139413++) {
        int64_t zv_lhs_131676 = add64((int64_t) -1, i_139413);
        int64_t tmp_131677 = smod64(zv_lhs_131676, m_124212);
        int64_t lifted_lambda_res_131678 = ((int64_t *) mem_139674)[tmp_131677];
        bool cond_131680 = i_139413 == (int64_t) 0;
        int64_t lifted_lambda_res_131681;
        
        if (cond_131680) {
            lifted_lambda_res_131681 = (int64_t) 0;
        } else {
            lifted_lambda_res_131681 = lifted_lambda_res_131678;
        }
        ((int64_t *) mem_139728)[i_139413] = lifted_lambda_res_131681;
    }
    
    bool cond_124264 = slt64((int64_t) 0, m_124212);
    bool y_124265 = slt64(m_124222, m_124212);
    bool bounds_check_124266 = zzero_leq_i_p_m_t_s_124223 && y_124265;
    bool loop_not_taken_124267 = !cond_124264;
    bool protect_assert_disj_124268 = bounds_check_124266 || loop_not_taken_124267;
    bool index_certs_124269;
    
    if (!protect_assert_disj_124268) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  ftSMJ.fut:335:10-41\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_lhs_124270;
    
    if (cond_124264) {
        int64_t x_132224 = ((int64_t *) mem_139728)[m_124222];
        
        zp_lhs_124270 = x_132224;
    } else {
        zp_lhs_124270 = (int64_t) 0;
    }
    
    int64_t zp_rhs_124272;
    
    if (cond_124264) {
        int64_t x_132225 = ((int64_t *) mem_139684)[m_124222];
        
        zp_rhs_124272 = x_132225;
    } else {
        zp_rhs_124272 = (int64_t) 0;
    }
    
    int64_t n_pairs_t_res_124274 = add64(zp_lhs_124270, zp_rhs_124272);
    int64_t n_pairs_124275;
    
    if (cond_124264) {
        n_pairs_124275 = n_pairs_t_res_124274;
    } else {
        n_pairs_124275 = (int64_t) 0;
    }
    
    int64_t bytes_139735 = (int64_t) 8 * n_pairs_124275;
    bool zzero_124281 = scatter_psizze_106940 == (int64_t) 0;
    bool nonzzero_124282 = !zzero_124281;
    bool nonzzero_cert_124283;
    
    if (!nonzzero_124282) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_124346 = !empty_slice_124221;
    bool protect_assert_disj_124347 = empty_slice_124221 || bounds_check_124266;
    bool index_certs_124348;
    
    if (!protect_assert_disj_124347) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124349;
    
    if (x_124346) {
        int64_t x_132230 = ((int64_t *) mem_139672)[m_124222];
        
        m_f_res_124349 = x_132230;
    } else {
        m_f_res_124349 = (int64_t) 0;
    }
    
    int64_t m_124351;
    
    if (empty_slice_124221) {
        m_124351 = (int64_t) 0;
    } else {
        m_124351 = m_f_res_124349;
    }
    
    int64_t m_124361 = sub64(m_124351, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124363 = slt64(m_124361, m_124212);
    bool zzero_leq_i_p_m_t_s_124362 = sle64((int64_t) 0, m_124361);
    bool y_124365 = zzero_leq_i_p_m_t_s_124362 && i_p_m_t_s_leq_w_124363;
    bool i_lte_j_124364 = sle64((int64_t) 0, m_124351);
    bool forwards_ok_124366 = i_lte_j_124364 && y_124365;
    bool eq_x_zz_124358 = (int64_t) 0 == m_f_res_124349;
    bool p_and_eq_x_y_124359 = x_124346 && eq_x_zz_124358;
    bool empty_slice_124360 = empty_slice_124221 || p_and_eq_x_y_124359;
    bool ok_or_empty_124367 = empty_slice_124360 || forwards_ok_124366;
    bool index_certs_124368;
    
    if (!ok_or_empty_124367) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124351, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:178:78-81\n   #4  ftRelational.fut:169:1-178:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139783 = (int64_t) 8 * m_124351;
    
    if (memblock_alloc(ctx, &mem_139736, bytes_139735, "mem_139736")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140370 = 0; nest_i_140370 < n_pairs_124275; nest_i_140370++) {
        ((int64_t *) mem_139736.mem)[nest_i_140370] = (int64_t) 0;
    }
    if (memblock_alloc(ctx, &mem_139738, bytes_139735, "mem_139738")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140371 = 0; nest_i_140371 < n_pairs_124275; nest_i_140371++) {
        ((int64_t *) mem_139738.mem)[nest_i_140371] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139740, bytes_139735, "mem_139740")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140372 = 0; nest_i_140372 < n_pairs_124275; nest_i_140372++) {
        ((int64_t *) mem_139740.mem)[nest_i_140372] = (int64_t) -1;
    }
    
    int64_t zm_lhs_124279 = add64(scatter_psizze_106940, n_pairs_124275);
    int64_t zs_lhs_124280 = sub64(zm_lhs_124279, (int64_t) 1);
    int64_t m_124284 = sdiv64(zs_lhs_124280, scatter_psizze_106940);
    bool loop_cond_124285 = slt64((int64_t) 0, m_124284);
    bool partitioned_scatter_res_124286;
    int64_t partitioned_scatter_res_124290;
    bool loop_while_124291;
    int64_t p_124295;
    
    loop_while_124291 = loop_cond_124285;
    p_124295 = (int64_t) 0;
    while (loop_while_124291) {
        int64_t lower_bound_124296 = mul64(scatter_psizze_106940, p_124295);
        int64_t min_arg1_124297 = add64(scatter_psizze_106940, lower_bound_124296);
        int64_t min_res_124298 = smin64(n_pairs_124275, min_arg1_124297);
        int64_t j_m_i_124299 = sub64(min_res_124298, lower_bound_124296);
        bool empty_slice_124300 = j_m_i_124299 == (int64_t) 0;
        int64_t m_124301 = sub64(j_m_i_124299, (int64_t) 1);
        int64_t i_p_m_t_s_124302 = add64(lower_bound_124296, m_124301);
        bool zzero_leq_i_p_m_t_s_124303 = sle64((int64_t) 0, i_p_m_t_s_124302);
        bool i_p_m_t_s_leq_w_124304 = slt64(i_p_m_t_s_124302, n_pairs_124275);
        bool zzero_lte_i_124305 = sle64((int64_t) 0, lower_bound_124296);
        bool i_lte_j_124306 = sle64(lower_bound_124296, min_res_124298);
        bool y_124307 = i_p_m_t_s_leq_w_124304 && zzero_lte_i_124305;
        bool y_124308 = zzero_leq_i_p_m_t_s_124303 && y_124307;
        bool forwards_ok_124309 = i_lte_j_124306 && y_124308;
        bool ok_or_empty_124310 = empty_slice_124300 || forwards_ok_124309;
        bool index_certs_124311;
        
        if (!ok_or_empty_124310) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124296, ":", (long long) min_res_124298, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139750 = (int64_t) 8 * j_m_i_124299;
        
        if (mem_139751_cached_sizze_140701 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139751, &mem_139751_cached_sizze_140701, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139736.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139753_cached_sizze_140702 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139753, &mem_139753_cached_sizze_140702, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139738.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139755_cached_sizze_140703 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139755, &mem_139755_cached_sizze_140703, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139740.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        for (int64_t write_iter_139415 = 0; write_iter_139415 < m_124212; write_iter_139415++) {
            int64_t write_iv_139419 = ((int64_t *) mem_139728)[write_iter_139415];
            int64_t write_iv_139420 = ((int64_t *) mem_139676)[write_iter_139415];
            int64_t write_iv_139421 = ((int64_t *) mem_139678)[write_iter_139415];
            int64_t write_iv_139422 = ((int64_t *) mem_139680)[write_iter_139415];
            bool cond_132183 = sle64(lower_bound_124296, write_iv_139419);
            bool cond_t_res_132184 = slt64(write_iv_139419, min_res_124298);
            bool x_132185 = cond_132183 && cond_t_res_132184;
            int64_t lifted_lambda_res_132186;
            
            if (x_132185) {
                int64_t lifted_lambda_res_t_res_132226 = sub64(write_iv_139419, lower_bound_124296);
                
                lifted_lambda_res_132186 = lifted_lambda_res_t_res_132226;
            } else {
                lifted_lambda_res_132186 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139751)[lifted_lambda_res_132186] = write_iv_139420;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139753)[lifted_lambda_res_132186] = write_iv_139421;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139755)[lifted_lambda_res_132186] = write_iv_139422;
            }
        }
        
        int64_t tmp_124325 = add64((int64_t) 1, p_124295);
        
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139736.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139738.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139740.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        
        bool loop_cond_124336 = slt64(tmp_124325, m_124284);
        bool loop_while_tmp_140373 = loop_cond_124336;
        int64_t p_tmp_140377 = tmp_124325;
        
        loop_while_124291 = loop_while_tmp_140373;
        p_124295 = p_tmp_140377;
    }
    partitioned_scatter_res_124286 = loop_while_124291;
    partitioned_scatter_res_124290 = p_124295;
    if (mem_139784_cached_sizze_140704 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139784, &mem_139784_cached_sizze_140704, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139784, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139684, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    if (mem_139786_cached_sizze_140705 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139786, &mem_139786_cached_sizze_140705, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139786, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139728, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    for (int64_t write_iter_139426 = 0; write_iter_139426 < m_124212; write_iter_139426++) {
        int64_t write_iv_139429 = ((int64_t *) mem_139682)[write_iter_139426];
        int64_t write_iv_139430 = ((int64_t *) mem_139672)[write_iter_139426];
        int64_t write_iv_139431 = ((int64_t *) mem_139728)[write_iter_139426];
        int64_t write_iv_139432 = ((int64_t *) mem_139684)[write_iter_139426];
        bool cond_131664 = write_iv_139429 == (int64_t) 1;
        int64_t lifted_lambda_res_131665;
        
        if (cond_131664) {
            int64_t lifted_lambda_res_t_res_132231 = sub64(write_iv_139430, (int64_t) 1);
            
            lifted_lambda_res_131665 = lifted_lambda_res_t_res_132231;
        } else {
            lifted_lambda_res_131665 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139786)[lifted_lambda_res_131665] = write_iv_139431;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139784)[lifted_lambda_res_131665] = write_iv_139432;
        }
    }
    
    bool cond_124378 = slt64((int64_t) 0, m_124351);
    bool loop_cond_t_res_124379 = slt64(m_124212, n_pairs_124275);
    bool x_124380 = cond_124378 && loop_cond_t_res_124379;
    bool joinTups_to_joinPairs_InnerJoin_res_124381;
    int64_t joinTups_to_joinPairs_InnerJoin_res_124385;
    bool loop_while_124386;
    int64_t p_124390;
    
    if (memblock_set(ctx, &mem_param_139801, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139804, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139807, &mem_139740, "mem_139740") != 0)
        return 1;
    loop_while_124386 = x_124380;
    p_124390 = (int64_t) 0;
    while (loop_while_124386) {
        bool x_124391 = sle64((int64_t) 0, p_124390);
        bool y_124392 = slt64(p_124390, m_124351);
        bool bounds_check_124393 = x_124391 && y_124392;
        bool index_certs_124394;
        
        if (!bounds_check_124393) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_124390, "] out of bounds for array of shape [", (long long) m_124351, "].", "-> #0  ftSMJ.fut:350:13-42\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124395 = ((int64_t *) mem_139786)[p_124390];
        int64_t loopres_124396 = ((int64_t *) mem_139784)[p_124390];
        bool x_124397 = sle64((int64_t) 0, loopres_124395);
        bool y_124398 = slt64(loopres_124395, n_pairs_124275);
        bool bounds_check_124399 = x_124397 && y_124398;
        bool index_certs_124400;
        
        if (!bounds_check_124399) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:352:52-61\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139808 = (int64_t) 8 * loopres_124396;
        int64_t tmp_124411 = add64(loopres_124395, loopres_124396);
        bool empty_slice_124415 = loopres_124396 == (int64_t) 0;
        int64_t m_124416 = sub64(loopres_124396, (int64_t) 1);
        int64_t i_p_m_t_s_124417 = add64(loopres_124395, m_124416);
        bool zzero_leq_i_p_m_t_s_124418 = sle64((int64_t) 0, i_p_m_t_s_124417);
        bool i_p_m_t_s_leq_w_124419 = slt64(i_p_m_t_s_124417, n_pairs_124275);
        bool i_lte_j_124420 = sle64(loopres_124395, tmp_124411);
        bool y_124421 = x_124397 && i_p_m_t_s_leq_w_124419;
        bool y_124422 = zzero_leq_i_p_m_t_s_124418 && y_124421;
        bool forwards_ok_124423 = i_lte_j_124420 && y_124422;
        bool ok_or_empty_124424 = empty_slice_124415 || forwards_ok_124423;
        bool index_certs_124425;
        
        if (!ok_or_empty_124424) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, ":", (long long) tmp_124411, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:356:14-55\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:178:78-81\n   #3  ftRelational.fut:169:1-178:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124401 = ((int64_t *) mem_param_139801.mem)[loopres_124395];
        int64_t loopres_124402 = ((int64_t *) mem_param_139804.mem)[loopres_124395];
        int64_t loopres_124403 = ((int64_t *) mem_param_139807.mem)[loopres_124395];
        
        if (mem_139809_cached_sizze_140706 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139809, &mem_139809_cached_sizze_140706, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140391 = 0; nest_i_140391 < loopres_124396; nest_i_140391++) {
            ((int64_t *) mem_139809)[nest_i_140391] = loopres_124401;
        }
        if (mem_139811_cached_sizze_140707 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139811, &mem_139811_cached_sizze_140707, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140392 = 0; nest_i_140392 < loopres_124396; nest_i_140392++) {
            ((int64_t *) mem_139811)[nest_i_140392] = loopres_124402;
        }
        if (mem_139813_cached_sizze_140708 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139813, &mem_139813_cached_sizze_140708, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139437 = 0; i_139437 < loopres_124396; i_139437++) {
            int64_t tmp_124409 = add64(loopres_124403, i_139437);
            
            ((int64_t *) mem_139813)[i_139437] = tmp_124409;
        }
        
        int64_t tmp_124410 = add64((int64_t) 1, p_124390);
        
        if (memblock_alloc(ctx, &mem_139821, bytes_139735, "mem_139821")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139821.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139801.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139823, bytes_139735, "mem_139823")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139804.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139825, bytes_139735, "mem_139825")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139807.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139821.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139809, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139811, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139813, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        
        bool cond_124429 = slt64(tmp_124410, m_124351);
        bool x_124430 = loop_cond_t_res_124379 && cond_124429;
        
        if (memblock_set(ctx, &mem_param_tmp_140383, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140384, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140385, &mem_139825, "mem_139825") != 0)
            return 1;
        
        bool loop_while_tmp_140386 = x_124430;
        int64_t p_tmp_140390 = tmp_124410;
        
        if (memblock_set(ctx, &mem_param_139801, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139804, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139807, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        loop_while_124386 = loop_while_tmp_140386;
        p_124390 = p_tmp_140390;
    }
    if (memblock_set(ctx, &ext_mem_139834, &mem_param_139801, "mem_param_139801") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139833, &mem_param_139804, "mem_param_139804") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139832, &mem_param_139807, "mem_param_139807") != 0)
        return 1;
    joinTups_to_joinPairs_InnerJoin_res_124381 = loop_while_124386;
    joinTups_to_joinPairs_InnerJoin_res_124385 = p_124390;
    if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139836, bytes_139735, "mem_139836")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139836.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139834.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139838, bytes_139735, "mem_139838")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139838.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139833.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139840, bytes_139735, "mem_139840")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139840.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139832.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139838, "mem_139838") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139840, "mem_139840") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140322, &mem_139836, "mem_139836") != 0)
        return 1;
    prim_out_140323 = n_pairs_124275;
    if (memblock_set(ctx, &*mem_out_p_140686, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140687, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140688, &mem_out_140322, "mem_out_140322") != 0)
        return 1;
    *out_prim_out_140689 = prim_out_140323;
    
  cleanup:
    {
        free(mem_139648);
        free(mem_139650);
        free(mem_139664);
        free(mem_139672);
        free(mem_139674);
        free(mem_139676);
        free(mem_139678);
        free(mem_139680);
        free(mem_139682);
        free(mem_139684);
        free(mem_139728);
        free(mem_139751);
        free(mem_139753);
        free(mem_139755);
        free(mem_139784);
        free(mem_139786);
        free(mem_139809);
        free(mem_139811);
        free(mem_139813);
        if (memblock_unref(ctx, &mem_139840, "mem_139840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139838, "mem_139838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139836, "mem_139836") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139825, "mem_139825") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139807, "mem_param_139807") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139804, "mem_param_139804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139801, "mem_param_139801") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139638, "mem_139638") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139606, "mem_139606") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139604, "mem_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139621, "ext_mem_139621") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139624, "ext_mem_139624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139627, "ext_mem_139627") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139630, "ext_mem_139630") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140322, "mem_out_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_inner_SMJ_short(struct futhark_context *ctx, struct memblock *mem_out_p_140709, struct memblock *mem_out_p_140710, struct memblock *mem_out_p_140711, int64_t *out_prim_out_140712, struct memblock tR_mem_139580, struct memblock tS_mem_139581, int64_t nR_102031, int64_t nS_102032, int64_t offset_R_102035, int64_t offset_S_102036, int64_t partitionSizze_102037, int64_t scatter_psizze_102038)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139648_cached_sizze_140713 = 0;
    unsigned char *mem_139648 = NULL;
    int64_t mem_139650_cached_sizze_140714 = 0;
    unsigned char *mem_139650 = NULL;
    int64_t mem_139664_cached_sizze_140715 = 0;
    unsigned char *mem_139664 = NULL;
    int64_t mem_139672_cached_sizze_140716 = 0;
    unsigned char *mem_139672 = NULL;
    int64_t mem_139674_cached_sizze_140717 = 0;
    unsigned char *mem_139674 = NULL;
    int64_t mem_139676_cached_sizze_140718 = 0;
    unsigned char *mem_139676 = NULL;
    int64_t mem_139678_cached_sizze_140719 = 0;
    unsigned char *mem_139678 = NULL;
    int64_t mem_139680_cached_sizze_140720 = 0;
    unsigned char *mem_139680 = NULL;
    int64_t mem_139682_cached_sizze_140721 = 0;
    unsigned char *mem_139682 = NULL;
    int64_t mem_139684_cached_sizze_140722 = 0;
    unsigned char *mem_139684 = NULL;
    int64_t mem_139728_cached_sizze_140723 = 0;
    unsigned char *mem_139728 = NULL;
    int64_t mem_139751_cached_sizze_140724 = 0;
    unsigned char *mem_139751 = NULL;
    int64_t mem_139753_cached_sizze_140725 = 0;
    unsigned char *mem_139753 = NULL;
    int64_t mem_139755_cached_sizze_140726 = 0;
    unsigned char *mem_139755 = NULL;
    int64_t mem_139784_cached_sizze_140727 = 0;
    unsigned char *mem_139784 = NULL;
    int64_t mem_139786_cached_sizze_140728 = 0;
    unsigned char *mem_139786 = NULL;
    int64_t mem_139809_cached_sizze_140729 = 0;
    unsigned char *mem_139809 = NULL;
    int64_t mem_139811_cached_sizze_140730 = 0;
    unsigned char *mem_139811 = NULL;
    int64_t mem_139813_cached_sizze_140731 = 0;
    unsigned char *mem_139813 = NULL;
    struct memblock mem_139840;
    
    mem_139840.references = NULL;
    
    struct memblock mem_139838;
    
    mem_139838.references = NULL;
    
    struct memblock mem_139836;
    
    mem_139836.references = NULL;
    
    struct memblock mem_param_tmp_140385;
    
    mem_param_tmp_140385.references = NULL;
    
    struct memblock mem_param_tmp_140384;
    
    mem_param_tmp_140384.references = NULL;
    
    struct memblock mem_param_tmp_140383;
    
    mem_param_tmp_140383.references = NULL;
    
    struct memblock mem_139825;
    
    mem_139825.references = NULL;
    
    struct memblock mem_139823;
    
    mem_139823.references = NULL;
    
    struct memblock mem_139821;
    
    mem_139821.references = NULL;
    
    struct memblock mem_param_139807;
    
    mem_param_139807.references = NULL;
    
    struct memblock mem_param_139804;
    
    mem_param_139804.references = NULL;
    
    struct memblock mem_param_139801;
    
    mem_param_139801.references = NULL;
    
    struct memblock ext_mem_139832;
    
    ext_mem_139832.references = NULL;
    
    struct memblock ext_mem_139833;
    
    ext_mem_139833.references = NULL;
    
    struct memblock ext_mem_139834;
    
    ext_mem_139834.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139738;
    
    mem_139738.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_139640;
    
    mem_139640.references = NULL;
    
    struct memblock mem_139638;
    
    mem_139638.references = NULL;
    
    struct memblock mem_param_tmp_140336;
    
    mem_param_tmp_140336.references = NULL;
    
    struct memblock mem_param_tmp_140335;
    
    mem_param_tmp_140335.references = NULL;
    
    struct memblock mem_139606;
    
    mem_139606.references = NULL;
    
    struct memblock mem_139604;
    
    mem_139604.references = NULL;
    
    struct memblock ext_mem_139621;
    
    ext_mem_139621.references = NULL;
    
    struct memblock ext_mem_139624;
    
    ext_mem_139624.references = NULL;
    
    struct memblock ext_mem_139627;
    
    ext_mem_139627.references = NULL;
    
    struct memblock ext_mem_139630;
    
    ext_mem_139630.references = NULL;
    
    struct memblock mem_param_139602;
    
    mem_param_139602.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139635;
    
    ext_mem_139635.references = NULL;
    
    struct memblock ext_mem_139636;
    
    ext_mem_139636.references = NULL;
    
    struct memblock mem_139596;
    
    mem_139596.references = NULL;
    
    struct memblock mem_139594;
    
    mem_139594.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock ext_mem_139645;
    
    ext_mem_139645.references = NULL;
    
    struct memblock ext_mem_139646;
    
    ext_mem_139646.references = NULL;
    
    struct memblock mem_139586;
    
    mem_139586.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock ext_mem_139582;
    
    ext_mem_139582.references = NULL;
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140323;
    int64_t zm_lhs_123919 = add64(nR_102031, partitionSizze_102037);
    int64_t zs_lhs_123920 = sub64(zm_lhs_123919, (int64_t) 1);
    bool zzero_123921 = partitionSizze_102037 == (int64_t) 0;
    bool nonzzero_123922 = !zzero_123921;
    bool nonzzero_cert_123923;
    
    if (!nonzzero_123922) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftSMJ.fut:276:43-57\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t numIter_R_123924 = sdiv64(zs_lhs_123920, partitionSizze_102037);
    int64_t zm_lhs_123925 = add64(nS_102032, partitionSizze_102037);
    int64_t zs_lhs_123926 = sub64(zm_lhs_123925, (int64_t) 1);
    int64_t numIter_S_123927 = sdiv64(zs_lhs_123926, partitionSizze_102037);
    
    if (futrts_indicesWithIncrement_11363(ctx, &ext_mem_139582, tR_mem_139580, nR_102031, offset_R_102035) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_139583 = (int64_t) 8 * nR_102031;
    
    if (memblock_alloc(ctx, &mem_139584, bytes_139583, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140324 = 0; nest_i_140324 < nR_102031; nest_i_140324++) {
        ((int64_t *) mem_139584.mem)[nest_i_140324] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139586, bytes_139583, "mem_139586")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140325 = 0; nest_i_140325 < nR_102031; nest_i_140325++) {
        ((int64_t *) mem_139586.mem)[nest_i_140325] = (int64_t) 0;
    }
    
    bool loop_cond_123931 = slt64((int64_t) 0, numIter_R_123924);
    bool defunc_0_mergeJoin_res_123932;
    int64_t defunc_0_mergeJoin_res_123933;
    int64_t defunc_0_mergeJoin_res_123936;
    bool loop_while_123937;
    int64_t iter_123938;
    int64_t first_relevant_in_S_123941;
    
    if (memblock_set(ctx, &mem_param_139589, &mem_139586, "mem_139586") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &mem_139584, "mem_139584") != 0)
        return 1;
    loop_while_123937 = loop_cond_123931;
    iter_123938 = (int64_t) 0;
    first_relevant_in_S_123941 = (int64_t) 0;
    while (loop_while_123937) {
        int64_t tR_start_123942 = mul64(partitionSizze_102037, iter_123938);
        int64_t min_arg1_123943 = add64(partitionSizze_102037, tR_start_123942);
        int64_t min_res_123944 = smin64(nR_102031, min_arg1_123943);
        int64_t dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 = sub64(min_res_123944, tR_start_123942);
        bool empty_slice_123946 = dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945 == (int64_t) 0;
        int64_t m_123947 = sub64(dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, (int64_t) 1);
        int64_t i_p_m_t_s_123948 = add64(tR_start_123942, m_123947);
        bool zzero_leq_i_p_m_t_s_123949 = sle64((int64_t) 0, i_p_m_t_s_123948);
        bool i_p_m_t_s_leq_w_123950 = slt64(i_p_m_t_s_123948, nR_102031);
        bool zzero_lte_i_123951 = sle64((int64_t) 0, tR_start_123942);
        bool i_lte_j_123952 = sle64(tR_start_123942, min_res_123944);
        bool y_123953 = i_p_m_t_s_leq_w_123950 && zzero_lte_i_123951;
        bool y_123954 = zzero_leq_i_p_m_t_s_123949 && y_123953;
        bool forwards_ok_123955 = i_lte_j_123952 && y_123954;
        bool ok_or_empty_123956 = empty_slice_123946 || forwards_ok_123955;
        bool index_certs_123957;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_102031, "].", "-> #0  ftSMJ.fut:283:17-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139593 = (int64_t) 8 * dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945;
        bool cond_123961 = slt64(first_relevant_in_S_123941, numIter_S_123927);
        bool y_123962 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool loop_not_taken_123963 = !cond_123961;
        bool protect_assert_disj_123964 = y_123962 || loop_not_taken_123963;
        bool index_certs_123965;
        
        if (!protect_assert_disj_123964) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:298:26-34\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool x_123968 = sle64((int64_t) 0, m_123947);
        bool y_123969 = slt64(m_123947, dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945);
        bool bounds_check_123970 = x_123968 && y_123969;
        bool protect_assert_disj_123971 = loop_not_taken_123963 || bounds_check_123970;
        bool index_certs_123972;
        
        if (!protect_assert_disj_123971) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:299:42-61\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_124186;
        
        if (!ok_or_empty_123956) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tR_start_123942, ":", (long long) min_res_123944, "] out of bounds for array of shape [", (long long) nR_102031, "].", "-> #0  ftSMJ.fut:199:15-63\n   #1  ftSMJ.fut:309:20-64\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139594, bytes_139593, "mem_139594")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140333 = 0; nest_i_140333 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140333++) {
            ((int64_t *) mem_139594.mem)[nest_i_140333] = (int64_t) -1;
        }
        if (memblock_alloc(ctx, &mem_139596, bytes_139593, "mem_139596")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t nest_i_140334 = 0; nest_i_140334 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; nest_i_140334++) {
            ((int64_t *) mem_139596.mem)[nest_i_140334] = (int64_t) 0;
        }
        
        int16_t gt_lhs_123966;
        
        if (cond_123961) {
            int16_t x_132197 = ((int16_t *) tR_mem_139580.mem)[tR_start_123942];
            
            gt_lhs_123966 = x_132197;
        } else {
            gt_lhs_123966 = (int16_t) 0;
        }
        
        int16_t gt_rhs_123973;
        
        if (cond_123961) {
            int16_t x_132198 = ((int16_t *) tR_mem_139580.mem)[i_p_m_t_s_123948];
            
            gt_rhs_123973 = x_132198;
        } else {
            gt_rhs_123973 = (int16_t) 0;
        }
        
        int64_t ext_139634;
        int64_t ext_139633;
        int64_t ext_139632;
        int64_t ext_139631;
        bool loopres_123975;
        int64_t loopres_123976;
        int64_t loopres_123979;
        bool loop_while_123980;
        int64_t s_iter_123981;
        int64_t minRelevant_123984;
        int64_t ctx_param_ext_139597;
        int64_t ctx_param_ext_139598;
        int64_t ctx_param_ext_139600;
        int64_t ctx_param_ext_139601;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139602, &mem_139594, "mem_139594") != 0)
            return 1;
        ctx_param_ext_139597 = (int64_t) 0;
        ctx_param_ext_139598 = (int64_t) 1;
        ctx_param_ext_139600 = (int64_t) 0;
        ctx_param_ext_139601 = (int64_t) 1;
        loop_while_123980 = cond_123961;
        s_iter_123981 = first_relevant_in_S_123941;
        minRelevant_123984 = first_relevant_in_S_123941;
        while (loop_while_123980) {
            int64_t tS_start_123985 = mul64(partitionSizze_102037, s_iter_123981);
            int64_t min_arg1_123986 = add64(partitionSizze_102037, tS_start_123985);
            int64_t min_res_123987 = smin64(nS_102032, min_arg1_123986);
            int64_t dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 = sub64(min_res_123987, tS_start_123985);
            bool empty_slice_123989 = dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988 == (int64_t) 0;
            int64_t m_123990 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 1);
            int64_t i_p_m_t_s_123991 = add64(tS_start_123985, m_123990);
            bool zzero_leq_i_p_m_t_s_123992 = sle64((int64_t) 0, i_p_m_t_s_123991);
            bool i_p_m_t_s_leq_w_123993 = slt64(i_p_m_t_s_123991, nS_102032);
            bool zzero_lte_i_123994 = sle64((int64_t) 0, tS_start_123985);
            bool i_lte_j_123995 = sle64(tS_start_123985, min_res_123987);
            bool y_123996 = i_p_m_t_s_leq_w_123993 && zzero_lte_i_123994;
            bool y_123997 = zzero_leq_i_p_m_t_s_123992 && y_123996;
            bool forwards_ok_123998 = i_lte_j_123995 && y_123997;
            bool ok_or_empty_123999 = empty_slice_123989 || forwards_ok_123998;
            bool index_certs_124000;
            
            if (!ok_or_empty_123999) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tS_start_123985, ":", (long long) min_res_123987, "] out of bounds for array of shape [", (long long) nS_102032, "].", "-> #0  ftSMJ.fut:296:19-38\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_124001 = sle64((int64_t) 0, m_123990);
            bool y_124002 = slt64(m_123990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool bounds_check_124003 = x_124001 && y_124002;
            bool index_certs_124004;
            
            if (!bounds_check_124003) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:298:40-59\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_124007 = slt64((int64_t) 0, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
            bool index_certs_124008;
            
            if (!y_124007) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:299:28-36\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int16_t gt_rhs_124005 = ((int16_t *) tS_mem_139581.mem)[i_p_m_t_s_123991];
            bool defunc_0_gt_res_124006 = slt16(gt_rhs_124005, gt_lhs_123966);
            int16_t gt_lhs_124009 = ((int16_t *) tS_mem_139581.mem)[tS_start_123985];
            bool defunc_0_gt_res_124010 = slt16(gt_rhs_123973, gt_lhs_124009);
            bool thisStillRel_124011 = !defunc_0_gt_res_124010;
            int64_t ext_139623;
            
            if (defunc_0_gt_res_124010) {
                ext_139623 = ctx_param_ext_139597;
            } else {
                ext_139623 = (int64_t) 0;
            }
            
            int64_t ext_139622;
            
            if (defunc_0_gt_res_124010) {
                ext_139622 = ctx_param_ext_139598;
            } else {
                ext_139622 = (int64_t) 1;
            }
            
            int64_t ext_139620;
            
            if (defunc_0_gt_res_124010) {
                ext_139620 = ctx_param_ext_139600;
            } else {
                ext_139620 = (int64_t) 0;
            }
            
            int64_t ext_139619;
            
            if (defunc_0_gt_res_124010) {
                ext_139619 = ctx_param_ext_139601;
            } else {
                ext_139619 = (int64_t) 1;
            }
            
            int64_t ext_139629;
            
            if (defunc_0_gt_res_124006) {
                ext_139629 = ctx_param_ext_139597;
            } else {
                ext_139629 = ext_139623;
            }
            
            int64_t ext_139628;
            
            if (defunc_0_gt_res_124006) {
                ext_139628 = ctx_param_ext_139598;
            } else {
                ext_139628 = ext_139622;
            }
            
            int64_t ext_139626;
            
            if (defunc_0_gt_res_124006) {
                ext_139626 = ctx_param_ext_139600;
            } else {
                ext_139626 = ext_139620;
            }
            
            int64_t ext_139625;
            
            if (defunc_0_gt_res_124006) {
                ext_139625 = ctx_param_ext_139601;
            } else {
                ext_139625 = ext_139619;
            }
            
            int64_t loopres_124012;
            bool loopres_124015;
            int64_t loopres_124016;
            
            if (defunc_0_gt_res_124006) {
                int64_t tmp_132199 = add64((int64_t) 1, s_iter_123981);
                
                if (memblock_set(ctx, &ext_mem_139630, &mem_param_139599, "mem_param_139599") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &mem_param_139602, "mem_param_139602") != 0)
                    return 1;
                loopres_124012 = tmp_132199;
                loopres_124015 = 1;
                loopres_124016 = tmp_132199;
            } else {
                int64_t loopres_f_res_124018;
                bool loopres_f_res_124021;
                
                if (defunc_0_gt_res_124010) {
                    if (memblock_set(ctx, &ext_mem_139624, &mem_param_139599, "mem_param_139599") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_param_139602, "mem_param_139602") != 0)
                        return 1;
                    loopres_f_res_124018 = s_iter_123981;
                    loopres_f_res_124021 = thisStillRel_124011;
                } else {
                    bool index_certs_124022;
                    
                    if (!bounds_check_123970) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945, "].", "-> #0  ftSMJ.fut:303:50-69\n   #1  ftSMJ.fut:373:79-81\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t gt_rhs_124023 = ((int16_t *) tR_mem_139580.mem)[i_p_m_t_s_123948];
                    bool defunc_0_gt_res_124024 = slt16(gt_rhs_124023, gt_rhs_124005);
                    bool nextRel_124025 = !defunc_0_gt_res_124024;
                    int64_t find_joinTuples_arg3_124026 = add64(offset_S_102036, tS_start_123985);
                    int64_t max_arg1_124027 = sdiv64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, (int64_t) 2);
                    int64_t max_res_124028 = smax64((int64_t) 1, max_arg1_124027);
                    bool loop_cond_124029 = slt64((int64_t) 0, max_res_124028);
                    
                    if (memblock_alloc(ctx, &mem_139604, bytes_139593, "mem_139604")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_alloc(ctx, &mem_139606, bytes_139593, "mem_139606")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945; i_139367++) {
                        int64_t eta_p_131913 = ((int64_t *) mem_param_139599.mem)[ctx_param_ext_139597 + i_139367 * ctx_param_ext_139598];
                        int64_t slice_139554 = tR_start_123942 + i_139367;
                        int16_t eta_p_131914 = ((int16_t *) tR_mem_139580.mem)[slice_139554];
                        int64_t eta_p_131915 = ((int64_t *) mem_param_139602.mem)[ctx_param_ext_139600 + i_139367 * ctx_param_ext_139601];
                        bool defunc_0_f_res_131916;
                        int64_t defunc_0_f_res_131917;
                        int64_t defunc_0_f_res_131918;
                        bool loop_while_131919;
                        int64_t first_match_131920;
                        int64_t step_131921;
                        
                        loop_while_131919 = loop_cond_124029;
                        first_match_131920 = (int64_t) 0;
                        step_131921 = max_res_124028;
                        while (loop_while_131919) {
                            bool x_131922 = sle64((int64_t) 0, first_match_131920);
                            bool y_131923 = slt64(first_match_131920, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                            bool bounds_check_131924 = x_131922 && y_131923;
                            bool index_certs_131925;
                            
                            if (!bounds_check_131924) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) first_match_131920, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:219:20-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131926 = tS_start_123985 + first_match_131920;
                            int16_t sv_131927 = ((int16_t *) tS_mem_139581.mem)[slice_131926];
                            bool cond_131928 = first_match_131920 == (int64_t) 0;
                            int16_t pv_131929;
                            
                            if (cond_131928) {
                                pv_131929 = sv_131927;
                            } else {
                                int64_t tmp_131930 = sub64(first_match_131920, (int64_t) 1);
                                bool x_131931 = sle64((int64_t) 0, tmp_131930);
                                bool y_131932 = slt64(tmp_131930, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131933 = x_131931 && y_131932;
                                bool index_certs_131934;
                                
                                if (!bounds_check_131933) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131930, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:220:51-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131935 = tS_start_123985 + tmp_131930;
                                int16_t pv_f_res_131936 = ((int16_t *) tS_mem_139581.mem)[slice_131935];
                                
                                pv_131929 = pv_f_res_131936;
                            }
                            
                            bool cond_131937 = first_match_131920 == m_123990;
                            int16_t nv_131938;
                            
                            if (cond_131937) {
                                nv_131938 = sv_131927;
                            } else {
                                int64_t tmp_131939 = add64((int64_t) 1, first_match_131920);
                                bool x_131940 = sle64((int64_t) 0, tmp_131939);
                                bool y_131941 = slt64(tmp_131939, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131942 = x_131940 && y_131941;
                                bool index_certs_131943;
                                
                                if (!bounds_check_131942) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131939, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:221:54-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131944 = tS_start_123985 + tmp_131939;
                                int16_t nv_f_res_131945 = ((int16_t *) tS_mem_139581.mem)[slice_131944];
                                
                                nv_131938 = nv_f_res_131945;
                            }
                            
                            bool defunc_0_eq_res_131946 = sv_131927 == eta_p_131914;
                            bool defunc_0_gt_res_131947 = slt16(pv_131929, eta_p_131914);
                            bool x_131948 = !cond_131928;
                            bool y_131949 = defunc_0_gt_res_131947 && x_131948;
                            bool cond_t_res_131950 = cond_131928 || y_131949;
                            bool x_131951 = defunc_0_eq_res_131946 && cond_t_res_131950;
                            int64_t loopres_131952;
                            int64_t loopres_131953;
                            
                            if (x_131951) {
                                loopres_131952 = first_match_131920;
                                loopres_131953 = (int64_t) 0;
                            } else {
                                int64_t loopres_f_res_131954;
                                int64_t loopres_f_res_131955;
                                
                                if (defunc_0_eq_res_131946) {
                                    int64_t tmp_132200 = sub64(first_match_131920, step_131921);
                                    int64_t max_arg1_132201 = sdiv64(step_131921, (int64_t) 2);
                                    int64_t max_res_132202 = smax64((int64_t) 1, max_arg1_132201);
                                    
                                    loopres_f_res_131954 = tmp_132200;
                                    loopres_f_res_131955 = max_res_132202;
                                } else {
                                    bool defunc_0_gt_res_131959 = slt16(eta_p_131914, sv_131927);
                                    int64_t loopres_f_res_f_res_131960;
                                    int64_t loopres_f_res_f_res_131961;
                                    
                                    if (defunc_0_gt_res_131959) {
                                        int64_t loopres_f_res_f_res_t_res_132203;
                                        int64_t loopres_f_res_f_res_t_res_132204;
                                        
                                        if (cond_t_res_131950) {
                                            loopres_f_res_f_res_t_res_132203 = (int64_t) -1;
                                            loopres_f_res_f_res_t_res_132204 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_132205 = sub64(first_match_131920, step_131921);
                                            int64_t max_arg1_132206 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_132207 = smax64((int64_t) 1, max_arg1_132206);
                                            
                                            loopres_f_res_f_res_t_res_132203 = tmp_132205;
                                            loopres_f_res_f_res_t_res_132204 = max_res_132207;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_t_res_132203;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_t_res_132204;
                                    } else {
                                        bool defunc_0_gt_res_131969 = slt16(eta_p_131914, nv_131938);
                                        bool x_131970 = !cond_131937;
                                        bool y_131971 = defunc_0_gt_res_131969 && x_131970;
                                        bool cond_131972 = cond_131937 || y_131971;
                                        int64_t loopres_f_res_f_res_f_res_131973;
                                        int64_t loopres_f_res_f_res_f_res_131974;
                                        
                                        if (cond_131972) {
                                            loopres_f_res_f_res_f_res_131973 = (int64_t) -1;
                                            loopres_f_res_f_res_f_res_131974 = (int64_t) 0;
                                        } else {
                                            int64_t tmp_131975 = add64(first_match_131920, step_131921);
                                            int64_t max_arg1_131976 = sdiv64(step_131921, (int64_t) 2);
                                            int64_t max_res_131977 = smax64((int64_t) 1, max_arg1_131976);
                                            
                                            loopres_f_res_f_res_f_res_131973 = tmp_131975;
                                            loopres_f_res_f_res_f_res_131974 = max_res_131977;
                                        }
                                        loopres_f_res_f_res_131960 = loopres_f_res_f_res_f_res_131973;
                                        loopres_f_res_f_res_131961 = loopres_f_res_f_res_f_res_131974;
                                    }
                                    loopres_f_res_131954 = loopres_f_res_f_res_131960;
                                    loopres_f_res_131955 = loopres_f_res_f_res_131961;
                                }
                                loopres_131952 = loopres_f_res_131954;
                                loopres_131953 = loopres_f_res_131955;
                            }
                            
                            bool loop_cond_131978 = slt64((int64_t) 0, loopres_131953);
                            bool loop_while_tmp_140348 = loop_cond_131978;
                            int64_t first_match_tmp_140349 = loopres_131952;
                            int64_t step_tmp_140350 = loopres_131953;
                            
                            loop_while_131919 = loop_while_tmp_140348;
                            first_match_131920 = first_match_tmp_140349;
                            step_131921 = step_tmp_140350;
                        }
                        defunc_0_f_res_131916 = loop_while_131919;
                        defunc_0_f_res_131917 = first_match_131920;
                        defunc_0_f_res_131918 = step_131921;
                        
                        int64_t zs_lhs_131979 = sub64(dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, defunc_0_f_res_131917);
                        int64_t max_arg1_131980 = sdiv64(zs_lhs_131979, (int64_t) 2);
                        int64_t max_res_131981 = smax64((int64_t) 1, max_arg1_131980);
                        bool cond_131982 = defunc_0_f_res_131917 == (int64_t) -1;
                        int64_t defunc_0_f_res_131983;
                        
                        if (cond_131982) {
                            defunc_0_f_res_131983 = (int64_t) -1;
                        } else {
                            bool loop_cond_131985 = slt64((int64_t) 0, max_res_131981);
                            bool defunc_0_f_res_f_res_131986;
                            int64_t defunc_0_f_res_f_res_131987;
                            int64_t defunc_0_f_res_f_res_131988;
                            bool loop_while_131989;
                            int64_t last_match_131990;
                            int64_t step_131991;
                            
                            loop_while_131989 = loop_cond_131985;
                            last_match_131990 = m_123990;
                            step_131991 = max_res_131981;
                            while (loop_while_131989) {
                                bool x_131992 = sle64((int64_t) 0, last_match_131990);
                                bool y_131993 = slt64(last_match_131990, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                bool bounds_check_131994 = x_131992 && y_131993;
                                bool index_certs_131995;
                                
                                if (!bounds_check_131994) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) last_match_131990, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:240:20-34\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131996 = tS_start_123985 + last_match_131990;
                                int16_t sv_131997 = ((int16_t *) tS_mem_139581.mem)[slice_131996];
                                bool cond_131998 = last_match_131990 == defunc_0_f_res_131917;
                                int16_t pv_131999;
                                
                                if (cond_131998) {
                                    pv_131999 = sv_131997;
                                } else {
                                    int64_t tmp_132000 = sub64(last_match_131990, (int64_t) 1);
                                    bool x_132001 = sle64((int64_t) 0, tmp_132000);
                                    bool y_132002 = slt64(tmp_132000, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132003 = x_132001 && y_132002;
                                    bool index_certs_132004;
                                    
                                    if (!bounds_check_132003) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132000, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:241:52-68\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132005 = tS_start_123985 + tmp_132000;
                                    int16_t pv_f_res_132006 = ((int16_t *) tS_mem_139581.mem)[slice_132005];
                                    
                                    pv_131999 = pv_f_res_132006;
                                }
                                
                                bool cond_132007 = last_match_131990 == m_123990;
                                int16_t nv_132008;
                                
                                if (cond_132007) {
                                    nv_132008 = sv_131997;
                                } else {
                                    int64_t tmp_132009 = add64((int64_t) 1, last_match_131990);
                                    bool x_132010 = sle64((int64_t) 0, tmp_132009);
                                    bool y_132011 = slt64(tmp_132009, dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988);
                                    bool bounds_check_132012 = x_132010 && y_132011;
                                    bool index_certs_132013;
                                    
                                    if (!bounds_check_132012) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132009, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20UtS_endz20UtS_startz7dUzg_123988, "].", "-> #0  ftSMJ.fut:242:53-69\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:79-81\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_132014 = tS_start_123985 + tmp_132009;
                                    int16_t nv_f_res_132015 = ((int16_t *) tS_mem_139581.mem)[slice_132014];
                                    
                                    nv_132008 = nv_f_res_132015;
                                }
                                
                                bool defunc_0_eq_res_132016 = sv_131997 == eta_p_131914;
                                bool defunc_0_gt_res_132017 = slt16(eta_p_131914, nv_132008);
                                bool x_132018 = !cond_132007;
                                bool y_132019 = defunc_0_gt_res_132017 && x_132018;
                                bool cond_t_res_132020 = cond_132007 || y_132019;
                                bool x_132021 = defunc_0_eq_res_132016 && cond_t_res_132020;
                                int64_t loopres_132022;
                                int64_t loopres_132023;
                                
                                if (x_132021) {
                                    loopres_132022 = last_match_131990;
                                    loopres_132023 = (int64_t) 0;
                                } else {
                                    int64_t loopres_f_res_132024;
                                    int64_t loopres_f_res_132025;
                                    
                                    if (defunc_0_eq_res_132016) {
                                        int64_t tmp_132208 = add64(last_match_131990, step_131991);
                                        int64_t max_arg1_132209 = sdiv64(step_131991, (int64_t) 2);
                                        int64_t max_res_132210 = smax64((int64_t) 1, max_arg1_132209);
                                        
                                        loopres_f_res_132024 = tmp_132208;
                                        loopres_f_res_132025 = max_res_132210;
                                    } else {
                                        bool defunc_0_gt_res_132029 = slt16(eta_p_131914, sv_131997);
                                        int64_t loopres_f_res_f_res_132030;
                                        int64_t loopres_f_res_f_res_132031;
                                        
                                        if (defunc_0_gt_res_132029) {
                                            bool defunc_0_gt_res_132211 = slt16(pv_131999, eta_p_131914);
                                            bool x_132212 = !cond_131998;
                                            bool y_132213 = defunc_0_gt_res_132211 && x_132212;
                                            bool cond_132214 = cond_131998 || y_132213;
                                            int64_t loopres_f_res_f_res_t_res_132215;
                                            int64_t loopres_f_res_f_res_t_res_132216;
                                            
                                            if (cond_132214) {
                                                loopres_f_res_f_res_t_res_132215 = (int64_t) -1;
                                                loopres_f_res_f_res_t_res_132216 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132217 = sub64(last_match_131990, step_131991);
                                                int64_t max_arg1_132218 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132219 = smax64((int64_t) 1, max_arg1_132218);
                                                
                                                loopres_f_res_f_res_t_res_132215 = tmp_132217;
                                                loopres_f_res_f_res_t_res_132216 = max_res_132219;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_t_res_132215;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_t_res_132216;
                                        } else {
                                            int64_t loopres_f_res_f_res_f_res_132041;
                                            int64_t loopres_f_res_f_res_f_res_132042;
                                            
                                            if (cond_t_res_132020) {
                                                loopres_f_res_f_res_f_res_132041 = (int64_t) -1;
                                                loopres_f_res_f_res_f_res_132042 = (int64_t) 0;
                                            } else {
                                                int64_t tmp_132043 = add64(last_match_131990, step_131991);
                                                int64_t max_arg1_132044 = sdiv64(step_131991, (int64_t) 2);
                                                int64_t max_res_132045 = smax64((int64_t) 1, max_arg1_132044);
                                                
                                                loopres_f_res_f_res_f_res_132041 = tmp_132043;
                                                loopres_f_res_f_res_f_res_132042 = max_res_132045;
                                            }
                                            loopres_f_res_f_res_132030 = loopres_f_res_f_res_f_res_132041;
                                            loopres_f_res_f_res_132031 = loopres_f_res_f_res_f_res_132042;
                                        }
                                        loopres_f_res_132024 = loopres_f_res_f_res_132030;
                                        loopres_f_res_132025 = loopres_f_res_f_res_132031;
                                    }
                                    loopres_132022 = loopres_f_res_132024;
                                    loopres_132023 = loopres_f_res_132025;
                                }
                                
                                bool loop_cond_132046 = slt64((int64_t) 0, loopres_132023);
                                bool loop_while_tmp_140351 = loop_cond_132046;
                                int64_t last_match_tmp_140352 = loopres_132022;
                                int64_t step_tmp_140353 = loopres_132023;
                                
                                loop_while_131989 = loop_while_tmp_140351;
                                last_match_131990 = last_match_tmp_140352;
                                step_131991 = step_tmp_140353;
                            }
                            defunc_0_f_res_f_res_131986 = loop_while_131989;
                            defunc_0_f_res_f_res_131987 = last_match_131990;
                            defunc_0_f_res_f_res_131988 = step_131991;
                            defunc_0_f_res_131983 = defunc_0_f_res_f_res_131987;
                        }
                        
                        bool cond_132047 = slt64(defunc_0_f_res_131983, (int64_t) 0);
                        int64_t cm_132048;
                        
                        if (cond_132047) {
                            cm_132048 = (int64_t) 0;
                        } else {
                            int64_t zp_lhs_132049 = sub64(defunc_0_f_res_131983, defunc_0_f_res_131917);
                            int64_t cm_f_res_132050 = add64((int64_t) 1, zp_lhs_132049);
                            
                            cm_132048 = cm_f_res_132050;
                        }
                        
                        bool cond_132053 = slt64(defunc_0_f_res_131917, (int64_t) 0);
                        int64_t lifted_lambda_res_132054;
                        
                        if (cond_132053) {
                            lifted_lambda_res_132054 = defunc_0_f_res_131917;
                        } else {
                            int64_t lifted_lambda_res_f_res_132055 = add64(find_joinTuples_arg3_124026, defunc_0_f_res_131917);
                            
                            lifted_lambda_res_132054 = lifted_lambda_res_f_res_132055;
                        }
                        
                        bool cond_132057 = slt64(eta_p_131915, (int64_t) 0);
                        int64_t lifted_lambda_res_132058;
                        
                        if (cond_132057) {
                            lifted_lambda_res_132058 = lifted_lambda_res_132054;
                        } else {
                            lifted_lambda_res_132058 = eta_p_131915;
                        }
                        
                        int64_t defunc_0_f_res_132061 = add64(eta_p_131913, cm_132048);
                        
                        ((int64_t *) mem_139604.mem)[i_139367] = defunc_0_f_res_132061;
                        ((int64_t *) mem_139606.mem)[i_139367] = lifted_lambda_res_132058;
                    }
                    
                    int64_t tmp_124182 = add64((int64_t) 1, s_iter_123981);
                    
                    if (memblock_set(ctx, &ext_mem_139624, &mem_139604, "mem_139604") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139621, &mem_139606, "mem_139606") != 0)
                        return 1;
                    loopres_f_res_124018 = tmp_124182;
                    loopres_f_res_124021 = nextRel_124025;
                }
                if (memblock_set(ctx, &ext_mem_139630, &ext_mem_139624, "ext_mem_139624") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_139627, &ext_mem_139621, "ext_mem_139621") != 0)
                    return 1;
                loopres_124012 = loopres_f_res_124018;
                loopres_124015 = loopres_f_res_124021;
                loopres_124016 = minRelevant_123984;
            }
            
            bool cond_124183 = slt64(loopres_124012, numIter_S_123927);
            bool x_124184 = loopres_124015 && cond_124183;
            
            if (memblock_set(ctx, &mem_param_tmp_140335, &ext_mem_139630, "ext_mem_139630") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140336, &ext_mem_139627, "ext_mem_139627") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_140337 = ext_139629;
            int64_t ctx_param_ext_tmp_140338 = ext_139628;
            int64_t ctx_param_ext_tmp_140339 = ext_139626;
            int64_t ctx_param_ext_tmp_140340 = ext_139625;
            bool loop_while_tmp_140341 = x_124184;
            int64_t s_iter_tmp_140342 = loopres_124012;
            int64_t minRelevant_tmp_140345 = loopres_124016;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139602, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
                return 1;
            ctx_param_ext_139597 = ctx_param_ext_tmp_140337;
            ctx_param_ext_139598 = ctx_param_ext_tmp_140338;
            ctx_param_ext_139600 = ctx_param_ext_tmp_140339;
            ctx_param_ext_139601 = ctx_param_ext_tmp_140340;
            loop_while_123980 = loop_while_tmp_140341;
            s_iter_123981 = s_iter_tmp_140342;
            minRelevant_123984 = minRelevant_tmp_140345;
        }
        if (memblock_set(ctx, &ext_mem_139636, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139635, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        ext_139634 = ctx_param_ext_139597;
        ext_139633 = ctx_param_ext_139598;
        ext_139632 = ctx_param_ext_139600;
        ext_139631 = ctx_param_ext_139601;
        loopres_123975 = loop_while_123980;
        loopres_123976 = s_iter_123981;
        loopres_123979 = minRelevant_123984;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139638, bytes_139583, "mem_139638")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139592.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_102031});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139638.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139635.mem, ext_139632, (int64_t []) {ext_139631}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_alloc(ctx, &mem_139640, bytes_139583, "mem_139640")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {nR_102031});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139640.mem, tR_start_123942, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139636.mem, ext_139634, (int64_t []) {ext_139633}, (int64_t []) {dzlz7bUZLzmZRz20UtR_endz20UtR_startz7dUzg_123945});
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        
        int64_t tmp_124190 = add64((int64_t) 1, iter_123938);
        bool loop_cond_124191 = slt64(tmp_124190, numIter_R_123924);
        
        if (memblock_set(ctx, &mem_param_tmp_140326, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &mem_139638, "mem_139638") != 0)
            return 1;
        
        bool loop_while_tmp_140328 = loop_cond_124191;
        int64_t iter_tmp_140329 = tmp_124190;
        int64_t first_relevant_in_S_tmp_140332 = loopres_123979;
        
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        loop_while_123937 = loop_while_tmp_140328;
        iter_123938 = iter_tmp_140329;
        first_relevant_in_S_123941 = first_relevant_in_S_tmp_140332;
    }
    if (memblock_set(ctx, &ext_mem_139646, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139645, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    defunc_0_mergeJoin_res_123932 = loop_while_123937;
    defunc_0_mergeJoin_res_123933 = iter_123938;
    defunc_0_mergeJoin_res_123936 = first_relevant_in_S_123941;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
        return 1;
    if (mem_139648_cached_sizze_140713 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139648, &mem_139648_cached_sizze_140713, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139650_cached_sizze_140714 < bytes_139583) {
        err = lexical_realloc(ctx, &mem_139650, &mem_139650_cached_sizze_140714, bytes_139583);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139378;
    int64_t scanacc_139372 = (int64_t) 0;
    
    for (int64_t i_139375 = 0; i_139375 < nR_102031; i_139375++) {
        int64_t zg_lhs_131722 = ((int64_t *) ext_mem_139646.mem)[i_139375];
        bool lifted_lambda_res_131723 = slt64((int64_t) 0, zg_lhs_131722);
        int64_t defunc_0_f_res_131724 = btoi_bool_i64(lifted_lambda_res_131723);
        int64_t defunc_0_op_res_124201 = add64(defunc_0_f_res_131724, scanacc_139372);
        
        ((int64_t *) mem_139648)[i_139375] = defunc_0_op_res_124201;
        ((int64_t *) mem_139650)[i_139375] = defunc_0_f_res_131724;
        
        int64_t scanacc_tmp_140354 = defunc_0_op_res_124201;
        
        scanacc_139372 = scanacc_tmp_140354;
    }
    discard_139378 = scanacc_139372;
    
    bool cond_124202 = nR_102031 == (int64_t) 0;
    bool x_124203 = !cond_124202;
    int64_t tmp_124204 = sub64(nR_102031, (int64_t) 1);
    bool x_124205 = sle64((int64_t) 0, tmp_124204);
    bool y_124206 = slt64(tmp_124204, nR_102031);
    bool bounds_check_124207 = x_124205 && y_124206;
    bool protect_assert_disj_124208 = cond_124202 || bounds_check_124207;
    bool index_certs_124209;
    
    if (!protect_assert_disj_124208) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_124204, "] out of bounds for array of shape [", (long long) nR_102031, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124210;
    
    if (x_124203) {
        int64_t x_132222 = ((int64_t *) mem_139648)[tmp_124204];
        
        m_f_res_124210 = x_132222;
    } else {
        m_f_res_124210 = (int64_t) 0;
    }
    
    int64_t m_124212;
    
    if (cond_124202) {
        m_124212 = (int64_t) 0;
    } else {
        m_124212 = m_f_res_124210;
    }
    
    int64_t m_124222 = sub64(m_124212, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124224 = slt64(m_124222, nR_102031);
    bool zzero_leq_i_p_m_t_s_124223 = sle64((int64_t) 0, m_124222);
    bool y_124226 = zzero_leq_i_p_m_t_s_124223 && i_p_m_t_s_leq_w_124224;
    bool i_lte_j_124225 = sle64((int64_t) 0, m_124212);
    bool forwards_ok_124227 = i_lte_j_124225 && y_124226;
    bool eq_x_zz_124219 = (int64_t) 0 == m_f_res_124210;
    bool p_and_eq_x_y_124220 = x_124203 && eq_x_zz_124219;
    bool empty_slice_124221 = cond_124202 || p_and_eq_x_y_124220;
    bool ok_or_empty_124228 = empty_slice_124221 || forwards_ok_124227;
    bool index_certs_124229;
    
    if (!ok_or_empty_124228) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124212, "] out of bounds for array of shape [", (long long) nR_102031, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139663 = (int64_t) 8 * m_124212;
    
    if (mem_139664_cached_sizze_140715 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139664, &mem_139664_cached_sizze_140715, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140357 = 0; i_140357 < m_124212; i_140357++) {
        int64_t x_140358 = (int64_t) 0 + i_140357 * (int64_t) 1;
        
        ((int64_t *) mem_139664)[i_140357] = x_140358;
    }
    for (int64_t write_iter_139379 = 0; write_iter_139379 < nR_102031; write_iter_139379++) {
        int64_t write_iv_139381 = ((int64_t *) mem_139650)[write_iter_139379];
        int64_t write_iv_139382 = ((int64_t *) mem_139648)[write_iter_139379];
        bool cond_131712 = write_iv_139381 == (int64_t) 1;
        int64_t lifted_lambda_res_131713;
        
        if (cond_131712) {
            int64_t lifted_lambda_res_t_res_132223 = sub64(write_iv_139382, (int64_t) 1);
            
            lifted_lambda_res_131713 = lifted_lambda_res_t_res_132223;
        } else {
            lifted_lambda_res_131713 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131713) && slt64(lifted_lambda_res_131713, m_124212)) {
            ((int64_t *) mem_139664)[lifted_lambda_res_131713] = write_iter_139379;
        }
    }
    if (mem_139672_cached_sizze_140716 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139672, &mem_139672_cached_sizze_140716, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139674_cached_sizze_140717 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139674, &mem_139674_cached_sizze_140717, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t bytes_139675 = (int64_t) 2 * m_124212;
    
    if (mem_139676_cached_sizze_140718 < bytes_139675) {
        err = lexical_realloc(ctx, &mem_139676, &mem_139676_cached_sizze_140718, bytes_139675);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139678_cached_sizze_140719 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139678, &mem_139678_cached_sizze_140719, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139680_cached_sizze_140720 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139680, &mem_139680_cached_sizze_140720, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139682_cached_sizze_140721 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139682, &mem_139682_cached_sizze_140721, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139684_cached_sizze_140722 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139684, &mem_139684_cached_sizze_140722, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139409;
    int64_t discard_139410;
    int64_t scanacc_139392;
    int64_t scanacc_139393;
    
    scanacc_139392 = (int64_t) 0;
    scanacc_139393 = (int64_t) 0;
    for (int64_t i_139401 = 0; i_139401 < m_124212; i_139401++) {
        int64_t eta_p_131730 = ((int64_t *) mem_139664)[i_139401];
        bool x_131732 = sle64((int64_t) 0, eta_p_131730);
        bool y_131733 = slt64(eta_p_131730, nR_102031);
        bool bounds_check_131734 = x_131732 && y_131733;
        bool index_certs_131735;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_102031, "].", "-> #0  ftSMJ.fut:328:40-50\n   #1  ftRelational.fut:156:78-81\n   #2  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_certs_131748;
        
        if (!bounds_check_131734) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_131730, "] out of bounds for array of shape [", (long long) nR_102031, "].", "-> #0  ftSMJ.fut:329:51-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:329:39-87\n   #3  ftSMJ.fut:373:7-374:73\n   #4  ftRelational.fut:156:78-81\n   #5  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_131736 = ((int64_t *) ext_mem_139646.mem)[eta_p_131730];
        bool lifted_lambda_res_131738 = slt64((int64_t) 1, lifted_lambda_res_131736);
        int64_t defunc_0_f_res_131739 = btoi_bool_i64(lifted_lambda_res_131738);
        int16_t tmp_131749 = ((int16_t *) tR_mem_139580.mem)[eta_p_131730];
        int64_t tmp_131750 = ((int64_t *) ext_mem_139582.mem)[eta_p_131730];
        int64_t tmp_131751 = ((int64_t *) ext_mem_139645.mem)[eta_p_131730];
        int64_t defunc_0_op_res_124345 = add64(defunc_0_f_res_131739, scanacc_139392);
        int64_t lifted_lambda_res_124252 = add64(lifted_lambda_res_131736, scanacc_139393);
        
        ((int64_t *) mem_139672)[i_139401] = defunc_0_op_res_124345;
        ((int64_t *) mem_139674)[i_139401] = lifted_lambda_res_124252;
        ((int16_t *) mem_139676)[i_139401] = tmp_131749;
        ((int64_t *) mem_139678)[i_139401] = tmp_131750;
        ((int64_t *) mem_139680)[i_139401] = tmp_131751;
        ((int64_t *) mem_139682)[i_139401] = defunc_0_f_res_131739;
        ((int64_t *) mem_139684)[i_139401] = lifted_lambda_res_131736;
        
        int64_t scanacc_tmp_140360 = defunc_0_op_res_124345;
        int64_t scanacc_tmp_140361 = lifted_lambda_res_124252;
        
        scanacc_139392 = scanacc_tmp_140360;
        scanacc_139393 = scanacc_tmp_140361;
    }
    discard_139409 = scanacc_139392;
    discard_139410 = scanacc_139393;
    if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
        return 1;
    if (mem_139728_cached_sizze_140723 < bytes_139663) {
        err = lexical_realloc(ctx, &mem_139728, &mem_139728_cached_sizze_140723, bytes_139663);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139413 = 0; i_139413 < m_124212; i_139413++) {
        int64_t zv_lhs_131676 = add64((int64_t) -1, i_139413);
        int64_t tmp_131677 = smod64(zv_lhs_131676, m_124212);
        int64_t lifted_lambda_res_131678 = ((int64_t *) mem_139674)[tmp_131677];
        bool cond_131680 = i_139413 == (int64_t) 0;
        int64_t lifted_lambda_res_131681;
        
        if (cond_131680) {
            lifted_lambda_res_131681 = (int64_t) 0;
        } else {
            lifted_lambda_res_131681 = lifted_lambda_res_131678;
        }
        ((int64_t *) mem_139728)[i_139413] = lifted_lambda_res_131681;
    }
    
    bool cond_124264 = slt64((int64_t) 0, m_124212);
    bool y_124265 = slt64(m_124222, m_124212);
    bool bounds_check_124266 = zzero_leq_i_p_m_t_s_124223 && y_124265;
    bool loop_not_taken_124267 = !cond_124264;
    bool protect_assert_disj_124268 = bounds_check_124266 || loop_not_taken_124267;
    bool index_certs_124269;
    
    if (!protect_assert_disj_124268) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  ftSMJ.fut:335:10-41\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_lhs_124270;
    
    if (cond_124264) {
        int64_t x_132224 = ((int64_t *) mem_139728)[m_124222];
        
        zp_lhs_124270 = x_132224;
    } else {
        zp_lhs_124270 = (int64_t) 0;
    }
    
    int64_t zp_rhs_124272;
    
    if (cond_124264) {
        int64_t x_132225 = ((int64_t *) mem_139684)[m_124222];
        
        zp_rhs_124272 = x_132225;
    } else {
        zp_rhs_124272 = (int64_t) 0;
    }
    
    int64_t n_pairs_t_res_124274 = add64(zp_lhs_124270, zp_rhs_124272);
    int64_t n_pairs_124275;
    
    if (cond_124264) {
        n_pairs_124275 = n_pairs_t_res_124274;
    } else {
        n_pairs_124275 = (int64_t) 0;
    }
    
    int64_t bytes_139735 = (int64_t) 2 * n_pairs_124275;
    int64_t bytes_139737 = (int64_t) 8 * n_pairs_124275;
    bool zzero_124281 = scatter_psizze_102038 == (int64_t) 0;
    bool nonzzero_124282 = !zzero_124281;
    bool nonzzero_cert_124283;
    
    if (!nonzzero_124282) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_124346 = !empty_slice_124221;
    bool protect_assert_disj_124347 = empty_slice_124221 || bounds_check_124266;
    bool index_certs_124348;
    
    if (!protect_assert_disj_124347) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_124222, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_124349;
    
    if (x_124346) {
        int64_t x_132230 = ((int64_t *) mem_139672)[m_124222];
        
        m_f_res_124349 = x_132230;
    } else {
        m_f_res_124349 = (int64_t) 0;
    }
    
    int64_t m_124351;
    
    if (empty_slice_124221) {
        m_124351 = (int64_t) 0;
    } else {
        m_124351 = m_f_res_124349;
    }
    
    int64_t m_124361 = sub64(m_124351, (int64_t) 1);
    bool i_p_m_t_s_leq_w_124363 = slt64(m_124361, m_124212);
    bool zzero_leq_i_p_m_t_s_124362 = sle64((int64_t) 0, m_124361);
    bool y_124365 = zzero_leq_i_p_m_t_s_124362 && i_p_m_t_s_leq_w_124363;
    bool i_lte_j_124364 = sle64((int64_t) 0, m_124351);
    bool forwards_ok_124366 = i_lte_j_124364 && y_124365;
    bool eq_x_zz_124358 = (int64_t) 0 == m_f_res_124349;
    bool p_and_eq_x_y_124359 = x_124346 && eq_x_zz_124358;
    bool empty_slice_124360 = empty_slice_124221 || p_and_eq_x_y_124359;
    bool ok_or_empty_124367 = empty_slice_124360 || forwards_ok_124366;
    bool index_certs_124368;
    
    if (!ok_or_empty_124367) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124351, "] out of bounds for array of shape [", (long long) m_124212, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:373:7-374:73\n   #3  ftRelational.fut:156:78-81\n   #4  ftRelational.fut:147:1-156:81\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139783 = (int64_t) 8 * m_124351;
    
    if (memblock_alloc(ctx, &mem_139736, bytes_139735, "mem_139736")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140370 = 0; nest_i_140370 < n_pairs_124275; nest_i_140370++) {
        ((int16_t *) mem_139736.mem)[nest_i_140370] = (int16_t) 0;
    }
    if (memblock_alloc(ctx, &mem_139738, bytes_139737, "mem_139738")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140371 = 0; nest_i_140371 < n_pairs_124275; nest_i_140371++) {
        ((int64_t *) mem_139738.mem)[nest_i_140371] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_139740, bytes_139737, "mem_139740")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140372 = 0; nest_i_140372 < n_pairs_124275; nest_i_140372++) {
        ((int64_t *) mem_139740.mem)[nest_i_140372] = (int64_t) -1;
    }
    
    int64_t zm_lhs_124279 = add64(scatter_psizze_102038, n_pairs_124275);
    int64_t zs_lhs_124280 = sub64(zm_lhs_124279, (int64_t) 1);
    int64_t m_124284 = sdiv64(zs_lhs_124280, scatter_psizze_102038);
    bool loop_cond_124285 = slt64((int64_t) 0, m_124284);
    bool partitioned_scatter_res_124286;
    int64_t partitioned_scatter_res_124290;
    bool loop_while_124291;
    int64_t p_124295;
    
    loop_while_124291 = loop_cond_124285;
    p_124295 = (int64_t) 0;
    while (loop_while_124291) {
        int64_t lower_bound_124296 = mul64(scatter_psizze_102038, p_124295);
        int64_t min_arg1_124297 = add64(scatter_psizze_102038, lower_bound_124296);
        int64_t min_res_124298 = smin64(n_pairs_124275, min_arg1_124297);
        int64_t j_m_i_124299 = sub64(min_res_124298, lower_bound_124296);
        bool empty_slice_124300 = j_m_i_124299 == (int64_t) 0;
        int64_t m_124301 = sub64(j_m_i_124299, (int64_t) 1);
        int64_t i_p_m_t_s_124302 = add64(lower_bound_124296, m_124301);
        bool zzero_leq_i_p_m_t_s_124303 = sle64((int64_t) 0, i_p_m_t_s_124302);
        bool i_p_m_t_s_leq_w_124304 = slt64(i_p_m_t_s_124302, n_pairs_124275);
        bool zzero_lte_i_124305 = sle64((int64_t) 0, lower_bound_124296);
        bool i_lte_j_124306 = sle64(lower_bound_124296, min_res_124298);
        bool y_124307 = i_p_m_t_s_leq_w_124304 && zzero_lte_i_124305;
        bool y_124308 = zzero_leq_i_p_m_t_s_124303 && y_124307;
        bool forwards_ok_124309 = i_lte_j_124306 && y_124308;
        bool ok_or_empty_124310 = empty_slice_124300 || forwards_ok_124309;
        bool index_certs_124311;
        
        if (!ok_or_empty_124310) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124296, ":", (long long) min_res_124298, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139750 = (int64_t) 2 * j_m_i_124299;
        int64_t bytes_139752 = (int64_t) 8 * j_m_i_124299;
        
        if (mem_139751_cached_sizze_140724 < bytes_139750) {
            err = lexical_realloc(ctx, &mem_139751, &mem_139751_cached_sizze_140724, bytes_139750);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139736.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139753_cached_sizze_140725 < bytes_139752) {
            err = lexical_realloc(ctx, &mem_139753, &mem_139753_cached_sizze_140725, bytes_139752);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139738.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        if (mem_139755_cached_sizze_140726 < bytes_139752) {
            err = lexical_realloc(ctx, &mem_139755, &mem_139755_cached_sizze_140726, bytes_139752);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139740.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124296, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        for (int64_t write_iter_139415 = 0; write_iter_139415 < m_124212; write_iter_139415++) {
            int64_t write_iv_139419 = ((int64_t *) mem_139728)[write_iter_139415];
            int16_t write_iv_139420 = ((int16_t *) mem_139676)[write_iter_139415];
            int64_t write_iv_139421 = ((int64_t *) mem_139678)[write_iter_139415];
            int64_t write_iv_139422 = ((int64_t *) mem_139680)[write_iter_139415];
            bool cond_132183 = sle64(lower_bound_124296, write_iv_139419);
            bool cond_t_res_132184 = slt64(write_iv_139419, min_res_124298);
            bool x_132185 = cond_132183 && cond_t_res_132184;
            int64_t lifted_lambda_res_132186;
            
            if (x_132185) {
                int64_t lifted_lambda_res_t_res_132226 = sub64(write_iv_139419, lower_bound_124296);
                
                lifted_lambda_res_132186 = lifted_lambda_res_t_res_132226;
            } else {
                lifted_lambda_res_132186 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int16_t *) mem_139751)[lifted_lambda_res_132186] = write_iv_139420;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139753)[lifted_lambda_res_132186] = write_iv_139421;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_132186) && slt64(lifted_lambda_res_132186, j_m_i_124299)) {
                ((int64_t *) mem_139755)[lifted_lambda_res_132186] = write_iv_139422;
            }
        }
        
        int64_t tmp_124325 = add64((int64_t) 1, p_124295);
        
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_139736.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139751, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139738.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139753, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139740.mem, lower_bound_124296, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139755, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124299});
        
        bool loop_cond_124336 = slt64(tmp_124325, m_124284);
        bool loop_while_tmp_140373 = loop_cond_124336;
        int64_t p_tmp_140377 = tmp_124325;
        
        loop_while_124291 = loop_while_tmp_140373;
        p_124295 = p_tmp_140377;
    }
    partitioned_scatter_res_124286 = loop_while_124291;
    partitioned_scatter_res_124290 = p_124295;
    if (mem_139784_cached_sizze_140727 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139784, &mem_139784_cached_sizze_140727, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139784, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139684, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    if (mem_139786_cached_sizze_140728 < bytes_139783) {
        err = lexical_realloc(ctx, &mem_139786, &mem_139786_cached_sizze_140728, bytes_139783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139786, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139728, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124351});
    for (int64_t write_iter_139426 = 0; write_iter_139426 < m_124212; write_iter_139426++) {
        int64_t write_iv_139429 = ((int64_t *) mem_139682)[write_iter_139426];
        int64_t write_iv_139430 = ((int64_t *) mem_139672)[write_iter_139426];
        int64_t write_iv_139431 = ((int64_t *) mem_139728)[write_iter_139426];
        int64_t write_iv_139432 = ((int64_t *) mem_139684)[write_iter_139426];
        bool cond_131664 = write_iv_139429 == (int64_t) 1;
        int64_t lifted_lambda_res_131665;
        
        if (cond_131664) {
            int64_t lifted_lambda_res_t_res_132231 = sub64(write_iv_139430, (int64_t) 1);
            
            lifted_lambda_res_131665 = lifted_lambda_res_t_res_132231;
        } else {
            lifted_lambda_res_131665 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139786)[lifted_lambda_res_131665] = write_iv_139431;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124351)) {
            ((int64_t *) mem_139784)[lifted_lambda_res_131665] = write_iv_139432;
        }
    }
    
    bool cond_124378 = slt64((int64_t) 0, m_124351);
    bool loop_cond_t_res_124379 = slt64(m_124212, n_pairs_124275);
    bool x_124380 = cond_124378 && loop_cond_t_res_124379;
    bool joinTups_to_joinPairs_InnerJoin_res_124381;
    int64_t joinTups_to_joinPairs_InnerJoin_res_124385;
    bool loop_while_124386;
    int64_t p_124390;
    
    if (memblock_set(ctx, &mem_param_139801, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139804, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139807, &mem_139740, "mem_139740") != 0)
        return 1;
    loop_while_124386 = x_124380;
    p_124390 = (int64_t) 0;
    while (loop_while_124386) {
        bool x_124391 = sle64((int64_t) 0, p_124390);
        bool y_124392 = slt64(p_124390, m_124351);
        bool bounds_check_124393 = x_124391 && y_124392;
        bool index_certs_124394;
        
        if (!bounds_check_124393) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_124390, "] out of bounds for array of shape [", (long long) m_124351, "].", "-> #0  ftSMJ.fut:350:13-42\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124395 = ((int64_t *) mem_139786)[p_124390];
        int64_t loopres_124396 = ((int64_t *) mem_139784)[p_124390];
        bool x_124397 = sle64((int64_t) 0, loopres_124395);
        bool y_124398 = slt64(loopres_124395, n_pairs_124275);
        bool bounds_check_124399 = x_124397 && y_124398;
        bool index_certs_124400;
        
        if (!bounds_check_124399) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:352:52-61\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139808 = (int64_t) 2 * loopres_124396;
        int64_t bytes_139810 = (int64_t) 8 * loopres_124396;
        int64_t tmp_124411 = add64(loopres_124395, loopres_124396);
        bool empty_slice_124415 = loopres_124396 == (int64_t) 0;
        int64_t m_124416 = sub64(loopres_124396, (int64_t) 1);
        int64_t i_p_m_t_s_124417 = add64(loopres_124395, m_124416);
        bool zzero_leq_i_p_m_t_s_124418 = sle64((int64_t) 0, i_p_m_t_s_124417);
        bool i_p_m_t_s_leq_w_124419 = slt64(i_p_m_t_s_124417, n_pairs_124275);
        bool i_lte_j_124420 = sle64(loopres_124395, tmp_124411);
        bool y_124421 = x_124397 && i_p_m_t_s_leq_w_124419;
        bool y_124422 = zzero_leq_i_p_m_t_s_124418 && y_124421;
        bool forwards_ok_124423 = i_lte_j_124420 && y_124422;
        bool ok_or_empty_124424 = empty_slice_124415 || forwards_ok_124423;
        bool index_certs_124425;
        
        if (!ok_or_empty_124424) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) loopres_124395, ":", (long long) tmp_124411, "] out of bounds for array of shape [", (long long) n_pairs_124275, "].", "-> #0  ftSMJ.fut:356:14-55\n   #1  ftSMJ.fut:373:7-374:73\n   #2  ftRelational.fut:156:78-81\n   #3  ftRelational.fut:147:1-156:81\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int16_t loopres_124401 = ((int16_t *) mem_param_139801.mem)[loopres_124395];
        int64_t loopres_124402 = ((int64_t *) mem_param_139804.mem)[loopres_124395];
        int64_t loopres_124403 = ((int64_t *) mem_param_139807.mem)[loopres_124395];
        
        if (mem_139809_cached_sizze_140729 < bytes_139808) {
            err = lexical_realloc(ctx, &mem_139809, &mem_139809_cached_sizze_140729, bytes_139808);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140391 = 0; nest_i_140391 < loopres_124396; nest_i_140391++) {
            ((int16_t *) mem_139809)[nest_i_140391] = loopres_124401;
        }
        if (mem_139811_cached_sizze_140730 < bytes_139810) {
            err = lexical_realloc(ctx, &mem_139811, &mem_139811_cached_sizze_140730, bytes_139810);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_140392 = 0; nest_i_140392 < loopres_124396; nest_i_140392++) {
            ((int64_t *) mem_139811)[nest_i_140392] = loopres_124402;
        }
        if (mem_139813_cached_sizze_140731 < bytes_139810) {
            err = lexical_realloc(ctx, &mem_139813, &mem_139813_cached_sizze_140731, bytes_139810);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139437 = 0; i_139437 < loopres_124396; i_139437++) {
            int64_t tmp_124409 = add64(loopres_124403, i_139437);
            
            ((int64_t *) mem_139813)[i_139437] = tmp_124409;
        }
        
        int64_t tmp_124410 = add64((int64_t) 1, p_124390);
        
        if (memblock_alloc(ctx, &mem_139821, bytes_139735, "mem_139821")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_139821.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_param_139801.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139823, bytes_139737, "mem_139823")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139804.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        if (memblock_alloc(ctx, &mem_139825, bytes_139737, "mem_139825")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139807.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_139821.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139809, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139823.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139811, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139825.mem, loopres_124395, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139813, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loopres_124396});
        
        bool cond_124429 = slt64(tmp_124410, m_124351);
        bool x_124430 = loop_cond_t_res_124379 && cond_124429;
        
        if (memblock_set(ctx, &mem_param_tmp_140383, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140384, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140385, &mem_139825, "mem_139825") != 0)
            return 1;
        
        bool loop_while_tmp_140386 = x_124430;
        int64_t p_tmp_140390 = tmp_124410;
        
        if (memblock_set(ctx, &mem_param_139801, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139804, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139807, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        loop_while_124386 = loop_while_tmp_140386;
        p_124390 = p_tmp_140390;
    }
    if (memblock_set(ctx, &ext_mem_139834, &mem_param_139801, "mem_param_139801") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139833, &mem_param_139804, "mem_param_139804") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139832, &mem_param_139807, "mem_param_139807") != 0)
        return 1;
    joinTups_to_joinPairs_InnerJoin_res_124381 = loop_while_124386;
    joinTups_to_joinPairs_InnerJoin_res_124385 = p_124390;
    if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139836, bytes_139735, "mem_139836")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_139836.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139834.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139838, bytes_139737, "mem_139838")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139838.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139833.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139840, bytes_139737, "mem_139840")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139840.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139832.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_pairs_124275});
    if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139838, "mem_139838") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139840, "mem_139840") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140322, &mem_139836, "mem_139836") != 0)
        return 1;
    prim_out_140323 = n_pairs_124275;
    if (memblock_set(ctx, &*mem_out_p_140709, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140710, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140711, &mem_out_140322, "mem_out_140322") != 0)
        return 1;
    *out_prim_out_140712 = prim_out_140323;
    
  cleanup:
    {
        free(mem_139648);
        free(mem_139650);
        free(mem_139664);
        free(mem_139672);
        free(mem_139674);
        free(mem_139676);
        free(mem_139678);
        free(mem_139680);
        free(mem_139682);
        free(mem_139684);
        free(mem_139728);
        free(mem_139751);
        free(mem_139753);
        free(mem_139755);
        free(mem_139784);
        free(mem_139786);
        free(mem_139809);
        free(mem_139811);
        free(mem_139813);
        if (memblock_unref(ctx, &mem_139840, "mem_139840") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139838, "mem_139838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139836, "mem_139836") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140385, "mem_param_tmp_140385") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140384, "mem_param_tmp_140384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140383, "mem_param_tmp_140383") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139825, "mem_139825") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139823, "mem_139823") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139821, "mem_139821") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139807, "mem_param_139807") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139804, "mem_param_139804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139801, "mem_param_139801") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139832, "ext_mem_139832") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139833, "ext_mem_139833") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139834, "ext_mem_139834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139738, "mem_139738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139640, "mem_139640") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139638, "mem_139638") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139606, "mem_139606") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139604, "mem_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139621, "ext_mem_139621") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139624, "ext_mem_139624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139627, "ext_mem_139627") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139630, "ext_mem_139630") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139602, "mem_param_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139635, "ext_mem_139635") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139636, "ext_mem_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139596, "mem_139596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139594, "mem_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139646, "ext_mem_139646") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139586, "mem_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139582, "ext_mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140322, "mem_out_140322") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_max_idx(struct futhark_context *ctx, int64_t *out_prim_out_140732, struct memblock eta_p_mem_139580, int64_t nz2080U_62734)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_res_131659;
    int64_t redout_139363 = (int64_t) -9223372036854775808;
    
    for (int64_t i_139364 = 0; i_139364 < nz2080U_62734; i_139364++) {
        int64_t x_121231 = ((int64_t *) eta_p_mem_139580.mem)[i_139364];
        int64_t max_res_121234 = smax64(x_121231, redout_139363);
        int64_t redout_tmp_140321 = max_res_121234;
        
        redout_139363 = redout_tmp_140321;
    }
    defunc_0_reduce_res_131659 = redout_139363;
    prim_out_140320 = defunc_0_reduce_res_131659;
    *out_prim_out_140732 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_140733, struct memblock *mem_out_p_140734, struct memblock xs_mem_139580, int64_t n_99449, int64_t incr_99450)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140735 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140736 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140737 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140738 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140739 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140740 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140741 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140742 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140743 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140744 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_99449;
    bool cond_129568 = sle64(n_99449, (int64_t) 1);
    int64_t zs_lhs_129569 = sub64(n_99449, (int64_t) 1);
    int64_t zp_rhs_129570 = sdiv_safe64(zs_lhs_129569, (int64_t) 20);
    int64_t min_num_blocks_129571 = add64((int64_t) 1, zp_rhs_129570);
    bool loop_cond_129572 = slt64((int64_t) 1, min_num_blocks_129571);
    bool smallest_pow_2_geq_than_res_129573;
    int64_t smallest_pow_2_geq_than_res_129574;
    bool loop_while_129575;
    int64_t x_129576;
    
    loop_while_129575 = loop_cond_129572;
    x_129576 = (int64_t) 1;
    while (loop_while_129575) {
        int64_t loopres_129577 = mul64((int64_t) 2, x_129576);
        bool loop_cond_129578 = slt64(loopres_129577, min_num_blocks_129571);
        bool loop_while_tmp_140322 = loop_cond_129578;
        int64_t x_tmp_140323 = loopres_129577;
        
        loop_while_129575 = loop_while_tmp_140322;
        x_129576 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129573 = loop_while_129575;
    smallest_pow_2_geq_than_res_129574 = x_129576;
    
    bool zzero_129579 = smallest_pow_2_geq_than_res_129574 == (int64_t) 0;
    bool nonzzero_129580 = !zzero_129579;
    bool protect_assert_disj_129581 = cond_129568 || nonzzero_129580;
    bool nonzzero_cert_129582;
    
    if (!protect_assert_disj_129581) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:143:35-39\n   #5  ftRelational.fut:142:9-143:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129583 = sdiv_safe64(zs_lhs_129569, smallest_pow_2_geq_than_res_129574);
    int64_t block_sizze_129584 = add64((int64_t) 1, zp_rhs_129583);
    bool y_129590 = slt64((int64_t) 0, n_99449);
    bool protect_assert_disj_140188 = cond_129568 || y_129590;
    bool index_certs_129591;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_99449, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:143:35-39\n   #5  ftRelational.fut:142:9-143:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129605 = slt64(smallest_pow_2_geq_than_res_129574, (int64_t) 0);
    bool valid_129606 = !bounds_invalid_upwards_129605;
    bool protect_assert_disj_140196 = cond_129568 || valid_129606;
    bool range_valid_c_129607;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129574, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:143:35-39\n   #6  ftRelational.fut:142:9-143:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129609 = slt64(block_sizze_129584, (int64_t) 0);
    bool valid_129610 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_140198 = cond_129568 || valid_129610;
    bool range_valid_c_129611;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129584, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129613 = sle64(block_sizze_129584, (int64_t) 1);
    int64_t tmp_129614 = sub64(block_sizze_129584, (int64_t) 2);
    bool bounds_invalid_upwards_129615 = slt64(tmp_129614, (int64_t) 0);
    bool valid_129617 = !bounds_invalid_upwards_129615;
    bool protect_assert_disj_129618 = cond_129613 || valid_129617;
    bool protect_assert_disj_140200 = cond_129568 || protect_assert_disj_129618;
    bool range_valid_c_129619;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129614, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (futrts_indicesWithIncrement_11449(ctx, &ext_mem_139581, xs_mem_139580, n_99449, incr_99450) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_99449; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129585 = smallest_pow_2_geq_than_res_129574 * block_sizze_129584;
    bool x_140183 = !cond_129568;
    int64_t greatest_divisor_leq_than_arg1_129588 = mul64((int64_t) 2, block_sizze_129584);
    int64_t merge_block_sizze_129589;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129588) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129589 = x_140185;
    } else {
        merge_block_sizze_129589 = (int64_t) 0;
    }
    
    double reduce_arg1_129592;
    
    if (x_140183) {
        double x_140189 = ((double *) xs_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129592 = x_140189;
    } else {
        reduce_arg1_129592 = 0.0;
    }
    
    double defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        double x_140191;
        int64_t x_140192;
        double redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129592;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_99449; i_139365++) {
            double x_129596 = ((double *) xs_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129602 = redout_139363 <= x_129596;
            double defunc_0_op_res_129603;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129603 = x_129596;
            } else {
                defunc_0_op_res_129603 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129604;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129604 = i_139365;
            } else {
                defunc_0_op_res_129604 = redout_139364;
            }
            
            double redout_tmp_140326 = defunc_0_op_res_129603;
            int64_t redout_tmp_140327 = defunc_0_op_res_129604;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = 0.0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129616 = add64((int64_t) 1, tmp_129614);
    int64_t binop_x_139584 = (int64_t) 8 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139585 = block_sizze_129584 * binop_x_139584;
    int64_t bytes_139598 = (int64_t) 8 * block_sizze_129584;
    bool loop_cond_129691 = slt64(block_sizze_129584, flat_dim_129585);
    bool zzero_129692 = merge_block_sizze_129589 == (int64_t) 0;
    bool nonzzero_129693 = !zzero_129692;
    
    if (cond_129568) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140735 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140735, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140736 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140736, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140737 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140737, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140738 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140738, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129574; i_139377++) {
            int64_t zp_lhs_129623 = mul64(block_sizze_129584, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129584; i_139370++) {
                int64_t k_129627 = add64(zp_lhs_129623, i_139370);
                bool cond_129628 = slt64(k_129627, n_99449);
                double lifted_lambda_res_129629;
                int64_t lifted_lambda_res_129630;
                
                if (cond_129628) {
                    bool x_131659 = sle64((int64_t) 0, k_129627);
                    bool bounds_check_131660 = cond_129628 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129627, "] out of bounds for array of shape [", (long long) n_99449, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double lifted_lambda_res_t_res_131662 = ((double *) xs_mem_139580.mem)[k_129627];
                    
                    lifted_lambda_res_129629 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129630 = k_129627;
                } else {
                    lifted_lambda_res_129629 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129630 = defunc_0_reduce_res_131807;
                }
                ((double *) mem_139599)[i_139370] = lifted_lambda_res_129629;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129630;
            }
            if (!cond_129613) {
                for (int64_t i_129640 = 0; i_129640 < distance_129616; i_129640++) {
                    int64_t gt_arg1_129643 = add64((int64_t) 1, i_129640);
                    bool x_129644 = sle64((int64_t) 0, gt_arg1_129643);
                    bool y_129645 = slt64(gt_arg1_129643, block_sizze_129584);
                    bool bounds_check_129646 = x_129644 && y_129645;
                    bool index_certs_129647;
                    
                    if (!bounds_check_129646) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129643, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129649 = slt64(i_129640, block_sizze_129584);
                    bool index_certs_129650;
                    
                    if (!y_129649) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129640, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double gt_arg1_129648 = ((double *) mem_139599)[gt_arg1_129643];
                    double gt_arg0_129651 = ((double *) mem_139599)[i_129640];
                    bool defunc_0_leq_res_129652 = gt_arg0_129651 <= gt_arg1_129648;
                    bool defunc_0_lifted_gt_res_129653 = !defunc_0_leq_res_129652;
                    bool s_129654;
                    int64_t s_129657;
                    bool loop_while_129658;
                    int64_t j_129661;
                    
                    loop_while_129658 = defunc_0_lifted_gt_res_129653;
                    j_129661 = i_129640;
                    while (loop_while_129658) {
                        bool x_129662 = sle64((int64_t) 0, j_129661);
                        bool y_129663 = slt64(j_129661, block_sizze_129584);
                        bool bounds_check_129664 = x_129662 && y_129663;
                        bool index_certs_129665;
                        
                        if (!bounds_check_129664) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129661, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129668 = add64((int64_t) 1, j_129661);
                        bool x_129669 = sle64((int64_t) 0, copy_arg0_129668);
                        bool y_129670 = slt64(copy_arg0_129668, block_sizze_129584);
                        bool bounds_check_129671 = x_129669 && y_129670;
                        bool index_certs_129672;
                        
                        if (!bounds_check_129671) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129668, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double copy_arg0_129666 = ((double *) mem_139599)[j_129661];
                        int64_t copy_arg0_129667 = ((int64_t *) mem_139601)[j_129661];
                        double copy_arg0_129673 = ((double *) mem_139599)[copy_arg0_129668];
                        int64_t copy_arg0_129674 = ((int64_t *) mem_139601)[copy_arg0_129668];
                        
                        ((double *) mem_139599)[j_129661] = copy_arg0_129673;
                        ((int64_t *) mem_139601)[j_129661] = copy_arg0_129674;
                        ((double *) mem_139599)[copy_arg0_129668] = copy_arg0_129666;
                        ((int64_t *) mem_139601)[copy_arg0_129668] = copy_arg0_129667;
                        
                        int64_t tmp_129679 = sub64(j_129661, (int64_t) 1);
                        bool cond_129680 = sle64((int64_t) 0, tmp_129679);
                        bool loop_cond_129681;
                        
                        if (cond_129680) {
                            bool y_131664 = slt64(tmp_129679, block_sizze_129584);
                            bool bounds_check_131665 = cond_129680 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129679, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double gt_arg1_131663 = ((double *) mem_139599)[j_129661];
                            double gt_arg0_131667 = ((double *) mem_139599)[tmp_129679];
                            bool defunc_0_leq_res_131668 = gt_arg0_131667 <= gt_arg1_131663;
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129681 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129681 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129681;
                        int64_t j_tmp_140337 = tmp_129679;
                        
                        loop_while_129658 = loop_while_tmp_140334;
                        j_129661 = j_tmp_140337;
                    }
                    s_129654 = loop_while_129658;
                    s_129657 = j_129661;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139586, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        if (memblock_alloc(ctx, &mem_139658, bytes_139585, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        
        int64_t data_129694;
        bool data_129695;
        int64_t data_129698;
        int64_t loop_dz2084Uz2082U_129699;
        bool loop_while_129700;
        int64_t stride_129703;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129699 = flat_dim_129585;
        loop_while_129700 = loop_cond_129691;
        stride_129703 = block_sizze_129584;
        while (loop_while_129700) {
            int64_t next_stride_129704 = mul64((int64_t) 2, stride_129703);
            bool zzero_129705 = next_stride_129704 == (int64_t) 0;
            bool nonzzero_129706 = !zzero_129705;
            bool nonzzero_cert_129707;
            
            if (!nonzzero_129706) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:143:35-39\n   #5  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129708 = sdiv64(flat_dim_129585, next_stride_129704);
            bool bounds_invalid_upwards_129709 = slt64(num_merges_129708, (int64_t) 0);
            bool valid_129710 = !bounds_invalid_upwards_129709;
            bool range_valid_c_129711;
            
            if (!valid_129710) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129708, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:143:35-39\n   #6  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129713 = sub64(next_stride_129704, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129714 = sle64((int64_t) 0, m_129713);
            bool cond_129716 = slt64(next_stride_129704, (int64_t) 10);
            bool protect_assert_disj_129717 = nonzzero_129693 || cond_129716;
            bool nonzzero_cert_129718;
            
            if (!protect_assert_disj_129717) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129719 = smod_safe64(next_stride_129704, merge_block_sizze_129589);
            bool num_blocks_129720 = zeze_lhs_129719 == (int64_t) 0;
            bool protect_assert_disj_129721 = cond_129716 || num_blocks_129720;
            bool assert_c_129722;
            
            if (!protect_assert_disj_129721) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129724 = sdiv_safe64(next_stride_129704, merge_block_sizze_129589);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725 = add64((int64_t) 1, num_blocks_129724);
            int64_t j_m_i_129726 = sub64(next_stride_129704, stride_129703);
            int64_t flat_dim_129727 = merge_block_sizze_129589 * num_blocks_129724;
            bool bounds_invalid_upwards_129728 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, (int64_t) 0);
            bool empty_slice_129729 = j_m_i_129726 == (int64_t) 0;
            int64_t m_129730 = sub64(j_m_i_129726, (int64_t) 1);
            bool zzero_lte_i_129731 = sle64((int64_t) 0, stride_129703);
            bool i_lte_j_129732 = sle64(stride_129703, next_stride_129704);
            bool empty_slice_129733 = stride_129703 == (int64_t) 0;
            int64_t m_129734 = sub64(stride_129703, (int64_t) 1);
            bool bounds_invalid_upwards_129735 = slt64(num_blocks_129724, (int64_t) 0);
            bool cond_129736 = slt64((int64_t) 0, stride_129703);
            bool valid_129737 = !bounds_invalid_upwards_129728;
            int64_t i_p_m_t_s_129738 = add64(stride_129703, m_129730);
            bool zzero_leq_i_p_m_t_s_129739 = sle64((int64_t) 0, m_129734);
            bool i_p_m_t_s_leq_w_129740 = slt64(m_129734, next_stride_129704);
            bool valid_129741 = !bounds_invalid_upwards_129735;
            bool i_p_m_t_s_leq_w_129742 = slt64(m_129713, flat_dim_129727);
            bool y_129743 = slt64((int64_t) 0, j_m_i_129726);
            bool protect_assert_disj_129744 = cond_129716 || valid_129737;
            bool range_valid_c_129745;
            
            if (!protect_assert_disj_129744) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:143:35-39\n   #10 ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129746 = sle64((int64_t) 0, i_p_m_t_s_129738);
            bool i_p_m_t_s_leq_w_129747 = slt64(i_p_m_t_s_129738, next_stride_129704);
            bool y_129748 = zzero_leq_i_p_m_t_s_129739 && i_p_m_t_s_leq_w_129740;
            bool protect_assert_disj_129749 = cond_129716 || valid_129741;
            bool range_valid_c_129750;
            
            if (!protect_assert_disj_129749) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129724, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129751 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129742;
            bool y_129752 = zzero_lte_i_129731 && i_p_m_t_s_leq_w_129747;
            bool forwards_ok_129753 = zzero_lte_i_129731 && y_129748;
            bool ok_or_empty_129754 = zzero_129705 || y_129751;
            bool protect_assert_disj_129755 = cond_129736 || y_129743;
            bool y_129756 = zzero_leq_i_p_m_t_s_129746 && y_129752;
            bool ok_or_empty_129757 = empty_slice_129733 || forwards_ok_129753;
            bool protect_assert_disj_129758 = cond_129716 || ok_or_empty_129754;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) flat_dim_129727, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129760 = !cond_129716;
            bool protect_assert_disj_129761 = protect_assert_disj_129755 || loop_not_taken_129760;
            bool index_certs_129762;
            
            if (!protect_assert_disj_129761) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:143:35-39\n   #10 ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129763 = i_lte_j_129732 && y_129756;
            bool protect_assert_disj_129764 = cond_129716 || ok_or_empty_129757;
            bool index_certs_129765;
            
            if (!protect_assert_disj_129764) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:143:35-39\n   #11 ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129766 = ok_or_empty_129757 || loop_not_taken_129760;
            bool index_certs_129767;
            
            if (!protect_assert_disj_129766) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129768 = empty_slice_129729 || forwards_ok_129763;
            bool protect_assert_disj_129769 = cond_129716 || ok_or_empty_129768;
            bool index_certs_129770;
            
            if (!protect_assert_disj_129769) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:143:35-39\n   #11 ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129771 = loop_not_taken_129760 || ok_or_empty_129768;
            bool index_certs_129772;
            
            if (!protect_assert_disj_129771) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 8 * num_merges_129708;
            int64_t bytes_139667 = next_stride_129704 * binop_x_139666;
            bool i_lte_j_129715 = sle64((int64_t) 0, next_stride_129704);
            
            if (mem_139668_cached_sizze_140739 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140739, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140740 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140740, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725;
            int64_t binop_x_139696 = (int64_t) 8 * num_blocks_129724;
            int64_t bytes_139697 = merge_block_sizze_129589 * binop_x_139696;
            int64_t bytes_139742 = (int64_t) 16 * stride_129703;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129708; i_139398++) {
                int64_t start_129776 = mul64(next_stride_129704, i_139398);
                int64_t j_m_i_129777 = sub64(loop_dz2084Uz2082U_129699, start_129776);
                bool empty_slice_129778 = j_m_i_129777 == (int64_t) 0;
                int64_t m_129779 = sub64(j_m_i_129777, (int64_t) 1);
                int64_t i_p_m_t_s_129780 = add64(start_129776, m_129779);
                bool zzero_leq_i_p_m_t_s_129781 = sle64((int64_t) 0, i_p_m_t_s_129780);
                bool i_p_m_t_s_leq_w_129782 = slt64(i_p_m_t_s_129780, loop_dz2084Uz2082U_129699);
                bool zzero_lte_i_129783 = sle64((int64_t) 0, start_129776);
                bool i_lte_j_129784 = sle64(start_129776, loop_dz2084Uz2082U_129699);
                bool y_129785 = i_p_m_t_s_leq_w_129782 && zzero_lte_i_129783;
                bool y_129786 = zzero_leq_i_p_m_t_s_129781 && y_129785;
                bool forwards_ok_129787 = i_lte_j_129784 && y_129786;
                bool ok_or_empty_129788 = empty_slice_129778 || forwards_ok_129787;
                bool index_certs_129789;
                
                if (!ok_or_empty_129788) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129776, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129699, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129790 = slt64(m_129713, j_m_i_129777);
                bool y_129791 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129790;
                bool forwards_ok_129792 = i_lte_j_129715 && y_129791;
                bool ok_or_empty_129793 = zzero_129705 || forwards_ok_129792;
                bool index_certs_129794;
                
                if (!ok_or_empty_129793) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) j_m_i_129777, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:143:35-39\n   #8  ftRelational.fut:142:9-143:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129716) {
                    double dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129736) {
                        double head_res_131697 = ((double *) mem_param_139662.mem)[start_129776];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129776];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129703 + start_129776;
                        double head_res_131700 = ((double *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129704; nest_i_140347++) {
                        ((double *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139742, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129704; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129704; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129726;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129703);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129726);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129703 + j_131711;
                                int64_t slice_131721 = start_129776 + slice_131720;
                                double leq_arg1_131722 = ((double *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129776 + i_131708;
                                double leq_arg0_131727 = ((double *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = leq_arg0_131727 <= leq_arg1_131722;
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        double loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129703);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129776 + i_131708;
                            double tmp_131738 = ((double *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129726);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:143:35-39\n   #9  ftRelational.fut:142:9-143:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129703 + j_131711;
                            int64_t slice_131745 = start_129776 + slice_131744;
                            double tmp_131746 = ((double *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((double *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140741 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140741, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140742 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140742, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725; i_139384++) {
                        int64_t split_count_arg3_129856 = mul64(merge_block_sizze_129589, i_139384);
                        int64_t defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129857, &defunc_0_split_count_res_129858, &defunc_0_split_count_res_129859, &defunc_0_split_count_res_129860, &defunc_0_split_count_res_129861, (int64_t) 0, stride_129703, (int64_t) 0, j_m_i_129726, split_count_arg3_129856) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129862 = slt64((int64_t) 0, defunc_0_split_count_res_129861);
                        bool defunc_0_split_count_res_129863;
                        int64_t defunc_0_split_count_res_129864;
                        int64_t defunc_0_split_count_res_129865;
                        int64_t defunc_0_split_count_res_129866;
                        int64_t defunc_0_split_count_res_129867;
                        int64_t defunc_0_split_count_res_129868;
                        bool loop_while_129869;
                        int64_t ss_129870;
                        int64_t ss_129871;
                        int64_t tt_129872;
                        int64_t tt_129873;
                        int64_t count_129874;
                        
                        loop_while_129869 = loop_cond_129862;
                        ss_129870 = defunc_0_split_count_res_129857;
                        ss_129871 = defunc_0_split_count_res_129858;
                        tt_129872 = defunc_0_split_count_res_129859;
                        tt_129873 = defunc_0_split_count_res_129860;
                        count_129874 = defunc_0_split_count_res_129861;
                        while (loop_while_129869) {
                            int64_t zlze_lhs_129875 = sub64(ss_129871, ss_129870);
                            bool cond_129876 = sle64(zlze_lhs_129875, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129877;
                            int64_t defunc_0_lifted_step_res_129878;
                            int64_t defunc_0_lifted_step_res_129879;
                            int64_t defunc_0_lifted_step_res_129880;
                            
                            if (cond_129876) {
                                int64_t tmp_131750 = add64(tt_129872, count_129874);
                                
                                defunc_0_lifted_step_res_129877 = ss_129870;
                                defunc_0_lifted_step_res_129878 = tmp_131750;
                                defunc_0_lifted_step_res_129879 = tt_129873;
                                defunc_0_lifted_step_res_129880 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129882 = sub64(tt_129873, tt_129872);
                                bool cond_129883 = sle64(zlze_lhs_129882, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129884;
                                int64_t defunc_0_lifted_step_res_f_res_129885;
                                int64_t defunc_0_lifted_step_res_f_res_129886;
                                int64_t defunc_0_lifted_step_res_f_res_129887;
                                
                                if (cond_129883) {
                                    int64_t tmp_131751 = add64(ss_129870, count_129874);
                                    
                                    defunc_0_lifted_step_res_f_res_129884 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129885 = tt_129872;
                                    defunc_0_lifted_step_res_f_res_129886 = tt_129873;
                                    defunc_0_lifted_step_res_f_res_129887 = (int64_t) 0;
                                } else {
                                    bool cond_129889 = count_129874 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129890;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129891;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129892;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129893;
                                    
                                    if (cond_129889) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129870);
                                        bool y_131754 = slt64(ss_129870, stride_129703);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129870, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:143:35-39\n   #13 ftRelational.fut:142:9-143:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129872);
                                        bool y_131760 = slt64(tt_129872, j_m_i_129726);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129872, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:143:35-39\n   #13 ftRelational.fut:142:9-143:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129776 + ss_129870;
                                        double leq_arg1_131758 = ((double *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129703 + tt_129872;
                                        int64_t slice_131764 = start_129776 + slice_131763;
                                        double leq_arg0_131765 = ((double *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = leq_arg0_131765 <= leq_arg1_131758;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129872);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129870;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129870);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129872;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = tt_129873;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = (int64_t) 0;
                                    } else {
                                        int64_t m_129912 = sdiv64(count_129874, (int64_t) 2);
                                        int64_t n_129913 = sub64(count_129874, m_129912);
                                        bool cond_129914 = n_129913 == (int64_t) 0;
                                        int64_t zgze_lhs_129915 = add64(ss_129870, m_129912);
                                        bool cond_f_res_129916 = sle64(ss_129871, zgze_lhs_129915);
                                        bool x_129917 = !cond_129914;
                                        bool y_129918 = cond_f_res_129916 && x_129917;
                                        bool cond_129919 = cond_129914 || y_129918;
                                        bool leq_y_x_129920;
                                        
                                        if (cond_129919) {
                                            leq_y_x_129920 = 1;
                                        } else {
                                            bool x_129921 = sle64((int64_t) 0, zgze_lhs_129915);
                                            bool y_129922 = slt64(zgze_lhs_129915, stride_129703);
                                            bool bounds_check_129923 = x_129921 && y_129922;
                                            bool index_certs_129924;
                                            
                                            if (!bounds_check_129923) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129915, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:143:35-39\n   #13 ftRelational.fut:142:9-143:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129927 = add64(tt_129872, n_129913);
                                            int64_t leq_arg0_129928 = sub64(zm_lhs_129927, (int64_t) 1);
                                            bool x_129929 = sle64((int64_t) 0, leq_arg0_129928);
                                            bool y_129930 = slt64(leq_arg0_129928, j_m_i_129726);
                                            bool bounds_check_129931 = x_129929 && y_129930;
                                            bool index_certs_129932;
                                            
                                            if (!bounds_check_129931) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129928, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:143:35-39\n   #13 ftRelational.fut:142:9-143:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129925 = start_129776 + zgze_lhs_129915;
                                            double leq_arg1_129926 = ((double *) mem_param_139662.mem)[slice_129925];
                                            int64_t slice_129933 = stride_129703 + leq_arg0_129928;
                                            int64_t slice_129934 = start_129776 + slice_129933;
                                            double leq_arg0_129935 = ((double *) mem_param_139662.mem)[slice_129934];
                                            bool defunc_0_leq_res_129936 = leq_arg0_129935 <= leq_arg1_129926;
                                            
                                            leq_y_x_129920 = defunc_0_leq_res_129936;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                        
                                        if (leq_y_x_129920) {
                                            int64_t tmp_131771 = add64(tt_129872, n_129913);
                                            int64_t tmp_131772 = sub64(count_129874, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tt_129873;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = tmp_131772;
                                        } else {
                                            int64_t tmp_129942 = add64(tt_129872, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tt_129872;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tmp_129942;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = count_129874;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = ss_129870;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                    }
                                    defunc_0_lifted_step_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_129890;
                                    defunc_0_lifted_step_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_129891;
                                    defunc_0_lifted_step_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_129892;
                                    defunc_0_lifted_step_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_129893;
                                }
                                defunc_0_lifted_step_res_129877 = defunc_0_lifted_step_res_f_res_129884;
                                defunc_0_lifted_step_res_129878 = defunc_0_lifted_step_res_f_res_129885;
                                defunc_0_lifted_step_res_129879 = defunc_0_lifted_step_res_f_res_129886;
                                defunc_0_lifted_step_res_129880 = defunc_0_lifted_step_res_f_res_129887;
                            }
                            
                            int64_t loopres_129943;
                            int64_t loopres_129944;
                            int64_t loopres_129945;
                            int64_t loopres_129946;
                            int64_t loopres_129947;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129943, &loopres_129944, &loopres_129945, &loopres_129946, &loopres_129947, defunc_0_lifted_step_res_129877, ss_129871, defunc_0_lifted_step_res_129878, defunc_0_lifted_step_res_129879, defunc_0_lifted_step_res_129880) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129948 = slt64((int64_t) 0, loopres_129947);
                            bool loop_while_tmp_140354 = loop_cond_129948;
                            int64_t ss_tmp_140355 = loopres_129943;
                            int64_t ss_tmp_140356 = loopres_129944;
                            int64_t tt_tmp_140357 = loopres_129945;
                            int64_t tt_tmp_140358 = loopres_129946;
                            int64_t count_tmp_140359 = loopres_129947;
                            
                            loop_while_129869 = loop_while_tmp_140354;
                            ss_129870 = ss_tmp_140355;
                            ss_129871 = ss_tmp_140356;
                            tt_129872 = tt_tmp_140357;
                            tt_129873 = tt_tmp_140358;
                            count_129874 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129863 = loop_while_129869;
                        defunc_0_split_count_res_129864 = ss_129870;
                        defunc_0_split_count_res_129865 = ss_129871;
                        defunc_0_split_count_res_129866 = tt_129872;
                        defunc_0_split_count_res_129867 = tt_129873;
                        defunc_0_split_count_res_129868 = count_129874;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129864;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129866;
                    }
                    if (mem_139698_cached_sizze_140743 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140743, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140744 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140744, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129724; i_139391++) {
                        bool y_129954 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool index_certs_129956;
                        
                        if (!y_129954) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:143:35-39\n   #10 ftRelational.fut:142:9-143:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129957 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129959 = add64((int64_t) 1, i_139391);
                        bool x_129960 = sle64((int64_t) 0, tmp_129959);
                        bool y_129961 = slt64(tmp_129959, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool bounds_check_129962 = x_129960 && y_129961;
                        bool index_certs_129963;
                        
                        if (!bounds_check_129962) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129959, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:143:35-39\n   #10 ftRelational.fut:142:9-143:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129964 = ((int64_t *) mem_139681)[tmp_129959];
                        int64_t defunc_0_f_res_129965 = ((int64_t *) mem_139683)[tmp_129959];
                        int64_t merge_sequential_arg2_129966 = add64(stride_129703, defunc_0_f_res_129958);
                        int64_t merge_sequential_arg2_129967 = add64(stride_129703, defunc_0_f_res_129965);
                        int64_t j_m_i_129968 = sub64(merge_sequential_arg2_129967, merge_sequential_arg2_129966);
                        bool empty_slice_129969 = j_m_i_129968 == (int64_t) 0;
                        int64_t m_129970 = sub64(j_m_i_129968, (int64_t) 1);
                        int64_t i_p_m_t_s_129971 = add64(merge_sequential_arg2_129966, m_129970);
                        bool zzero_leq_i_p_m_t_s_129972 = sle64((int64_t) 0, i_p_m_t_s_129971);
                        bool i_p_m_t_s_leq_w_129973 = slt64(i_p_m_t_s_129971, next_stride_129704);
                        bool zzero_lte_i_129974 = sle64((int64_t) 0, merge_sequential_arg2_129966);
                        bool i_lte_j_129975 = sle64(merge_sequential_arg2_129966, merge_sequential_arg2_129967);
                        bool y_129976 = i_p_m_t_s_leq_w_129973 && zzero_lte_i_129974;
                        bool y_129977 = zzero_leq_i_p_m_t_s_129972 && y_129976;
                        bool forwards_ok_129978 = i_lte_j_129975 && y_129977;
                        bool ok_or_empty_129979 = empty_slice_129969 || forwards_ok_129978;
                        bool index_certs_129980;
                        
                        if (!ok_or_empty_129979) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129966, ":", (long long) merge_sequential_arg2_129967, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:143:35-39\n   #10 ftRelational.fut:142:9-143:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129981 = sub64(defunc_0_f_res_129964, defunc_0_f_res_129957);
                        bool empty_slice_129982 = j_m_i_129981 == (int64_t) 0;
                        int64_t m_129983 = sub64(j_m_i_129981, (int64_t) 1);
                        int64_t i_p_m_t_s_129984 = add64(defunc_0_f_res_129957, m_129983);
                        bool zzero_leq_i_p_m_t_s_129985 = sle64((int64_t) 0, i_p_m_t_s_129984);
                        bool i_p_m_t_s_leq_w_129986 = slt64(i_p_m_t_s_129984, next_stride_129704);
                        bool zzero_lte_i_129987 = sle64((int64_t) 0, defunc_0_f_res_129957);
                        bool i_lte_j_129988 = sle64(defunc_0_f_res_129957, defunc_0_f_res_129964);
                        bool y_129989 = i_p_m_t_s_leq_w_129986 && zzero_lte_i_129987;
                        bool y_129990 = zzero_leq_i_p_m_t_s_129985 && y_129989;
                        bool forwards_ok_129991 = i_lte_j_129988 && y_129990;
                        bool ok_or_empty_129992 = empty_slice_129982 || forwards_ok_129991;
                        bool index_certs_129993;
                        
                        if (!ok_or_empty_129992) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129957, ":", (long long) defunc_0_f_res_129964, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:143:35-39\n   #10 ftRelational.fut:142:9-143:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129994 = slt64((int64_t) 0, j_m_i_129981);
                        double dummy_129995;
                        int64_t dummy_129996;
                        
                        if (cond_129994) {
                            bool index_certs_131773;
                            
                            if (!cond_129994) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:143:35-39\n   #12 ftRelational.fut:142:9-143:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129776 + defunc_0_f_res_129957;
                            double head_res_131775 = ((double *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129995 = head_res_131775;
                            dummy_129996 = head_res_131776;
                        } else {
                            bool y_130001 = slt64((int64_t) 0, j_m_i_129968);
                            bool index_certs_130002;
                            
                            if (!y_130001) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:143:35-39\n   #12 ftRelational.fut:142:9-143:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_130003 = start_129776 + merge_sequential_arg2_129966;
                            double head_res_130004 = ((double *) mem_param_139662.mem)[slice_130003];
                            int64_t head_res_130005 = ((int64_t *) mem_param_139665.mem)[slice_130003];
                            
                            dummy_129995 = head_res_130004;
                            dummy_129996 = head_res_130005;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129589; nest_i_140362++) {
                            ((double *) mem_139698)[i_139391 * merge_block_sizze_129589 + nest_i_140362] = dummy_129995;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129589; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + nest_i_140363] = dummy_129996;
                        }
                        
                        int64_t data_130008;
                        int64_t i_130012 = (int64_t) 0;
                        
                        for (int64_t k_130011 = 0; k_130011 < merge_block_sizze_129589; k_130011++) {
                            int64_t j_130015 = sub64(k_130011, i_130012);
                            bool cond_130016 = j_130015 == j_m_i_129968;
                            bool cond_130017;
                            
                            if (cond_130016) {
                                cond_130017 = 1;
                            } else {
                                bool cond_130018 = slt64(i_130012, j_m_i_129981);
                                bool cond_f_res_130019;
                                
                                if (cond_130018) {
                                    bool x_131777 = sle64((int64_t) 0, j_130015);
                                    bool y_131778 = slt64(j_130015, j_m_i_129968);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:143:35-39\n   #11 ftRelational.fut:142:9-143:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130012);
                                    bool bounds_check_131785 = cond_130018 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:143:35-39\n   #11 ftRelational.fut:142:9-143:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129966 + j_130015;
                                    int64_t slice_131782 = start_129776 + slice_131781;
                                    double leq_arg1_131783 = ((double *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129957 + i_130012;
                                    int64_t slice_131788 = start_129776 + slice_131787;
                                    double leq_arg0_131789 = ((double *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = leq_arg0_131789 <= leq_arg1_131783;
                                    
                                    cond_f_res_130019 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130019 = 0;
                                }
                                cond_130017 = cond_f_res_130019;
                            }
                            
                            int64_t loopres_130034;
                            double loopres_130035;
                            int64_t loopres_130036;
                            
                            if (cond_130017) {
                                bool x_131792 = sle64((int64_t) 0, i_130012);
                                bool y_131793 = slt64(i_130012, j_m_i_129981);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:143:35-39\n   #11 ftRelational.fut:142:9-143:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130012);
                                int64_t slice_131796 = defunc_0_f_res_129957 + i_130012;
                                int64_t slice_131797 = start_129776 + slice_131796;
                                double tmp_131798 = ((double *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130034 = tmp_131791;
                                loopres_130035 = tmp_131798;
                                loopres_130036 = tmp_131799;
                            } else {
                                bool x_130046 = sle64((int64_t) 0, j_130015);
                                bool y_130047 = slt64(j_130015, j_m_i_129968);
                                bool bounds_check_130048 = x_130046 && y_130047;
                                bool index_certs_130049;
                                
                                if (!bounds_check_130048) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:143:35-39\n   #11 ftRelational.fut:142:9-143:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130050 = merge_sequential_arg2_129966 + j_130015;
                                int64_t slice_130051 = start_129776 + slice_130050;
                                double tmp_130052 = ((double *) mem_param_139662.mem)[slice_130051];
                                int64_t tmp_130053 = ((int64_t *) mem_param_139665.mem)[slice_130051];
                                
                                loopres_130034 = i_130012;
                                loopres_130035 = tmp_130052;
                                loopres_130036 = tmp_130053;
                            }
                            ((double *) mem_139698)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130035;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130036;
                            
                            int64_t i_tmp_140364 = loopres_130034;
                            
                            i_130012 = i_tmp_140364;
                        }
                        data_130008 = i_130012;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139697, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139668, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130060 = next_stride_129704 * num_merges_129708;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            if (memblock_alloc(ctx, &mem_139778, bytes_139667, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            
            bool loop_cond_130063 = slt64(next_stride_129704, flat_dim_129585);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130060;
            bool loop_while_tmp_140341 = loop_cond_130063;
            int64_t stride_tmp_140344 = next_stride_129704;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129699 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129700 = loop_while_tmp_140341;
            stride_129703 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129694 = loop_dz2084Uz2082U_129699;
        data_129695 = loop_while_129700;
        data_129698 = stride_129703;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130064 = n_99449 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130065 = sle64((int64_t) 0, zs_lhs_129569);
        bool i_p_m_t_s_leq_w_130066 = slt64(zs_lhs_129569, data_129694);
        bool y_130067 = zzero_leq_i_p_m_t_s_130065 && i_p_m_t_s_leq_w_130066;
        bool ok_or_empty_130068 = empty_slice_130064 || y_130067;
        bool index_certs_130069;
        
        if (!ok_or_empty_130068) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_99449, "] out of bounds for array of shape [", (long long) data_129694, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:143:35-39\n   #6  ftRelational.fut:142:9-143:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139582, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_99449; i_139405++) {
        int64_t eta_p_130077 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130078 = sle64((int64_t) 0, eta_p_130077);
        bool y_130079 = slt64(eta_p_130077, n_99449);
        bool bounds_check_130080 = x_130078 && y_130079;
        bool index_certs_130081;
        
        if (!bounds_check_130080) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130077, "] out of bounds for array of shape [", (long long) n_99449, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:143:35-39\n   #5  ftRelational.fut:142:9-143:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130082 = ((int64_t *) ext_mem_139581.mem)[eta_p_130077];
        double lifted_lambda_res_130083 = ((double *) xs_mem_139580.mem)[eta_p_130077];
        
        ((int64_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130082;
        ((double *) mem_139792.mem)[i_139405] = lifted_lambda_res_130083;
    }
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140733, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140734, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_140745, struct memblock *mem_out_p_140746, struct memblock xs_mem_139580, int64_t n_97304, int64_t incr_97305)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140747 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140748 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140749 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140750 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140751 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140752 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140753 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140754 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140755 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140756 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_97304;
    bool cond_129568 = sle64(n_97304, (int64_t) 1);
    int64_t zs_lhs_129569 = sub64(n_97304, (int64_t) 1);
    int64_t zp_rhs_129570 = sdiv_safe64(zs_lhs_129569, (int64_t) 20);
    int64_t min_num_blocks_129571 = add64((int64_t) 1, zp_rhs_129570);
    bool loop_cond_129572 = slt64((int64_t) 1, min_num_blocks_129571);
    bool smallest_pow_2_geq_than_res_129573;
    int64_t smallest_pow_2_geq_than_res_129574;
    bool loop_while_129575;
    int64_t x_129576;
    
    loop_while_129575 = loop_cond_129572;
    x_129576 = (int64_t) 1;
    while (loop_while_129575) {
        int64_t loopres_129577 = mul64((int64_t) 2, x_129576);
        bool loop_cond_129578 = slt64(loopres_129577, min_num_blocks_129571);
        bool loop_while_tmp_140322 = loop_cond_129578;
        int64_t x_tmp_140323 = loopres_129577;
        
        loop_while_129575 = loop_while_tmp_140322;
        x_129576 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129573 = loop_while_129575;
    smallest_pow_2_geq_than_res_129574 = x_129576;
    
    bool zzero_129579 = smallest_pow_2_geq_than_res_129574 == (int64_t) 0;
    bool nonzzero_129580 = !zzero_129579;
    bool protect_assert_disj_129581 = cond_129568 || nonzzero_129580;
    bool nonzzero_cert_129582;
    
    if (!protect_assert_disj_129581) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:141:35-39\n   #5  ftRelational.fut:140:9-141:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129583 = sdiv_safe64(zs_lhs_129569, smallest_pow_2_geq_than_res_129574);
    int64_t block_sizze_129584 = add64((int64_t) 1, zp_rhs_129583);
    bool y_129590 = slt64((int64_t) 0, n_97304);
    bool protect_assert_disj_140188 = cond_129568 || y_129590;
    bool index_certs_129591;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_97304, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:141:35-39\n   #5  ftRelational.fut:140:9-141:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129605 = slt64(smallest_pow_2_geq_than_res_129574, (int64_t) 0);
    bool valid_129606 = !bounds_invalid_upwards_129605;
    bool protect_assert_disj_140196 = cond_129568 || valid_129606;
    bool range_valid_c_129607;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129574, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:141:35-39\n   #6  ftRelational.fut:140:9-141:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129609 = slt64(block_sizze_129584, (int64_t) 0);
    bool valid_129610 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_140198 = cond_129568 || valid_129610;
    bool range_valid_c_129611;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129584, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129613 = sle64(block_sizze_129584, (int64_t) 1);
    int64_t tmp_129614 = sub64(block_sizze_129584, (int64_t) 2);
    bool bounds_invalid_upwards_129615 = slt64(tmp_129614, (int64_t) 0);
    bool valid_129617 = !bounds_invalid_upwards_129615;
    bool protect_assert_disj_129618 = cond_129613 || valid_129617;
    bool protect_assert_disj_140200 = cond_129568 || protect_assert_disj_129618;
    bool range_valid_c_129619;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129614, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139791 = (int64_t) 4 * n_97304;
    
    if (futrts_indicesWithIncrement_11428(ctx, &ext_mem_139581, xs_mem_139580, n_97304, incr_97305) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_97304; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129585 = smallest_pow_2_geq_than_res_129574 * block_sizze_129584;
    bool x_140183 = !cond_129568;
    int64_t greatest_divisor_leq_than_arg1_129588 = mul64((int64_t) 2, block_sizze_129584);
    int64_t merge_block_sizze_129589;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129588) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129589 = x_140185;
    } else {
        merge_block_sizze_129589 = (int64_t) 0;
    }
    
    float reduce_arg1_129592;
    
    if (x_140183) {
        float x_140189 = ((float *) xs_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129592 = x_140189;
    } else {
        reduce_arg1_129592 = 0.0F;
    }
    
    float defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        float x_140191;
        int64_t x_140192;
        float redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129592;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_97304; i_139365++) {
            float x_129596 = ((float *) xs_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129602 = redout_139363 <= x_129596;
            float defunc_0_op_res_129603;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129603 = x_129596;
            } else {
                defunc_0_op_res_129603 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129604;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129604 = i_139365;
            } else {
                defunc_0_op_res_129604 = redout_139364;
            }
            
            float redout_tmp_140326 = defunc_0_op_res_129603;
            int64_t redout_tmp_140327 = defunc_0_op_res_129604;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = 0.0F;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129616 = add64((int64_t) 1, tmp_129614);
    int64_t binop_x_139584 = (int64_t) 4 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139585 = block_sizze_129584 * binop_x_139584;
    int64_t binop_x_139587 = (int64_t) 8 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139588 = block_sizze_129584 * binop_x_139587;
    int64_t bytes_139598 = (int64_t) 4 * block_sizze_129584;
    int64_t bytes_139600 = (int64_t) 8 * block_sizze_129584;
    bool loop_cond_129691 = slt64(block_sizze_129584, flat_dim_129585);
    bool zzero_129692 = merge_block_sizze_129589 == (int64_t) 0;
    bool nonzzero_129693 = !zzero_129692;
    
    if (cond_129568) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140747 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140747, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140748 < bytes_139588) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140748, bytes_139588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140749 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140749, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140750 < bytes_139600) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140750, bytes_139600);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129574; i_139377++) {
            int64_t zp_lhs_129623 = mul64(block_sizze_129584, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129584; i_139370++) {
                int64_t k_129627 = add64(zp_lhs_129623, i_139370);
                bool cond_129628 = slt64(k_129627, n_97304);
                float lifted_lambda_res_129629;
                int64_t lifted_lambda_res_129630;
                
                if (cond_129628) {
                    bool x_131659 = sle64((int64_t) 0, k_129627);
                    bool bounds_check_131660 = cond_129628 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129627, "] out of bounds for array of shape [", (long long) n_97304, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float lifted_lambda_res_t_res_131662 = ((float *) xs_mem_139580.mem)[k_129627];
                    
                    lifted_lambda_res_129629 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129630 = k_129627;
                } else {
                    lifted_lambda_res_129629 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129630 = defunc_0_reduce_res_131807;
                }
                ((float *) mem_139599)[i_139370] = lifted_lambda_res_129629;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129630;
            }
            if (!cond_129613) {
                for (int64_t i_129640 = 0; i_129640 < distance_129616; i_129640++) {
                    int64_t gt_arg1_129643 = add64((int64_t) 1, i_129640);
                    bool x_129644 = sle64((int64_t) 0, gt_arg1_129643);
                    bool y_129645 = slt64(gt_arg1_129643, block_sizze_129584);
                    bool bounds_check_129646 = x_129644 && y_129645;
                    bool index_certs_129647;
                    
                    if (!bounds_check_129646) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129643, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129649 = slt64(i_129640, block_sizze_129584);
                    bool index_certs_129650;
                    
                    if (!y_129649) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129640, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float gt_arg1_129648 = ((float *) mem_139599)[gt_arg1_129643];
                    float gt_arg0_129651 = ((float *) mem_139599)[i_129640];
                    bool defunc_0_leq_res_129652 = gt_arg0_129651 <= gt_arg1_129648;
                    bool defunc_0_lifted_gt_res_129653 = !defunc_0_leq_res_129652;
                    bool s_129654;
                    int64_t s_129657;
                    bool loop_while_129658;
                    int64_t j_129661;
                    
                    loop_while_129658 = defunc_0_lifted_gt_res_129653;
                    j_129661 = i_129640;
                    while (loop_while_129658) {
                        bool x_129662 = sle64((int64_t) 0, j_129661);
                        bool y_129663 = slt64(j_129661, block_sizze_129584);
                        bool bounds_check_129664 = x_129662 && y_129663;
                        bool index_certs_129665;
                        
                        if (!bounds_check_129664) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129661, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129668 = add64((int64_t) 1, j_129661);
                        bool x_129669 = sle64((int64_t) 0, copy_arg0_129668);
                        bool y_129670 = slt64(copy_arg0_129668, block_sizze_129584);
                        bool bounds_check_129671 = x_129669 && y_129670;
                        bool index_certs_129672;
                        
                        if (!bounds_check_129671) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129668, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        float copy_arg0_129666 = ((float *) mem_139599)[j_129661];
                        int64_t copy_arg0_129667 = ((int64_t *) mem_139601)[j_129661];
                        float copy_arg0_129673 = ((float *) mem_139599)[copy_arg0_129668];
                        int64_t copy_arg0_129674 = ((int64_t *) mem_139601)[copy_arg0_129668];
                        
                        ((float *) mem_139599)[j_129661] = copy_arg0_129673;
                        ((int64_t *) mem_139601)[j_129661] = copy_arg0_129674;
                        ((float *) mem_139599)[copy_arg0_129668] = copy_arg0_129666;
                        ((int64_t *) mem_139601)[copy_arg0_129668] = copy_arg0_129667;
                        
                        int64_t tmp_129679 = sub64(j_129661, (int64_t) 1);
                        bool cond_129680 = sle64((int64_t) 0, tmp_129679);
                        bool loop_cond_129681;
                        
                        if (cond_129680) {
                            bool y_131664 = slt64(tmp_129679, block_sizze_129584);
                            bool bounds_check_131665 = cond_129680 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129679, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            float gt_arg1_131663 = ((float *) mem_139599)[j_129661];
                            float gt_arg0_131667 = ((float *) mem_139599)[tmp_129679];
                            bool defunc_0_leq_res_131668 = gt_arg0_131667 <= gt_arg1_131663;
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129681 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129681 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129681;
                        int64_t j_tmp_140337 = tmp_129679;
                        
                        loop_while_129658 = loop_while_tmp_140334;
                        j_129661 = j_tmp_140337;
                    }
                    s_129654 = loop_while_129658;
                    s_129657 = j_129661;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139586, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint32_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        if (memblock_alloc(ctx, &mem_139658, bytes_139588, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        
        int64_t data_129694;
        bool data_129695;
        int64_t data_129698;
        int64_t loop_dz2084Uz2082U_129699;
        bool loop_while_129700;
        int64_t stride_129703;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129699 = flat_dim_129585;
        loop_while_129700 = loop_cond_129691;
        stride_129703 = block_sizze_129584;
        while (loop_while_129700) {
            int64_t next_stride_129704 = mul64((int64_t) 2, stride_129703);
            bool zzero_129705 = next_stride_129704 == (int64_t) 0;
            bool nonzzero_129706 = !zzero_129705;
            bool nonzzero_cert_129707;
            
            if (!nonzzero_129706) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:141:35-39\n   #5  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129708 = sdiv64(flat_dim_129585, next_stride_129704);
            bool bounds_invalid_upwards_129709 = slt64(num_merges_129708, (int64_t) 0);
            bool valid_129710 = !bounds_invalid_upwards_129709;
            bool range_valid_c_129711;
            
            if (!valid_129710) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129708, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:141:35-39\n   #6  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129713 = sub64(next_stride_129704, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129714 = sle64((int64_t) 0, m_129713);
            bool cond_129716 = slt64(next_stride_129704, (int64_t) 10);
            bool protect_assert_disj_129717 = nonzzero_129693 || cond_129716;
            bool nonzzero_cert_129718;
            
            if (!protect_assert_disj_129717) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129719 = smod_safe64(next_stride_129704, merge_block_sizze_129589);
            bool num_blocks_129720 = zeze_lhs_129719 == (int64_t) 0;
            bool protect_assert_disj_129721 = cond_129716 || num_blocks_129720;
            bool assert_c_129722;
            
            if (!protect_assert_disj_129721) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129724 = sdiv_safe64(next_stride_129704, merge_block_sizze_129589);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725 = add64((int64_t) 1, num_blocks_129724);
            int64_t j_m_i_129726 = sub64(next_stride_129704, stride_129703);
            int64_t flat_dim_129727 = merge_block_sizze_129589 * num_blocks_129724;
            bool bounds_invalid_upwards_129728 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, (int64_t) 0);
            bool empty_slice_129729 = j_m_i_129726 == (int64_t) 0;
            int64_t m_129730 = sub64(j_m_i_129726, (int64_t) 1);
            bool zzero_lte_i_129731 = sle64((int64_t) 0, stride_129703);
            bool i_lte_j_129732 = sle64(stride_129703, next_stride_129704);
            bool empty_slice_129733 = stride_129703 == (int64_t) 0;
            int64_t m_129734 = sub64(stride_129703, (int64_t) 1);
            bool bounds_invalid_upwards_129735 = slt64(num_blocks_129724, (int64_t) 0);
            bool cond_129736 = slt64((int64_t) 0, stride_129703);
            bool valid_129737 = !bounds_invalid_upwards_129728;
            int64_t i_p_m_t_s_129738 = add64(stride_129703, m_129730);
            bool zzero_leq_i_p_m_t_s_129739 = sle64((int64_t) 0, m_129734);
            bool i_p_m_t_s_leq_w_129740 = slt64(m_129734, next_stride_129704);
            bool valid_129741 = !bounds_invalid_upwards_129735;
            bool i_p_m_t_s_leq_w_129742 = slt64(m_129713, flat_dim_129727);
            bool y_129743 = slt64((int64_t) 0, j_m_i_129726);
            bool protect_assert_disj_129744 = cond_129716 || valid_129737;
            bool range_valid_c_129745;
            
            if (!protect_assert_disj_129744) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:141:35-39\n   #10 ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129746 = sle64((int64_t) 0, i_p_m_t_s_129738);
            bool i_p_m_t_s_leq_w_129747 = slt64(i_p_m_t_s_129738, next_stride_129704);
            bool y_129748 = zzero_leq_i_p_m_t_s_129739 && i_p_m_t_s_leq_w_129740;
            bool protect_assert_disj_129749 = cond_129716 || valid_129741;
            bool range_valid_c_129750;
            
            if (!protect_assert_disj_129749) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129724, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129751 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129742;
            bool y_129752 = zzero_lte_i_129731 && i_p_m_t_s_leq_w_129747;
            bool forwards_ok_129753 = zzero_lte_i_129731 && y_129748;
            bool ok_or_empty_129754 = zzero_129705 || y_129751;
            bool protect_assert_disj_129755 = cond_129736 || y_129743;
            bool y_129756 = zzero_leq_i_p_m_t_s_129746 && y_129752;
            bool ok_or_empty_129757 = empty_slice_129733 || forwards_ok_129753;
            bool protect_assert_disj_129758 = cond_129716 || ok_or_empty_129754;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) flat_dim_129727, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129760 = !cond_129716;
            bool protect_assert_disj_129761 = protect_assert_disj_129755 || loop_not_taken_129760;
            bool index_certs_129762;
            
            if (!protect_assert_disj_129761) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:141:35-39\n   #10 ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129763 = i_lte_j_129732 && y_129756;
            bool protect_assert_disj_129764 = cond_129716 || ok_or_empty_129757;
            bool index_certs_129765;
            
            if (!protect_assert_disj_129764) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:141:35-39\n   #11 ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129766 = ok_or_empty_129757 || loop_not_taken_129760;
            bool index_certs_129767;
            
            if (!protect_assert_disj_129766) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129768 = empty_slice_129729 || forwards_ok_129763;
            bool protect_assert_disj_129769 = cond_129716 || ok_or_empty_129768;
            bool index_certs_129770;
            
            if (!protect_assert_disj_129769) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:141:35-39\n   #11 ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129771 = loop_not_taken_129760 || ok_or_empty_129768;
            bool index_certs_129772;
            
            if (!protect_assert_disj_129771) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 4 * num_merges_129708;
            int64_t bytes_139667 = next_stride_129704 * binop_x_139666;
            int64_t binop_x_139669 = (int64_t) 8 * num_merges_129708;
            int64_t bytes_139670 = next_stride_129704 * binop_x_139669;
            bool i_lte_j_129715 = sle64((int64_t) 0, next_stride_129704);
            
            if (mem_139668_cached_sizze_140751 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140751, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140752 < bytes_139670) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140752, bytes_139670);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725;
            int64_t binop_x_139696 = (int64_t) 4 * num_blocks_129724;
            int64_t bytes_139697 = merge_block_sizze_129589 * binop_x_139696;
            int64_t binop_x_139699 = (int64_t) 8 * num_blocks_129724;
            int64_t bytes_139700 = merge_block_sizze_129589 * binop_x_139699;
            int64_t bytes_139742 = (int64_t) 8 * stride_129703;
            int64_t bytes_139744 = (int64_t) 16 * stride_129703;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129708; i_139398++) {
                int64_t start_129776 = mul64(next_stride_129704, i_139398);
                int64_t j_m_i_129777 = sub64(loop_dz2084Uz2082U_129699, start_129776);
                bool empty_slice_129778 = j_m_i_129777 == (int64_t) 0;
                int64_t m_129779 = sub64(j_m_i_129777, (int64_t) 1);
                int64_t i_p_m_t_s_129780 = add64(start_129776, m_129779);
                bool zzero_leq_i_p_m_t_s_129781 = sle64((int64_t) 0, i_p_m_t_s_129780);
                bool i_p_m_t_s_leq_w_129782 = slt64(i_p_m_t_s_129780, loop_dz2084Uz2082U_129699);
                bool zzero_lte_i_129783 = sle64((int64_t) 0, start_129776);
                bool i_lte_j_129784 = sle64(start_129776, loop_dz2084Uz2082U_129699);
                bool y_129785 = i_p_m_t_s_leq_w_129782 && zzero_lte_i_129783;
                bool y_129786 = zzero_leq_i_p_m_t_s_129781 && y_129785;
                bool forwards_ok_129787 = i_lte_j_129784 && y_129786;
                bool ok_or_empty_129788 = empty_slice_129778 || forwards_ok_129787;
                bool index_certs_129789;
                
                if (!ok_or_empty_129788) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129776, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129699, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129790 = slt64(m_129713, j_m_i_129777);
                bool y_129791 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129790;
                bool forwards_ok_129792 = i_lte_j_129715 && y_129791;
                bool ok_or_empty_129793 = zzero_129705 || forwards_ok_129792;
                bool index_certs_129794;
                
                if (!ok_or_empty_129793) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) j_m_i_129777, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:141:35-39\n   #8  ftRelational.fut:140:9-141:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129716) {
                    float dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129736) {
                        float head_res_131697 = ((float *) mem_param_139662.mem)[start_129776];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129776];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129703 + start_129776;
                        float head_res_131700 = ((float *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129704; nest_i_140347++) {
                        ((float *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139744, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129704; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129704; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129726;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129703);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129726);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129703 + j_131711;
                                int64_t slice_131721 = start_129776 + slice_131720;
                                float leq_arg1_131722 = ((float *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129776 + i_131708;
                                float leq_arg0_131727 = ((float *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = leq_arg0_131727 <= leq_arg1_131722;
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        float loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129703);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129776 + i_131708;
                            float tmp_131738 = ((float *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129726);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:141:35-39\n   #9  ftRelational.fut:140:9-141:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129703 + j_131711;
                            int64_t slice_131745 = start_129776 + slice_131744;
                            float tmp_131746 = ((float *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((float *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140753 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140753, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140754 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140754, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725; i_139384++) {
                        int64_t split_count_arg3_129856 = mul64(merge_block_sizze_129589, i_139384);
                        int64_t defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129857, &defunc_0_split_count_res_129858, &defunc_0_split_count_res_129859, &defunc_0_split_count_res_129860, &defunc_0_split_count_res_129861, (int64_t) 0, stride_129703, (int64_t) 0, j_m_i_129726, split_count_arg3_129856) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129862 = slt64((int64_t) 0, defunc_0_split_count_res_129861);
                        bool defunc_0_split_count_res_129863;
                        int64_t defunc_0_split_count_res_129864;
                        int64_t defunc_0_split_count_res_129865;
                        int64_t defunc_0_split_count_res_129866;
                        int64_t defunc_0_split_count_res_129867;
                        int64_t defunc_0_split_count_res_129868;
                        bool loop_while_129869;
                        int64_t ss_129870;
                        int64_t ss_129871;
                        int64_t tt_129872;
                        int64_t tt_129873;
                        int64_t count_129874;
                        
                        loop_while_129869 = loop_cond_129862;
                        ss_129870 = defunc_0_split_count_res_129857;
                        ss_129871 = defunc_0_split_count_res_129858;
                        tt_129872 = defunc_0_split_count_res_129859;
                        tt_129873 = defunc_0_split_count_res_129860;
                        count_129874 = defunc_0_split_count_res_129861;
                        while (loop_while_129869) {
                            int64_t zlze_lhs_129875 = sub64(ss_129871, ss_129870);
                            bool cond_129876 = sle64(zlze_lhs_129875, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129877;
                            int64_t defunc_0_lifted_step_res_129878;
                            int64_t defunc_0_lifted_step_res_129879;
                            int64_t defunc_0_lifted_step_res_129880;
                            
                            if (cond_129876) {
                                int64_t tmp_131750 = add64(tt_129872, count_129874);
                                
                                defunc_0_lifted_step_res_129877 = ss_129870;
                                defunc_0_lifted_step_res_129878 = tmp_131750;
                                defunc_0_lifted_step_res_129879 = tt_129873;
                                defunc_0_lifted_step_res_129880 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129882 = sub64(tt_129873, tt_129872);
                                bool cond_129883 = sle64(zlze_lhs_129882, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129884;
                                int64_t defunc_0_lifted_step_res_f_res_129885;
                                int64_t defunc_0_lifted_step_res_f_res_129886;
                                int64_t defunc_0_lifted_step_res_f_res_129887;
                                
                                if (cond_129883) {
                                    int64_t tmp_131751 = add64(ss_129870, count_129874);
                                    
                                    defunc_0_lifted_step_res_f_res_129884 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129885 = tt_129872;
                                    defunc_0_lifted_step_res_f_res_129886 = tt_129873;
                                    defunc_0_lifted_step_res_f_res_129887 = (int64_t) 0;
                                } else {
                                    bool cond_129889 = count_129874 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129890;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129891;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129892;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129893;
                                    
                                    if (cond_129889) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129870);
                                        bool y_131754 = slt64(ss_129870, stride_129703);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129870, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:141:35-39\n   #13 ftRelational.fut:140:9-141:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129872);
                                        bool y_131760 = slt64(tt_129872, j_m_i_129726);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129872, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:141:35-39\n   #13 ftRelational.fut:140:9-141:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129776 + ss_129870;
                                        float leq_arg1_131758 = ((float *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129703 + tt_129872;
                                        int64_t slice_131764 = start_129776 + slice_131763;
                                        float leq_arg0_131765 = ((float *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = leq_arg0_131765 <= leq_arg1_131758;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129872);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129870;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129870);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129872;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = tt_129873;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = (int64_t) 0;
                                    } else {
                                        int64_t m_129912 = sdiv64(count_129874, (int64_t) 2);
                                        int64_t n_129913 = sub64(count_129874, m_129912);
                                        bool cond_129914 = n_129913 == (int64_t) 0;
                                        int64_t zgze_lhs_129915 = add64(ss_129870, m_129912);
                                        bool cond_f_res_129916 = sle64(ss_129871, zgze_lhs_129915);
                                        bool x_129917 = !cond_129914;
                                        bool y_129918 = cond_f_res_129916 && x_129917;
                                        bool cond_129919 = cond_129914 || y_129918;
                                        bool leq_y_x_129920;
                                        
                                        if (cond_129919) {
                                            leq_y_x_129920 = 1;
                                        } else {
                                            bool x_129921 = sle64((int64_t) 0, zgze_lhs_129915);
                                            bool y_129922 = slt64(zgze_lhs_129915, stride_129703);
                                            bool bounds_check_129923 = x_129921 && y_129922;
                                            bool index_certs_129924;
                                            
                                            if (!bounds_check_129923) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129915, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:141:35-39\n   #13 ftRelational.fut:140:9-141:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129927 = add64(tt_129872, n_129913);
                                            int64_t leq_arg0_129928 = sub64(zm_lhs_129927, (int64_t) 1);
                                            bool x_129929 = sle64((int64_t) 0, leq_arg0_129928);
                                            bool y_129930 = slt64(leq_arg0_129928, j_m_i_129726);
                                            bool bounds_check_129931 = x_129929 && y_129930;
                                            bool index_certs_129932;
                                            
                                            if (!bounds_check_129931) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129928, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:141:35-39\n   #13 ftRelational.fut:140:9-141:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129925 = start_129776 + zgze_lhs_129915;
                                            float leq_arg1_129926 = ((float *) mem_param_139662.mem)[slice_129925];
                                            int64_t slice_129933 = stride_129703 + leq_arg0_129928;
                                            int64_t slice_129934 = start_129776 + slice_129933;
                                            float leq_arg0_129935 = ((float *) mem_param_139662.mem)[slice_129934];
                                            bool defunc_0_leq_res_129936 = leq_arg0_129935 <= leq_arg1_129926;
                                            
                                            leq_y_x_129920 = defunc_0_leq_res_129936;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                        
                                        if (leq_y_x_129920) {
                                            int64_t tmp_131771 = add64(tt_129872, n_129913);
                                            int64_t tmp_131772 = sub64(count_129874, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tt_129873;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = tmp_131772;
                                        } else {
                                            int64_t tmp_129942 = add64(tt_129872, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tt_129872;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tmp_129942;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = count_129874;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = ss_129870;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                    }
                                    defunc_0_lifted_step_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_129890;
                                    defunc_0_lifted_step_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_129891;
                                    defunc_0_lifted_step_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_129892;
                                    defunc_0_lifted_step_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_129893;
                                }
                                defunc_0_lifted_step_res_129877 = defunc_0_lifted_step_res_f_res_129884;
                                defunc_0_lifted_step_res_129878 = defunc_0_lifted_step_res_f_res_129885;
                                defunc_0_lifted_step_res_129879 = defunc_0_lifted_step_res_f_res_129886;
                                defunc_0_lifted_step_res_129880 = defunc_0_lifted_step_res_f_res_129887;
                            }
                            
                            int64_t loopres_129943;
                            int64_t loopres_129944;
                            int64_t loopres_129945;
                            int64_t loopres_129946;
                            int64_t loopres_129947;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129943, &loopres_129944, &loopres_129945, &loopres_129946, &loopres_129947, defunc_0_lifted_step_res_129877, ss_129871, defunc_0_lifted_step_res_129878, defunc_0_lifted_step_res_129879, defunc_0_lifted_step_res_129880) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129948 = slt64((int64_t) 0, loopres_129947);
                            bool loop_while_tmp_140354 = loop_cond_129948;
                            int64_t ss_tmp_140355 = loopres_129943;
                            int64_t ss_tmp_140356 = loopres_129944;
                            int64_t tt_tmp_140357 = loopres_129945;
                            int64_t tt_tmp_140358 = loopres_129946;
                            int64_t count_tmp_140359 = loopres_129947;
                            
                            loop_while_129869 = loop_while_tmp_140354;
                            ss_129870 = ss_tmp_140355;
                            ss_129871 = ss_tmp_140356;
                            tt_129872 = tt_tmp_140357;
                            tt_129873 = tt_tmp_140358;
                            count_129874 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129863 = loop_while_129869;
                        defunc_0_split_count_res_129864 = ss_129870;
                        defunc_0_split_count_res_129865 = ss_129871;
                        defunc_0_split_count_res_129866 = tt_129872;
                        defunc_0_split_count_res_129867 = tt_129873;
                        defunc_0_split_count_res_129868 = count_129874;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129864;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129866;
                    }
                    if (mem_139698_cached_sizze_140755 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140755, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140756 < bytes_139700) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140756, bytes_139700);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129724; i_139391++) {
                        bool y_129954 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool index_certs_129956;
                        
                        if (!y_129954) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:141:35-39\n   #10 ftRelational.fut:140:9-141:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129957 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129959 = add64((int64_t) 1, i_139391);
                        bool x_129960 = sle64((int64_t) 0, tmp_129959);
                        bool y_129961 = slt64(tmp_129959, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool bounds_check_129962 = x_129960 && y_129961;
                        bool index_certs_129963;
                        
                        if (!bounds_check_129962) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129959, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:141:35-39\n   #10 ftRelational.fut:140:9-141:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129964 = ((int64_t *) mem_139681)[tmp_129959];
                        int64_t defunc_0_f_res_129965 = ((int64_t *) mem_139683)[tmp_129959];
                        int64_t merge_sequential_arg2_129966 = add64(stride_129703, defunc_0_f_res_129958);
                        int64_t merge_sequential_arg2_129967 = add64(stride_129703, defunc_0_f_res_129965);
                        int64_t j_m_i_129968 = sub64(merge_sequential_arg2_129967, merge_sequential_arg2_129966);
                        bool empty_slice_129969 = j_m_i_129968 == (int64_t) 0;
                        int64_t m_129970 = sub64(j_m_i_129968, (int64_t) 1);
                        int64_t i_p_m_t_s_129971 = add64(merge_sequential_arg2_129966, m_129970);
                        bool zzero_leq_i_p_m_t_s_129972 = sle64((int64_t) 0, i_p_m_t_s_129971);
                        bool i_p_m_t_s_leq_w_129973 = slt64(i_p_m_t_s_129971, next_stride_129704);
                        bool zzero_lte_i_129974 = sle64((int64_t) 0, merge_sequential_arg2_129966);
                        bool i_lte_j_129975 = sle64(merge_sequential_arg2_129966, merge_sequential_arg2_129967);
                        bool y_129976 = i_p_m_t_s_leq_w_129973 && zzero_lte_i_129974;
                        bool y_129977 = zzero_leq_i_p_m_t_s_129972 && y_129976;
                        bool forwards_ok_129978 = i_lte_j_129975 && y_129977;
                        bool ok_or_empty_129979 = empty_slice_129969 || forwards_ok_129978;
                        bool index_certs_129980;
                        
                        if (!ok_or_empty_129979) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129966, ":", (long long) merge_sequential_arg2_129967, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:141:35-39\n   #10 ftRelational.fut:140:9-141:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129981 = sub64(defunc_0_f_res_129964, defunc_0_f_res_129957);
                        bool empty_slice_129982 = j_m_i_129981 == (int64_t) 0;
                        int64_t m_129983 = sub64(j_m_i_129981, (int64_t) 1);
                        int64_t i_p_m_t_s_129984 = add64(defunc_0_f_res_129957, m_129983);
                        bool zzero_leq_i_p_m_t_s_129985 = sle64((int64_t) 0, i_p_m_t_s_129984);
                        bool i_p_m_t_s_leq_w_129986 = slt64(i_p_m_t_s_129984, next_stride_129704);
                        bool zzero_lte_i_129987 = sle64((int64_t) 0, defunc_0_f_res_129957);
                        bool i_lte_j_129988 = sle64(defunc_0_f_res_129957, defunc_0_f_res_129964);
                        bool y_129989 = i_p_m_t_s_leq_w_129986 && zzero_lte_i_129987;
                        bool y_129990 = zzero_leq_i_p_m_t_s_129985 && y_129989;
                        bool forwards_ok_129991 = i_lte_j_129988 && y_129990;
                        bool ok_or_empty_129992 = empty_slice_129982 || forwards_ok_129991;
                        bool index_certs_129993;
                        
                        if (!ok_or_empty_129992) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129957, ":", (long long) defunc_0_f_res_129964, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:141:35-39\n   #10 ftRelational.fut:140:9-141:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129994 = slt64((int64_t) 0, j_m_i_129981);
                        float dummy_129995;
                        int64_t dummy_129996;
                        
                        if (cond_129994) {
                            bool index_certs_131773;
                            
                            if (!cond_129994) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:141:35-39\n   #12 ftRelational.fut:140:9-141:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129776 + defunc_0_f_res_129957;
                            float head_res_131775 = ((float *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129995 = head_res_131775;
                            dummy_129996 = head_res_131776;
                        } else {
                            bool y_130001 = slt64((int64_t) 0, j_m_i_129968);
                            bool index_certs_130002;
                            
                            if (!y_130001) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:141:35-39\n   #12 ftRelational.fut:140:9-141:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_130003 = start_129776 + merge_sequential_arg2_129966;
                            float head_res_130004 = ((float *) mem_param_139662.mem)[slice_130003];
                            int64_t head_res_130005 = ((int64_t *) mem_param_139665.mem)[slice_130003];
                            
                            dummy_129995 = head_res_130004;
                            dummy_129996 = head_res_130005;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129589; nest_i_140362++) {
                            ((float *) mem_139698)[i_139391 * merge_block_sizze_129589 + nest_i_140362] = dummy_129995;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129589; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + nest_i_140363] = dummy_129996;
                        }
                        
                        int64_t data_130008;
                        int64_t i_130012 = (int64_t) 0;
                        
                        for (int64_t k_130011 = 0; k_130011 < merge_block_sizze_129589; k_130011++) {
                            int64_t j_130015 = sub64(k_130011, i_130012);
                            bool cond_130016 = j_130015 == j_m_i_129968;
                            bool cond_130017;
                            
                            if (cond_130016) {
                                cond_130017 = 1;
                            } else {
                                bool cond_130018 = slt64(i_130012, j_m_i_129981);
                                bool cond_f_res_130019;
                                
                                if (cond_130018) {
                                    bool x_131777 = sle64((int64_t) 0, j_130015);
                                    bool y_131778 = slt64(j_130015, j_m_i_129968);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:141:35-39\n   #11 ftRelational.fut:140:9-141:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130012);
                                    bool bounds_check_131785 = cond_130018 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:141:35-39\n   #11 ftRelational.fut:140:9-141:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129966 + j_130015;
                                    int64_t slice_131782 = start_129776 + slice_131781;
                                    float leq_arg1_131783 = ((float *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129957 + i_130012;
                                    int64_t slice_131788 = start_129776 + slice_131787;
                                    float leq_arg0_131789 = ((float *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = leq_arg0_131789 <= leq_arg1_131783;
                                    
                                    cond_f_res_130019 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130019 = 0;
                                }
                                cond_130017 = cond_f_res_130019;
                            }
                            
                            int64_t loopres_130034;
                            float loopres_130035;
                            int64_t loopres_130036;
                            
                            if (cond_130017) {
                                bool x_131792 = sle64((int64_t) 0, i_130012);
                                bool y_131793 = slt64(i_130012, j_m_i_129981);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:141:35-39\n   #11 ftRelational.fut:140:9-141:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130012);
                                int64_t slice_131796 = defunc_0_f_res_129957 + i_130012;
                                int64_t slice_131797 = start_129776 + slice_131796;
                                float tmp_131798 = ((float *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130034 = tmp_131791;
                                loopres_130035 = tmp_131798;
                                loopres_130036 = tmp_131799;
                            } else {
                                bool x_130046 = sle64((int64_t) 0, j_130015);
                                bool y_130047 = slt64(j_130015, j_m_i_129968);
                                bool bounds_check_130048 = x_130046 && y_130047;
                                bool index_certs_130049;
                                
                                if (!bounds_check_130048) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:141:35-39\n   #11 ftRelational.fut:140:9-141:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130050 = merge_sequential_arg2_129966 + j_130015;
                                int64_t slice_130051 = start_129776 + slice_130050;
                                float tmp_130052 = ((float *) mem_param_139662.mem)[slice_130051];
                                int64_t tmp_130053 = ((int64_t *) mem_param_139665.mem)[slice_130051];
                                
                                loopres_130034 = i_130012;
                                loopres_130035 = tmp_130052;
                                loopres_130036 = tmp_130053;
                            }
                            ((float *) mem_139698)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130035;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130036;
                            
                            int64_t i_tmp_140364 = loopres_130034;
                            
                            i_130012 = i_tmp_140364;
                        }
                        data_130008 = i_130012;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint32_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139700, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_139668, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130060 = next_stride_129704 * num_merges_129708;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint32_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            if (memblock_alloc(ctx, &mem_139778, bytes_139670, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            
            bool loop_cond_130063 = slt64(next_stride_129704, flat_dim_129585);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130060;
            bool loop_while_tmp_140341 = loop_cond_130063;
            int64_t stride_tmp_140344 = next_stride_129704;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129699 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129700 = loop_while_tmp_140341;
            stride_129703 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129694 = loop_dz2084Uz2082U_129699;
        data_129695 = loop_while_129700;
        data_129698 = stride_129703;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130064 = n_97304 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130065 = sle64((int64_t) 0, zs_lhs_129569);
        bool i_p_m_t_s_leq_w_130066 = slt64(zs_lhs_129569, data_129694);
        bool y_130067 = zzero_leq_i_p_m_t_s_130065 && i_p_m_t_s_leq_w_130066;
        bool ok_or_empty_130068 = empty_slice_130064 || y_130067;
        bool index_certs_130069;
        
        if (!ok_or_empty_130068) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_97304, "] out of bounds for array of shape [", (long long) data_129694, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:141:35-39\n   #6  ftRelational.fut:140:9-141:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_97304; i_139405++) {
        int64_t eta_p_130077 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130078 = sle64((int64_t) 0, eta_p_130077);
        bool y_130079 = slt64(eta_p_130077, n_97304);
        bool bounds_check_130080 = x_130078 && y_130079;
        bool index_certs_130081;
        
        if (!bounds_check_130080) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130077, "] out of bounds for array of shape [", (long long) n_97304, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:141:35-39\n   #5  ftRelational.fut:140:9-141:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130082 = ((int64_t *) ext_mem_139581.mem)[eta_p_130077];
        float lifted_lambda_res_130083 = ((float *) xs_mem_139580.mem)[eta_p_130077];
        
        ((int64_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130082;
        ((float *) mem_139792.mem)[i_139405] = lifted_lambda_res_130083;
    }
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140745, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140746, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_140757, struct memblock *mem_out_p_140758, struct memblock xs_mem_139580, int64_t n_93018, int64_t incr_93019)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140759 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140760 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140761 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140762 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140763 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140764 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140765 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140766 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140767 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140768 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_93018;
    bool cond_129568 = sle64(n_93018, (int64_t) 1);
    int64_t zs_lhs_129569 = sub64(n_93018, (int64_t) 1);
    int64_t zp_rhs_129570 = sdiv_safe64(zs_lhs_129569, (int64_t) 20);
    int64_t min_num_blocks_129571 = add64((int64_t) 1, zp_rhs_129570);
    bool loop_cond_129572 = slt64((int64_t) 1, min_num_blocks_129571);
    bool smallest_pow_2_geq_than_res_129573;
    int64_t smallest_pow_2_geq_than_res_129574;
    bool loop_while_129575;
    int64_t x_129576;
    
    loop_while_129575 = loop_cond_129572;
    x_129576 = (int64_t) 1;
    while (loop_while_129575) {
        int64_t loopres_129577 = mul64((int64_t) 2, x_129576);
        bool loop_cond_129578 = slt64(loopres_129577, min_num_blocks_129571);
        bool loop_while_tmp_140322 = loop_cond_129578;
        int64_t x_tmp_140323 = loopres_129577;
        
        loop_while_129575 = loop_while_tmp_140322;
        x_129576 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129573 = loop_while_129575;
    smallest_pow_2_geq_than_res_129574 = x_129576;
    
    bool zzero_129579 = smallest_pow_2_geq_than_res_129574 == (int64_t) 0;
    bool nonzzero_129580 = !zzero_129579;
    bool protect_assert_disj_129581 = cond_129568 || nonzzero_129580;
    bool nonzzero_cert_129582;
    
    if (!protect_assert_disj_129581) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:137:35-39\n   #5  ftRelational.fut:136:9-137:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129583 = sdiv_safe64(zs_lhs_129569, smallest_pow_2_geq_than_res_129574);
    int64_t block_sizze_129584 = add64((int64_t) 1, zp_rhs_129583);
    bool y_129590 = slt64((int64_t) 0, n_93018);
    bool protect_assert_disj_140188 = cond_129568 || y_129590;
    bool index_certs_129591;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_93018, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:137:35-39\n   #5  ftRelational.fut:136:9-137:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129605 = slt64(smallest_pow_2_geq_than_res_129574, (int64_t) 0);
    bool valid_129606 = !bounds_invalid_upwards_129605;
    bool protect_assert_disj_140196 = cond_129568 || valid_129606;
    bool range_valid_c_129607;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129574, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:137:35-39\n   #6  ftRelational.fut:136:9-137:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129609 = slt64(block_sizze_129584, (int64_t) 0);
    bool valid_129610 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_140198 = cond_129568 || valid_129610;
    bool range_valid_c_129611;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129584, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129613 = sle64(block_sizze_129584, (int64_t) 1);
    int64_t tmp_129614 = sub64(block_sizze_129584, (int64_t) 2);
    bool bounds_invalid_upwards_129615 = slt64(tmp_129614, (int64_t) 0);
    bool valid_129617 = !bounds_invalid_upwards_129615;
    bool protect_assert_disj_129618 = cond_129613 || valid_129617;
    bool protect_assert_disj_140200 = cond_129568 || protect_assert_disj_129618;
    bool range_valid_c_129619;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129614, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139791 = (int64_t) 4 * n_93018;
    
    if (futrts_indicesWithIncrement_11384(ctx, &ext_mem_139581, xs_mem_139580, n_93018, incr_93019) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_93018; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129585 = smallest_pow_2_geq_than_res_129574 * block_sizze_129584;
    bool x_140183 = !cond_129568;
    int64_t greatest_divisor_leq_than_arg1_129588 = mul64((int64_t) 2, block_sizze_129584);
    int64_t merge_block_sizze_129589;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129588) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129589 = x_140185;
    } else {
        merge_block_sizze_129589 = (int64_t) 0;
    }
    
    int32_t reduce_arg1_129592;
    
    if (x_140183) {
        int32_t x_140189 = ((int32_t *) xs_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129592 = x_140189;
    } else {
        reduce_arg1_129592 = 0;
    }
    
    int32_t defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        int32_t x_140191;
        int64_t x_140192;
        int32_t redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129592;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_93018; i_139365++) {
            int32_t x_129596 = ((int32_t *) xs_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129602 = sle32(redout_139363, x_129596);
            int32_t defunc_0_op_res_129603;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129603 = x_129596;
            } else {
                defunc_0_op_res_129603 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129604;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129604 = i_139365;
            } else {
                defunc_0_op_res_129604 = redout_139364;
            }
            
            int32_t redout_tmp_140326 = defunc_0_op_res_129603;
            int64_t redout_tmp_140327 = defunc_0_op_res_129604;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = 0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129616 = add64((int64_t) 1, tmp_129614);
    int64_t binop_x_139584 = (int64_t) 4 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139585 = block_sizze_129584 * binop_x_139584;
    int64_t binop_x_139587 = (int64_t) 8 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139588 = block_sizze_129584 * binop_x_139587;
    int64_t bytes_139598 = (int64_t) 4 * block_sizze_129584;
    int64_t bytes_139600 = (int64_t) 8 * block_sizze_129584;
    bool loop_cond_129691 = slt64(block_sizze_129584, flat_dim_129585);
    bool zzero_129692 = merge_block_sizze_129589 == (int64_t) 0;
    bool nonzzero_129693 = !zzero_129692;
    
    if (cond_129568) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140759 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140759, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140760 < bytes_139588) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140760, bytes_139588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140761 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140761, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140762 < bytes_139600) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140762, bytes_139600);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129574; i_139377++) {
            int64_t zp_lhs_129623 = mul64(block_sizze_129584, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129584; i_139370++) {
                int64_t k_129627 = add64(zp_lhs_129623, i_139370);
                bool cond_129628 = slt64(k_129627, n_93018);
                int32_t lifted_lambda_res_129629;
                int64_t lifted_lambda_res_129630;
                
                if (cond_129628) {
                    bool x_131659 = sle64((int64_t) 0, k_129627);
                    bool bounds_check_131660 = cond_129628 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129627, "] out of bounds for array of shape [", (long long) n_93018, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t lifted_lambda_res_t_res_131662 = ((int32_t *) xs_mem_139580.mem)[k_129627];
                    
                    lifted_lambda_res_129629 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129630 = k_129627;
                } else {
                    lifted_lambda_res_129629 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129630 = defunc_0_reduce_res_131807;
                }
                ((int32_t *) mem_139599)[i_139370] = lifted_lambda_res_129629;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129630;
            }
            if (!cond_129613) {
                for (int64_t i_129640 = 0; i_129640 < distance_129616; i_129640++) {
                    int64_t gt_arg1_129643 = add64((int64_t) 1, i_129640);
                    bool x_129644 = sle64((int64_t) 0, gt_arg1_129643);
                    bool y_129645 = slt64(gt_arg1_129643, block_sizze_129584);
                    bool bounds_check_129646 = x_129644 && y_129645;
                    bool index_certs_129647;
                    
                    if (!bounds_check_129646) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129643, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129649 = slt64(i_129640, block_sizze_129584);
                    bool index_certs_129650;
                    
                    if (!y_129649) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129640, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t gt_arg1_129648 = ((int32_t *) mem_139599)[gt_arg1_129643];
                    int32_t gt_arg0_129651 = ((int32_t *) mem_139599)[i_129640];
                    bool defunc_0_leq_res_129652 = sle32(gt_arg0_129651, gt_arg1_129648);
                    bool defunc_0_lifted_gt_res_129653 = !defunc_0_leq_res_129652;
                    bool s_129654;
                    int64_t s_129657;
                    bool loop_while_129658;
                    int64_t j_129661;
                    
                    loop_while_129658 = defunc_0_lifted_gt_res_129653;
                    j_129661 = i_129640;
                    while (loop_while_129658) {
                        bool x_129662 = sle64((int64_t) 0, j_129661);
                        bool y_129663 = slt64(j_129661, block_sizze_129584);
                        bool bounds_check_129664 = x_129662 && y_129663;
                        bool index_certs_129665;
                        
                        if (!bounds_check_129664) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129661, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129668 = add64((int64_t) 1, j_129661);
                        bool x_129669 = sle64((int64_t) 0, copy_arg0_129668);
                        bool y_129670 = slt64(copy_arg0_129668, block_sizze_129584);
                        bool bounds_check_129671 = x_129669 && y_129670;
                        bool index_certs_129672;
                        
                        if (!bounds_check_129671) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129668, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t copy_arg0_129666 = ((int32_t *) mem_139599)[j_129661];
                        int64_t copy_arg0_129667 = ((int64_t *) mem_139601)[j_129661];
                        int32_t copy_arg0_129673 = ((int32_t *) mem_139599)[copy_arg0_129668];
                        int64_t copy_arg0_129674 = ((int64_t *) mem_139601)[copy_arg0_129668];
                        
                        ((int32_t *) mem_139599)[j_129661] = copy_arg0_129673;
                        ((int64_t *) mem_139601)[j_129661] = copy_arg0_129674;
                        ((int32_t *) mem_139599)[copy_arg0_129668] = copy_arg0_129666;
                        ((int64_t *) mem_139601)[copy_arg0_129668] = copy_arg0_129667;
                        
                        int64_t tmp_129679 = sub64(j_129661, (int64_t) 1);
                        bool cond_129680 = sle64((int64_t) 0, tmp_129679);
                        bool loop_cond_129681;
                        
                        if (cond_129680) {
                            bool y_131664 = slt64(tmp_129679, block_sizze_129584);
                            bool bounds_check_131665 = cond_129680 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129679, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t gt_arg1_131663 = ((int32_t *) mem_139599)[j_129661];
                            int32_t gt_arg0_131667 = ((int32_t *) mem_139599)[tmp_129679];
                            bool defunc_0_leq_res_131668 = sle32(gt_arg0_131667, gt_arg1_131663);
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129681 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129681 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129681;
                        int64_t j_tmp_140337 = tmp_129679;
                        
                        loop_while_129658 = loop_while_tmp_140334;
                        j_129661 = j_tmp_140337;
                    }
                    s_129654 = loop_while_129658;
                    s_129657 = j_129661;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139586, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint32_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        if (memblock_alloc(ctx, &mem_139658, bytes_139588, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        
        int64_t data_129694;
        bool data_129695;
        int64_t data_129698;
        int64_t loop_dz2084Uz2082U_129699;
        bool loop_while_129700;
        int64_t stride_129703;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129699 = flat_dim_129585;
        loop_while_129700 = loop_cond_129691;
        stride_129703 = block_sizze_129584;
        while (loop_while_129700) {
            int64_t next_stride_129704 = mul64((int64_t) 2, stride_129703);
            bool zzero_129705 = next_stride_129704 == (int64_t) 0;
            bool nonzzero_129706 = !zzero_129705;
            bool nonzzero_cert_129707;
            
            if (!nonzzero_129706) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:137:35-39\n   #5  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129708 = sdiv64(flat_dim_129585, next_stride_129704);
            bool bounds_invalid_upwards_129709 = slt64(num_merges_129708, (int64_t) 0);
            bool valid_129710 = !bounds_invalid_upwards_129709;
            bool range_valid_c_129711;
            
            if (!valid_129710) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129708, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:137:35-39\n   #6  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129713 = sub64(next_stride_129704, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129714 = sle64((int64_t) 0, m_129713);
            bool cond_129716 = slt64(next_stride_129704, (int64_t) 10);
            bool protect_assert_disj_129717 = nonzzero_129693 || cond_129716;
            bool nonzzero_cert_129718;
            
            if (!protect_assert_disj_129717) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129719 = smod_safe64(next_stride_129704, merge_block_sizze_129589);
            bool num_blocks_129720 = zeze_lhs_129719 == (int64_t) 0;
            bool protect_assert_disj_129721 = cond_129716 || num_blocks_129720;
            bool assert_c_129722;
            
            if (!protect_assert_disj_129721) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129724 = sdiv_safe64(next_stride_129704, merge_block_sizze_129589);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725 = add64((int64_t) 1, num_blocks_129724);
            int64_t j_m_i_129726 = sub64(next_stride_129704, stride_129703);
            int64_t flat_dim_129727 = merge_block_sizze_129589 * num_blocks_129724;
            bool bounds_invalid_upwards_129728 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, (int64_t) 0);
            bool empty_slice_129729 = j_m_i_129726 == (int64_t) 0;
            int64_t m_129730 = sub64(j_m_i_129726, (int64_t) 1);
            bool zzero_lte_i_129731 = sle64((int64_t) 0, stride_129703);
            bool i_lte_j_129732 = sle64(stride_129703, next_stride_129704);
            bool empty_slice_129733 = stride_129703 == (int64_t) 0;
            int64_t m_129734 = sub64(stride_129703, (int64_t) 1);
            bool bounds_invalid_upwards_129735 = slt64(num_blocks_129724, (int64_t) 0);
            bool cond_129736 = slt64((int64_t) 0, stride_129703);
            bool valid_129737 = !bounds_invalid_upwards_129728;
            int64_t i_p_m_t_s_129738 = add64(stride_129703, m_129730);
            bool zzero_leq_i_p_m_t_s_129739 = sle64((int64_t) 0, m_129734);
            bool i_p_m_t_s_leq_w_129740 = slt64(m_129734, next_stride_129704);
            bool valid_129741 = !bounds_invalid_upwards_129735;
            bool i_p_m_t_s_leq_w_129742 = slt64(m_129713, flat_dim_129727);
            bool y_129743 = slt64((int64_t) 0, j_m_i_129726);
            bool protect_assert_disj_129744 = cond_129716 || valid_129737;
            bool range_valid_c_129745;
            
            if (!protect_assert_disj_129744) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:137:35-39\n   #10 ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129746 = sle64((int64_t) 0, i_p_m_t_s_129738);
            bool i_p_m_t_s_leq_w_129747 = slt64(i_p_m_t_s_129738, next_stride_129704);
            bool y_129748 = zzero_leq_i_p_m_t_s_129739 && i_p_m_t_s_leq_w_129740;
            bool protect_assert_disj_129749 = cond_129716 || valid_129741;
            bool range_valid_c_129750;
            
            if (!protect_assert_disj_129749) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129724, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129751 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129742;
            bool y_129752 = zzero_lte_i_129731 && i_p_m_t_s_leq_w_129747;
            bool forwards_ok_129753 = zzero_lte_i_129731 && y_129748;
            bool ok_or_empty_129754 = zzero_129705 || y_129751;
            bool protect_assert_disj_129755 = cond_129736 || y_129743;
            bool y_129756 = zzero_leq_i_p_m_t_s_129746 && y_129752;
            bool ok_or_empty_129757 = empty_slice_129733 || forwards_ok_129753;
            bool protect_assert_disj_129758 = cond_129716 || ok_or_empty_129754;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) flat_dim_129727, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129760 = !cond_129716;
            bool protect_assert_disj_129761 = protect_assert_disj_129755 || loop_not_taken_129760;
            bool index_certs_129762;
            
            if (!protect_assert_disj_129761) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:137:35-39\n   #10 ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129763 = i_lte_j_129732 && y_129756;
            bool protect_assert_disj_129764 = cond_129716 || ok_or_empty_129757;
            bool index_certs_129765;
            
            if (!protect_assert_disj_129764) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:137:35-39\n   #11 ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129766 = ok_or_empty_129757 || loop_not_taken_129760;
            bool index_certs_129767;
            
            if (!protect_assert_disj_129766) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129768 = empty_slice_129729 || forwards_ok_129763;
            bool protect_assert_disj_129769 = cond_129716 || ok_or_empty_129768;
            bool index_certs_129770;
            
            if (!protect_assert_disj_129769) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:137:35-39\n   #11 ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129771 = loop_not_taken_129760 || ok_or_empty_129768;
            bool index_certs_129772;
            
            if (!protect_assert_disj_129771) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 4 * num_merges_129708;
            int64_t bytes_139667 = next_stride_129704 * binop_x_139666;
            int64_t binop_x_139669 = (int64_t) 8 * num_merges_129708;
            int64_t bytes_139670 = next_stride_129704 * binop_x_139669;
            bool i_lte_j_129715 = sle64((int64_t) 0, next_stride_129704);
            
            if (mem_139668_cached_sizze_140763 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140763, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140764 < bytes_139670) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140764, bytes_139670);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725;
            int64_t binop_x_139696 = (int64_t) 4 * num_blocks_129724;
            int64_t bytes_139697 = merge_block_sizze_129589 * binop_x_139696;
            int64_t binop_x_139699 = (int64_t) 8 * num_blocks_129724;
            int64_t bytes_139700 = merge_block_sizze_129589 * binop_x_139699;
            int64_t bytes_139742 = (int64_t) 8 * stride_129703;
            int64_t bytes_139744 = (int64_t) 16 * stride_129703;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129708; i_139398++) {
                int64_t start_129776 = mul64(next_stride_129704, i_139398);
                int64_t j_m_i_129777 = sub64(loop_dz2084Uz2082U_129699, start_129776);
                bool empty_slice_129778 = j_m_i_129777 == (int64_t) 0;
                int64_t m_129779 = sub64(j_m_i_129777, (int64_t) 1);
                int64_t i_p_m_t_s_129780 = add64(start_129776, m_129779);
                bool zzero_leq_i_p_m_t_s_129781 = sle64((int64_t) 0, i_p_m_t_s_129780);
                bool i_p_m_t_s_leq_w_129782 = slt64(i_p_m_t_s_129780, loop_dz2084Uz2082U_129699);
                bool zzero_lte_i_129783 = sle64((int64_t) 0, start_129776);
                bool i_lte_j_129784 = sle64(start_129776, loop_dz2084Uz2082U_129699);
                bool y_129785 = i_p_m_t_s_leq_w_129782 && zzero_lte_i_129783;
                bool y_129786 = zzero_leq_i_p_m_t_s_129781 && y_129785;
                bool forwards_ok_129787 = i_lte_j_129784 && y_129786;
                bool ok_or_empty_129788 = empty_slice_129778 || forwards_ok_129787;
                bool index_certs_129789;
                
                if (!ok_or_empty_129788) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129776, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129699, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129790 = slt64(m_129713, j_m_i_129777);
                bool y_129791 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129790;
                bool forwards_ok_129792 = i_lte_j_129715 && y_129791;
                bool ok_or_empty_129793 = zzero_129705 || forwards_ok_129792;
                bool index_certs_129794;
                
                if (!ok_or_empty_129793) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) j_m_i_129777, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:137:35-39\n   #8  ftRelational.fut:136:9-137:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129716) {
                    int32_t dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129736) {
                        int32_t head_res_131697 = ((int32_t *) mem_param_139662.mem)[start_129776];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129776];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129703 + start_129776;
                        int32_t head_res_131700 = ((int32_t *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129704; nest_i_140347++) {
                        ((int32_t *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139744, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129704; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129704; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129726;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129703);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129726);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129703 + j_131711;
                                int64_t slice_131721 = start_129776 + slice_131720;
                                int32_t leq_arg1_131722 = ((int32_t *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129776 + i_131708;
                                int32_t leq_arg0_131727 = ((int32_t *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = sle32(leq_arg0_131727, leq_arg1_131722);
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        int32_t loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129703);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129776 + i_131708;
                            int32_t tmp_131738 = ((int32_t *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129726);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:137:35-39\n   #9  ftRelational.fut:136:9-137:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129703 + j_131711;
                            int64_t slice_131745 = start_129776 + slice_131744;
                            int32_t tmp_131746 = ((int32_t *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((int32_t *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140765 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140765, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140766 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140766, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725; i_139384++) {
                        int64_t split_count_arg3_129856 = mul64(merge_block_sizze_129589, i_139384);
                        int64_t defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129857, &defunc_0_split_count_res_129858, &defunc_0_split_count_res_129859, &defunc_0_split_count_res_129860, &defunc_0_split_count_res_129861, (int64_t) 0, stride_129703, (int64_t) 0, j_m_i_129726, split_count_arg3_129856) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129862 = slt64((int64_t) 0, defunc_0_split_count_res_129861);
                        bool defunc_0_split_count_res_129863;
                        int64_t defunc_0_split_count_res_129864;
                        int64_t defunc_0_split_count_res_129865;
                        int64_t defunc_0_split_count_res_129866;
                        int64_t defunc_0_split_count_res_129867;
                        int64_t defunc_0_split_count_res_129868;
                        bool loop_while_129869;
                        int64_t ss_129870;
                        int64_t ss_129871;
                        int64_t tt_129872;
                        int64_t tt_129873;
                        int64_t count_129874;
                        
                        loop_while_129869 = loop_cond_129862;
                        ss_129870 = defunc_0_split_count_res_129857;
                        ss_129871 = defunc_0_split_count_res_129858;
                        tt_129872 = defunc_0_split_count_res_129859;
                        tt_129873 = defunc_0_split_count_res_129860;
                        count_129874 = defunc_0_split_count_res_129861;
                        while (loop_while_129869) {
                            int64_t zlze_lhs_129875 = sub64(ss_129871, ss_129870);
                            bool cond_129876 = sle64(zlze_lhs_129875, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129877;
                            int64_t defunc_0_lifted_step_res_129878;
                            int64_t defunc_0_lifted_step_res_129879;
                            int64_t defunc_0_lifted_step_res_129880;
                            
                            if (cond_129876) {
                                int64_t tmp_131750 = add64(tt_129872, count_129874);
                                
                                defunc_0_lifted_step_res_129877 = ss_129870;
                                defunc_0_lifted_step_res_129878 = tmp_131750;
                                defunc_0_lifted_step_res_129879 = tt_129873;
                                defunc_0_lifted_step_res_129880 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129882 = sub64(tt_129873, tt_129872);
                                bool cond_129883 = sle64(zlze_lhs_129882, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129884;
                                int64_t defunc_0_lifted_step_res_f_res_129885;
                                int64_t defunc_0_lifted_step_res_f_res_129886;
                                int64_t defunc_0_lifted_step_res_f_res_129887;
                                
                                if (cond_129883) {
                                    int64_t tmp_131751 = add64(ss_129870, count_129874);
                                    
                                    defunc_0_lifted_step_res_f_res_129884 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129885 = tt_129872;
                                    defunc_0_lifted_step_res_f_res_129886 = tt_129873;
                                    defunc_0_lifted_step_res_f_res_129887 = (int64_t) 0;
                                } else {
                                    bool cond_129889 = count_129874 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129890;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129891;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129892;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129893;
                                    
                                    if (cond_129889) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129870);
                                        bool y_131754 = slt64(ss_129870, stride_129703);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129870, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:137:35-39\n   #13 ftRelational.fut:136:9-137:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129872);
                                        bool y_131760 = slt64(tt_129872, j_m_i_129726);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129872, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:137:35-39\n   #13 ftRelational.fut:136:9-137:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129776 + ss_129870;
                                        int32_t leq_arg1_131758 = ((int32_t *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129703 + tt_129872;
                                        int64_t slice_131764 = start_129776 + slice_131763;
                                        int32_t leq_arg0_131765 = ((int32_t *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = sle32(leq_arg0_131765, leq_arg1_131758);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129872);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129870;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129870);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129872;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = tt_129873;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = (int64_t) 0;
                                    } else {
                                        int64_t m_129912 = sdiv64(count_129874, (int64_t) 2);
                                        int64_t n_129913 = sub64(count_129874, m_129912);
                                        bool cond_129914 = n_129913 == (int64_t) 0;
                                        int64_t zgze_lhs_129915 = add64(ss_129870, m_129912);
                                        bool cond_f_res_129916 = sle64(ss_129871, zgze_lhs_129915);
                                        bool x_129917 = !cond_129914;
                                        bool y_129918 = cond_f_res_129916 && x_129917;
                                        bool cond_129919 = cond_129914 || y_129918;
                                        bool leq_y_x_129920;
                                        
                                        if (cond_129919) {
                                            leq_y_x_129920 = 1;
                                        } else {
                                            bool x_129921 = sle64((int64_t) 0, zgze_lhs_129915);
                                            bool y_129922 = slt64(zgze_lhs_129915, stride_129703);
                                            bool bounds_check_129923 = x_129921 && y_129922;
                                            bool index_certs_129924;
                                            
                                            if (!bounds_check_129923) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129915, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:137:35-39\n   #13 ftRelational.fut:136:9-137:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129927 = add64(tt_129872, n_129913);
                                            int64_t leq_arg0_129928 = sub64(zm_lhs_129927, (int64_t) 1);
                                            bool x_129929 = sle64((int64_t) 0, leq_arg0_129928);
                                            bool y_129930 = slt64(leq_arg0_129928, j_m_i_129726);
                                            bool bounds_check_129931 = x_129929 && y_129930;
                                            bool index_certs_129932;
                                            
                                            if (!bounds_check_129931) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129928, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:137:35-39\n   #13 ftRelational.fut:136:9-137:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129925 = start_129776 + zgze_lhs_129915;
                                            int32_t leq_arg1_129926 = ((int32_t *) mem_param_139662.mem)[slice_129925];
                                            int64_t slice_129933 = stride_129703 + leq_arg0_129928;
                                            int64_t slice_129934 = start_129776 + slice_129933;
                                            int32_t leq_arg0_129935 = ((int32_t *) mem_param_139662.mem)[slice_129934];
                                            bool defunc_0_leq_res_129936 = sle32(leq_arg0_129935, leq_arg1_129926);
                                            
                                            leq_y_x_129920 = defunc_0_leq_res_129936;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                        
                                        if (leq_y_x_129920) {
                                            int64_t tmp_131771 = add64(tt_129872, n_129913);
                                            int64_t tmp_131772 = sub64(count_129874, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tt_129873;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = tmp_131772;
                                        } else {
                                            int64_t tmp_129942 = add64(tt_129872, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tt_129872;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tmp_129942;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = count_129874;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = ss_129870;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                    }
                                    defunc_0_lifted_step_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_129890;
                                    defunc_0_lifted_step_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_129891;
                                    defunc_0_lifted_step_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_129892;
                                    defunc_0_lifted_step_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_129893;
                                }
                                defunc_0_lifted_step_res_129877 = defunc_0_lifted_step_res_f_res_129884;
                                defunc_0_lifted_step_res_129878 = defunc_0_lifted_step_res_f_res_129885;
                                defunc_0_lifted_step_res_129879 = defunc_0_lifted_step_res_f_res_129886;
                                defunc_0_lifted_step_res_129880 = defunc_0_lifted_step_res_f_res_129887;
                            }
                            
                            int64_t loopres_129943;
                            int64_t loopres_129944;
                            int64_t loopres_129945;
                            int64_t loopres_129946;
                            int64_t loopres_129947;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129943, &loopres_129944, &loopres_129945, &loopres_129946, &loopres_129947, defunc_0_lifted_step_res_129877, ss_129871, defunc_0_lifted_step_res_129878, defunc_0_lifted_step_res_129879, defunc_0_lifted_step_res_129880) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129948 = slt64((int64_t) 0, loopres_129947);
                            bool loop_while_tmp_140354 = loop_cond_129948;
                            int64_t ss_tmp_140355 = loopres_129943;
                            int64_t ss_tmp_140356 = loopres_129944;
                            int64_t tt_tmp_140357 = loopres_129945;
                            int64_t tt_tmp_140358 = loopres_129946;
                            int64_t count_tmp_140359 = loopres_129947;
                            
                            loop_while_129869 = loop_while_tmp_140354;
                            ss_129870 = ss_tmp_140355;
                            ss_129871 = ss_tmp_140356;
                            tt_129872 = tt_tmp_140357;
                            tt_129873 = tt_tmp_140358;
                            count_129874 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129863 = loop_while_129869;
                        defunc_0_split_count_res_129864 = ss_129870;
                        defunc_0_split_count_res_129865 = ss_129871;
                        defunc_0_split_count_res_129866 = tt_129872;
                        defunc_0_split_count_res_129867 = tt_129873;
                        defunc_0_split_count_res_129868 = count_129874;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129864;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129866;
                    }
                    if (mem_139698_cached_sizze_140767 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140767, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140768 < bytes_139700) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140768, bytes_139700);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129724; i_139391++) {
                        bool y_129954 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool index_certs_129956;
                        
                        if (!y_129954) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:137:35-39\n   #10 ftRelational.fut:136:9-137:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129957 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129959 = add64((int64_t) 1, i_139391);
                        bool x_129960 = sle64((int64_t) 0, tmp_129959);
                        bool y_129961 = slt64(tmp_129959, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool bounds_check_129962 = x_129960 && y_129961;
                        bool index_certs_129963;
                        
                        if (!bounds_check_129962) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129959, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:137:35-39\n   #10 ftRelational.fut:136:9-137:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129964 = ((int64_t *) mem_139681)[tmp_129959];
                        int64_t defunc_0_f_res_129965 = ((int64_t *) mem_139683)[tmp_129959];
                        int64_t merge_sequential_arg2_129966 = add64(stride_129703, defunc_0_f_res_129958);
                        int64_t merge_sequential_arg2_129967 = add64(stride_129703, defunc_0_f_res_129965);
                        int64_t j_m_i_129968 = sub64(merge_sequential_arg2_129967, merge_sequential_arg2_129966);
                        bool empty_slice_129969 = j_m_i_129968 == (int64_t) 0;
                        int64_t m_129970 = sub64(j_m_i_129968, (int64_t) 1);
                        int64_t i_p_m_t_s_129971 = add64(merge_sequential_arg2_129966, m_129970);
                        bool zzero_leq_i_p_m_t_s_129972 = sle64((int64_t) 0, i_p_m_t_s_129971);
                        bool i_p_m_t_s_leq_w_129973 = slt64(i_p_m_t_s_129971, next_stride_129704);
                        bool zzero_lte_i_129974 = sle64((int64_t) 0, merge_sequential_arg2_129966);
                        bool i_lte_j_129975 = sle64(merge_sequential_arg2_129966, merge_sequential_arg2_129967);
                        bool y_129976 = i_p_m_t_s_leq_w_129973 && zzero_lte_i_129974;
                        bool y_129977 = zzero_leq_i_p_m_t_s_129972 && y_129976;
                        bool forwards_ok_129978 = i_lte_j_129975 && y_129977;
                        bool ok_or_empty_129979 = empty_slice_129969 || forwards_ok_129978;
                        bool index_certs_129980;
                        
                        if (!ok_or_empty_129979) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129966, ":", (long long) merge_sequential_arg2_129967, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:137:35-39\n   #10 ftRelational.fut:136:9-137:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129981 = sub64(defunc_0_f_res_129964, defunc_0_f_res_129957);
                        bool empty_slice_129982 = j_m_i_129981 == (int64_t) 0;
                        int64_t m_129983 = sub64(j_m_i_129981, (int64_t) 1);
                        int64_t i_p_m_t_s_129984 = add64(defunc_0_f_res_129957, m_129983);
                        bool zzero_leq_i_p_m_t_s_129985 = sle64((int64_t) 0, i_p_m_t_s_129984);
                        bool i_p_m_t_s_leq_w_129986 = slt64(i_p_m_t_s_129984, next_stride_129704);
                        bool zzero_lte_i_129987 = sle64((int64_t) 0, defunc_0_f_res_129957);
                        bool i_lte_j_129988 = sle64(defunc_0_f_res_129957, defunc_0_f_res_129964);
                        bool y_129989 = i_p_m_t_s_leq_w_129986 && zzero_lte_i_129987;
                        bool y_129990 = zzero_leq_i_p_m_t_s_129985 && y_129989;
                        bool forwards_ok_129991 = i_lte_j_129988 && y_129990;
                        bool ok_or_empty_129992 = empty_slice_129982 || forwards_ok_129991;
                        bool index_certs_129993;
                        
                        if (!ok_or_empty_129992) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129957, ":", (long long) defunc_0_f_res_129964, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:137:35-39\n   #10 ftRelational.fut:136:9-137:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129994 = slt64((int64_t) 0, j_m_i_129981);
                        int32_t dummy_129995;
                        int64_t dummy_129996;
                        
                        if (cond_129994) {
                            bool index_certs_131773;
                            
                            if (!cond_129994) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:137:35-39\n   #12 ftRelational.fut:136:9-137:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129776 + defunc_0_f_res_129957;
                            int32_t head_res_131775 = ((int32_t *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129995 = head_res_131775;
                            dummy_129996 = head_res_131776;
                        } else {
                            bool y_130001 = slt64((int64_t) 0, j_m_i_129968);
                            bool index_certs_130002;
                            
                            if (!y_130001) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:137:35-39\n   #12 ftRelational.fut:136:9-137:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_130003 = start_129776 + merge_sequential_arg2_129966;
                            int32_t head_res_130004 = ((int32_t *) mem_param_139662.mem)[slice_130003];
                            int64_t head_res_130005 = ((int64_t *) mem_param_139665.mem)[slice_130003];
                            
                            dummy_129995 = head_res_130004;
                            dummy_129996 = head_res_130005;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129589; nest_i_140362++) {
                            ((int32_t *) mem_139698)[i_139391 * merge_block_sizze_129589 + nest_i_140362] = dummy_129995;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129589; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + nest_i_140363] = dummy_129996;
                        }
                        
                        int64_t data_130008;
                        int64_t i_130012 = (int64_t) 0;
                        
                        for (int64_t k_130011 = 0; k_130011 < merge_block_sizze_129589; k_130011++) {
                            int64_t j_130015 = sub64(k_130011, i_130012);
                            bool cond_130016 = j_130015 == j_m_i_129968;
                            bool cond_130017;
                            
                            if (cond_130016) {
                                cond_130017 = 1;
                            } else {
                                bool cond_130018 = slt64(i_130012, j_m_i_129981);
                                bool cond_f_res_130019;
                                
                                if (cond_130018) {
                                    bool x_131777 = sle64((int64_t) 0, j_130015);
                                    bool y_131778 = slt64(j_130015, j_m_i_129968);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:137:35-39\n   #11 ftRelational.fut:136:9-137:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130012);
                                    bool bounds_check_131785 = cond_130018 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:137:35-39\n   #11 ftRelational.fut:136:9-137:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129966 + j_130015;
                                    int64_t slice_131782 = start_129776 + slice_131781;
                                    int32_t leq_arg1_131783 = ((int32_t *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129957 + i_130012;
                                    int64_t slice_131788 = start_129776 + slice_131787;
                                    int32_t leq_arg0_131789 = ((int32_t *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = sle32(leq_arg0_131789, leq_arg1_131783);
                                    
                                    cond_f_res_130019 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130019 = 0;
                                }
                                cond_130017 = cond_f_res_130019;
                            }
                            
                            int64_t loopres_130034;
                            int32_t loopres_130035;
                            int64_t loopres_130036;
                            
                            if (cond_130017) {
                                bool x_131792 = sle64((int64_t) 0, i_130012);
                                bool y_131793 = slt64(i_130012, j_m_i_129981);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:137:35-39\n   #11 ftRelational.fut:136:9-137:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130012);
                                int64_t slice_131796 = defunc_0_f_res_129957 + i_130012;
                                int64_t slice_131797 = start_129776 + slice_131796;
                                int32_t tmp_131798 = ((int32_t *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130034 = tmp_131791;
                                loopres_130035 = tmp_131798;
                                loopres_130036 = tmp_131799;
                            } else {
                                bool x_130046 = sle64((int64_t) 0, j_130015);
                                bool y_130047 = slt64(j_130015, j_m_i_129968);
                                bool bounds_check_130048 = x_130046 && y_130047;
                                bool index_certs_130049;
                                
                                if (!bounds_check_130048) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:137:35-39\n   #11 ftRelational.fut:136:9-137:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130050 = merge_sequential_arg2_129966 + j_130015;
                                int64_t slice_130051 = start_129776 + slice_130050;
                                int32_t tmp_130052 = ((int32_t *) mem_param_139662.mem)[slice_130051];
                                int64_t tmp_130053 = ((int64_t *) mem_param_139665.mem)[slice_130051];
                                
                                loopres_130034 = i_130012;
                                loopres_130035 = tmp_130052;
                                loopres_130036 = tmp_130053;
                            }
                            ((int32_t *) mem_139698)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130035;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130036;
                            
                            int64_t i_tmp_140364 = loopres_130034;
                            
                            i_130012 = i_tmp_140364;
                        }
                        data_130008 = i_130012;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint32_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139700, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_139668, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130060 = next_stride_129704 * num_merges_129708;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint32_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            if (memblock_alloc(ctx, &mem_139778, bytes_139670, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            
            bool loop_cond_130063 = slt64(next_stride_129704, flat_dim_129585);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130060;
            bool loop_while_tmp_140341 = loop_cond_130063;
            int64_t stride_tmp_140344 = next_stride_129704;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129699 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129700 = loop_while_tmp_140341;
            stride_129703 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129694 = loop_dz2084Uz2082U_129699;
        data_129695 = loop_while_129700;
        data_129698 = stride_129703;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130064 = n_93018 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130065 = sle64((int64_t) 0, zs_lhs_129569);
        bool i_p_m_t_s_leq_w_130066 = slt64(zs_lhs_129569, data_129694);
        bool y_130067 = zzero_leq_i_p_m_t_s_130065 && i_p_m_t_s_leq_w_130066;
        bool ok_or_empty_130068 = empty_slice_130064 || y_130067;
        bool index_certs_130069;
        
        if (!ok_or_empty_130068) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_93018, "] out of bounds for array of shape [", (long long) data_129694, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:137:35-39\n   #6  ftRelational.fut:136:9-137:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_93018; i_139405++) {
        int64_t eta_p_130077 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130078 = sle64((int64_t) 0, eta_p_130077);
        bool y_130079 = slt64(eta_p_130077, n_93018);
        bool bounds_check_130080 = x_130078 && y_130079;
        bool index_certs_130081;
        
        if (!bounds_check_130080) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130077, "] out of bounds for array of shape [", (long long) n_93018, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:137:35-39\n   #5  ftRelational.fut:136:9-137:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130082 = ((int64_t *) ext_mem_139581.mem)[eta_p_130077];
        int32_t lifted_lambda_res_130083 = ((int32_t *) xs_mem_139580.mem)[eta_p_130077];
        
        ((int64_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130082;
        ((int32_t *) mem_139792.mem)[i_139405] = lifted_lambda_res_130083;
    }
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140757, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140758, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_140769, struct memblock *mem_out_p_140770, struct memblock xs_mem_139580, int64_t n_95159, int64_t incr_95160)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140771 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140772 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140773 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140774 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140775 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140776 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140777 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140778 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140779 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140780 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_95159;
    bool cond_129568 = sle64(n_95159, (int64_t) 1);
    int64_t zs_lhs_129569 = sub64(n_95159, (int64_t) 1);
    int64_t zp_rhs_129570 = sdiv_safe64(zs_lhs_129569, (int64_t) 20);
    int64_t min_num_blocks_129571 = add64((int64_t) 1, zp_rhs_129570);
    bool loop_cond_129572 = slt64((int64_t) 1, min_num_blocks_129571);
    bool smallest_pow_2_geq_than_res_129573;
    int64_t smallest_pow_2_geq_than_res_129574;
    bool loop_while_129575;
    int64_t x_129576;
    
    loop_while_129575 = loop_cond_129572;
    x_129576 = (int64_t) 1;
    while (loop_while_129575) {
        int64_t loopres_129577 = mul64((int64_t) 2, x_129576);
        bool loop_cond_129578 = slt64(loopres_129577, min_num_blocks_129571);
        bool loop_while_tmp_140322 = loop_cond_129578;
        int64_t x_tmp_140323 = loopres_129577;
        
        loop_while_129575 = loop_while_tmp_140322;
        x_129576 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129573 = loop_while_129575;
    smallest_pow_2_geq_than_res_129574 = x_129576;
    
    bool zzero_129579 = smallest_pow_2_geq_than_res_129574 == (int64_t) 0;
    bool nonzzero_129580 = !zzero_129579;
    bool protect_assert_disj_129581 = cond_129568 || nonzzero_129580;
    bool nonzzero_cert_129582;
    
    if (!protect_assert_disj_129581) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:139:35-39\n   #5  ftRelational.fut:138:9-139:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129583 = sdiv_safe64(zs_lhs_129569, smallest_pow_2_geq_than_res_129574);
    int64_t block_sizze_129584 = add64((int64_t) 1, zp_rhs_129583);
    bool y_129590 = slt64((int64_t) 0, n_95159);
    bool protect_assert_disj_140188 = cond_129568 || y_129590;
    bool index_certs_129591;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_95159, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:139:35-39\n   #5  ftRelational.fut:138:9-139:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129605 = slt64(smallest_pow_2_geq_than_res_129574, (int64_t) 0);
    bool valid_129606 = !bounds_invalid_upwards_129605;
    bool protect_assert_disj_140196 = cond_129568 || valid_129606;
    bool range_valid_c_129607;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129574, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:139:35-39\n   #6  ftRelational.fut:138:9-139:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129609 = slt64(block_sizze_129584, (int64_t) 0);
    bool valid_129610 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_140198 = cond_129568 || valid_129610;
    bool range_valid_c_129611;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129584, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129613 = sle64(block_sizze_129584, (int64_t) 1);
    int64_t tmp_129614 = sub64(block_sizze_129584, (int64_t) 2);
    bool bounds_invalid_upwards_129615 = slt64(tmp_129614, (int64_t) 0);
    bool valid_129617 = !bounds_invalid_upwards_129615;
    bool protect_assert_disj_129618 = cond_129613 || valid_129617;
    bool protect_assert_disj_140200 = cond_129568 || protect_assert_disj_129618;
    bool range_valid_c_129619;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129614, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (futrts_indicesWithIncrement_11406(ctx, &ext_mem_139581, xs_mem_139580, n_95159, incr_95160) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_95159; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129585 = smallest_pow_2_geq_than_res_129574 * block_sizze_129584;
    bool x_140183 = !cond_129568;
    int64_t greatest_divisor_leq_than_arg1_129588 = mul64((int64_t) 2, block_sizze_129584);
    int64_t merge_block_sizze_129589;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129588) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129589 = x_140185;
    } else {
        merge_block_sizze_129589 = (int64_t) 0;
    }
    
    int64_t reduce_arg1_129592;
    
    if (x_140183) {
        int64_t x_140189 = ((int64_t *) xs_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129592 = x_140189;
    } else {
        reduce_arg1_129592 = (int64_t) 0;
    }
    
    int64_t defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        int64_t x_140191;
        int64_t x_140192;
        int64_t redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129592;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_95159; i_139365++) {
            int64_t x_129596 = ((int64_t *) xs_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129602 = sle64(redout_139363, x_129596);
            int64_t defunc_0_op_res_129603;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129603 = x_129596;
            } else {
                defunc_0_op_res_129603 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129604;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129604 = i_139365;
            } else {
                defunc_0_op_res_129604 = redout_139364;
            }
            
            int64_t redout_tmp_140326 = defunc_0_op_res_129603;
            int64_t redout_tmp_140327 = defunc_0_op_res_129604;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = (int64_t) 0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129616 = add64((int64_t) 1, tmp_129614);
    int64_t binop_x_139584 = (int64_t) 8 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139585 = block_sizze_129584 * binop_x_139584;
    int64_t bytes_139598 = (int64_t) 8 * block_sizze_129584;
    bool loop_cond_129691 = slt64(block_sizze_129584, flat_dim_129585);
    bool zzero_129692 = merge_block_sizze_129589 == (int64_t) 0;
    bool nonzzero_129693 = !zzero_129692;
    
    if (cond_129568) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140771 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140771, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140772 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140772, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140773 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140773, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140774 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140774, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129574; i_139377++) {
            int64_t zp_lhs_129623 = mul64(block_sizze_129584, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129584; i_139370++) {
                int64_t k_129627 = add64(zp_lhs_129623, i_139370);
                bool cond_129628 = slt64(k_129627, n_95159);
                int64_t lifted_lambda_res_129629;
                int64_t lifted_lambda_res_129630;
                
                if (cond_129628) {
                    bool x_131659 = sle64((int64_t) 0, k_129627);
                    bool bounds_check_131660 = cond_129628 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129627, "] out of bounds for array of shape [", (long long) n_95159, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t lifted_lambda_res_t_res_131662 = ((int64_t *) xs_mem_139580.mem)[k_129627];
                    
                    lifted_lambda_res_129629 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129630 = k_129627;
                } else {
                    lifted_lambda_res_129629 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129630 = defunc_0_reduce_res_131807;
                }
                ((int64_t *) mem_139599)[i_139370] = lifted_lambda_res_129629;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129630;
            }
            if (!cond_129613) {
                for (int64_t i_129640 = 0; i_129640 < distance_129616; i_129640++) {
                    int64_t gt_arg1_129643 = add64((int64_t) 1, i_129640);
                    bool x_129644 = sle64((int64_t) 0, gt_arg1_129643);
                    bool y_129645 = slt64(gt_arg1_129643, block_sizze_129584);
                    bool bounds_check_129646 = x_129644 && y_129645;
                    bool index_certs_129647;
                    
                    if (!bounds_check_129646) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129643, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129649 = slt64(i_129640, block_sizze_129584);
                    bool index_certs_129650;
                    
                    if (!y_129649) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129640, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t gt_arg1_129648 = ((int64_t *) mem_139599)[gt_arg1_129643];
                    int64_t gt_arg0_129651 = ((int64_t *) mem_139599)[i_129640];
                    bool defunc_0_leq_res_129652 = sle64(gt_arg0_129651, gt_arg1_129648);
                    bool defunc_0_lifted_gt_res_129653 = !defunc_0_leq_res_129652;
                    bool s_129654;
                    int64_t s_129657;
                    bool loop_while_129658;
                    int64_t j_129661;
                    
                    loop_while_129658 = defunc_0_lifted_gt_res_129653;
                    j_129661 = i_129640;
                    while (loop_while_129658) {
                        bool x_129662 = sle64((int64_t) 0, j_129661);
                        bool y_129663 = slt64(j_129661, block_sizze_129584);
                        bool bounds_check_129664 = x_129662 && y_129663;
                        bool index_certs_129665;
                        
                        if (!bounds_check_129664) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129661, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129668 = add64((int64_t) 1, j_129661);
                        bool x_129669 = sle64((int64_t) 0, copy_arg0_129668);
                        bool y_129670 = slt64(copy_arg0_129668, block_sizze_129584);
                        bool bounds_check_129671 = x_129669 && y_129670;
                        bool index_certs_129672;
                        
                        if (!bounds_check_129671) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129668, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129666 = ((int64_t *) mem_139599)[j_129661];
                        int64_t copy_arg0_129667 = ((int64_t *) mem_139601)[j_129661];
                        int64_t copy_arg0_129673 = ((int64_t *) mem_139599)[copy_arg0_129668];
                        int64_t copy_arg0_129674 = ((int64_t *) mem_139601)[copy_arg0_129668];
                        
                        ((int64_t *) mem_139599)[j_129661] = copy_arg0_129673;
                        ((int64_t *) mem_139601)[j_129661] = copy_arg0_129674;
                        ((int64_t *) mem_139599)[copy_arg0_129668] = copy_arg0_129666;
                        ((int64_t *) mem_139601)[copy_arg0_129668] = copy_arg0_129667;
                        
                        int64_t tmp_129679 = sub64(j_129661, (int64_t) 1);
                        bool cond_129680 = sle64((int64_t) 0, tmp_129679);
                        bool loop_cond_129681;
                        
                        if (cond_129680) {
                            bool y_131664 = slt64(tmp_129679, block_sizze_129584);
                            bool bounds_check_131665 = cond_129680 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129679, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t gt_arg1_131663 = ((int64_t *) mem_139599)[j_129661];
                            int64_t gt_arg0_131667 = ((int64_t *) mem_139599)[tmp_129679];
                            bool defunc_0_leq_res_131668 = sle64(gt_arg0_131667, gt_arg1_131663);
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129681 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129681 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129681;
                        int64_t j_tmp_140337 = tmp_129679;
                        
                        loop_while_129658 = loop_while_tmp_140334;
                        j_129661 = j_tmp_140337;
                    }
                    s_129654 = loop_while_129658;
                    s_129657 = j_129661;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139586, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        if (memblock_alloc(ctx, &mem_139658, bytes_139585, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        
        int64_t data_129694;
        bool data_129695;
        int64_t data_129698;
        int64_t loop_dz2084Uz2082U_129699;
        bool loop_while_129700;
        int64_t stride_129703;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129699 = flat_dim_129585;
        loop_while_129700 = loop_cond_129691;
        stride_129703 = block_sizze_129584;
        while (loop_while_129700) {
            int64_t next_stride_129704 = mul64((int64_t) 2, stride_129703);
            bool zzero_129705 = next_stride_129704 == (int64_t) 0;
            bool nonzzero_129706 = !zzero_129705;
            bool nonzzero_cert_129707;
            
            if (!nonzzero_129706) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:139:35-39\n   #5  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129708 = sdiv64(flat_dim_129585, next_stride_129704);
            bool bounds_invalid_upwards_129709 = slt64(num_merges_129708, (int64_t) 0);
            bool valid_129710 = !bounds_invalid_upwards_129709;
            bool range_valid_c_129711;
            
            if (!valid_129710) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129708, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:139:35-39\n   #6  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129713 = sub64(next_stride_129704, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129714 = sle64((int64_t) 0, m_129713);
            bool cond_129716 = slt64(next_stride_129704, (int64_t) 10);
            bool protect_assert_disj_129717 = nonzzero_129693 || cond_129716;
            bool nonzzero_cert_129718;
            
            if (!protect_assert_disj_129717) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129719 = smod_safe64(next_stride_129704, merge_block_sizze_129589);
            bool num_blocks_129720 = zeze_lhs_129719 == (int64_t) 0;
            bool protect_assert_disj_129721 = cond_129716 || num_blocks_129720;
            bool assert_c_129722;
            
            if (!protect_assert_disj_129721) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129724 = sdiv_safe64(next_stride_129704, merge_block_sizze_129589);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725 = add64((int64_t) 1, num_blocks_129724);
            int64_t j_m_i_129726 = sub64(next_stride_129704, stride_129703);
            int64_t flat_dim_129727 = merge_block_sizze_129589 * num_blocks_129724;
            bool bounds_invalid_upwards_129728 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, (int64_t) 0);
            bool empty_slice_129729 = j_m_i_129726 == (int64_t) 0;
            int64_t m_129730 = sub64(j_m_i_129726, (int64_t) 1);
            bool zzero_lte_i_129731 = sle64((int64_t) 0, stride_129703);
            bool i_lte_j_129732 = sle64(stride_129703, next_stride_129704);
            bool empty_slice_129733 = stride_129703 == (int64_t) 0;
            int64_t m_129734 = sub64(stride_129703, (int64_t) 1);
            bool bounds_invalid_upwards_129735 = slt64(num_blocks_129724, (int64_t) 0);
            bool cond_129736 = slt64((int64_t) 0, stride_129703);
            bool valid_129737 = !bounds_invalid_upwards_129728;
            int64_t i_p_m_t_s_129738 = add64(stride_129703, m_129730);
            bool zzero_leq_i_p_m_t_s_129739 = sle64((int64_t) 0, m_129734);
            bool i_p_m_t_s_leq_w_129740 = slt64(m_129734, next_stride_129704);
            bool valid_129741 = !bounds_invalid_upwards_129735;
            bool i_p_m_t_s_leq_w_129742 = slt64(m_129713, flat_dim_129727);
            bool y_129743 = slt64((int64_t) 0, j_m_i_129726);
            bool protect_assert_disj_129744 = cond_129716 || valid_129737;
            bool range_valid_c_129745;
            
            if (!protect_assert_disj_129744) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:139:35-39\n   #10 ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129746 = sle64((int64_t) 0, i_p_m_t_s_129738);
            bool i_p_m_t_s_leq_w_129747 = slt64(i_p_m_t_s_129738, next_stride_129704);
            bool y_129748 = zzero_leq_i_p_m_t_s_129739 && i_p_m_t_s_leq_w_129740;
            bool protect_assert_disj_129749 = cond_129716 || valid_129741;
            bool range_valid_c_129750;
            
            if (!protect_assert_disj_129749) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129724, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129751 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129742;
            bool y_129752 = zzero_lte_i_129731 && i_p_m_t_s_leq_w_129747;
            bool forwards_ok_129753 = zzero_lte_i_129731 && y_129748;
            bool ok_or_empty_129754 = zzero_129705 || y_129751;
            bool protect_assert_disj_129755 = cond_129736 || y_129743;
            bool y_129756 = zzero_leq_i_p_m_t_s_129746 && y_129752;
            bool ok_or_empty_129757 = empty_slice_129733 || forwards_ok_129753;
            bool protect_assert_disj_129758 = cond_129716 || ok_or_empty_129754;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) flat_dim_129727, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129760 = !cond_129716;
            bool protect_assert_disj_129761 = protect_assert_disj_129755 || loop_not_taken_129760;
            bool index_certs_129762;
            
            if (!protect_assert_disj_129761) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:139:35-39\n   #10 ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129763 = i_lte_j_129732 && y_129756;
            bool protect_assert_disj_129764 = cond_129716 || ok_or_empty_129757;
            bool index_certs_129765;
            
            if (!protect_assert_disj_129764) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:139:35-39\n   #11 ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129766 = ok_or_empty_129757 || loop_not_taken_129760;
            bool index_certs_129767;
            
            if (!protect_assert_disj_129766) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129768 = empty_slice_129729 || forwards_ok_129763;
            bool protect_assert_disj_129769 = cond_129716 || ok_or_empty_129768;
            bool index_certs_129770;
            
            if (!protect_assert_disj_129769) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:139:35-39\n   #11 ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129771 = loop_not_taken_129760 || ok_or_empty_129768;
            bool index_certs_129772;
            
            if (!protect_assert_disj_129771) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 8 * num_merges_129708;
            int64_t bytes_139667 = next_stride_129704 * binop_x_139666;
            bool i_lte_j_129715 = sle64((int64_t) 0, next_stride_129704);
            
            if (mem_139668_cached_sizze_140775 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140775, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140776 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140776, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725;
            int64_t binop_x_139696 = (int64_t) 8 * num_blocks_129724;
            int64_t bytes_139697 = merge_block_sizze_129589 * binop_x_139696;
            int64_t bytes_139742 = (int64_t) 16 * stride_129703;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129708; i_139398++) {
                int64_t start_129776 = mul64(next_stride_129704, i_139398);
                int64_t j_m_i_129777 = sub64(loop_dz2084Uz2082U_129699, start_129776);
                bool empty_slice_129778 = j_m_i_129777 == (int64_t) 0;
                int64_t m_129779 = sub64(j_m_i_129777, (int64_t) 1);
                int64_t i_p_m_t_s_129780 = add64(start_129776, m_129779);
                bool zzero_leq_i_p_m_t_s_129781 = sle64((int64_t) 0, i_p_m_t_s_129780);
                bool i_p_m_t_s_leq_w_129782 = slt64(i_p_m_t_s_129780, loop_dz2084Uz2082U_129699);
                bool zzero_lte_i_129783 = sle64((int64_t) 0, start_129776);
                bool i_lte_j_129784 = sle64(start_129776, loop_dz2084Uz2082U_129699);
                bool y_129785 = i_p_m_t_s_leq_w_129782 && zzero_lte_i_129783;
                bool y_129786 = zzero_leq_i_p_m_t_s_129781 && y_129785;
                bool forwards_ok_129787 = i_lte_j_129784 && y_129786;
                bool ok_or_empty_129788 = empty_slice_129778 || forwards_ok_129787;
                bool index_certs_129789;
                
                if (!ok_or_empty_129788) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129776, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129699, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129790 = slt64(m_129713, j_m_i_129777);
                bool y_129791 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129790;
                bool forwards_ok_129792 = i_lte_j_129715 && y_129791;
                bool ok_or_empty_129793 = zzero_129705 || forwards_ok_129792;
                bool index_certs_129794;
                
                if (!ok_or_empty_129793) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) j_m_i_129777, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:139:35-39\n   #8  ftRelational.fut:138:9-139:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129716) {
                    int64_t dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129736) {
                        int64_t head_res_131697 = ((int64_t *) mem_param_139662.mem)[start_129776];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129776];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129703 + start_129776;
                        int64_t head_res_131700 = ((int64_t *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129704; nest_i_140347++) {
                        ((int64_t *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139742, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129704; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129704; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129726;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129703);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129726);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129703 + j_131711;
                                int64_t slice_131721 = start_129776 + slice_131720;
                                int64_t leq_arg1_131722 = ((int64_t *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129776 + i_131708;
                                int64_t leq_arg0_131727 = ((int64_t *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = sle64(leq_arg0_131727, leq_arg1_131722);
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        int64_t loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129703);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129776 + i_131708;
                            int64_t tmp_131738 = ((int64_t *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129726);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:139:35-39\n   #9  ftRelational.fut:138:9-139:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129703 + j_131711;
                            int64_t slice_131745 = start_129776 + slice_131744;
                            int64_t tmp_131746 = ((int64_t *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((int64_t *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140777 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140777, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140778 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140778, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725; i_139384++) {
                        int64_t split_count_arg3_129856 = mul64(merge_block_sizze_129589, i_139384);
                        int64_t defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129857, &defunc_0_split_count_res_129858, &defunc_0_split_count_res_129859, &defunc_0_split_count_res_129860, &defunc_0_split_count_res_129861, (int64_t) 0, stride_129703, (int64_t) 0, j_m_i_129726, split_count_arg3_129856) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129862 = slt64((int64_t) 0, defunc_0_split_count_res_129861);
                        bool defunc_0_split_count_res_129863;
                        int64_t defunc_0_split_count_res_129864;
                        int64_t defunc_0_split_count_res_129865;
                        int64_t defunc_0_split_count_res_129866;
                        int64_t defunc_0_split_count_res_129867;
                        int64_t defunc_0_split_count_res_129868;
                        bool loop_while_129869;
                        int64_t ss_129870;
                        int64_t ss_129871;
                        int64_t tt_129872;
                        int64_t tt_129873;
                        int64_t count_129874;
                        
                        loop_while_129869 = loop_cond_129862;
                        ss_129870 = defunc_0_split_count_res_129857;
                        ss_129871 = defunc_0_split_count_res_129858;
                        tt_129872 = defunc_0_split_count_res_129859;
                        tt_129873 = defunc_0_split_count_res_129860;
                        count_129874 = defunc_0_split_count_res_129861;
                        while (loop_while_129869) {
                            int64_t zlze_lhs_129875 = sub64(ss_129871, ss_129870);
                            bool cond_129876 = sle64(zlze_lhs_129875, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129877;
                            int64_t defunc_0_lifted_step_res_129878;
                            int64_t defunc_0_lifted_step_res_129879;
                            int64_t defunc_0_lifted_step_res_129880;
                            
                            if (cond_129876) {
                                int64_t tmp_131750 = add64(tt_129872, count_129874);
                                
                                defunc_0_lifted_step_res_129877 = ss_129870;
                                defunc_0_lifted_step_res_129878 = tmp_131750;
                                defunc_0_lifted_step_res_129879 = tt_129873;
                                defunc_0_lifted_step_res_129880 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129882 = sub64(tt_129873, tt_129872);
                                bool cond_129883 = sle64(zlze_lhs_129882, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129884;
                                int64_t defunc_0_lifted_step_res_f_res_129885;
                                int64_t defunc_0_lifted_step_res_f_res_129886;
                                int64_t defunc_0_lifted_step_res_f_res_129887;
                                
                                if (cond_129883) {
                                    int64_t tmp_131751 = add64(ss_129870, count_129874);
                                    
                                    defunc_0_lifted_step_res_f_res_129884 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129885 = tt_129872;
                                    defunc_0_lifted_step_res_f_res_129886 = tt_129873;
                                    defunc_0_lifted_step_res_f_res_129887 = (int64_t) 0;
                                } else {
                                    bool cond_129889 = count_129874 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129890;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129891;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129892;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129893;
                                    
                                    if (cond_129889) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129870);
                                        bool y_131754 = slt64(ss_129870, stride_129703);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129870, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:139:35-39\n   #13 ftRelational.fut:138:9-139:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129872);
                                        bool y_131760 = slt64(tt_129872, j_m_i_129726);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129872, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:139:35-39\n   #13 ftRelational.fut:138:9-139:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129776 + ss_129870;
                                        int64_t leq_arg1_131758 = ((int64_t *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129703 + tt_129872;
                                        int64_t slice_131764 = start_129776 + slice_131763;
                                        int64_t leq_arg0_131765 = ((int64_t *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = sle64(leq_arg0_131765, leq_arg1_131758);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129872);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129870;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129870);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129872;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = tt_129873;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = (int64_t) 0;
                                    } else {
                                        int64_t m_129912 = sdiv64(count_129874, (int64_t) 2);
                                        int64_t n_129913 = sub64(count_129874, m_129912);
                                        bool cond_129914 = n_129913 == (int64_t) 0;
                                        int64_t zgze_lhs_129915 = add64(ss_129870, m_129912);
                                        bool cond_f_res_129916 = sle64(ss_129871, zgze_lhs_129915);
                                        bool x_129917 = !cond_129914;
                                        bool y_129918 = cond_f_res_129916 && x_129917;
                                        bool cond_129919 = cond_129914 || y_129918;
                                        bool leq_y_x_129920;
                                        
                                        if (cond_129919) {
                                            leq_y_x_129920 = 1;
                                        } else {
                                            bool x_129921 = sle64((int64_t) 0, zgze_lhs_129915);
                                            bool y_129922 = slt64(zgze_lhs_129915, stride_129703);
                                            bool bounds_check_129923 = x_129921 && y_129922;
                                            bool index_certs_129924;
                                            
                                            if (!bounds_check_129923) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129915, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:139:35-39\n   #13 ftRelational.fut:138:9-139:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129927 = add64(tt_129872, n_129913);
                                            int64_t leq_arg0_129928 = sub64(zm_lhs_129927, (int64_t) 1);
                                            bool x_129929 = sle64((int64_t) 0, leq_arg0_129928);
                                            bool y_129930 = slt64(leq_arg0_129928, j_m_i_129726);
                                            bool bounds_check_129931 = x_129929 && y_129930;
                                            bool index_certs_129932;
                                            
                                            if (!bounds_check_129931) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129928, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:139:35-39\n   #13 ftRelational.fut:138:9-139:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129925 = start_129776 + zgze_lhs_129915;
                                            int64_t leq_arg1_129926 = ((int64_t *) mem_param_139662.mem)[slice_129925];
                                            int64_t slice_129933 = stride_129703 + leq_arg0_129928;
                                            int64_t slice_129934 = start_129776 + slice_129933;
                                            int64_t leq_arg0_129935 = ((int64_t *) mem_param_139662.mem)[slice_129934];
                                            bool defunc_0_leq_res_129936 = sle64(leq_arg0_129935, leq_arg1_129926);
                                            
                                            leq_y_x_129920 = defunc_0_leq_res_129936;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                        
                                        if (leq_y_x_129920) {
                                            int64_t tmp_131771 = add64(tt_129872, n_129913);
                                            int64_t tmp_131772 = sub64(count_129874, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tt_129873;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = tmp_131772;
                                        } else {
                                            int64_t tmp_129942 = add64(tt_129872, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tt_129872;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tmp_129942;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = count_129874;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = ss_129870;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                    }
                                    defunc_0_lifted_step_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_129890;
                                    defunc_0_lifted_step_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_129891;
                                    defunc_0_lifted_step_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_129892;
                                    defunc_0_lifted_step_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_129893;
                                }
                                defunc_0_lifted_step_res_129877 = defunc_0_lifted_step_res_f_res_129884;
                                defunc_0_lifted_step_res_129878 = defunc_0_lifted_step_res_f_res_129885;
                                defunc_0_lifted_step_res_129879 = defunc_0_lifted_step_res_f_res_129886;
                                defunc_0_lifted_step_res_129880 = defunc_0_lifted_step_res_f_res_129887;
                            }
                            
                            int64_t loopres_129943;
                            int64_t loopres_129944;
                            int64_t loopres_129945;
                            int64_t loopres_129946;
                            int64_t loopres_129947;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129943, &loopres_129944, &loopres_129945, &loopres_129946, &loopres_129947, defunc_0_lifted_step_res_129877, ss_129871, defunc_0_lifted_step_res_129878, defunc_0_lifted_step_res_129879, defunc_0_lifted_step_res_129880) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129948 = slt64((int64_t) 0, loopres_129947);
                            bool loop_while_tmp_140354 = loop_cond_129948;
                            int64_t ss_tmp_140355 = loopres_129943;
                            int64_t ss_tmp_140356 = loopres_129944;
                            int64_t tt_tmp_140357 = loopres_129945;
                            int64_t tt_tmp_140358 = loopres_129946;
                            int64_t count_tmp_140359 = loopres_129947;
                            
                            loop_while_129869 = loop_while_tmp_140354;
                            ss_129870 = ss_tmp_140355;
                            ss_129871 = ss_tmp_140356;
                            tt_129872 = tt_tmp_140357;
                            tt_129873 = tt_tmp_140358;
                            count_129874 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129863 = loop_while_129869;
                        defunc_0_split_count_res_129864 = ss_129870;
                        defunc_0_split_count_res_129865 = ss_129871;
                        defunc_0_split_count_res_129866 = tt_129872;
                        defunc_0_split_count_res_129867 = tt_129873;
                        defunc_0_split_count_res_129868 = count_129874;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129864;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129866;
                    }
                    if (mem_139698_cached_sizze_140779 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140779, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140780 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140780, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129724; i_139391++) {
                        bool y_129954 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool index_certs_129956;
                        
                        if (!y_129954) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:139:35-39\n   #10 ftRelational.fut:138:9-139:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129957 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129959 = add64((int64_t) 1, i_139391);
                        bool x_129960 = sle64((int64_t) 0, tmp_129959);
                        bool y_129961 = slt64(tmp_129959, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool bounds_check_129962 = x_129960 && y_129961;
                        bool index_certs_129963;
                        
                        if (!bounds_check_129962) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129959, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:139:35-39\n   #10 ftRelational.fut:138:9-139:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129964 = ((int64_t *) mem_139681)[tmp_129959];
                        int64_t defunc_0_f_res_129965 = ((int64_t *) mem_139683)[tmp_129959];
                        int64_t merge_sequential_arg2_129966 = add64(stride_129703, defunc_0_f_res_129958);
                        int64_t merge_sequential_arg2_129967 = add64(stride_129703, defunc_0_f_res_129965);
                        int64_t j_m_i_129968 = sub64(merge_sequential_arg2_129967, merge_sequential_arg2_129966);
                        bool empty_slice_129969 = j_m_i_129968 == (int64_t) 0;
                        int64_t m_129970 = sub64(j_m_i_129968, (int64_t) 1);
                        int64_t i_p_m_t_s_129971 = add64(merge_sequential_arg2_129966, m_129970);
                        bool zzero_leq_i_p_m_t_s_129972 = sle64((int64_t) 0, i_p_m_t_s_129971);
                        bool i_p_m_t_s_leq_w_129973 = slt64(i_p_m_t_s_129971, next_stride_129704);
                        bool zzero_lte_i_129974 = sle64((int64_t) 0, merge_sequential_arg2_129966);
                        bool i_lte_j_129975 = sle64(merge_sequential_arg2_129966, merge_sequential_arg2_129967);
                        bool y_129976 = i_p_m_t_s_leq_w_129973 && zzero_lte_i_129974;
                        bool y_129977 = zzero_leq_i_p_m_t_s_129972 && y_129976;
                        bool forwards_ok_129978 = i_lte_j_129975 && y_129977;
                        bool ok_or_empty_129979 = empty_slice_129969 || forwards_ok_129978;
                        bool index_certs_129980;
                        
                        if (!ok_or_empty_129979) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129966, ":", (long long) merge_sequential_arg2_129967, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:139:35-39\n   #10 ftRelational.fut:138:9-139:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129981 = sub64(defunc_0_f_res_129964, defunc_0_f_res_129957);
                        bool empty_slice_129982 = j_m_i_129981 == (int64_t) 0;
                        int64_t m_129983 = sub64(j_m_i_129981, (int64_t) 1);
                        int64_t i_p_m_t_s_129984 = add64(defunc_0_f_res_129957, m_129983);
                        bool zzero_leq_i_p_m_t_s_129985 = sle64((int64_t) 0, i_p_m_t_s_129984);
                        bool i_p_m_t_s_leq_w_129986 = slt64(i_p_m_t_s_129984, next_stride_129704);
                        bool zzero_lte_i_129987 = sle64((int64_t) 0, defunc_0_f_res_129957);
                        bool i_lte_j_129988 = sle64(defunc_0_f_res_129957, defunc_0_f_res_129964);
                        bool y_129989 = i_p_m_t_s_leq_w_129986 && zzero_lte_i_129987;
                        bool y_129990 = zzero_leq_i_p_m_t_s_129985 && y_129989;
                        bool forwards_ok_129991 = i_lte_j_129988 && y_129990;
                        bool ok_or_empty_129992 = empty_slice_129982 || forwards_ok_129991;
                        bool index_certs_129993;
                        
                        if (!ok_or_empty_129992) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129957, ":", (long long) defunc_0_f_res_129964, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:139:35-39\n   #10 ftRelational.fut:138:9-139:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129994 = slt64((int64_t) 0, j_m_i_129981);
                        int64_t dummy_129995;
                        int64_t dummy_129996;
                        
                        if (cond_129994) {
                            bool index_certs_131773;
                            
                            if (!cond_129994) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:139:35-39\n   #12 ftRelational.fut:138:9-139:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129776 + defunc_0_f_res_129957;
                            int64_t head_res_131775 = ((int64_t *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129995 = head_res_131775;
                            dummy_129996 = head_res_131776;
                        } else {
                            bool y_130001 = slt64((int64_t) 0, j_m_i_129968);
                            bool index_certs_130002;
                            
                            if (!y_130001) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:139:35-39\n   #12 ftRelational.fut:138:9-139:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_130003 = start_129776 + merge_sequential_arg2_129966;
                            int64_t head_res_130004 = ((int64_t *) mem_param_139662.mem)[slice_130003];
                            int64_t head_res_130005 = ((int64_t *) mem_param_139665.mem)[slice_130003];
                            
                            dummy_129995 = head_res_130004;
                            dummy_129996 = head_res_130005;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129589; nest_i_140362++) {
                            ((int64_t *) mem_139698)[i_139391 * merge_block_sizze_129589 + nest_i_140362] = dummy_129995;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129589; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + nest_i_140363] = dummy_129996;
                        }
                        
                        int64_t data_130008;
                        int64_t i_130012 = (int64_t) 0;
                        
                        for (int64_t k_130011 = 0; k_130011 < merge_block_sizze_129589; k_130011++) {
                            int64_t j_130015 = sub64(k_130011, i_130012);
                            bool cond_130016 = j_130015 == j_m_i_129968;
                            bool cond_130017;
                            
                            if (cond_130016) {
                                cond_130017 = 1;
                            } else {
                                bool cond_130018 = slt64(i_130012, j_m_i_129981);
                                bool cond_f_res_130019;
                                
                                if (cond_130018) {
                                    bool x_131777 = sle64((int64_t) 0, j_130015);
                                    bool y_131778 = slt64(j_130015, j_m_i_129968);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:139:35-39\n   #11 ftRelational.fut:138:9-139:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130012);
                                    bool bounds_check_131785 = cond_130018 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:139:35-39\n   #11 ftRelational.fut:138:9-139:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129966 + j_130015;
                                    int64_t slice_131782 = start_129776 + slice_131781;
                                    int64_t leq_arg1_131783 = ((int64_t *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129957 + i_130012;
                                    int64_t slice_131788 = start_129776 + slice_131787;
                                    int64_t leq_arg0_131789 = ((int64_t *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = sle64(leq_arg0_131789, leq_arg1_131783);
                                    
                                    cond_f_res_130019 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130019 = 0;
                                }
                                cond_130017 = cond_f_res_130019;
                            }
                            
                            int64_t loopres_130034;
                            int64_t loopres_130035;
                            int64_t loopres_130036;
                            
                            if (cond_130017) {
                                bool x_131792 = sle64((int64_t) 0, i_130012);
                                bool y_131793 = slt64(i_130012, j_m_i_129981);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:139:35-39\n   #11 ftRelational.fut:138:9-139:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130012);
                                int64_t slice_131796 = defunc_0_f_res_129957 + i_130012;
                                int64_t slice_131797 = start_129776 + slice_131796;
                                int64_t tmp_131798 = ((int64_t *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130034 = tmp_131791;
                                loopres_130035 = tmp_131798;
                                loopres_130036 = tmp_131799;
                            } else {
                                bool x_130046 = sle64((int64_t) 0, j_130015);
                                bool y_130047 = slt64(j_130015, j_m_i_129968);
                                bool bounds_check_130048 = x_130046 && y_130047;
                                bool index_certs_130049;
                                
                                if (!bounds_check_130048) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:139:35-39\n   #11 ftRelational.fut:138:9-139:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130050 = merge_sequential_arg2_129966 + j_130015;
                                int64_t slice_130051 = start_129776 + slice_130050;
                                int64_t tmp_130052 = ((int64_t *) mem_param_139662.mem)[slice_130051];
                                int64_t tmp_130053 = ((int64_t *) mem_param_139665.mem)[slice_130051];
                                
                                loopres_130034 = i_130012;
                                loopres_130035 = tmp_130052;
                                loopres_130036 = tmp_130053;
                            }
                            ((int64_t *) mem_139698)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130035;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130036;
                            
                            int64_t i_tmp_140364 = loopres_130034;
                            
                            i_130012 = i_tmp_140364;
                        }
                        data_130008 = i_130012;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139697, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139668, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130060 = next_stride_129704 * num_merges_129708;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            if (memblock_alloc(ctx, &mem_139778, bytes_139667, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            
            bool loop_cond_130063 = slt64(next_stride_129704, flat_dim_129585);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130060;
            bool loop_while_tmp_140341 = loop_cond_130063;
            int64_t stride_tmp_140344 = next_stride_129704;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129699 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129700 = loop_while_tmp_140341;
            stride_129703 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129694 = loop_dz2084Uz2082U_129699;
        data_129695 = loop_while_129700;
        data_129698 = stride_129703;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130064 = n_95159 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130065 = sle64((int64_t) 0, zs_lhs_129569);
        bool i_p_m_t_s_leq_w_130066 = slt64(zs_lhs_129569, data_129694);
        bool y_130067 = zzero_leq_i_p_m_t_s_130065 && i_p_m_t_s_leq_w_130066;
        bool ok_or_empty_130068 = empty_slice_130064 || y_130067;
        bool index_certs_130069;
        
        if (!ok_or_empty_130068) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_95159, "] out of bounds for array of shape [", (long long) data_129694, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:139:35-39\n   #6  ftRelational.fut:138:9-139:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139582, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_95159; i_139405++) {
        int64_t eta_p_130077 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130078 = sle64((int64_t) 0, eta_p_130077);
        bool y_130079 = slt64(eta_p_130077, n_95159);
        bool bounds_check_130080 = x_130078 && y_130079;
        bool index_certs_130081;
        
        if (!bounds_check_130080) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130077, "] out of bounds for array of shape [", (long long) n_95159, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:139:35-39\n   #5  ftRelational.fut:138:9-139:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130082 = ((int64_t *) ext_mem_139581.mem)[eta_p_130077];
        int64_t lifted_lambda_res_130083 = ((int64_t *) xs_mem_139580.mem)[eta_p_130077];
        
        ((int64_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130082;
        ((int64_t *) mem_139792.mem)[i_139405] = lifted_lambda_res_130083;
    }
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140769, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140770, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_140781, struct memblock *mem_out_p_140782, struct memblock xs_mem_139580, int64_t n_90873, int64_t incr_90874)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140783 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140784 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140785 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140786 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140787 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140788 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140789 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140790 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140791 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140792 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_90873;
    bool cond_129568 = sle64(n_90873, (int64_t) 1);
    int64_t zs_lhs_129569 = sub64(n_90873, (int64_t) 1);
    int64_t zp_rhs_129570 = sdiv_safe64(zs_lhs_129569, (int64_t) 20);
    int64_t min_num_blocks_129571 = add64((int64_t) 1, zp_rhs_129570);
    bool loop_cond_129572 = slt64((int64_t) 1, min_num_blocks_129571);
    bool smallest_pow_2_geq_than_res_129573;
    int64_t smallest_pow_2_geq_than_res_129574;
    bool loop_while_129575;
    int64_t x_129576;
    
    loop_while_129575 = loop_cond_129572;
    x_129576 = (int64_t) 1;
    while (loop_while_129575) {
        int64_t loopres_129577 = mul64((int64_t) 2, x_129576);
        bool loop_cond_129578 = slt64(loopres_129577, min_num_blocks_129571);
        bool loop_while_tmp_140322 = loop_cond_129578;
        int64_t x_tmp_140323 = loopres_129577;
        
        loop_while_129575 = loop_while_tmp_140322;
        x_129576 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129573 = loop_while_129575;
    smallest_pow_2_geq_than_res_129574 = x_129576;
    
    bool zzero_129579 = smallest_pow_2_geq_than_res_129574 == (int64_t) 0;
    bool nonzzero_129580 = !zzero_129579;
    bool protect_assert_disj_129581 = cond_129568 || nonzzero_129580;
    bool nonzzero_cert_129582;
    
    if (!protect_assert_disj_129581) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:135:35-39\n   #5  ftRelational.fut:134:9-135:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129583 = sdiv_safe64(zs_lhs_129569, smallest_pow_2_geq_than_res_129574);
    int64_t block_sizze_129584 = add64((int64_t) 1, zp_rhs_129583);
    bool y_129590 = slt64((int64_t) 0, n_90873);
    bool protect_assert_disj_140188 = cond_129568 || y_129590;
    bool index_certs_129591;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_90873, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:135:35-39\n   #5  ftRelational.fut:134:9-135:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129605 = slt64(smallest_pow_2_geq_than_res_129574, (int64_t) 0);
    bool valid_129606 = !bounds_invalid_upwards_129605;
    bool protect_assert_disj_140196 = cond_129568 || valid_129606;
    bool range_valid_c_129607;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129574, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:135:35-39\n   #6  ftRelational.fut:134:9-135:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129609 = slt64(block_sizze_129584, (int64_t) 0);
    bool valid_129610 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_140198 = cond_129568 || valid_129610;
    bool range_valid_c_129611;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129584, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129613 = sle64(block_sizze_129584, (int64_t) 1);
    int64_t tmp_129614 = sub64(block_sizze_129584, (int64_t) 2);
    bool bounds_invalid_upwards_129615 = slt64(tmp_129614, (int64_t) 0);
    bool valid_129617 = !bounds_invalid_upwards_129615;
    bool protect_assert_disj_129618 = cond_129613 || valid_129617;
    bool protect_assert_disj_140200 = cond_129568 || protect_assert_disj_129618;
    bool range_valid_c_129619;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129614, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139791 = (int64_t) 2 * n_90873;
    
    if (futrts_indicesWithIncrement_11363(ctx, &ext_mem_139581, xs_mem_139580, n_90873, incr_90874) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_90873; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129585 = smallest_pow_2_geq_than_res_129574 * block_sizze_129584;
    bool x_140183 = !cond_129568;
    int64_t greatest_divisor_leq_than_arg1_129588 = mul64((int64_t) 2, block_sizze_129584);
    int64_t merge_block_sizze_129589;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129588) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129589 = x_140185;
    } else {
        merge_block_sizze_129589 = (int64_t) 0;
    }
    
    int16_t reduce_arg1_129592;
    
    if (x_140183) {
        int16_t x_140189 = ((int16_t *) xs_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129592 = x_140189;
    } else {
        reduce_arg1_129592 = (int16_t) 0;
    }
    
    int16_t defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        int16_t x_140191;
        int64_t x_140192;
        int16_t redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129592;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_90873; i_139365++) {
            int16_t x_129596 = ((int16_t *) xs_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129602 = sle16(redout_139363, x_129596);
            int16_t defunc_0_op_res_129603;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129603 = x_129596;
            } else {
                defunc_0_op_res_129603 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129604;
            
            if (defunc_0_leq_res_129602) {
                defunc_0_op_res_129604 = i_139365;
            } else {
                defunc_0_op_res_129604 = redout_139364;
            }
            
            int16_t redout_tmp_140326 = defunc_0_op_res_129603;
            int64_t redout_tmp_140327 = defunc_0_op_res_129604;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = (int16_t) 0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129616 = add64((int64_t) 1, tmp_129614);
    int64_t binop_x_139584 = (int64_t) 2 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139585 = block_sizze_129584 * binop_x_139584;
    int64_t binop_x_139587 = (int64_t) 8 * smallest_pow_2_geq_than_res_129574;
    int64_t bytes_139588 = block_sizze_129584 * binop_x_139587;
    int64_t bytes_139600 = (int64_t) 8 * block_sizze_129584;
    bool loop_cond_129691 = slt64(block_sizze_129584, flat_dim_129585);
    bool zzero_129692 = merge_block_sizze_129589 == (int64_t) 0;
    bool nonzzero_129693 = !zzero_129692;
    
    if (cond_129568) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140783 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140783, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140784 < bytes_139588) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140784, bytes_139588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140785 < greatest_divisor_leq_than_arg1_129588) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140785, greatest_divisor_leq_than_arg1_129588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140786 < bytes_139600) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140786, bytes_139600);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129574; i_139377++) {
            int64_t zp_lhs_129623 = mul64(block_sizze_129584, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129584; i_139370++) {
                int64_t k_129627 = add64(zp_lhs_129623, i_139370);
                bool cond_129628 = slt64(k_129627, n_90873);
                int16_t lifted_lambda_res_129629;
                int64_t lifted_lambda_res_129630;
                
                if (cond_129628) {
                    bool x_131659 = sle64((int64_t) 0, k_129627);
                    bool bounds_check_131660 = cond_129628 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129627, "] out of bounds for array of shape [", (long long) n_90873, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t lifted_lambda_res_t_res_131662 = ((int16_t *) xs_mem_139580.mem)[k_129627];
                    
                    lifted_lambda_res_129629 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129630 = k_129627;
                } else {
                    lifted_lambda_res_129629 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129630 = defunc_0_reduce_res_131807;
                }
                ((int16_t *) mem_139599)[i_139370] = lifted_lambda_res_129629;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129630;
            }
            if (!cond_129613) {
                for (int64_t i_129640 = 0; i_129640 < distance_129616; i_129640++) {
                    int64_t gt_arg1_129643 = add64((int64_t) 1, i_129640);
                    bool x_129644 = sle64((int64_t) 0, gt_arg1_129643);
                    bool y_129645 = slt64(gt_arg1_129643, block_sizze_129584);
                    bool bounds_check_129646 = x_129644 && y_129645;
                    bool index_certs_129647;
                    
                    if (!bounds_check_129646) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129643, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129649 = slt64(i_129640, block_sizze_129584);
                    bool index_certs_129650;
                    
                    if (!y_129649) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129640, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t gt_arg1_129648 = ((int16_t *) mem_139599)[gt_arg1_129643];
                    int16_t gt_arg0_129651 = ((int16_t *) mem_139599)[i_129640];
                    bool defunc_0_leq_res_129652 = sle16(gt_arg0_129651, gt_arg1_129648);
                    bool defunc_0_lifted_gt_res_129653 = !defunc_0_leq_res_129652;
                    bool s_129654;
                    int64_t s_129657;
                    bool loop_while_129658;
                    int64_t j_129661;
                    
                    loop_while_129658 = defunc_0_lifted_gt_res_129653;
                    j_129661 = i_129640;
                    while (loop_while_129658) {
                        bool x_129662 = sle64((int64_t) 0, j_129661);
                        bool y_129663 = slt64(j_129661, block_sizze_129584);
                        bool bounds_check_129664 = x_129662 && y_129663;
                        bool index_certs_129665;
                        
                        if (!bounds_check_129664) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129661, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129668 = add64((int64_t) 1, j_129661);
                        bool x_129669 = sle64((int64_t) 0, copy_arg0_129668);
                        bool y_129670 = slt64(copy_arg0_129668, block_sizze_129584);
                        bool bounds_check_129671 = x_129669 && y_129670;
                        bool index_certs_129672;
                        
                        if (!bounds_check_129671) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129668, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int16_t copy_arg0_129666 = ((int16_t *) mem_139599)[j_129661];
                        int64_t copy_arg0_129667 = ((int64_t *) mem_139601)[j_129661];
                        int16_t copy_arg0_129673 = ((int16_t *) mem_139599)[copy_arg0_129668];
                        int64_t copy_arg0_129674 = ((int64_t *) mem_139601)[copy_arg0_129668];
                        
                        ((int16_t *) mem_139599)[j_129661] = copy_arg0_129673;
                        ((int64_t *) mem_139601)[j_129661] = copy_arg0_129674;
                        ((int16_t *) mem_139599)[copy_arg0_129668] = copy_arg0_129666;
                        ((int64_t *) mem_139601)[copy_arg0_129668] = copy_arg0_129667;
                        
                        int64_t tmp_129679 = sub64(j_129661, (int64_t) 1);
                        bool cond_129680 = sle64((int64_t) 0, tmp_129679);
                        bool loop_cond_129681;
                        
                        if (cond_129680) {
                            bool y_131664 = slt64(tmp_129679, block_sizze_129584);
                            bool bounds_check_131665 = cond_129680 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129679, "] out of bounds for array of shape [", (long long) block_sizze_129584, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int16_t gt_arg1_131663 = ((int16_t *) mem_139599)[j_129661];
                            int16_t gt_arg0_131667 = ((int16_t *) mem_139599)[tmp_129679];
                            bool defunc_0_leq_res_131668 = sle16(gt_arg0_131667, gt_arg1_131663);
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129681 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129681 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129681;
                        int64_t j_tmp_140337 = tmp_129679;
                        
                        loop_while_129658 = loop_while_tmp_140334;
                        j_129661 = j_tmp_140337;
                    }
                    s_129654 = loop_while_129658;
                    s_129657 = j_129661;
                }
            }
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_139586, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129584, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129584});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 2, (uint16_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint16_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        if (memblock_alloc(ctx, &mem_139658, bytes_139588, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129584, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129574, block_sizze_129584});
        
        int64_t data_129694;
        bool data_129695;
        int64_t data_129698;
        int64_t loop_dz2084Uz2082U_129699;
        bool loop_while_129700;
        int64_t stride_129703;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129699 = flat_dim_129585;
        loop_while_129700 = loop_cond_129691;
        stride_129703 = block_sizze_129584;
        while (loop_while_129700) {
            int64_t next_stride_129704 = mul64((int64_t) 2, stride_129703);
            bool zzero_129705 = next_stride_129704 == (int64_t) 0;
            bool nonzzero_129706 = !zzero_129705;
            bool nonzzero_cert_129707;
            
            if (!nonzzero_129706) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:135:35-39\n   #5  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129708 = sdiv64(flat_dim_129585, next_stride_129704);
            bool bounds_invalid_upwards_129709 = slt64(num_merges_129708, (int64_t) 0);
            bool valid_129710 = !bounds_invalid_upwards_129709;
            bool range_valid_c_129711;
            
            if (!valid_129710) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129708, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:135:35-39\n   #6  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129713 = sub64(next_stride_129704, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129714 = sle64((int64_t) 0, m_129713);
            bool cond_129716 = slt64(next_stride_129704, (int64_t) 10);
            bool protect_assert_disj_129717 = nonzzero_129693 || cond_129716;
            bool nonzzero_cert_129718;
            
            if (!protect_assert_disj_129717) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129719 = smod_safe64(next_stride_129704, merge_block_sizze_129589);
            bool num_blocks_129720 = zeze_lhs_129719 == (int64_t) 0;
            bool protect_assert_disj_129721 = cond_129716 || num_blocks_129720;
            bool assert_c_129722;
            
            if (!protect_assert_disj_129721) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129724 = sdiv_safe64(next_stride_129704, merge_block_sizze_129589);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725 = add64((int64_t) 1, num_blocks_129724);
            int64_t j_m_i_129726 = sub64(next_stride_129704, stride_129703);
            int64_t flat_dim_129727 = merge_block_sizze_129589 * num_blocks_129724;
            bool bounds_invalid_upwards_129728 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, (int64_t) 0);
            bool empty_slice_129729 = j_m_i_129726 == (int64_t) 0;
            int64_t m_129730 = sub64(j_m_i_129726, (int64_t) 1);
            bool zzero_lte_i_129731 = sle64((int64_t) 0, stride_129703);
            bool i_lte_j_129732 = sle64(stride_129703, next_stride_129704);
            bool empty_slice_129733 = stride_129703 == (int64_t) 0;
            int64_t m_129734 = sub64(stride_129703, (int64_t) 1);
            bool bounds_invalid_upwards_129735 = slt64(num_blocks_129724, (int64_t) 0);
            bool cond_129736 = slt64((int64_t) 0, stride_129703);
            bool valid_129737 = !bounds_invalid_upwards_129728;
            int64_t i_p_m_t_s_129738 = add64(stride_129703, m_129730);
            bool zzero_leq_i_p_m_t_s_129739 = sle64((int64_t) 0, m_129734);
            bool i_p_m_t_s_leq_w_129740 = slt64(m_129734, next_stride_129704);
            bool valid_129741 = !bounds_invalid_upwards_129735;
            bool i_p_m_t_s_leq_w_129742 = slt64(m_129713, flat_dim_129727);
            bool y_129743 = slt64((int64_t) 0, j_m_i_129726);
            bool protect_assert_disj_129744 = cond_129716 || valid_129737;
            bool range_valid_c_129745;
            
            if (!protect_assert_disj_129744) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:135:35-39\n   #10 ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129746 = sle64((int64_t) 0, i_p_m_t_s_129738);
            bool i_p_m_t_s_leq_w_129747 = slt64(i_p_m_t_s_129738, next_stride_129704);
            bool y_129748 = zzero_leq_i_p_m_t_s_129739 && i_p_m_t_s_leq_w_129740;
            bool protect_assert_disj_129749 = cond_129716 || valid_129741;
            bool range_valid_c_129750;
            
            if (!protect_assert_disj_129749) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129724, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129751 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129742;
            bool y_129752 = zzero_lte_i_129731 && i_p_m_t_s_leq_w_129747;
            bool forwards_ok_129753 = zzero_lte_i_129731 && y_129748;
            bool ok_or_empty_129754 = zzero_129705 || y_129751;
            bool protect_assert_disj_129755 = cond_129736 || y_129743;
            bool y_129756 = zzero_leq_i_p_m_t_s_129746 && y_129752;
            bool ok_or_empty_129757 = empty_slice_129733 || forwards_ok_129753;
            bool protect_assert_disj_129758 = cond_129716 || ok_or_empty_129754;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) flat_dim_129727, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129760 = !cond_129716;
            bool protect_assert_disj_129761 = protect_assert_disj_129755 || loop_not_taken_129760;
            bool index_certs_129762;
            
            if (!protect_assert_disj_129761) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:135:35-39\n   #10 ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129763 = i_lte_j_129732 && y_129756;
            bool protect_assert_disj_129764 = cond_129716 || ok_or_empty_129757;
            bool index_certs_129765;
            
            if (!protect_assert_disj_129764) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:135:35-39\n   #11 ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129766 = ok_or_empty_129757 || loop_not_taken_129760;
            bool index_certs_129767;
            
            if (!protect_assert_disj_129766) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129703, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129768 = empty_slice_129729 || forwards_ok_129763;
            bool protect_assert_disj_129769 = cond_129716 || ok_or_empty_129768;
            bool index_certs_129770;
            
            if (!protect_assert_disj_129769) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:135:35-39\n   #11 ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129771 = loop_not_taken_129760 || ok_or_empty_129768;
            bool index_certs_129772;
            
            if (!protect_assert_disj_129771) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129703, ":] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 2 * num_merges_129708;
            int64_t bytes_139667 = next_stride_129704 * binop_x_139666;
            int64_t binop_x_139669 = (int64_t) 8 * num_merges_129708;
            int64_t bytes_139670 = next_stride_129704 * binop_x_139669;
            bool i_lte_j_129715 = sle64((int64_t) 0, next_stride_129704);
            
            if (mem_139668_cached_sizze_140787 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140787, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140788 < bytes_139670) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140788, bytes_139670);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725;
            int64_t binop_x_139696 = (int64_t) 2 * num_blocks_129724;
            int64_t bytes_139697 = merge_block_sizze_129589 * binop_x_139696;
            int64_t binop_x_139699 = (int64_t) 8 * num_blocks_129724;
            int64_t bytes_139700 = merge_block_sizze_129589 * binop_x_139699;
            int64_t bytes_139742 = (int64_t) 4 * stride_129703;
            int64_t bytes_139744 = (int64_t) 16 * stride_129703;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129708; i_139398++) {
                int64_t start_129776 = mul64(next_stride_129704, i_139398);
                int64_t j_m_i_129777 = sub64(loop_dz2084Uz2082U_129699, start_129776);
                bool empty_slice_129778 = j_m_i_129777 == (int64_t) 0;
                int64_t m_129779 = sub64(j_m_i_129777, (int64_t) 1);
                int64_t i_p_m_t_s_129780 = add64(start_129776, m_129779);
                bool zzero_leq_i_p_m_t_s_129781 = sle64((int64_t) 0, i_p_m_t_s_129780);
                bool i_p_m_t_s_leq_w_129782 = slt64(i_p_m_t_s_129780, loop_dz2084Uz2082U_129699);
                bool zzero_lte_i_129783 = sle64((int64_t) 0, start_129776);
                bool i_lte_j_129784 = sle64(start_129776, loop_dz2084Uz2082U_129699);
                bool y_129785 = i_p_m_t_s_leq_w_129782 && zzero_lte_i_129783;
                bool y_129786 = zzero_leq_i_p_m_t_s_129781 && y_129785;
                bool forwards_ok_129787 = i_lte_j_129784 && y_129786;
                bool ok_or_empty_129788 = empty_slice_129778 || forwards_ok_129787;
                bool index_certs_129789;
                
                if (!ok_or_empty_129788) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129776, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129699, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129790 = slt64(m_129713, j_m_i_129777);
                bool y_129791 = zzero_leq_i_p_m_t_s_129714 && i_p_m_t_s_leq_w_129790;
                bool forwards_ok_129792 = i_lte_j_129715 && y_129791;
                bool ok_or_empty_129793 = zzero_129705 || forwards_ok_129792;
                bool index_certs_129794;
                
                if (!ok_or_empty_129793) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129704, "] out of bounds for array of shape [", (long long) j_m_i_129777, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:152:60-63\n   #7  ftRelational.fut:135:35-39\n   #8  ftRelational.fut:134:9-135:39\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129716) {
                    int16_t dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129736) {
                        int16_t head_res_131697 = ((int16_t *) mem_param_139662.mem)[start_129776];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129776];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129703 + start_129776;
                        int16_t head_res_131700 = ((int16_t *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129704; nest_i_140347++) {
                        ((int16_t *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139744, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129704; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129704; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129726;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129703);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129726);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129703 + j_131711;
                                int64_t slice_131721 = start_129776 + slice_131720;
                                int16_t leq_arg1_131722 = ((int16_t *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129776 + i_131708;
                                int16_t leq_arg0_131727 = ((int16_t *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = sle16(leq_arg0_131727, leq_arg1_131722);
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        int16_t loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129703);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129776 + i_131708;
                            int16_t tmp_131738 = ((int16_t *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129726);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:152:60-63\n   #8  ftRelational.fut:135:35-39\n   #9  ftRelational.fut:134:9-135:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129703 + j_131711;
                            int64_t slice_131745 = start_129776 + slice_131744;
                            int16_t tmp_131746 = ((int16_t *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((int16_t *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140789 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140789, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140790 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140790, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725; i_139384++) {
                        int64_t split_count_arg3_129856 = mul64(merge_block_sizze_129589, i_139384);
                        int64_t defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129857, &defunc_0_split_count_res_129858, &defunc_0_split_count_res_129859, &defunc_0_split_count_res_129860, &defunc_0_split_count_res_129861, (int64_t) 0, stride_129703, (int64_t) 0, j_m_i_129726, split_count_arg3_129856) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129862 = slt64((int64_t) 0, defunc_0_split_count_res_129861);
                        bool defunc_0_split_count_res_129863;
                        int64_t defunc_0_split_count_res_129864;
                        int64_t defunc_0_split_count_res_129865;
                        int64_t defunc_0_split_count_res_129866;
                        int64_t defunc_0_split_count_res_129867;
                        int64_t defunc_0_split_count_res_129868;
                        bool loop_while_129869;
                        int64_t ss_129870;
                        int64_t ss_129871;
                        int64_t tt_129872;
                        int64_t tt_129873;
                        int64_t count_129874;
                        
                        loop_while_129869 = loop_cond_129862;
                        ss_129870 = defunc_0_split_count_res_129857;
                        ss_129871 = defunc_0_split_count_res_129858;
                        tt_129872 = defunc_0_split_count_res_129859;
                        tt_129873 = defunc_0_split_count_res_129860;
                        count_129874 = defunc_0_split_count_res_129861;
                        while (loop_while_129869) {
                            int64_t zlze_lhs_129875 = sub64(ss_129871, ss_129870);
                            bool cond_129876 = sle64(zlze_lhs_129875, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129877;
                            int64_t defunc_0_lifted_step_res_129878;
                            int64_t defunc_0_lifted_step_res_129879;
                            int64_t defunc_0_lifted_step_res_129880;
                            
                            if (cond_129876) {
                                int64_t tmp_131750 = add64(tt_129872, count_129874);
                                
                                defunc_0_lifted_step_res_129877 = ss_129870;
                                defunc_0_lifted_step_res_129878 = tmp_131750;
                                defunc_0_lifted_step_res_129879 = tt_129873;
                                defunc_0_lifted_step_res_129880 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129882 = sub64(tt_129873, tt_129872);
                                bool cond_129883 = sle64(zlze_lhs_129882, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129884;
                                int64_t defunc_0_lifted_step_res_f_res_129885;
                                int64_t defunc_0_lifted_step_res_f_res_129886;
                                int64_t defunc_0_lifted_step_res_f_res_129887;
                                
                                if (cond_129883) {
                                    int64_t tmp_131751 = add64(ss_129870, count_129874);
                                    
                                    defunc_0_lifted_step_res_f_res_129884 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129885 = tt_129872;
                                    defunc_0_lifted_step_res_f_res_129886 = tt_129873;
                                    defunc_0_lifted_step_res_f_res_129887 = (int64_t) 0;
                                } else {
                                    bool cond_129889 = count_129874 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129890;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129891;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129892;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129893;
                                    
                                    if (cond_129889) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129870);
                                        bool y_131754 = slt64(ss_129870, stride_129703);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129870, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:135:35-39\n   #13 ftRelational.fut:134:9-135:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129872);
                                        bool y_131760 = slt64(tt_129872, j_m_i_129726);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129872, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:135:35-39\n   #13 ftRelational.fut:134:9-135:39\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129776 + ss_129870;
                                        int16_t leq_arg1_131758 = ((int16_t *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129703 + tt_129872;
                                        int64_t slice_131764 = start_129776 + slice_131763;
                                        int16_t leq_arg0_131765 = ((int16_t *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = sle16(leq_arg0_131765, leq_arg1_131758);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129872);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129870;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129870);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129872;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = tt_129873;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = (int64_t) 0;
                                    } else {
                                        int64_t m_129912 = sdiv64(count_129874, (int64_t) 2);
                                        int64_t n_129913 = sub64(count_129874, m_129912);
                                        bool cond_129914 = n_129913 == (int64_t) 0;
                                        int64_t zgze_lhs_129915 = add64(ss_129870, m_129912);
                                        bool cond_f_res_129916 = sle64(ss_129871, zgze_lhs_129915);
                                        bool x_129917 = !cond_129914;
                                        bool y_129918 = cond_f_res_129916 && x_129917;
                                        bool cond_129919 = cond_129914 || y_129918;
                                        bool leq_y_x_129920;
                                        
                                        if (cond_129919) {
                                            leq_y_x_129920 = 1;
                                        } else {
                                            bool x_129921 = sle64((int64_t) 0, zgze_lhs_129915);
                                            bool y_129922 = slt64(zgze_lhs_129915, stride_129703);
                                            bool bounds_check_129923 = x_129921 && y_129922;
                                            bool index_certs_129924;
                                            
                                            if (!bounds_check_129923) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129915, "] out of bounds for array of shape [", (long long) stride_129703, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:135:35-39\n   #13 ftRelational.fut:134:9-135:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129927 = add64(tt_129872, n_129913);
                                            int64_t leq_arg0_129928 = sub64(zm_lhs_129927, (int64_t) 1);
                                            bool x_129929 = sle64((int64_t) 0, leq_arg0_129928);
                                            bool y_129930 = slt64(leq_arg0_129928, j_m_i_129726);
                                            bool bounds_check_129931 = x_129929 && y_129930;
                                            bool index_certs_129932;
                                            
                                            if (!bounds_check_129931) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129928, "] out of bounds for array of shape [", (long long) j_m_i_129726, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:152:60-63\n   #12 ftRelational.fut:135:35-39\n   #13 ftRelational.fut:134:9-135:39\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129925 = start_129776 + zgze_lhs_129915;
                                            int16_t leq_arg1_129926 = ((int16_t *) mem_param_139662.mem)[slice_129925];
                                            int64_t slice_129933 = stride_129703 + leq_arg0_129928;
                                            int64_t slice_129934 = start_129776 + slice_129933;
                                            int16_t leq_arg0_129935 = ((int16_t *) mem_param_139662.mem)[slice_129934];
                                            bool defunc_0_leq_res_129936 = sle16(leq_arg0_129935, leq_arg1_129926);
                                            
                                            leq_y_x_129920 = defunc_0_leq_res_129936;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                        
                                        if (leq_y_x_129920) {
                                            int64_t tmp_131771 = add64(tt_129872, n_129913);
                                            int64_t tmp_131772 = sub64(count_129874, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tt_129873;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = tmp_131772;
                                        } else {
                                            int64_t tmp_129942 = add64(tt_129872, n_129913);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129937 = tt_129872;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129938 = tmp_129942;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129939 = count_129874;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129890 = ss_129870;
                                        defunc_0_lifted_step_res_f_res_f_res_129891 = defunc_0_lifted_step_res_f_res_f_res_f_res_129937;
                                        defunc_0_lifted_step_res_f_res_f_res_129892 = defunc_0_lifted_step_res_f_res_f_res_f_res_129938;
                                        defunc_0_lifted_step_res_f_res_f_res_129893 = defunc_0_lifted_step_res_f_res_f_res_f_res_129939;
                                    }
                                    defunc_0_lifted_step_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_129890;
                                    defunc_0_lifted_step_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_129891;
                                    defunc_0_lifted_step_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_129892;
                                    defunc_0_lifted_step_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_129893;
                                }
                                defunc_0_lifted_step_res_129877 = defunc_0_lifted_step_res_f_res_129884;
                                defunc_0_lifted_step_res_129878 = defunc_0_lifted_step_res_f_res_129885;
                                defunc_0_lifted_step_res_129879 = defunc_0_lifted_step_res_f_res_129886;
                                defunc_0_lifted_step_res_129880 = defunc_0_lifted_step_res_f_res_129887;
                            }
                            
                            int64_t loopres_129943;
                            int64_t loopres_129944;
                            int64_t loopres_129945;
                            int64_t loopres_129946;
                            int64_t loopres_129947;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129943, &loopres_129944, &loopres_129945, &loopres_129946, &loopres_129947, defunc_0_lifted_step_res_129877, ss_129871, defunc_0_lifted_step_res_129878, defunc_0_lifted_step_res_129879, defunc_0_lifted_step_res_129880) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129948 = slt64((int64_t) 0, loopres_129947);
                            bool loop_while_tmp_140354 = loop_cond_129948;
                            int64_t ss_tmp_140355 = loopres_129943;
                            int64_t ss_tmp_140356 = loopres_129944;
                            int64_t tt_tmp_140357 = loopres_129945;
                            int64_t tt_tmp_140358 = loopres_129946;
                            int64_t count_tmp_140359 = loopres_129947;
                            
                            loop_while_129869 = loop_while_tmp_140354;
                            ss_129870 = ss_tmp_140355;
                            ss_129871 = ss_tmp_140356;
                            tt_129872 = tt_tmp_140357;
                            tt_129873 = tt_tmp_140358;
                            count_129874 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129863 = loop_while_129869;
                        defunc_0_split_count_res_129864 = ss_129870;
                        defunc_0_split_count_res_129865 = ss_129871;
                        defunc_0_split_count_res_129866 = tt_129872;
                        defunc_0_split_count_res_129867 = tt_129873;
                        defunc_0_split_count_res_129868 = count_129874;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129864;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129866;
                    }
                    if (mem_139698_cached_sizze_140791 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140791, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140792 < bytes_139700) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140792, bytes_139700);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129724; i_139391++) {
                        bool y_129954 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool index_certs_129956;
                        
                        if (!y_129954) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:135:35-39\n   #10 ftRelational.fut:134:9-135:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129957 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129959 = add64((int64_t) 1, i_139391);
                        bool x_129960 = sle64((int64_t) 0, tmp_129959);
                        bool y_129961 = slt64(tmp_129959, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725);
                        bool bounds_check_129962 = x_129960 && y_129961;
                        bool index_certs_129963;
                        
                        if (!bounds_check_129962) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129959, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129725, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:135:35-39\n   #10 ftRelational.fut:134:9-135:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129964 = ((int64_t *) mem_139681)[tmp_129959];
                        int64_t defunc_0_f_res_129965 = ((int64_t *) mem_139683)[tmp_129959];
                        int64_t merge_sequential_arg2_129966 = add64(stride_129703, defunc_0_f_res_129958);
                        int64_t merge_sequential_arg2_129967 = add64(stride_129703, defunc_0_f_res_129965);
                        int64_t j_m_i_129968 = sub64(merge_sequential_arg2_129967, merge_sequential_arg2_129966);
                        bool empty_slice_129969 = j_m_i_129968 == (int64_t) 0;
                        int64_t m_129970 = sub64(j_m_i_129968, (int64_t) 1);
                        int64_t i_p_m_t_s_129971 = add64(merge_sequential_arg2_129966, m_129970);
                        bool zzero_leq_i_p_m_t_s_129972 = sle64((int64_t) 0, i_p_m_t_s_129971);
                        bool i_p_m_t_s_leq_w_129973 = slt64(i_p_m_t_s_129971, next_stride_129704);
                        bool zzero_lte_i_129974 = sle64((int64_t) 0, merge_sequential_arg2_129966);
                        bool i_lte_j_129975 = sle64(merge_sequential_arg2_129966, merge_sequential_arg2_129967);
                        bool y_129976 = i_p_m_t_s_leq_w_129973 && zzero_lte_i_129974;
                        bool y_129977 = zzero_leq_i_p_m_t_s_129972 && y_129976;
                        bool forwards_ok_129978 = i_lte_j_129975 && y_129977;
                        bool ok_or_empty_129979 = empty_slice_129969 || forwards_ok_129978;
                        bool index_certs_129980;
                        
                        if (!ok_or_empty_129979) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129966, ":", (long long) merge_sequential_arg2_129967, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:135:35-39\n   #10 ftRelational.fut:134:9-135:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129981 = sub64(defunc_0_f_res_129964, defunc_0_f_res_129957);
                        bool empty_slice_129982 = j_m_i_129981 == (int64_t) 0;
                        int64_t m_129983 = sub64(j_m_i_129981, (int64_t) 1);
                        int64_t i_p_m_t_s_129984 = add64(defunc_0_f_res_129957, m_129983);
                        bool zzero_leq_i_p_m_t_s_129985 = sle64((int64_t) 0, i_p_m_t_s_129984);
                        bool i_p_m_t_s_leq_w_129986 = slt64(i_p_m_t_s_129984, next_stride_129704);
                        bool zzero_lte_i_129987 = sle64((int64_t) 0, defunc_0_f_res_129957);
                        bool i_lte_j_129988 = sle64(defunc_0_f_res_129957, defunc_0_f_res_129964);
                        bool y_129989 = i_p_m_t_s_leq_w_129986 && zzero_lte_i_129987;
                        bool y_129990 = zzero_leq_i_p_m_t_s_129985 && y_129989;
                        bool forwards_ok_129991 = i_lte_j_129988 && y_129990;
                        bool ok_or_empty_129992 = empty_slice_129982 || forwards_ok_129991;
                        bool index_certs_129993;
                        
                        if (!ok_or_empty_129992) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129957, ":", (long long) defunc_0_f_res_129964, "] out of bounds for array of shape [", (long long) next_stride_129704, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:152:60-63\n   #9  ftRelational.fut:135:35-39\n   #10 ftRelational.fut:134:9-135:39\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129994 = slt64((int64_t) 0, j_m_i_129981);
                        int16_t dummy_129995;
                        int64_t dummy_129996;
                        
                        if (cond_129994) {
                            bool index_certs_131773;
                            
                            if (!cond_129994) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:135:35-39\n   #12 ftRelational.fut:134:9-135:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129776 + defunc_0_f_res_129957;
                            int16_t head_res_131775 = ((int16_t *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129995 = head_res_131775;
                            dummy_129996 = head_res_131776;
                        } else {
                            bool y_130001 = slt64((int64_t) 0, j_m_i_129968);
                            bool index_certs_130002;
                            
                            if (!y_130001) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:152:60-63\n   #11 ftRelational.fut:135:35-39\n   #12 ftRelational.fut:134:9-135:39\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_130003 = start_129776 + merge_sequential_arg2_129966;
                            int16_t head_res_130004 = ((int16_t *) mem_param_139662.mem)[slice_130003];
                            int64_t head_res_130005 = ((int64_t *) mem_param_139665.mem)[slice_130003];
                            
                            dummy_129995 = head_res_130004;
                            dummy_129996 = head_res_130005;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129589; nest_i_140362++) {
                            ((int16_t *) mem_139698)[i_139391 * merge_block_sizze_129589 + nest_i_140362] = dummy_129995;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129589; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + nest_i_140363] = dummy_129996;
                        }
                        
                        int64_t data_130008;
                        int64_t i_130012 = (int64_t) 0;
                        
                        for (int64_t k_130011 = 0; k_130011 < merge_block_sizze_129589; k_130011++) {
                            int64_t j_130015 = sub64(k_130011, i_130012);
                            bool cond_130016 = j_130015 == j_m_i_129968;
                            bool cond_130017;
                            
                            if (cond_130016) {
                                cond_130017 = 1;
                            } else {
                                bool cond_130018 = slt64(i_130012, j_m_i_129981);
                                bool cond_f_res_130019;
                                
                                if (cond_130018) {
                                    bool x_131777 = sle64((int64_t) 0, j_130015);
                                    bool y_131778 = slt64(j_130015, j_m_i_129968);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:135:35-39\n   #11 ftRelational.fut:134:9-135:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130012);
                                    bool bounds_check_131785 = cond_130018 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:135:35-39\n   #11 ftRelational.fut:134:9-135:39\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129966 + j_130015;
                                    int64_t slice_131782 = start_129776 + slice_131781;
                                    int16_t leq_arg1_131783 = ((int16_t *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129957 + i_130012;
                                    int64_t slice_131788 = start_129776 + slice_131787;
                                    int16_t leq_arg0_131789 = ((int16_t *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = sle16(leq_arg0_131789, leq_arg1_131783);
                                    
                                    cond_f_res_130019 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130019 = 0;
                                }
                                cond_130017 = cond_f_res_130019;
                            }
                            
                            int64_t loopres_130034;
                            int16_t loopres_130035;
                            int64_t loopres_130036;
                            
                            if (cond_130017) {
                                bool x_131792 = sle64((int64_t) 0, i_130012);
                                bool y_131793 = slt64(i_130012, j_m_i_129981);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130012, "] out of bounds for array of shape [", (long long) j_m_i_129981, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:135:35-39\n   #11 ftRelational.fut:134:9-135:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130012);
                                int64_t slice_131796 = defunc_0_f_res_129957 + i_130012;
                                int64_t slice_131797 = start_129776 + slice_131796;
                                int16_t tmp_131798 = ((int16_t *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130034 = tmp_131791;
                                loopres_130035 = tmp_131798;
                                loopres_130036 = tmp_131799;
                            } else {
                                bool x_130046 = sle64((int64_t) 0, j_130015);
                                bool y_130047 = slt64(j_130015, j_m_i_129968);
                                bool bounds_check_130048 = x_130046 && y_130047;
                                bool index_certs_130049;
                                
                                if (!bounds_check_130048) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130015, "] out of bounds for array of shape [", (long long) j_m_i_129968, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:152:60-63\n   #10 ftRelational.fut:135:35-39\n   #11 ftRelational.fut:134:9-135:39\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130050 = merge_sequential_arg2_129966 + j_130015;
                                int64_t slice_130051 = start_129776 + slice_130050;
                                int16_t tmp_130052 = ((int16_t *) mem_param_139662.mem)[slice_130051];
                                int64_t tmp_130053 = ((int64_t *) mem_param_139665.mem)[slice_130051];
                                
                                loopres_130034 = i_130012;
                                loopres_130035 = tmp_130052;
                                loopres_130036 = tmp_130053;
                            }
                            ((int16_t *) mem_139698)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130035;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129589 + k_130011] = loopres_130036;
                            
                            int64_t i_tmp_140364 = loopres_130034;
                            
                            i_130012 = i_tmp_140364;
                        }
                        data_130008 = i_130012;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_2b(ctx, 2, (uint16_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint16_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139700, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129589, (int64_t) 1}, (int64_t []) {num_blocks_129724, merge_block_sizze_129589});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_2b(ctx, 1, (uint16_t *) mem_139668, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129704, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129704});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130060 = next_stride_129704 * num_merges_129708;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_2b(ctx, 2, (uint16_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint16_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            if (memblock_alloc(ctx, &mem_139778, bytes_139670, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129704, (int64_t) 1}, (int64_t []) {num_merges_129708, next_stride_129704});
            
            bool loop_cond_130063 = slt64(next_stride_129704, flat_dim_129585);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130060;
            bool loop_while_tmp_140341 = loop_cond_130063;
            int64_t stride_tmp_140344 = next_stride_129704;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129699 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129700 = loop_while_tmp_140341;
            stride_129703 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129694 = loop_dz2084Uz2082U_129699;
        data_129695 = loop_while_129700;
        data_129698 = stride_129703;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130064 = n_90873 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130065 = sle64((int64_t) 0, zs_lhs_129569);
        bool i_p_m_t_s_leq_w_130066 = slt64(zs_lhs_129569, data_129694);
        bool y_130067 = zzero_leq_i_p_m_t_s_130065 && i_p_m_t_s_leq_w_130066;
        bool ok_or_empty_130068 = empty_slice_130064 || y_130067;
        bool index_certs_130069;
        
        if (!ok_or_empty_130068) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_90873, "] out of bounds for array of shape [", (long long) data_129694, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:152:60-63\n   #5  ftRelational.fut:135:35-39\n   #6  ftRelational.fut:134:9-135:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_90873; i_139405++) {
        int64_t eta_p_130077 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130078 = sle64((int64_t) 0, eta_p_130077);
        bool y_130079 = slt64(eta_p_130077, n_90873);
        bool bounds_check_130080 = x_130078 && y_130079;
        bool index_certs_130081;
        
        if (!bounds_check_130080) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130077, "] out of bounds for array of shape [", (long long) n_90873, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:152:60-63\n   #4  ftRelational.fut:135:35-39\n   #5  ftRelational.fut:134:9-135:39\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130082 = ((int64_t *) ext_mem_139581.mem)[eta_p_130077];
        int16_t lifted_lambda_res_130083 = ((int16_t *) xs_mem_139580.mem)[eta_p_130077];
        
        ((int64_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130082;
        ((int16_t *) mem_139792.mem)[i_139405] = lifted_lambda_res_130083;
    }
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140781, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140782, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_double(struct futhark_context *ctx, struct memblock *mem_out_p_140793, struct memblock *mem_out_p_140794, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_84345, int64_t b_84346)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140795 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140796 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140797 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140798 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140799 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140800 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140801 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140802 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140803 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140804 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_84345;
    bool cond_129562 = sle64(n_84345, (int64_t) 1);
    int64_t zs_lhs_129563 = sub64(n_84345, (int64_t) 1);
    int64_t zp_rhs_129564 = sdiv_safe64(zs_lhs_129563, (int64_t) 20);
    int64_t min_num_blocks_129565 = add64((int64_t) 1, zp_rhs_129564);
    bool loop_cond_129566 = slt64((int64_t) 1, min_num_blocks_129565);
    bool smallest_pow_2_geq_than_res_129567;
    int64_t smallest_pow_2_geq_than_res_129568;
    bool loop_while_129569;
    int64_t x_129570;
    
    loop_while_129569 = loop_cond_129566;
    x_129570 = (int64_t) 1;
    while (loop_while_129569) {
        int64_t loopres_129571 = mul64((int64_t) 2, x_129570);
        bool loop_cond_129572 = slt64(loopres_129571, min_num_blocks_129565);
        bool loop_while_tmp_140322 = loop_cond_129572;
        int64_t x_tmp_140323 = loopres_129571;
        
        loop_while_129569 = loop_while_tmp_140322;
        x_129570 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129567 = loop_while_129569;
    smallest_pow_2_geq_than_res_129568 = x_129570;
    
    bool zzero_129573 = smallest_pow_2_geq_than_res_129568 == (int64_t) 0;
    bool nonzzero_129574 = !zzero_129573;
    bool protect_assert_disj_129575 = cond_129562 || nonzzero_129574;
    bool nonzzero_cert_129576;
    
    if (!protect_assert_disj_129575) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:117:36-40\n   #5  ftRelational.fut:114:9-117:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129577 = sdiv_safe64(zs_lhs_129563, smallest_pow_2_geq_than_res_129568);
    int64_t block_sizze_129578 = add64((int64_t) 1, zp_rhs_129577);
    bool y_129584 = slt64((int64_t) 0, n_84345);
    bool protect_assert_disj_140188 = cond_129562 || y_129584;
    bool index_certs_129585;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_84345, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:117:36-40\n   #5  ftRelational.fut:114:9-117:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129599 = slt64(smallest_pow_2_geq_than_res_129568, (int64_t) 0);
    bool valid_129600 = !bounds_invalid_upwards_129599;
    bool protect_assert_disj_140196 = cond_129562 || valid_129600;
    bool range_valid_c_129601;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129568, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:117:36-40\n   #6  ftRelational.fut:114:9-117:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129603 = slt64(block_sizze_129578, (int64_t) 0);
    bool valid_129604 = !bounds_invalid_upwards_129603;
    bool protect_assert_disj_140198 = cond_129562 || valid_129604;
    bool range_valid_c_129605;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129578, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129607 = sle64(block_sizze_129578, (int64_t) 1);
    int64_t tmp_129608 = sub64(block_sizze_129578, (int64_t) 2);
    bool bounds_invalid_upwards_129609 = slt64(tmp_129608, (int64_t) 0);
    bool valid_129611 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_129612 = cond_129607 || valid_129611;
    bool protect_assert_disj_140200 = cond_129562 || protect_assert_disj_129612;
    bool range_valid_c_129613;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129608, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139791 = n_84345 * b_84346;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_84345; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129579 = smallest_pow_2_geq_than_res_129568 * block_sizze_129578;
    bool x_140183 = !cond_129562;
    int64_t greatest_divisor_leq_than_arg1_129582 = mul64((int64_t) 2, block_sizze_129578);
    int64_t merge_block_sizze_129583;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129582) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129583 = x_140185;
    } else {
        merge_block_sizze_129583 = (int64_t) 0;
    }
    
    double reduce_arg1_129586;
    
    if (x_140183) {
        double x_140189 = ((double *) k_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129586 = x_140189;
    } else {
        reduce_arg1_129586 = 0.0;
    }
    
    double defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        double x_140191;
        int64_t x_140192;
        double redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129586;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_84345; i_139365++) {
            double x_129590 = ((double *) k_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129596 = redout_139363 <= x_129590;
            double defunc_0_op_res_129597;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129597 = x_129590;
            } else {
                defunc_0_op_res_129597 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129598;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129598 = i_139365;
            } else {
                defunc_0_op_res_129598 = redout_139364;
            }
            
            double redout_tmp_140326 = defunc_0_op_res_129597;
            int64_t redout_tmp_140327 = defunc_0_op_res_129598;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = 0.0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129610 = add64((int64_t) 1, tmp_129608);
    int64_t binop_x_139584 = (int64_t) 8 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139585 = block_sizze_129578 * binop_x_139584;
    int64_t bytes_139598 = (int64_t) 8 * block_sizze_129578;
    bool loop_cond_129685 = slt64(block_sizze_129578, flat_dim_129579);
    bool zzero_129686 = merge_block_sizze_129583 == (int64_t) 0;
    bool nonzzero_129687 = !zzero_129686;
    
    if (cond_129562) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140795 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140795, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140796 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140796, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140797 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140797, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140798 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140798, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129568; i_139377++) {
            int64_t zp_lhs_129617 = mul64(block_sizze_129578, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129578; i_139370++) {
                int64_t k_129621 = add64(zp_lhs_129617, i_139370);
                bool cond_129622 = slt64(k_129621, n_84345);
                double lifted_lambda_res_129623;
                int64_t lifted_lambda_res_129624;
                
                if (cond_129622) {
                    bool x_131659 = sle64((int64_t) 0, k_129621);
                    bool bounds_check_131660 = cond_129622 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129621, "] out of bounds for array of shape [", (long long) n_84345, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double lifted_lambda_res_t_res_131662 = ((double *) k_mem_139580.mem)[k_129621];
                    
                    lifted_lambda_res_129623 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129624 = k_129621;
                } else {
                    lifted_lambda_res_129623 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129624 = defunc_0_reduce_res_131807;
                }
                ((double *) mem_139599)[i_139370] = lifted_lambda_res_129623;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129624;
            }
            if (!cond_129607) {
                for (int64_t i_129634 = 0; i_129634 < distance_129610; i_129634++) {
                    int64_t gt_arg1_129637 = add64((int64_t) 1, i_129634);
                    bool x_129638 = sle64((int64_t) 0, gt_arg1_129637);
                    bool y_129639 = slt64(gt_arg1_129637, block_sizze_129578);
                    bool bounds_check_129640 = x_129638 && y_129639;
                    bool index_certs_129641;
                    
                    if (!bounds_check_129640) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129637, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129643 = slt64(i_129634, block_sizze_129578);
                    bool index_certs_129644;
                    
                    if (!y_129643) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129634, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double gt_arg1_129642 = ((double *) mem_139599)[gt_arg1_129637];
                    double gt_arg0_129645 = ((double *) mem_139599)[i_129634];
                    bool defunc_0_leq_res_129646 = gt_arg0_129645 <= gt_arg1_129642;
                    bool defunc_0_lifted_gt_res_129647 = !defunc_0_leq_res_129646;
                    bool s_129648;
                    int64_t s_129651;
                    bool loop_while_129652;
                    int64_t j_129655;
                    
                    loop_while_129652 = defunc_0_lifted_gt_res_129647;
                    j_129655 = i_129634;
                    while (loop_while_129652) {
                        bool x_129656 = sle64((int64_t) 0, j_129655);
                        bool y_129657 = slt64(j_129655, block_sizze_129578);
                        bool bounds_check_129658 = x_129656 && y_129657;
                        bool index_certs_129659;
                        
                        if (!bounds_check_129658) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129655, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129662 = add64((int64_t) 1, j_129655);
                        bool x_129663 = sle64((int64_t) 0, copy_arg0_129662);
                        bool y_129664 = slt64(copy_arg0_129662, block_sizze_129578);
                        bool bounds_check_129665 = x_129663 && y_129664;
                        bool index_certs_129666;
                        
                        if (!bounds_check_129665) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129662, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double copy_arg0_129660 = ((double *) mem_139599)[j_129655];
                        int64_t copy_arg0_129661 = ((int64_t *) mem_139601)[j_129655];
                        double copy_arg0_129667 = ((double *) mem_139599)[copy_arg0_129662];
                        int64_t copy_arg0_129668 = ((int64_t *) mem_139601)[copy_arg0_129662];
                        
                        ((double *) mem_139599)[j_129655] = copy_arg0_129667;
                        ((int64_t *) mem_139601)[j_129655] = copy_arg0_129668;
                        ((double *) mem_139599)[copy_arg0_129662] = copy_arg0_129660;
                        ((int64_t *) mem_139601)[copy_arg0_129662] = copy_arg0_129661;
                        
                        int64_t tmp_129673 = sub64(j_129655, (int64_t) 1);
                        bool cond_129674 = sle64((int64_t) 0, tmp_129673);
                        bool loop_cond_129675;
                        
                        if (cond_129674) {
                            bool y_131664 = slt64(tmp_129673, block_sizze_129578);
                            bool bounds_check_131665 = cond_129674 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129673, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double gt_arg1_131663 = ((double *) mem_139599)[j_129655];
                            double gt_arg0_131667 = ((double *) mem_139599)[tmp_129673];
                            bool defunc_0_leq_res_131668 = gt_arg0_131667 <= gt_arg1_131663;
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129675 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129675 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129675;
                        int64_t j_tmp_140337 = tmp_129673;
                        
                        loop_while_129652 = loop_while_tmp_140334;
                        j_129655 = j_tmp_140337;
                    }
                    s_129648 = loop_while_129652;
                    s_129651 = j_129655;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139586, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        if (memblock_alloc(ctx, &mem_139658, bytes_139585, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        
        int64_t data_129688;
        bool data_129689;
        int64_t data_129692;
        int64_t loop_dz2084Uz2082U_129693;
        bool loop_while_129694;
        int64_t stride_129697;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129693 = flat_dim_129579;
        loop_while_129694 = loop_cond_129685;
        stride_129697 = block_sizze_129578;
        while (loop_while_129694) {
            int64_t next_stride_129698 = mul64((int64_t) 2, stride_129697);
            bool zzero_129699 = next_stride_129698 == (int64_t) 0;
            bool nonzzero_129700 = !zzero_129699;
            bool nonzzero_cert_129701;
            
            if (!nonzzero_129700) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:117:36-40\n   #5  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129702 = sdiv64(flat_dim_129579, next_stride_129698);
            bool bounds_invalid_upwards_129703 = slt64(num_merges_129702, (int64_t) 0);
            bool valid_129704 = !bounds_invalid_upwards_129703;
            bool range_valid_c_129705;
            
            if (!valid_129704) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129702, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:117:36-40\n   #6  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129707 = sub64(next_stride_129698, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129708 = sle64((int64_t) 0, m_129707);
            bool cond_129710 = slt64(next_stride_129698, (int64_t) 10);
            bool protect_assert_disj_129711 = nonzzero_129687 || cond_129710;
            bool nonzzero_cert_129712;
            
            if (!protect_assert_disj_129711) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129713 = smod_safe64(next_stride_129698, merge_block_sizze_129583);
            bool num_blocks_129714 = zeze_lhs_129713 == (int64_t) 0;
            bool protect_assert_disj_129715 = cond_129710 || num_blocks_129714;
            bool assert_c_129716;
            
            if (!protect_assert_disj_129715) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129718 = sdiv_safe64(next_stride_129698, merge_block_sizze_129583);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719 = add64((int64_t) 1, num_blocks_129718);
            int64_t j_m_i_129720 = sub64(next_stride_129698, stride_129697);
            int64_t flat_dim_129721 = merge_block_sizze_129583 * num_blocks_129718;
            bool bounds_invalid_upwards_129722 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, (int64_t) 0);
            bool empty_slice_129723 = j_m_i_129720 == (int64_t) 0;
            int64_t m_129724 = sub64(j_m_i_129720, (int64_t) 1);
            bool zzero_lte_i_129725 = sle64((int64_t) 0, stride_129697);
            bool i_lte_j_129726 = sle64(stride_129697, next_stride_129698);
            bool empty_slice_129727 = stride_129697 == (int64_t) 0;
            int64_t m_129728 = sub64(stride_129697, (int64_t) 1);
            bool bounds_invalid_upwards_129729 = slt64(num_blocks_129718, (int64_t) 0);
            bool cond_129730 = slt64((int64_t) 0, stride_129697);
            bool valid_129731 = !bounds_invalid_upwards_129722;
            int64_t i_p_m_t_s_129732 = add64(stride_129697, m_129724);
            bool zzero_leq_i_p_m_t_s_129733 = sle64((int64_t) 0, m_129728);
            bool i_p_m_t_s_leq_w_129734 = slt64(m_129728, next_stride_129698);
            bool valid_129735 = !bounds_invalid_upwards_129729;
            bool i_p_m_t_s_leq_w_129736 = slt64(m_129707, flat_dim_129721);
            bool y_129737 = slt64((int64_t) 0, j_m_i_129720);
            bool protect_assert_disj_129738 = cond_129710 || valid_129731;
            bool range_valid_c_129739;
            
            if (!protect_assert_disj_129738) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:117:36-40\n   #10 ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129740 = sle64((int64_t) 0, i_p_m_t_s_129732);
            bool i_p_m_t_s_leq_w_129741 = slt64(i_p_m_t_s_129732, next_stride_129698);
            bool y_129742 = zzero_leq_i_p_m_t_s_129733 && i_p_m_t_s_leq_w_129734;
            bool protect_assert_disj_129743 = cond_129710 || valid_129735;
            bool range_valid_c_129744;
            
            if (!protect_assert_disj_129743) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129718, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129745 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129736;
            bool y_129746 = zzero_lte_i_129725 && i_p_m_t_s_leq_w_129741;
            bool forwards_ok_129747 = zzero_lte_i_129725 && y_129742;
            bool ok_or_empty_129748 = zzero_129699 || y_129745;
            bool protect_assert_disj_129749 = cond_129730 || y_129737;
            bool y_129750 = zzero_leq_i_p_m_t_s_129740 && y_129746;
            bool ok_or_empty_129751 = empty_slice_129727 || forwards_ok_129747;
            bool protect_assert_disj_129752 = cond_129710 || ok_or_empty_129748;
            bool index_certs_129753;
            
            if (!protect_assert_disj_129752) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) flat_dim_129721, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129754 = !cond_129710;
            bool protect_assert_disj_129755 = protect_assert_disj_129749 || loop_not_taken_129754;
            bool index_certs_129756;
            
            if (!protect_assert_disj_129755) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:117:36-40\n   #10 ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129757 = i_lte_j_129726 && y_129750;
            bool protect_assert_disj_129758 = cond_129710 || ok_or_empty_129751;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:117:36-40\n   #11 ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129760 = ok_or_empty_129751 || loop_not_taken_129754;
            bool index_certs_129761;
            
            if (!protect_assert_disj_129760) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129762 = empty_slice_129723 || forwards_ok_129757;
            bool protect_assert_disj_129763 = cond_129710 || ok_or_empty_129762;
            bool index_certs_129764;
            
            if (!protect_assert_disj_129763) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:117:36-40\n   #11 ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129765 = loop_not_taken_129754 || ok_or_empty_129762;
            bool index_certs_129766;
            
            if (!protect_assert_disj_129765) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 8 * num_merges_129702;
            int64_t bytes_139667 = next_stride_129698 * binop_x_139666;
            bool i_lte_j_129709 = sle64((int64_t) 0, next_stride_129698);
            
            if (mem_139668_cached_sizze_140799 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140799, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140800 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140800, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719;
            int64_t binop_x_139696 = (int64_t) 8 * num_blocks_129718;
            int64_t bytes_139697 = merge_block_sizze_129583 * binop_x_139696;
            int64_t bytes_139742 = (int64_t) 16 * stride_129697;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129702; i_139398++) {
                int64_t start_129770 = mul64(next_stride_129698, i_139398);
                int64_t j_m_i_129771 = sub64(loop_dz2084Uz2082U_129693, start_129770);
                bool empty_slice_129772 = j_m_i_129771 == (int64_t) 0;
                int64_t m_129773 = sub64(j_m_i_129771, (int64_t) 1);
                int64_t i_p_m_t_s_129774 = add64(start_129770, m_129773);
                bool zzero_leq_i_p_m_t_s_129775 = sle64((int64_t) 0, i_p_m_t_s_129774);
                bool i_p_m_t_s_leq_w_129776 = slt64(i_p_m_t_s_129774, loop_dz2084Uz2082U_129693);
                bool zzero_lte_i_129777 = sle64((int64_t) 0, start_129770);
                bool i_lte_j_129778 = sle64(start_129770, loop_dz2084Uz2082U_129693);
                bool y_129779 = i_p_m_t_s_leq_w_129776 && zzero_lte_i_129777;
                bool y_129780 = zzero_leq_i_p_m_t_s_129775 && y_129779;
                bool forwards_ok_129781 = i_lte_j_129778 && y_129780;
                bool ok_or_empty_129782 = empty_slice_129772 || forwards_ok_129781;
                bool index_certs_129783;
                
                if (!ok_or_empty_129782) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129770, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129693, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129784 = slt64(m_129707, j_m_i_129771);
                bool y_129785 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129784;
                bool forwards_ok_129786 = i_lte_j_129709 && y_129785;
                bool ok_or_empty_129787 = zzero_129699 || forwards_ok_129786;
                bool index_certs_129788;
                
                if (!ok_or_empty_129787) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) j_m_i_129771, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:117:36-40\n   #8  ftRelational.fut:114:9-117:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129710) {
                    double dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129730) {
                        double head_res_131697 = ((double *) mem_param_139662.mem)[start_129770];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129770];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129697 + start_129770;
                        double head_res_131700 = ((double *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129698; nest_i_140347++) {
                        ((double *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139742, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129698; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129698; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129720;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129697);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129720);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129697 + j_131711;
                                int64_t slice_131721 = start_129770 + slice_131720;
                                double leq_arg1_131722 = ((double *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129770 + i_131708;
                                double leq_arg0_131727 = ((double *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = leq_arg0_131727 <= leq_arg1_131722;
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        double loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129697);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129770 + i_131708;
                            double tmp_131738 = ((double *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129720);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:117:36-40\n   #9  ftRelational.fut:114:9-117:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129697 + j_131711;
                            int64_t slice_131745 = start_129770 + slice_131744;
                            double tmp_131746 = ((double *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((double *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140801 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140801, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140802 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140802, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719; i_139384++) {
                        int64_t split_count_arg3_129850 = mul64(merge_block_sizze_129583, i_139384);
                        int64_t defunc_0_split_count_res_129851;
                        int64_t defunc_0_split_count_res_129852;
                        int64_t defunc_0_split_count_res_129853;
                        int64_t defunc_0_split_count_res_129854;
                        int64_t defunc_0_split_count_res_129855;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129851, &defunc_0_split_count_res_129852, &defunc_0_split_count_res_129853, &defunc_0_split_count_res_129854, &defunc_0_split_count_res_129855, (int64_t) 0, stride_129697, (int64_t) 0, j_m_i_129720, split_count_arg3_129850) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129856 = slt64((int64_t) 0, defunc_0_split_count_res_129855);
                        bool defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        int64_t defunc_0_split_count_res_129862;
                        bool loop_while_129863;
                        int64_t ss_129864;
                        int64_t ss_129865;
                        int64_t tt_129866;
                        int64_t tt_129867;
                        int64_t count_129868;
                        
                        loop_while_129863 = loop_cond_129856;
                        ss_129864 = defunc_0_split_count_res_129851;
                        ss_129865 = defunc_0_split_count_res_129852;
                        tt_129866 = defunc_0_split_count_res_129853;
                        tt_129867 = defunc_0_split_count_res_129854;
                        count_129868 = defunc_0_split_count_res_129855;
                        while (loop_while_129863) {
                            int64_t zlze_lhs_129869 = sub64(ss_129865, ss_129864);
                            bool cond_129870 = sle64(zlze_lhs_129869, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129871;
                            int64_t defunc_0_lifted_step_res_129872;
                            int64_t defunc_0_lifted_step_res_129873;
                            int64_t defunc_0_lifted_step_res_129874;
                            
                            if (cond_129870) {
                                int64_t tmp_131750 = add64(tt_129866, count_129868);
                                
                                defunc_0_lifted_step_res_129871 = ss_129864;
                                defunc_0_lifted_step_res_129872 = tmp_131750;
                                defunc_0_lifted_step_res_129873 = tt_129867;
                                defunc_0_lifted_step_res_129874 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129876 = sub64(tt_129867, tt_129866);
                                bool cond_129877 = sle64(zlze_lhs_129876, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129878;
                                int64_t defunc_0_lifted_step_res_f_res_129879;
                                int64_t defunc_0_lifted_step_res_f_res_129880;
                                int64_t defunc_0_lifted_step_res_f_res_129881;
                                
                                if (cond_129877) {
                                    int64_t tmp_131751 = add64(ss_129864, count_129868);
                                    
                                    defunc_0_lifted_step_res_f_res_129878 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129879 = tt_129866;
                                    defunc_0_lifted_step_res_f_res_129880 = tt_129867;
                                    defunc_0_lifted_step_res_f_res_129881 = (int64_t) 0;
                                } else {
                                    bool cond_129883 = count_129868 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129884;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129885;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129886;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129887;
                                    
                                    if (cond_129883) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129864);
                                        bool y_131754 = slt64(ss_129864, stride_129697);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129864, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:117:36-40\n   #13 ftRelational.fut:114:9-117:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129866);
                                        bool y_131760 = slt64(tt_129866, j_m_i_129720);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129866, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:117:36-40\n   #13 ftRelational.fut:114:9-117:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129770 + ss_129864;
                                        double leq_arg1_131758 = ((double *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129697 + tt_129866;
                                        int64_t slice_131764 = start_129770 + slice_131763;
                                        double leq_arg0_131765 = ((double *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = leq_arg0_131765 <= leq_arg1_131758;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129866);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129864;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129864);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129866;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = tt_129867;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = (int64_t) 0;
                                    } else {
                                        int64_t m_129906 = sdiv64(count_129868, (int64_t) 2);
                                        int64_t n_129907 = sub64(count_129868, m_129906);
                                        bool cond_129908 = n_129907 == (int64_t) 0;
                                        int64_t zgze_lhs_129909 = add64(ss_129864, m_129906);
                                        bool cond_f_res_129910 = sle64(ss_129865, zgze_lhs_129909);
                                        bool x_129911 = !cond_129908;
                                        bool y_129912 = cond_f_res_129910 && x_129911;
                                        bool cond_129913 = cond_129908 || y_129912;
                                        bool leq_y_x_129914;
                                        
                                        if (cond_129913) {
                                            leq_y_x_129914 = 1;
                                        } else {
                                            bool x_129915 = sle64((int64_t) 0, zgze_lhs_129909);
                                            bool y_129916 = slt64(zgze_lhs_129909, stride_129697);
                                            bool bounds_check_129917 = x_129915 && y_129916;
                                            bool index_certs_129918;
                                            
                                            if (!bounds_check_129917) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129909, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:117:36-40\n   #13 ftRelational.fut:114:9-117:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129921 = add64(tt_129866, n_129907);
                                            int64_t leq_arg0_129922 = sub64(zm_lhs_129921, (int64_t) 1);
                                            bool x_129923 = sle64((int64_t) 0, leq_arg0_129922);
                                            bool y_129924 = slt64(leq_arg0_129922, j_m_i_129720);
                                            bool bounds_check_129925 = x_129923 && y_129924;
                                            bool index_certs_129926;
                                            
                                            if (!bounds_check_129925) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129922, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:117:36-40\n   #13 ftRelational.fut:114:9-117:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129919 = start_129770 + zgze_lhs_129909;
                                            double leq_arg1_129920 = ((double *) mem_param_139662.mem)[slice_129919];
                                            int64_t slice_129927 = stride_129697 + leq_arg0_129922;
                                            int64_t slice_129928 = start_129770 + slice_129927;
                                            double leq_arg0_129929 = ((double *) mem_param_139662.mem)[slice_129928];
                                            bool defunc_0_leq_res_129930 = leq_arg0_129929 <= leq_arg1_129920;
                                            
                                            leq_y_x_129914 = defunc_0_leq_res_129930;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                        
                                        if (leq_y_x_129914) {
                                            int64_t tmp_131771 = add64(tt_129866, n_129907);
                                            int64_t tmp_131772 = sub64(count_129868, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tt_129867;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = tmp_131772;
                                        } else {
                                            int64_t tmp_129936 = add64(tt_129866, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tt_129866;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tmp_129936;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = count_129868;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = ss_129864;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                    }
                                    defunc_0_lifted_step_res_f_res_129878 = defunc_0_lifted_step_res_f_res_f_res_129884;
                                    defunc_0_lifted_step_res_f_res_129879 = defunc_0_lifted_step_res_f_res_f_res_129885;
                                    defunc_0_lifted_step_res_f_res_129880 = defunc_0_lifted_step_res_f_res_f_res_129886;
                                    defunc_0_lifted_step_res_f_res_129881 = defunc_0_lifted_step_res_f_res_f_res_129887;
                                }
                                defunc_0_lifted_step_res_129871 = defunc_0_lifted_step_res_f_res_129878;
                                defunc_0_lifted_step_res_129872 = defunc_0_lifted_step_res_f_res_129879;
                                defunc_0_lifted_step_res_129873 = defunc_0_lifted_step_res_f_res_129880;
                                defunc_0_lifted_step_res_129874 = defunc_0_lifted_step_res_f_res_129881;
                            }
                            
                            int64_t loopres_129937;
                            int64_t loopres_129938;
                            int64_t loopres_129939;
                            int64_t loopres_129940;
                            int64_t loopres_129941;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129937, &loopres_129938, &loopres_129939, &loopres_129940, &loopres_129941, defunc_0_lifted_step_res_129871, ss_129865, defunc_0_lifted_step_res_129872, defunc_0_lifted_step_res_129873, defunc_0_lifted_step_res_129874) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129942 = slt64((int64_t) 0, loopres_129941);
                            bool loop_while_tmp_140354 = loop_cond_129942;
                            int64_t ss_tmp_140355 = loopres_129937;
                            int64_t ss_tmp_140356 = loopres_129938;
                            int64_t tt_tmp_140357 = loopres_129939;
                            int64_t tt_tmp_140358 = loopres_129940;
                            int64_t count_tmp_140359 = loopres_129941;
                            
                            loop_while_129863 = loop_while_tmp_140354;
                            ss_129864 = ss_tmp_140355;
                            ss_129865 = ss_tmp_140356;
                            tt_129866 = tt_tmp_140357;
                            tt_129867 = tt_tmp_140358;
                            count_129868 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129857 = loop_while_129863;
                        defunc_0_split_count_res_129858 = ss_129864;
                        defunc_0_split_count_res_129859 = ss_129865;
                        defunc_0_split_count_res_129860 = tt_129866;
                        defunc_0_split_count_res_129861 = tt_129867;
                        defunc_0_split_count_res_129862 = count_129868;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129858;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129860;
                    }
                    if (mem_139698_cached_sizze_140803 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140803, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140804 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140804, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129718; i_139391++) {
                        bool y_129948 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool index_certs_129950;
                        
                        if (!y_129948) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:117:36-40\n   #10 ftRelational.fut:114:9-117:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129951 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129952 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129953 = add64((int64_t) 1, i_139391);
                        bool x_129954 = sle64((int64_t) 0, tmp_129953);
                        bool y_129955 = slt64(tmp_129953, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool bounds_check_129956 = x_129954 && y_129955;
                        bool index_certs_129957;
                        
                        if (!bounds_check_129956) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129953, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:117:36-40\n   #10 ftRelational.fut:114:9-117:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139681)[tmp_129953];
                        int64_t defunc_0_f_res_129959 = ((int64_t *) mem_139683)[tmp_129953];
                        int64_t merge_sequential_arg2_129960 = add64(stride_129697, defunc_0_f_res_129952);
                        int64_t merge_sequential_arg2_129961 = add64(stride_129697, defunc_0_f_res_129959);
                        int64_t j_m_i_129962 = sub64(merge_sequential_arg2_129961, merge_sequential_arg2_129960);
                        bool empty_slice_129963 = j_m_i_129962 == (int64_t) 0;
                        int64_t m_129964 = sub64(j_m_i_129962, (int64_t) 1);
                        int64_t i_p_m_t_s_129965 = add64(merge_sequential_arg2_129960, m_129964);
                        bool zzero_leq_i_p_m_t_s_129966 = sle64((int64_t) 0, i_p_m_t_s_129965);
                        bool i_p_m_t_s_leq_w_129967 = slt64(i_p_m_t_s_129965, next_stride_129698);
                        bool zzero_lte_i_129968 = sle64((int64_t) 0, merge_sequential_arg2_129960);
                        bool i_lte_j_129969 = sle64(merge_sequential_arg2_129960, merge_sequential_arg2_129961);
                        bool y_129970 = i_p_m_t_s_leq_w_129967 && zzero_lte_i_129968;
                        bool y_129971 = zzero_leq_i_p_m_t_s_129966 && y_129970;
                        bool forwards_ok_129972 = i_lte_j_129969 && y_129971;
                        bool ok_or_empty_129973 = empty_slice_129963 || forwards_ok_129972;
                        bool index_certs_129974;
                        
                        if (!ok_or_empty_129973) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129960, ":", (long long) merge_sequential_arg2_129961, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:117:36-40\n   #10 ftRelational.fut:114:9-117:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129975 = sub64(defunc_0_f_res_129958, defunc_0_f_res_129951);
                        bool empty_slice_129976 = j_m_i_129975 == (int64_t) 0;
                        int64_t m_129977 = sub64(j_m_i_129975, (int64_t) 1);
                        int64_t i_p_m_t_s_129978 = add64(defunc_0_f_res_129951, m_129977);
                        bool zzero_leq_i_p_m_t_s_129979 = sle64((int64_t) 0, i_p_m_t_s_129978);
                        bool i_p_m_t_s_leq_w_129980 = slt64(i_p_m_t_s_129978, next_stride_129698);
                        bool zzero_lte_i_129981 = sle64((int64_t) 0, defunc_0_f_res_129951);
                        bool i_lte_j_129982 = sle64(defunc_0_f_res_129951, defunc_0_f_res_129958);
                        bool y_129983 = i_p_m_t_s_leq_w_129980 && zzero_lte_i_129981;
                        bool y_129984 = zzero_leq_i_p_m_t_s_129979 && y_129983;
                        bool forwards_ok_129985 = i_lte_j_129982 && y_129984;
                        bool ok_or_empty_129986 = empty_slice_129976 || forwards_ok_129985;
                        bool index_certs_129987;
                        
                        if (!ok_or_empty_129986) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129951, ":", (long long) defunc_0_f_res_129958, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:117:36-40\n   #10 ftRelational.fut:114:9-117:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129988 = slt64((int64_t) 0, j_m_i_129975);
                        double dummy_129989;
                        int64_t dummy_129990;
                        
                        if (cond_129988) {
                            bool index_certs_131773;
                            
                            if (!cond_129988) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:117:36-40\n   #12 ftRelational.fut:114:9-117:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129770 + defunc_0_f_res_129951;
                            double head_res_131775 = ((double *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129989 = head_res_131775;
                            dummy_129990 = head_res_131776;
                        } else {
                            bool y_129995 = slt64((int64_t) 0, j_m_i_129962);
                            bool index_certs_129996;
                            
                            if (!y_129995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:117:36-40\n   #12 ftRelational.fut:114:9-117:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_129997 = start_129770 + merge_sequential_arg2_129960;
                            double head_res_129998 = ((double *) mem_param_139662.mem)[slice_129997];
                            int64_t head_res_129999 = ((int64_t *) mem_param_139665.mem)[slice_129997];
                            
                            dummy_129989 = head_res_129998;
                            dummy_129990 = head_res_129999;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129583; nest_i_140362++) {
                            ((double *) mem_139698)[i_139391 * merge_block_sizze_129583 + nest_i_140362] = dummy_129989;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129583; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + nest_i_140363] = dummy_129990;
                        }
                        
                        int64_t data_130002;
                        int64_t i_130006 = (int64_t) 0;
                        
                        for (int64_t k_130005 = 0; k_130005 < merge_block_sizze_129583; k_130005++) {
                            int64_t j_130009 = sub64(k_130005, i_130006);
                            bool cond_130010 = j_130009 == j_m_i_129962;
                            bool cond_130011;
                            
                            if (cond_130010) {
                                cond_130011 = 1;
                            } else {
                                bool cond_130012 = slt64(i_130006, j_m_i_129975);
                                bool cond_f_res_130013;
                                
                                if (cond_130012) {
                                    bool x_131777 = sle64((int64_t) 0, j_130009);
                                    bool y_131778 = slt64(j_130009, j_m_i_129962);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:117:36-40\n   #11 ftRelational.fut:114:9-117:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130006);
                                    bool bounds_check_131785 = cond_130012 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:117:36-40\n   #11 ftRelational.fut:114:9-117:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129960 + j_130009;
                                    int64_t slice_131782 = start_129770 + slice_131781;
                                    double leq_arg1_131783 = ((double *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129951 + i_130006;
                                    int64_t slice_131788 = start_129770 + slice_131787;
                                    double leq_arg0_131789 = ((double *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = leq_arg0_131789 <= leq_arg1_131783;
                                    
                                    cond_f_res_130013 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130013 = 0;
                                }
                                cond_130011 = cond_f_res_130013;
                            }
                            
                            int64_t loopres_130028;
                            double loopres_130029;
                            int64_t loopres_130030;
                            
                            if (cond_130011) {
                                bool x_131792 = sle64((int64_t) 0, i_130006);
                                bool y_131793 = slt64(i_130006, j_m_i_129975);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:117:36-40\n   #11 ftRelational.fut:114:9-117:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130006);
                                int64_t slice_131796 = defunc_0_f_res_129951 + i_130006;
                                int64_t slice_131797 = start_129770 + slice_131796;
                                double tmp_131798 = ((double *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130028 = tmp_131791;
                                loopres_130029 = tmp_131798;
                                loopres_130030 = tmp_131799;
                            } else {
                                bool x_130040 = sle64((int64_t) 0, j_130009);
                                bool y_130041 = slt64(j_130009, j_m_i_129962);
                                bool bounds_check_130042 = x_130040 && y_130041;
                                bool index_certs_130043;
                                
                                if (!bounds_check_130042) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:117:36-40\n   #11 ftRelational.fut:114:9-117:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130044 = merge_sequential_arg2_129960 + j_130009;
                                int64_t slice_130045 = start_129770 + slice_130044;
                                double tmp_130046 = ((double *) mem_param_139662.mem)[slice_130045];
                                int64_t tmp_130047 = ((int64_t *) mem_param_139665.mem)[slice_130045];
                                
                                loopres_130028 = i_130006;
                                loopres_130029 = tmp_130046;
                                loopres_130030 = tmp_130047;
                            }
                            ((double *) mem_139698)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130029;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130030;
                            
                            int64_t i_tmp_140364 = loopres_130028;
                            
                            i_130006 = i_tmp_140364;
                        }
                        data_130002 = i_130006;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139697, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139668, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130054 = next_stride_129698 * num_merges_129702;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            if (memblock_alloc(ctx, &mem_139778, bytes_139667, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            
            bool loop_cond_130057 = slt64(next_stride_129698, flat_dim_129579);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130054;
            bool loop_while_tmp_140341 = loop_cond_130057;
            int64_t stride_tmp_140344 = next_stride_129698;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129693 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129694 = loop_while_tmp_140341;
            stride_129697 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129688 = loop_dz2084Uz2082U_129693;
        data_129689 = loop_while_129694;
        data_129692 = stride_129697;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130058 = n_84345 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130059 = sle64((int64_t) 0, zs_lhs_129563);
        bool i_p_m_t_s_leq_w_130060 = slt64(zs_lhs_129563, data_129688);
        bool y_130061 = zzero_leq_i_p_m_t_s_130059 && i_p_m_t_s_leq_w_130060;
        bool ok_or_empty_130062 = empty_slice_130058 || y_130061;
        bool index_certs_130063;
        
        if (!ok_or_empty_130062) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_84345, "] out of bounds for array of shape [", (long long) data_129688, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:117:36-40\n   #6  ftRelational.fut:114:9-117:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_84345; i_139405++) {
        int64_t eta_p_130071 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130072 = sle64((int64_t) 0, eta_p_130071);
        bool y_130073 = slt64(eta_p_130071, n_84345);
        bool bounds_check_130074 = x_130072 && y_130073;
        bool index_certs_130075;
        
        if (!bounds_check_130074) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130071, "] out of bounds for array of shape [", (long long) n_84345, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:117:36-40\n   #5  ftRelational.fut:114:9-117:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        double lifted_lambda_res_130076 = ((double *) k_mem_139580.mem)[eta_p_130071];
        
        ((double *) mem_139790.mem)[i_139405] = lifted_lambda_res_130076;
        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139792.mem, i_139405 * b_84346, (int64_t []) {(int64_t) 1}, (uint8_t *) pL_mem_139581.mem, eta_p_130071 * b_84346, (int64_t []) {(int64_t) 1}, (int64_t []) {b_84346});
    }
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140793, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140794, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_float(struct futhark_context *ctx, struct memblock *mem_out_p_140805, struct memblock *mem_out_p_140806, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_81980, int64_t b_81981)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140807 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140808 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140809 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140810 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140811 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140812 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140813 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140814 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140815 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140816 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_81980;
    bool cond_129562 = sle64(n_81980, (int64_t) 1);
    int64_t zs_lhs_129563 = sub64(n_81980, (int64_t) 1);
    int64_t zp_rhs_129564 = sdiv_safe64(zs_lhs_129563, (int64_t) 20);
    int64_t min_num_blocks_129565 = add64((int64_t) 1, zp_rhs_129564);
    bool loop_cond_129566 = slt64((int64_t) 1, min_num_blocks_129565);
    bool smallest_pow_2_geq_than_res_129567;
    int64_t smallest_pow_2_geq_than_res_129568;
    bool loop_while_129569;
    int64_t x_129570;
    
    loop_while_129569 = loop_cond_129566;
    x_129570 = (int64_t) 1;
    while (loop_while_129569) {
        int64_t loopres_129571 = mul64((int64_t) 2, x_129570);
        bool loop_cond_129572 = slt64(loopres_129571, min_num_blocks_129565);
        bool loop_while_tmp_140322 = loop_cond_129572;
        int64_t x_tmp_140323 = loopres_129571;
        
        loop_while_129569 = loop_while_tmp_140322;
        x_129570 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129567 = loop_while_129569;
    smallest_pow_2_geq_than_res_129568 = x_129570;
    
    bool zzero_129573 = smallest_pow_2_geq_than_res_129568 == (int64_t) 0;
    bool nonzzero_129574 = !zzero_129573;
    bool protect_assert_disj_129575 = cond_129562 || nonzzero_129574;
    bool nonzzero_cert_129576;
    
    if (!protect_assert_disj_129575) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:113:36-40\n   #5  ftRelational.fut:110:9-113:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129577 = sdiv_safe64(zs_lhs_129563, smallest_pow_2_geq_than_res_129568);
    int64_t block_sizze_129578 = add64((int64_t) 1, zp_rhs_129577);
    bool y_129584 = slt64((int64_t) 0, n_81980);
    bool protect_assert_disj_140188 = cond_129562 || y_129584;
    bool index_certs_129585;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_81980, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:113:36-40\n   #5  ftRelational.fut:110:9-113:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129599 = slt64(smallest_pow_2_geq_than_res_129568, (int64_t) 0);
    bool valid_129600 = !bounds_invalid_upwards_129599;
    bool protect_assert_disj_140196 = cond_129562 || valid_129600;
    bool range_valid_c_129601;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129568, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:113:36-40\n   #6  ftRelational.fut:110:9-113:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129603 = slt64(block_sizze_129578, (int64_t) 0);
    bool valid_129604 = !bounds_invalid_upwards_129603;
    bool protect_assert_disj_140198 = cond_129562 || valid_129604;
    bool range_valid_c_129605;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129578, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129607 = sle64(block_sizze_129578, (int64_t) 1);
    int64_t tmp_129608 = sub64(block_sizze_129578, (int64_t) 2);
    bool bounds_invalid_upwards_129609 = slt64(tmp_129608, (int64_t) 0);
    bool valid_129611 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_129612 = cond_129607 || valid_129611;
    bool protect_assert_disj_140200 = cond_129562 || protect_assert_disj_129612;
    bool range_valid_c_129613;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129608, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139789 = (int64_t) 4 * n_81980;
    int64_t bytes_139791 = n_81980 * b_81981;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_81980; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129579 = smallest_pow_2_geq_than_res_129568 * block_sizze_129578;
    bool x_140183 = !cond_129562;
    int64_t greatest_divisor_leq_than_arg1_129582 = mul64((int64_t) 2, block_sizze_129578);
    int64_t merge_block_sizze_129583;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129582) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129583 = x_140185;
    } else {
        merge_block_sizze_129583 = (int64_t) 0;
    }
    
    float reduce_arg1_129586;
    
    if (x_140183) {
        float x_140189 = ((float *) k_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129586 = x_140189;
    } else {
        reduce_arg1_129586 = 0.0F;
    }
    
    float defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        float x_140191;
        int64_t x_140192;
        float redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129586;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_81980; i_139365++) {
            float x_129590 = ((float *) k_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129596 = redout_139363 <= x_129590;
            float defunc_0_op_res_129597;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129597 = x_129590;
            } else {
                defunc_0_op_res_129597 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129598;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129598 = i_139365;
            } else {
                defunc_0_op_res_129598 = redout_139364;
            }
            
            float redout_tmp_140326 = defunc_0_op_res_129597;
            int64_t redout_tmp_140327 = defunc_0_op_res_129598;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = 0.0F;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129610 = add64((int64_t) 1, tmp_129608);
    int64_t binop_x_139584 = (int64_t) 4 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139585 = block_sizze_129578 * binop_x_139584;
    int64_t binop_x_139587 = (int64_t) 8 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139588 = block_sizze_129578 * binop_x_139587;
    int64_t bytes_139598 = (int64_t) 4 * block_sizze_129578;
    int64_t bytes_139600 = (int64_t) 8 * block_sizze_129578;
    bool loop_cond_129685 = slt64(block_sizze_129578, flat_dim_129579);
    bool zzero_129686 = merge_block_sizze_129583 == (int64_t) 0;
    bool nonzzero_129687 = !zzero_129686;
    
    if (cond_129562) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140807 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140807, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140808 < bytes_139588) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140808, bytes_139588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140809 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140809, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140810 < bytes_139600) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140810, bytes_139600);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129568; i_139377++) {
            int64_t zp_lhs_129617 = mul64(block_sizze_129578, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129578; i_139370++) {
                int64_t k_129621 = add64(zp_lhs_129617, i_139370);
                bool cond_129622 = slt64(k_129621, n_81980);
                float lifted_lambda_res_129623;
                int64_t lifted_lambda_res_129624;
                
                if (cond_129622) {
                    bool x_131659 = sle64((int64_t) 0, k_129621);
                    bool bounds_check_131660 = cond_129622 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129621, "] out of bounds for array of shape [", (long long) n_81980, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float lifted_lambda_res_t_res_131662 = ((float *) k_mem_139580.mem)[k_129621];
                    
                    lifted_lambda_res_129623 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129624 = k_129621;
                } else {
                    lifted_lambda_res_129623 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129624 = defunc_0_reduce_res_131807;
                }
                ((float *) mem_139599)[i_139370] = lifted_lambda_res_129623;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129624;
            }
            if (!cond_129607) {
                for (int64_t i_129634 = 0; i_129634 < distance_129610; i_129634++) {
                    int64_t gt_arg1_129637 = add64((int64_t) 1, i_129634);
                    bool x_129638 = sle64((int64_t) 0, gt_arg1_129637);
                    bool y_129639 = slt64(gt_arg1_129637, block_sizze_129578);
                    bool bounds_check_129640 = x_129638 && y_129639;
                    bool index_certs_129641;
                    
                    if (!bounds_check_129640) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129637, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129643 = slt64(i_129634, block_sizze_129578);
                    bool index_certs_129644;
                    
                    if (!y_129643) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129634, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float gt_arg1_129642 = ((float *) mem_139599)[gt_arg1_129637];
                    float gt_arg0_129645 = ((float *) mem_139599)[i_129634];
                    bool defunc_0_leq_res_129646 = gt_arg0_129645 <= gt_arg1_129642;
                    bool defunc_0_lifted_gt_res_129647 = !defunc_0_leq_res_129646;
                    bool s_129648;
                    int64_t s_129651;
                    bool loop_while_129652;
                    int64_t j_129655;
                    
                    loop_while_129652 = defunc_0_lifted_gt_res_129647;
                    j_129655 = i_129634;
                    while (loop_while_129652) {
                        bool x_129656 = sle64((int64_t) 0, j_129655);
                        bool y_129657 = slt64(j_129655, block_sizze_129578);
                        bool bounds_check_129658 = x_129656 && y_129657;
                        bool index_certs_129659;
                        
                        if (!bounds_check_129658) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129655, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129662 = add64((int64_t) 1, j_129655);
                        bool x_129663 = sle64((int64_t) 0, copy_arg0_129662);
                        bool y_129664 = slt64(copy_arg0_129662, block_sizze_129578);
                        bool bounds_check_129665 = x_129663 && y_129664;
                        bool index_certs_129666;
                        
                        if (!bounds_check_129665) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129662, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        float copy_arg0_129660 = ((float *) mem_139599)[j_129655];
                        int64_t copy_arg0_129661 = ((int64_t *) mem_139601)[j_129655];
                        float copy_arg0_129667 = ((float *) mem_139599)[copy_arg0_129662];
                        int64_t copy_arg0_129668 = ((int64_t *) mem_139601)[copy_arg0_129662];
                        
                        ((float *) mem_139599)[j_129655] = copy_arg0_129667;
                        ((int64_t *) mem_139601)[j_129655] = copy_arg0_129668;
                        ((float *) mem_139599)[copy_arg0_129662] = copy_arg0_129660;
                        ((int64_t *) mem_139601)[copy_arg0_129662] = copy_arg0_129661;
                        
                        int64_t tmp_129673 = sub64(j_129655, (int64_t) 1);
                        bool cond_129674 = sle64((int64_t) 0, tmp_129673);
                        bool loop_cond_129675;
                        
                        if (cond_129674) {
                            bool y_131664 = slt64(tmp_129673, block_sizze_129578);
                            bool bounds_check_131665 = cond_129674 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129673, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            float gt_arg1_131663 = ((float *) mem_139599)[j_129655];
                            float gt_arg0_131667 = ((float *) mem_139599)[tmp_129673];
                            bool defunc_0_leq_res_131668 = gt_arg0_131667 <= gt_arg1_131663;
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129675 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129675 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129675;
                        int64_t j_tmp_140337 = tmp_129673;
                        
                        loop_while_129652 = loop_while_tmp_140334;
                        j_129655 = j_tmp_140337;
                    }
                    s_129648 = loop_while_129652;
                    s_129651 = j_129655;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139586, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint32_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        if (memblock_alloc(ctx, &mem_139658, bytes_139588, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        
        int64_t data_129688;
        bool data_129689;
        int64_t data_129692;
        int64_t loop_dz2084Uz2082U_129693;
        bool loop_while_129694;
        int64_t stride_129697;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129693 = flat_dim_129579;
        loop_while_129694 = loop_cond_129685;
        stride_129697 = block_sizze_129578;
        while (loop_while_129694) {
            int64_t next_stride_129698 = mul64((int64_t) 2, stride_129697);
            bool zzero_129699 = next_stride_129698 == (int64_t) 0;
            bool nonzzero_129700 = !zzero_129699;
            bool nonzzero_cert_129701;
            
            if (!nonzzero_129700) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:113:36-40\n   #5  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129702 = sdiv64(flat_dim_129579, next_stride_129698);
            bool bounds_invalid_upwards_129703 = slt64(num_merges_129702, (int64_t) 0);
            bool valid_129704 = !bounds_invalid_upwards_129703;
            bool range_valid_c_129705;
            
            if (!valid_129704) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129702, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:113:36-40\n   #6  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129707 = sub64(next_stride_129698, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129708 = sle64((int64_t) 0, m_129707);
            bool cond_129710 = slt64(next_stride_129698, (int64_t) 10);
            bool protect_assert_disj_129711 = nonzzero_129687 || cond_129710;
            bool nonzzero_cert_129712;
            
            if (!protect_assert_disj_129711) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129713 = smod_safe64(next_stride_129698, merge_block_sizze_129583);
            bool num_blocks_129714 = zeze_lhs_129713 == (int64_t) 0;
            bool protect_assert_disj_129715 = cond_129710 || num_blocks_129714;
            bool assert_c_129716;
            
            if (!protect_assert_disj_129715) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129718 = sdiv_safe64(next_stride_129698, merge_block_sizze_129583);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719 = add64((int64_t) 1, num_blocks_129718);
            int64_t j_m_i_129720 = sub64(next_stride_129698, stride_129697);
            int64_t flat_dim_129721 = merge_block_sizze_129583 * num_blocks_129718;
            bool bounds_invalid_upwards_129722 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, (int64_t) 0);
            bool empty_slice_129723 = j_m_i_129720 == (int64_t) 0;
            int64_t m_129724 = sub64(j_m_i_129720, (int64_t) 1);
            bool zzero_lte_i_129725 = sle64((int64_t) 0, stride_129697);
            bool i_lte_j_129726 = sle64(stride_129697, next_stride_129698);
            bool empty_slice_129727 = stride_129697 == (int64_t) 0;
            int64_t m_129728 = sub64(stride_129697, (int64_t) 1);
            bool bounds_invalid_upwards_129729 = slt64(num_blocks_129718, (int64_t) 0);
            bool cond_129730 = slt64((int64_t) 0, stride_129697);
            bool valid_129731 = !bounds_invalid_upwards_129722;
            int64_t i_p_m_t_s_129732 = add64(stride_129697, m_129724);
            bool zzero_leq_i_p_m_t_s_129733 = sle64((int64_t) 0, m_129728);
            bool i_p_m_t_s_leq_w_129734 = slt64(m_129728, next_stride_129698);
            bool valid_129735 = !bounds_invalid_upwards_129729;
            bool i_p_m_t_s_leq_w_129736 = slt64(m_129707, flat_dim_129721);
            bool y_129737 = slt64((int64_t) 0, j_m_i_129720);
            bool protect_assert_disj_129738 = cond_129710 || valid_129731;
            bool range_valid_c_129739;
            
            if (!protect_assert_disj_129738) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:113:36-40\n   #10 ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129740 = sle64((int64_t) 0, i_p_m_t_s_129732);
            bool i_p_m_t_s_leq_w_129741 = slt64(i_p_m_t_s_129732, next_stride_129698);
            bool y_129742 = zzero_leq_i_p_m_t_s_129733 && i_p_m_t_s_leq_w_129734;
            bool protect_assert_disj_129743 = cond_129710 || valid_129735;
            bool range_valid_c_129744;
            
            if (!protect_assert_disj_129743) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129718, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129745 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129736;
            bool y_129746 = zzero_lte_i_129725 && i_p_m_t_s_leq_w_129741;
            bool forwards_ok_129747 = zzero_lte_i_129725 && y_129742;
            bool ok_or_empty_129748 = zzero_129699 || y_129745;
            bool protect_assert_disj_129749 = cond_129730 || y_129737;
            bool y_129750 = zzero_leq_i_p_m_t_s_129740 && y_129746;
            bool ok_or_empty_129751 = empty_slice_129727 || forwards_ok_129747;
            bool protect_assert_disj_129752 = cond_129710 || ok_or_empty_129748;
            bool index_certs_129753;
            
            if (!protect_assert_disj_129752) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) flat_dim_129721, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129754 = !cond_129710;
            bool protect_assert_disj_129755 = protect_assert_disj_129749 || loop_not_taken_129754;
            bool index_certs_129756;
            
            if (!protect_assert_disj_129755) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:113:36-40\n   #10 ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129757 = i_lte_j_129726 && y_129750;
            bool protect_assert_disj_129758 = cond_129710 || ok_or_empty_129751;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:113:36-40\n   #11 ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129760 = ok_or_empty_129751 || loop_not_taken_129754;
            bool index_certs_129761;
            
            if (!protect_assert_disj_129760) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129762 = empty_slice_129723 || forwards_ok_129757;
            bool protect_assert_disj_129763 = cond_129710 || ok_or_empty_129762;
            bool index_certs_129764;
            
            if (!protect_assert_disj_129763) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:113:36-40\n   #11 ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129765 = loop_not_taken_129754 || ok_or_empty_129762;
            bool index_certs_129766;
            
            if (!protect_assert_disj_129765) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 4 * num_merges_129702;
            int64_t bytes_139667 = next_stride_129698 * binop_x_139666;
            int64_t binop_x_139669 = (int64_t) 8 * num_merges_129702;
            int64_t bytes_139670 = next_stride_129698 * binop_x_139669;
            bool i_lte_j_129709 = sle64((int64_t) 0, next_stride_129698);
            
            if (mem_139668_cached_sizze_140811 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140811, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140812 < bytes_139670) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140812, bytes_139670);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719;
            int64_t binop_x_139696 = (int64_t) 4 * num_blocks_129718;
            int64_t bytes_139697 = merge_block_sizze_129583 * binop_x_139696;
            int64_t binop_x_139699 = (int64_t) 8 * num_blocks_129718;
            int64_t bytes_139700 = merge_block_sizze_129583 * binop_x_139699;
            int64_t bytes_139742 = (int64_t) 8 * stride_129697;
            int64_t bytes_139744 = (int64_t) 16 * stride_129697;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129702; i_139398++) {
                int64_t start_129770 = mul64(next_stride_129698, i_139398);
                int64_t j_m_i_129771 = sub64(loop_dz2084Uz2082U_129693, start_129770);
                bool empty_slice_129772 = j_m_i_129771 == (int64_t) 0;
                int64_t m_129773 = sub64(j_m_i_129771, (int64_t) 1);
                int64_t i_p_m_t_s_129774 = add64(start_129770, m_129773);
                bool zzero_leq_i_p_m_t_s_129775 = sle64((int64_t) 0, i_p_m_t_s_129774);
                bool i_p_m_t_s_leq_w_129776 = slt64(i_p_m_t_s_129774, loop_dz2084Uz2082U_129693);
                bool zzero_lte_i_129777 = sle64((int64_t) 0, start_129770);
                bool i_lte_j_129778 = sle64(start_129770, loop_dz2084Uz2082U_129693);
                bool y_129779 = i_p_m_t_s_leq_w_129776 && zzero_lte_i_129777;
                bool y_129780 = zzero_leq_i_p_m_t_s_129775 && y_129779;
                bool forwards_ok_129781 = i_lte_j_129778 && y_129780;
                bool ok_or_empty_129782 = empty_slice_129772 || forwards_ok_129781;
                bool index_certs_129783;
                
                if (!ok_or_empty_129782) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129770, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129693, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129784 = slt64(m_129707, j_m_i_129771);
                bool y_129785 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129784;
                bool forwards_ok_129786 = i_lte_j_129709 && y_129785;
                bool ok_or_empty_129787 = zzero_129699 || forwards_ok_129786;
                bool index_certs_129788;
                
                if (!ok_or_empty_129787) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) j_m_i_129771, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:113:36-40\n   #8  ftRelational.fut:110:9-113:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129710) {
                    float dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129730) {
                        float head_res_131697 = ((float *) mem_param_139662.mem)[start_129770];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129770];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129697 + start_129770;
                        float head_res_131700 = ((float *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129698; nest_i_140347++) {
                        ((float *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139744, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129698; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129698; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129720;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129697);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129720);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129697 + j_131711;
                                int64_t slice_131721 = start_129770 + slice_131720;
                                float leq_arg1_131722 = ((float *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129770 + i_131708;
                                float leq_arg0_131727 = ((float *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = leq_arg0_131727 <= leq_arg1_131722;
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        float loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129697);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129770 + i_131708;
                            float tmp_131738 = ((float *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129720);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:113:36-40\n   #9  ftRelational.fut:110:9-113:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129697 + j_131711;
                            int64_t slice_131745 = start_129770 + slice_131744;
                            float tmp_131746 = ((float *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((float *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140813 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140813, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140814 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140814, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719; i_139384++) {
                        int64_t split_count_arg3_129850 = mul64(merge_block_sizze_129583, i_139384);
                        int64_t defunc_0_split_count_res_129851;
                        int64_t defunc_0_split_count_res_129852;
                        int64_t defunc_0_split_count_res_129853;
                        int64_t defunc_0_split_count_res_129854;
                        int64_t defunc_0_split_count_res_129855;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129851, &defunc_0_split_count_res_129852, &defunc_0_split_count_res_129853, &defunc_0_split_count_res_129854, &defunc_0_split_count_res_129855, (int64_t) 0, stride_129697, (int64_t) 0, j_m_i_129720, split_count_arg3_129850) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129856 = slt64((int64_t) 0, defunc_0_split_count_res_129855);
                        bool defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        int64_t defunc_0_split_count_res_129862;
                        bool loop_while_129863;
                        int64_t ss_129864;
                        int64_t ss_129865;
                        int64_t tt_129866;
                        int64_t tt_129867;
                        int64_t count_129868;
                        
                        loop_while_129863 = loop_cond_129856;
                        ss_129864 = defunc_0_split_count_res_129851;
                        ss_129865 = defunc_0_split_count_res_129852;
                        tt_129866 = defunc_0_split_count_res_129853;
                        tt_129867 = defunc_0_split_count_res_129854;
                        count_129868 = defunc_0_split_count_res_129855;
                        while (loop_while_129863) {
                            int64_t zlze_lhs_129869 = sub64(ss_129865, ss_129864);
                            bool cond_129870 = sle64(zlze_lhs_129869, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129871;
                            int64_t defunc_0_lifted_step_res_129872;
                            int64_t defunc_0_lifted_step_res_129873;
                            int64_t defunc_0_lifted_step_res_129874;
                            
                            if (cond_129870) {
                                int64_t tmp_131750 = add64(tt_129866, count_129868);
                                
                                defunc_0_lifted_step_res_129871 = ss_129864;
                                defunc_0_lifted_step_res_129872 = tmp_131750;
                                defunc_0_lifted_step_res_129873 = tt_129867;
                                defunc_0_lifted_step_res_129874 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129876 = sub64(tt_129867, tt_129866);
                                bool cond_129877 = sle64(zlze_lhs_129876, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129878;
                                int64_t defunc_0_lifted_step_res_f_res_129879;
                                int64_t defunc_0_lifted_step_res_f_res_129880;
                                int64_t defunc_0_lifted_step_res_f_res_129881;
                                
                                if (cond_129877) {
                                    int64_t tmp_131751 = add64(ss_129864, count_129868);
                                    
                                    defunc_0_lifted_step_res_f_res_129878 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129879 = tt_129866;
                                    defunc_0_lifted_step_res_f_res_129880 = tt_129867;
                                    defunc_0_lifted_step_res_f_res_129881 = (int64_t) 0;
                                } else {
                                    bool cond_129883 = count_129868 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129884;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129885;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129886;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129887;
                                    
                                    if (cond_129883) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129864);
                                        bool y_131754 = slt64(ss_129864, stride_129697);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129864, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:113:36-40\n   #13 ftRelational.fut:110:9-113:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129866);
                                        bool y_131760 = slt64(tt_129866, j_m_i_129720);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129866, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:113:36-40\n   #13 ftRelational.fut:110:9-113:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129770 + ss_129864;
                                        float leq_arg1_131758 = ((float *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129697 + tt_129866;
                                        int64_t slice_131764 = start_129770 + slice_131763;
                                        float leq_arg0_131765 = ((float *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = leq_arg0_131765 <= leq_arg1_131758;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129866);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129864;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129864);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129866;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = tt_129867;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = (int64_t) 0;
                                    } else {
                                        int64_t m_129906 = sdiv64(count_129868, (int64_t) 2);
                                        int64_t n_129907 = sub64(count_129868, m_129906);
                                        bool cond_129908 = n_129907 == (int64_t) 0;
                                        int64_t zgze_lhs_129909 = add64(ss_129864, m_129906);
                                        bool cond_f_res_129910 = sle64(ss_129865, zgze_lhs_129909);
                                        bool x_129911 = !cond_129908;
                                        bool y_129912 = cond_f_res_129910 && x_129911;
                                        bool cond_129913 = cond_129908 || y_129912;
                                        bool leq_y_x_129914;
                                        
                                        if (cond_129913) {
                                            leq_y_x_129914 = 1;
                                        } else {
                                            bool x_129915 = sle64((int64_t) 0, zgze_lhs_129909);
                                            bool y_129916 = slt64(zgze_lhs_129909, stride_129697);
                                            bool bounds_check_129917 = x_129915 && y_129916;
                                            bool index_certs_129918;
                                            
                                            if (!bounds_check_129917) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129909, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:113:36-40\n   #13 ftRelational.fut:110:9-113:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129921 = add64(tt_129866, n_129907);
                                            int64_t leq_arg0_129922 = sub64(zm_lhs_129921, (int64_t) 1);
                                            bool x_129923 = sle64((int64_t) 0, leq_arg0_129922);
                                            bool y_129924 = slt64(leq_arg0_129922, j_m_i_129720);
                                            bool bounds_check_129925 = x_129923 && y_129924;
                                            bool index_certs_129926;
                                            
                                            if (!bounds_check_129925) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129922, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:113:36-40\n   #13 ftRelational.fut:110:9-113:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129919 = start_129770 + zgze_lhs_129909;
                                            float leq_arg1_129920 = ((float *) mem_param_139662.mem)[slice_129919];
                                            int64_t slice_129927 = stride_129697 + leq_arg0_129922;
                                            int64_t slice_129928 = start_129770 + slice_129927;
                                            float leq_arg0_129929 = ((float *) mem_param_139662.mem)[slice_129928];
                                            bool defunc_0_leq_res_129930 = leq_arg0_129929 <= leq_arg1_129920;
                                            
                                            leq_y_x_129914 = defunc_0_leq_res_129930;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                        
                                        if (leq_y_x_129914) {
                                            int64_t tmp_131771 = add64(tt_129866, n_129907);
                                            int64_t tmp_131772 = sub64(count_129868, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tt_129867;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = tmp_131772;
                                        } else {
                                            int64_t tmp_129936 = add64(tt_129866, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tt_129866;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tmp_129936;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = count_129868;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = ss_129864;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                    }
                                    defunc_0_lifted_step_res_f_res_129878 = defunc_0_lifted_step_res_f_res_f_res_129884;
                                    defunc_0_lifted_step_res_f_res_129879 = defunc_0_lifted_step_res_f_res_f_res_129885;
                                    defunc_0_lifted_step_res_f_res_129880 = defunc_0_lifted_step_res_f_res_f_res_129886;
                                    defunc_0_lifted_step_res_f_res_129881 = defunc_0_lifted_step_res_f_res_f_res_129887;
                                }
                                defunc_0_lifted_step_res_129871 = defunc_0_lifted_step_res_f_res_129878;
                                defunc_0_lifted_step_res_129872 = defunc_0_lifted_step_res_f_res_129879;
                                defunc_0_lifted_step_res_129873 = defunc_0_lifted_step_res_f_res_129880;
                                defunc_0_lifted_step_res_129874 = defunc_0_lifted_step_res_f_res_129881;
                            }
                            
                            int64_t loopres_129937;
                            int64_t loopres_129938;
                            int64_t loopres_129939;
                            int64_t loopres_129940;
                            int64_t loopres_129941;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129937, &loopres_129938, &loopres_129939, &loopres_129940, &loopres_129941, defunc_0_lifted_step_res_129871, ss_129865, defunc_0_lifted_step_res_129872, defunc_0_lifted_step_res_129873, defunc_0_lifted_step_res_129874) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129942 = slt64((int64_t) 0, loopres_129941);
                            bool loop_while_tmp_140354 = loop_cond_129942;
                            int64_t ss_tmp_140355 = loopres_129937;
                            int64_t ss_tmp_140356 = loopres_129938;
                            int64_t tt_tmp_140357 = loopres_129939;
                            int64_t tt_tmp_140358 = loopres_129940;
                            int64_t count_tmp_140359 = loopres_129941;
                            
                            loop_while_129863 = loop_while_tmp_140354;
                            ss_129864 = ss_tmp_140355;
                            ss_129865 = ss_tmp_140356;
                            tt_129866 = tt_tmp_140357;
                            tt_129867 = tt_tmp_140358;
                            count_129868 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129857 = loop_while_129863;
                        defunc_0_split_count_res_129858 = ss_129864;
                        defunc_0_split_count_res_129859 = ss_129865;
                        defunc_0_split_count_res_129860 = tt_129866;
                        defunc_0_split_count_res_129861 = tt_129867;
                        defunc_0_split_count_res_129862 = count_129868;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129858;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129860;
                    }
                    if (mem_139698_cached_sizze_140815 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140815, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140816 < bytes_139700) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140816, bytes_139700);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129718; i_139391++) {
                        bool y_129948 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool index_certs_129950;
                        
                        if (!y_129948) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:113:36-40\n   #10 ftRelational.fut:110:9-113:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129951 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129952 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129953 = add64((int64_t) 1, i_139391);
                        bool x_129954 = sle64((int64_t) 0, tmp_129953);
                        bool y_129955 = slt64(tmp_129953, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool bounds_check_129956 = x_129954 && y_129955;
                        bool index_certs_129957;
                        
                        if (!bounds_check_129956) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129953, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:113:36-40\n   #10 ftRelational.fut:110:9-113:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139681)[tmp_129953];
                        int64_t defunc_0_f_res_129959 = ((int64_t *) mem_139683)[tmp_129953];
                        int64_t merge_sequential_arg2_129960 = add64(stride_129697, defunc_0_f_res_129952);
                        int64_t merge_sequential_arg2_129961 = add64(stride_129697, defunc_0_f_res_129959);
                        int64_t j_m_i_129962 = sub64(merge_sequential_arg2_129961, merge_sequential_arg2_129960);
                        bool empty_slice_129963 = j_m_i_129962 == (int64_t) 0;
                        int64_t m_129964 = sub64(j_m_i_129962, (int64_t) 1);
                        int64_t i_p_m_t_s_129965 = add64(merge_sequential_arg2_129960, m_129964);
                        bool zzero_leq_i_p_m_t_s_129966 = sle64((int64_t) 0, i_p_m_t_s_129965);
                        bool i_p_m_t_s_leq_w_129967 = slt64(i_p_m_t_s_129965, next_stride_129698);
                        bool zzero_lte_i_129968 = sle64((int64_t) 0, merge_sequential_arg2_129960);
                        bool i_lte_j_129969 = sle64(merge_sequential_arg2_129960, merge_sequential_arg2_129961);
                        bool y_129970 = i_p_m_t_s_leq_w_129967 && zzero_lte_i_129968;
                        bool y_129971 = zzero_leq_i_p_m_t_s_129966 && y_129970;
                        bool forwards_ok_129972 = i_lte_j_129969 && y_129971;
                        bool ok_or_empty_129973 = empty_slice_129963 || forwards_ok_129972;
                        bool index_certs_129974;
                        
                        if (!ok_or_empty_129973) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129960, ":", (long long) merge_sequential_arg2_129961, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:113:36-40\n   #10 ftRelational.fut:110:9-113:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129975 = sub64(defunc_0_f_res_129958, defunc_0_f_res_129951);
                        bool empty_slice_129976 = j_m_i_129975 == (int64_t) 0;
                        int64_t m_129977 = sub64(j_m_i_129975, (int64_t) 1);
                        int64_t i_p_m_t_s_129978 = add64(defunc_0_f_res_129951, m_129977);
                        bool zzero_leq_i_p_m_t_s_129979 = sle64((int64_t) 0, i_p_m_t_s_129978);
                        bool i_p_m_t_s_leq_w_129980 = slt64(i_p_m_t_s_129978, next_stride_129698);
                        bool zzero_lte_i_129981 = sle64((int64_t) 0, defunc_0_f_res_129951);
                        bool i_lte_j_129982 = sle64(defunc_0_f_res_129951, defunc_0_f_res_129958);
                        bool y_129983 = i_p_m_t_s_leq_w_129980 && zzero_lte_i_129981;
                        bool y_129984 = zzero_leq_i_p_m_t_s_129979 && y_129983;
                        bool forwards_ok_129985 = i_lte_j_129982 && y_129984;
                        bool ok_or_empty_129986 = empty_slice_129976 || forwards_ok_129985;
                        bool index_certs_129987;
                        
                        if (!ok_or_empty_129986) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129951, ":", (long long) defunc_0_f_res_129958, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:113:36-40\n   #10 ftRelational.fut:110:9-113:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129988 = slt64((int64_t) 0, j_m_i_129975);
                        float dummy_129989;
                        int64_t dummy_129990;
                        
                        if (cond_129988) {
                            bool index_certs_131773;
                            
                            if (!cond_129988) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:113:36-40\n   #12 ftRelational.fut:110:9-113:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129770 + defunc_0_f_res_129951;
                            float head_res_131775 = ((float *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129989 = head_res_131775;
                            dummy_129990 = head_res_131776;
                        } else {
                            bool y_129995 = slt64((int64_t) 0, j_m_i_129962);
                            bool index_certs_129996;
                            
                            if (!y_129995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:113:36-40\n   #12 ftRelational.fut:110:9-113:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_129997 = start_129770 + merge_sequential_arg2_129960;
                            float head_res_129998 = ((float *) mem_param_139662.mem)[slice_129997];
                            int64_t head_res_129999 = ((int64_t *) mem_param_139665.mem)[slice_129997];
                            
                            dummy_129989 = head_res_129998;
                            dummy_129990 = head_res_129999;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129583; nest_i_140362++) {
                            ((float *) mem_139698)[i_139391 * merge_block_sizze_129583 + nest_i_140362] = dummy_129989;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129583; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + nest_i_140363] = dummy_129990;
                        }
                        
                        int64_t data_130002;
                        int64_t i_130006 = (int64_t) 0;
                        
                        for (int64_t k_130005 = 0; k_130005 < merge_block_sizze_129583; k_130005++) {
                            int64_t j_130009 = sub64(k_130005, i_130006);
                            bool cond_130010 = j_130009 == j_m_i_129962;
                            bool cond_130011;
                            
                            if (cond_130010) {
                                cond_130011 = 1;
                            } else {
                                bool cond_130012 = slt64(i_130006, j_m_i_129975);
                                bool cond_f_res_130013;
                                
                                if (cond_130012) {
                                    bool x_131777 = sle64((int64_t) 0, j_130009);
                                    bool y_131778 = slt64(j_130009, j_m_i_129962);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:113:36-40\n   #11 ftRelational.fut:110:9-113:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130006);
                                    bool bounds_check_131785 = cond_130012 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:113:36-40\n   #11 ftRelational.fut:110:9-113:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129960 + j_130009;
                                    int64_t slice_131782 = start_129770 + slice_131781;
                                    float leq_arg1_131783 = ((float *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129951 + i_130006;
                                    int64_t slice_131788 = start_129770 + slice_131787;
                                    float leq_arg0_131789 = ((float *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = leq_arg0_131789 <= leq_arg1_131783;
                                    
                                    cond_f_res_130013 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130013 = 0;
                                }
                                cond_130011 = cond_f_res_130013;
                            }
                            
                            int64_t loopres_130028;
                            float loopres_130029;
                            int64_t loopres_130030;
                            
                            if (cond_130011) {
                                bool x_131792 = sle64((int64_t) 0, i_130006);
                                bool y_131793 = slt64(i_130006, j_m_i_129975);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:113:36-40\n   #11 ftRelational.fut:110:9-113:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130006);
                                int64_t slice_131796 = defunc_0_f_res_129951 + i_130006;
                                int64_t slice_131797 = start_129770 + slice_131796;
                                float tmp_131798 = ((float *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130028 = tmp_131791;
                                loopres_130029 = tmp_131798;
                                loopres_130030 = tmp_131799;
                            } else {
                                bool x_130040 = sle64((int64_t) 0, j_130009);
                                bool y_130041 = slt64(j_130009, j_m_i_129962);
                                bool bounds_check_130042 = x_130040 && y_130041;
                                bool index_certs_130043;
                                
                                if (!bounds_check_130042) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:113:36-40\n   #11 ftRelational.fut:110:9-113:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130044 = merge_sequential_arg2_129960 + j_130009;
                                int64_t slice_130045 = start_129770 + slice_130044;
                                float tmp_130046 = ((float *) mem_param_139662.mem)[slice_130045];
                                int64_t tmp_130047 = ((int64_t *) mem_param_139665.mem)[slice_130045];
                                
                                loopres_130028 = i_130006;
                                loopres_130029 = tmp_130046;
                                loopres_130030 = tmp_130047;
                            }
                            ((float *) mem_139698)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130029;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130030;
                            
                            int64_t i_tmp_140364 = loopres_130028;
                            
                            i_130006 = i_tmp_140364;
                        }
                        data_130002 = i_130006;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint32_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139700, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_139668, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130054 = next_stride_129698 * num_merges_129702;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint32_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            if (memblock_alloc(ctx, &mem_139778, bytes_139670, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            
            bool loop_cond_130057 = slt64(next_stride_129698, flat_dim_129579);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130054;
            bool loop_while_tmp_140341 = loop_cond_130057;
            int64_t stride_tmp_140344 = next_stride_129698;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129693 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129694 = loop_while_tmp_140341;
            stride_129697 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129688 = loop_dz2084Uz2082U_129693;
        data_129689 = loop_while_129694;
        data_129692 = stride_129697;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130058 = n_81980 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130059 = sle64((int64_t) 0, zs_lhs_129563);
        bool i_p_m_t_s_leq_w_130060 = slt64(zs_lhs_129563, data_129688);
        bool y_130061 = zzero_leq_i_p_m_t_s_130059 && i_p_m_t_s_leq_w_130060;
        bool ok_or_empty_130062 = empty_slice_130058 || y_130061;
        bool index_certs_130063;
        
        if (!ok_or_empty_130062) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_81980, "] out of bounds for array of shape [", (long long) data_129688, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:113:36-40\n   #6  ftRelational.fut:110:9-113:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139789, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_81980; i_139405++) {
        int64_t eta_p_130071 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130072 = sle64((int64_t) 0, eta_p_130071);
        bool y_130073 = slt64(eta_p_130071, n_81980);
        bool bounds_check_130074 = x_130072 && y_130073;
        bool index_certs_130075;
        
        if (!bounds_check_130074) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130071, "] out of bounds for array of shape [", (long long) n_81980, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:113:36-40\n   #5  ftRelational.fut:110:9-113:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float lifted_lambda_res_130076 = ((float *) k_mem_139580.mem)[eta_p_130071];
        
        ((float *) mem_139790.mem)[i_139405] = lifted_lambda_res_130076;
        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139792.mem, i_139405 * b_81981, (int64_t []) {(int64_t) 1}, (uint8_t *) pL_mem_139581.mem, eta_p_130071 * b_81981, (int64_t []) {(int64_t) 1}, (int64_t []) {b_81981});
    }
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140805, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140806, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_int(struct futhark_context *ctx, struct memblock *mem_out_p_140817, struct memblock *mem_out_p_140818, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_77260, int64_t b_77261)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140819 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140820 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140821 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140822 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140823 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140824 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140825 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140826 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140827 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140828 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_77260;
    bool cond_129562 = sle64(n_77260, (int64_t) 1);
    int64_t zs_lhs_129563 = sub64(n_77260, (int64_t) 1);
    int64_t zp_rhs_129564 = sdiv_safe64(zs_lhs_129563, (int64_t) 20);
    int64_t min_num_blocks_129565 = add64((int64_t) 1, zp_rhs_129564);
    bool loop_cond_129566 = slt64((int64_t) 1, min_num_blocks_129565);
    bool smallest_pow_2_geq_than_res_129567;
    int64_t smallest_pow_2_geq_than_res_129568;
    bool loop_while_129569;
    int64_t x_129570;
    
    loop_while_129569 = loop_cond_129566;
    x_129570 = (int64_t) 1;
    while (loop_while_129569) {
        int64_t loopres_129571 = mul64((int64_t) 2, x_129570);
        bool loop_cond_129572 = slt64(loopres_129571, min_num_blocks_129565);
        bool loop_while_tmp_140322 = loop_cond_129572;
        int64_t x_tmp_140323 = loopres_129571;
        
        loop_while_129569 = loop_while_tmp_140322;
        x_129570 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129567 = loop_while_129569;
    smallest_pow_2_geq_than_res_129568 = x_129570;
    
    bool zzero_129573 = smallest_pow_2_geq_than_res_129568 == (int64_t) 0;
    bool nonzzero_129574 = !zzero_129573;
    bool protect_assert_disj_129575 = cond_129562 || nonzzero_129574;
    bool nonzzero_cert_129576;
    
    if (!protect_assert_disj_129575) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:105:36-40\n   #5  ftRelational.fut:102:9-105:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129577 = sdiv_safe64(zs_lhs_129563, smallest_pow_2_geq_than_res_129568);
    int64_t block_sizze_129578 = add64((int64_t) 1, zp_rhs_129577);
    bool y_129584 = slt64((int64_t) 0, n_77260);
    bool protect_assert_disj_140188 = cond_129562 || y_129584;
    bool index_certs_129585;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_77260, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:105:36-40\n   #5  ftRelational.fut:102:9-105:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129599 = slt64(smallest_pow_2_geq_than_res_129568, (int64_t) 0);
    bool valid_129600 = !bounds_invalid_upwards_129599;
    bool protect_assert_disj_140196 = cond_129562 || valid_129600;
    bool range_valid_c_129601;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129568, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:105:36-40\n   #6  ftRelational.fut:102:9-105:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129603 = slt64(block_sizze_129578, (int64_t) 0);
    bool valid_129604 = !bounds_invalid_upwards_129603;
    bool protect_assert_disj_140198 = cond_129562 || valid_129604;
    bool range_valid_c_129605;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129578, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129607 = sle64(block_sizze_129578, (int64_t) 1);
    int64_t tmp_129608 = sub64(block_sizze_129578, (int64_t) 2);
    bool bounds_invalid_upwards_129609 = slt64(tmp_129608, (int64_t) 0);
    bool valid_129611 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_129612 = cond_129607 || valid_129611;
    bool protect_assert_disj_140200 = cond_129562 || protect_assert_disj_129612;
    bool range_valid_c_129613;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129608, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139789 = (int64_t) 4 * n_77260;
    int64_t bytes_139791 = n_77260 * b_77261;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_77260; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129579 = smallest_pow_2_geq_than_res_129568 * block_sizze_129578;
    bool x_140183 = !cond_129562;
    int64_t greatest_divisor_leq_than_arg1_129582 = mul64((int64_t) 2, block_sizze_129578);
    int64_t merge_block_sizze_129583;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129582) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129583 = x_140185;
    } else {
        merge_block_sizze_129583 = (int64_t) 0;
    }
    
    int32_t reduce_arg1_129586;
    
    if (x_140183) {
        int32_t x_140189 = ((int32_t *) k_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129586 = x_140189;
    } else {
        reduce_arg1_129586 = 0;
    }
    
    int32_t defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        int32_t x_140191;
        int64_t x_140192;
        int32_t redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129586;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_77260; i_139365++) {
            int32_t x_129590 = ((int32_t *) k_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129596 = sle32(redout_139363, x_129590);
            int32_t defunc_0_op_res_129597;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129597 = x_129590;
            } else {
                defunc_0_op_res_129597 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129598;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129598 = i_139365;
            } else {
                defunc_0_op_res_129598 = redout_139364;
            }
            
            int32_t redout_tmp_140326 = defunc_0_op_res_129597;
            int64_t redout_tmp_140327 = defunc_0_op_res_129598;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = 0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129610 = add64((int64_t) 1, tmp_129608);
    int64_t binop_x_139584 = (int64_t) 4 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139585 = block_sizze_129578 * binop_x_139584;
    int64_t binop_x_139587 = (int64_t) 8 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139588 = block_sizze_129578 * binop_x_139587;
    int64_t bytes_139598 = (int64_t) 4 * block_sizze_129578;
    int64_t bytes_139600 = (int64_t) 8 * block_sizze_129578;
    bool loop_cond_129685 = slt64(block_sizze_129578, flat_dim_129579);
    bool zzero_129686 = merge_block_sizze_129583 == (int64_t) 0;
    bool nonzzero_129687 = !zzero_129686;
    
    if (cond_129562) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140819 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140819, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140820 < bytes_139588) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140820, bytes_139588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140821 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140821, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140822 < bytes_139600) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140822, bytes_139600);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129568; i_139377++) {
            int64_t zp_lhs_129617 = mul64(block_sizze_129578, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129578; i_139370++) {
                int64_t k_129621 = add64(zp_lhs_129617, i_139370);
                bool cond_129622 = slt64(k_129621, n_77260);
                int32_t lifted_lambda_res_129623;
                int64_t lifted_lambda_res_129624;
                
                if (cond_129622) {
                    bool x_131659 = sle64((int64_t) 0, k_129621);
                    bool bounds_check_131660 = cond_129622 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129621, "] out of bounds for array of shape [", (long long) n_77260, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t lifted_lambda_res_t_res_131662 = ((int32_t *) k_mem_139580.mem)[k_129621];
                    
                    lifted_lambda_res_129623 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129624 = k_129621;
                } else {
                    lifted_lambda_res_129623 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129624 = defunc_0_reduce_res_131807;
                }
                ((int32_t *) mem_139599)[i_139370] = lifted_lambda_res_129623;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129624;
            }
            if (!cond_129607) {
                for (int64_t i_129634 = 0; i_129634 < distance_129610; i_129634++) {
                    int64_t gt_arg1_129637 = add64((int64_t) 1, i_129634);
                    bool x_129638 = sle64((int64_t) 0, gt_arg1_129637);
                    bool y_129639 = slt64(gt_arg1_129637, block_sizze_129578);
                    bool bounds_check_129640 = x_129638 && y_129639;
                    bool index_certs_129641;
                    
                    if (!bounds_check_129640) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129637, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129643 = slt64(i_129634, block_sizze_129578);
                    bool index_certs_129644;
                    
                    if (!y_129643) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129634, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t gt_arg1_129642 = ((int32_t *) mem_139599)[gt_arg1_129637];
                    int32_t gt_arg0_129645 = ((int32_t *) mem_139599)[i_129634];
                    bool defunc_0_leq_res_129646 = sle32(gt_arg0_129645, gt_arg1_129642);
                    bool defunc_0_lifted_gt_res_129647 = !defunc_0_leq_res_129646;
                    bool s_129648;
                    int64_t s_129651;
                    bool loop_while_129652;
                    int64_t j_129655;
                    
                    loop_while_129652 = defunc_0_lifted_gt_res_129647;
                    j_129655 = i_129634;
                    while (loop_while_129652) {
                        bool x_129656 = sle64((int64_t) 0, j_129655);
                        bool y_129657 = slt64(j_129655, block_sizze_129578);
                        bool bounds_check_129658 = x_129656 && y_129657;
                        bool index_certs_129659;
                        
                        if (!bounds_check_129658) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129655, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129662 = add64((int64_t) 1, j_129655);
                        bool x_129663 = sle64((int64_t) 0, copy_arg0_129662);
                        bool y_129664 = slt64(copy_arg0_129662, block_sizze_129578);
                        bool bounds_check_129665 = x_129663 && y_129664;
                        bool index_certs_129666;
                        
                        if (!bounds_check_129665) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129662, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t copy_arg0_129660 = ((int32_t *) mem_139599)[j_129655];
                        int64_t copy_arg0_129661 = ((int64_t *) mem_139601)[j_129655];
                        int32_t copy_arg0_129667 = ((int32_t *) mem_139599)[copy_arg0_129662];
                        int64_t copy_arg0_129668 = ((int64_t *) mem_139601)[copy_arg0_129662];
                        
                        ((int32_t *) mem_139599)[j_129655] = copy_arg0_129667;
                        ((int64_t *) mem_139601)[j_129655] = copy_arg0_129668;
                        ((int32_t *) mem_139599)[copy_arg0_129662] = copy_arg0_129660;
                        ((int64_t *) mem_139601)[copy_arg0_129662] = copy_arg0_129661;
                        
                        int64_t tmp_129673 = sub64(j_129655, (int64_t) 1);
                        bool cond_129674 = sle64((int64_t) 0, tmp_129673);
                        bool loop_cond_129675;
                        
                        if (cond_129674) {
                            bool y_131664 = slt64(tmp_129673, block_sizze_129578);
                            bool bounds_check_131665 = cond_129674 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129673, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t gt_arg1_131663 = ((int32_t *) mem_139599)[j_129655];
                            int32_t gt_arg0_131667 = ((int32_t *) mem_139599)[tmp_129673];
                            bool defunc_0_leq_res_131668 = sle32(gt_arg0_131667, gt_arg1_131663);
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129675 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129675 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129675;
                        int64_t j_tmp_140337 = tmp_129673;
                        
                        loop_while_129652 = loop_while_tmp_140334;
                        j_129655 = j_tmp_140337;
                    }
                    s_129648 = loop_while_129652;
                    s_129651 = j_129655;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139586, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint32_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        if (memblock_alloc(ctx, &mem_139658, bytes_139588, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        
        int64_t data_129688;
        bool data_129689;
        int64_t data_129692;
        int64_t loop_dz2084Uz2082U_129693;
        bool loop_while_129694;
        int64_t stride_129697;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129693 = flat_dim_129579;
        loop_while_129694 = loop_cond_129685;
        stride_129697 = block_sizze_129578;
        while (loop_while_129694) {
            int64_t next_stride_129698 = mul64((int64_t) 2, stride_129697);
            bool zzero_129699 = next_stride_129698 == (int64_t) 0;
            bool nonzzero_129700 = !zzero_129699;
            bool nonzzero_cert_129701;
            
            if (!nonzzero_129700) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:105:36-40\n   #5  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129702 = sdiv64(flat_dim_129579, next_stride_129698);
            bool bounds_invalid_upwards_129703 = slt64(num_merges_129702, (int64_t) 0);
            bool valid_129704 = !bounds_invalid_upwards_129703;
            bool range_valid_c_129705;
            
            if (!valid_129704) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129702, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:105:36-40\n   #6  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129707 = sub64(next_stride_129698, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129708 = sle64((int64_t) 0, m_129707);
            bool cond_129710 = slt64(next_stride_129698, (int64_t) 10);
            bool protect_assert_disj_129711 = nonzzero_129687 || cond_129710;
            bool nonzzero_cert_129712;
            
            if (!protect_assert_disj_129711) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129713 = smod_safe64(next_stride_129698, merge_block_sizze_129583);
            bool num_blocks_129714 = zeze_lhs_129713 == (int64_t) 0;
            bool protect_assert_disj_129715 = cond_129710 || num_blocks_129714;
            bool assert_c_129716;
            
            if (!protect_assert_disj_129715) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129718 = sdiv_safe64(next_stride_129698, merge_block_sizze_129583);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719 = add64((int64_t) 1, num_blocks_129718);
            int64_t j_m_i_129720 = sub64(next_stride_129698, stride_129697);
            int64_t flat_dim_129721 = merge_block_sizze_129583 * num_blocks_129718;
            bool bounds_invalid_upwards_129722 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, (int64_t) 0);
            bool empty_slice_129723 = j_m_i_129720 == (int64_t) 0;
            int64_t m_129724 = sub64(j_m_i_129720, (int64_t) 1);
            bool zzero_lte_i_129725 = sle64((int64_t) 0, stride_129697);
            bool i_lte_j_129726 = sle64(stride_129697, next_stride_129698);
            bool empty_slice_129727 = stride_129697 == (int64_t) 0;
            int64_t m_129728 = sub64(stride_129697, (int64_t) 1);
            bool bounds_invalid_upwards_129729 = slt64(num_blocks_129718, (int64_t) 0);
            bool cond_129730 = slt64((int64_t) 0, stride_129697);
            bool valid_129731 = !bounds_invalid_upwards_129722;
            int64_t i_p_m_t_s_129732 = add64(stride_129697, m_129724);
            bool zzero_leq_i_p_m_t_s_129733 = sle64((int64_t) 0, m_129728);
            bool i_p_m_t_s_leq_w_129734 = slt64(m_129728, next_stride_129698);
            bool valid_129735 = !bounds_invalid_upwards_129729;
            bool i_p_m_t_s_leq_w_129736 = slt64(m_129707, flat_dim_129721);
            bool y_129737 = slt64((int64_t) 0, j_m_i_129720);
            bool protect_assert_disj_129738 = cond_129710 || valid_129731;
            bool range_valid_c_129739;
            
            if (!protect_assert_disj_129738) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:105:36-40\n   #10 ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129740 = sle64((int64_t) 0, i_p_m_t_s_129732);
            bool i_p_m_t_s_leq_w_129741 = slt64(i_p_m_t_s_129732, next_stride_129698);
            bool y_129742 = zzero_leq_i_p_m_t_s_129733 && i_p_m_t_s_leq_w_129734;
            bool protect_assert_disj_129743 = cond_129710 || valid_129735;
            bool range_valid_c_129744;
            
            if (!protect_assert_disj_129743) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129718, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129745 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129736;
            bool y_129746 = zzero_lte_i_129725 && i_p_m_t_s_leq_w_129741;
            bool forwards_ok_129747 = zzero_lte_i_129725 && y_129742;
            bool ok_or_empty_129748 = zzero_129699 || y_129745;
            bool protect_assert_disj_129749 = cond_129730 || y_129737;
            bool y_129750 = zzero_leq_i_p_m_t_s_129740 && y_129746;
            bool ok_or_empty_129751 = empty_slice_129727 || forwards_ok_129747;
            bool protect_assert_disj_129752 = cond_129710 || ok_or_empty_129748;
            bool index_certs_129753;
            
            if (!protect_assert_disj_129752) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) flat_dim_129721, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129754 = !cond_129710;
            bool protect_assert_disj_129755 = protect_assert_disj_129749 || loop_not_taken_129754;
            bool index_certs_129756;
            
            if (!protect_assert_disj_129755) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:105:36-40\n   #10 ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129757 = i_lte_j_129726 && y_129750;
            bool protect_assert_disj_129758 = cond_129710 || ok_or_empty_129751;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:105:36-40\n   #11 ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129760 = ok_or_empty_129751 || loop_not_taken_129754;
            bool index_certs_129761;
            
            if (!protect_assert_disj_129760) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129762 = empty_slice_129723 || forwards_ok_129757;
            bool protect_assert_disj_129763 = cond_129710 || ok_or_empty_129762;
            bool index_certs_129764;
            
            if (!protect_assert_disj_129763) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:105:36-40\n   #11 ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129765 = loop_not_taken_129754 || ok_or_empty_129762;
            bool index_certs_129766;
            
            if (!protect_assert_disj_129765) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 4 * num_merges_129702;
            int64_t bytes_139667 = next_stride_129698 * binop_x_139666;
            int64_t binop_x_139669 = (int64_t) 8 * num_merges_129702;
            int64_t bytes_139670 = next_stride_129698 * binop_x_139669;
            bool i_lte_j_129709 = sle64((int64_t) 0, next_stride_129698);
            
            if (mem_139668_cached_sizze_140823 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140823, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140824 < bytes_139670) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140824, bytes_139670);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719;
            int64_t binop_x_139696 = (int64_t) 4 * num_blocks_129718;
            int64_t bytes_139697 = merge_block_sizze_129583 * binop_x_139696;
            int64_t binop_x_139699 = (int64_t) 8 * num_blocks_129718;
            int64_t bytes_139700 = merge_block_sizze_129583 * binop_x_139699;
            int64_t bytes_139742 = (int64_t) 8 * stride_129697;
            int64_t bytes_139744 = (int64_t) 16 * stride_129697;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129702; i_139398++) {
                int64_t start_129770 = mul64(next_stride_129698, i_139398);
                int64_t j_m_i_129771 = sub64(loop_dz2084Uz2082U_129693, start_129770);
                bool empty_slice_129772 = j_m_i_129771 == (int64_t) 0;
                int64_t m_129773 = sub64(j_m_i_129771, (int64_t) 1);
                int64_t i_p_m_t_s_129774 = add64(start_129770, m_129773);
                bool zzero_leq_i_p_m_t_s_129775 = sle64((int64_t) 0, i_p_m_t_s_129774);
                bool i_p_m_t_s_leq_w_129776 = slt64(i_p_m_t_s_129774, loop_dz2084Uz2082U_129693);
                bool zzero_lte_i_129777 = sle64((int64_t) 0, start_129770);
                bool i_lte_j_129778 = sle64(start_129770, loop_dz2084Uz2082U_129693);
                bool y_129779 = i_p_m_t_s_leq_w_129776 && zzero_lte_i_129777;
                bool y_129780 = zzero_leq_i_p_m_t_s_129775 && y_129779;
                bool forwards_ok_129781 = i_lte_j_129778 && y_129780;
                bool ok_or_empty_129782 = empty_slice_129772 || forwards_ok_129781;
                bool index_certs_129783;
                
                if (!ok_or_empty_129782) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129770, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129693, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129784 = slt64(m_129707, j_m_i_129771);
                bool y_129785 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129784;
                bool forwards_ok_129786 = i_lte_j_129709 && y_129785;
                bool ok_or_empty_129787 = zzero_129699 || forwards_ok_129786;
                bool index_certs_129788;
                
                if (!ok_or_empty_129787) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) j_m_i_129771, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:105:36-40\n   #8  ftRelational.fut:102:9-105:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129710) {
                    int32_t dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129730) {
                        int32_t head_res_131697 = ((int32_t *) mem_param_139662.mem)[start_129770];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129770];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129697 + start_129770;
                        int32_t head_res_131700 = ((int32_t *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129698; nest_i_140347++) {
                        ((int32_t *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139744, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129698; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129698; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129720;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129697);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129720);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129697 + j_131711;
                                int64_t slice_131721 = start_129770 + slice_131720;
                                int32_t leq_arg1_131722 = ((int32_t *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129770 + i_131708;
                                int32_t leq_arg0_131727 = ((int32_t *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = sle32(leq_arg0_131727, leq_arg1_131722);
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        int32_t loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129697);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129770 + i_131708;
                            int32_t tmp_131738 = ((int32_t *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129720);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:105:36-40\n   #9  ftRelational.fut:102:9-105:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129697 + j_131711;
                            int64_t slice_131745 = start_129770 + slice_131744;
                            int32_t tmp_131746 = ((int32_t *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((int32_t *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140825 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140825, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140826 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140826, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719; i_139384++) {
                        int64_t split_count_arg3_129850 = mul64(merge_block_sizze_129583, i_139384);
                        int64_t defunc_0_split_count_res_129851;
                        int64_t defunc_0_split_count_res_129852;
                        int64_t defunc_0_split_count_res_129853;
                        int64_t defunc_0_split_count_res_129854;
                        int64_t defunc_0_split_count_res_129855;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129851, &defunc_0_split_count_res_129852, &defunc_0_split_count_res_129853, &defunc_0_split_count_res_129854, &defunc_0_split_count_res_129855, (int64_t) 0, stride_129697, (int64_t) 0, j_m_i_129720, split_count_arg3_129850) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129856 = slt64((int64_t) 0, defunc_0_split_count_res_129855);
                        bool defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        int64_t defunc_0_split_count_res_129862;
                        bool loop_while_129863;
                        int64_t ss_129864;
                        int64_t ss_129865;
                        int64_t tt_129866;
                        int64_t tt_129867;
                        int64_t count_129868;
                        
                        loop_while_129863 = loop_cond_129856;
                        ss_129864 = defunc_0_split_count_res_129851;
                        ss_129865 = defunc_0_split_count_res_129852;
                        tt_129866 = defunc_0_split_count_res_129853;
                        tt_129867 = defunc_0_split_count_res_129854;
                        count_129868 = defunc_0_split_count_res_129855;
                        while (loop_while_129863) {
                            int64_t zlze_lhs_129869 = sub64(ss_129865, ss_129864);
                            bool cond_129870 = sle64(zlze_lhs_129869, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129871;
                            int64_t defunc_0_lifted_step_res_129872;
                            int64_t defunc_0_lifted_step_res_129873;
                            int64_t defunc_0_lifted_step_res_129874;
                            
                            if (cond_129870) {
                                int64_t tmp_131750 = add64(tt_129866, count_129868);
                                
                                defunc_0_lifted_step_res_129871 = ss_129864;
                                defunc_0_lifted_step_res_129872 = tmp_131750;
                                defunc_0_lifted_step_res_129873 = tt_129867;
                                defunc_0_lifted_step_res_129874 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129876 = sub64(tt_129867, tt_129866);
                                bool cond_129877 = sle64(zlze_lhs_129876, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129878;
                                int64_t defunc_0_lifted_step_res_f_res_129879;
                                int64_t defunc_0_lifted_step_res_f_res_129880;
                                int64_t defunc_0_lifted_step_res_f_res_129881;
                                
                                if (cond_129877) {
                                    int64_t tmp_131751 = add64(ss_129864, count_129868);
                                    
                                    defunc_0_lifted_step_res_f_res_129878 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129879 = tt_129866;
                                    defunc_0_lifted_step_res_f_res_129880 = tt_129867;
                                    defunc_0_lifted_step_res_f_res_129881 = (int64_t) 0;
                                } else {
                                    bool cond_129883 = count_129868 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129884;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129885;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129886;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129887;
                                    
                                    if (cond_129883) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129864);
                                        bool y_131754 = slt64(ss_129864, stride_129697);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129864, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:105:36-40\n   #13 ftRelational.fut:102:9-105:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129866);
                                        bool y_131760 = slt64(tt_129866, j_m_i_129720);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129866, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:105:36-40\n   #13 ftRelational.fut:102:9-105:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129770 + ss_129864;
                                        int32_t leq_arg1_131758 = ((int32_t *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129697 + tt_129866;
                                        int64_t slice_131764 = start_129770 + slice_131763;
                                        int32_t leq_arg0_131765 = ((int32_t *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = sle32(leq_arg0_131765, leq_arg1_131758);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129866);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129864;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129864);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129866;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = tt_129867;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = (int64_t) 0;
                                    } else {
                                        int64_t m_129906 = sdiv64(count_129868, (int64_t) 2);
                                        int64_t n_129907 = sub64(count_129868, m_129906);
                                        bool cond_129908 = n_129907 == (int64_t) 0;
                                        int64_t zgze_lhs_129909 = add64(ss_129864, m_129906);
                                        bool cond_f_res_129910 = sle64(ss_129865, zgze_lhs_129909);
                                        bool x_129911 = !cond_129908;
                                        bool y_129912 = cond_f_res_129910 && x_129911;
                                        bool cond_129913 = cond_129908 || y_129912;
                                        bool leq_y_x_129914;
                                        
                                        if (cond_129913) {
                                            leq_y_x_129914 = 1;
                                        } else {
                                            bool x_129915 = sle64((int64_t) 0, zgze_lhs_129909);
                                            bool y_129916 = slt64(zgze_lhs_129909, stride_129697);
                                            bool bounds_check_129917 = x_129915 && y_129916;
                                            bool index_certs_129918;
                                            
                                            if (!bounds_check_129917) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129909, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:105:36-40\n   #13 ftRelational.fut:102:9-105:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129921 = add64(tt_129866, n_129907);
                                            int64_t leq_arg0_129922 = sub64(zm_lhs_129921, (int64_t) 1);
                                            bool x_129923 = sle64((int64_t) 0, leq_arg0_129922);
                                            bool y_129924 = slt64(leq_arg0_129922, j_m_i_129720);
                                            bool bounds_check_129925 = x_129923 && y_129924;
                                            bool index_certs_129926;
                                            
                                            if (!bounds_check_129925) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129922, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:105:36-40\n   #13 ftRelational.fut:102:9-105:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129919 = start_129770 + zgze_lhs_129909;
                                            int32_t leq_arg1_129920 = ((int32_t *) mem_param_139662.mem)[slice_129919];
                                            int64_t slice_129927 = stride_129697 + leq_arg0_129922;
                                            int64_t slice_129928 = start_129770 + slice_129927;
                                            int32_t leq_arg0_129929 = ((int32_t *) mem_param_139662.mem)[slice_129928];
                                            bool defunc_0_leq_res_129930 = sle32(leq_arg0_129929, leq_arg1_129920);
                                            
                                            leq_y_x_129914 = defunc_0_leq_res_129930;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                        
                                        if (leq_y_x_129914) {
                                            int64_t tmp_131771 = add64(tt_129866, n_129907);
                                            int64_t tmp_131772 = sub64(count_129868, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tt_129867;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = tmp_131772;
                                        } else {
                                            int64_t tmp_129936 = add64(tt_129866, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tt_129866;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tmp_129936;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = count_129868;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = ss_129864;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                    }
                                    defunc_0_lifted_step_res_f_res_129878 = defunc_0_lifted_step_res_f_res_f_res_129884;
                                    defunc_0_lifted_step_res_f_res_129879 = defunc_0_lifted_step_res_f_res_f_res_129885;
                                    defunc_0_lifted_step_res_f_res_129880 = defunc_0_lifted_step_res_f_res_f_res_129886;
                                    defunc_0_lifted_step_res_f_res_129881 = defunc_0_lifted_step_res_f_res_f_res_129887;
                                }
                                defunc_0_lifted_step_res_129871 = defunc_0_lifted_step_res_f_res_129878;
                                defunc_0_lifted_step_res_129872 = defunc_0_lifted_step_res_f_res_129879;
                                defunc_0_lifted_step_res_129873 = defunc_0_lifted_step_res_f_res_129880;
                                defunc_0_lifted_step_res_129874 = defunc_0_lifted_step_res_f_res_129881;
                            }
                            
                            int64_t loopres_129937;
                            int64_t loopres_129938;
                            int64_t loopres_129939;
                            int64_t loopres_129940;
                            int64_t loopres_129941;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129937, &loopres_129938, &loopres_129939, &loopres_129940, &loopres_129941, defunc_0_lifted_step_res_129871, ss_129865, defunc_0_lifted_step_res_129872, defunc_0_lifted_step_res_129873, defunc_0_lifted_step_res_129874) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129942 = slt64((int64_t) 0, loopres_129941);
                            bool loop_while_tmp_140354 = loop_cond_129942;
                            int64_t ss_tmp_140355 = loopres_129937;
                            int64_t ss_tmp_140356 = loopres_129938;
                            int64_t tt_tmp_140357 = loopres_129939;
                            int64_t tt_tmp_140358 = loopres_129940;
                            int64_t count_tmp_140359 = loopres_129941;
                            
                            loop_while_129863 = loop_while_tmp_140354;
                            ss_129864 = ss_tmp_140355;
                            ss_129865 = ss_tmp_140356;
                            tt_129866 = tt_tmp_140357;
                            tt_129867 = tt_tmp_140358;
                            count_129868 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129857 = loop_while_129863;
                        defunc_0_split_count_res_129858 = ss_129864;
                        defunc_0_split_count_res_129859 = ss_129865;
                        defunc_0_split_count_res_129860 = tt_129866;
                        defunc_0_split_count_res_129861 = tt_129867;
                        defunc_0_split_count_res_129862 = count_129868;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129858;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129860;
                    }
                    if (mem_139698_cached_sizze_140827 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140827, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140828 < bytes_139700) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140828, bytes_139700);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129718; i_139391++) {
                        bool y_129948 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool index_certs_129950;
                        
                        if (!y_129948) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:105:36-40\n   #10 ftRelational.fut:102:9-105:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129951 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129952 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129953 = add64((int64_t) 1, i_139391);
                        bool x_129954 = sle64((int64_t) 0, tmp_129953);
                        bool y_129955 = slt64(tmp_129953, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool bounds_check_129956 = x_129954 && y_129955;
                        bool index_certs_129957;
                        
                        if (!bounds_check_129956) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129953, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:105:36-40\n   #10 ftRelational.fut:102:9-105:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139681)[tmp_129953];
                        int64_t defunc_0_f_res_129959 = ((int64_t *) mem_139683)[tmp_129953];
                        int64_t merge_sequential_arg2_129960 = add64(stride_129697, defunc_0_f_res_129952);
                        int64_t merge_sequential_arg2_129961 = add64(stride_129697, defunc_0_f_res_129959);
                        int64_t j_m_i_129962 = sub64(merge_sequential_arg2_129961, merge_sequential_arg2_129960);
                        bool empty_slice_129963 = j_m_i_129962 == (int64_t) 0;
                        int64_t m_129964 = sub64(j_m_i_129962, (int64_t) 1);
                        int64_t i_p_m_t_s_129965 = add64(merge_sequential_arg2_129960, m_129964);
                        bool zzero_leq_i_p_m_t_s_129966 = sle64((int64_t) 0, i_p_m_t_s_129965);
                        bool i_p_m_t_s_leq_w_129967 = slt64(i_p_m_t_s_129965, next_stride_129698);
                        bool zzero_lte_i_129968 = sle64((int64_t) 0, merge_sequential_arg2_129960);
                        bool i_lte_j_129969 = sle64(merge_sequential_arg2_129960, merge_sequential_arg2_129961);
                        bool y_129970 = i_p_m_t_s_leq_w_129967 && zzero_lte_i_129968;
                        bool y_129971 = zzero_leq_i_p_m_t_s_129966 && y_129970;
                        bool forwards_ok_129972 = i_lte_j_129969 && y_129971;
                        bool ok_or_empty_129973 = empty_slice_129963 || forwards_ok_129972;
                        bool index_certs_129974;
                        
                        if (!ok_or_empty_129973) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129960, ":", (long long) merge_sequential_arg2_129961, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:105:36-40\n   #10 ftRelational.fut:102:9-105:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129975 = sub64(defunc_0_f_res_129958, defunc_0_f_res_129951);
                        bool empty_slice_129976 = j_m_i_129975 == (int64_t) 0;
                        int64_t m_129977 = sub64(j_m_i_129975, (int64_t) 1);
                        int64_t i_p_m_t_s_129978 = add64(defunc_0_f_res_129951, m_129977);
                        bool zzero_leq_i_p_m_t_s_129979 = sle64((int64_t) 0, i_p_m_t_s_129978);
                        bool i_p_m_t_s_leq_w_129980 = slt64(i_p_m_t_s_129978, next_stride_129698);
                        bool zzero_lte_i_129981 = sle64((int64_t) 0, defunc_0_f_res_129951);
                        bool i_lte_j_129982 = sle64(defunc_0_f_res_129951, defunc_0_f_res_129958);
                        bool y_129983 = i_p_m_t_s_leq_w_129980 && zzero_lte_i_129981;
                        bool y_129984 = zzero_leq_i_p_m_t_s_129979 && y_129983;
                        bool forwards_ok_129985 = i_lte_j_129982 && y_129984;
                        bool ok_or_empty_129986 = empty_slice_129976 || forwards_ok_129985;
                        bool index_certs_129987;
                        
                        if (!ok_or_empty_129986) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129951, ":", (long long) defunc_0_f_res_129958, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:105:36-40\n   #10 ftRelational.fut:102:9-105:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129988 = slt64((int64_t) 0, j_m_i_129975);
                        int32_t dummy_129989;
                        int64_t dummy_129990;
                        
                        if (cond_129988) {
                            bool index_certs_131773;
                            
                            if (!cond_129988) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:105:36-40\n   #12 ftRelational.fut:102:9-105:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129770 + defunc_0_f_res_129951;
                            int32_t head_res_131775 = ((int32_t *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129989 = head_res_131775;
                            dummy_129990 = head_res_131776;
                        } else {
                            bool y_129995 = slt64((int64_t) 0, j_m_i_129962);
                            bool index_certs_129996;
                            
                            if (!y_129995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:105:36-40\n   #12 ftRelational.fut:102:9-105:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_129997 = start_129770 + merge_sequential_arg2_129960;
                            int32_t head_res_129998 = ((int32_t *) mem_param_139662.mem)[slice_129997];
                            int64_t head_res_129999 = ((int64_t *) mem_param_139665.mem)[slice_129997];
                            
                            dummy_129989 = head_res_129998;
                            dummy_129990 = head_res_129999;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129583; nest_i_140362++) {
                            ((int32_t *) mem_139698)[i_139391 * merge_block_sizze_129583 + nest_i_140362] = dummy_129989;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129583; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + nest_i_140363] = dummy_129990;
                        }
                        
                        int64_t data_130002;
                        int64_t i_130006 = (int64_t) 0;
                        
                        for (int64_t k_130005 = 0; k_130005 < merge_block_sizze_129583; k_130005++) {
                            int64_t j_130009 = sub64(k_130005, i_130006);
                            bool cond_130010 = j_130009 == j_m_i_129962;
                            bool cond_130011;
                            
                            if (cond_130010) {
                                cond_130011 = 1;
                            } else {
                                bool cond_130012 = slt64(i_130006, j_m_i_129975);
                                bool cond_f_res_130013;
                                
                                if (cond_130012) {
                                    bool x_131777 = sle64((int64_t) 0, j_130009);
                                    bool y_131778 = slt64(j_130009, j_m_i_129962);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:105:36-40\n   #11 ftRelational.fut:102:9-105:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130006);
                                    bool bounds_check_131785 = cond_130012 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:105:36-40\n   #11 ftRelational.fut:102:9-105:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129960 + j_130009;
                                    int64_t slice_131782 = start_129770 + slice_131781;
                                    int32_t leq_arg1_131783 = ((int32_t *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129951 + i_130006;
                                    int64_t slice_131788 = start_129770 + slice_131787;
                                    int32_t leq_arg0_131789 = ((int32_t *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = sle32(leq_arg0_131789, leq_arg1_131783);
                                    
                                    cond_f_res_130013 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130013 = 0;
                                }
                                cond_130011 = cond_f_res_130013;
                            }
                            
                            int64_t loopres_130028;
                            int32_t loopres_130029;
                            int64_t loopres_130030;
                            
                            if (cond_130011) {
                                bool x_131792 = sle64((int64_t) 0, i_130006);
                                bool y_131793 = slt64(i_130006, j_m_i_129975);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:105:36-40\n   #11 ftRelational.fut:102:9-105:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130006);
                                int64_t slice_131796 = defunc_0_f_res_129951 + i_130006;
                                int64_t slice_131797 = start_129770 + slice_131796;
                                int32_t tmp_131798 = ((int32_t *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130028 = tmp_131791;
                                loopres_130029 = tmp_131798;
                                loopres_130030 = tmp_131799;
                            } else {
                                bool x_130040 = sle64((int64_t) 0, j_130009);
                                bool y_130041 = slt64(j_130009, j_m_i_129962);
                                bool bounds_check_130042 = x_130040 && y_130041;
                                bool index_certs_130043;
                                
                                if (!bounds_check_130042) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:105:36-40\n   #11 ftRelational.fut:102:9-105:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130044 = merge_sequential_arg2_129960 + j_130009;
                                int64_t slice_130045 = start_129770 + slice_130044;
                                int32_t tmp_130046 = ((int32_t *) mem_param_139662.mem)[slice_130045];
                                int64_t tmp_130047 = ((int64_t *) mem_param_139665.mem)[slice_130045];
                                
                                loopres_130028 = i_130006;
                                loopres_130029 = tmp_130046;
                                loopres_130030 = tmp_130047;
                            }
                            ((int32_t *) mem_139698)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130029;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130030;
                            
                            int64_t i_tmp_140364 = loopres_130028;
                            
                            i_130006 = i_tmp_140364;
                        }
                        data_130002 = i_130006;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint32_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139700, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_139668, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130054 = next_stride_129698 * num_merges_129702;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint32_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            if (memblock_alloc(ctx, &mem_139778, bytes_139670, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            
            bool loop_cond_130057 = slt64(next_stride_129698, flat_dim_129579);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130054;
            bool loop_while_tmp_140341 = loop_cond_130057;
            int64_t stride_tmp_140344 = next_stride_129698;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129693 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129694 = loop_while_tmp_140341;
            stride_129697 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129688 = loop_dz2084Uz2082U_129693;
        data_129689 = loop_while_129694;
        data_129692 = stride_129697;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130058 = n_77260 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130059 = sle64((int64_t) 0, zs_lhs_129563);
        bool i_p_m_t_s_leq_w_130060 = slt64(zs_lhs_129563, data_129688);
        bool y_130061 = zzero_leq_i_p_m_t_s_130059 && i_p_m_t_s_leq_w_130060;
        bool ok_or_empty_130062 = empty_slice_130058 || y_130061;
        bool index_certs_130063;
        
        if (!ok_or_empty_130062) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_77260, "] out of bounds for array of shape [", (long long) data_129688, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:105:36-40\n   #6  ftRelational.fut:102:9-105:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139789, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_77260; i_139405++) {
        int64_t eta_p_130071 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130072 = sle64((int64_t) 0, eta_p_130071);
        bool y_130073 = slt64(eta_p_130071, n_77260);
        bool bounds_check_130074 = x_130072 && y_130073;
        bool index_certs_130075;
        
        if (!bounds_check_130074) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130071, "] out of bounds for array of shape [", (long long) n_77260, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:105:36-40\n   #5  ftRelational.fut:102:9-105:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_lambda_res_130076 = ((int32_t *) k_mem_139580.mem)[eta_p_130071];
        
        ((int32_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130076;
        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139792.mem, i_139405 * b_77261, (int64_t []) {(int64_t) 1}, (uint8_t *) pL_mem_139581.mem, eta_p_130071 * b_77261, (int64_t []) {(int64_t) 1}, (int64_t []) {b_77261});
    }
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140817, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140818, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_long(struct futhark_context *ctx, struct memblock *mem_out_p_140829, struct memblock *mem_out_p_140830, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_79615, int64_t b_79616)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140831 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140832 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140833 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140834 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140835 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140836 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140837 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140838 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140839 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140840 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_79615;
    bool cond_129562 = sle64(n_79615, (int64_t) 1);
    int64_t zs_lhs_129563 = sub64(n_79615, (int64_t) 1);
    int64_t zp_rhs_129564 = sdiv_safe64(zs_lhs_129563, (int64_t) 20);
    int64_t min_num_blocks_129565 = add64((int64_t) 1, zp_rhs_129564);
    bool loop_cond_129566 = slt64((int64_t) 1, min_num_blocks_129565);
    bool smallest_pow_2_geq_than_res_129567;
    int64_t smallest_pow_2_geq_than_res_129568;
    bool loop_while_129569;
    int64_t x_129570;
    
    loop_while_129569 = loop_cond_129566;
    x_129570 = (int64_t) 1;
    while (loop_while_129569) {
        int64_t loopres_129571 = mul64((int64_t) 2, x_129570);
        bool loop_cond_129572 = slt64(loopres_129571, min_num_blocks_129565);
        bool loop_while_tmp_140322 = loop_cond_129572;
        int64_t x_tmp_140323 = loopres_129571;
        
        loop_while_129569 = loop_while_tmp_140322;
        x_129570 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129567 = loop_while_129569;
    smallest_pow_2_geq_than_res_129568 = x_129570;
    
    bool zzero_129573 = smallest_pow_2_geq_than_res_129568 == (int64_t) 0;
    bool nonzzero_129574 = !zzero_129573;
    bool protect_assert_disj_129575 = cond_129562 || nonzzero_129574;
    bool nonzzero_cert_129576;
    
    if (!protect_assert_disj_129575) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:109:36-40\n   #5  ftRelational.fut:106:9-109:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129577 = sdiv_safe64(zs_lhs_129563, smallest_pow_2_geq_than_res_129568);
    int64_t block_sizze_129578 = add64((int64_t) 1, zp_rhs_129577);
    bool y_129584 = slt64((int64_t) 0, n_79615);
    bool protect_assert_disj_140188 = cond_129562 || y_129584;
    bool index_certs_129585;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_79615, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:109:36-40\n   #5  ftRelational.fut:106:9-109:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129599 = slt64(smallest_pow_2_geq_than_res_129568, (int64_t) 0);
    bool valid_129600 = !bounds_invalid_upwards_129599;
    bool protect_assert_disj_140196 = cond_129562 || valid_129600;
    bool range_valid_c_129601;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129568, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:109:36-40\n   #6  ftRelational.fut:106:9-109:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129603 = slt64(block_sizze_129578, (int64_t) 0);
    bool valid_129604 = !bounds_invalid_upwards_129603;
    bool protect_assert_disj_140198 = cond_129562 || valid_129604;
    bool range_valid_c_129605;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129578, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129607 = sle64(block_sizze_129578, (int64_t) 1);
    int64_t tmp_129608 = sub64(block_sizze_129578, (int64_t) 2);
    bool bounds_invalid_upwards_129609 = slt64(tmp_129608, (int64_t) 0);
    bool valid_129611 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_129612 = cond_129607 || valid_129611;
    bool protect_assert_disj_140200 = cond_129562 || protect_assert_disj_129612;
    bool range_valid_c_129613;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129608, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139791 = n_79615 * b_79616;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_79615; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129579 = smallest_pow_2_geq_than_res_129568 * block_sizze_129578;
    bool x_140183 = !cond_129562;
    int64_t greatest_divisor_leq_than_arg1_129582 = mul64((int64_t) 2, block_sizze_129578);
    int64_t merge_block_sizze_129583;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129582) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129583 = x_140185;
    } else {
        merge_block_sizze_129583 = (int64_t) 0;
    }
    
    int64_t reduce_arg1_129586;
    
    if (x_140183) {
        int64_t x_140189 = ((int64_t *) k_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129586 = x_140189;
    } else {
        reduce_arg1_129586 = (int64_t) 0;
    }
    
    int64_t defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        int64_t x_140191;
        int64_t x_140192;
        int64_t redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129586;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_79615; i_139365++) {
            int64_t x_129590 = ((int64_t *) k_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129596 = sle64(redout_139363, x_129590);
            int64_t defunc_0_op_res_129597;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129597 = x_129590;
            } else {
                defunc_0_op_res_129597 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129598;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129598 = i_139365;
            } else {
                defunc_0_op_res_129598 = redout_139364;
            }
            
            int64_t redout_tmp_140326 = defunc_0_op_res_129597;
            int64_t redout_tmp_140327 = defunc_0_op_res_129598;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = (int64_t) 0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129610 = add64((int64_t) 1, tmp_129608);
    int64_t binop_x_139584 = (int64_t) 8 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139585 = block_sizze_129578 * binop_x_139584;
    int64_t bytes_139598 = (int64_t) 8 * block_sizze_129578;
    bool loop_cond_129685 = slt64(block_sizze_129578, flat_dim_129579);
    bool zzero_129686 = merge_block_sizze_129583 == (int64_t) 0;
    bool nonzzero_129687 = !zzero_129686;
    
    if (cond_129562) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140831 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140831, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140832 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140832, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140833 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140833, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140834 < bytes_139598) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140834, bytes_139598);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129568; i_139377++) {
            int64_t zp_lhs_129617 = mul64(block_sizze_129578, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129578; i_139370++) {
                int64_t k_129621 = add64(zp_lhs_129617, i_139370);
                bool cond_129622 = slt64(k_129621, n_79615);
                int64_t lifted_lambda_res_129623;
                int64_t lifted_lambda_res_129624;
                
                if (cond_129622) {
                    bool x_131659 = sle64((int64_t) 0, k_129621);
                    bool bounds_check_131660 = cond_129622 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129621, "] out of bounds for array of shape [", (long long) n_79615, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t lifted_lambda_res_t_res_131662 = ((int64_t *) k_mem_139580.mem)[k_129621];
                    
                    lifted_lambda_res_129623 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129624 = k_129621;
                } else {
                    lifted_lambda_res_129623 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129624 = defunc_0_reduce_res_131807;
                }
                ((int64_t *) mem_139599)[i_139370] = lifted_lambda_res_129623;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129624;
            }
            if (!cond_129607) {
                for (int64_t i_129634 = 0; i_129634 < distance_129610; i_129634++) {
                    int64_t gt_arg1_129637 = add64((int64_t) 1, i_129634);
                    bool x_129638 = sle64((int64_t) 0, gt_arg1_129637);
                    bool y_129639 = slt64(gt_arg1_129637, block_sizze_129578);
                    bool bounds_check_129640 = x_129638 && y_129639;
                    bool index_certs_129641;
                    
                    if (!bounds_check_129640) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129637, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129643 = slt64(i_129634, block_sizze_129578);
                    bool index_certs_129644;
                    
                    if (!y_129643) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129634, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t gt_arg1_129642 = ((int64_t *) mem_139599)[gt_arg1_129637];
                    int64_t gt_arg0_129645 = ((int64_t *) mem_139599)[i_129634];
                    bool defunc_0_leq_res_129646 = sle64(gt_arg0_129645, gt_arg1_129642);
                    bool defunc_0_lifted_gt_res_129647 = !defunc_0_leq_res_129646;
                    bool s_129648;
                    int64_t s_129651;
                    bool loop_while_129652;
                    int64_t j_129655;
                    
                    loop_while_129652 = defunc_0_lifted_gt_res_129647;
                    j_129655 = i_129634;
                    while (loop_while_129652) {
                        bool x_129656 = sle64((int64_t) 0, j_129655);
                        bool y_129657 = slt64(j_129655, block_sizze_129578);
                        bool bounds_check_129658 = x_129656 && y_129657;
                        bool index_certs_129659;
                        
                        if (!bounds_check_129658) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129655, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129662 = add64((int64_t) 1, j_129655);
                        bool x_129663 = sle64((int64_t) 0, copy_arg0_129662);
                        bool y_129664 = slt64(copy_arg0_129662, block_sizze_129578);
                        bool bounds_check_129665 = x_129663 && y_129664;
                        bool index_certs_129666;
                        
                        if (!bounds_check_129665) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129662, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129660 = ((int64_t *) mem_139599)[j_129655];
                        int64_t copy_arg0_129661 = ((int64_t *) mem_139601)[j_129655];
                        int64_t copy_arg0_129667 = ((int64_t *) mem_139599)[copy_arg0_129662];
                        int64_t copy_arg0_129668 = ((int64_t *) mem_139601)[copy_arg0_129662];
                        
                        ((int64_t *) mem_139599)[j_129655] = copy_arg0_129667;
                        ((int64_t *) mem_139601)[j_129655] = copy_arg0_129668;
                        ((int64_t *) mem_139599)[copy_arg0_129662] = copy_arg0_129660;
                        ((int64_t *) mem_139601)[copy_arg0_129662] = copy_arg0_129661;
                        
                        int64_t tmp_129673 = sub64(j_129655, (int64_t) 1);
                        bool cond_129674 = sle64((int64_t) 0, tmp_129673);
                        bool loop_cond_129675;
                        
                        if (cond_129674) {
                            bool y_131664 = slt64(tmp_129673, block_sizze_129578);
                            bool bounds_check_131665 = cond_129674 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129673, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t gt_arg1_131663 = ((int64_t *) mem_139599)[j_129655];
                            int64_t gt_arg0_131667 = ((int64_t *) mem_139599)[tmp_129673];
                            bool defunc_0_leq_res_131668 = sle64(gt_arg0_131667, gt_arg1_131663);
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129675 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129675 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129675;
                        int64_t j_tmp_140337 = tmp_129673;
                        
                        loop_while_129652 = loop_while_tmp_140334;
                        j_129655 = j_tmp_140337;
                    }
                    s_129648 = loop_while_129652;
                    s_129651 = j_129655;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139586, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        if (memblock_alloc(ctx, &mem_139658, bytes_139585, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        
        int64_t data_129688;
        bool data_129689;
        int64_t data_129692;
        int64_t loop_dz2084Uz2082U_129693;
        bool loop_while_129694;
        int64_t stride_129697;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129693 = flat_dim_129579;
        loop_while_129694 = loop_cond_129685;
        stride_129697 = block_sizze_129578;
        while (loop_while_129694) {
            int64_t next_stride_129698 = mul64((int64_t) 2, stride_129697);
            bool zzero_129699 = next_stride_129698 == (int64_t) 0;
            bool nonzzero_129700 = !zzero_129699;
            bool nonzzero_cert_129701;
            
            if (!nonzzero_129700) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:109:36-40\n   #5  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129702 = sdiv64(flat_dim_129579, next_stride_129698);
            bool bounds_invalid_upwards_129703 = slt64(num_merges_129702, (int64_t) 0);
            bool valid_129704 = !bounds_invalid_upwards_129703;
            bool range_valid_c_129705;
            
            if (!valid_129704) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129702, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:109:36-40\n   #6  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129707 = sub64(next_stride_129698, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129708 = sle64((int64_t) 0, m_129707);
            bool cond_129710 = slt64(next_stride_129698, (int64_t) 10);
            bool protect_assert_disj_129711 = nonzzero_129687 || cond_129710;
            bool nonzzero_cert_129712;
            
            if (!protect_assert_disj_129711) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129713 = smod_safe64(next_stride_129698, merge_block_sizze_129583);
            bool num_blocks_129714 = zeze_lhs_129713 == (int64_t) 0;
            bool protect_assert_disj_129715 = cond_129710 || num_blocks_129714;
            bool assert_c_129716;
            
            if (!protect_assert_disj_129715) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129718 = sdiv_safe64(next_stride_129698, merge_block_sizze_129583);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719 = add64((int64_t) 1, num_blocks_129718);
            int64_t j_m_i_129720 = sub64(next_stride_129698, stride_129697);
            int64_t flat_dim_129721 = merge_block_sizze_129583 * num_blocks_129718;
            bool bounds_invalid_upwards_129722 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, (int64_t) 0);
            bool empty_slice_129723 = j_m_i_129720 == (int64_t) 0;
            int64_t m_129724 = sub64(j_m_i_129720, (int64_t) 1);
            bool zzero_lte_i_129725 = sle64((int64_t) 0, stride_129697);
            bool i_lte_j_129726 = sle64(stride_129697, next_stride_129698);
            bool empty_slice_129727 = stride_129697 == (int64_t) 0;
            int64_t m_129728 = sub64(stride_129697, (int64_t) 1);
            bool bounds_invalid_upwards_129729 = slt64(num_blocks_129718, (int64_t) 0);
            bool cond_129730 = slt64((int64_t) 0, stride_129697);
            bool valid_129731 = !bounds_invalid_upwards_129722;
            int64_t i_p_m_t_s_129732 = add64(stride_129697, m_129724);
            bool zzero_leq_i_p_m_t_s_129733 = sle64((int64_t) 0, m_129728);
            bool i_p_m_t_s_leq_w_129734 = slt64(m_129728, next_stride_129698);
            bool valid_129735 = !bounds_invalid_upwards_129729;
            bool i_p_m_t_s_leq_w_129736 = slt64(m_129707, flat_dim_129721);
            bool y_129737 = slt64((int64_t) 0, j_m_i_129720);
            bool protect_assert_disj_129738 = cond_129710 || valid_129731;
            bool range_valid_c_129739;
            
            if (!protect_assert_disj_129738) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:109:36-40\n   #10 ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129740 = sle64((int64_t) 0, i_p_m_t_s_129732);
            bool i_p_m_t_s_leq_w_129741 = slt64(i_p_m_t_s_129732, next_stride_129698);
            bool y_129742 = zzero_leq_i_p_m_t_s_129733 && i_p_m_t_s_leq_w_129734;
            bool protect_assert_disj_129743 = cond_129710 || valid_129735;
            bool range_valid_c_129744;
            
            if (!protect_assert_disj_129743) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129718, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129745 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129736;
            bool y_129746 = zzero_lte_i_129725 && i_p_m_t_s_leq_w_129741;
            bool forwards_ok_129747 = zzero_lte_i_129725 && y_129742;
            bool ok_or_empty_129748 = zzero_129699 || y_129745;
            bool protect_assert_disj_129749 = cond_129730 || y_129737;
            bool y_129750 = zzero_leq_i_p_m_t_s_129740 && y_129746;
            bool ok_or_empty_129751 = empty_slice_129727 || forwards_ok_129747;
            bool protect_assert_disj_129752 = cond_129710 || ok_or_empty_129748;
            bool index_certs_129753;
            
            if (!protect_assert_disj_129752) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) flat_dim_129721, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129754 = !cond_129710;
            bool protect_assert_disj_129755 = protect_assert_disj_129749 || loop_not_taken_129754;
            bool index_certs_129756;
            
            if (!protect_assert_disj_129755) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:109:36-40\n   #10 ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129757 = i_lte_j_129726 && y_129750;
            bool protect_assert_disj_129758 = cond_129710 || ok_or_empty_129751;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:109:36-40\n   #11 ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129760 = ok_or_empty_129751 || loop_not_taken_129754;
            bool index_certs_129761;
            
            if (!protect_assert_disj_129760) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129762 = empty_slice_129723 || forwards_ok_129757;
            bool protect_assert_disj_129763 = cond_129710 || ok_or_empty_129762;
            bool index_certs_129764;
            
            if (!protect_assert_disj_129763) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:109:36-40\n   #11 ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129765 = loop_not_taken_129754 || ok_or_empty_129762;
            bool index_certs_129766;
            
            if (!protect_assert_disj_129765) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 8 * num_merges_129702;
            int64_t bytes_139667 = next_stride_129698 * binop_x_139666;
            bool i_lte_j_129709 = sle64((int64_t) 0, next_stride_129698);
            
            if (mem_139668_cached_sizze_140835 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140835, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140836 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140836, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719;
            int64_t binop_x_139696 = (int64_t) 8 * num_blocks_129718;
            int64_t bytes_139697 = merge_block_sizze_129583 * binop_x_139696;
            int64_t bytes_139742 = (int64_t) 16 * stride_129697;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129702; i_139398++) {
                int64_t start_129770 = mul64(next_stride_129698, i_139398);
                int64_t j_m_i_129771 = sub64(loop_dz2084Uz2082U_129693, start_129770);
                bool empty_slice_129772 = j_m_i_129771 == (int64_t) 0;
                int64_t m_129773 = sub64(j_m_i_129771, (int64_t) 1);
                int64_t i_p_m_t_s_129774 = add64(start_129770, m_129773);
                bool zzero_leq_i_p_m_t_s_129775 = sle64((int64_t) 0, i_p_m_t_s_129774);
                bool i_p_m_t_s_leq_w_129776 = slt64(i_p_m_t_s_129774, loop_dz2084Uz2082U_129693);
                bool zzero_lte_i_129777 = sle64((int64_t) 0, start_129770);
                bool i_lte_j_129778 = sle64(start_129770, loop_dz2084Uz2082U_129693);
                bool y_129779 = i_p_m_t_s_leq_w_129776 && zzero_lte_i_129777;
                bool y_129780 = zzero_leq_i_p_m_t_s_129775 && y_129779;
                bool forwards_ok_129781 = i_lte_j_129778 && y_129780;
                bool ok_or_empty_129782 = empty_slice_129772 || forwards_ok_129781;
                bool index_certs_129783;
                
                if (!ok_or_empty_129782) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129770, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129693, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129784 = slt64(m_129707, j_m_i_129771);
                bool y_129785 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129784;
                bool forwards_ok_129786 = i_lte_j_129709 && y_129785;
                bool ok_or_empty_129787 = zzero_129699 || forwards_ok_129786;
                bool index_certs_129788;
                
                if (!ok_or_empty_129787) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) j_m_i_129771, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:109:36-40\n   #8  ftRelational.fut:106:9-109:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129710) {
                    int64_t dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129730) {
                        int64_t head_res_131697 = ((int64_t *) mem_param_139662.mem)[start_129770];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129770];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129697 + start_129770;
                        int64_t head_res_131700 = ((int64_t *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129698; nest_i_140347++) {
                        ((int64_t *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139742, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129698; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129698; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129720;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129697);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129720);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129697 + j_131711;
                                int64_t slice_131721 = start_129770 + slice_131720;
                                int64_t leq_arg1_131722 = ((int64_t *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129770 + i_131708;
                                int64_t leq_arg0_131727 = ((int64_t *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = sle64(leq_arg0_131727, leq_arg1_131722);
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        int64_t loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129697);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129770 + i_131708;
                            int64_t tmp_131738 = ((int64_t *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129720);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:109:36-40\n   #9  ftRelational.fut:106:9-109:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129697 + j_131711;
                            int64_t slice_131745 = start_129770 + slice_131744;
                            int64_t tmp_131746 = ((int64_t *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((int64_t *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140837 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140837, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140838 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140838, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719; i_139384++) {
                        int64_t split_count_arg3_129850 = mul64(merge_block_sizze_129583, i_139384);
                        int64_t defunc_0_split_count_res_129851;
                        int64_t defunc_0_split_count_res_129852;
                        int64_t defunc_0_split_count_res_129853;
                        int64_t defunc_0_split_count_res_129854;
                        int64_t defunc_0_split_count_res_129855;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129851, &defunc_0_split_count_res_129852, &defunc_0_split_count_res_129853, &defunc_0_split_count_res_129854, &defunc_0_split_count_res_129855, (int64_t) 0, stride_129697, (int64_t) 0, j_m_i_129720, split_count_arg3_129850) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129856 = slt64((int64_t) 0, defunc_0_split_count_res_129855);
                        bool defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        int64_t defunc_0_split_count_res_129862;
                        bool loop_while_129863;
                        int64_t ss_129864;
                        int64_t ss_129865;
                        int64_t tt_129866;
                        int64_t tt_129867;
                        int64_t count_129868;
                        
                        loop_while_129863 = loop_cond_129856;
                        ss_129864 = defunc_0_split_count_res_129851;
                        ss_129865 = defunc_0_split_count_res_129852;
                        tt_129866 = defunc_0_split_count_res_129853;
                        tt_129867 = defunc_0_split_count_res_129854;
                        count_129868 = defunc_0_split_count_res_129855;
                        while (loop_while_129863) {
                            int64_t zlze_lhs_129869 = sub64(ss_129865, ss_129864);
                            bool cond_129870 = sle64(zlze_lhs_129869, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129871;
                            int64_t defunc_0_lifted_step_res_129872;
                            int64_t defunc_0_lifted_step_res_129873;
                            int64_t defunc_0_lifted_step_res_129874;
                            
                            if (cond_129870) {
                                int64_t tmp_131750 = add64(tt_129866, count_129868);
                                
                                defunc_0_lifted_step_res_129871 = ss_129864;
                                defunc_0_lifted_step_res_129872 = tmp_131750;
                                defunc_0_lifted_step_res_129873 = tt_129867;
                                defunc_0_lifted_step_res_129874 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129876 = sub64(tt_129867, tt_129866);
                                bool cond_129877 = sle64(zlze_lhs_129876, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129878;
                                int64_t defunc_0_lifted_step_res_f_res_129879;
                                int64_t defunc_0_lifted_step_res_f_res_129880;
                                int64_t defunc_0_lifted_step_res_f_res_129881;
                                
                                if (cond_129877) {
                                    int64_t tmp_131751 = add64(ss_129864, count_129868);
                                    
                                    defunc_0_lifted_step_res_f_res_129878 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129879 = tt_129866;
                                    defunc_0_lifted_step_res_f_res_129880 = tt_129867;
                                    defunc_0_lifted_step_res_f_res_129881 = (int64_t) 0;
                                } else {
                                    bool cond_129883 = count_129868 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129884;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129885;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129886;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129887;
                                    
                                    if (cond_129883) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129864);
                                        bool y_131754 = slt64(ss_129864, stride_129697);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129864, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:109:36-40\n   #13 ftRelational.fut:106:9-109:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129866);
                                        bool y_131760 = slt64(tt_129866, j_m_i_129720);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129866, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:109:36-40\n   #13 ftRelational.fut:106:9-109:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129770 + ss_129864;
                                        int64_t leq_arg1_131758 = ((int64_t *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129697 + tt_129866;
                                        int64_t slice_131764 = start_129770 + slice_131763;
                                        int64_t leq_arg0_131765 = ((int64_t *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = sle64(leq_arg0_131765, leq_arg1_131758);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129866);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129864;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129864);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129866;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = tt_129867;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = (int64_t) 0;
                                    } else {
                                        int64_t m_129906 = sdiv64(count_129868, (int64_t) 2);
                                        int64_t n_129907 = sub64(count_129868, m_129906);
                                        bool cond_129908 = n_129907 == (int64_t) 0;
                                        int64_t zgze_lhs_129909 = add64(ss_129864, m_129906);
                                        bool cond_f_res_129910 = sle64(ss_129865, zgze_lhs_129909);
                                        bool x_129911 = !cond_129908;
                                        bool y_129912 = cond_f_res_129910 && x_129911;
                                        bool cond_129913 = cond_129908 || y_129912;
                                        bool leq_y_x_129914;
                                        
                                        if (cond_129913) {
                                            leq_y_x_129914 = 1;
                                        } else {
                                            bool x_129915 = sle64((int64_t) 0, zgze_lhs_129909);
                                            bool y_129916 = slt64(zgze_lhs_129909, stride_129697);
                                            bool bounds_check_129917 = x_129915 && y_129916;
                                            bool index_certs_129918;
                                            
                                            if (!bounds_check_129917) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129909, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:109:36-40\n   #13 ftRelational.fut:106:9-109:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129921 = add64(tt_129866, n_129907);
                                            int64_t leq_arg0_129922 = sub64(zm_lhs_129921, (int64_t) 1);
                                            bool x_129923 = sle64((int64_t) 0, leq_arg0_129922);
                                            bool y_129924 = slt64(leq_arg0_129922, j_m_i_129720);
                                            bool bounds_check_129925 = x_129923 && y_129924;
                                            bool index_certs_129926;
                                            
                                            if (!bounds_check_129925) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129922, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:109:36-40\n   #13 ftRelational.fut:106:9-109:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129919 = start_129770 + zgze_lhs_129909;
                                            int64_t leq_arg1_129920 = ((int64_t *) mem_param_139662.mem)[slice_129919];
                                            int64_t slice_129927 = stride_129697 + leq_arg0_129922;
                                            int64_t slice_129928 = start_129770 + slice_129927;
                                            int64_t leq_arg0_129929 = ((int64_t *) mem_param_139662.mem)[slice_129928];
                                            bool defunc_0_leq_res_129930 = sle64(leq_arg0_129929, leq_arg1_129920);
                                            
                                            leq_y_x_129914 = defunc_0_leq_res_129930;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                        
                                        if (leq_y_x_129914) {
                                            int64_t tmp_131771 = add64(tt_129866, n_129907);
                                            int64_t tmp_131772 = sub64(count_129868, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tt_129867;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = tmp_131772;
                                        } else {
                                            int64_t tmp_129936 = add64(tt_129866, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tt_129866;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tmp_129936;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = count_129868;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = ss_129864;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                    }
                                    defunc_0_lifted_step_res_f_res_129878 = defunc_0_lifted_step_res_f_res_f_res_129884;
                                    defunc_0_lifted_step_res_f_res_129879 = defunc_0_lifted_step_res_f_res_f_res_129885;
                                    defunc_0_lifted_step_res_f_res_129880 = defunc_0_lifted_step_res_f_res_f_res_129886;
                                    defunc_0_lifted_step_res_f_res_129881 = defunc_0_lifted_step_res_f_res_f_res_129887;
                                }
                                defunc_0_lifted_step_res_129871 = defunc_0_lifted_step_res_f_res_129878;
                                defunc_0_lifted_step_res_129872 = defunc_0_lifted_step_res_f_res_129879;
                                defunc_0_lifted_step_res_129873 = defunc_0_lifted_step_res_f_res_129880;
                                defunc_0_lifted_step_res_129874 = defunc_0_lifted_step_res_f_res_129881;
                            }
                            
                            int64_t loopres_129937;
                            int64_t loopres_129938;
                            int64_t loopres_129939;
                            int64_t loopres_129940;
                            int64_t loopres_129941;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129937, &loopres_129938, &loopres_129939, &loopres_129940, &loopres_129941, defunc_0_lifted_step_res_129871, ss_129865, defunc_0_lifted_step_res_129872, defunc_0_lifted_step_res_129873, defunc_0_lifted_step_res_129874) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129942 = slt64((int64_t) 0, loopres_129941);
                            bool loop_while_tmp_140354 = loop_cond_129942;
                            int64_t ss_tmp_140355 = loopres_129937;
                            int64_t ss_tmp_140356 = loopres_129938;
                            int64_t tt_tmp_140357 = loopres_129939;
                            int64_t tt_tmp_140358 = loopres_129940;
                            int64_t count_tmp_140359 = loopres_129941;
                            
                            loop_while_129863 = loop_while_tmp_140354;
                            ss_129864 = ss_tmp_140355;
                            ss_129865 = ss_tmp_140356;
                            tt_129866 = tt_tmp_140357;
                            tt_129867 = tt_tmp_140358;
                            count_129868 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129857 = loop_while_129863;
                        defunc_0_split_count_res_129858 = ss_129864;
                        defunc_0_split_count_res_129859 = ss_129865;
                        defunc_0_split_count_res_129860 = tt_129866;
                        defunc_0_split_count_res_129861 = tt_129867;
                        defunc_0_split_count_res_129862 = count_129868;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129858;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129860;
                    }
                    if (mem_139698_cached_sizze_140839 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140839, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140840 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140840, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129718; i_139391++) {
                        bool y_129948 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool index_certs_129950;
                        
                        if (!y_129948) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:109:36-40\n   #10 ftRelational.fut:106:9-109:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129951 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129952 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129953 = add64((int64_t) 1, i_139391);
                        bool x_129954 = sle64((int64_t) 0, tmp_129953);
                        bool y_129955 = slt64(tmp_129953, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool bounds_check_129956 = x_129954 && y_129955;
                        bool index_certs_129957;
                        
                        if (!bounds_check_129956) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129953, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:109:36-40\n   #10 ftRelational.fut:106:9-109:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139681)[tmp_129953];
                        int64_t defunc_0_f_res_129959 = ((int64_t *) mem_139683)[tmp_129953];
                        int64_t merge_sequential_arg2_129960 = add64(stride_129697, defunc_0_f_res_129952);
                        int64_t merge_sequential_arg2_129961 = add64(stride_129697, defunc_0_f_res_129959);
                        int64_t j_m_i_129962 = sub64(merge_sequential_arg2_129961, merge_sequential_arg2_129960);
                        bool empty_slice_129963 = j_m_i_129962 == (int64_t) 0;
                        int64_t m_129964 = sub64(j_m_i_129962, (int64_t) 1);
                        int64_t i_p_m_t_s_129965 = add64(merge_sequential_arg2_129960, m_129964);
                        bool zzero_leq_i_p_m_t_s_129966 = sle64((int64_t) 0, i_p_m_t_s_129965);
                        bool i_p_m_t_s_leq_w_129967 = slt64(i_p_m_t_s_129965, next_stride_129698);
                        bool zzero_lte_i_129968 = sle64((int64_t) 0, merge_sequential_arg2_129960);
                        bool i_lte_j_129969 = sle64(merge_sequential_arg2_129960, merge_sequential_arg2_129961);
                        bool y_129970 = i_p_m_t_s_leq_w_129967 && zzero_lte_i_129968;
                        bool y_129971 = zzero_leq_i_p_m_t_s_129966 && y_129970;
                        bool forwards_ok_129972 = i_lte_j_129969 && y_129971;
                        bool ok_or_empty_129973 = empty_slice_129963 || forwards_ok_129972;
                        bool index_certs_129974;
                        
                        if (!ok_or_empty_129973) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129960, ":", (long long) merge_sequential_arg2_129961, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:109:36-40\n   #10 ftRelational.fut:106:9-109:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129975 = sub64(defunc_0_f_res_129958, defunc_0_f_res_129951);
                        bool empty_slice_129976 = j_m_i_129975 == (int64_t) 0;
                        int64_t m_129977 = sub64(j_m_i_129975, (int64_t) 1);
                        int64_t i_p_m_t_s_129978 = add64(defunc_0_f_res_129951, m_129977);
                        bool zzero_leq_i_p_m_t_s_129979 = sle64((int64_t) 0, i_p_m_t_s_129978);
                        bool i_p_m_t_s_leq_w_129980 = slt64(i_p_m_t_s_129978, next_stride_129698);
                        bool zzero_lte_i_129981 = sle64((int64_t) 0, defunc_0_f_res_129951);
                        bool i_lte_j_129982 = sle64(defunc_0_f_res_129951, defunc_0_f_res_129958);
                        bool y_129983 = i_p_m_t_s_leq_w_129980 && zzero_lte_i_129981;
                        bool y_129984 = zzero_leq_i_p_m_t_s_129979 && y_129983;
                        bool forwards_ok_129985 = i_lte_j_129982 && y_129984;
                        bool ok_or_empty_129986 = empty_slice_129976 || forwards_ok_129985;
                        bool index_certs_129987;
                        
                        if (!ok_or_empty_129986) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129951, ":", (long long) defunc_0_f_res_129958, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:109:36-40\n   #10 ftRelational.fut:106:9-109:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129988 = slt64((int64_t) 0, j_m_i_129975);
                        int64_t dummy_129989;
                        int64_t dummy_129990;
                        
                        if (cond_129988) {
                            bool index_certs_131773;
                            
                            if (!cond_129988) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:109:36-40\n   #12 ftRelational.fut:106:9-109:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129770 + defunc_0_f_res_129951;
                            int64_t head_res_131775 = ((int64_t *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129989 = head_res_131775;
                            dummy_129990 = head_res_131776;
                        } else {
                            bool y_129995 = slt64((int64_t) 0, j_m_i_129962);
                            bool index_certs_129996;
                            
                            if (!y_129995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:109:36-40\n   #12 ftRelational.fut:106:9-109:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_129997 = start_129770 + merge_sequential_arg2_129960;
                            int64_t head_res_129998 = ((int64_t *) mem_param_139662.mem)[slice_129997];
                            int64_t head_res_129999 = ((int64_t *) mem_param_139665.mem)[slice_129997];
                            
                            dummy_129989 = head_res_129998;
                            dummy_129990 = head_res_129999;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129583; nest_i_140362++) {
                            ((int64_t *) mem_139698)[i_139391 * merge_block_sizze_129583 + nest_i_140362] = dummy_129989;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129583; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + nest_i_140363] = dummy_129990;
                        }
                        
                        int64_t data_130002;
                        int64_t i_130006 = (int64_t) 0;
                        
                        for (int64_t k_130005 = 0; k_130005 < merge_block_sizze_129583; k_130005++) {
                            int64_t j_130009 = sub64(k_130005, i_130006);
                            bool cond_130010 = j_130009 == j_m_i_129962;
                            bool cond_130011;
                            
                            if (cond_130010) {
                                cond_130011 = 1;
                            } else {
                                bool cond_130012 = slt64(i_130006, j_m_i_129975);
                                bool cond_f_res_130013;
                                
                                if (cond_130012) {
                                    bool x_131777 = sle64((int64_t) 0, j_130009);
                                    bool y_131778 = slt64(j_130009, j_m_i_129962);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:109:36-40\n   #11 ftRelational.fut:106:9-109:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130006);
                                    bool bounds_check_131785 = cond_130012 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:109:36-40\n   #11 ftRelational.fut:106:9-109:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129960 + j_130009;
                                    int64_t slice_131782 = start_129770 + slice_131781;
                                    int64_t leq_arg1_131783 = ((int64_t *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129951 + i_130006;
                                    int64_t slice_131788 = start_129770 + slice_131787;
                                    int64_t leq_arg0_131789 = ((int64_t *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = sle64(leq_arg0_131789, leq_arg1_131783);
                                    
                                    cond_f_res_130013 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130013 = 0;
                                }
                                cond_130011 = cond_f_res_130013;
                            }
                            
                            int64_t loopres_130028;
                            int64_t loopres_130029;
                            int64_t loopres_130030;
                            
                            if (cond_130011) {
                                bool x_131792 = sle64((int64_t) 0, i_130006);
                                bool y_131793 = slt64(i_130006, j_m_i_129975);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:109:36-40\n   #11 ftRelational.fut:106:9-109:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130006);
                                int64_t slice_131796 = defunc_0_f_res_129951 + i_130006;
                                int64_t slice_131797 = start_129770 + slice_131796;
                                int64_t tmp_131798 = ((int64_t *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130028 = tmp_131791;
                                loopres_130029 = tmp_131798;
                                loopres_130030 = tmp_131799;
                            } else {
                                bool x_130040 = sle64((int64_t) 0, j_130009);
                                bool y_130041 = slt64(j_130009, j_m_i_129962);
                                bool bounds_check_130042 = x_130040 && y_130041;
                                bool index_certs_130043;
                                
                                if (!bounds_check_130042) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:109:36-40\n   #11 ftRelational.fut:106:9-109:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130044 = merge_sequential_arg2_129960 + j_130009;
                                int64_t slice_130045 = start_129770 + slice_130044;
                                int64_t tmp_130046 = ((int64_t *) mem_param_139662.mem)[slice_130045];
                                int64_t tmp_130047 = ((int64_t *) mem_param_139665.mem)[slice_130045];
                                
                                loopres_130028 = i_130006;
                                loopres_130029 = tmp_130046;
                                loopres_130030 = tmp_130047;
                            }
                            ((int64_t *) mem_139698)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130029;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130030;
                            
                            int64_t i_tmp_140364 = loopres_130028;
                            
                            i_130006 = i_tmp_140364;
                        }
                        data_130002 = i_130006;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139697, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139668, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130054 = next_stride_129698 * num_merges_129702;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            if (memblock_alloc(ctx, &mem_139778, bytes_139667, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            
            bool loop_cond_130057 = slt64(next_stride_129698, flat_dim_129579);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130054;
            bool loop_while_tmp_140341 = loop_cond_130057;
            int64_t stride_tmp_140344 = next_stride_129698;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129693 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129694 = loop_while_tmp_140341;
            stride_129697 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129688 = loop_dz2084Uz2082U_129693;
        data_129689 = loop_while_129694;
        data_129692 = stride_129697;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130058 = n_79615 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130059 = sle64((int64_t) 0, zs_lhs_129563);
        bool i_p_m_t_s_leq_w_130060 = slt64(zs_lhs_129563, data_129688);
        bool y_130061 = zzero_leq_i_p_m_t_s_130059 && i_p_m_t_s_leq_w_130060;
        bool ok_or_empty_130062 = empty_slice_130058 || y_130061;
        bool index_certs_130063;
        
        if (!ok_or_empty_130062) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_79615, "] out of bounds for array of shape [", (long long) data_129688, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:109:36-40\n   #6  ftRelational.fut:106:9-109:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139582, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_79615; i_139405++) {
        int64_t eta_p_130071 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130072 = sle64((int64_t) 0, eta_p_130071);
        bool y_130073 = slt64(eta_p_130071, n_79615);
        bool bounds_check_130074 = x_130072 && y_130073;
        bool index_certs_130075;
        
        if (!bounds_check_130074) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130071, "] out of bounds for array of shape [", (long long) n_79615, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:109:36-40\n   #5  ftRelational.fut:106:9-109:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130076 = ((int64_t *) k_mem_139580.mem)[eta_p_130071];
        
        ((int64_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130076;
        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139792.mem, i_139405 * b_79616, (int64_t []) {(int64_t) 1}, (uint8_t *) pL_mem_139581.mem, eta_p_130071 * b_79616, (int64_t []) {(int64_t) 1}, (int64_t []) {b_79616});
    }
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140829, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140830, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortRelation_short(struct futhark_context *ctx, struct memblock *mem_out_p_140841, struct memblock *mem_out_p_140842, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_74895, int64_t b_74896)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139586_cached_sizze_140843 = 0;
    unsigned char *mem_139586 = NULL;
    int64_t mem_139589_cached_sizze_140844 = 0;
    unsigned char *mem_139589 = NULL;
    int64_t mem_139599_cached_sizze_140845 = 0;
    unsigned char *mem_139599 = NULL;
    int64_t mem_139601_cached_sizze_140846 = 0;
    unsigned char *mem_139601 = NULL;
    int64_t mem_139668_cached_sizze_140847 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139671_cached_sizze_140848 = 0;
    unsigned char *mem_139671 = NULL;
    int64_t mem_139681_cached_sizze_140849 = 0;
    unsigned char *mem_139681 = NULL;
    int64_t mem_139683_cached_sizze_140850 = 0;
    unsigned char *mem_139683 = NULL;
    int64_t mem_139698_cached_sizze_140851 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139701_cached_sizze_140852 = 0;
    unsigned char *mem_139701 = NULL;
    struct memblock mem_139792;
    
    mem_139792.references = NULL;
    
    struct memblock mem_139790;
    
    mem_139790.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_139778;
    
    mem_139778.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139740;
    
    mem_139740.references = NULL;
    
    struct memblock mem_139736;
    
    mem_139736.references = NULL;
    
    struct memblock mem_139745;
    
    mem_139745.references = NULL;
    
    struct memblock mem_139743;
    
    mem_139743.references = NULL;
    
    struct memblock ext_mem_139760;
    
    ext_mem_139760.references = NULL;
    
    struct memblock ext_mem_139763;
    
    ext_mem_139763.references = NULL;
    
    struct memblock mem_param_139665;
    
    mem_param_139665.references = NULL;
    
    struct memblock mem_param_139662;
    
    mem_param_139662.references = NULL;
    
    struct memblock ext_mem_139784;
    
    ext_mem_139784.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock mem_139658;
    
    mem_139658.references = NULL;
    
    struct memblock mem_139654;
    
    mem_139654.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_74895;
    bool cond_129562 = sle64(n_74895, (int64_t) 1);
    int64_t zs_lhs_129563 = sub64(n_74895, (int64_t) 1);
    int64_t zp_rhs_129564 = sdiv_safe64(zs_lhs_129563, (int64_t) 20);
    int64_t min_num_blocks_129565 = add64((int64_t) 1, zp_rhs_129564);
    bool loop_cond_129566 = slt64((int64_t) 1, min_num_blocks_129565);
    bool smallest_pow_2_geq_than_res_129567;
    int64_t smallest_pow_2_geq_than_res_129568;
    bool loop_while_129569;
    int64_t x_129570;
    
    loop_while_129569 = loop_cond_129566;
    x_129570 = (int64_t) 1;
    while (loop_while_129569) {
        int64_t loopres_129571 = mul64((int64_t) 2, x_129570);
        bool loop_cond_129572 = slt64(loopres_129571, min_num_blocks_129565);
        bool loop_while_tmp_140322 = loop_cond_129572;
        int64_t x_tmp_140323 = loopres_129571;
        
        loop_while_129569 = loop_while_tmp_140322;
        x_129570 = x_tmp_140323;
    }
    smallest_pow_2_geq_than_res_129567 = loop_while_129569;
    smallest_pow_2_geq_than_res_129568 = x_129570;
    
    bool zzero_129573 = smallest_pow_2_geq_than_res_129568 == (int64_t) 0;
    bool nonzzero_129574 = !zzero_129573;
    bool protect_assert_disj_129575 = cond_129562 || nonzzero_129574;
    bool nonzzero_cert_129576;
    
    if (!protect_assert_disj_129575) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:101:36-40\n   #5  ftRelational.fut:98:9-101:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_129577 = sdiv_safe64(zs_lhs_129563, smallest_pow_2_geq_than_res_129568);
    int64_t block_sizze_129578 = add64((int64_t) 1, zp_rhs_129577);
    bool y_129584 = slt64((int64_t) 0, n_74895);
    bool protect_assert_disj_140188 = cond_129562 || y_129584;
    bool index_certs_129585;
    
    if (!protect_assert_disj_140188) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_74895, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:101:36-40\n   #5  ftRelational.fut:98:9-101:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129599 = slt64(smallest_pow_2_geq_than_res_129568, (int64_t) 0);
    bool valid_129600 = !bounds_invalid_upwards_129599;
    bool protect_assert_disj_140196 = cond_129562 || valid_129600;
    bool range_valid_c_129601;
    
    if (!protect_assert_disj_140196) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_129568, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:101:36-40\n   #6  ftRelational.fut:98:9-101:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_129603 = slt64(block_sizze_129578, (int64_t) 0);
    bool valid_129604 = !bounds_invalid_upwards_129603;
    bool protect_assert_disj_140198 = cond_129562 || valid_129604;
    bool range_valid_c_129605;
    
    if (!protect_assert_disj_140198) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_129578, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_129607 = sle64(block_sizze_129578, (int64_t) 1);
    int64_t tmp_129608 = sub64(block_sizze_129578, (int64_t) 2);
    bool bounds_invalid_upwards_129609 = slt64(tmp_129608, (int64_t) 0);
    bool valid_129611 = !bounds_invalid_upwards_129609;
    bool protect_assert_disj_129612 = cond_129607 || valid_129611;
    bool protect_assert_disj_140200 = cond_129562 || protect_assert_disj_129612;
    bool range_valid_c_129613;
    
    if (!protect_assert_disj_140200) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_129608, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139789 = (int64_t) 2 * n_74895;
    int64_t bytes_139791 = n_74895 * b_74896;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140324 = 0; i_140324 < n_74895; i_140324++) {
        int64_t x_140325 = (int64_t) 0 + i_140324 * (int64_t) 1;
        
        ((int64_t *) mem_139583.mem)[i_140324] = x_140325;
    }
    
    int64_t flat_dim_129579 = smallest_pow_2_geq_than_res_129568 * block_sizze_129578;
    bool x_140183 = !cond_129562;
    int64_t greatest_divisor_leq_than_arg1_129582 = mul64((int64_t) 2, block_sizze_129578);
    int64_t merge_block_sizze_129583;
    
    if (x_140183) {
        int64_t x_140185;
        
        if (futrts_greatest_divisor_leq_than_5357(ctx, &x_140185, (int64_t) 8, greatest_divisor_leq_than_arg1_129582) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_129583 = x_140185;
    } else {
        merge_block_sizze_129583 = (int64_t) 0;
    }
    
    int16_t reduce_arg1_129586;
    
    if (x_140183) {
        int16_t x_140189 = ((int16_t *) k_mem_139580.mem)[(int64_t) 0];
        
        reduce_arg1_129586 = x_140189;
    } else {
        reduce_arg1_129586 = (int16_t) 0;
    }
    
    int16_t defunc_0_reduce_res_131806;
    int64_t defunc_0_reduce_res_131807;
    
    if (x_140183) {
        int16_t x_140191;
        int64_t x_140192;
        int16_t redout_139363;
        int64_t redout_139364;
        
        redout_139363 = reduce_arg1_129586;
        redout_139364 = (int64_t) 0;
        for (int64_t i_139365 = 0; i_139365 < n_74895; i_139365++) {
            int16_t x_129590 = ((int16_t *) k_mem_139580.mem)[i_139365];
            bool defunc_0_leq_res_129596 = sle16(redout_139363, x_129590);
            int16_t defunc_0_op_res_129597;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129597 = x_129590;
            } else {
                defunc_0_op_res_129597 = redout_139363;
            }
            
            int64_t defunc_0_op_res_129598;
            
            if (defunc_0_leq_res_129596) {
                defunc_0_op_res_129598 = i_139365;
            } else {
                defunc_0_op_res_129598 = redout_139364;
            }
            
            int16_t redout_tmp_140326 = defunc_0_op_res_129597;
            int64_t redout_tmp_140327 = defunc_0_op_res_129598;
            
            redout_139363 = redout_tmp_140326;
            redout_139364 = redout_tmp_140327;
        }
        x_140191 = redout_139363;
        x_140192 = redout_139364;
        defunc_0_reduce_res_131806 = x_140191;
        defunc_0_reduce_res_131807 = x_140192;
    } else {
        defunc_0_reduce_res_131806 = (int16_t) 0;
        defunc_0_reduce_res_131807 = (int64_t) 0;
    }
    
    int64_t distance_129610 = add64((int64_t) 1, tmp_129608);
    int64_t binop_x_139584 = (int64_t) 2 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139585 = block_sizze_129578 * binop_x_139584;
    int64_t binop_x_139587 = (int64_t) 8 * smallest_pow_2_geq_than_res_129568;
    int64_t bytes_139588 = block_sizze_129578 * binop_x_139587;
    int64_t bytes_139600 = (int64_t) 8 * block_sizze_129578;
    bool loop_cond_129685 = slt64(block_sizze_129578, flat_dim_129579);
    bool zzero_129686 = merge_block_sizze_129583 == (int64_t) 0;
    bool nonzzero_129687 = !zzero_129686;
    
    if (cond_129562) {
        if (memblock_set(ctx, &ext_mem_139788, &mem_139583, "mem_139583") != 0)
            return 1;
    } else {
        if (mem_139586_cached_sizze_140843 < bytes_139585) {
            err = lexical_realloc(ctx, &mem_139586, &mem_139586_cached_sizze_140843, bytes_139585);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139589_cached_sizze_140844 < bytes_139588) {
            err = lexical_realloc(ctx, &mem_139589, &mem_139589_cached_sizze_140844, bytes_139588);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139599_cached_sizze_140845 < greatest_divisor_leq_than_arg1_129582) {
            err = lexical_realloc(ctx, &mem_139599, &mem_139599_cached_sizze_140845, greatest_divisor_leq_than_arg1_129582);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_139601_cached_sizze_140846 < bytes_139600) {
            err = lexical_realloc(ctx, &mem_139601, &mem_139601_cached_sizze_140846, bytes_139600);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_139377 = 0; i_139377 < smallest_pow_2_geq_than_res_129568; i_139377++) {
            int64_t zp_lhs_129617 = mul64(block_sizze_129578, i_139377);
            
            for (int64_t i_139370 = 0; i_139370 < block_sizze_129578; i_139370++) {
                int64_t k_129621 = add64(zp_lhs_129617, i_139370);
                bool cond_129622 = slt64(k_129621, n_74895);
                int16_t lifted_lambda_res_129623;
                int64_t lifted_lambda_res_129624;
                
                if (cond_129622) {
                    bool x_131659 = sle64((int64_t) 0, k_129621);
                    bool bounds_check_131660 = cond_129622 && x_131659;
                    bool index_certs_131661;
                    
                    if (!bounds_check_131660) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_129621, "] out of bounds for array of shape [", (long long) n_74895, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t lifted_lambda_res_t_res_131662 = ((int16_t *) k_mem_139580.mem)[k_129621];
                    
                    lifted_lambda_res_129623 = lifted_lambda_res_t_res_131662;
                    lifted_lambda_res_129624 = k_129621;
                } else {
                    lifted_lambda_res_129623 = defunc_0_reduce_res_131806;
                    lifted_lambda_res_129624 = defunc_0_reduce_res_131807;
                }
                ((int16_t *) mem_139599)[i_139370] = lifted_lambda_res_129623;
                ((int64_t *) mem_139601)[i_139370] = lifted_lambda_res_129624;
            }
            if (!cond_129607) {
                for (int64_t i_129634 = 0; i_129634 < distance_129610; i_129634++) {
                    int64_t gt_arg1_129637 = add64((int64_t) 1, i_129634);
                    bool x_129638 = sle64((int64_t) 0, gt_arg1_129637);
                    bool y_129639 = slt64(gt_arg1_129637, block_sizze_129578);
                    bool bounds_check_129640 = x_129638 && y_129639;
                    bool index_certs_129641;
                    
                    if (!bounds_check_129640) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_129637, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_129643 = slt64(i_129634, block_sizze_129578);
                    bool index_certs_129644;
                    
                    if (!y_129643) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_129634, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t gt_arg1_129642 = ((int16_t *) mem_139599)[gt_arg1_129637];
                    int16_t gt_arg0_129645 = ((int16_t *) mem_139599)[i_129634];
                    bool defunc_0_leq_res_129646 = sle16(gt_arg0_129645, gt_arg1_129642);
                    bool defunc_0_lifted_gt_res_129647 = !defunc_0_leq_res_129646;
                    bool s_129648;
                    int64_t s_129651;
                    bool loop_while_129652;
                    int64_t j_129655;
                    
                    loop_while_129652 = defunc_0_lifted_gt_res_129647;
                    j_129655 = i_129634;
                    while (loop_while_129652) {
                        bool x_129656 = sle64((int64_t) 0, j_129655);
                        bool y_129657 = slt64(j_129655, block_sizze_129578);
                        bool bounds_check_129658 = x_129656 && y_129657;
                        bool index_certs_129659;
                        
                        if (!bounds_check_129658) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_129655, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_129662 = add64((int64_t) 1, j_129655);
                        bool x_129663 = sle64((int64_t) 0, copy_arg0_129662);
                        bool y_129664 = slt64(copy_arg0_129662, block_sizze_129578);
                        bool bounds_check_129665 = x_129663 && y_129664;
                        bool index_certs_129666;
                        
                        if (!bounds_check_129665) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_129662, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int16_t copy_arg0_129660 = ((int16_t *) mem_139599)[j_129655];
                        int64_t copy_arg0_129661 = ((int64_t *) mem_139601)[j_129655];
                        int16_t copy_arg0_129667 = ((int16_t *) mem_139599)[copy_arg0_129662];
                        int64_t copy_arg0_129668 = ((int64_t *) mem_139601)[copy_arg0_129662];
                        
                        ((int16_t *) mem_139599)[j_129655] = copy_arg0_129667;
                        ((int64_t *) mem_139601)[j_129655] = copy_arg0_129668;
                        ((int16_t *) mem_139599)[copy_arg0_129662] = copy_arg0_129660;
                        ((int64_t *) mem_139601)[copy_arg0_129662] = copy_arg0_129661;
                        
                        int64_t tmp_129673 = sub64(j_129655, (int64_t) 1);
                        bool cond_129674 = sle64((int64_t) 0, tmp_129673);
                        bool loop_cond_129675;
                        
                        if (cond_129674) {
                            bool y_131664 = slt64(tmp_129673, block_sizze_129578);
                            bool bounds_check_131665 = cond_129674 && y_131664;
                            bool index_certs_131666;
                            
                            if (!bounds_check_131665) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129673, "] out of bounds for array of shape [", (long long) block_sizze_129578, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int16_t gt_arg1_131663 = ((int16_t *) mem_139599)[j_129655];
                            int16_t gt_arg0_131667 = ((int16_t *) mem_139599)[tmp_129673];
                            bool defunc_0_leq_res_131668 = sle16(gt_arg0_131667, gt_arg1_131663);
                            bool defunc_0_lifted_gt_res_131669 = !defunc_0_leq_res_131668;
                            
                            loop_cond_129675 = defunc_0_lifted_gt_res_131669;
                        } else {
                            loop_cond_129675 = 0;
                        }
                        
                        bool loop_while_tmp_140334 = loop_cond_129675;
                        int64_t j_tmp_140337 = tmp_129673;
                        
                        loop_while_129652 = loop_while_tmp_140334;
                        j_129655 = j_tmp_140337;
                    }
                    s_129648 = loop_while_129652;
                    s_129651 = j_129655;
                }
            }
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_139586, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139599, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139589, i_139377 * block_sizze_129578, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139601, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_129578});
        }
        if (memblock_alloc(ctx, &mem_139654, bytes_139585, "mem_139654")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 2, (uint16_t *) mem_139654.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint16_t *) mem_139586, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        if (memblock_alloc(ctx, &mem_139658, bytes_139588, "mem_139658")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_139658.mem, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (uint64_t *) mem_139589, (int64_t) 0, (int64_t []) {block_sizze_129578, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_129568, block_sizze_129578});
        
        int64_t data_129688;
        bool data_129689;
        int64_t data_129692;
        int64_t loop_dz2084Uz2082U_129693;
        bool loop_while_129694;
        int64_t stride_129697;
        
        if (memblock_set(ctx, &mem_param_139662, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139665, &mem_139658, "mem_139658") != 0)
            return 1;
        loop_dz2084Uz2082U_129693 = flat_dim_129579;
        loop_while_129694 = loop_cond_129685;
        stride_129697 = block_sizze_129578;
        while (loop_while_129694) {
            int64_t next_stride_129698 = mul64((int64_t) 2, stride_129697);
            bool zzero_129699 = next_stride_129698 == (int64_t) 0;
            bool nonzzero_129700 = !zzero_129699;
            bool nonzzero_cert_129701;
            
            if (!nonzzero_129700) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:101:36-40\n   #5  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_129702 = sdiv64(flat_dim_129579, next_stride_129698);
            bool bounds_invalid_upwards_129703 = slt64(num_merges_129702, (int64_t) 0);
            bool valid_129704 = !bounds_invalid_upwards_129703;
            bool range_valid_c_129705;
            
            if (!valid_129704) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_129702, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:101:36-40\n   #6  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_129707 = sub64(next_stride_129698, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_129708 = sle64((int64_t) 0, m_129707);
            bool cond_129710 = slt64(next_stride_129698, (int64_t) 10);
            bool protect_assert_disj_129711 = nonzzero_129687 || cond_129710;
            bool nonzzero_cert_129712;
            
            if (!protect_assert_disj_129711) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_129713 = smod_safe64(next_stride_129698, merge_block_sizze_129583);
            bool num_blocks_129714 = zeze_lhs_129713 == (int64_t) 0;
            bool protect_assert_disj_129715 = cond_129710 || num_blocks_129714;
            bool assert_c_129716;
            
            if (!protect_assert_disj_129715) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_129718 = sdiv_safe64(next_stride_129698, merge_block_sizze_129583);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719 = add64((int64_t) 1, num_blocks_129718);
            int64_t j_m_i_129720 = sub64(next_stride_129698, stride_129697);
            int64_t flat_dim_129721 = merge_block_sizze_129583 * num_blocks_129718;
            bool bounds_invalid_upwards_129722 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, (int64_t) 0);
            bool empty_slice_129723 = j_m_i_129720 == (int64_t) 0;
            int64_t m_129724 = sub64(j_m_i_129720, (int64_t) 1);
            bool zzero_lte_i_129725 = sle64((int64_t) 0, stride_129697);
            bool i_lte_j_129726 = sle64(stride_129697, next_stride_129698);
            bool empty_slice_129727 = stride_129697 == (int64_t) 0;
            int64_t m_129728 = sub64(stride_129697, (int64_t) 1);
            bool bounds_invalid_upwards_129729 = slt64(num_blocks_129718, (int64_t) 0);
            bool cond_129730 = slt64((int64_t) 0, stride_129697);
            bool valid_129731 = !bounds_invalid_upwards_129722;
            int64_t i_p_m_t_s_129732 = add64(stride_129697, m_129724);
            bool zzero_leq_i_p_m_t_s_129733 = sle64((int64_t) 0, m_129728);
            bool i_p_m_t_s_leq_w_129734 = slt64(m_129728, next_stride_129698);
            bool valid_129735 = !bounds_invalid_upwards_129729;
            bool i_p_m_t_s_leq_w_129736 = slt64(m_129707, flat_dim_129721);
            bool y_129737 = slt64((int64_t) 0, j_m_i_129720);
            bool protect_assert_disj_129738 = cond_129710 || valid_129731;
            bool range_valid_c_129739;
            
            if (!protect_assert_disj_129738) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:101:36-40\n   #10 ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_129740 = sle64((int64_t) 0, i_p_m_t_s_129732);
            bool i_p_m_t_s_leq_w_129741 = slt64(i_p_m_t_s_129732, next_stride_129698);
            bool y_129742 = zzero_leq_i_p_m_t_s_129733 && i_p_m_t_s_leq_w_129734;
            bool protect_assert_disj_129743 = cond_129710 || valid_129735;
            bool range_valid_c_129744;
            
            if (!protect_assert_disj_129743) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_129718, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_129745 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129736;
            bool y_129746 = zzero_lte_i_129725 && i_p_m_t_s_leq_w_129741;
            bool forwards_ok_129747 = zzero_lte_i_129725 && y_129742;
            bool ok_or_empty_129748 = zzero_129699 || y_129745;
            bool protect_assert_disj_129749 = cond_129730 || y_129737;
            bool y_129750 = zzero_leq_i_p_m_t_s_129740 && y_129746;
            bool ok_or_empty_129751 = empty_slice_129727 || forwards_ok_129747;
            bool protect_assert_disj_129752 = cond_129710 || ok_or_empty_129748;
            bool index_certs_129753;
            
            if (!protect_assert_disj_129752) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) flat_dim_129721, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_129754 = !cond_129710;
            bool protect_assert_disj_129755 = protect_assert_disj_129749 || loop_not_taken_129754;
            bool index_certs_129756;
            
            if (!protect_assert_disj_129755) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:101:36-40\n   #10 ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_129757 = i_lte_j_129726 && y_129750;
            bool protect_assert_disj_129758 = cond_129710 || ok_or_empty_129751;
            bool index_certs_129759;
            
            if (!protect_assert_disj_129758) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:101:36-40\n   #11 ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129760 = ok_or_empty_129751 || loop_not_taken_129754;
            bool index_certs_129761;
            
            if (!protect_assert_disj_129760) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_129697, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_129762 = empty_slice_129723 || forwards_ok_129757;
            bool protect_assert_disj_129763 = cond_129710 || ok_or_empty_129762;
            bool index_certs_129764;
            
            if (!protect_assert_disj_129763) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:101:36-40\n   #11 ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_129765 = loop_not_taken_129754 || ok_or_empty_129762;
            bool index_certs_129766;
            
            if (!protect_assert_disj_129765) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_129697, ":] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_139666 = (int64_t) 2 * num_merges_129702;
            int64_t bytes_139667 = next_stride_129698 * binop_x_139666;
            int64_t binop_x_139669 = (int64_t) 8 * num_merges_129702;
            int64_t bytes_139670 = next_stride_129698 * binop_x_139669;
            bool i_lte_j_129709 = sle64((int64_t) 0, next_stride_129698);
            
            if (mem_139668_cached_sizze_140847 < bytes_139667) {
                err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140847, bytes_139667);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139671_cached_sizze_140848 < bytes_139670) {
                err = lexical_realloc(ctx, &mem_139671, &mem_139671_cached_sizze_140848, bytes_139670);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_139680 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719;
            int64_t binop_x_139696 = (int64_t) 2 * num_blocks_129718;
            int64_t bytes_139697 = merge_block_sizze_129583 * binop_x_139696;
            int64_t binop_x_139699 = (int64_t) 8 * num_blocks_129718;
            int64_t bytes_139700 = merge_block_sizze_129583 * binop_x_139699;
            int64_t bytes_139742 = (int64_t) 4 * stride_129697;
            int64_t bytes_139744 = (int64_t) 16 * stride_129697;
            
            for (int64_t i_139398 = 0; i_139398 < num_merges_129702; i_139398++) {
                int64_t start_129770 = mul64(next_stride_129698, i_139398);
                int64_t j_m_i_129771 = sub64(loop_dz2084Uz2082U_129693, start_129770);
                bool empty_slice_129772 = j_m_i_129771 == (int64_t) 0;
                int64_t m_129773 = sub64(j_m_i_129771, (int64_t) 1);
                int64_t i_p_m_t_s_129774 = add64(start_129770, m_129773);
                bool zzero_leq_i_p_m_t_s_129775 = sle64((int64_t) 0, i_p_m_t_s_129774);
                bool i_p_m_t_s_leq_w_129776 = slt64(i_p_m_t_s_129774, loop_dz2084Uz2082U_129693);
                bool zzero_lte_i_129777 = sle64((int64_t) 0, start_129770);
                bool i_lte_j_129778 = sle64(start_129770, loop_dz2084Uz2082U_129693);
                bool y_129779 = i_p_m_t_s_leq_w_129776 && zzero_lte_i_129777;
                bool y_129780 = zzero_leq_i_p_m_t_s_129775 && y_129779;
                bool forwards_ok_129781 = i_lte_j_129778 && y_129780;
                bool ok_or_empty_129782 = empty_slice_129772 || forwards_ok_129781;
                bool index_certs_129783;
                
                if (!ok_or_empty_129782) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_129770, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_129693, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_129784 = slt64(m_129707, j_m_i_129771);
                bool y_129785 = zzero_leq_i_p_m_t_s_129708 && i_p_m_t_s_leq_w_129784;
                bool forwards_ok_129786 = i_lte_j_129709 && y_129785;
                bool ok_or_empty_129787 = zzero_129699 || forwards_ok_129786;
                bool index_certs_129788;
                
                if (!ok_or_empty_129787) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_129698, "] out of bounds for array of shape [", (long long) j_m_i_129771, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftSMJ.fut:105:58-61\n   #7  ftRelational.fut:101:36-40\n   #8  ftRelational.fut:98:9-101:40\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_129710) {
                    int16_t dummy_131695;
                    int64_t dummy_131696;
                    
                    if (cond_129730) {
                        int16_t head_res_131697 = ((int16_t *) mem_param_139662.mem)[start_129770];
                        int64_t head_res_131698 = ((int64_t *) mem_param_139665.mem)[start_129770];
                        
                        dummy_131695 = head_res_131697;
                        dummy_131696 = head_res_131698;
                    } else {
                        int64_t slice_131699 = stride_129697 + start_129770;
                        int16_t head_res_131700 = ((int16_t *) mem_param_139662.mem)[slice_131699];
                        int64_t head_res_131701 = ((int64_t *) mem_param_139665.mem)[slice_131699];
                        
                        dummy_131695 = head_res_131700;
                        dummy_131696 = head_res_131701;
                    }
                    if (memblock_alloc(ctx, &mem_139743, bytes_139742, "mem_139743")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140347 = 0; nest_i_140347 < next_stride_129698; nest_i_140347++) {
                        ((int16_t *) mem_139743.mem)[nest_i_140347] = dummy_131695;
                    }
                    if (memblock_alloc(ctx, &mem_139745, bytes_139744, "mem_139745")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_140348 = 0; nest_i_140348 < next_stride_129698; nest_i_140348++) {
                        ((int64_t *) mem_139745.mem)[nest_i_140348] = dummy_131696;
                    }
                    
                    int64_t data_131704;
                    int64_t i_131708 = (int64_t) 0;
                    
                    for (int64_t k_131707 = 0; k_131707 < next_stride_129698; k_131707++) {
                        int64_t j_131711 = sub64(k_131707, i_131708);
                        bool cond_131712 = j_131711 == j_m_i_129720;
                        bool cond_131713;
                        
                        if (cond_131712) {
                            cond_131713 = 1;
                        } else {
                            bool cond_131714 = slt64(i_131708, stride_129697);
                            bool cond_f_res_131715;
                            
                            if (cond_131714) {
                                bool x_131716 = sle64((int64_t) 0, j_131711);
                                bool y_131717 = slt64(j_131711, j_m_i_129720);
                                bool bounds_check_131718 = x_131716 && y_131717;
                                bool index_certs_131719;
                                
                                if (!bounds_check_131718) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_131723 = sle64((int64_t) 0, i_131708);
                                bool bounds_check_131724 = cond_131714 && x_131723;
                                bool index_certs_131725;
                                
                                if (!bounds_check_131724) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_131720 = stride_129697 + j_131711;
                                int64_t slice_131721 = start_129770 + slice_131720;
                                int16_t leq_arg1_131722 = ((int16_t *) mem_param_139662.mem)[slice_131721];
                                int64_t slice_131726 = start_129770 + i_131708;
                                int16_t leq_arg0_131727 = ((int16_t *) mem_param_139662.mem)[slice_131726];
                                bool defunc_0_leq_res_131728 = sle16(leq_arg0_131727, leq_arg1_131722);
                                
                                cond_f_res_131715 = defunc_0_leq_res_131728;
                            } else {
                                cond_f_res_131715 = 0;
                            }
                            cond_131713 = cond_f_res_131715;
                        }
                        
                        int64_t loopres_131729;
                        int16_t loopres_131730;
                        int64_t loopres_131731;
                        
                        if (cond_131713) {
                            bool x_131733 = sle64((int64_t) 0, i_131708);
                            bool y_131734 = slt64(i_131708, stride_129697);
                            bool bounds_check_131735 = x_131733 && y_131734;
                            bool index_certs_131736;
                            
                            if (!bounds_check_131735) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_131708, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_131732 = add64((int64_t) 1, i_131708);
                            int64_t slice_131737 = start_129770 + i_131708;
                            int16_t tmp_131738 = ((int16_t *) mem_param_139662.mem)[slice_131737];
                            int64_t tmp_131739 = ((int64_t *) mem_param_139665.mem)[slice_131737];
                            
                            loopres_131729 = tmp_131732;
                            loopres_131730 = tmp_131738;
                            loopres_131731 = tmp_131739;
                        } else {
                            bool x_131740 = sle64((int64_t) 0, j_131711);
                            bool y_131741 = slt64(j_131711, j_m_i_129720);
                            bool bounds_check_131742 = x_131740 && y_131741;
                            bool index_certs_131743;
                            
                            if (!bounds_check_131742) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_131711, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftSMJ.fut:105:58-61\n   #8  ftRelational.fut:101:36-40\n   #9  ftRelational.fut:98:9-101:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131744 = stride_129697 + j_131711;
                            int64_t slice_131745 = start_129770 + slice_131744;
                            int16_t tmp_131746 = ((int16_t *) mem_param_139662.mem)[slice_131745];
                            int64_t tmp_131747 = ((int64_t *) mem_param_139665.mem)[slice_131745];
                            
                            loopres_131729 = i_131708;
                            loopres_131730 = tmp_131746;
                            loopres_131731 = tmp_131747;
                        }
                        ((int16_t *) mem_139743.mem)[k_131707] = loopres_131730;
                        ((int64_t *) mem_139745.mem)[k_131707] = loopres_131731;
                        
                        int64_t i_tmp_140349 = loopres_131729;
                        
                        i_131708 = i_tmp_140349;
                    }
                    data_131704 = i_131708;
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139743, "mem_139743") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139745, "mem_139745") != 0)
                        return 1;
                } else {
                    if (mem_139681_cached_sizze_140849 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139681, &mem_139681_cached_sizze_140849, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139683_cached_sizze_140850 < bytes_139680) {
                        err = lexical_realloc(ctx, &mem_139683, &mem_139683_cached_sizze_140850, bytes_139680);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139384 = 0; i_139384 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719; i_139384++) {
                        int64_t split_count_arg3_129850 = mul64(merge_block_sizze_129583, i_139384);
                        int64_t defunc_0_split_count_res_129851;
                        int64_t defunc_0_split_count_res_129852;
                        int64_t defunc_0_split_count_res_129853;
                        int64_t defunc_0_split_count_res_129854;
                        int64_t defunc_0_split_count_res_129855;
                        
                        if (futrts_lifted_normalizze_10472(ctx, &defunc_0_split_count_res_129851, &defunc_0_split_count_res_129852, &defunc_0_split_count_res_129853, &defunc_0_split_count_res_129854, &defunc_0_split_count_res_129855, (int64_t) 0, stride_129697, (int64_t) 0, j_m_i_129720, split_count_arg3_129850) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_129856 = slt64((int64_t) 0, defunc_0_split_count_res_129855);
                        bool defunc_0_split_count_res_129857;
                        int64_t defunc_0_split_count_res_129858;
                        int64_t defunc_0_split_count_res_129859;
                        int64_t defunc_0_split_count_res_129860;
                        int64_t defunc_0_split_count_res_129861;
                        int64_t defunc_0_split_count_res_129862;
                        bool loop_while_129863;
                        int64_t ss_129864;
                        int64_t ss_129865;
                        int64_t tt_129866;
                        int64_t tt_129867;
                        int64_t count_129868;
                        
                        loop_while_129863 = loop_cond_129856;
                        ss_129864 = defunc_0_split_count_res_129851;
                        ss_129865 = defunc_0_split_count_res_129852;
                        tt_129866 = defunc_0_split_count_res_129853;
                        tt_129867 = defunc_0_split_count_res_129854;
                        count_129868 = defunc_0_split_count_res_129855;
                        while (loop_while_129863) {
                            int64_t zlze_lhs_129869 = sub64(ss_129865, ss_129864);
                            bool cond_129870 = sle64(zlze_lhs_129869, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_129871;
                            int64_t defunc_0_lifted_step_res_129872;
                            int64_t defunc_0_lifted_step_res_129873;
                            int64_t defunc_0_lifted_step_res_129874;
                            
                            if (cond_129870) {
                                int64_t tmp_131750 = add64(tt_129866, count_129868);
                                
                                defunc_0_lifted_step_res_129871 = ss_129864;
                                defunc_0_lifted_step_res_129872 = tmp_131750;
                                defunc_0_lifted_step_res_129873 = tt_129867;
                                defunc_0_lifted_step_res_129874 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_129876 = sub64(tt_129867, tt_129866);
                                bool cond_129877 = sle64(zlze_lhs_129876, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_129878;
                                int64_t defunc_0_lifted_step_res_f_res_129879;
                                int64_t defunc_0_lifted_step_res_f_res_129880;
                                int64_t defunc_0_lifted_step_res_f_res_129881;
                                
                                if (cond_129877) {
                                    int64_t tmp_131751 = add64(ss_129864, count_129868);
                                    
                                    defunc_0_lifted_step_res_f_res_129878 = tmp_131751;
                                    defunc_0_lifted_step_res_f_res_129879 = tt_129866;
                                    defunc_0_lifted_step_res_f_res_129880 = tt_129867;
                                    defunc_0_lifted_step_res_f_res_129881 = (int64_t) 0;
                                } else {
                                    bool cond_129883 = count_129868 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129884;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129885;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129886;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_129887;
                                    
                                    if (cond_129883) {
                                        bool x_131753 = sle64((int64_t) 0, ss_129864);
                                        bool y_131754 = slt64(ss_129864, stride_129697);
                                        bool bounds_check_131755 = x_131753 && y_131754;
                                        bool index_certs_131756;
                                        
                                        if (!bounds_check_131755) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_129864, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:101:36-40\n   #13 ftRelational.fut:98:9-101:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_131759 = sle64((int64_t) 0, tt_129866);
                                        bool y_131760 = slt64(tt_129866, j_m_i_129720);
                                        bool bounds_check_131761 = x_131759 && y_131760;
                                        bool index_certs_131762;
                                        
                                        if (!bounds_check_131761) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_129866, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:101:36-40\n   #13 ftRelational.fut:98:9-101:40\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_131757 = start_129770 + ss_129864;
                                        int16_t leq_arg1_131758 = ((int16_t *) mem_param_139662.mem)[slice_131757];
                                        int64_t slice_131763 = stride_129697 + tt_129866;
                                        int64_t slice_131764 = start_129770 + slice_131763;
                                        int16_t leq_arg0_131765 = ((int16_t *) mem_param_139662.mem)[slice_131764];
                                        bool defunc_0_leq_res_131766 = sle16(leq_arg0_131765, leq_arg1_131758);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        
                                        if (defunc_0_leq_res_131766) {
                                            int64_t tmp_131769 = add64((int64_t) 1, tt_129866);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = ss_129864;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tmp_131769;
                                        } else {
                                            int64_t tmp_131770 = add64((int64_t) 1, ss_129864);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131767 = tmp_131770;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_131768 = tt_129866;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = defunc_0_lifted_step_res_f_res_f_res_t_res_131767;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_t_res_131768;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = tt_129867;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = (int64_t) 0;
                                    } else {
                                        int64_t m_129906 = sdiv64(count_129868, (int64_t) 2);
                                        int64_t n_129907 = sub64(count_129868, m_129906);
                                        bool cond_129908 = n_129907 == (int64_t) 0;
                                        int64_t zgze_lhs_129909 = add64(ss_129864, m_129906);
                                        bool cond_f_res_129910 = sle64(ss_129865, zgze_lhs_129909);
                                        bool x_129911 = !cond_129908;
                                        bool y_129912 = cond_f_res_129910 && x_129911;
                                        bool cond_129913 = cond_129908 || y_129912;
                                        bool leq_y_x_129914;
                                        
                                        if (cond_129913) {
                                            leq_y_x_129914 = 1;
                                        } else {
                                            bool x_129915 = sle64((int64_t) 0, zgze_lhs_129909);
                                            bool y_129916 = slt64(zgze_lhs_129909, stride_129697);
                                            bool bounds_check_129917 = x_129915 && y_129916;
                                            bool index_certs_129918;
                                            
                                            if (!bounds_check_129917) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_129909, "] out of bounds for array of shape [", (long long) stride_129697, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:101:36-40\n   #13 ftRelational.fut:98:9-101:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_129921 = add64(tt_129866, n_129907);
                                            int64_t leq_arg0_129922 = sub64(zm_lhs_129921, (int64_t) 1);
                                            bool x_129923 = sle64((int64_t) 0, leq_arg0_129922);
                                            bool y_129924 = slt64(leq_arg0_129922, j_m_i_129720);
                                            bool bounds_check_129925 = x_129923 && y_129924;
                                            bool index_certs_129926;
                                            
                                            if (!bounds_check_129925) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_129922, "] out of bounds for array of shape [", (long long) j_m_i_129720, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftSMJ.fut:105:58-61\n   #12 ftRelational.fut:101:36-40\n   #13 ftRelational.fut:98:9-101:40\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_129919 = start_129770 + zgze_lhs_129909;
                                            int16_t leq_arg1_129920 = ((int16_t *) mem_param_139662.mem)[slice_129919];
                                            int64_t slice_129927 = stride_129697 + leq_arg0_129922;
                                            int64_t slice_129928 = start_129770 + slice_129927;
                                            int16_t leq_arg0_129929 = ((int16_t *) mem_param_139662.mem)[slice_129928];
                                            bool defunc_0_leq_res_129930 = sle16(leq_arg0_129929, leq_arg1_129920);
                                            
                                            leq_y_x_129914 = defunc_0_leq_res_129930;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                        
                                        if (leq_y_x_129914) {
                                            int64_t tmp_131771 = add64(tt_129866, n_129907);
                                            int64_t tmp_131772 = sub64(count_129868, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tmp_131771;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tt_129867;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = tmp_131772;
                                        } else {
                                            int64_t tmp_129936 = add64(tt_129866, n_129907);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129931 = tt_129866;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129932 = tmp_129936;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_129933 = count_129868;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_129884 = ss_129864;
                                        defunc_0_lifted_step_res_f_res_f_res_129885 = defunc_0_lifted_step_res_f_res_f_res_f_res_129931;
                                        defunc_0_lifted_step_res_f_res_f_res_129886 = defunc_0_lifted_step_res_f_res_f_res_f_res_129932;
                                        defunc_0_lifted_step_res_f_res_f_res_129887 = defunc_0_lifted_step_res_f_res_f_res_f_res_129933;
                                    }
                                    defunc_0_lifted_step_res_f_res_129878 = defunc_0_lifted_step_res_f_res_f_res_129884;
                                    defunc_0_lifted_step_res_f_res_129879 = defunc_0_lifted_step_res_f_res_f_res_129885;
                                    defunc_0_lifted_step_res_f_res_129880 = defunc_0_lifted_step_res_f_res_f_res_129886;
                                    defunc_0_lifted_step_res_f_res_129881 = defunc_0_lifted_step_res_f_res_f_res_129887;
                                }
                                defunc_0_lifted_step_res_129871 = defunc_0_lifted_step_res_f_res_129878;
                                defunc_0_lifted_step_res_129872 = defunc_0_lifted_step_res_f_res_129879;
                                defunc_0_lifted_step_res_129873 = defunc_0_lifted_step_res_f_res_129880;
                                defunc_0_lifted_step_res_129874 = defunc_0_lifted_step_res_f_res_129881;
                            }
                            
                            int64_t loopres_129937;
                            int64_t loopres_129938;
                            int64_t loopres_129939;
                            int64_t loopres_129940;
                            int64_t loopres_129941;
                            
                            if (futrts_lifted_normalizze_10472(ctx, &loopres_129937, &loopres_129938, &loopres_129939, &loopres_129940, &loopres_129941, defunc_0_lifted_step_res_129871, ss_129865, defunc_0_lifted_step_res_129872, defunc_0_lifted_step_res_129873, defunc_0_lifted_step_res_129874) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_129942 = slt64((int64_t) 0, loopres_129941);
                            bool loop_while_tmp_140354 = loop_cond_129942;
                            int64_t ss_tmp_140355 = loopres_129937;
                            int64_t ss_tmp_140356 = loopres_129938;
                            int64_t tt_tmp_140357 = loopres_129939;
                            int64_t tt_tmp_140358 = loopres_129940;
                            int64_t count_tmp_140359 = loopres_129941;
                            
                            loop_while_129863 = loop_while_tmp_140354;
                            ss_129864 = ss_tmp_140355;
                            ss_129865 = ss_tmp_140356;
                            tt_129866 = tt_tmp_140357;
                            tt_129867 = tt_tmp_140358;
                            count_129868 = count_tmp_140359;
                        }
                        defunc_0_split_count_res_129857 = loop_while_129863;
                        defunc_0_split_count_res_129858 = ss_129864;
                        defunc_0_split_count_res_129859 = ss_129865;
                        defunc_0_split_count_res_129860 = tt_129866;
                        defunc_0_split_count_res_129861 = tt_129867;
                        defunc_0_split_count_res_129862 = count_129868;
                        ((int64_t *) mem_139681)[i_139384] = defunc_0_split_count_res_129858;
                        ((int64_t *) mem_139683)[i_139384] = defunc_0_split_count_res_129860;
                    }
                    if (mem_139698_cached_sizze_140851 < bytes_139697) {
                        err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140851, bytes_139697);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_139701_cached_sizze_140852 < bytes_139700) {
                        err = lexical_realloc(ctx, &mem_139701, &mem_139701_cached_sizze_140852, bytes_139700);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_139391 = 0; i_139391 < num_blocks_129718; i_139391++) {
                        bool y_129948 = slt64(i_139391, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool index_certs_129950;
                        
                        if (!y_129948) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139391, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:101:36-40\n   #10 ftRelational.fut:98:9-101:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129951 = ((int64_t *) mem_139681)[i_139391];
                        int64_t defunc_0_f_res_129952 = ((int64_t *) mem_139683)[i_139391];
                        int64_t tmp_129953 = add64((int64_t) 1, i_139391);
                        bool x_129954 = sle64((int64_t) 0, tmp_129953);
                        bool y_129955 = slt64(tmp_129953, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719);
                        bool bounds_check_129956 = x_129954 && y_129955;
                        bool index_certs_129957;
                        
                        if (!bounds_check_129956) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_129953, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_129719, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:101:36-40\n   #10 ftRelational.fut:98:9-101:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_129958 = ((int64_t *) mem_139681)[tmp_129953];
                        int64_t defunc_0_f_res_129959 = ((int64_t *) mem_139683)[tmp_129953];
                        int64_t merge_sequential_arg2_129960 = add64(stride_129697, defunc_0_f_res_129952);
                        int64_t merge_sequential_arg2_129961 = add64(stride_129697, defunc_0_f_res_129959);
                        int64_t j_m_i_129962 = sub64(merge_sequential_arg2_129961, merge_sequential_arg2_129960);
                        bool empty_slice_129963 = j_m_i_129962 == (int64_t) 0;
                        int64_t m_129964 = sub64(j_m_i_129962, (int64_t) 1);
                        int64_t i_p_m_t_s_129965 = add64(merge_sequential_arg2_129960, m_129964);
                        bool zzero_leq_i_p_m_t_s_129966 = sle64((int64_t) 0, i_p_m_t_s_129965);
                        bool i_p_m_t_s_leq_w_129967 = slt64(i_p_m_t_s_129965, next_stride_129698);
                        bool zzero_lte_i_129968 = sle64((int64_t) 0, merge_sequential_arg2_129960);
                        bool i_lte_j_129969 = sle64(merge_sequential_arg2_129960, merge_sequential_arg2_129961);
                        bool y_129970 = i_p_m_t_s_leq_w_129967 && zzero_lte_i_129968;
                        bool y_129971 = zzero_leq_i_p_m_t_s_129966 && y_129970;
                        bool forwards_ok_129972 = i_lte_j_129969 && y_129971;
                        bool ok_or_empty_129973 = empty_slice_129963 || forwards_ok_129972;
                        bool index_certs_129974;
                        
                        if (!ok_or_empty_129973) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_129960, ":", (long long) merge_sequential_arg2_129961, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:101:36-40\n   #10 ftRelational.fut:98:9-101:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_129975 = sub64(defunc_0_f_res_129958, defunc_0_f_res_129951);
                        bool empty_slice_129976 = j_m_i_129975 == (int64_t) 0;
                        int64_t m_129977 = sub64(j_m_i_129975, (int64_t) 1);
                        int64_t i_p_m_t_s_129978 = add64(defunc_0_f_res_129951, m_129977);
                        bool zzero_leq_i_p_m_t_s_129979 = sle64((int64_t) 0, i_p_m_t_s_129978);
                        bool i_p_m_t_s_leq_w_129980 = slt64(i_p_m_t_s_129978, next_stride_129698);
                        bool zzero_lte_i_129981 = sle64((int64_t) 0, defunc_0_f_res_129951);
                        bool i_lte_j_129982 = sle64(defunc_0_f_res_129951, defunc_0_f_res_129958);
                        bool y_129983 = i_p_m_t_s_leq_w_129980 && zzero_lte_i_129981;
                        bool y_129984 = zzero_leq_i_p_m_t_s_129979 && y_129983;
                        bool forwards_ok_129985 = i_lte_j_129982 && y_129984;
                        bool ok_or_empty_129986 = empty_slice_129976 || forwards_ok_129985;
                        bool index_certs_129987;
                        
                        if (!ok_or_empty_129986) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_129951, ":", (long long) defunc_0_f_res_129958, "] out of bounds for array of shape [", (long long) next_stride_129698, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftSMJ.fut:105:58-61\n   #9  ftRelational.fut:101:36-40\n   #10 ftRelational.fut:98:9-101:40\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_129988 = slt64((int64_t) 0, j_m_i_129975);
                        int16_t dummy_129989;
                        int64_t dummy_129990;
                        
                        if (cond_129988) {
                            bool index_certs_131773;
                            
                            if (!cond_129988) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:101:36-40\n   #12 ftRelational.fut:98:9-101:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_131774 = start_129770 + defunc_0_f_res_129951;
                            int16_t head_res_131775 = ((int16_t *) mem_param_139662.mem)[slice_131774];
                            int64_t head_res_131776 = ((int64_t *) mem_param_139665.mem)[slice_131774];
                            
                            dummy_129989 = head_res_131775;
                            dummy_129990 = head_res_131776;
                        } else {
                            bool y_129995 = slt64((int64_t) 0, j_m_i_129962);
                            bool index_certs_129996;
                            
                            if (!y_129995) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftSMJ.fut:105:58-61\n   #11 ftRelational.fut:101:36-40\n   #12 ftRelational.fut:98:9-101:40\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_129997 = start_129770 + merge_sequential_arg2_129960;
                            int16_t head_res_129998 = ((int16_t *) mem_param_139662.mem)[slice_129997];
                            int64_t head_res_129999 = ((int64_t *) mem_param_139665.mem)[slice_129997];
                            
                            dummy_129989 = head_res_129998;
                            dummy_129990 = head_res_129999;
                        }
                        for (int64_t nest_i_140362 = 0; nest_i_140362 < merge_block_sizze_129583; nest_i_140362++) {
                            ((int16_t *) mem_139698)[i_139391 * merge_block_sizze_129583 + nest_i_140362] = dummy_129989;
                        }
                        for (int64_t nest_i_140363 = 0; nest_i_140363 < merge_block_sizze_129583; nest_i_140363++) {
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + nest_i_140363] = dummy_129990;
                        }
                        
                        int64_t data_130002;
                        int64_t i_130006 = (int64_t) 0;
                        
                        for (int64_t k_130005 = 0; k_130005 < merge_block_sizze_129583; k_130005++) {
                            int64_t j_130009 = sub64(k_130005, i_130006);
                            bool cond_130010 = j_130009 == j_m_i_129962;
                            bool cond_130011;
                            
                            if (cond_130010) {
                                cond_130011 = 1;
                            } else {
                                bool cond_130012 = slt64(i_130006, j_m_i_129975);
                                bool cond_f_res_130013;
                                
                                if (cond_130012) {
                                    bool x_131777 = sle64((int64_t) 0, j_130009);
                                    bool y_131778 = slt64(j_130009, j_m_i_129962);
                                    bool bounds_check_131779 = x_131777 && y_131778;
                                    bool index_certs_131780;
                                    
                                    if (!bounds_check_131779) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:101:36-40\n   #11 ftRelational.fut:98:9-101:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_131784 = sle64((int64_t) 0, i_130006);
                                    bool bounds_check_131785 = cond_130012 && x_131784;
                                    bool index_certs_131786;
                                    
                                    if (!bounds_check_131785) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:101:36-40\n   #11 ftRelational.fut:98:9-101:40\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_131781 = merge_sequential_arg2_129960 + j_130009;
                                    int64_t slice_131782 = start_129770 + slice_131781;
                                    int16_t leq_arg1_131783 = ((int16_t *) mem_param_139662.mem)[slice_131782];
                                    int64_t slice_131787 = defunc_0_f_res_129951 + i_130006;
                                    int64_t slice_131788 = start_129770 + slice_131787;
                                    int16_t leq_arg0_131789 = ((int16_t *) mem_param_139662.mem)[slice_131788];
                                    bool defunc_0_leq_res_131790 = sle16(leq_arg0_131789, leq_arg1_131783);
                                    
                                    cond_f_res_130013 = defunc_0_leq_res_131790;
                                } else {
                                    cond_f_res_130013 = 0;
                                }
                                cond_130011 = cond_f_res_130013;
                            }
                            
                            int64_t loopres_130028;
                            int16_t loopres_130029;
                            int64_t loopres_130030;
                            
                            if (cond_130011) {
                                bool x_131792 = sle64((int64_t) 0, i_130006);
                                bool y_131793 = slt64(i_130006, j_m_i_129975);
                                bool bounds_check_131794 = x_131792 && y_131793;
                                bool index_certs_131795;
                                
                                if (!bounds_check_131794) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_130006, "] out of bounds for array of shape [", (long long) j_m_i_129975, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:101:36-40\n   #11 ftRelational.fut:98:9-101:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_131791 = add64((int64_t) 1, i_130006);
                                int64_t slice_131796 = defunc_0_f_res_129951 + i_130006;
                                int64_t slice_131797 = start_129770 + slice_131796;
                                int16_t tmp_131798 = ((int16_t *) mem_param_139662.mem)[slice_131797];
                                int64_t tmp_131799 = ((int64_t *) mem_param_139665.mem)[slice_131797];
                                
                                loopres_130028 = tmp_131791;
                                loopres_130029 = tmp_131798;
                                loopres_130030 = tmp_131799;
                            } else {
                                bool x_130040 = sle64((int64_t) 0, j_130009);
                                bool y_130041 = slt64(j_130009, j_m_i_129962);
                                bool bounds_check_130042 = x_130040 && y_130041;
                                bool index_certs_130043;
                                
                                if (!bounds_check_130042) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_130009, "] out of bounds for array of shape [", (long long) j_m_i_129962, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftSMJ.fut:105:58-61\n   #10 ftRelational.fut:101:36-40\n   #11 ftRelational.fut:98:9-101:40\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_130044 = merge_sequential_arg2_129960 + j_130009;
                                int64_t slice_130045 = start_129770 + slice_130044;
                                int16_t tmp_130046 = ((int16_t *) mem_param_139662.mem)[slice_130045];
                                int64_t tmp_130047 = ((int64_t *) mem_param_139665.mem)[slice_130045];
                                
                                loopres_130028 = i_130006;
                                loopres_130029 = tmp_130046;
                                loopres_130030 = tmp_130047;
                            }
                            ((int16_t *) mem_139698)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130029;
                            ((int64_t *) mem_139701)[i_139391 * merge_block_sizze_129583 + k_130005] = loopres_130030;
                            
                            int64_t i_tmp_140364 = loopres_130028;
                            
                            i_130006 = i_tmp_140364;
                        }
                        data_130002 = i_130006;
                    }
                    if (memblock_alloc(ctx, &mem_139736, bytes_139697, "mem_139736")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_2b(ctx, 2, (uint16_t *) mem_139736.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint16_t *) mem_139698, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_alloc(ctx, &mem_139740, bytes_139700, "mem_139740")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_139740.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (uint64_t *) mem_139701, (int64_t) 0, (int64_t []) {merge_block_sizze_129583, (int64_t) 1}, (int64_t []) {num_blocks_129718, merge_block_sizze_129583});
                    if (memblock_set(ctx, &ext_mem_139763, &mem_139736, "mem_139736") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_139760, &mem_139740, "mem_139740") != 0)
                        return 1;
                }
                lmad_copy_2b(ctx, 1, (uint16_t *) mem_139668, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139763.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139671, i_139398 * next_stride_129698, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139760.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_129698});
                if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
                    return 1;
            }
            
            int64_t flat_dim_130054 = next_stride_129698 * num_merges_129702;
            
            if (memblock_alloc(ctx, &mem_139774, bytes_139667, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_2b(ctx, 2, (uint16_t *) mem_139774.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint16_t *) mem_139668, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            if (memblock_alloc(ctx, &mem_139778, bytes_139670, "mem_139778")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_139778.mem, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (uint64_t *) mem_139671, (int64_t) 0, (int64_t []) {next_stride_129698, (int64_t) 1}, (int64_t []) {num_merges_129702, next_stride_129698});
            
            bool loop_cond_130057 = slt64(next_stride_129698, flat_dim_129579);
            
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139778, "mem_139778") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_140340 = flat_dim_130054;
            bool loop_while_tmp_140341 = loop_cond_130057;
            int64_t stride_tmp_140344 = next_stride_129698;
            
            if (memblock_set(ctx, &mem_param_139662, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139665, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            loop_dz2084Uz2082U_129693 = loop_dz2084Uz2082U_tmp_140340;
            loop_while_129694 = loop_while_tmp_140341;
            stride_129697 = stride_tmp_140344;
        }
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139784, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        data_129688 = loop_dz2084Uz2082U_129693;
        data_129689 = loop_while_129694;
        data_129692 = stride_129697;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        
        bool empty_slice_130058 = n_74895 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_130059 = sle64((int64_t) 0, zs_lhs_129563);
        bool i_p_m_t_s_leq_w_130060 = slt64(zs_lhs_129563, data_129688);
        bool y_130061 = zzero_leq_i_p_m_t_s_130059 && i_p_m_t_s_leq_w_130060;
        bool ok_or_empty_130062 = empty_slice_130058 || y_130061;
        bool index_certs_130063;
        
        if (!ok_or_empty_130062) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_74895, "] out of bounds for array of shape [", (long long) data_129688, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftSMJ.fut:105:58-61\n   #5  ftRelational.fut:101:36-40\n   #6  ftRelational.fut:98:9-101:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_139788, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139790, bytes_139789, "mem_139790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139792, bytes_139791, "mem_139792")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139405 = 0; i_139405 < n_74895; i_139405++) {
        int64_t eta_p_130071 = ((int64_t *) ext_mem_139788.mem)[i_139405];
        bool x_130072 = sle64((int64_t) 0, eta_p_130071);
        bool y_130073 = slt64(eta_p_130071, n_74895);
        bool bounds_check_130074 = x_130072 && y_130073;
        bool index_certs_130075;
        
        if (!bounds_check_130074) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130071, "] out of bounds for array of shape [", (long long) n_74895, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftSMJ.fut:105:58-61\n   #4  ftRelational.fut:101:36-40\n   #5  ftRelational.fut:98:9-101:40\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int16_t lifted_lambda_res_130076 = ((int16_t *) k_mem_139580.mem)[eta_p_130071];
        
        ((int16_t *) mem_139790.mem)[i_139405] = lifted_lambda_res_130076;
        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139792.mem, i_139405 * b_74896, (int64_t []) {(int64_t) 1}, (uint8_t *) pL_mem_139581.mem, eta_p_130071 * b_74896, (int64_t []) {(int64_t) 1}, (int64_t []) {b_74896});
    }
    if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139790, "mem_139790") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139792, "mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140841, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140842, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139586);
        free(mem_139589);
        free(mem_139599);
        free(mem_139601);
        free(mem_139668);
        free(mem_139671);
        free(mem_139681);
        free(mem_139683);
        free(mem_139698);
        free(mem_139701);
        if (memblock_unref(ctx, &mem_139792, "mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139790, "mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139778, "mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139740, "mem_139740") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139736, "mem_139736") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139745, "mem_139745") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139743, "mem_139743") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139760, "ext_mem_139760") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139763, "ext_mem_139763") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139665, "mem_param_139665") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139662, "mem_param_139662") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139784, "ext_mem_139784") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139658, "mem_139658") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139654, "mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_min_idx(struct futhark_context *ctx, int64_t *out_prim_out_140853, struct memblock eta_p_mem_139580, int64_t nz2080U_62694)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t defunc_0_reduce_res_131659;
    int64_t redout_139363 = (int64_t) 9223372036854775807;
    
    for (int64_t i_139364 = 0; i_139364 < nz2080U_62694; i_139364++) {
        int64_t x_121231 = ((int64_t *) eta_p_mem_139580.mem)[i_139364];
        int64_t min_res_121234 = smin64(x_121231, redout_139363);
        int64_t redout_tmp_140321 = min_res_121234;
        
        redout_139363 = redout_tmp_140321;
    }
    defunc_0_reduce_res_131659 = redout_139363;
    prim_out_140320 = defunc_0_reduce_res_131659;
    *out_prim_out_140853 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_double(struct futhark_context *ctx, struct memblock *mem_out_p_140854, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_64404, int64_t incr_64405, int64_t block_sizze_64406)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_64404;
    bool zzero_121393 = block_sizze_64406 == (int64_t) 0;
    bool nonzzero_121394 = !zzero_121393;
    bool nonzzero_cert_121395;
    
    if (!nonzzero_121394) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:37:1-39:48\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < n_64404; i_139365++) {
        int64_t eta_p_121389 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121390 = sub64(eta_p_121389, incr_64405);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121390;
    }
    
    int64_t zm_lhs_121391 = add64(n_64404, block_sizze_64406);
    int64_t zs_lhs_121392 = sub64(zm_lhs_121391, (int64_t) 1);
    int64_t m_121396 = sdiv64(zs_lhs_121392, block_sizze_64406);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139582, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_64404; nest_i_140322++) {
        ((double *) mem_139591.mem)[nest_i_140322] = 0.0;
    }
    
    bool loop_cond_121398 = slt64((int64_t) 0, m_121396);
    bool partitioned_gather_res_121399;
    int64_t partitioned_gather_res_121402;
    bool loop_while_121403;
    int64_t p_121406;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121403 = loop_cond_121398;
    p_121406 = (int64_t) 0;
    while (loop_while_121403) {
        int64_t lower_bound_121407 = mul64(block_sizze_64406, p_121406);
        int64_t min_arg1_121408 = add64(block_sizze_64406, lower_bound_121407);
        int64_t min_res_121409 = smin64(n_64404, min_arg1_121408);
        int64_t j_m_i_121410 = sub64(min_res_121409, lower_bound_121407);
        bool empty_slice_121411 = j_m_i_121410 == (int64_t) 0;
        int64_t m_121412 = sub64(j_m_i_121410, (int64_t) 1);
        int64_t i_p_m_t_s_121413 = add64(lower_bound_121407, m_121412);
        bool zzero_leq_i_p_m_t_s_121414 = sle64((int64_t) 0, i_p_m_t_s_121413);
        bool i_p_m_t_s_leq_w_121415 = slt64(i_p_m_t_s_121413, n_64404);
        bool zzero_lte_i_121416 = sle64((int64_t) 0, lower_bound_121407);
        bool i_lte_j_121417 = sle64(lower_bound_121407, min_res_121409);
        bool y_121418 = i_p_m_t_s_leq_w_121415 && zzero_lte_i_121416;
        bool y_121419 = zzero_leq_i_p_m_t_s_121414 && y_121418;
        bool forwards_ok_121420 = i_lte_j_121417 && y_121419;
        bool ok_or_empty_121421 = empty_slice_121411 || forwards_ok_121420;
        bool index_certs_121422;
        
        if (!ok_or_empty_121421) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121407, ":", (long long) min_res_121409, "] out of bounds for array of shape [", (long long) n_64404, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:37:1-39:48\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_64404});
        if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < n_64404; i_139369++) {
            int64_t eta_p_121425 = ((int64_t *) mem_param_139594.mem)[i_139369];
            double eta_p_121426 = ((double *) mem_param_139597.mem)[i_139369];
            bool cond_121427 = sle64(lower_bound_121407, eta_p_121425);
            bool cond_t_res_121428 = slt64(eta_p_121425, min_res_121409);
            bool x_121429 = cond_121427 && cond_t_res_121428;
            double lifted_lambda_res_121430;
            
            if (x_121429) {
                int64_t tmp_131659 = sub64(eta_p_121425, lower_bound_121407);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121410);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121410, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftSMJ.fut:158:3-49\n   #4  ftRelational.fut:37:1-39:48\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                double tmp_131664 = ((double *) ys_mem_139581.mem)[eta_p_121425];
                
                lifted_lambda_res_121430 = tmp_131664;
            } else {
                lifted_lambda_res_121430 = eta_p_121426;
            }
            ((double *) mem_139601.mem)[i_139369] = lifted_lambda_res_121430;
        }
        
        int64_t tmp_121437 = add64((int64_t) 1, p_121406);
        bool loop_cond_121438 = slt64(tmp_121437, m_121396);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121438;
        int64_t p_tmp_140328 = tmp_121437;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121403 = loop_while_tmp_140325;
        p_121406 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121399 = loop_while_121403;
    partitioned_gather_res_121402 = p_121406;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139582, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_64404});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140854, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_float(struct futhark_context *ctx, struct memblock *mem_out_p_140855, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_64070, int64_t incr_64071, int64_t block_sizze_64072)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_64070;
    bool zzero_121393 = block_sizze_64072 == (int64_t) 0;
    bool nonzzero_121394 = !zzero_121393;
    bool nonzzero_cert_121395;
    
    if (!nonzzero_121394) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:34:1-36:48\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = (int64_t) 4 * n_64070;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < n_64070; i_139365++) {
        int64_t eta_p_121389 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121390 = sub64(eta_p_121389, incr_64071);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121390;
    }
    
    int64_t zm_lhs_121391 = add64(n_64070, block_sizze_64072);
    int64_t zs_lhs_121392 = sub64(zm_lhs_121391, (int64_t) 1);
    int64_t m_121396 = sdiv64(zs_lhs_121392, block_sizze_64072);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_64070; nest_i_140322++) {
        ((float *) mem_139591.mem)[nest_i_140322] = 0.0F;
    }
    
    bool loop_cond_121398 = slt64((int64_t) 0, m_121396);
    bool partitioned_gather_res_121399;
    int64_t partitioned_gather_res_121402;
    bool loop_while_121403;
    int64_t p_121406;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121403 = loop_cond_121398;
    p_121406 = (int64_t) 0;
    while (loop_while_121403) {
        int64_t lower_bound_121407 = mul64(block_sizze_64072, p_121406);
        int64_t min_arg1_121408 = add64(block_sizze_64072, lower_bound_121407);
        int64_t min_res_121409 = smin64(n_64070, min_arg1_121408);
        int64_t j_m_i_121410 = sub64(min_res_121409, lower_bound_121407);
        bool empty_slice_121411 = j_m_i_121410 == (int64_t) 0;
        int64_t m_121412 = sub64(j_m_i_121410, (int64_t) 1);
        int64_t i_p_m_t_s_121413 = add64(lower_bound_121407, m_121412);
        bool zzero_leq_i_p_m_t_s_121414 = sle64((int64_t) 0, i_p_m_t_s_121413);
        bool i_p_m_t_s_leq_w_121415 = slt64(i_p_m_t_s_121413, n_64070);
        bool zzero_lte_i_121416 = sle64((int64_t) 0, lower_bound_121407);
        bool i_lte_j_121417 = sle64(lower_bound_121407, min_res_121409);
        bool y_121418 = i_p_m_t_s_leq_w_121415 && zzero_lte_i_121416;
        bool y_121419 = zzero_leq_i_p_m_t_s_121414 && y_121418;
        bool forwards_ok_121420 = i_lte_j_121417 && y_121419;
        bool ok_or_empty_121421 = empty_slice_121411 || forwards_ok_121420;
        bool index_certs_121422;
        
        if (!ok_or_empty_121421) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121407, ":", (long long) min_res_121409, "] out of bounds for array of shape [", (long long) n_64070, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:34:1-36:48\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_64070});
        if (memblock_alloc(ctx, &mem_139601, bytes_139590, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < n_64070; i_139369++) {
            int64_t eta_p_121425 = ((int64_t *) mem_param_139594.mem)[i_139369];
            float eta_p_121426 = ((float *) mem_param_139597.mem)[i_139369];
            bool cond_121427 = sle64(lower_bound_121407, eta_p_121425);
            bool cond_t_res_121428 = slt64(eta_p_121425, min_res_121409);
            bool x_121429 = cond_121427 && cond_t_res_121428;
            float lifted_lambda_res_121430;
            
            if (x_121429) {
                int64_t tmp_131659 = sub64(eta_p_121425, lower_bound_121407);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121410);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121410, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftSMJ.fut:158:3-49\n   #4  ftRelational.fut:34:1-36:48\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float tmp_131664 = ((float *) ys_mem_139581.mem)[eta_p_121425];
                
                lifted_lambda_res_121430 = tmp_131664;
            } else {
                lifted_lambda_res_121430 = eta_p_121426;
            }
            ((float *) mem_139601.mem)[i_139369] = lifted_lambda_res_121430;
        }
        
        int64_t tmp_121437 = add64((int64_t) 1, p_121406);
        bool loop_cond_121438 = slt64(tmp_121437, m_121396);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121438;
        int64_t p_tmp_140328 = tmp_121437;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121403 = loop_while_tmp_140325;
        p_121406 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121399 = loop_while_121403;
    partitioned_gather_res_121402 = p_121406;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139590, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_64070});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140855, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_int(struct futhark_context *ctx, struct memblock *mem_out_p_140856, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_63402, int64_t incr_63403, int64_t block_sizze_63404)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_63402;
    bool zzero_121393 = block_sizze_63404 == (int64_t) 0;
    bool nonzzero_121394 = !zzero_121393;
    bool nonzzero_cert_121395;
    
    if (!nonzzero_121394) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:28:1-30:48\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = (int64_t) 4 * n_63402;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < n_63402; i_139365++) {
        int64_t eta_p_121389 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121390 = sub64(eta_p_121389, incr_63403);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121390;
    }
    
    int64_t zm_lhs_121391 = add64(n_63402, block_sizze_63404);
    int64_t zs_lhs_121392 = sub64(zm_lhs_121391, (int64_t) 1);
    int64_t m_121396 = sdiv64(zs_lhs_121392, block_sizze_63404);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_63402; nest_i_140322++) {
        ((int32_t *) mem_139591.mem)[nest_i_140322] = 0;
    }
    
    bool loop_cond_121398 = slt64((int64_t) 0, m_121396);
    bool partitioned_gather_res_121399;
    int64_t partitioned_gather_res_121402;
    bool loop_while_121403;
    int64_t p_121406;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121403 = loop_cond_121398;
    p_121406 = (int64_t) 0;
    while (loop_while_121403) {
        int64_t lower_bound_121407 = mul64(block_sizze_63404, p_121406);
        int64_t min_arg1_121408 = add64(block_sizze_63404, lower_bound_121407);
        int64_t min_res_121409 = smin64(n_63402, min_arg1_121408);
        int64_t j_m_i_121410 = sub64(min_res_121409, lower_bound_121407);
        bool empty_slice_121411 = j_m_i_121410 == (int64_t) 0;
        int64_t m_121412 = sub64(j_m_i_121410, (int64_t) 1);
        int64_t i_p_m_t_s_121413 = add64(lower_bound_121407, m_121412);
        bool zzero_leq_i_p_m_t_s_121414 = sle64((int64_t) 0, i_p_m_t_s_121413);
        bool i_p_m_t_s_leq_w_121415 = slt64(i_p_m_t_s_121413, n_63402);
        bool zzero_lte_i_121416 = sle64((int64_t) 0, lower_bound_121407);
        bool i_lte_j_121417 = sle64(lower_bound_121407, min_res_121409);
        bool y_121418 = i_p_m_t_s_leq_w_121415 && zzero_lte_i_121416;
        bool y_121419 = zzero_leq_i_p_m_t_s_121414 && y_121418;
        bool forwards_ok_121420 = i_lte_j_121417 && y_121419;
        bool ok_or_empty_121421 = empty_slice_121411 || forwards_ok_121420;
        bool index_certs_121422;
        
        if (!ok_or_empty_121421) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121407, ":", (long long) min_res_121409, "] out of bounds for array of shape [", (long long) n_63402, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:28:1-30:48\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_63402});
        if (memblock_alloc(ctx, &mem_139601, bytes_139590, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < n_63402; i_139369++) {
            int64_t eta_p_121425 = ((int64_t *) mem_param_139594.mem)[i_139369];
            int32_t eta_p_121426 = ((int32_t *) mem_param_139597.mem)[i_139369];
            bool cond_121427 = sle64(lower_bound_121407, eta_p_121425);
            bool cond_t_res_121428 = slt64(eta_p_121425, min_res_121409);
            bool x_121429 = cond_121427 && cond_t_res_121428;
            int32_t lifted_lambda_res_121430;
            
            if (x_121429) {
                int64_t tmp_131659 = sub64(eta_p_121425, lower_bound_121407);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121410);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121410, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftSMJ.fut:158:3-49\n   #4  ftRelational.fut:28:1-30:48\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t tmp_131664 = ((int32_t *) ys_mem_139581.mem)[eta_p_121425];
                
                lifted_lambda_res_121430 = tmp_131664;
            } else {
                lifted_lambda_res_121430 = eta_p_121426;
            }
            ((int32_t *) mem_139601.mem)[i_139369] = lifted_lambda_res_121430;
        }
        
        int64_t tmp_121437 = add64((int64_t) 1, p_121406);
        bool loop_cond_121438 = slt64(tmp_121437, m_121396);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121438;
        int64_t p_tmp_140328 = tmp_121437;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121403 = loop_while_tmp_140325;
        p_121406 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121399 = loop_while_121403;
    partitioned_gather_res_121402 = p_121406;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139590, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_63402});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140856, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_long(struct futhark_context *ctx, struct memblock *mem_out_p_140857, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_63736, int64_t incr_63737, int64_t block_sizze_63738)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_63736;
    bool zzero_121393 = block_sizze_63738 == (int64_t) 0;
    bool nonzzero_121394 = !zzero_121393;
    bool nonzzero_cert_121395;
    
    if (!nonzzero_121394) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:31:1-33:48\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < n_63736; i_139365++) {
        int64_t eta_p_121389 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121390 = sub64(eta_p_121389, incr_63737);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121390;
    }
    
    int64_t zm_lhs_121391 = add64(n_63736, block_sizze_63738);
    int64_t zs_lhs_121392 = sub64(zm_lhs_121391, (int64_t) 1);
    int64_t m_121396 = sdiv64(zs_lhs_121392, block_sizze_63738);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139582, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_63736; nest_i_140322++) {
        ((int64_t *) mem_139591.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    bool loop_cond_121398 = slt64((int64_t) 0, m_121396);
    bool partitioned_gather_res_121399;
    int64_t partitioned_gather_res_121402;
    bool loop_while_121403;
    int64_t p_121406;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121403 = loop_cond_121398;
    p_121406 = (int64_t) 0;
    while (loop_while_121403) {
        int64_t lower_bound_121407 = mul64(block_sizze_63738, p_121406);
        int64_t min_arg1_121408 = add64(block_sizze_63738, lower_bound_121407);
        int64_t min_res_121409 = smin64(n_63736, min_arg1_121408);
        int64_t j_m_i_121410 = sub64(min_res_121409, lower_bound_121407);
        bool empty_slice_121411 = j_m_i_121410 == (int64_t) 0;
        int64_t m_121412 = sub64(j_m_i_121410, (int64_t) 1);
        int64_t i_p_m_t_s_121413 = add64(lower_bound_121407, m_121412);
        bool zzero_leq_i_p_m_t_s_121414 = sle64((int64_t) 0, i_p_m_t_s_121413);
        bool i_p_m_t_s_leq_w_121415 = slt64(i_p_m_t_s_121413, n_63736);
        bool zzero_lte_i_121416 = sle64((int64_t) 0, lower_bound_121407);
        bool i_lte_j_121417 = sle64(lower_bound_121407, min_res_121409);
        bool y_121418 = i_p_m_t_s_leq_w_121415 && zzero_lte_i_121416;
        bool y_121419 = zzero_leq_i_p_m_t_s_121414 && y_121418;
        bool forwards_ok_121420 = i_lte_j_121417 && y_121419;
        bool ok_or_empty_121421 = empty_slice_121411 || forwards_ok_121420;
        bool index_certs_121422;
        
        if (!ok_or_empty_121421) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121407, ":", (long long) min_res_121409, "] out of bounds for array of shape [", (long long) n_63736, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:31:1-33:48\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_63736});
        if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < n_63736; i_139369++) {
            int64_t eta_p_121425 = ((int64_t *) mem_param_139594.mem)[i_139369];
            int64_t eta_p_121426 = ((int64_t *) mem_param_139597.mem)[i_139369];
            bool cond_121427 = sle64(lower_bound_121407, eta_p_121425);
            bool cond_t_res_121428 = slt64(eta_p_121425, min_res_121409);
            bool x_121429 = cond_121427 && cond_t_res_121428;
            int64_t lifted_lambda_res_121430;
            
            if (x_121429) {
                int64_t tmp_131659 = sub64(eta_p_121425, lower_bound_121407);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121410);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121410, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftSMJ.fut:158:3-49\n   #4  ftRelational.fut:31:1-33:48\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t tmp_131664 = ((int64_t *) ys_mem_139581.mem)[eta_p_121425];
                
                lifted_lambda_res_121430 = tmp_131664;
            } else {
                lifted_lambda_res_121430 = eta_p_121426;
            }
            ((int64_t *) mem_139601.mem)[i_139369] = lifted_lambda_res_121430;
        }
        
        int64_t tmp_121437 = add64((int64_t) 1, p_121406);
        bool loop_cond_121438 = slt64(tmp_121437, m_121396);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121438;
        int64_t p_tmp_140328 = tmp_121437;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121403 = loop_while_tmp_140325;
        p_121406 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121399 = loop_while_121403;
    partitioned_gather_res_121402 = p_121406;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139582, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_63736});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140857, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_short(struct futhark_context *ctx, struct memblock *mem_out_p_140858, struct memblock is_mem_139580, struct memblock ys_mem_139581, int64_t n_63068, int64_t incr_63069, int64_t block_sizze_63070)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_139599;
    
    mem_139599.references = NULL;
    
    struct memblock mem_param_139597;
    
    mem_param_139597.references = NULL;
    
    struct memblock mem_param_139594;
    
    mem_param_139594.references = NULL;
    
    struct memblock ext_mem_139612;
    
    ext_mem_139612.references = NULL;
    
    struct memblock ext_mem_139613;
    
    ext_mem_139613.references = NULL;
    
    struct memblock mem_139591;
    
    mem_139591.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t bytes_139582 = (int64_t) 8 * n_63068;
    bool zzero_121393 = block_sizze_63070 == (int64_t) 0;
    bool nonzzero_121394 = !zzero_121393;
    bool nonzzero_cert_121395;
    
    if (!nonzzero_121394) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:24:22-28\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:25:1-27:48\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139590 = (int64_t) 2 * n_63068;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139365 = 0; i_139365 < n_63068; i_139365++) {
        int64_t eta_p_121389 = ((int64_t *) is_mem_139580.mem)[i_139365];
        int64_t lifted_lambda_res_121390 = sub64(eta_p_121389, incr_63069);
        
        ((int64_t *) mem_139583.mem)[i_139365] = lifted_lambda_res_121390;
    }
    
    int64_t zm_lhs_121391 = add64(n_63068, block_sizze_63070);
    int64_t zs_lhs_121392 = sub64(zm_lhs_121391, (int64_t) 1);
    int64_t m_121396 = sdiv64(zs_lhs_121392, block_sizze_63070);
    
    if (memblock_alloc(ctx, &mem_139591, bytes_139590, "mem_139591")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_63068; nest_i_140322++) {
        ((int16_t *) mem_139591.mem)[nest_i_140322] = (int16_t) 0;
    }
    
    bool loop_cond_121398 = slt64((int64_t) 0, m_121396);
    bool partitioned_gather_res_121399;
    int64_t partitioned_gather_res_121402;
    bool loop_while_121403;
    int64_t p_121406;
    
    if (memblock_set(ctx, &mem_param_139594, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139597, &mem_139591, "mem_139591") != 0)
        return 1;
    loop_while_121403 = loop_cond_121398;
    p_121406 = (int64_t) 0;
    while (loop_while_121403) {
        int64_t lower_bound_121407 = mul64(block_sizze_63070, p_121406);
        int64_t min_arg1_121408 = add64(block_sizze_63070, lower_bound_121407);
        int64_t min_res_121409 = smin64(n_63068, min_arg1_121408);
        int64_t j_m_i_121410 = sub64(min_res_121409, lower_bound_121407);
        bool empty_slice_121411 = j_m_i_121410 == (int64_t) 0;
        int64_t m_121412 = sub64(j_m_i_121410, (int64_t) 1);
        int64_t i_p_m_t_s_121413 = add64(lower_bound_121407, m_121412);
        bool zzero_leq_i_p_m_t_s_121414 = sle64((int64_t) 0, i_p_m_t_s_121413);
        bool i_p_m_t_s_leq_w_121415 = slt64(i_p_m_t_s_121413, n_63068);
        bool zzero_lte_i_121416 = sle64((int64_t) 0, lower_bound_121407);
        bool i_lte_j_121417 = sle64(lower_bound_121407, min_res_121409);
        bool y_121418 = i_p_m_t_s_leq_w_121415 && zzero_lte_i_121416;
        bool y_121419 = zzero_leq_i_p_m_t_s_121414 && y_121418;
        bool forwards_ok_121420 = i_lte_j_121417 && y_121419;
        bool ok_or_empty_121421 = empty_slice_121411 || forwards_ok_121420;
        bool index_certs_121422;
        
        if (!ok_or_empty_121421) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_121407, ":", (long long) min_res_121409, "] out of bounds for array of shape [", (long long) n_63068, "].", "-> #0  ftbasics.fut:31:18-45\n   #1  ftSMJ.fut:158:3-49\n   #2  ftRelational.fut:25:1-27:48\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_139599, bytes_139582, "mem_139599")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139599.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139594.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_63068});
        if (memblock_alloc(ctx, &mem_139601, bytes_139590, "mem_139601")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_139369 = 0; i_139369 < n_63068; i_139369++) {
            int64_t eta_p_121425 = ((int64_t *) mem_param_139594.mem)[i_139369];
            int16_t eta_p_121426 = ((int16_t *) mem_param_139597.mem)[i_139369];
            bool cond_121427 = sle64(lower_bound_121407, eta_p_121425);
            bool cond_t_res_121428 = slt64(eta_p_121425, min_res_121409);
            bool x_121429 = cond_121427 && cond_t_res_121428;
            int16_t lifted_lambda_res_121430;
            
            if (x_121429) {
                int64_t tmp_131659 = sub64(eta_p_121425, lower_bound_121407);
                bool x_131660 = sle64((int64_t) 0, tmp_131659);
                bool y_131661 = slt64(tmp_131659, j_m_i_121410);
                bool bounds_check_131662 = x_131660 && y_131661;
                bool index_certs_131663;
                
                if (!bounds_check_131662) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_131659, "] out of bounds for array of shape [", (long long) j_m_i_121410, "].", "-> #0  ftbasics.fut:34:16-37\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:32:30-36:6\n   #3  ftSMJ.fut:158:3-49\n   #4  ftRelational.fut:25:1-27:48\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int16_t tmp_131664 = ((int16_t *) ys_mem_139581.mem)[eta_p_121425];
                
                lifted_lambda_res_121430 = tmp_131664;
            } else {
                lifted_lambda_res_121430 = eta_p_121426;
            }
            ((int16_t *) mem_139601.mem)[i_139369] = lifted_lambda_res_121430;
        }
        
        int64_t tmp_121437 = add64((int64_t) 1, p_121406);
        bool loop_cond_121438 = slt64(tmp_121437, m_121396);
        
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139601, "mem_139601") != 0)
            return 1;
        
        bool loop_while_tmp_140325 = loop_cond_121438;
        int64_t p_tmp_140328 = tmp_121437;
        
        if (memblock_set(ctx, &mem_param_139594, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139597, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        loop_while_121403 = loop_while_tmp_140325;
        p_121406 = p_tmp_140328;
    }
    if (memblock_set(ctx, &ext_mem_139613, &mem_param_139594, "mem_param_139594") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139612, &mem_param_139597, "mem_param_139597") != 0)
        return 1;
    partitioned_gather_res_121399 = loop_while_121403;
    partitioned_gather_res_121402 = p_121406;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139615, bytes_139590, "mem_139615")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_63068});
    if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139615, "mem_139615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140858, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139599, "mem_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139597, "mem_param_139597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139594, "mem_param_139594") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139612, "ext_mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139613, "ext_mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139591, "mem_139591") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_partition_and_deepen_GFTR(struct futhark_context *ctx, struct memblock *mem_out_p_140859, struct memblock *mem_out_p_140860, struct memblock xs_mem_139580, struct memblock pL_mem_139581, int64_t n_114415, int64_t b_114416, int64_t pL_b_114417, int16_t block_sizze_114418, int64_t gather_psizze_114419, int32_t radix_sizze_114420, int64_t sizze_thresh_114423, int32_t max_depth_114424)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139627_cached_sizze_140861 = 0;
    unsigned char *mem_139627 = NULL;
    int64_t mem_139661_cached_sizze_140862 = 0;
    unsigned char *mem_139661 = NULL;
    int64_t mem_139663_cached_sizze_140863 = 0;
    unsigned char *mem_139663 = NULL;
    int64_t mem_139672_cached_sizze_140864 = 0;
    unsigned char *mem_139672 = NULL;
    int64_t mem_139673_cached_sizze_140865 = 0;
    unsigned char *mem_139673 = NULL;
    int64_t mem_139704_cached_sizze_140866 = 0;
    unsigned char *mem_139704 = NULL;
    int64_t mem_139706_cached_sizze_140867 = 0;
    unsigned char *mem_139706 = NULL;
    int64_t mem_139708_cached_sizze_140868 = 0;
    unsigned char *mem_139708 = NULL;
    int64_t mem_139710_cached_sizze_140869 = 0;
    unsigned char *mem_139710 = NULL;
    int64_t mem_139736_cached_sizze_140870 = 0;
    unsigned char *mem_139736 = NULL;
    int64_t mem_139738_cached_sizze_140871 = 0;
    unsigned char *mem_139738 = NULL;
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_param_tmp_140325;
    
    mem_param_tmp_140325.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_param_tmp_140337;
    
    mem_param_tmp_140337.references = NULL;
    
    struct memblock mem_param_tmp_140336;
    
    mem_param_tmp_140336.references = NULL;
    
    struct memblock mem_param_tmp_140335;
    
    mem_param_tmp_140335.references = NULL;
    
    struct memblock mem_139774;
    
    mem_139774.references = NULL;
    
    struct memblock mem_139772;
    
    mem_139772.references = NULL;
    
    struct memblock mem_139754;
    
    mem_139754.references = NULL;
    
    struct memblock mem_139752;
    
    mem_139752.references = NULL;
    
    struct memblock ext_mem_139701;
    
    ext_mem_139701.references = NULL;
    
    struct memblock ext_mem_139702;
    
    ext_mem_139702.references = NULL;
    
    struct memblock mem_139699;
    
    mem_139699.references = NULL;
    
    struct memblock mem_param_tmp_140346;
    
    mem_param_tmp_140346.references = NULL;
    
    struct memblock mem_param_tmp_140345;
    
    mem_param_tmp_140345.references = NULL;
    
    struct memblock mem_139651;
    
    mem_139651.references = NULL;
    
    struct memblock mem_139649;
    
    mem_139649.references = NULL;
    
    struct memblock mem_param_tmp_140353;
    
    mem_param_tmp_140353.references = NULL;
    
    struct memblock mem_139638;
    
    mem_139638.references = NULL;
    
    struct memblock mem_param_139636;
    
    mem_param_139636.references = NULL;
    
    struct memblock ext_mem_139647;
    
    ext_mem_139647.references = NULL;
    
    struct memblock mem_param_139622;
    
    mem_param_139622.references = NULL;
    
    struct memblock mem_param_139618;
    
    mem_param_139618.references = NULL;
    
    struct memblock ext_mem_139696;
    
    ext_mem_139696.references = NULL;
    
    struct memblock ext_mem_139697;
    
    ext_mem_139697.references = NULL;
    
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_param_139612;
    
    mem_param_139612.references = NULL;
    
    struct memblock mem_param_139608;
    
    mem_param_139608.references = NULL;
    
    struct memblock mem_param_139604;
    
    mem_param_139604.references = NULL;
    
    struct memblock mem_param_139601;
    
    mem_param_139601.references = NULL;
    
    struct memblock ext_mem_139785;
    
    ext_mem_139785.references = NULL;
    
    struct memblock ext_mem_139786;
    
    ext_mem_139786.references = NULL;
    
    struct memblock ext_mem_139787;
    
    ext_mem_139787.references = NULL;
    
    struct memblock ext_mem_139788;
    
    ext_mem_139788.references = NULL;
    
    struct memblock mem_param_139598;
    
    mem_param_139598.references = NULL;
    
    struct memblock mem_param_139595;
    
    mem_param_139595.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139588;
    
    mem_param_139588.references = NULL;
    
    struct memblock ext_mem_139799;
    
    ext_mem_139799.references = NULL;
    
    struct memblock ext_mem_139800;
    
    ext_mem_139800.references = NULL;
    
    struct memblock ext_mem_139801;
    
    ext_mem_139801.references = NULL;
    
    struct memblock ext_mem_139802;
    
    ext_mem_139802.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    if (memblock_alloc(ctx, &mem_139582, (int64_t) 8, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < (int64_t) 1; nest_i_140322++) {
        ((int64_t *) mem_139582.mem)[nest_i_140322] = (int64_t) 0;
    }
    if (memblock_alloc(ctx, &mem_139583, (int64_t) 8, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140323 = 0; nest_i_140323 < (int64_t) 1; nest_i_140323++) {
        ((int64_t *) mem_139583.mem)[nest_i_140323] = n_114415;
    }
    
    bool loop_cond_t_res_124591 = slt32(0, max_depth_114424);
    
    if (memblock_alloc(ctx, &mem_139584, (int64_t) 0, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    
    int32_t i64_res_124642 = sext_i64_i32(b_114416);
    int32_t zm_lhs_124643 = mul32(8, i64_res_124642);
    int32_t min_arg1_124644 = sub32(zm_lhs_124643, 1);
    bool zzero_124663 = gather_psizze_114419 == (int64_t) 0;
    bool nonzzero_124664 = !zzero_124663;
    int64_t bytes_139751 = n_114415 * b_114416;
    int64_t bytes_139753 = n_114415 * pL_b_114417;
    
    if (mem_139672_cached_sizze_140864 < b_114416) {
        err = lexical_realloc(ctx, &mem_139672, &mem_139672_cached_sizze_140864, b_114416);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139673_cached_sizze_140865 < pL_b_114417) {
        err = lexical_realloc(ctx, &mem_139673, &mem_139673_cached_sizze_140865, pL_b_114417);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t partition_and_deepen_res_124593;
    bool partition_and_deepen_res_124594;
    int32_t partition_and_deepen_res_124595;
    int64_t loop_dz2087U_124600;
    bool loop_while_124601;
    int32_t p_124602;
    
    if (memblock_set(ctx, &mem_param_139588, &pL_mem_139581, "pL_mem_139581") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139595, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139598, &mem_139583, "mem_139583") != 0)
        return 1;
    loop_dz2087U_124600 = (int64_t) 1;
    loop_while_124601 = loop_cond_t_res_124591;
    p_124602 = 0;
    while (loop_while_124601) {
        bool loop_nonempty_130096 = slt64((int64_t) 0, loop_dz2087U_124600);
        int32_t newDepth_124638 = add32(1, p_124602);
        int32_t new_i_124639 = mul32(radix_sizze_114420, p_124602);
        int32_t zm_lhs_124640 = mul32(radix_sizze_114420, newDepth_124638);
        int32_t new_j_124641 = sub32(zm_lhs_124640, 1);
        int32_t min_res_124645 = smin32(new_j_124641, min_arg1_124644);
        int32_t tmp_124646 = add32(2, new_i_124639);
        int64_t i_124647 = sext_i32_i64(new_i_124639);
        int64_t j__124648 = sext_i32_i64(min_res_124645);
        int64_t tmp_124649 = sext_i32_i64(tmp_124646);
        bool step_zzero_124650 = new_i_124639 == tmp_124646;
        bool bounds_invalid_upwards_124651 = slt32(min_res_124645, new_i_124639);
        int32_t distance_upwards_exclusive_124652 = sub32(min_res_124645, new_i_124639);
        int64_t distance_exclusive_124653 = sext_i32_i64(distance_upwards_exclusive_124652);
        int64_t distance_124654 = add64((int64_t) 1, distance_exclusive_124653);
        bool range_invalid_124655 = step_zzero_124650 || bounds_invalid_upwards_124651;
        bool valid_124656 = !range_invalid_124655;
        bool loop_not_taken_130097 = !loop_nonempty_130096;
        bool protect_assert_disj_130098 = valid_124656 || loop_not_taken_130097;
        bool range_valid_c_124657;
        
        if (!protect_assert_disj_130098) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) i_124647, "..", (long long) tmp_124649, "...", (long long) j__124648, " is invalid.", "-> #0  ftHashJoin.fut:207:15-37\n   #1  ftHashJoin.fut:252:20-258:6\n   #2  ftRelational.fut:215:5-88\n   #3  ftRelational.fut:205:1-216:30\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t num_elems_124658 = sdiv_up64(distance_124654, (int64_t) 2);
        bool loop_nonempty_124659 = slt64((int64_t) 0, num_elems_124658);
        bool loop_not_taken_124665 = !loop_nonempty_124659;
        bool protect_assert_disj_124666 = nonzzero_124664 || loop_not_taken_124665;
        bool protect_assert_disj_130100 = protect_assert_disj_124666 || loop_not_taken_130097;
        bool nonzzero_cert_124667;
        
        if (!protect_assert_disj_130100) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftHashJoin.fut:194:87-90\n   #2  ftHashJoin.fut:208:6-71\n   #3  ftHashJoin.fut:252:20-258:6\n   #4  ftRelational.fut:215:5-88\n   #5  ftRelational.fut:205:1-216:30\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124607;
        int64_t loop_dz2081Uz2089U_124613;
        
        if (memblock_set(ctx, &mem_param_139601, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139604, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139608, &mem_param_139588, "mem_param_139588") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139612, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        loop_dz2081Uz2089U_124613 = (int64_t) 0;
        for (int64_t i_124612 = 0; i_124612 < loop_dz2087U_124600; i_124612++) {
            int64_t bounds_124618 = ((int64_t *) mem_param_139595.mem)[i_124612];
            int64_t bounds_124619 = ((int64_t *) mem_param_139598.mem)[i_124612];
            int64_t dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620 = sub64(bounds_124619, bounds_124618);
            bool empty_slice_124621 = dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620 == (int64_t) 0;
            int64_t m_124622 = sub64(dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, (int64_t) 1);
            int64_t i_p_m_t_s_124623 = add64(bounds_124618, m_124622);
            bool zzero_leq_i_p_m_t_s_124624 = sle64((int64_t) 0, i_p_m_t_s_124623);
            bool i_p_m_t_s_leq_w_124625 = slt64(i_p_m_t_s_124623, n_114415);
            bool zzero_lte_i_124626 = sle64((int64_t) 0, bounds_124618);
            bool i_lte_j_124627 = sle64(bounds_124618, bounds_124619);
            bool y_124628 = i_p_m_t_s_leq_w_124625 && zzero_lte_i_124626;
            bool y_124629 = zzero_leq_i_p_m_t_s_124624 && y_124628;
            bool forwards_ok_124630 = i_lte_j_124627 && y_124629;
            bool ok_or_empty_124631 = empty_slice_124621 || forwards_ok_124630;
            bool index_certs_124632;
            
            if (!ok_or_empty_124631) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bounds_124618, ":", (long long) bounds_124619, "] out of bounds for array of shape [", (long long) n_114415, "].", "-> #0  ftHashJoin.fut:285:21-47\n   #1  ftRelational.fut:215:5-88\n   #2  ftRelational.fut:205:1-216:30\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139613 = (int64_t) 8 * dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620;
            
            if (memblock_alloc(ctx, &mem_139614, bytes_139613, "mem_139614")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t nest_i_140344 = 0; nest_i_140344 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620; nest_i_140344++) {
                ((int64_t *) mem_139614.mem)[nest_i_140344] = (int64_t) 0;
            }
            
            int64_t zm_lhs_124661 = add64(gather_psizze_114419, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620);
            int64_t zs_lhs_124662 = sub64(zm_lhs_124661, (int64_t) 1);
            int64_t m_124668 = sdiv_safe64(zs_lhs_124662, gather_psizze_114419);
            bool loop_cond_124669 = slt64((int64_t) 0, m_124668);
            int64_t binop_y_139623 = b_114416 * bounds_124618;
            int64_t binop_y_139625 = pL_b_114417 * bounds_124618;
            int64_t bytes_139648 = b_114416 * dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620;
            int64_t bytes_139650 = pL_b_114417 * dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620;
            
            if (mem_139627_cached_sizze_140861 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620) {
                err = lexical_realloc(ctx, &mem_139627, &mem_139627_cached_sizze_140861, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t ext_139695;
            int64_t ext_139692;
            int64_t ctx_param_ext_139615;
            int64_t ctx_param_ext_139619;
            
            if (memblock_set(ctx, &mem_param_139618, &mem_param_139612, "mem_param_139612") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139622, &mem_param_139608, "mem_param_139608") != 0)
                return 1;
            ctx_param_ext_139615 = binop_y_139623;
            ctx_param_ext_139619 = binop_y_139625;
            for (int64_t i_124672 = 0; i_124672 < num_elems_124658; i_124672++) {
                int32_t binop_x_124675 = sext_i64_i32(i_124672);
                int32_t binop_x_124676 = mul32(2, binop_x_124675);
                int32_t index_primexp_124677 = add32(new_i_124639, binop_x_124676);
                int32_t zm_lhs_124678 = add32(2, index_primexp_124677);
                int32_t min_arg1_124679 = sub32(zm_lhs_124678, 1);
                int32_t min_res_124680 = smin32(min_res_124645, min_arg1_124679);
                int32_t zp_lhs_124681 = sub32(min_res_124680, index_primexp_124677);
                int32_t ij_bits_124682 = add32(1, zp_lhs_124681);
                int32_t up_to_124683 = shl32(1, ij_bits_124682);
                int64_t tmp_124684 = sext_i32_i64(zp_lhs_124681);
                bool bounds_invalid_upwards_124685 = slt32(zp_lhs_124681, 0);
                bool valid_124687 = !bounds_invalid_upwards_124685;
                bool range_valid_c_124688;
                
                if (!valid_124687) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124684, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:194:87-90\n   #3  ftHashJoin.fut:208:6-71\n   #4  ftHashJoin.fut:252:20-258:6\n   #5  ftRelational.fut:215:5-88\n   #6  ftRelational.fut:205:1-216:30\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t up_to_124698 = sext_i32_i64(up_to_124683);
                bool bounds_invalid_upwards_124699 = slt32(up_to_124683, 0);
                bool valid_124700 = !bounds_invalid_upwards_124699;
                bool range_valid_c_124701;
                
                if (!valid_124700) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124698, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftHashJoin.fut:194:87-90\n   #2  ftHashJoin.fut:208:6-71\n   #3  ftHashJoin.fut:252:20-258:6\n   #4  ftRelational.fut:215:5-88\n   #5  ftRelational.fut:205:1-216:30\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t distance_124686 = add64((int64_t) 1, tmp_124684);
                
                for (int64_t i_139365 = 0; i_139365 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620; i_139365++) {
                    int8_t defunc_0_f_res_124691;
                    int8_t y_124693 = (int8_t) 0;
                    
                    for (int64_t i_124692 = 0; i_124692 < distance_124686; i_124692++) {
                        int32_t binop_x_124694 = sext_i64_i32(i_124692);
                        int32_t get_bit_arg0_124695 = add32(index_primexp_124677, binop_x_124694);
                        int32_t zm_rhs_131285 = sdiv32(get_bit_arg0_124695, 8);
                        int32_t zm_lhs_131286 = sub32(i64_res_124642, zm_rhs_131285);
                        int32_t whichByte_131287 = sub32(zm_lhs_131286, 1);
                        int64_t whichByte_131289 = sext_i32_i64(whichByte_131287);
                        bool x_131290 = sle64((int64_t) 0, whichByte_131289);
                        bool y_131291 = slt64(whichByte_131289, b_114416);
                        bool bounds_check_131292 = x_131290 && y_131291;
                        bool index_certs_131293;
                        
                        if (!bounds_check_131292) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) whichByte_131289, "] out of bounds for array of shape [", (long long) b_114416, "].", "-> #0  ftHashJoin.fut:17:6-18\n   #1  ftRelational.fut:215:5-88\n   #2  ftRelational.fut:205:1-216:30\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t whichBit_131288 = smod32(get_bit_arg0_124695, 8);
                        int8_t zbzg_lhs_131294 = ((int8_t *) mem_param_139618.mem)[ctx_param_ext_139615 + (i_139365 * b_114416 + whichByte_131289)];
                        int8_t unsign_arg0_131295 = zext_i32_i8(whichBit_131288);
                        int8_t unsign_arg0_131296 = ashr8(zbzg_lhs_131294, unsign_arg0_131295);
                        int8_t unsign_arg0_131297 = (int8_t) 1 & unsign_arg0_131296;
                        int32_t to_i32_res_131298 = zext_i8_i32(unsign_arg0_131297);
                        int8_t loopres_124697;
                        
                        if (futrts_set_bit_2464(ctx, &loopres_124697, binop_x_124694, y_124693, to_i32_res_131298) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int8_t y_tmp_140352 = loopres_124697;
                        
                        y_124693 = y_tmp_140352;
                    }
                    defunc_0_f_res_124691 = y_124693;
                    ((int8_t *) mem_139627)[i_139365] = defunc_0_f_res_124691;
                }
                
                int64_t defunc_0_radix_sort_multistep_res_124702;
                int64_t offs_124705;
                
                if (memblock_set(ctx, &mem_param_139636, &mem_139614, "mem_139614") != 0)
                    return 1;
                offs_124705 = (int64_t) 0;
                for (int64_t i_124704 = 0; i_124704 < up_to_124698; i_124704++) {
                    int32_t binop_x_124707 = sext_i64_i32(i_124704);
                    int8_t index_primexp_124708 = zext_i32_i8(binop_x_124707);
                    
                    if (memblock_alloc(ctx, &mem_139638, bytes_139613, "mem_139638")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t inpacc_132072;
                    int64_t defunc_0_reduce_res_132073;
                    int64_t inpacc_131893;
                    int64_t inpacc_131894;
                    
                    inpacc_131893 = (int64_t) 0;
                    inpacc_131894 = (int64_t) 0;
                    for (int64_t i_139383 = 0; i_139383 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620; i_139383++) {
                        int8_t eta_p_139553 = ((int8_t *) mem_139627)[i_139383];
                        bool lifted_lambda_res_139554 = eta_p_139553 == index_primexp_124708;
                        int64_t bool_res_139555 = btoi_bool_i64(lifted_lambda_res_139554);
                        int64_t eta_p_139568 = ((int64_t *) mem_param_139636.mem)[i_139383];
                        int64_t defunc_0_op_res_139569 = add64(inpacc_131893, bool_res_139555);
                        int64_t zm_lhs_139570 = add64(offs_124705, defunc_0_op_res_139569);
                        int64_t lifted_lambda_res_139571 = sub64(zm_lhs_139570, (int64_t) 1);
                        int64_t defunc_0_f_res_139572 = mul64(bool_res_139555, lifted_lambda_res_139571);
                        int64_t defunc_0_f_res_139573 = add64(eta_p_139568, defunc_0_f_res_139572);
                        int64_t defunc_0_op_res_131942 = add64(inpacc_131894, bool_res_139555);
                        
                        ((int64_t *) mem_139638.mem)[i_139383] = defunc_0_f_res_139573;
                        
                        int64_t inpacc_tmp_140356 = defunc_0_op_res_139569;
                        int64_t inpacc_tmp_140357 = defunc_0_op_res_131942;
                        
                        inpacc_131893 = inpacc_tmp_140356;
                        inpacc_131894 = inpacc_tmp_140357;
                    }
                    inpacc_132072 = inpacc_131893;
                    defunc_0_reduce_res_132073 = inpacc_131894;
                    
                    int64_t tmp_124733 = add64(offs_124705, defunc_0_reduce_res_132073);
                    
                    if (memblock_set(ctx, &mem_param_tmp_140353, &mem_139638, "mem_139638") != 0)
                        return 1;
                    
                    int64_t offs_tmp_140354 = tmp_124733;
                    
                    if (memblock_set(ctx, &mem_param_139636, &mem_param_tmp_140353, "mem_param_tmp_140353") != 0)
                        return 1;
                    offs_124705 = offs_tmp_140354;
                }
                if (memblock_set(ctx, &ext_mem_139647, &mem_param_139636, "mem_param_139636") != 0)
                    return 1;
                defunc_0_radix_sort_multistep_res_124702 = offs_124705;
                if (memblock_alloc(ctx, &mem_139649, bytes_139648, "mem_139649")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_1b(ctx, 2, (uint8_t *) mem_139649.mem, (int64_t) 0, (int64_t []) {b_114416, (int64_t) 1}, (uint8_t *) mem_param_139618.mem, ctx_param_ext_139615, (int64_t []) {b_114416, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, b_114416});
                if (memblock_alloc(ctx, &mem_139651, bytes_139650, "mem_139651")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_1b(ctx, 2, (uint8_t *) mem_139651.mem, (int64_t) 0, (int64_t []) {pL_b_114417, (int64_t) 1}, (uint8_t *) mem_param_139622.mem, ctx_param_ext_139619, (int64_t []) {pL_b_114417, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, pL_b_114417});
                
                bool partitioned_scatter_res_124740;
                int64_t partitioned_scatter_res_124743;
                bool loop_while_124744;
                int64_t p_124747;
                
                loop_while_124744 = loop_cond_124669;
                p_124747 = (int64_t) 0;
                while (loop_while_124744) {
                    int64_t lower_bound_124748 = mul64(gather_psizze_114419, p_124747);
                    int64_t min_arg1_124749 = add64(gather_psizze_114419, lower_bound_124748);
                    int64_t min_res_124750 = smin64(dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, min_arg1_124749);
                    int64_t j_m_i_124751 = sub64(min_res_124750, lower_bound_124748);
                    bool empty_slice_124752 = j_m_i_124751 == (int64_t) 0;
                    int64_t m_124753 = sub64(j_m_i_124751, (int64_t) 1);
                    int64_t i_p_m_t_s_124754 = add64(lower_bound_124748, m_124753);
                    bool zzero_leq_i_p_m_t_s_124755 = sle64((int64_t) 0, i_p_m_t_s_124754);
                    bool i_p_m_t_s_leq_w_124756 = slt64(i_p_m_t_s_124754, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620);
                    bool zzero_lte_i_124757 = sle64((int64_t) 0, lower_bound_124748);
                    bool i_lte_j_124758 = sle64(lower_bound_124748, min_res_124750);
                    bool y_124759 = i_p_m_t_s_leq_w_124756 && zzero_lte_i_124757;
                    bool y_124760 = zzero_leq_i_p_m_t_s_124755 && y_124759;
                    bool forwards_ok_124761 = i_lte_j_124758 && y_124760;
                    bool ok_or_empty_124762 = empty_slice_124752 || forwards_ok_124761;
                    bool index_certs_124763;
                    
                    if (!ok_or_empty_124762) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124748, ":", (long long) min_res_124750, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftHashJoin.fut:194:87-90\n   #2  ftHashJoin.fut:208:6-71\n   #3  ftHashJoin.fut:252:20-258:6\n   #4  ftRelational.fut:215:5-88\n   #5  ftRelational.fut:205:1-216:30\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t bytes_139660 = b_114416 * j_m_i_124751;
                    int64_t bytes_139662 = pL_b_114417 * j_m_i_124751;
                    
                    if (mem_139661_cached_sizze_140862 < bytes_139660) {
                        err = lexical_realloc(ctx, &mem_139661, &mem_139661_cached_sizze_140862, bytes_139660);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139661, (int64_t) 0, (int64_t []) {b_114416, (int64_t) 1}, (uint8_t *) mem_139649.mem, (int64_t) 0 + b_114416 * lower_bound_124748, (int64_t []) {b_114416, (int64_t) 1}, (int64_t []) {j_m_i_124751, b_114416});
                    if (mem_139663_cached_sizze_140863 < bytes_139662) {
                        err = lexical_realloc(ctx, &mem_139663, &mem_139663_cached_sizze_140863, bytes_139662);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139663, (int64_t) 0, (int64_t []) {pL_b_114417, (int64_t) 1}, (uint8_t *) mem_139651.mem, (int64_t) 0 + pL_b_114417 * lower_bound_124748, (int64_t []) {pL_b_114417, (int64_t) 1}, (int64_t []) {j_m_i_124751, pL_b_114417});
                    for (int64_t write_iter_139385 = 0; write_iter_139385 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620; write_iter_139385++) {
                        int64_t write_iv_139388 = ((int64_t *) ext_mem_139647.mem)[write_iter_139385];
                        
                        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139672, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139618.mem, ctx_param_ext_139615 + write_iter_139385 * b_114416, (int64_t []) {(int64_t) 1}, (int64_t []) {b_114416});
                        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139673, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139622.mem, ctx_param_ext_139619 + write_iter_139385 * pL_b_114417, (int64_t []) {(int64_t) 1}, (int64_t []) {pL_b_114417});
                        
                        bool cond_131985 = sle64(lower_bound_124748, write_iv_139388);
                        bool cond_t_res_131986 = slt64(write_iv_139388, min_res_124750);
                        bool x_131987 = cond_131985 && cond_t_res_131986;
                        int64_t lifted_lambda_res_131988;
                        
                        if (x_131987) {
                            int64_t lifted_lambda_res_t_res_132075 = sub64(write_iv_139388, lower_bound_124748);
                            
                            lifted_lambda_res_131988 = lifted_lambda_res_t_res_132075;
                        } else {
                            lifted_lambda_res_131988 = (int64_t) -1;
                        }
                        if ((sle64((int64_t) 0, lifted_lambda_res_131988) && slt64(lifted_lambda_res_131988, j_m_i_124751)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_114416 - (int64_t) 1, b_114416))) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_139661, lifted_lambda_res_131988 * b_114416, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139672, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_114416});
                        }
                        if ((sle64((int64_t) 0, lifted_lambda_res_131988) && slt64(lifted_lambda_res_131988, j_m_i_124751)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(pL_b_114417 - (int64_t) 1, pL_b_114417))) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_139663, lifted_lambda_res_131988 * pL_b_114417, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139673, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {pL_b_114417});
                        }
                    }
                    
                    int64_t tmp_124775 = add64((int64_t) 1, p_124747);
                    
                    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139649.mem, b_114416 * lower_bound_124748, (int64_t []) {b_114416, (int64_t) 1}, (uint8_t *) mem_139661, (int64_t) 0, (int64_t []) {b_114416, (int64_t) 1}, (int64_t []) {j_m_i_124751, b_114416});
                    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139651.mem, pL_b_114417 * lower_bound_124748, (int64_t []) {pL_b_114417, (int64_t) 1}, (uint8_t *) mem_139663, (int64_t) 0, (int64_t []) {pL_b_114417, (int64_t) 1}, (int64_t []) {j_m_i_124751, pL_b_114417});
                    
                    bool loop_cond_124783 = slt64(tmp_124775, m_124668);
                    bool loop_while_tmp_140359 = loop_cond_124783;
                    int64_t p_tmp_140362 = tmp_124775;
                    
                    loop_while_124744 = loop_while_tmp_140359;
                    p_124747 = p_tmp_140362;
                }
                partitioned_scatter_res_124740 = loop_while_124744;
                partitioned_scatter_res_124743 = p_124747;
                if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_tmp_140345, &mem_139649, "mem_139649") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_tmp_140346, &mem_139651, "mem_139651") != 0)
                    return 1;
                
                int64_t ctx_param_ext_tmp_140347 = (int64_t) 0;
                int64_t ctx_param_ext_tmp_140348 = (int64_t) 0;
                
                if (memblock_set(ctx, &mem_param_139618, &mem_param_tmp_140345, "mem_param_tmp_140345") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_139622, &mem_param_tmp_140346, "mem_param_tmp_140346") != 0)
                    return 1;
                ctx_param_ext_139615 = ctx_param_ext_tmp_140347;
                ctx_param_ext_139619 = ctx_param_ext_tmp_140348;
            }
            if (memblock_set(ctx, &ext_mem_139697, &mem_param_139618, "mem_param_139618") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_139696, &mem_param_139622, "mem_param_139622") != 0)
                return 1;
            ext_139695 = ctx_param_ext_139615;
            ext_139692 = ctx_param_ext_139619;
            if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_139699, bytes_139648, "mem_139699")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139699.mem, (int64_t) 0, (int64_t []) {b_114416, (int64_t) 1}, (uint8_t *) ext_mem_139697.mem, ext_139695, (int64_t []) {b_114416, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, b_114416});
            
            int64_t deepen_step_res_124784;
            int64_t deepen_step_res_124785;
            int32_t deepen_step_res_124788;
            
            if (futrts_getPartitionBounds_11848(ctx, &ext_mem_139702, &ext_mem_139701, &deepen_step_res_124784, &deepen_step_res_124785, &deepen_step_res_124788, mem_139699, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, b_114416, newDepth_124638, new_i_124639, new_j_124641) != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &mem_139699, "mem_139699") != 0)
                return 1;
            
            int64_t zl_rhs_130110 = sub64(deepen_step_res_124784, (int64_t) 1);
            int64_t bytes_139703 = (int64_t) 8 * deepen_step_res_124784;
            
            if (mem_139704_cached_sizze_140866 < bytes_139703) {
                err = lexical_realloc(ctx, &mem_139704, &mem_139704_cached_sizze_140866, bytes_139703);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139706_cached_sizze_140867 < bytes_139703) {
                err = lexical_realloc(ctx, &mem_139706, &mem_139706_cached_sizze_140867, bytes_139703);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139708_cached_sizze_140868 < bytes_139703) {
                err = lexical_realloc(ctx, &mem_139708, &mem_139708_cached_sizze_140868, bytes_139703);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139710_cached_sizze_140869 < bytes_139703) {
                err = lexical_realloc(ctx, &mem_139710, &mem_139710_cached_sizze_140869, bytes_139703);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t discard_139407;
            int64_t scanacc_139397 = (int64_t) 0;
            
            for (int64_t i_139402 = 0; i_139402 < deepen_step_res_124784; i_139402++) {
                int64_t tmp_131682 = ((int64_t *) ext_mem_139702.mem)[i_139402];
                bool cond_131683 = slt64(i_139402, zl_rhs_130110);
                int64_t tmp_131684;
                
                if (cond_131683) {
                    int64_t tmp_132079 = add64((int64_t) 1, i_139402);
                    bool x_132080 = sle64((int64_t) 0, tmp_132079);
                    bool y_132081 = slt64(tmp_132079, deepen_step_res_124784);
                    bool bounds_check_132082 = x_132080 && y_132081;
                    bool index_certs_132083;
                    
                    if (!bounds_check_132082) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132079, "] out of bounds for array of shape [", (long long) deepen_step_res_124784, "].", "-> #0  ftHashJoin.fut:262:67-81\n   #1  ftRelational.fut:215:5-88\n   #2  ftRelational.fut:205:1-216:30\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t tmp_t_res_132084 = ((int64_t *) ext_mem_139702.mem)[tmp_132079];
                    
                    tmp_131684 = tmp_t_res_132084;
                } else {
                    tmp_131684 = dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620;
                }
                
                int64_t zg_lhs_131693 = sub64(tmp_131684, tmp_131682);
                bool lifted_lambda_res_131694 = slt64(sizze_thresh_114423, zg_lhs_131693);
                int64_t defunc_0_f_res_131695 = btoi_bool_i64(lifted_lambda_res_131694);
                int64_t defunc_0_op_res_124805 = add64(defunc_0_f_res_131695, scanacc_139397);
                
                ((int64_t *) mem_139704)[i_139402] = defunc_0_op_res_124805;
                ((int64_t *) mem_139706)[i_139402] = defunc_0_f_res_131695;
                ((int64_t *) mem_139708)[i_139402] = tmp_131682;
                ((int64_t *) mem_139710)[i_139402] = tmp_131684;
                
                int64_t scanacc_tmp_140365 = defunc_0_op_res_124805;
                
                scanacc_139397 = scanacc_tmp_140365;
            }
            discard_139407 = scanacc_139397;
            if (memblock_unref(ctx, &ext_mem_139702, "ext_mem_139702") != 0)
                return 1;
            
            bool cond_124806 = deepen_step_res_124784 == (int64_t) 0;
            bool x_124807 = !cond_124806;
            bool x_124809 = sle64((int64_t) 0, zl_rhs_130110);
            bool y_124810 = slt64(zl_rhs_130110, deepen_step_res_124784);
            bool bounds_check_124811 = x_124809 && y_124810;
            bool protect_assert_disj_124812 = cond_124806 || bounds_check_124811;
            bool index_certs_124813;
            
            if (!protect_assert_disj_124812) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_rhs_130110, "] out of bounds for array of shape [", (long long) deepen_step_res_124784, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:263:8-49\n   #3  ftRelational.fut:215:5-88\n   #4  ftRelational.fut:205:1-216:30\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_f_res_124814;
            
            if (x_124807) {
                int64_t x_132085 = ((int64_t *) mem_139704)[zl_rhs_130110];
                
                m_f_res_124814 = x_132085;
            } else {
                m_f_res_124814 = (int64_t) 0;
            }
            
            int64_t m_124816;
            
            if (cond_124806) {
                m_124816 = (int64_t) 0;
            } else {
                m_124816 = m_f_res_124814;
            }
            
            int64_t m_124826 = sub64(m_124816, (int64_t) 1);
            bool i_p_m_t_s_leq_w_124828 = slt64(m_124826, deepen_step_res_124784);
            bool zzero_leq_i_p_m_t_s_124827 = sle64((int64_t) 0, m_124826);
            bool y_124830 = zzero_leq_i_p_m_t_s_124827 && i_p_m_t_s_leq_w_124828;
            bool i_lte_j_124829 = sle64((int64_t) 0, m_124816);
            bool forwards_ok_124831 = i_lte_j_124829 && y_124830;
            bool eq_x_zz_124823 = (int64_t) 0 == m_f_res_124814;
            bool p_and_eq_x_y_124824 = x_124807 && eq_x_zz_124823;
            bool empty_slice_124825 = cond_124806 || p_and_eq_x_y_124824;
            bool ok_or_empty_124832 = empty_slice_124825 || forwards_ok_124831;
            bool index_certs_124833;
            
            if (!ok_or_empty_124832) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124816, "] out of bounds for array of shape [", (long long) deepen_step_res_124784, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:263:8-49\n   #3  ftRelational.fut:215:5-88\n   #4  ftRelational.fut:205:1-216:30\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139735 = (int64_t) 8 * m_124816;
            int64_t conc_tmp_124855 = loop_dz2081Uz2089U_124613 + m_124816;
            int64_t bytes_139771 = (int64_t) 8 * conc_tmp_124855;
            
            if (mem_139736_cached_sizze_140870 < bytes_139735) {
                err = lexical_realloc(ctx, &mem_139736, &mem_139736_cached_sizze_140870, bytes_139735);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139736, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139710, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124816});
            if (mem_139738_cached_sizze_140871 < bytes_139735) {
                err = lexical_realloc(ctx, &mem_139738, &mem_139738_cached_sizze_140871, bytes_139735);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139738, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139708, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124816});
            for (int64_t write_iter_139408 = 0; write_iter_139408 < deepen_step_res_124784; write_iter_139408++) {
                int64_t write_iv_139411 = ((int64_t *) mem_139706)[write_iter_139408];
                int64_t write_iv_139412 = ((int64_t *) mem_139704)[write_iter_139408];
                int64_t write_iv_139413 = ((int64_t *) mem_139708)[write_iter_139408];
                int64_t write_iv_139414 = ((int64_t *) mem_139710)[write_iter_139408];
                bool cond_131664 = write_iv_139411 == (int64_t) 1;
                int64_t lifted_lambda_res_131665;
                
                if (cond_131664) {
                    int64_t lifted_lambda_res_t_res_132086 = sub64(write_iv_139412, (int64_t) 1);
                    
                    lifted_lambda_res_131665 = lifted_lambda_res_t_res_132086;
                } else {
                    lifted_lambda_res_131665 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124816)) {
                    ((int64_t *) mem_139738)[lifted_lambda_res_131665] = write_iv_139413;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124816)) {
                    ((int64_t *) mem_139736)[lifted_lambda_res_131665] = write_iv_139414;
                }
            }
            if (memblock_alloc(ctx, &mem_139752, bytes_139751, "mem_139752")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139752.mem, (int64_t) 0, (int64_t []) {b_114416, (int64_t) 1}, (uint8_t *) mem_param_139612.mem, (int64_t) 0, (int64_t []) {b_114416, (int64_t) 1}, (int64_t []) {n_114415, b_114416});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139752.mem, b_114416 * bounds_124618, (int64_t []) {b_114416, (int64_t) 1}, (uint8_t *) ext_mem_139697.mem, ext_139695, (int64_t []) {b_114416, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, b_114416});
            if (memblock_unref(ctx, &ext_mem_139697, "ext_mem_139697") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_139754, bytes_139753, "mem_139754")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139754.mem, (int64_t) 0, (int64_t []) {pL_b_114417, (int64_t) 1}, (uint8_t *) mem_param_139608.mem, (int64_t) 0, (int64_t []) {pL_b_114417, (int64_t) 1}, (int64_t []) {n_114415, pL_b_114417});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139754.mem, pL_b_114417 * bounds_124618, (int64_t []) {pL_b_114417, (int64_t) 1}, (uint8_t *) ext_mem_139696.mem, ext_139692, (int64_t []) {pL_b_114417, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124620, pL_b_114417});
            if (memblock_unref(ctx, &ext_mem_139696, "ext_mem_139696") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_139772, bytes_139771, "mem_139772")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc(ctx, &mem_139774, bytes_139771, "mem_139774")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139421 = 0; i_139421 < m_124816; i_139421++) {
                int64_t eta_p_124851 = ((int64_t *) mem_139738)[i_139421];
                int64_t eta_p_124852 = ((int64_t *) mem_139736)[i_139421];
                int64_t tmp_124853 = add64(bounds_124618, eta_p_124851);
                int64_t tmp_124854 = add64(bounds_124618, eta_p_124852);
                
                ((int64_t *) mem_139772.mem)[loop_dz2081Uz2089U_124613 + i_139421] = tmp_124853;
                ((int64_t *) mem_139774.mem)[loop_dz2081Uz2089U_124613 + i_139421] = tmp_124854;
            }
            
            int64_t tmp_offs_140374 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139772.mem, tmp_offs_140374, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139601.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2089U_124613});
            tmp_offs_140374 += loop_dz2081Uz2089U_124613;
            if (!(tmp_offs_140374 == loop_dz2081Uz2089U_124613)) {
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139772.mem, tmp_offs_140374, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139772.mem, loop_dz2081Uz2089U_124613, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124816});
            }
            tmp_offs_140374 += m_124816;
            
            int64_t tmp_offs_140375 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139774.mem, tmp_offs_140375, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139604.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2089U_124613});
            tmp_offs_140375 += loop_dz2081Uz2089U_124613;
            if (!(tmp_offs_140375 == loop_dz2081Uz2089U_124613)) {
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139774.mem, tmp_offs_140375, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139774.mem, loop_dz2081Uz2089U_124613, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124816});
            }
            tmp_offs_140375 += m_124816;
            if (memblock_set(ctx, &mem_param_tmp_140335, &mem_139772, "mem_139772") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140336, &mem_139774, "mem_139774") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140337, &mem_139754, "mem_139754") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139752, "mem_139752") != 0)
                return 1;
            
            int64_t loop_dz2081Uz2089U_tmp_140339 = conc_tmp_124855;
            
            if (memblock_set(ctx, &mem_param_139601, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139604, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139608, &mem_param_tmp_140337, "mem_param_tmp_140337") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139612, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            loop_dz2081Uz2089U_124613 = loop_dz2081Uz2089U_tmp_140339;
        }
        if (memblock_set(ctx, &ext_mem_139788, &mem_param_139601, "mem_param_139601") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139787, &mem_param_139604, "mem_param_139604") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139786, &mem_param_139608, "mem_param_139608") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139785, &mem_param_139612, "mem_param_139612") != 0)
            return 1;
        loopres_124607 = loop_dz2081Uz2089U_124613;
        
        bool cond_124859 = slt64((int64_t) 0, loopres_124607);
        bool loop_cond_t_res_124860 = slt32(newDepth_124638, max_depth_114424);
        bool x_124861 = cond_124859 && loop_cond_t_res_124860;
        
        if (memblock_set(ctx, &mem_param_tmp_140324, &ext_mem_139786, "ext_mem_139786") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140325, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140326, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &ext_mem_139787, "ext_mem_139787") != 0)
            return 1;
        
        int64_t loop_dz2087U_tmp_140328 = loopres_124607;
        bool loop_while_tmp_140329 = x_124861;
        int32_t p_tmp_140330 = newDepth_124638;
        
        if (memblock_set(ctx, &mem_param_139588, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140325, "mem_param_tmp_140325") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139595, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139598, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        loop_dz2087U_124600 = loop_dz2087U_tmp_140328;
        loop_while_124601 = loop_while_tmp_140329;
        p_124602 = p_tmp_140330;
    }
    if (memblock_set(ctx, &ext_mem_139802, &mem_param_139588, "mem_param_139588") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139801, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139800, &mem_param_139595, "mem_param_139595") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139799, &mem_param_139598, "mem_param_139598") != 0)
        return 1;
    partition_and_deepen_res_124593 = loop_dz2087U_124600;
    partition_and_deepen_res_124594 = loop_while_124601;
    partition_and_deepen_res_124595 = p_124602;
    if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &ext_mem_139801, "ext_mem_139801") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &ext_mem_139802, "ext_mem_139802") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140859, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140860, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139627);
        free(mem_139661);
        free(mem_139663);
        free(mem_139672);
        free(mem_139673);
        free(mem_139704);
        free(mem_139706);
        free(mem_139708);
        free(mem_139710);
        free(mem_139736);
        free(mem_139738);
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140325, "mem_param_tmp_140325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140337, "mem_param_tmp_140337") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140336, "mem_param_tmp_140336") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140335, "mem_param_tmp_140335") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139774, "mem_139774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139772, "mem_139772") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139754, "mem_139754") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139752, "mem_139752") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139701, "ext_mem_139701") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139702, "ext_mem_139702") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139699, "mem_139699") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140346, "mem_param_tmp_140346") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140345, "mem_param_tmp_140345") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139651, "mem_139651") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139649, "mem_139649") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140353, "mem_param_tmp_140353") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139638, "mem_139638") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139636, "mem_param_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139622, "mem_param_139622") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139618, "mem_param_139618") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139696, "ext_mem_139696") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139697, "ext_mem_139697") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139612, "mem_param_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139608, "mem_param_139608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139604, "mem_param_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139601, "mem_param_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139785, "ext_mem_139785") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139786, "ext_mem_139786") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139787, "ext_mem_139787") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139788, "ext_mem_139788") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139598, "mem_param_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139595, "mem_param_139595") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139588, "mem_param_139588") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139799, "ext_mem_139799") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139800, "ext_mem_139800") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139801, "ext_mem_139801") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139802, "ext_mem_139802") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_partition_and_deepen_GFUR(struct futhark_context *ctx, struct memblock *mem_out_p_140872, struct memblock *mem_out_p_140873, struct memblock xs_mem_139580, int64_t n_115782, int64_t b_115783, int16_t block_sizze_115784, int64_t gather_psizze_115785, int32_t radix_sizze_115786, int64_t offset_115788, int64_t sizze_thresh_115789, int32_t max_depth_115790)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139625_cached_sizze_140874 = 0;
    unsigned char *mem_139625 = NULL;
    int64_t mem_139658_cached_sizze_140875 = 0;
    unsigned char *mem_139658 = NULL;
    int64_t mem_139660_cached_sizze_140876 = 0;
    unsigned char *mem_139660 = NULL;
    int64_t mem_139668_cached_sizze_140877 = 0;
    unsigned char *mem_139668 = NULL;
    int64_t mem_139696_cached_sizze_140878 = 0;
    unsigned char *mem_139696 = NULL;
    int64_t mem_139698_cached_sizze_140879 = 0;
    unsigned char *mem_139698 = NULL;
    int64_t mem_139700_cached_sizze_140880 = 0;
    unsigned char *mem_139700 = NULL;
    int64_t mem_139702_cached_sizze_140881 = 0;
    unsigned char *mem_139702 = NULL;
    int64_t mem_139728_cached_sizze_140882 = 0;
    unsigned char *mem_139728 = NULL;
    int64_t mem_139730_cached_sizze_140883 = 0;
    unsigned char *mem_139730 = NULL;
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_param_tmp_140328;
    
    mem_param_tmp_140328.references = NULL;
    
    struct memblock mem_param_tmp_140327;
    
    mem_param_tmp_140327.references = NULL;
    
    struct memblock mem_param_tmp_140326;
    
    mem_param_tmp_140326.references = NULL;
    
    struct memblock mem_param_tmp_140340;
    
    mem_param_tmp_140340.references = NULL;
    
    struct memblock mem_param_tmp_140339;
    
    mem_param_tmp_140339.references = NULL;
    
    struct memblock mem_param_tmp_140338;
    
    mem_param_tmp_140338.references = NULL;
    
    struct memblock mem_param_tmp_140337;
    
    mem_param_tmp_140337.references = NULL;
    
    struct memblock mem_139766;
    
    mem_139766.references = NULL;
    
    struct memblock mem_139764;
    
    mem_139764.references = NULL;
    
    struct memblock mem_139746;
    
    mem_139746.references = NULL;
    
    struct memblock mem_139744;
    
    mem_139744.references = NULL;
    
    struct memblock ext_mem_139693;
    
    ext_mem_139693.references = NULL;
    
    struct memblock ext_mem_139694;
    
    ext_mem_139694.references = NULL;
    
    struct memblock mem_139691;
    
    mem_139691.references = NULL;
    
    struct memblock mem_param_tmp_140348;
    
    mem_param_tmp_140348.references = NULL;
    
    struct memblock mem_param_tmp_140347;
    
    mem_param_tmp_140347.references = NULL;
    
    struct memblock mem_139649;
    
    mem_139649.references = NULL;
    
    struct memblock mem_139647;
    
    mem_139647.references = NULL;
    
    struct memblock mem_param_tmp_140355;
    
    mem_param_tmp_140355.references = NULL;
    
    struct memblock mem_139636;
    
    mem_139636.references = NULL;
    
    struct memblock mem_param_139634;
    
    mem_param_139634.references = NULL;
    
    struct memblock ext_mem_139645;
    
    ext_mem_139645.references = NULL;
    
    struct memblock mem_param_139620;
    
    mem_param_139620.references = NULL;
    
    struct memblock mem_param_139617;
    
    mem_param_139617.references = NULL;
    
    struct memblock ext_mem_139688;
    
    ext_mem_139688.references = NULL;
    
    struct memblock ext_mem_139689;
    
    ext_mem_139689.references = NULL;
    
    struct memblock mem_139613;
    
    mem_139613.references = NULL;
    
    struct memblock mem_param_139611;
    
    mem_param_139611.references = NULL;
    
    struct memblock mem_param_139607;
    
    mem_param_139607.references = NULL;
    
    struct memblock mem_param_139604;
    
    mem_param_139604.references = NULL;
    
    struct memblock mem_param_139601;
    
    mem_param_139601.references = NULL;
    
    struct memblock ext_mem_139776;
    
    ext_mem_139776.references = NULL;
    
    struct memblock ext_mem_139777;
    
    ext_mem_139777.references = NULL;
    
    struct memblock ext_mem_139778;
    
    ext_mem_139778.references = NULL;
    
    struct memblock ext_mem_139779;
    
    ext_mem_139779.references = NULL;
    
    struct memblock mem_param_139598;
    
    mem_param_139598.references = NULL;
    
    struct memblock mem_param_139595;
    
    mem_param_139595.references = NULL;
    
    struct memblock mem_param_139592;
    
    mem_param_139592.references = NULL;
    
    struct memblock mem_param_139588;
    
    mem_param_139588.references = NULL;
    
    struct memblock ext_mem_139789;
    
    ext_mem_139789.references = NULL;
    
    struct memblock ext_mem_139790;
    
    ext_mem_139790.references = NULL;
    
    struct memblock ext_mem_139791;
    
    ext_mem_139791.references = NULL;
    
    struct memblock ext_mem_139792;
    
    ext_mem_139792.references = NULL;
    
    struct memblock mem_139585;
    
    mem_139585.references = NULL;
    
    struct memblock mem_139584;
    
    mem_139584.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t is_124588 = add64(n_115782, offset_115788);
    bool bounds_invalid_upwards_124589 = slt64(is_124588, offset_115788);
    bool valid_124590 = !bounds_invalid_upwards_124589;
    bool range_valid_c_124591;
    
    if (!valid_124590) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) offset_115788, "..<", (long long) is_124588, " is invalid.", "-> #0  ftRelational.fut:227:13-32\n   #1  ftRelational.fut:218:1-230:31\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139581 = (int64_t) 8 * n_115782;
    
    if (memblock_alloc(ctx, &mem_139582, bytes_139581, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140322 = 0; i_140322 < n_115782; i_140322++) {
        int64_t x_140323 = offset_115788 + i_140322 * (int64_t) 1;
        
        ((int64_t *) mem_139582.mem)[i_140322] = x_140323;
    }
    if (memblock_alloc(ctx, &mem_139583, (int64_t) 8, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140324 = 0; nest_i_140324 < (int64_t) 1; nest_i_140324++) {
        ((int64_t *) mem_139583.mem)[nest_i_140324] = (int64_t) 0;
    }
    if (memblock_alloc(ctx, &mem_139584, (int64_t) 8, "mem_139584")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140325 = 0; nest_i_140325 < (int64_t) 1; nest_i_140325++) {
        ((int64_t *) mem_139584.mem)[nest_i_140325] = n_115782;
    }
    
    bool loop_cond_t_res_124595 = slt32(0, max_depth_115790);
    
    if (memblock_alloc(ctx, &mem_139585, (int64_t) 0, "mem_139585")) {
        err = 1;
        goto cleanup;
    }
    
    int32_t i64_res_124646 = sext_i64_i32(b_115783);
    int32_t zm_lhs_124647 = mul32(8, i64_res_124646);
    int32_t min_arg1_124648 = sub32(zm_lhs_124647, 1);
    bool zzero_124667 = gather_psizze_115785 == (int64_t) 0;
    bool nonzzero_124668 = !zzero_124667;
    int64_t bytes_139743 = n_115782 * b_115783;
    
    if (mem_139668_cached_sizze_140877 < b_115783) {
        err = lexical_realloc(ctx, &mem_139668, &mem_139668_cached_sizze_140877, b_115783);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t partition_and_deepen_res_124597;
    bool partition_and_deepen_res_124598;
    int32_t partition_and_deepen_res_124599;
    int64_t loop_dz2087U_124604;
    bool loop_while_124605;
    int32_t p_124606;
    
    if (memblock_set(ctx, &mem_param_139588, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139592, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139595, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139598, &mem_139584, "mem_139584") != 0)
        return 1;
    loop_dz2087U_124604 = (int64_t) 1;
    loop_while_124605 = loop_cond_t_res_124595;
    p_124606 = 0;
    while (loop_while_124605) {
        bool loop_nonempty_130096 = slt64((int64_t) 0, loop_dz2087U_124604);
        int32_t newDepth_124642 = add32(1, p_124606);
        int32_t new_i_124643 = mul32(radix_sizze_115786, p_124606);
        int32_t zm_lhs_124644 = mul32(radix_sizze_115786, newDepth_124642);
        int32_t new_j_124645 = sub32(zm_lhs_124644, 1);
        int32_t min_res_124649 = smin32(new_j_124645, min_arg1_124648);
        int32_t tmp_124650 = add32(2, new_i_124643);
        int64_t i_124651 = sext_i32_i64(new_i_124643);
        int64_t j__124652 = sext_i32_i64(min_res_124649);
        int64_t tmp_124653 = sext_i32_i64(tmp_124650);
        bool step_zzero_124654 = new_i_124643 == tmp_124650;
        bool bounds_invalid_upwards_124655 = slt32(min_res_124649, new_i_124643);
        int32_t distance_upwards_exclusive_124656 = sub32(min_res_124649, new_i_124643);
        int64_t distance_exclusive_124657 = sext_i32_i64(distance_upwards_exclusive_124656);
        int64_t distance_124658 = add64((int64_t) 1, distance_exclusive_124657);
        bool range_invalid_124659 = step_zzero_124654 || bounds_invalid_upwards_124655;
        bool valid_124660 = !range_invalid_124659;
        bool loop_not_taken_130097 = !loop_nonempty_130096;
        bool protect_assert_disj_130098 = valid_124660 || loop_not_taken_130097;
        bool range_valid_c_124661;
        
        if (!protect_assert_disj_130098) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) i_124651, "..", (long long) tmp_124653, "...", (long long) j__124652, " is invalid.", "-> #0  ftHashJoin.fut:207:15-37\n   #1  ftHashJoin.fut:252:20-258:6\n   #2  ftRelational.fut:229:5-88\n   #3  ftRelational.fut:218:1-230:31\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t num_elems_124662 = sdiv_up64(distance_124658, (int64_t) 2);
        bool loop_nonempty_124663 = slt64((int64_t) 0, num_elems_124662);
        bool loop_not_taken_124669 = !loop_nonempty_124663;
        bool protect_assert_disj_124670 = nonzzero_124668 || loop_not_taken_124669;
        bool protect_assert_disj_130100 = protect_assert_disj_124670 || loop_not_taken_130097;
        bool nonzzero_cert_124671;
        
        if (!protect_assert_disj_130100) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftHashJoin.fut:194:87-90\n   #2  ftHashJoin.fut:208:6-71\n   #3  ftHashJoin.fut:252:20-258:6\n   #4  ftRelational.fut:229:5-88\n   #5  ftRelational.fut:218:1-230:31\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t loopres_124611;
        int64_t loop_dz2081Uz2089U_124617;
        
        if (memblock_set(ctx, &mem_param_139601, &mem_139585, "mem_139585") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139604, &mem_139585, "mem_139585") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139607, &mem_param_139588, "mem_param_139588") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139611, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        loop_dz2081Uz2089U_124617 = (int64_t) 0;
        for (int64_t i_124616 = 0; i_124616 < loop_dz2087U_124604; i_124616++) {
            int64_t bounds_124622 = ((int64_t *) mem_param_139595.mem)[i_124616];
            int64_t bounds_124623 = ((int64_t *) mem_param_139598.mem)[i_124616];
            int64_t dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624 = sub64(bounds_124623, bounds_124622);
            bool empty_slice_124625 = dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624 == (int64_t) 0;
            int64_t m_124626 = sub64(dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, (int64_t) 1);
            int64_t i_p_m_t_s_124627 = add64(bounds_124622, m_124626);
            bool zzero_leq_i_p_m_t_s_124628 = sle64((int64_t) 0, i_p_m_t_s_124627);
            bool i_p_m_t_s_leq_w_124629 = slt64(i_p_m_t_s_124627, n_115782);
            bool zzero_lte_i_124630 = sle64((int64_t) 0, bounds_124622);
            bool i_lte_j_124631 = sle64(bounds_124622, bounds_124623);
            bool y_124632 = i_p_m_t_s_leq_w_124629 && zzero_lte_i_124630;
            bool y_124633 = zzero_leq_i_p_m_t_s_124628 && y_124632;
            bool forwards_ok_124634 = i_lte_j_124631 && y_124633;
            bool ok_or_empty_124635 = empty_slice_124625 || forwards_ok_124634;
            bool index_certs_124636;
            
            if (!ok_or_empty_124635) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bounds_124622, ":", (long long) bounds_124623, "] out of bounds for array of shape [", (long long) n_115782, "].", "-> #0  ftHashJoin.fut:285:21-47\n   #1  ftRelational.fut:229:5-88\n   #2  ftRelational.fut:218:1-230:31\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139612 = (int64_t) 8 * dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624;
            
            if (memblock_alloc(ctx, &mem_139613, bytes_139612, "mem_139613")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t nest_i_140346 = 0; nest_i_140346 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624; nest_i_140346++) {
                ((int64_t *) mem_139613.mem)[nest_i_140346] = (int64_t) 0;
            }
            
            int64_t zm_lhs_124665 = add64(gather_psizze_115785, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624);
            int64_t zs_lhs_124666 = sub64(zm_lhs_124665, (int64_t) 1);
            int64_t m_124672 = sdiv_safe64(zs_lhs_124666, gather_psizze_115785);
            bool loop_cond_124673 = slt64((int64_t) 0, m_124672);
            int64_t binop_y_139621 = b_115783 * bounds_124622;
            int64_t bytes_139646 = b_115783 * dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624;
            
            if (mem_139625_cached_sizze_140874 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624) {
                err = lexical_realloc(ctx, &mem_139625, &mem_139625_cached_sizze_140874, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t ext_139687;
            int64_t ext_139684;
            int64_t ctx_param_ext_139614;
            int64_t ctx_param_ext_139618;
            
            if (memblock_set(ctx, &mem_param_139617, &mem_param_139611, "mem_param_139611") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139620, &mem_param_139607, "mem_param_139607") != 0)
                return 1;
            ctx_param_ext_139614 = binop_y_139621;
            ctx_param_ext_139618 = bounds_124622;
            for (int64_t i_124676 = 0; i_124676 < num_elems_124662; i_124676++) {
                int32_t binop_x_124679 = sext_i64_i32(i_124676);
                int32_t binop_x_124680 = mul32(2, binop_x_124679);
                int32_t index_primexp_124681 = add32(new_i_124643, binop_x_124680);
                int32_t zm_lhs_124682 = add32(2, index_primexp_124681);
                int32_t min_arg1_124683 = sub32(zm_lhs_124682, 1);
                int32_t min_res_124684 = smin32(min_res_124649, min_arg1_124683);
                int32_t zp_lhs_124685 = sub32(min_res_124684, index_primexp_124681);
                int32_t ij_bits_124686 = add32(1, zp_lhs_124685);
                int32_t up_to_124687 = shl32(1, ij_bits_124686);
                int64_t tmp_124688 = sext_i32_i64(zp_lhs_124685);
                bool bounds_invalid_upwards_124689 = slt32(zp_lhs_124685, 0);
                bool valid_124691 = !bounds_invalid_upwards_124689;
                bool range_valid_c_124692;
                
                if (!valid_124691) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124688, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:194:87-90\n   #3  ftHashJoin.fut:208:6-71\n   #4  ftHashJoin.fut:252:20-258:6\n   #5  ftRelational.fut:229:5-88\n   #6  ftRelational.fut:218:1-230:31\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t up_to_124702 = sext_i32_i64(up_to_124687);
                bool bounds_invalid_upwards_124703 = slt32(up_to_124687, 0);
                bool valid_124704 = !bounds_invalid_upwards_124703;
                bool range_valid_c_124705;
                
                if (!valid_124704) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124702, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftHashJoin.fut:194:87-90\n   #2  ftHashJoin.fut:208:6-71\n   #3  ftHashJoin.fut:252:20-258:6\n   #4  ftRelational.fut:229:5-88\n   #5  ftRelational.fut:218:1-230:31\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t distance_124690 = add64((int64_t) 1, tmp_124688);
                
                for (int64_t i_139365 = 0; i_139365 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624; i_139365++) {
                    int8_t defunc_0_f_res_124695;
                    int8_t y_124697 = (int8_t) 0;
                    
                    for (int64_t i_124696 = 0; i_124696 < distance_124690; i_124696++) {
                        int32_t binop_x_124698 = sext_i64_i32(i_124696);
                        int32_t get_bit_arg0_124699 = add32(index_primexp_124681, binop_x_124698);
                        int32_t zm_rhs_131285 = sdiv32(get_bit_arg0_124699, 8);
                        int32_t zm_lhs_131286 = sub32(i64_res_124646, zm_rhs_131285);
                        int32_t whichByte_131287 = sub32(zm_lhs_131286, 1);
                        int64_t whichByte_131289 = sext_i32_i64(whichByte_131287);
                        bool x_131290 = sle64((int64_t) 0, whichByte_131289);
                        bool y_131291 = slt64(whichByte_131289, b_115783);
                        bool bounds_check_131292 = x_131290 && y_131291;
                        bool index_certs_131293;
                        
                        if (!bounds_check_131292) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) whichByte_131289, "] out of bounds for array of shape [", (long long) b_115783, "].", "-> #0  ftHashJoin.fut:17:6-18\n   #1  ftRelational.fut:229:5-88\n   #2  ftRelational.fut:218:1-230:31\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t whichBit_131288 = smod32(get_bit_arg0_124699, 8);
                        int8_t zbzg_lhs_131294 = ((int8_t *) mem_param_139617.mem)[ctx_param_ext_139614 + (i_139365 * b_115783 + whichByte_131289)];
                        int8_t unsign_arg0_131295 = zext_i32_i8(whichBit_131288);
                        int8_t unsign_arg0_131296 = ashr8(zbzg_lhs_131294, unsign_arg0_131295);
                        int8_t unsign_arg0_131297 = (int8_t) 1 & unsign_arg0_131296;
                        int32_t to_i32_res_131298 = zext_i8_i32(unsign_arg0_131297);
                        int8_t loopres_124701;
                        
                        if (futrts_set_bit_2464(ctx, &loopres_124701, binop_x_124698, y_124697, to_i32_res_131298) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int8_t y_tmp_140354 = loopres_124701;
                        
                        y_124697 = y_tmp_140354;
                    }
                    defunc_0_f_res_124695 = y_124697;
                    ((int8_t *) mem_139625)[i_139365] = defunc_0_f_res_124695;
                }
                
                int64_t defunc_0_radix_sort_multistep_res_124706;
                int64_t offs_124709;
                
                if (memblock_set(ctx, &mem_param_139634, &mem_139613, "mem_139613") != 0)
                    return 1;
                offs_124709 = (int64_t) 0;
                for (int64_t i_124708 = 0; i_124708 < up_to_124702; i_124708++) {
                    int32_t binop_x_124711 = sext_i64_i32(i_124708);
                    int8_t index_primexp_124712 = zext_i32_i8(binop_x_124711);
                    
                    if (memblock_alloc(ctx, &mem_139636, bytes_139612, "mem_139636")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t inpacc_132072;
                    int64_t defunc_0_reduce_res_132073;
                    int64_t inpacc_131893;
                    int64_t inpacc_131894;
                    
                    inpacc_131893 = (int64_t) 0;
                    inpacc_131894 = (int64_t) 0;
                    for (int64_t i_139383 = 0; i_139383 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624; i_139383++) {
                        int8_t eta_p_139553 = ((int8_t *) mem_139625)[i_139383];
                        bool lifted_lambda_res_139554 = eta_p_139553 == index_primexp_124712;
                        int64_t bool_res_139555 = btoi_bool_i64(lifted_lambda_res_139554);
                        int64_t eta_p_139568 = ((int64_t *) mem_param_139634.mem)[i_139383];
                        int64_t defunc_0_op_res_139569 = add64(inpacc_131893, bool_res_139555);
                        int64_t zm_lhs_139570 = add64(offs_124709, defunc_0_op_res_139569);
                        int64_t lifted_lambda_res_139571 = sub64(zm_lhs_139570, (int64_t) 1);
                        int64_t defunc_0_f_res_139572 = mul64(bool_res_139555, lifted_lambda_res_139571);
                        int64_t defunc_0_f_res_139573 = add64(eta_p_139568, defunc_0_f_res_139572);
                        int64_t defunc_0_op_res_131942 = add64(inpacc_131894, bool_res_139555);
                        
                        ((int64_t *) mem_139636.mem)[i_139383] = defunc_0_f_res_139573;
                        
                        int64_t inpacc_tmp_140358 = defunc_0_op_res_139569;
                        int64_t inpacc_tmp_140359 = defunc_0_op_res_131942;
                        
                        inpacc_131893 = inpacc_tmp_140358;
                        inpacc_131894 = inpacc_tmp_140359;
                    }
                    inpacc_132072 = inpacc_131893;
                    defunc_0_reduce_res_132073 = inpacc_131894;
                    
                    int64_t tmp_124737 = add64(offs_124709, defunc_0_reduce_res_132073);
                    
                    if (memblock_set(ctx, &mem_param_tmp_140355, &mem_139636, "mem_139636") != 0)
                        return 1;
                    
                    int64_t offs_tmp_140356 = tmp_124737;
                    
                    if (memblock_set(ctx, &mem_param_139634, &mem_param_tmp_140355, "mem_param_tmp_140355") != 0)
                        return 1;
                    offs_124709 = offs_tmp_140356;
                }
                if (memblock_set(ctx, &ext_mem_139645, &mem_param_139634, "mem_param_139634") != 0)
                    return 1;
                defunc_0_radix_sort_multistep_res_124706 = offs_124709;
                if (memblock_alloc(ctx, &mem_139647, bytes_139646, "mem_139647")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_1b(ctx, 2, (uint8_t *) mem_139647.mem, (int64_t) 0, (int64_t []) {b_115783, (int64_t) 1}, (uint8_t *) mem_param_139617.mem, ctx_param_ext_139614, (int64_t []) {b_115783, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, b_115783});
                if (memblock_alloc(ctx, &mem_139649, bytes_139612, "mem_139649")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139649.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139620.mem, ctx_param_ext_139618, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624});
                
                bool partitioned_scatter_res_124744;
                int64_t partitioned_scatter_res_124747;
                bool loop_while_124748;
                int64_t p_124751;
                
                loop_while_124748 = loop_cond_124673;
                p_124751 = (int64_t) 0;
                while (loop_while_124748) {
                    int64_t lower_bound_124752 = mul64(gather_psizze_115785, p_124751);
                    int64_t min_arg1_124753 = add64(gather_psizze_115785, lower_bound_124752);
                    int64_t min_res_124754 = smin64(dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, min_arg1_124753);
                    int64_t j_m_i_124755 = sub64(min_res_124754, lower_bound_124752);
                    bool empty_slice_124756 = j_m_i_124755 == (int64_t) 0;
                    int64_t m_124757 = sub64(j_m_i_124755, (int64_t) 1);
                    int64_t i_p_m_t_s_124758 = add64(lower_bound_124752, m_124757);
                    bool zzero_leq_i_p_m_t_s_124759 = sle64((int64_t) 0, i_p_m_t_s_124758);
                    bool i_p_m_t_s_leq_w_124760 = slt64(i_p_m_t_s_124758, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624);
                    bool zzero_lte_i_124761 = sle64((int64_t) 0, lower_bound_124752);
                    bool i_lte_j_124762 = sle64(lower_bound_124752, min_res_124754);
                    bool y_124763 = i_p_m_t_s_leq_w_124760 && zzero_lte_i_124761;
                    bool y_124764 = zzero_leq_i_p_m_t_s_124759 && y_124763;
                    bool forwards_ok_124765 = i_lte_j_124762 && y_124764;
                    bool ok_or_empty_124766 = empty_slice_124756 || forwards_ok_124765;
                    bool index_certs_124767;
                    
                    if (!ok_or_empty_124766) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124752, ":", (long long) min_res_124754, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftHashJoin.fut:194:87-90\n   #2  ftHashJoin.fut:208:6-71\n   #3  ftHashJoin.fut:252:20-258:6\n   #4  ftRelational.fut:229:5-88\n   #5  ftRelational.fut:218:1-230:31\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t bytes_139657 = b_115783 * j_m_i_124755;
                    int64_t bytes_139659 = (int64_t) 8 * j_m_i_124755;
                    
                    if (mem_139658_cached_sizze_140875 < bytes_139657) {
                        err = lexical_realloc(ctx, &mem_139658, &mem_139658_cached_sizze_140875, bytes_139657);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139658, (int64_t) 0, (int64_t []) {b_115783, (int64_t) 1}, (uint8_t *) mem_139647.mem, (int64_t) 0 + b_115783 * lower_bound_124752, (int64_t []) {b_115783, (int64_t) 1}, (int64_t []) {j_m_i_124755, b_115783});
                    if (mem_139660_cached_sizze_140876 < bytes_139659) {
                        err = lexical_realloc(ctx, &mem_139660, &mem_139660_cached_sizze_140876, bytes_139659);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139660, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139649.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124752, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124755});
                    for (int64_t write_iter_139385 = 0; write_iter_139385 < dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624; write_iter_139385++) {
                        int64_t write_iv_139388 = ((int64_t *) ext_mem_139645.mem)[write_iter_139385];
                        int64_t write_iv_139390 = ((int64_t *) mem_param_139620.mem)[ctx_param_ext_139618 + write_iter_139385];
                        
                        lmad_copy_1b(ctx, 1, (uint8_t *) mem_139668, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139617.mem, ctx_param_ext_139614 + write_iter_139385 * b_115783, (int64_t []) {(int64_t) 1}, (int64_t []) {b_115783});
                        
                        bool cond_131985 = sle64(lower_bound_124752, write_iv_139388);
                        bool cond_t_res_131986 = slt64(write_iv_139388, min_res_124754);
                        bool x_131987 = cond_131985 && cond_t_res_131986;
                        int64_t lifted_lambda_res_131988;
                        
                        if (x_131987) {
                            int64_t lifted_lambda_res_t_res_132075 = sub64(write_iv_139388, lower_bound_124752);
                            
                            lifted_lambda_res_131988 = lifted_lambda_res_t_res_132075;
                        } else {
                            lifted_lambda_res_131988 = (int64_t) -1;
                        }
                        if ((sle64((int64_t) 0, lifted_lambda_res_131988) && slt64(lifted_lambda_res_131988, j_m_i_124755)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_115783 - (int64_t) 1, b_115783))) {
                            lmad_copy_1b(ctx, 1, (uint8_t *) mem_139658, lifted_lambda_res_131988 * b_115783, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139668, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_115783});
                        }
                        if (sle64((int64_t) 0, lifted_lambda_res_131988) && slt64(lifted_lambda_res_131988, j_m_i_124755)) {
                            ((int64_t *) mem_139660)[lifted_lambda_res_131988] = write_iv_139390;
                        }
                    }
                    
                    int64_t tmp_124779 = add64((int64_t) 1, p_124751);
                    
                    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139647.mem, b_115783 * lower_bound_124752, (int64_t []) {b_115783, (int64_t) 1}, (uint8_t *) mem_139658, (int64_t) 0, (int64_t []) {b_115783, (int64_t) 1}, (int64_t []) {j_m_i_124755, b_115783});
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139649.mem, lower_bound_124752, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139660, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124755});
                    
                    bool loop_cond_124787 = slt64(tmp_124779, m_124672);
                    bool loop_while_tmp_140361 = loop_cond_124787;
                    int64_t p_tmp_140364 = tmp_124779;
                    
                    loop_while_124748 = loop_while_tmp_140361;
                    p_124751 = p_tmp_140364;
                }
                partitioned_scatter_res_124744 = loop_while_124748;
                partitioned_scatter_res_124747 = p_124751;
                if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_tmp_140347, &mem_139647, "mem_139647") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_tmp_140348, &mem_139649, "mem_139649") != 0)
                    return 1;
                
                int64_t ctx_param_ext_tmp_140349 = (int64_t) 0;
                int64_t ctx_param_ext_tmp_140350 = (int64_t) 0;
                
                if (memblock_set(ctx, &mem_param_139617, &mem_param_tmp_140347, "mem_param_tmp_140347") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_139620, &mem_param_tmp_140348, "mem_param_tmp_140348") != 0)
                    return 1;
                ctx_param_ext_139614 = ctx_param_ext_tmp_140349;
                ctx_param_ext_139618 = ctx_param_ext_tmp_140350;
            }
            if (memblock_set(ctx, &ext_mem_139689, &mem_param_139617, "mem_param_139617") != 0)
                return 1;
            if (memblock_set(ctx, &ext_mem_139688, &mem_param_139620, "mem_param_139620") != 0)
                return 1;
            ext_139687 = ctx_param_ext_139614;
            ext_139684 = ctx_param_ext_139618;
            if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_139691, bytes_139646, "mem_139691")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139691.mem, (int64_t) 0, (int64_t []) {b_115783, (int64_t) 1}, (uint8_t *) ext_mem_139689.mem, ext_139687, (int64_t []) {b_115783, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, b_115783});
            
            int64_t deepen_step_res_124788;
            int64_t deepen_step_res_124789;
            int32_t deepen_step_res_124792;
            
            if (futrts_getPartitionBounds_11848(ctx, &ext_mem_139694, &ext_mem_139693, &deepen_step_res_124788, &deepen_step_res_124789, &deepen_step_res_124792, mem_139691, dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, b_115783, newDepth_124642, new_i_124643, new_j_124645) != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &mem_139691, "mem_139691") != 0)
                return 1;
            
            int64_t zl_rhs_130110 = sub64(deepen_step_res_124788, (int64_t) 1);
            int64_t bytes_139695 = (int64_t) 8 * deepen_step_res_124788;
            
            if (mem_139696_cached_sizze_140878 < bytes_139695) {
                err = lexical_realloc(ctx, &mem_139696, &mem_139696_cached_sizze_140878, bytes_139695);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139698_cached_sizze_140879 < bytes_139695) {
                err = lexical_realloc(ctx, &mem_139698, &mem_139698_cached_sizze_140879, bytes_139695);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139700_cached_sizze_140880 < bytes_139695) {
                err = lexical_realloc(ctx, &mem_139700, &mem_139700_cached_sizze_140880, bytes_139695);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_139702_cached_sizze_140881 < bytes_139695) {
                err = lexical_realloc(ctx, &mem_139702, &mem_139702_cached_sizze_140881, bytes_139695);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t discard_139407;
            int64_t scanacc_139397 = (int64_t) 0;
            
            for (int64_t i_139402 = 0; i_139402 < deepen_step_res_124788; i_139402++) {
                int64_t tmp_131682 = ((int64_t *) ext_mem_139694.mem)[i_139402];
                bool cond_131683 = slt64(i_139402, zl_rhs_130110);
                int64_t tmp_131684;
                
                if (cond_131683) {
                    int64_t tmp_132079 = add64((int64_t) 1, i_139402);
                    bool x_132080 = sle64((int64_t) 0, tmp_132079);
                    bool y_132081 = slt64(tmp_132079, deepen_step_res_124788);
                    bool bounds_check_132082 = x_132080 && y_132081;
                    bool index_certs_132083;
                    
                    if (!bounds_check_132082) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132079, "] out of bounds for array of shape [", (long long) deepen_step_res_124788, "].", "-> #0  ftHashJoin.fut:262:67-81\n   #1  ftRelational.fut:229:5-88\n   #2  ftRelational.fut:218:1-230:31\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t tmp_t_res_132084 = ((int64_t *) ext_mem_139694.mem)[tmp_132079];
                    
                    tmp_131684 = tmp_t_res_132084;
                } else {
                    tmp_131684 = dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624;
                }
                
                int64_t zg_lhs_131693 = sub64(tmp_131684, tmp_131682);
                bool lifted_lambda_res_131694 = slt64(sizze_thresh_115789, zg_lhs_131693);
                int64_t defunc_0_f_res_131695 = btoi_bool_i64(lifted_lambda_res_131694);
                int64_t defunc_0_op_res_124809 = add64(defunc_0_f_res_131695, scanacc_139397);
                
                ((int64_t *) mem_139696)[i_139402] = defunc_0_op_res_124809;
                ((int64_t *) mem_139698)[i_139402] = defunc_0_f_res_131695;
                ((int64_t *) mem_139700)[i_139402] = tmp_131682;
                ((int64_t *) mem_139702)[i_139402] = tmp_131684;
                
                int64_t scanacc_tmp_140367 = defunc_0_op_res_124809;
                
                scanacc_139397 = scanacc_tmp_140367;
            }
            discard_139407 = scanacc_139397;
            if (memblock_unref(ctx, &ext_mem_139694, "ext_mem_139694") != 0)
                return 1;
            
            bool cond_124810 = deepen_step_res_124788 == (int64_t) 0;
            bool x_124811 = !cond_124810;
            bool x_124813 = sle64((int64_t) 0, zl_rhs_130110);
            bool y_124814 = slt64(zl_rhs_130110, deepen_step_res_124788);
            bool bounds_check_124815 = x_124813 && y_124814;
            bool protect_assert_disj_124816 = cond_124810 || bounds_check_124815;
            bool index_certs_124817;
            
            if (!protect_assert_disj_124816) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_rhs_130110, "] out of bounds for array of shape [", (long long) deepen_step_res_124788, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:263:8-49\n   #3  ftRelational.fut:229:5-88\n   #4  ftRelational.fut:218:1-230:31\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_f_res_124818;
            
            if (x_124811) {
                int64_t x_132085 = ((int64_t *) mem_139696)[zl_rhs_130110];
                
                m_f_res_124818 = x_132085;
            } else {
                m_f_res_124818 = (int64_t) 0;
            }
            
            int64_t m_124820;
            
            if (cond_124810) {
                m_124820 = (int64_t) 0;
            } else {
                m_124820 = m_f_res_124818;
            }
            
            int64_t m_124830 = sub64(m_124820, (int64_t) 1);
            bool i_p_m_t_s_leq_w_124832 = slt64(m_124830, deepen_step_res_124788);
            bool zzero_leq_i_p_m_t_s_124831 = sle64((int64_t) 0, m_124830);
            bool y_124834 = zzero_leq_i_p_m_t_s_124831 && i_p_m_t_s_leq_w_124832;
            bool i_lte_j_124833 = sle64((int64_t) 0, m_124820);
            bool forwards_ok_124835 = i_lte_j_124833 && y_124834;
            bool eq_x_zz_124827 = (int64_t) 0 == m_f_res_124818;
            bool p_and_eq_x_y_124828 = x_124811 && eq_x_zz_124827;
            bool empty_slice_124829 = cond_124810 || p_and_eq_x_y_124828;
            bool ok_or_empty_124836 = empty_slice_124829 || forwards_ok_124835;
            bool index_certs_124837;
            
            if (!ok_or_empty_124836) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_124820, "] out of bounds for array of shape [", (long long) deepen_step_res_124788, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:263:8-49\n   #3  ftRelational.fut:229:5-88\n   #4  ftRelational.fut:218:1-230:31\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139727 = (int64_t) 8 * m_124820;
            int64_t conc_tmp_124859 = loop_dz2081Uz2089U_124617 + m_124820;
            int64_t bytes_139763 = (int64_t) 8 * conc_tmp_124859;
            
            if (mem_139728_cached_sizze_140882 < bytes_139727) {
                err = lexical_realloc(ctx, &mem_139728, &mem_139728_cached_sizze_140882, bytes_139727);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139728, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139702, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124820});
            if (mem_139730_cached_sizze_140883 < bytes_139727) {
                err = lexical_realloc(ctx, &mem_139730, &mem_139730_cached_sizze_140883, bytes_139727);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139730, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139700, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124820});
            for (int64_t write_iter_139408 = 0; write_iter_139408 < deepen_step_res_124788; write_iter_139408++) {
                int64_t write_iv_139411 = ((int64_t *) mem_139698)[write_iter_139408];
                int64_t write_iv_139412 = ((int64_t *) mem_139696)[write_iter_139408];
                int64_t write_iv_139413 = ((int64_t *) mem_139700)[write_iter_139408];
                int64_t write_iv_139414 = ((int64_t *) mem_139702)[write_iter_139408];
                bool cond_131664 = write_iv_139411 == (int64_t) 1;
                int64_t lifted_lambda_res_131665;
                
                if (cond_131664) {
                    int64_t lifted_lambda_res_t_res_132086 = sub64(write_iv_139412, (int64_t) 1);
                    
                    lifted_lambda_res_131665 = lifted_lambda_res_t_res_132086;
                } else {
                    lifted_lambda_res_131665 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124820)) {
                    ((int64_t *) mem_139730)[lifted_lambda_res_131665] = write_iv_139413;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, m_124820)) {
                    ((int64_t *) mem_139728)[lifted_lambda_res_131665] = write_iv_139414;
                }
            }
            if (memblock_alloc(ctx, &mem_139744, bytes_139743, "mem_139744")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139744.mem, (int64_t) 0, (int64_t []) {b_115783, (int64_t) 1}, (uint8_t *) mem_param_139611.mem, (int64_t) 0, (int64_t []) {b_115783, (int64_t) 1}, (int64_t []) {n_115782, b_115783});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139744.mem, b_115783 * bounds_124622, (int64_t []) {b_115783, (int64_t) 1}, (uint8_t *) ext_mem_139689.mem, ext_139687, (int64_t []) {b_115783, (int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624, b_115783});
            if (memblock_unref(ctx, &ext_mem_139689, "ext_mem_139689") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_139746, bytes_139581, "mem_139746")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139746.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139607.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_115782});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139746.mem, bounds_124622, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139688.mem, ext_139684, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzmZRz20Uboundszi1z20Uboundszi0z7dUzg_124624});
            if (memblock_unref(ctx, &ext_mem_139688, "ext_mem_139688") != 0)
                return 1;
            if (memblock_alloc(ctx, &mem_139764, bytes_139763, "mem_139764")) {
                err = 1;
                goto cleanup;
            }
            if (memblock_alloc(ctx, &mem_139766, bytes_139763, "mem_139766")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139421 = 0; i_139421 < m_124820; i_139421++) {
                int64_t eta_p_124855 = ((int64_t *) mem_139730)[i_139421];
                int64_t eta_p_124856 = ((int64_t *) mem_139728)[i_139421];
                int64_t tmp_124857 = add64(bounds_124622, eta_p_124855);
                int64_t tmp_124858 = add64(bounds_124622, eta_p_124856);
                
                ((int64_t *) mem_139764.mem)[loop_dz2081Uz2089U_124617 + i_139421] = tmp_124857;
                ((int64_t *) mem_139766.mem)[loop_dz2081Uz2089U_124617 + i_139421] = tmp_124858;
            }
            
            int64_t tmp_offs_140376 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139764.mem, tmp_offs_140376, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139601.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2089U_124617});
            tmp_offs_140376 += loop_dz2081Uz2089U_124617;
            if (!(tmp_offs_140376 == loop_dz2081Uz2089U_124617)) {
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139764.mem, tmp_offs_140376, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139764.mem, loop_dz2081Uz2089U_124617, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124820});
            }
            tmp_offs_140376 += m_124820;
            
            int64_t tmp_offs_140377 = (int64_t) 0;
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139766.mem, tmp_offs_140377, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139604.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {loop_dz2081Uz2089U_124617});
            tmp_offs_140377 += loop_dz2081Uz2089U_124617;
            if (!(tmp_offs_140377 == loop_dz2081Uz2089U_124617)) {
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_139766.mem, tmp_offs_140377, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139766.mem, loop_dz2081Uz2089U_124617, (int64_t []) {(int64_t) 1}, (int64_t []) {m_124820});
            }
            tmp_offs_140377 += m_124820;
            if (memblock_set(ctx, &mem_param_tmp_140337, &mem_139764, "mem_139764") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140338, &mem_139766, "mem_139766") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140339, &mem_139746, "mem_139746") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_140340, &mem_139744, "mem_139744") != 0)
                return 1;
            
            int64_t loop_dz2081Uz2089U_tmp_140341 = conc_tmp_124859;
            
            if (memblock_set(ctx, &mem_param_139601, &mem_param_tmp_140337, "mem_param_tmp_140337") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139604, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139607, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_139611, &mem_param_tmp_140340, "mem_param_tmp_140340") != 0)
                return 1;
            loop_dz2081Uz2089U_124617 = loop_dz2081Uz2089U_tmp_140341;
        }
        if (memblock_set(ctx, &ext_mem_139779, &mem_param_139601, "mem_param_139601") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139778, &mem_param_139604, "mem_param_139604") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139777, &mem_param_139607, "mem_param_139607") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_139776, &mem_param_139611, "mem_param_139611") != 0)
            return 1;
        loopres_124611 = loop_dz2081Uz2089U_124617;
        
        bool cond_124863 = slt64((int64_t) 0, loopres_124611);
        bool loop_cond_t_res_124864 = slt32(newDepth_124642, max_depth_115790);
        bool x_124865 = cond_124863 && loop_cond_t_res_124864;
        
        if (memblock_set(ctx, &mem_param_tmp_140326, &ext_mem_139777, "ext_mem_139777") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140327, &ext_mem_139776, "ext_mem_139776") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140328, &ext_mem_139779, "ext_mem_139779") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140329, &ext_mem_139778, "ext_mem_139778") != 0)
            return 1;
        
        int64_t loop_dz2087U_tmp_140330 = loopres_124611;
        bool loop_while_tmp_140331 = x_124865;
        int32_t p_tmp_140332 = newDepth_124642;
        
        if (memblock_set(ctx, &mem_param_139588, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139592, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139595, &mem_param_tmp_140328, "mem_param_tmp_140328") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139598, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        loop_dz2087U_124604 = loop_dz2087U_tmp_140330;
        loop_while_124605 = loop_while_tmp_140331;
        p_124606 = p_tmp_140332;
    }
    if (memblock_set(ctx, &ext_mem_139792, &mem_param_139588, "mem_param_139588") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139791, &mem_param_139592, "mem_param_139592") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139790, &mem_param_139595, "mem_param_139595") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139789, &mem_param_139598, "mem_param_139598") != 0)
        return 1;
    partition_and_deepen_res_124597 = loop_dz2087U_124604;
    partition_and_deepen_res_124598 = loop_while_124605;
    partition_and_deepen_res_124599 = p_124606;
    if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139585, "mem_139585") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &ext_mem_139792, "ext_mem_139792") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &ext_mem_139791, "ext_mem_139791") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140872, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140873, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139625);
        free(mem_139658);
        free(mem_139660);
        free(mem_139668);
        free(mem_139696);
        free(mem_139698);
        free(mem_139700);
        free(mem_139702);
        free(mem_139728);
        free(mem_139730);
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140328, "mem_param_tmp_140328") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140327, "mem_param_tmp_140327") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140326, "mem_param_tmp_140326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140340, "mem_param_tmp_140340") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140339, "mem_param_tmp_140339") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140338, "mem_param_tmp_140338") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140337, "mem_param_tmp_140337") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139766, "mem_139766") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139764, "mem_139764") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139746, "mem_139746") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139744, "mem_139744") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139693, "ext_mem_139693") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139694, "ext_mem_139694") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139691, "mem_139691") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140348, "mem_param_tmp_140348") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140347, "mem_param_tmp_140347") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139649, "mem_139649") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139647, "mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140355, "mem_param_tmp_140355") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139636, "mem_139636") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139634, "mem_param_139634") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139645, "ext_mem_139645") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139620, "mem_param_139620") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139617, "mem_param_139617") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139688, "ext_mem_139688") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139689, "ext_mem_139689") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139611, "mem_param_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139607, "mem_param_139607") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139604, "mem_param_139604") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139601, "mem_param_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139776, "ext_mem_139776") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139777, "ext_mem_139777") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139778, "ext_mem_139778") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139779, "ext_mem_139779") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139598, "mem_param_139598") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139595, "mem_param_139595") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139592, "mem_param_139592") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139588, "mem_param_139588") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139789, "ext_mem_139789") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139790, "ext_mem_139790") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139791, "ext_mem_139791") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139792, "ext_mem_139792") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139585, "mem_139585") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139584, "mem_139584") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_140884, struct memblock *mem_out_p_140885, struct memblock xs_mem_139580, int64_t n_88727, int64_t incr_88728, int16_t block_sizze_88729)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139590_cached_sizze_140886 = 0;
    unsigned char *mem_139590 = NULL;
    int64_t mem_139622_cached_sizze_140887 = 0;
    unsigned char *mem_139622 = NULL;
    int64_t mem_139624_cached_sizze_140888 = 0;
    unsigned char *mem_139624 = NULL;
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock mem_139650;
    
    mem_139650.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_139612;
    
    mem_139612.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139610;
    
    ext_mem_139610.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139647;
    
    ext_mem_139647.references = NULL;
    
    struct memblock ext_mem_139648;
    
    ext_mem_139648.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_126924 = sext_i16_i64(block_sizze_88729);
    int64_t bytes_139582 = (int64_t) 8 * n_88727;
    bool zzero_126944 = i16_res_126924 == (int64_t) 0;
    bool nonzzero_126945 = !zzero_126944;
    bool nonzzero_cert_126948;
    
    if (!nonzzero_126945) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:143:98-101\n   #4  ftRelational.fut:132:75-86\n   #5  ftRelational.fut:131:9-132:87\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (futrts_indicesWithIncrement_11449(ctx, &ext_mem_139581, xs_mem_139580, n_88727, incr_88728) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_88727; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_126942 = add64(n_88727, i16_res_126924);
    int64_t zs_lhs_126943 = sub64(zm_lhs_126942, (int64_t) 1);
    int64_t m_126949 = sdiv_safe64(zs_lhs_126943, i16_res_126924);
    bool loop_cond_126950 = slt64((int64_t) 0, m_126949);
    
    if (mem_139590_cached_sizze_140886 < n_88727) {
        err = lexical_realloc(ctx, &mem_139590, &mem_139590_cached_sizze_140886, n_88727);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139589, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    for (int64_t i_126953 = 0; i_126953 < (int64_t) 32; i_126953++) {
        int32_t binop_x_126956 = sext_i64_i32(i_126953);
        int32_t binop_x_126957 = mul32(2, binop_x_126956);
        int32_t zm_lhs_126958 = add32(2, binop_x_126957);
        int32_t min_arg1_126959 = sub32(zm_lhs_126958, 1);
        int32_t min_res_126960 = smin32(64, min_arg1_126959);
        int32_t zp_lhs_126961 = sub32(min_res_126960, binop_x_126957);
        int32_t ij_bits_126962 = add32(1, zp_lhs_126961);
        int32_t up_to_126963 = shl32(1, ij_bits_126962);
        int64_t tmp_126964 = sext_i32_i64(zp_lhs_126961);
        bool bounds_invalid_upwards_126965 = slt32(zp_lhs_126961, 0);
        bool valid_126967 = !bounds_invalid_upwards_126965;
        bool range_valid_c_126968;
        
        if (!valid_126967) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_126964, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:53:58-60\n   #4  ftSMJ.fut:143:98-101\n   #5  ftRelational.fut:132:75-86\n   #6  ftRelational.fut:131:9-132:87\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_126992 = sext_i32_i64(up_to_126963);
        bool bounds_invalid_upwards_126993 = slt32(up_to_126963, 0);
        bool valid_126994 = !bounds_invalid_upwards_126993;
        bool range_valid_c_126995;
        
        if (!valid_126994) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_126992, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:143:98-101\n   #4  ftRelational.fut:132:75-86\n   #5  ftRelational.fut:131:9-132:87\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_126966 = add64((int64_t) 1, tmp_126964);
        
        for (int64_t i_139365 = 0; i_139365 < n_88727; i_139365++) {
            double eta_p_126970 = ((double *) mem_param_139589.mem)[i_139365];
            int64_t i64_arg0_126971 = futrts_to_bits64(eta_p_126970);
            int64_t unsign_arg0_126972 = ashr64(i64_arg0_126971, (int64_t) 63);
            int64_t unsign_arg0_126973 = (int64_t) 1 & unsign_arg0_126972;
            int32_t to_i32_res_126974 = zext_i64_i32(unsign_arg0_126973);
            bool cond_126975 = to_i32_res_126974 == 1;
            bool x_126976 = !cond_126975;
            int8_t defunc_0_f_res_126977;
            int8_t y_126979 = (int8_t) 0;
            
            for (int64_t i_126978 = 0; i_126978 < distance_126966; i_126978++) {
                int32_t binop_x_126980 = sext_i64_i32(i_126978);
                int32_t get_bit_arg0_126981 = add32(binop_x_126957, binop_x_126980);
                int64_t unsign_arg0_126982 = zext_i32_i64(get_bit_arg0_126981);
                int64_t unsign_arg0_126983 = ashr64(i64_arg0_126971, unsign_arg0_126982);
                int64_t unsign_arg0_126984 = (int64_t) 1 & unsign_arg0_126983;
                int32_t to_i32_res_126985 = zext_i64_i32(unsign_arg0_126984);
                bool cond_f_res_126986 = get_bit_arg0_126981 == 63;
                bool y_126987 = x_126976 && cond_f_res_126986;
                bool cond_126988 = cond_126975 || y_126987;
                int32_t defunc_0_get_bit_res_126989;
                
                if (cond_126988) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ to_i32_res_126985;
                    
                    defunc_0_get_bit_res_126989 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_126989 = to_i32_res_126985;
                }
                
                int8_t loopres_126991;
                
                if (futrts_set_bit_2464(ctx, &loopres_126991, binop_x_126980, y_126979, defunc_0_get_bit_res_126989) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_126991;
                
                y_126979 = y_tmp_140328;
            }
            defunc_0_f_res_126977 = y_126979;
            ((int8_t *) mem_139590)[i_139365] = defunc_0_f_res_126977;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_126996;
        int64_t offs_126999;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_126999 = (int64_t) 0;
        for (int64_t i_126998 = 0; i_126998 < up_to_126992; i_126998++) {
            int32_t binop_x_127001 = sext_i64_i32(i_126998);
            int8_t index_primexp_127002 = zext_i32_i8(binop_x_127001);
            
            if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_88727; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139590)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_127002;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139599.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_126999, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139601.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_127027 = add64(offs_126999, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139601, "mem_139601") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_127027;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_126999 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139610, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_126996 = offs_126999;
        if (memblock_alloc(ctx, &mem_139612, bytes_139582, "mem_139612")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_88727});
        if (memblock_alloc(ctx, &mem_139614, bytes_139582, "mem_139614")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_88727});
        
        bool partitioned_scatter_res_127034;
        int64_t partitioned_scatter_res_127037;
        bool loop_while_127038;
        int64_t p_127041;
        
        loop_while_127038 = loop_cond_126950;
        p_127041 = (int64_t) 0;
        while (loop_while_127038) {
            int64_t lower_bound_127042 = mul64(i16_res_126924, p_127041);
            int64_t min_arg1_127043 = add64(i16_res_126924, lower_bound_127042);
            int64_t min_res_127044 = smin64(n_88727, min_arg1_127043);
            int64_t j_m_i_127045 = sub64(min_res_127044, lower_bound_127042);
            bool empty_slice_127046 = j_m_i_127045 == (int64_t) 0;
            int64_t m_127047 = sub64(j_m_i_127045, (int64_t) 1);
            int64_t i_p_m_t_s_127048 = add64(lower_bound_127042, m_127047);
            bool zzero_leq_i_p_m_t_s_127049 = sle64((int64_t) 0, i_p_m_t_s_127048);
            bool i_p_m_t_s_leq_w_127050 = slt64(i_p_m_t_s_127048, n_88727);
            bool zzero_lte_i_127051 = sle64((int64_t) 0, lower_bound_127042);
            bool i_lte_j_127052 = sle64(lower_bound_127042, min_res_127044);
            bool y_127053 = i_p_m_t_s_leq_w_127050 && zzero_lte_i_127051;
            bool y_127054 = zzero_leq_i_p_m_t_s_127049 && y_127053;
            bool forwards_ok_127055 = i_lte_j_127052 && y_127054;
            bool ok_or_empty_127056 = empty_slice_127046 || forwards_ok_127055;
            bool index_certs_127057;
            
            if (!ok_or_empty_127056) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_127042, ":", (long long) min_res_127044, "] out of bounds for array of shape [", (long long) n_88727, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:143:98-101\n   #4  ftRelational.fut:132:75-86\n   #5  ftRelational.fut:131:9-132:87\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139621 = (int64_t) 8 * j_m_i_127045;
            
            if (mem_139622_cached_sizze_140887 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139622, &mem_139622_cached_sizze_140887, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139612.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_127042, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127045});
            if (mem_139624_cached_sizze_140888 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140888, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139614.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_127042, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127045});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_88727; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139610.mem)[write_iter_139385];
                int64_t write_iv_139389 = ((int64_t *) mem_param_139586.mem)[write_iter_139385];
                double write_iv_139390 = ((double *) mem_param_139589.mem)[write_iter_139385];
                bool cond_131948 = sle64(lower_bound_127042, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_127044);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_127042);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127045)) {
                    ((int64_t *) mem_139622)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127045)) {
                    ((double *) mem_139624)[lifted_lambda_res_131951] = write_iv_139390;
                }
            }
            
            int64_t tmp_127069 = add64((int64_t) 1, p_127041);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, lower_bound_127042, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127045});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139614.mem, lower_bound_127042, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127045});
            
            bool loop_cond_127077 = slt64(tmp_127069, m_126949);
            bool loop_while_tmp_140335 = loop_cond_127077;
            int64_t p_tmp_140338 = tmp_127069;
            
            loop_while_127038 = loop_while_tmp_140335;
            p_127041 = p_tmp_140338;
        }
        partitioned_scatter_res_127034 = loop_while_127038;
        partitioned_scatter_res_127037 = p_127041;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139648, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139647, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139650, bytes_139582, "mem_139650")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139650.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_88727});
    if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139652, bytes_139582, "mem_139652")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139652.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139647.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_88727});
    if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139650, "mem_139650") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139652, "mem_139652") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140884, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140885, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139590);
        free(mem_139622);
        free(mem_139624);
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139650, "mem_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_140889, struct memblock *mem_out_p_140890, struct memblock xs_mem_139580, int64_t n_87838, int64_t incr_87839, int16_t block_sizze_87840)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139590_cached_sizze_140891 = 0;
    unsigned char *mem_139590 = NULL;
    int64_t mem_139622_cached_sizze_140892 = 0;
    unsigned char *mem_139622 = NULL;
    int64_t mem_139624_cached_sizze_140893 = 0;
    unsigned char *mem_139624 = NULL;
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock mem_139650;
    
    mem_139650.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_139612;
    
    mem_139612.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139610;
    
    ext_mem_139610.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139647;
    
    ext_mem_139647.references = NULL;
    
    struct memblock ext_mem_139648;
    
    ext_mem_139648.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_126924 = sext_i16_i64(block_sizze_87840);
    int64_t bytes_139582 = (int64_t) 8 * n_87838;
    bool zzero_126943 = i16_res_126924 == (int64_t) 0;
    bool nonzzero_126944 = !zzero_126943;
    bool nonzzero_cert_126947;
    
    if (!nonzzero_126944) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:143:98-101\n   #4  ftRelational.fut:130:75-86\n   #5  ftRelational.fut:129:9-130:87\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139651 = (int64_t) 4 * n_87838;
    
    if (futrts_indicesWithIncrement_11428(ctx, &ext_mem_139581, xs_mem_139580, n_87838, incr_87839) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_87838; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_126941 = add64(n_87838, i16_res_126924);
    int64_t zs_lhs_126942 = sub64(zm_lhs_126941, (int64_t) 1);
    int64_t m_126948 = sdiv_safe64(zs_lhs_126942, i16_res_126924);
    bool loop_cond_126949 = slt64((int64_t) 0, m_126948);
    
    if (mem_139590_cached_sizze_140891 < n_87838) {
        err = lexical_realloc(ctx, &mem_139590, &mem_139590_cached_sizze_140891, n_87838);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139589, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    for (int64_t i_126952 = 0; i_126952 < (int64_t) 16; i_126952++) {
        int32_t binop_x_126955 = sext_i64_i32(i_126952);
        int32_t binop_x_126956 = mul32(2, binop_x_126955);
        int32_t zm_lhs_126957 = add32(2, binop_x_126956);
        int32_t min_arg1_126958 = sub32(zm_lhs_126957, 1);
        int32_t min_res_126959 = smin32(32, min_arg1_126958);
        int32_t zp_lhs_126960 = sub32(min_res_126959, binop_x_126956);
        int32_t ij_bits_126961 = add32(1, zp_lhs_126960);
        int32_t up_to_126962 = shl32(1, ij_bits_126961);
        int64_t tmp_126963 = sext_i32_i64(zp_lhs_126960);
        bool bounds_invalid_upwards_126964 = slt32(zp_lhs_126960, 0);
        bool valid_126966 = !bounds_invalid_upwards_126964;
        bool range_valid_c_126967;
        
        if (!valid_126966) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_126963, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:53:58-60\n   #4  ftSMJ.fut:143:98-101\n   #5  ftRelational.fut:130:75-86\n   #6  ftRelational.fut:129:9-130:87\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_126988 = sext_i32_i64(up_to_126962);
        bool bounds_invalid_upwards_126989 = slt32(up_to_126962, 0);
        bool valid_126990 = !bounds_invalid_upwards_126989;
        bool range_valid_c_126991;
        
        if (!valid_126990) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_126988, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:143:98-101\n   #4  ftRelational.fut:130:75-86\n   #5  ftRelational.fut:129:9-130:87\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_126965 = add64((int64_t) 1, tmp_126963);
        
        for (int64_t i_139365 = 0; i_139365 < n_87838; i_139365++) {
            float eta_p_126969 = ((float *) mem_param_139589.mem)[i_139365];
            int32_t i32_arg0_126970 = futrts_to_bits32(eta_p_126969);
            int32_t unsign_arg0_126971 = ashr32(i32_arg0_126970, 31);
            int32_t unsign_arg0_126972 = 1 & unsign_arg0_126971;
            bool cond_126973 = unsign_arg0_126972 == 1;
            bool x_126974 = !cond_126973;
            int8_t defunc_0_f_res_126975;
            int8_t y_126977 = (int8_t) 0;
            
            for (int64_t i_126976 = 0; i_126976 < distance_126965; i_126976++) {
                int32_t binop_x_126978 = sext_i64_i32(i_126976);
                int32_t get_bit_arg0_126979 = add32(binop_x_126956, binop_x_126978);
                int32_t unsign_arg0_126980 = ashr32(i32_arg0_126970, get_bit_arg0_126979);
                int32_t unsign_arg0_126981 = 1 & unsign_arg0_126980;
                bool cond_f_res_126982 = get_bit_arg0_126979 == 31;
                bool y_126983 = x_126974 && cond_f_res_126982;
                bool cond_126984 = cond_126973 || y_126983;
                int32_t defunc_0_get_bit_res_126985;
                
                if (cond_126984) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ unsign_arg0_126981;
                    
                    defunc_0_get_bit_res_126985 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_126985 = unsign_arg0_126981;
                }
                
                int8_t loopres_126987;
                
                if (futrts_set_bit_2464(ctx, &loopres_126987, binop_x_126978, y_126977, defunc_0_get_bit_res_126985) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_126987;
                
                y_126977 = y_tmp_140328;
            }
            defunc_0_f_res_126975 = y_126977;
            ((int8_t *) mem_139590)[i_139365] = defunc_0_f_res_126975;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_126992;
        int64_t offs_126995;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_126995 = (int64_t) 0;
        for (int64_t i_126994 = 0; i_126994 < up_to_126988; i_126994++) {
            int32_t binop_x_126997 = sext_i64_i32(i_126994);
            int8_t index_primexp_126998 = zext_i32_i8(binop_x_126997);
            
            if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_87838; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139590)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_126998;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139599.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_126995, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139601.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_127023 = add64(offs_126995, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139601, "mem_139601") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_127023;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_126995 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139610, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_126992 = offs_126995;
        if (memblock_alloc(ctx, &mem_139612, bytes_139582, "mem_139612")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_87838});
        if (memblock_alloc(ctx, &mem_139614, bytes_139651, "mem_139614")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_87838});
        
        bool partitioned_scatter_res_127030;
        int64_t partitioned_scatter_res_127033;
        bool loop_while_127034;
        int64_t p_127037;
        
        loop_while_127034 = loop_cond_126949;
        p_127037 = (int64_t) 0;
        while (loop_while_127034) {
            int64_t lower_bound_127038 = mul64(i16_res_126924, p_127037);
            int64_t min_arg1_127039 = add64(i16_res_126924, lower_bound_127038);
            int64_t min_res_127040 = smin64(n_87838, min_arg1_127039);
            int64_t j_m_i_127041 = sub64(min_res_127040, lower_bound_127038);
            bool empty_slice_127042 = j_m_i_127041 == (int64_t) 0;
            int64_t m_127043 = sub64(j_m_i_127041, (int64_t) 1);
            int64_t i_p_m_t_s_127044 = add64(lower_bound_127038, m_127043);
            bool zzero_leq_i_p_m_t_s_127045 = sle64((int64_t) 0, i_p_m_t_s_127044);
            bool i_p_m_t_s_leq_w_127046 = slt64(i_p_m_t_s_127044, n_87838);
            bool zzero_lte_i_127047 = sle64((int64_t) 0, lower_bound_127038);
            bool i_lte_j_127048 = sle64(lower_bound_127038, min_res_127040);
            bool y_127049 = i_p_m_t_s_leq_w_127046 && zzero_lte_i_127047;
            bool y_127050 = zzero_leq_i_p_m_t_s_127045 && y_127049;
            bool forwards_ok_127051 = i_lte_j_127048 && y_127050;
            bool ok_or_empty_127052 = empty_slice_127042 || forwards_ok_127051;
            bool index_certs_127053;
            
            if (!ok_or_empty_127052) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_127038, ":", (long long) min_res_127040, "] out of bounds for array of shape [", (long long) n_87838, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:143:98-101\n   #4  ftRelational.fut:130:75-86\n   #5  ftRelational.fut:129:9-130:87\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139621 = (int64_t) 8 * j_m_i_127041;
            int64_t bytes_139623 = (int64_t) 4 * j_m_i_127041;
            
            if (mem_139622_cached_sizze_140892 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139622, &mem_139622_cached_sizze_140892, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139612.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_127038, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127041});
            if (mem_139624_cached_sizze_140893 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140893, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139614.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_127038, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127041});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_87838; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139610.mem)[write_iter_139385];
                int64_t write_iv_139389 = ((int64_t *) mem_param_139586.mem)[write_iter_139385];
                float write_iv_139390 = ((float *) mem_param_139589.mem)[write_iter_139385];
                bool cond_131948 = sle64(lower_bound_127038, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_127040);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_127038);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127041)) {
                    ((int64_t *) mem_139622)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127041)) {
                    ((float *) mem_139624)[lifted_lambda_res_131951] = write_iv_139390;
                }
            }
            
            int64_t tmp_127065 = add64((int64_t) 1, p_127037);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, lower_bound_127038, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127041});
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139614.mem, lower_bound_127038, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127041});
            
            bool loop_cond_127073 = slt64(tmp_127065, m_126948);
            bool loop_while_tmp_140335 = loop_cond_127073;
            int64_t p_tmp_140338 = tmp_127065;
            
            loop_while_127034 = loop_while_tmp_140335;
            p_127037 = p_tmp_140338;
        }
        partitioned_scatter_res_127030 = loop_while_127034;
        partitioned_scatter_res_127033 = p_127037;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139648, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139647, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139650, bytes_139582, "mem_139650")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139650.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_87838});
    if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139652, bytes_139651, "mem_139652")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139652.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139647.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_87838});
    if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139650, "mem_139650") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139652, "mem_139652") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140889, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140890, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139590);
        free(mem_139622);
        free(mem_139624);
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139650, "mem_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_140894, struct memblock *mem_out_p_140895, struct memblock xs_mem_139580, int64_t n_86081, int64_t incr_86082, int16_t block_sizze_86083)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139590_cached_sizze_140896 = 0;
    unsigned char *mem_139590 = NULL;
    int64_t mem_139622_cached_sizze_140897 = 0;
    unsigned char *mem_139622 = NULL;
    int64_t mem_139624_cached_sizze_140898 = 0;
    unsigned char *mem_139624 = NULL;
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock mem_139650;
    
    mem_139650.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_139612;
    
    mem_139612.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139610;
    
    ext_mem_139610.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139647;
    
    ext_mem_139647.references = NULL;
    
    struct memblock ext_mem_139648;
    
    ext_mem_139648.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_124592 = sext_i16_i64(block_sizze_86083);
    int64_t bytes_139582 = (int64_t) 8 * n_86081;
    bool zzero_124611 = i16_res_124592 == (int64_t) 0;
    bool nonzzero_124612 = !zzero_124611;
    bool nonzzero_cert_124615;
    
    if (!nonzzero_124612) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:126:78-89\n   #5  ftRelational.fut:125:9-126:90\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139651 = (int64_t) 4 * n_86081;
    
    if (futrts_indicesWithIncrement_11384(ctx, &ext_mem_139581, xs_mem_139580, n_86081, incr_86082) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_86081; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_124609 = add64(n_86081, i16_res_124592);
    int64_t zs_lhs_124610 = sub64(zm_lhs_124609, (int64_t) 1);
    int64_t m_124616 = sdiv_safe64(zs_lhs_124610, i16_res_124592);
    bool loop_cond_124617 = slt64((int64_t) 0, m_124616);
    
    if (mem_139590_cached_sizze_140896 < n_86081) {
        err = lexical_realloc(ctx, &mem_139590, &mem_139590_cached_sizze_140896, n_86081);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139589, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    for (int64_t i_124620 = 0; i_124620 < (int64_t) 16; i_124620++) {
        int32_t binop_x_124623 = sext_i64_i32(i_124620);
        int32_t binop_x_124624 = mul32(2, binop_x_124623);
        int32_t zm_lhs_124625 = add32(2, binop_x_124624);
        int32_t min_arg1_124626 = sub32(zm_lhs_124625, 1);
        int32_t min_res_124627 = smin32(32, min_arg1_124626);
        int32_t zp_lhs_124628 = sub32(min_res_124627, binop_x_124624);
        int32_t ij_bits_124629 = add32(1, zp_lhs_124628);
        int32_t up_to_124630 = shl32(1, ij_bits_124629);
        int64_t tmp_124631 = sext_i32_i64(zp_lhs_124628);
        bool bounds_invalid_upwards_124632 = slt32(zp_lhs_124628, 0);
        bool valid_124634 = !bounds_invalid_upwards_124632;
        bool range_valid_c_124635;
        
        if (!valid_124634) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124631, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:32:58-60\n   #4  ftSMJ.fut:132:96-99\n   #5  ftRelational.fut:126:78-89\n   #6  ftRelational.fut:125:9-126:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_124648 = sext_i32_i64(up_to_124630);
        bool bounds_invalid_upwards_124649 = slt32(up_to_124630, 0);
        bool valid_124650 = !bounds_invalid_upwards_124649;
        bool range_valid_c_124651;
        
        if (!valid_124650) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124648, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:126:78-89\n   #5  ftRelational.fut:125:9-126:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_124633 = add64((int64_t) 1, tmp_124631);
        
        for (int64_t i_139365 = 0; i_139365 < n_86081; i_139365++) {
            int32_t eta_p_124637 = ((int32_t *) mem_param_139589.mem)[i_139365];
            int8_t defunc_0_f_res_124638;
            int8_t y_124640 = (int8_t) 0;
            
            for (int64_t i_124639 = 0; i_124639 < distance_124633; i_124639++) {
                int32_t binop_x_124641 = sext_i64_i32(i_124639);
                int32_t get_bit_arg0_124642 = add32(binop_x_124624, binop_x_124641);
                int32_t zgzg_res_130103 = ashr32(eta_p_124637, get_bit_arg0_124642);
                int32_t za_res_130104 = 1 & zgzg_res_130103;
                bool cond_124644 = get_bit_arg0_124642 == 31;
                int32_t defunc_0_get_bit_res_124645;
                
                if (cond_124644) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ za_res_130104;
                    
                    defunc_0_get_bit_res_124645 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_124645 = za_res_130104;
                }
                
                int8_t loopres_124647;
                
                if (futrts_set_bit_2464(ctx, &loopres_124647, binop_x_124641, y_124640, defunc_0_get_bit_res_124645) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_124647;
                
                y_124640 = y_tmp_140328;
            }
            defunc_0_f_res_124638 = y_124640;
            ((int8_t *) mem_139590)[i_139365] = defunc_0_f_res_124638;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_124652;
        int64_t offs_124655;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_124655 = (int64_t) 0;
        for (int64_t i_124654 = 0; i_124654 < up_to_124648; i_124654++) {
            int32_t binop_x_124657 = sext_i64_i32(i_124654);
            int8_t index_primexp_124658 = zext_i32_i8(binop_x_124657);
            
            if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_86081; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139590)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_124658;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139599.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_124655, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139601.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_124683 = add64(offs_124655, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139601, "mem_139601") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_124683;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_124655 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139610, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_124652 = offs_124655;
        if (memblock_alloc(ctx, &mem_139612, bytes_139582, "mem_139612")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86081});
        if (memblock_alloc(ctx, &mem_139614, bytes_139651, "mem_139614")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86081});
        
        bool partitioned_scatter_res_124690;
        int64_t partitioned_scatter_res_124693;
        bool loop_while_124694;
        int64_t p_124697;
        
        loop_while_124694 = loop_cond_124617;
        p_124697 = (int64_t) 0;
        while (loop_while_124694) {
            int64_t lower_bound_124698 = mul64(i16_res_124592, p_124697);
            int64_t min_arg1_124699 = add64(i16_res_124592, lower_bound_124698);
            int64_t min_res_124700 = smin64(n_86081, min_arg1_124699);
            int64_t j_m_i_124701 = sub64(min_res_124700, lower_bound_124698);
            bool empty_slice_124702 = j_m_i_124701 == (int64_t) 0;
            int64_t m_124703 = sub64(j_m_i_124701, (int64_t) 1);
            int64_t i_p_m_t_s_124704 = add64(lower_bound_124698, m_124703);
            bool zzero_leq_i_p_m_t_s_124705 = sle64((int64_t) 0, i_p_m_t_s_124704);
            bool i_p_m_t_s_leq_w_124706 = slt64(i_p_m_t_s_124704, n_86081);
            bool zzero_lte_i_124707 = sle64((int64_t) 0, lower_bound_124698);
            bool i_lte_j_124708 = sle64(lower_bound_124698, min_res_124700);
            bool y_124709 = i_p_m_t_s_leq_w_124706 && zzero_lte_i_124707;
            bool y_124710 = zzero_leq_i_p_m_t_s_124705 && y_124709;
            bool forwards_ok_124711 = i_lte_j_124708 && y_124710;
            bool ok_or_empty_124712 = empty_slice_124702 || forwards_ok_124711;
            bool index_certs_124713;
            
            if (!ok_or_empty_124712) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124698, ":", (long long) min_res_124700, "] out of bounds for array of shape [", (long long) n_86081, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:126:78-89\n   #5  ftRelational.fut:125:9-126:90\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139621 = (int64_t) 8 * j_m_i_124701;
            int64_t bytes_139623 = (int64_t) 4 * j_m_i_124701;
            
            if (mem_139622_cached_sizze_140897 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139622, &mem_139622_cached_sizze_140897, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139612.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124698, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            if (mem_139624_cached_sizze_140898 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140898, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139614.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124698, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_86081; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139610.mem)[write_iter_139385];
                int64_t write_iv_139389 = ((int64_t *) mem_param_139586.mem)[write_iter_139385];
                int32_t write_iv_139390 = ((int32_t *) mem_param_139589.mem)[write_iter_139385];
                bool cond_131948 = sle64(lower_bound_124698, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_124700);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_124698);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124701)) {
                    ((int64_t *) mem_139622)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124701)) {
                    ((int32_t *) mem_139624)[lifted_lambda_res_131951] = write_iv_139390;
                }
            }
            
            int64_t tmp_124725 = add64((int64_t) 1, p_124697);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, lower_bound_124698, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139614.mem, lower_bound_124698, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            
            bool loop_cond_124733 = slt64(tmp_124725, m_124616);
            bool loop_while_tmp_140335 = loop_cond_124733;
            int64_t p_tmp_140338 = tmp_124725;
            
            loop_while_124694 = loop_while_tmp_140335;
            p_124697 = p_tmp_140338;
        }
        partitioned_scatter_res_124690 = loop_while_124694;
        partitioned_scatter_res_124693 = p_124697;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139648, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139647, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139650, bytes_139582, "mem_139650")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139650.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86081});
    if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139652, bytes_139651, "mem_139652")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139652.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139647.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86081});
    if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139650, "mem_139650") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139652, "mem_139652") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140894, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140895, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139590);
        free(mem_139622);
        free(mem_139624);
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139650, "mem_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_140899, struct memblock *mem_out_p_140900, struct memblock xs_mem_139580, int64_t n_86949, int64_t incr_86950, int16_t block_sizze_86951)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139590_cached_sizze_140901 = 0;
    unsigned char *mem_139590 = NULL;
    int64_t mem_139622_cached_sizze_140902 = 0;
    unsigned char *mem_139622 = NULL;
    int64_t mem_139624_cached_sizze_140903 = 0;
    unsigned char *mem_139624 = NULL;
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock mem_139650;
    
    mem_139650.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_139612;
    
    mem_139612.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139610;
    
    ext_mem_139610.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139647;
    
    ext_mem_139647.references = NULL;
    
    struct memblock ext_mem_139648;
    
    ext_mem_139648.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_124592 = sext_i16_i64(block_sizze_86951);
    int64_t bytes_139582 = (int64_t) 8 * n_86949;
    bool zzero_124611 = i16_res_124592 == (int64_t) 0;
    bool nonzzero_124612 = !zzero_124611;
    bool nonzzero_cert_124615;
    
    if (!nonzzero_124612) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:128:78-89\n   #5  ftRelational.fut:127:9-128:90\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (futrts_indicesWithIncrement_11406(ctx, &ext_mem_139581, xs_mem_139580, n_86949, incr_86950) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_86949; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_124609 = add64(n_86949, i16_res_124592);
    int64_t zs_lhs_124610 = sub64(zm_lhs_124609, (int64_t) 1);
    int64_t m_124616 = sdiv_safe64(zs_lhs_124610, i16_res_124592);
    bool loop_cond_124617 = slt64((int64_t) 0, m_124616);
    
    if (mem_139590_cached_sizze_140901 < n_86949) {
        err = lexical_realloc(ctx, &mem_139590, &mem_139590_cached_sizze_140901, n_86949);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139589, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    for (int64_t i_124620 = 0; i_124620 < (int64_t) 32; i_124620++) {
        int32_t binop_x_124623 = sext_i64_i32(i_124620);
        int32_t binop_x_124624 = mul32(2, binop_x_124623);
        int32_t zm_lhs_124625 = add32(2, binop_x_124624);
        int32_t min_arg1_124626 = sub32(zm_lhs_124625, 1);
        int32_t min_res_124627 = smin32(64, min_arg1_124626);
        int32_t zp_lhs_124628 = sub32(min_res_124627, binop_x_124624);
        int32_t ij_bits_124629 = add32(1, zp_lhs_124628);
        int32_t up_to_124630 = shl32(1, ij_bits_124629);
        int64_t tmp_124631 = sext_i32_i64(zp_lhs_124628);
        bool bounds_invalid_upwards_124632 = slt32(zp_lhs_124628, 0);
        bool valid_124634 = !bounds_invalid_upwards_124632;
        bool range_valid_c_124635;
        
        if (!valid_124634) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124631, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:32:58-60\n   #4  ftSMJ.fut:132:96-99\n   #5  ftRelational.fut:128:78-89\n   #6  ftRelational.fut:127:9-128:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_124648 = sext_i32_i64(up_to_124630);
        bool bounds_invalid_upwards_124649 = slt32(up_to_124630, 0);
        bool valid_124650 = !bounds_invalid_upwards_124649;
        bool range_valid_c_124651;
        
        if (!valid_124650) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124648, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:128:78-89\n   #5  ftRelational.fut:127:9-128:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_124633 = add64((int64_t) 1, tmp_124631);
        
        for (int64_t i_139365 = 0; i_139365 < n_86949; i_139365++) {
            int64_t eta_p_124637 = ((int64_t *) mem_param_139589.mem)[i_139365];
            int8_t defunc_0_f_res_124638;
            int8_t y_124640 = (int8_t) 0;
            
            for (int64_t i_124639 = 0; i_124639 < distance_124633; i_124639++) {
                int32_t binop_x_124641 = sext_i64_i32(i_124639);
                int32_t get_bit_arg0_124642 = add32(binop_x_124624, binop_x_124641);
                int32_t defunc_0_get_bit_res_124643;
                
                if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_124643, get_bit_arg0_124642, eta_p_124637) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                bool cond_124644 = get_bit_arg0_124642 == 63;
                int32_t defunc_0_get_bit_res_124645;
                
                if (cond_124644) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ defunc_0_get_bit_res_124643;
                    
                    defunc_0_get_bit_res_124645 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_124645 = defunc_0_get_bit_res_124643;
                }
                
                int8_t loopres_124647;
                
                if (futrts_set_bit_2464(ctx, &loopres_124647, binop_x_124641, y_124640, defunc_0_get_bit_res_124645) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_124647;
                
                y_124640 = y_tmp_140328;
            }
            defunc_0_f_res_124638 = y_124640;
            ((int8_t *) mem_139590)[i_139365] = defunc_0_f_res_124638;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_124652;
        int64_t offs_124655;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_124655 = (int64_t) 0;
        for (int64_t i_124654 = 0; i_124654 < up_to_124648; i_124654++) {
            int32_t binop_x_124657 = sext_i64_i32(i_124654);
            int8_t index_primexp_124658 = zext_i32_i8(binop_x_124657);
            
            if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_86949; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139590)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_124658;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139599.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_124655, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139601.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_124683 = add64(offs_124655, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139601, "mem_139601") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_124683;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_124655 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139610, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_124652 = offs_124655;
        if (memblock_alloc(ctx, &mem_139612, bytes_139582, "mem_139612")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86949});
        if (memblock_alloc(ctx, &mem_139614, bytes_139582, "mem_139614")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86949});
        
        bool partitioned_scatter_res_124690;
        int64_t partitioned_scatter_res_124693;
        bool loop_while_124694;
        int64_t p_124697;
        
        loop_while_124694 = loop_cond_124617;
        p_124697 = (int64_t) 0;
        while (loop_while_124694) {
            int64_t lower_bound_124698 = mul64(i16_res_124592, p_124697);
            int64_t min_arg1_124699 = add64(i16_res_124592, lower_bound_124698);
            int64_t min_res_124700 = smin64(n_86949, min_arg1_124699);
            int64_t j_m_i_124701 = sub64(min_res_124700, lower_bound_124698);
            bool empty_slice_124702 = j_m_i_124701 == (int64_t) 0;
            int64_t m_124703 = sub64(j_m_i_124701, (int64_t) 1);
            int64_t i_p_m_t_s_124704 = add64(lower_bound_124698, m_124703);
            bool zzero_leq_i_p_m_t_s_124705 = sle64((int64_t) 0, i_p_m_t_s_124704);
            bool i_p_m_t_s_leq_w_124706 = slt64(i_p_m_t_s_124704, n_86949);
            bool zzero_lte_i_124707 = sle64((int64_t) 0, lower_bound_124698);
            bool i_lte_j_124708 = sle64(lower_bound_124698, min_res_124700);
            bool y_124709 = i_p_m_t_s_leq_w_124706 && zzero_lte_i_124707;
            bool y_124710 = zzero_leq_i_p_m_t_s_124705 && y_124709;
            bool forwards_ok_124711 = i_lte_j_124708 && y_124710;
            bool ok_or_empty_124712 = empty_slice_124702 || forwards_ok_124711;
            bool index_certs_124713;
            
            if (!ok_or_empty_124712) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124698, ":", (long long) min_res_124700, "] out of bounds for array of shape [", (long long) n_86949, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:128:78-89\n   #5  ftRelational.fut:127:9-128:90\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139621 = (int64_t) 8 * j_m_i_124701;
            
            if (mem_139622_cached_sizze_140902 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139622, &mem_139622_cached_sizze_140902, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139612.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124698, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            if (mem_139624_cached_sizze_140903 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140903, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139614.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124698, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_86949; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139610.mem)[write_iter_139385];
                int64_t write_iv_139389 = ((int64_t *) mem_param_139586.mem)[write_iter_139385];
                int64_t write_iv_139390 = ((int64_t *) mem_param_139589.mem)[write_iter_139385];
                bool cond_131948 = sle64(lower_bound_124698, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_124700);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_124698);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124701)) {
                    ((int64_t *) mem_139622)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124701)) {
                    ((int64_t *) mem_139624)[lifted_lambda_res_131951] = write_iv_139390;
                }
            }
            
            int64_t tmp_124725 = add64((int64_t) 1, p_124697);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, lower_bound_124698, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139614.mem, lower_bound_124698, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            
            bool loop_cond_124733 = slt64(tmp_124725, m_124616);
            bool loop_while_tmp_140335 = loop_cond_124733;
            int64_t p_tmp_140338 = tmp_124725;
            
            loop_while_124694 = loop_while_tmp_140335;
            p_124697 = p_tmp_140338;
        }
        partitioned_scatter_res_124690 = loop_while_124694;
        partitioned_scatter_res_124693 = p_124697;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139648, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139647, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139650, bytes_139582, "mem_139650")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139650.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86949});
    if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139652, bytes_139582, "mem_139652")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139652.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139647.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_86949});
    if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139650, "mem_139650") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139652, "mem_139652") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140899, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140900, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139590);
        free(mem_139622);
        free(mem_139624);
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139650, "mem_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_140904, struct memblock *mem_out_p_140905, struct memblock xs_mem_139580, int64_t n_85213, int64_t incr_85214, int16_t block_sizze_85215)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139590_cached_sizze_140906 = 0;
    unsigned char *mem_139590 = NULL;
    int64_t mem_139622_cached_sizze_140907 = 0;
    unsigned char *mem_139622 = NULL;
    int64_t mem_139624_cached_sizze_140908 = 0;
    unsigned char *mem_139624 = NULL;
    struct memblock mem_139652;
    
    mem_139652.references = NULL;
    
    struct memblock mem_139650;
    
    mem_139650.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139614;
    
    mem_139614.references = NULL;
    
    struct memblock mem_139612;
    
    mem_139612.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139601;
    
    mem_139601.references = NULL;
    
    struct memblock mem_param_139599;
    
    mem_param_139599.references = NULL;
    
    struct memblock ext_mem_139610;
    
    ext_mem_139610.references = NULL;
    
    struct memblock mem_param_139589;
    
    mem_param_139589.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139647;
    
    ext_mem_139647.references = NULL;
    
    struct memblock ext_mem_139648;
    
    ext_mem_139648.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock ext_mem_139581;
    
    ext_mem_139581.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_124592 = sext_i16_i64(block_sizze_85215);
    int64_t bytes_139582 = (int64_t) 8 * n_85213;
    bool zzero_124611 = i16_res_124592 == (int64_t) 0;
    bool nonzzero_124612 = !zzero_124611;
    bool nonzzero_cert_124615;
    
    if (!nonzzero_124612) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:124:78-89\n   #5  ftRelational.fut:123:9-124:90\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139651 = (int64_t) 2 * n_85213;
    
    if (futrts_indicesWithIncrement_11363(ctx, &ext_mem_139581, xs_mem_139580, n_85213, incr_85214) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_85213; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_124609 = add64(n_85213, i16_res_124592);
    int64_t zs_lhs_124610 = sub64(zm_lhs_124609, (int64_t) 1);
    int64_t m_124616 = sdiv_safe64(zs_lhs_124610, i16_res_124592);
    bool loop_cond_124617 = slt64((int64_t) 0, m_124616);
    
    if (mem_139590_cached_sizze_140906 < n_85213) {
        err = lexical_realloc(ctx, &mem_139590, &mem_139590_cached_sizze_140906, n_85213);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139589, &xs_mem_139580, "xs_mem_139580") != 0)
        return 1;
    for (int64_t i_124620 = 0; i_124620 < (int64_t) 8; i_124620++) {
        int32_t binop_x_124623 = sext_i64_i32(i_124620);
        int32_t binop_x_124624 = mul32(2, binop_x_124623);
        int32_t zm_lhs_124625 = add32(2, binop_x_124624);
        int32_t min_arg1_124626 = sub32(zm_lhs_124625, 1);
        int32_t min_res_124627 = smin32(16, min_arg1_124626);
        int32_t zp_lhs_124628 = sub32(min_res_124627, binop_x_124624);
        int32_t ij_bits_124629 = add32(1, zp_lhs_124628);
        int32_t up_to_124630 = shl32(1, ij_bits_124629);
        int64_t tmp_124631 = sext_i32_i64(zp_lhs_124628);
        bool bounds_invalid_upwards_124632 = slt32(zp_lhs_124628, 0);
        bool valid_124634 = !bounds_invalid_upwards_124632;
        bool range_valid_c_124635;
        
        if (!valid_124634) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124631, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:32:58-60\n   #4  ftSMJ.fut:132:96-99\n   #5  ftRelational.fut:124:78-89\n   #6  ftRelational.fut:123:9-124:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_124648 = sext_i32_i64(up_to_124630);
        bool bounds_invalid_upwards_124649 = slt32(up_to_124630, 0);
        bool valid_124650 = !bounds_invalid_upwards_124649;
        bool range_valid_c_124651;
        
        if (!valid_124650) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124648, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:124:78-89\n   #5  ftRelational.fut:123:9-124:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_124633 = add64((int64_t) 1, tmp_124631);
        
        for (int64_t i_139365 = 0; i_139365 < n_85213; i_139365++) {
            int16_t eta_p_124637 = ((int16_t *) mem_param_139589.mem)[i_139365];
            int8_t defunc_0_f_res_124638;
            int8_t y_124640 = (int8_t) 0;
            
            for (int64_t i_124639 = 0; i_124639 < distance_124633; i_124639++) {
                int32_t binop_x_124641 = sext_i64_i32(i_124639);
                int32_t get_bit_arg0_124642 = add32(binop_x_124624, binop_x_124641);
                int32_t defunc_0_get_bit_res_124643;
                
                if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_124643, get_bit_arg0_124642, eta_p_124637) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                bool cond_124644 = get_bit_arg0_124642 == 15;
                int32_t defunc_0_get_bit_res_124645;
                
                if (cond_124644) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ defunc_0_get_bit_res_124643;
                    
                    defunc_0_get_bit_res_124645 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_124645 = defunc_0_get_bit_res_124643;
                }
                
                int8_t loopres_124647;
                
                if (futrts_set_bit_2464(ctx, &loopres_124647, binop_x_124641, y_124640, defunc_0_get_bit_res_124645) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_124647;
                
                y_124640 = y_tmp_140328;
            }
            defunc_0_f_res_124638 = y_124640;
            ((int8_t *) mem_139590)[i_139365] = defunc_0_f_res_124638;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_124652;
        int64_t offs_124655;
        
        if (memblock_set(ctx, &mem_param_139599, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_124655 = (int64_t) 0;
        for (int64_t i_124654 = 0; i_124654 < up_to_124648; i_124654++) {
            int32_t binop_x_124657 = sext_i64_i32(i_124654);
            int8_t index_primexp_124658 = zext_i32_i8(binop_x_124657);
            
            if (memblock_alloc(ctx, &mem_139601, bytes_139582, "mem_139601")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_85213; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139590)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_124658;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139599.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_124655, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139601.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_124683 = add64(offs_124655, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139601, "mem_139601") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_124683;
            
            if (memblock_set(ctx, &mem_param_139599, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_124655 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139610, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_124652 = offs_124655;
        if (memblock_alloc(ctx, &mem_139612, bytes_139582, "mem_139612")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_85213});
        if (memblock_alloc(ctx, &mem_139614, bytes_139651, "mem_139614")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_139614.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_param_139589.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_85213});
        
        bool partitioned_scatter_res_124690;
        int64_t partitioned_scatter_res_124693;
        bool loop_while_124694;
        int64_t p_124697;
        
        loop_while_124694 = loop_cond_124617;
        p_124697 = (int64_t) 0;
        while (loop_while_124694) {
            int64_t lower_bound_124698 = mul64(i16_res_124592, p_124697);
            int64_t min_arg1_124699 = add64(i16_res_124592, lower_bound_124698);
            int64_t min_res_124700 = smin64(n_85213, min_arg1_124699);
            int64_t j_m_i_124701 = sub64(min_res_124700, lower_bound_124698);
            bool empty_slice_124702 = j_m_i_124701 == (int64_t) 0;
            int64_t m_124703 = sub64(j_m_i_124701, (int64_t) 1);
            int64_t i_p_m_t_s_124704 = add64(lower_bound_124698, m_124703);
            bool zzero_leq_i_p_m_t_s_124705 = sle64((int64_t) 0, i_p_m_t_s_124704);
            bool i_p_m_t_s_leq_w_124706 = slt64(i_p_m_t_s_124704, n_85213);
            bool zzero_lte_i_124707 = sle64((int64_t) 0, lower_bound_124698);
            bool i_lte_j_124708 = sle64(lower_bound_124698, min_res_124700);
            bool y_124709 = i_p_m_t_s_leq_w_124706 && zzero_lte_i_124707;
            bool y_124710 = zzero_leq_i_p_m_t_s_124705 && y_124709;
            bool forwards_ok_124711 = i_lte_j_124708 && y_124710;
            bool ok_or_empty_124712 = empty_slice_124702 || forwards_ok_124711;
            bool index_certs_124713;
            
            if (!ok_or_empty_124712) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124698, ":", (long long) min_res_124700, "] out of bounds for array of shape [", (long long) n_85213, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:132:96-99\n   #4  ftRelational.fut:124:78-89\n   #5  ftRelational.fut:123:9-124:90\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139621 = (int64_t) 8 * j_m_i_124701;
            int64_t bytes_139623 = (int64_t) 2 * j_m_i_124701;
            
            if (mem_139622_cached_sizze_140907 < bytes_139621) {
                err = lexical_realloc(ctx, &mem_139622, &mem_139622_cached_sizze_140907, bytes_139621);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139612.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124698, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            if (mem_139624_cached_sizze_140908 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140908, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139614.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124698, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_85213; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139610.mem)[write_iter_139385];
                int64_t write_iv_139389 = ((int64_t *) mem_param_139586.mem)[write_iter_139385];
                int16_t write_iv_139390 = ((int16_t *) mem_param_139589.mem)[write_iter_139385];
                bool cond_131948 = sle64(lower_bound_124698, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_124700);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_124698);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124701)) {
                    ((int64_t *) mem_139622)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124701)) {
                    ((int16_t *) mem_139624)[lifted_lambda_res_131951] = write_iv_139390;
                }
            }
            
            int64_t tmp_124725 = add64((int64_t) 1, p_124697);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139612.mem, lower_bound_124698, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139622, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_139614.mem, lower_bound_124698, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124701});
            
            bool loop_cond_124733 = slt64(tmp_124725, m_124616);
            bool loop_while_tmp_140335 = loop_cond_124733;
            int64_t p_tmp_140338 = tmp_124725;
            
            loop_while_124694 = loop_while_tmp_140335;
            p_124697 = p_tmp_140338;
        }
        partitioned_scatter_res_124690 = loop_while_124694;
        partitioned_scatter_res_124693 = p_124697;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139589, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139648, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139647, &mem_param_139589, "mem_param_139589") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139650, bytes_139582, "mem_139650")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139650.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_85213});
    if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139652, bytes_139651, "mem_139652")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_139652.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139647.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_85213});
    if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139650, "mem_139650") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139652, "mem_139652") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140904, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140905, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139590);
        free(mem_139622);
        free(mem_139624);
        if (memblock_unref(ctx, &mem_139652, "mem_139652") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139650, "mem_139650") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139614, "mem_139614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139612, "mem_139612") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139601, "mem_139601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139599, "mem_param_139599") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139610, "ext_mem_139610") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139589, "mem_param_139589") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139647, "ext_mem_139647") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139648, "ext_mem_139648") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139581, "ext_mem_139581") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_double(struct futhark_context *ctx, struct memblock *mem_out_p_140909, struct memblock *mem_out_p_140910, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_72424, int64_t b_72425, int16_t block_sizze_72426)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139591_cached_sizze_140911 = 0;
    unsigned char *mem_139591 = NULL;
    int64_t mem_139624_cached_sizze_140912 = 0;
    unsigned char *mem_139624 = NULL;
    int64_t mem_139626_cached_sizze_140913 = 0;
    unsigned char *mem_139626 = NULL;
    int64_t mem_139634_cached_sizze_140914 = 0;
    unsigned char *mem_139634 = NULL;
    struct memblock mem_139659;
    
    mem_139659.references = NULL;
    
    struct memblock mem_139657;
    
    mem_139657.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_139613;
    
    mem_139613.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139602;
    
    mem_139602.references = NULL;
    
    struct memblock mem_param_139600;
    
    mem_param_139600.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock mem_param_139590;
    
    mem_param_139590.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139654;
    
    ext_mem_139654.references = NULL;
    
    struct memblock ext_mem_139655;
    
    ext_mem_139655.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_126918 = sext_i16_i64(block_sizze_72426);
    int64_t bytes_139582 = (int64_t) 8 * n_72424;
    bool zzero_126938 = i16_res_126918 == (int64_t) 0;
    bool nonzzero_126939 = !zzero_126938;
    bool nonzzero_cert_126942;
    
    if (!nonzzero_126939) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:97:98-101\n   #4  ftRelational.fut:96:78-89\n   #5  ftRelational.fut:92:9-96:90\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139658 = n_72424 * b_72425;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_72424; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_126936 = add64(n_72424, i16_res_126918);
    int64_t zs_lhs_126937 = sub64(zm_lhs_126936, (int64_t) 1);
    int64_t m_126943 = sdiv_safe64(zs_lhs_126937, i16_res_126918);
    bool loop_cond_126944 = slt64((int64_t) 0, m_126943);
    
    if (mem_139591_cached_sizze_140911 < n_72424) {
        err = lexical_realloc(ctx, &mem_139591, &mem_139591_cached_sizze_140911, n_72424);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139634_cached_sizze_140914 < b_72425) {
        err = lexical_realloc(ctx, &mem_139634, &mem_139634_cached_sizze_140914, b_72425);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &k_mem_139580, "k_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139590, &pL_mem_139581, "pL_mem_139581") != 0)
        return 1;
    for (int64_t i_126947 = 0; i_126947 < (int64_t) 32; i_126947++) {
        int32_t binop_x_126950 = sext_i64_i32(i_126947);
        int32_t binop_x_126951 = mul32(2, binop_x_126950);
        int32_t zm_lhs_126952 = add32(2, binop_x_126951);
        int32_t min_arg1_126953 = sub32(zm_lhs_126952, 1);
        int32_t min_res_126954 = smin32(64, min_arg1_126953);
        int32_t zp_lhs_126955 = sub32(min_res_126954, binop_x_126951);
        int32_t ij_bits_126956 = add32(1, zp_lhs_126955);
        int32_t up_to_126957 = shl32(1, ij_bits_126956);
        int64_t tmp_126958 = sext_i32_i64(zp_lhs_126955);
        bool bounds_invalid_upwards_126959 = slt32(zp_lhs_126955, 0);
        bool valid_126961 = !bounds_invalid_upwards_126959;
        bool range_valid_c_126962;
        
        if (!valid_126961) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_126958, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:53:58-60\n   #4  ftSMJ.fut:97:98-101\n   #5  ftRelational.fut:96:78-89\n   #6  ftRelational.fut:92:9-96:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_126986 = sext_i32_i64(up_to_126957);
        bool bounds_invalid_upwards_126987 = slt32(up_to_126957, 0);
        bool valid_126988 = !bounds_invalid_upwards_126987;
        bool range_valid_c_126989;
        
        if (!valid_126988) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_126986, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:97:98-101\n   #4  ftRelational.fut:96:78-89\n   #5  ftRelational.fut:92:9-96:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_126960 = add64((int64_t) 1, tmp_126958);
        
        for (int64_t i_139365 = 0; i_139365 < n_72424; i_139365++) {
            double eta_p_126964 = ((double *) mem_param_139586.mem)[i_139365];
            int64_t i64_arg0_126965 = futrts_to_bits64(eta_p_126964);
            int64_t unsign_arg0_126966 = ashr64(i64_arg0_126965, (int64_t) 63);
            int64_t unsign_arg0_126967 = (int64_t) 1 & unsign_arg0_126966;
            int32_t to_i32_res_126968 = zext_i64_i32(unsign_arg0_126967);
            bool cond_126969 = to_i32_res_126968 == 1;
            bool x_126970 = !cond_126969;
            int8_t defunc_0_f_res_126971;
            int8_t y_126973 = (int8_t) 0;
            
            for (int64_t i_126972 = 0; i_126972 < distance_126960; i_126972++) {
                int32_t binop_x_126974 = sext_i64_i32(i_126972);
                int32_t get_bit_arg0_126975 = add32(binop_x_126951, binop_x_126974);
                int64_t unsign_arg0_126976 = zext_i32_i64(get_bit_arg0_126975);
                int64_t unsign_arg0_126977 = ashr64(i64_arg0_126965, unsign_arg0_126976);
                int64_t unsign_arg0_126978 = (int64_t) 1 & unsign_arg0_126977;
                int32_t to_i32_res_126979 = zext_i64_i32(unsign_arg0_126978);
                bool cond_f_res_126980 = get_bit_arg0_126975 == 63;
                bool y_126981 = x_126970 && cond_f_res_126980;
                bool cond_126982 = cond_126969 || y_126981;
                int32_t defunc_0_get_bit_res_126983;
                
                if (cond_126982) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ to_i32_res_126979;
                    
                    defunc_0_get_bit_res_126983 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_126983 = to_i32_res_126979;
                }
                
                int8_t loopres_126985;
                
                if (futrts_set_bit_2464(ctx, &loopres_126985, binop_x_126974, y_126973, defunc_0_get_bit_res_126983) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_126985;
                
                y_126973 = y_tmp_140328;
            }
            defunc_0_f_res_126971 = y_126973;
            ((int8_t *) mem_139591)[i_139365] = defunc_0_f_res_126971;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_126990;
        int64_t offs_126993;
        
        if (memblock_set(ctx, &mem_param_139600, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_126993 = (int64_t) 0;
        for (int64_t i_126992 = 0; i_126992 < up_to_126986; i_126992++) {
            int32_t binop_x_126995 = sext_i64_i32(i_126992);
            int8_t index_primexp_126996 = zext_i32_i8(binop_x_126995);
            
            if (memblock_alloc(ctx, &mem_139602, bytes_139582, "mem_139602")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_72424; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139591)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_126996;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139600.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_126993, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139602.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_127021 = add64(offs_126993, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139602, "mem_139602") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_127021;
            
            if (memblock_set(ctx, &mem_param_139600, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_126993 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139611, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_126990 = offs_126993;
        if (memblock_alloc(ctx, &mem_139613, bytes_139582, "mem_139613")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139613.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_72424});
        if (memblock_alloc(ctx, &mem_139615, bytes_139658, "mem_139615")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {b_72425, (int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0, (int64_t []) {b_72425, (int64_t) 1}, (int64_t []) {n_72424, b_72425});
        
        bool partitioned_scatter_res_127028;
        int64_t partitioned_scatter_res_127031;
        bool loop_while_127032;
        int64_t p_127035;
        
        loop_while_127032 = loop_cond_126944;
        p_127035 = (int64_t) 0;
        while (loop_while_127032) {
            int64_t lower_bound_127036 = mul64(i16_res_126918, p_127035);
            int64_t min_arg1_127037 = add64(i16_res_126918, lower_bound_127036);
            int64_t min_res_127038 = smin64(n_72424, min_arg1_127037);
            int64_t j_m_i_127039 = sub64(min_res_127038, lower_bound_127036);
            bool empty_slice_127040 = j_m_i_127039 == (int64_t) 0;
            int64_t m_127041 = sub64(j_m_i_127039, (int64_t) 1);
            int64_t i_p_m_t_s_127042 = add64(lower_bound_127036, m_127041);
            bool zzero_leq_i_p_m_t_s_127043 = sle64((int64_t) 0, i_p_m_t_s_127042);
            bool i_p_m_t_s_leq_w_127044 = slt64(i_p_m_t_s_127042, n_72424);
            bool zzero_lte_i_127045 = sle64((int64_t) 0, lower_bound_127036);
            bool i_lte_j_127046 = sle64(lower_bound_127036, min_res_127038);
            bool y_127047 = i_p_m_t_s_leq_w_127044 && zzero_lte_i_127045;
            bool y_127048 = zzero_leq_i_p_m_t_s_127043 && y_127047;
            bool forwards_ok_127049 = i_lte_j_127046 && y_127048;
            bool ok_or_empty_127050 = empty_slice_127040 || forwards_ok_127049;
            bool index_certs_127051;
            
            if (!ok_or_empty_127050) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_127036, ":", (long long) min_res_127038, "] out of bounds for array of shape [", (long long) n_72424, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:97:98-101\n   #4  ftRelational.fut:96:78-89\n   #5  ftRelational.fut:92:9-96:90\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139623 = (int64_t) 8 * j_m_i_127039;
            int64_t bytes_139625 = b_72425 * j_m_i_127039;
            
            if (mem_139624_cached_sizze_140912 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140912, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139613.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_127036, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127039});
            if (mem_139626_cached_sizze_140913 < bytes_139625) {
                err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140913, bytes_139625);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_72425, (int64_t) 1}, (uint8_t *) mem_139615.mem, (int64_t) 0 + b_72425 * lower_bound_127036, (int64_t []) {b_72425, (int64_t) 1}, (int64_t []) {j_m_i_127039, b_72425});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_72424; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139611.mem)[write_iter_139385];
                double write_iv_139389 = ((double *) mem_param_139586.mem)[write_iter_139385];
                
                lmad_copy_1b(ctx, 1, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0 + write_iter_139385 * b_72425, (int64_t []) {(int64_t) 1}, (int64_t []) {b_72425});
                
                bool cond_131948 = sle64(lower_bound_127036, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_127038);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_127036);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127039)) {
                    ((double *) mem_139624)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if ((sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127039)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_72425 - (int64_t) 1, b_72425))) {
                    lmad_copy_1b(ctx, 1, (uint8_t *) mem_139626, lifted_lambda_res_131951 * b_72425, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_72425});
                }
            }
            
            int64_t tmp_127063 = add64((int64_t) 1, p_127035);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139613.mem, lower_bound_127036, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127039});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, b_72425 * lower_bound_127036, (int64_t []) {b_72425, (int64_t) 1}, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_72425, (int64_t) 1}, (int64_t []) {j_m_i_127039, b_72425});
            
            bool loop_cond_127071 = slt64(tmp_127063, m_126943);
            bool loop_while_tmp_140335 = loop_cond_127071;
            int64_t p_tmp_140338 = tmp_127063;
            
            loop_while_127032 = loop_while_tmp_140335;
            p_127035 = p_tmp_140338;
        }
        partitioned_scatter_res_127028 = loop_while_127032;
        partitioned_scatter_res_127031 = p_127035;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139590, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139655, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139654, &mem_param_139590, "mem_param_139590") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139657, bytes_139582, "mem_139657")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139657.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139655.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_72424});
    if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139659, bytes_139658, "mem_139659")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139659.mem, (int64_t) 0, (int64_t []) {b_72425, (int64_t) 1}, (uint8_t *) ext_mem_139654.mem, (int64_t) 0, (int64_t []) {b_72425, (int64_t) 1}, (int64_t []) {n_72424, b_72425});
    if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139657, "mem_139657") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139659, "mem_139659") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140909, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140910, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139591);
        free(mem_139624);
        free(mem_139626);
        free(mem_139634);
        if (memblock_unref(ctx, &mem_139659, "mem_139659") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139657, "mem_139657") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139602, "mem_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139590, "mem_param_139590") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_float(struct futhark_context *ctx, struct memblock *mem_out_p_140915, struct memblock *mem_out_p_140916, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_71474, int64_t b_71475, int16_t block_sizze_71476)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139591_cached_sizze_140917 = 0;
    unsigned char *mem_139591 = NULL;
    int64_t mem_139624_cached_sizze_140918 = 0;
    unsigned char *mem_139624 = NULL;
    int64_t mem_139626_cached_sizze_140919 = 0;
    unsigned char *mem_139626 = NULL;
    int64_t mem_139634_cached_sizze_140920 = 0;
    unsigned char *mem_139634 = NULL;
    struct memblock mem_139659;
    
    mem_139659.references = NULL;
    
    struct memblock mem_139657;
    
    mem_139657.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_139613;
    
    mem_139613.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139602;
    
    mem_139602.references = NULL;
    
    struct memblock mem_param_139600;
    
    mem_param_139600.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock mem_param_139590;
    
    mem_param_139590.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139654;
    
    ext_mem_139654.references = NULL;
    
    struct memblock ext_mem_139655;
    
    ext_mem_139655.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_126918 = sext_i16_i64(block_sizze_71476);
    int64_t bytes_139582 = (int64_t) 8 * n_71474;
    bool zzero_126937 = i16_res_126918 == (int64_t) 0;
    bool nonzzero_126938 = !zzero_126937;
    bool nonzzero_cert_126941;
    
    if (!nonzzero_126938) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:97:98-101\n   #4  ftRelational.fut:91:78-89\n   #5  ftRelational.fut:87:9-91:90\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139656 = (int64_t) 4 * n_71474;
    int64_t bytes_139658 = n_71474 * b_71475;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_71474; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_126935 = add64(n_71474, i16_res_126918);
    int64_t zs_lhs_126936 = sub64(zm_lhs_126935, (int64_t) 1);
    int64_t m_126942 = sdiv_safe64(zs_lhs_126936, i16_res_126918);
    bool loop_cond_126943 = slt64((int64_t) 0, m_126942);
    
    if (mem_139591_cached_sizze_140917 < n_71474) {
        err = lexical_realloc(ctx, &mem_139591, &mem_139591_cached_sizze_140917, n_71474);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139634_cached_sizze_140920 < b_71475) {
        err = lexical_realloc(ctx, &mem_139634, &mem_139634_cached_sizze_140920, b_71475);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &k_mem_139580, "k_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139590, &pL_mem_139581, "pL_mem_139581") != 0)
        return 1;
    for (int64_t i_126946 = 0; i_126946 < (int64_t) 16; i_126946++) {
        int32_t binop_x_126949 = sext_i64_i32(i_126946);
        int32_t binop_x_126950 = mul32(2, binop_x_126949);
        int32_t zm_lhs_126951 = add32(2, binop_x_126950);
        int32_t min_arg1_126952 = sub32(zm_lhs_126951, 1);
        int32_t min_res_126953 = smin32(32, min_arg1_126952);
        int32_t zp_lhs_126954 = sub32(min_res_126953, binop_x_126950);
        int32_t ij_bits_126955 = add32(1, zp_lhs_126954);
        int32_t up_to_126956 = shl32(1, ij_bits_126955);
        int64_t tmp_126957 = sext_i32_i64(zp_lhs_126954);
        bool bounds_invalid_upwards_126958 = slt32(zp_lhs_126954, 0);
        bool valid_126960 = !bounds_invalid_upwards_126958;
        bool range_valid_c_126961;
        
        if (!valid_126960) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_126957, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:53:58-60\n   #4  ftSMJ.fut:97:98-101\n   #5  ftRelational.fut:91:78-89\n   #6  ftRelational.fut:87:9-91:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_126982 = sext_i32_i64(up_to_126956);
        bool bounds_invalid_upwards_126983 = slt32(up_to_126956, 0);
        bool valid_126984 = !bounds_invalid_upwards_126983;
        bool range_valid_c_126985;
        
        if (!valid_126984) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_126982, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:97:98-101\n   #4  ftRelational.fut:91:78-89\n   #5  ftRelational.fut:87:9-91:90\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_126959 = add64((int64_t) 1, tmp_126957);
        
        for (int64_t i_139365 = 0; i_139365 < n_71474; i_139365++) {
            float eta_p_126963 = ((float *) mem_param_139586.mem)[i_139365];
            int32_t i32_arg0_126964 = futrts_to_bits32(eta_p_126963);
            int32_t unsign_arg0_126965 = ashr32(i32_arg0_126964, 31);
            int32_t unsign_arg0_126966 = 1 & unsign_arg0_126965;
            bool cond_126967 = unsign_arg0_126966 == 1;
            bool x_126968 = !cond_126967;
            int8_t defunc_0_f_res_126969;
            int8_t y_126971 = (int8_t) 0;
            
            for (int64_t i_126970 = 0; i_126970 < distance_126959; i_126970++) {
                int32_t binop_x_126972 = sext_i64_i32(i_126970);
                int32_t get_bit_arg0_126973 = add32(binop_x_126950, binop_x_126972);
                int32_t unsign_arg0_126974 = ashr32(i32_arg0_126964, get_bit_arg0_126973);
                int32_t unsign_arg0_126975 = 1 & unsign_arg0_126974;
                bool cond_f_res_126976 = get_bit_arg0_126973 == 31;
                bool y_126977 = x_126968 && cond_f_res_126976;
                bool cond_126978 = cond_126967 || y_126977;
                int32_t defunc_0_get_bit_res_126979;
                
                if (cond_126978) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ unsign_arg0_126975;
                    
                    defunc_0_get_bit_res_126979 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_126979 = unsign_arg0_126975;
                }
                
                int8_t loopres_126981;
                
                if (futrts_set_bit_2464(ctx, &loopres_126981, binop_x_126972, y_126971, defunc_0_get_bit_res_126979) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_126981;
                
                y_126971 = y_tmp_140328;
            }
            defunc_0_f_res_126969 = y_126971;
            ((int8_t *) mem_139591)[i_139365] = defunc_0_f_res_126969;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_126986;
        int64_t offs_126989;
        
        if (memblock_set(ctx, &mem_param_139600, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_126989 = (int64_t) 0;
        for (int64_t i_126988 = 0; i_126988 < up_to_126982; i_126988++) {
            int32_t binop_x_126991 = sext_i64_i32(i_126988);
            int8_t index_primexp_126992 = zext_i32_i8(binop_x_126991);
            
            if (memblock_alloc(ctx, &mem_139602, bytes_139582, "mem_139602")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_71474; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139591)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_126992;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139600.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_126989, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139602.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_127017 = add64(offs_126989, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139602, "mem_139602") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_127017;
            
            if (memblock_set(ctx, &mem_param_139600, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_126989 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139611, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_126986 = offs_126989;
        if (memblock_alloc(ctx, &mem_139613, bytes_139656, "mem_139613")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139613.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_71474});
        if (memblock_alloc(ctx, &mem_139615, bytes_139658, "mem_139615")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {b_71475, (int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0, (int64_t []) {b_71475, (int64_t) 1}, (int64_t []) {n_71474, b_71475});
        
        bool partitioned_scatter_res_127024;
        int64_t partitioned_scatter_res_127027;
        bool loop_while_127028;
        int64_t p_127031;
        
        loop_while_127028 = loop_cond_126943;
        p_127031 = (int64_t) 0;
        while (loop_while_127028) {
            int64_t lower_bound_127032 = mul64(i16_res_126918, p_127031);
            int64_t min_arg1_127033 = add64(i16_res_126918, lower_bound_127032);
            int64_t min_res_127034 = smin64(n_71474, min_arg1_127033);
            int64_t j_m_i_127035 = sub64(min_res_127034, lower_bound_127032);
            bool empty_slice_127036 = j_m_i_127035 == (int64_t) 0;
            int64_t m_127037 = sub64(j_m_i_127035, (int64_t) 1);
            int64_t i_p_m_t_s_127038 = add64(lower_bound_127032, m_127037);
            bool zzero_leq_i_p_m_t_s_127039 = sle64((int64_t) 0, i_p_m_t_s_127038);
            bool i_p_m_t_s_leq_w_127040 = slt64(i_p_m_t_s_127038, n_71474);
            bool zzero_lte_i_127041 = sle64((int64_t) 0, lower_bound_127032);
            bool i_lte_j_127042 = sle64(lower_bound_127032, min_res_127034);
            bool y_127043 = i_p_m_t_s_leq_w_127040 && zzero_lte_i_127041;
            bool y_127044 = zzero_leq_i_p_m_t_s_127039 && y_127043;
            bool forwards_ok_127045 = i_lte_j_127042 && y_127044;
            bool ok_or_empty_127046 = empty_slice_127036 || forwards_ok_127045;
            bool index_certs_127047;
            
            if (!ok_or_empty_127046) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_127032, ":", (long long) min_res_127034, "] out of bounds for array of shape [", (long long) n_71474, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:53:58-60\n   #3  ftSMJ.fut:97:98-101\n   #4  ftRelational.fut:91:78-89\n   #5  ftRelational.fut:87:9-91:90\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139623 = (int64_t) 4 * j_m_i_127035;
            int64_t bytes_139625 = b_71475 * j_m_i_127035;
            
            if (mem_139624_cached_sizze_140918 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140918, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139613.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_127032, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127035});
            if (mem_139626_cached_sizze_140919 < bytes_139625) {
                err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140919, bytes_139625);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_71475, (int64_t) 1}, (uint8_t *) mem_139615.mem, (int64_t) 0 + b_71475 * lower_bound_127032, (int64_t []) {b_71475, (int64_t) 1}, (int64_t []) {j_m_i_127035, b_71475});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_71474; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139611.mem)[write_iter_139385];
                float write_iv_139389 = ((float *) mem_param_139586.mem)[write_iter_139385];
                
                lmad_copy_1b(ctx, 1, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0 + write_iter_139385 * b_71475, (int64_t []) {(int64_t) 1}, (int64_t []) {b_71475});
                
                bool cond_131948 = sle64(lower_bound_127032, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_127034);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_127032);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127035)) {
                    ((float *) mem_139624)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if ((sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_127035)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_71475 - (int64_t) 1, b_71475))) {
                    lmad_copy_1b(ctx, 1, (uint8_t *) mem_139626, lifted_lambda_res_131951 * b_71475, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_71475});
                }
            }
            
            int64_t tmp_127059 = add64((int64_t) 1, p_127031);
            
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139613.mem, lower_bound_127032, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_127035});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, b_71475 * lower_bound_127032, (int64_t []) {b_71475, (int64_t) 1}, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_71475, (int64_t) 1}, (int64_t []) {j_m_i_127035, b_71475});
            
            bool loop_cond_127067 = slt64(tmp_127059, m_126942);
            bool loop_while_tmp_140335 = loop_cond_127067;
            int64_t p_tmp_140338 = tmp_127059;
            
            loop_while_127028 = loop_while_tmp_140335;
            p_127031 = p_tmp_140338;
        }
        partitioned_scatter_res_127024 = loop_while_127028;
        partitioned_scatter_res_127027 = p_127031;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139590, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139655, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139654, &mem_param_139590, "mem_param_139590") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139657, bytes_139656, "mem_139657")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139657.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139655.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_71474});
    if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139659, bytes_139658, "mem_139659")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139659.mem, (int64_t) 0, (int64_t []) {b_71475, (int64_t) 1}, (uint8_t *) ext_mem_139654.mem, (int64_t) 0, (int64_t []) {b_71475, (int64_t) 1}, (int64_t []) {n_71474, b_71475});
    if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139657, "mem_139657") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139659, "mem_139659") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140915, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140916, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139591);
        free(mem_139624);
        free(mem_139626);
        free(mem_139634);
        if (memblock_unref(ctx, &mem_139659, "mem_139659") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139657, "mem_139657") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139602, "mem_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139590, "mem_param_139590") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_int(struct futhark_context *ctx, struct memblock *mem_out_p_140921, struct memblock *mem_out_p_140922, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_69640, int64_t b_69641, int16_t block_sizze_69642)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139591_cached_sizze_140923 = 0;
    unsigned char *mem_139591 = NULL;
    int64_t mem_139624_cached_sizze_140924 = 0;
    unsigned char *mem_139624 = NULL;
    int64_t mem_139626_cached_sizze_140925 = 0;
    unsigned char *mem_139626 = NULL;
    int64_t mem_139634_cached_sizze_140926 = 0;
    unsigned char *mem_139634 = NULL;
    struct memblock mem_139659;
    
    mem_139659.references = NULL;
    
    struct memblock mem_139657;
    
    mem_139657.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_139613;
    
    mem_139613.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139602;
    
    mem_139602.references = NULL;
    
    struct memblock mem_param_139600;
    
    mem_param_139600.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock mem_param_139590;
    
    mem_param_139590.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139654;
    
    ext_mem_139654.references = NULL;
    
    struct memblock ext_mem_139655;
    
    ext_mem_139655.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_124586 = sext_i16_i64(block_sizze_69642);
    int64_t bytes_139582 = (int64_t) 8 * n_69640;
    bool zzero_124605 = i16_res_124586 == (int64_t) 0;
    bool nonzzero_124606 = !zzero_124605;
    bool nonzzero_cert_124609;
    
    if (!nonzzero_124606) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:81:81-92\n   #5  ftRelational.fut:77:9-81:93\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139656 = (int64_t) 4 * n_69640;
    int64_t bytes_139658 = n_69640 * b_69641;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_69640; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_124603 = add64(n_69640, i16_res_124586);
    int64_t zs_lhs_124604 = sub64(zm_lhs_124603, (int64_t) 1);
    int64_t m_124610 = sdiv_safe64(zs_lhs_124604, i16_res_124586);
    bool loop_cond_124611 = slt64((int64_t) 0, m_124610);
    
    if (mem_139591_cached_sizze_140923 < n_69640) {
        err = lexical_realloc(ctx, &mem_139591, &mem_139591_cached_sizze_140923, n_69640);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139634_cached_sizze_140926 < b_69641) {
        err = lexical_realloc(ctx, &mem_139634, &mem_139634_cached_sizze_140926, b_69641);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &k_mem_139580, "k_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139590, &pL_mem_139581, "pL_mem_139581") != 0)
        return 1;
    for (int64_t i_124614 = 0; i_124614 < (int64_t) 16; i_124614++) {
        int32_t binop_x_124617 = sext_i64_i32(i_124614);
        int32_t binop_x_124618 = mul32(2, binop_x_124617);
        int32_t zm_lhs_124619 = add32(2, binop_x_124618);
        int32_t min_arg1_124620 = sub32(zm_lhs_124619, 1);
        int32_t min_res_124621 = smin32(32, min_arg1_124620);
        int32_t zp_lhs_124622 = sub32(min_res_124621, binop_x_124618);
        int32_t ij_bits_124623 = add32(1, zp_lhs_124622);
        int32_t up_to_124624 = shl32(1, ij_bits_124623);
        int64_t tmp_124625 = sext_i32_i64(zp_lhs_124622);
        bool bounds_invalid_upwards_124626 = slt32(zp_lhs_124622, 0);
        bool valid_124628 = !bounds_invalid_upwards_124626;
        bool range_valid_c_124629;
        
        if (!valid_124628) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124625, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:32:58-60\n   #4  ftSMJ.fut:87:96-99\n   #5  ftRelational.fut:81:81-92\n   #6  ftRelational.fut:77:9-81:93\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_124642 = sext_i32_i64(up_to_124624);
        bool bounds_invalid_upwards_124643 = slt32(up_to_124624, 0);
        bool valid_124644 = !bounds_invalid_upwards_124643;
        bool range_valid_c_124645;
        
        if (!valid_124644) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124642, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:81:81-92\n   #5  ftRelational.fut:77:9-81:93\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_124627 = add64((int64_t) 1, tmp_124625);
        
        for (int64_t i_139365 = 0; i_139365 < n_69640; i_139365++) {
            int32_t eta_p_124631 = ((int32_t *) mem_param_139586.mem)[i_139365];
            int8_t defunc_0_f_res_124632;
            int8_t y_124634 = (int8_t) 0;
            
            for (int64_t i_124633 = 0; i_124633 < distance_124627; i_124633++) {
                int32_t binop_x_124635 = sext_i64_i32(i_124633);
                int32_t get_bit_arg0_124636 = add32(binop_x_124618, binop_x_124635);
                int32_t zgzg_res_130103 = ashr32(eta_p_124631, get_bit_arg0_124636);
                int32_t za_res_130104 = 1 & zgzg_res_130103;
                bool cond_124638 = get_bit_arg0_124636 == 31;
                int32_t defunc_0_get_bit_res_124639;
                
                if (cond_124638) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ za_res_130104;
                    
                    defunc_0_get_bit_res_124639 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_124639 = za_res_130104;
                }
                
                int8_t loopres_124641;
                
                if (futrts_set_bit_2464(ctx, &loopres_124641, binop_x_124635, y_124634, defunc_0_get_bit_res_124639) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_124641;
                
                y_124634 = y_tmp_140328;
            }
            defunc_0_f_res_124632 = y_124634;
            ((int8_t *) mem_139591)[i_139365] = defunc_0_f_res_124632;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_124646;
        int64_t offs_124649;
        
        if (memblock_set(ctx, &mem_param_139600, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_124649 = (int64_t) 0;
        for (int64_t i_124648 = 0; i_124648 < up_to_124642; i_124648++) {
            int32_t binop_x_124651 = sext_i64_i32(i_124648);
            int8_t index_primexp_124652 = zext_i32_i8(binop_x_124651);
            
            if (memblock_alloc(ctx, &mem_139602, bytes_139582, "mem_139602")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_69640; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139591)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_124652;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139600.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_124649, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139602.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_124677 = add64(offs_124649, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139602, "mem_139602") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_124677;
            
            if (memblock_set(ctx, &mem_param_139600, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_124649 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139611, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_124646 = offs_124649;
        if (memblock_alloc(ctx, &mem_139613, bytes_139656, "mem_139613")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_139613.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_69640});
        if (memblock_alloc(ctx, &mem_139615, bytes_139658, "mem_139615")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {b_69641, (int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0, (int64_t []) {b_69641, (int64_t) 1}, (int64_t []) {n_69640, b_69641});
        
        bool partitioned_scatter_res_124684;
        int64_t partitioned_scatter_res_124687;
        bool loop_while_124688;
        int64_t p_124691;
        
        loop_while_124688 = loop_cond_124611;
        p_124691 = (int64_t) 0;
        while (loop_while_124688) {
            int64_t lower_bound_124692 = mul64(i16_res_124586, p_124691);
            int64_t min_arg1_124693 = add64(i16_res_124586, lower_bound_124692);
            int64_t min_res_124694 = smin64(n_69640, min_arg1_124693);
            int64_t j_m_i_124695 = sub64(min_res_124694, lower_bound_124692);
            bool empty_slice_124696 = j_m_i_124695 == (int64_t) 0;
            int64_t m_124697 = sub64(j_m_i_124695, (int64_t) 1);
            int64_t i_p_m_t_s_124698 = add64(lower_bound_124692, m_124697);
            bool zzero_leq_i_p_m_t_s_124699 = sle64((int64_t) 0, i_p_m_t_s_124698);
            bool i_p_m_t_s_leq_w_124700 = slt64(i_p_m_t_s_124698, n_69640);
            bool zzero_lte_i_124701 = sle64((int64_t) 0, lower_bound_124692);
            bool i_lte_j_124702 = sle64(lower_bound_124692, min_res_124694);
            bool y_124703 = i_p_m_t_s_leq_w_124700 && zzero_lte_i_124701;
            bool y_124704 = zzero_leq_i_p_m_t_s_124699 && y_124703;
            bool forwards_ok_124705 = i_lte_j_124702 && y_124704;
            bool ok_or_empty_124706 = empty_slice_124696 || forwards_ok_124705;
            bool index_certs_124707;
            
            if (!ok_or_empty_124706) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124692, ":", (long long) min_res_124694, "] out of bounds for array of shape [", (long long) n_69640, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:81:81-92\n   #5  ftRelational.fut:77:9-81:93\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139623 = (int64_t) 4 * j_m_i_124695;
            int64_t bytes_139625 = b_69641 * j_m_i_124695;
            
            if (mem_139624_cached_sizze_140924 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140924, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139613.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124692, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124695});
            if (mem_139626_cached_sizze_140925 < bytes_139625) {
                err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140925, bytes_139625);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_69641, (int64_t) 1}, (uint8_t *) mem_139615.mem, (int64_t) 0 + b_69641 * lower_bound_124692, (int64_t []) {b_69641, (int64_t) 1}, (int64_t []) {j_m_i_124695, b_69641});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_69640; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139611.mem)[write_iter_139385];
                int32_t write_iv_139389 = ((int32_t *) mem_param_139586.mem)[write_iter_139385];
                
                lmad_copy_1b(ctx, 1, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0 + write_iter_139385 * b_69641, (int64_t []) {(int64_t) 1}, (int64_t []) {b_69641});
                
                bool cond_131948 = sle64(lower_bound_124692, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_124694);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_124692);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124695)) {
                    ((int32_t *) mem_139624)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if ((sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124695)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_69641 - (int64_t) 1, b_69641))) {
                    lmad_copy_1b(ctx, 1, (uint8_t *) mem_139626, lifted_lambda_res_131951 * b_69641, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_69641});
                }
            }
            
            int64_t tmp_124719 = add64((int64_t) 1, p_124691);
            
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_139613.mem, lower_bound_124692, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124695});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, b_69641 * lower_bound_124692, (int64_t []) {b_69641, (int64_t) 1}, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_69641, (int64_t) 1}, (int64_t []) {j_m_i_124695, b_69641});
            
            bool loop_cond_124727 = slt64(tmp_124719, m_124610);
            bool loop_while_tmp_140335 = loop_cond_124727;
            int64_t p_tmp_140338 = tmp_124719;
            
            loop_while_124688 = loop_while_tmp_140335;
            p_124691 = p_tmp_140338;
        }
        partitioned_scatter_res_124684 = loop_while_124688;
        partitioned_scatter_res_124687 = p_124691;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139590, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139655, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139654, &mem_param_139590, "mem_param_139590") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139657, bytes_139656, "mem_139657")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_139657.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_139655.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_69640});
    if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139659, bytes_139658, "mem_139659")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139659.mem, (int64_t) 0, (int64_t []) {b_69641, (int64_t) 1}, (uint8_t *) ext_mem_139654.mem, (int64_t) 0, (int64_t []) {b_69641, (int64_t) 1}, (int64_t []) {n_69640, b_69641});
    if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139657, "mem_139657") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139659, "mem_139659") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140921, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140922, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139591);
        free(mem_139624);
        free(mem_139626);
        free(mem_139634);
        if (memblock_unref(ctx, &mem_139659, "mem_139659") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139657, "mem_139657") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139602, "mem_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139590, "mem_param_139590") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_long(struct futhark_context *ctx, struct memblock *mem_out_p_140927, struct memblock *mem_out_p_140928, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_70528, int64_t b_70529, int16_t block_sizze_70530)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139591_cached_sizze_140929 = 0;
    unsigned char *mem_139591 = NULL;
    int64_t mem_139624_cached_sizze_140930 = 0;
    unsigned char *mem_139624 = NULL;
    int64_t mem_139626_cached_sizze_140931 = 0;
    unsigned char *mem_139626 = NULL;
    int64_t mem_139634_cached_sizze_140932 = 0;
    unsigned char *mem_139634 = NULL;
    struct memblock mem_139659;
    
    mem_139659.references = NULL;
    
    struct memblock mem_139657;
    
    mem_139657.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_139613;
    
    mem_139613.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139602;
    
    mem_139602.references = NULL;
    
    struct memblock mem_param_139600;
    
    mem_param_139600.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock mem_param_139590;
    
    mem_param_139590.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139654;
    
    ext_mem_139654.references = NULL;
    
    struct memblock ext_mem_139655;
    
    ext_mem_139655.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_124586 = sext_i16_i64(block_sizze_70530);
    int64_t bytes_139582 = (int64_t) 8 * n_70528;
    bool zzero_124605 = i16_res_124586 == (int64_t) 0;
    bool nonzzero_124606 = !zzero_124605;
    bool nonzzero_cert_124609;
    
    if (!nonzzero_124606) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:86:81-92\n   #5  ftRelational.fut:82:9-86:93\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139658 = n_70528 * b_70529;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_70528; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_124603 = add64(n_70528, i16_res_124586);
    int64_t zs_lhs_124604 = sub64(zm_lhs_124603, (int64_t) 1);
    int64_t m_124610 = sdiv_safe64(zs_lhs_124604, i16_res_124586);
    bool loop_cond_124611 = slt64((int64_t) 0, m_124610);
    
    if (mem_139591_cached_sizze_140929 < n_70528) {
        err = lexical_realloc(ctx, &mem_139591, &mem_139591_cached_sizze_140929, n_70528);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139634_cached_sizze_140932 < b_70529) {
        err = lexical_realloc(ctx, &mem_139634, &mem_139634_cached_sizze_140932, b_70529);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &k_mem_139580, "k_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139590, &pL_mem_139581, "pL_mem_139581") != 0)
        return 1;
    for (int64_t i_124614 = 0; i_124614 < (int64_t) 32; i_124614++) {
        int32_t binop_x_124617 = sext_i64_i32(i_124614);
        int32_t binop_x_124618 = mul32(2, binop_x_124617);
        int32_t zm_lhs_124619 = add32(2, binop_x_124618);
        int32_t min_arg1_124620 = sub32(zm_lhs_124619, 1);
        int32_t min_res_124621 = smin32(64, min_arg1_124620);
        int32_t zp_lhs_124622 = sub32(min_res_124621, binop_x_124618);
        int32_t ij_bits_124623 = add32(1, zp_lhs_124622);
        int32_t up_to_124624 = shl32(1, ij_bits_124623);
        int64_t tmp_124625 = sext_i32_i64(zp_lhs_124622);
        bool bounds_invalid_upwards_124626 = slt32(zp_lhs_124622, 0);
        bool valid_124628 = !bounds_invalid_upwards_124626;
        bool range_valid_c_124629;
        
        if (!valid_124628) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124625, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:32:58-60\n   #4  ftSMJ.fut:87:96-99\n   #5  ftRelational.fut:86:81-92\n   #6  ftRelational.fut:82:9-86:93\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_124642 = sext_i32_i64(up_to_124624);
        bool bounds_invalid_upwards_124643 = slt32(up_to_124624, 0);
        bool valid_124644 = !bounds_invalid_upwards_124643;
        bool range_valid_c_124645;
        
        if (!valid_124644) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124642, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:86:81-92\n   #5  ftRelational.fut:82:9-86:93\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_124627 = add64((int64_t) 1, tmp_124625);
        
        for (int64_t i_139365 = 0; i_139365 < n_70528; i_139365++) {
            int64_t eta_p_124631 = ((int64_t *) mem_param_139586.mem)[i_139365];
            int8_t defunc_0_f_res_124632;
            int8_t y_124634 = (int8_t) 0;
            
            for (int64_t i_124633 = 0; i_124633 < distance_124627; i_124633++) {
                int32_t binop_x_124635 = sext_i64_i32(i_124633);
                int32_t get_bit_arg0_124636 = add32(binop_x_124618, binop_x_124635);
                int32_t defunc_0_get_bit_res_124637;
                
                if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_124637, get_bit_arg0_124636, eta_p_124631) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                bool cond_124638 = get_bit_arg0_124636 == 63;
                int32_t defunc_0_get_bit_res_124639;
                
                if (cond_124638) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ defunc_0_get_bit_res_124637;
                    
                    defunc_0_get_bit_res_124639 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_124639 = defunc_0_get_bit_res_124637;
                }
                
                int8_t loopres_124641;
                
                if (futrts_set_bit_2464(ctx, &loopres_124641, binop_x_124635, y_124634, defunc_0_get_bit_res_124639) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_124641;
                
                y_124634 = y_tmp_140328;
            }
            defunc_0_f_res_124632 = y_124634;
            ((int8_t *) mem_139591)[i_139365] = defunc_0_f_res_124632;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_124646;
        int64_t offs_124649;
        
        if (memblock_set(ctx, &mem_param_139600, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_124649 = (int64_t) 0;
        for (int64_t i_124648 = 0; i_124648 < up_to_124642; i_124648++) {
            int32_t binop_x_124651 = sext_i64_i32(i_124648);
            int8_t index_primexp_124652 = zext_i32_i8(binop_x_124651);
            
            if (memblock_alloc(ctx, &mem_139602, bytes_139582, "mem_139602")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_70528; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139591)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_124652;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139600.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_124649, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139602.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_124677 = add64(offs_124649, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139602, "mem_139602") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_124677;
            
            if (memblock_set(ctx, &mem_param_139600, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_124649 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139611, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_124646 = offs_124649;
        if (memblock_alloc(ctx, &mem_139613, bytes_139582, "mem_139613")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139613.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_70528});
        if (memblock_alloc(ctx, &mem_139615, bytes_139658, "mem_139615")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {b_70529, (int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0, (int64_t []) {b_70529, (int64_t) 1}, (int64_t []) {n_70528, b_70529});
        
        bool partitioned_scatter_res_124684;
        int64_t partitioned_scatter_res_124687;
        bool loop_while_124688;
        int64_t p_124691;
        
        loop_while_124688 = loop_cond_124611;
        p_124691 = (int64_t) 0;
        while (loop_while_124688) {
            int64_t lower_bound_124692 = mul64(i16_res_124586, p_124691);
            int64_t min_arg1_124693 = add64(i16_res_124586, lower_bound_124692);
            int64_t min_res_124694 = smin64(n_70528, min_arg1_124693);
            int64_t j_m_i_124695 = sub64(min_res_124694, lower_bound_124692);
            bool empty_slice_124696 = j_m_i_124695 == (int64_t) 0;
            int64_t m_124697 = sub64(j_m_i_124695, (int64_t) 1);
            int64_t i_p_m_t_s_124698 = add64(lower_bound_124692, m_124697);
            bool zzero_leq_i_p_m_t_s_124699 = sle64((int64_t) 0, i_p_m_t_s_124698);
            bool i_p_m_t_s_leq_w_124700 = slt64(i_p_m_t_s_124698, n_70528);
            bool zzero_lte_i_124701 = sle64((int64_t) 0, lower_bound_124692);
            bool i_lte_j_124702 = sle64(lower_bound_124692, min_res_124694);
            bool y_124703 = i_p_m_t_s_leq_w_124700 && zzero_lte_i_124701;
            bool y_124704 = zzero_leq_i_p_m_t_s_124699 && y_124703;
            bool forwards_ok_124705 = i_lte_j_124702 && y_124704;
            bool ok_or_empty_124706 = empty_slice_124696 || forwards_ok_124705;
            bool index_certs_124707;
            
            if (!ok_or_empty_124706) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124692, ":", (long long) min_res_124694, "] out of bounds for array of shape [", (long long) n_70528, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:86:81-92\n   #5  ftRelational.fut:82:9-86:93\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139623 = (int64_t) 8 * j_m_i_124695;
            int64_t bytes_139625 = b_70529 * j_m_i_124695;
            
            if (mem_139624_cached_sizze_140930 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140930, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139613.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124692, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124695});
            if (mem_139626_cached_sizze_140931 < bytes_139625) {
                err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140931, bytes_139625);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_70529, (int64_t) 1}, (uint8_t *) mem_139615.mem, (int64_t) 0 + b_70529 * lower_bound_124692, (int64_t []) {b_70529, (int64_t) 1}, (int64_t []) {j_m_i_124695, b_70529});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_70528; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139611.mem)[write_iter_139385];
                int64_t write_iv_139389 = ((int64_t *) mem_param_139586.mem)[write_iter_139385];
                
                lmad_copy_1b(ctx, 1, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0 + write_iter_139385 * b_70529, (int64_t []) {(int64_t) 1}, (int64_t []) {b_70529});
                
                bool cond_131948 = sle64(lower_bound_124692, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_124694);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_124692);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124695)) {
                    ((int64_t *) mem_139624)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if ((sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124695)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_70529 - (int64_t) 1, b_70529))) {
                    lmad_copy_1b(ctx, 1, (uint8_t *) mem_139626, lifted_lambda_res_131951 * b_70529, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_70529});
                }
            }
            
            int64_t tmp_124719 = add64((int64_t) 1, p_124691);
            
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_139613.mem, lower_bound_124692, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124695});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, b_70529 * lower_bound_124692, (int64_t []) {b_70529, (int64_t) 1}, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_70529, (int64_t) 1}, (int64_t []) {j_m_i_124695, b_70529});
            
            bool loop_cond_124727 = slt64(tmp_124719, m_124610);
            bool loop_while_tmp_140335 = loop_cond_124727;
            int64_t p_tmp_140338 = tmp_124719;
            
            loop_while_124688 = loop_while_tmp_140335;
            p_124691 = p_tmp_140338;
        }
        partitioned_scatter_res_124684 = loop_while_124688;
        partitioned_scatter_res_124687 = p_124691;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139590, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139655, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139654, &mem_param_139590, "mem_param_139590") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139657, bytes_139582, "mem_139657")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139657.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_139655.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_70528});
    if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139659, bytes_139658, "mem_139659")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139659.mem, (int64_t) 0, (int64_t []) {b_70529, (int64_t) 1}, (uint8_t *) ext_mem_139654.mem, (int64_t) 0, (int64_t []) {b_70529, (int64_t) 1}, (int64_t []) {n_70528, b_70529});
    if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139657, "mem_139657") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139659, "mem_139659") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140927, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140928, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139591);
        free(mem_139624);
        free(mem_139626);
        free(mem_139634);
        if (memblock_unref(ctx, &mem_139659, "mem_139659") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139657, "mem_139657") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139602, "mem_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139590, "mem_param_139590") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortRelation_short(struct futhark_context *ctx, struct memblock *mem_out_p_140933, struct memblock *mem_out_p_140934, struct memblock k_mem_139580, struct memblock pL_mem_139581, int64_t n_68746, int64_t b_68747, int16_t block_sizze_68748)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139591_cached_sizze_140935 = 0;
    unsigned char *mem_139591 = NULL;
    int64_t mem_139624_cached_sizze_140936 = 0;
    unsigned char *mem_139624 = NULL;
    int64_t mem_139626_cached_sizze_140937 = 0;
    unsigned char *mem_139626 = NULL;
    int64_t mem_139634_cached_sizze_140938 = 0;
    unsigned char *mem_139634 = NULL;
    struct memblock mem_139659;
    
    mem_139659.references = NULL;
    
    struct memblock mem_139657;
    
    mem_139657.references = NULL;
    
    struct memblock mem_param_tmp_140324;
    
    mem_param_tmp_140324.references = NULL;
    
    struct memblock mem_param_tmp_140323;
    
    mem_param_tmp_140323.references = NULL;
    
    struct memblock mem_139615;
    
    mem_139615.references = NULL;
    
    struct memblock mem_139613;
    
    mem_139613.references = NULL;
    
    struct memblock mem_param_tmp_140329;
    
    mem_param_tmp_140329.references = NULL;
    
    struct memblock mem_139602;
    
    mem_139602.references = NULL;
    
    struct memblock mem_param_139600;
    
    mem_param_139600.references = NULL;
    
    struct memblock ext_mem_139611;
    
    ext_mem_139611.references = NULL;
    
    struct memblock mem_param_139590;
    
    mem_param_139590.references = NULL;
    
    struct memblock mem_param_139586;
    
    mem_param_139586.references = NULL;
    
    struct memblock ext_mem_139654;
    
    ext_mem_139654.references = NULL;
    
    struct memblock ext_mem_139655;
    
    ext_mem_139655.references = NULL;
    
    struct memblock mem_139583;
    
    mem_139583.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t i16_res_124586 = sext_i16_i64(block_sizze_68748);
    int64_t bytes_139582 = (int64_t) 8 * n_68746;
    bool zzero_124605 = i16_res_124586 == (int64_t) 0;
    bool nonzzero_124606 = !zzero_124605;
    bool nonzzero_cert_124609;
    
    if (!nonzzero_124606) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:76:81-92\n   #5  ftRelational.fut:72:9-76:93\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139656 = (int64_t) 2 * n_68746;
    int64_t bytes_139658 = n_68746 * b_68747;
    
    if (memblock_alloc(ctx, &mem_139583, bytes_139582, "mem_139583")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140322 = 0; nest_i_140322 < n_68746; nest_i_140322++) {
        ((int64_t *) mem_139583.mem)[nest_i_140322] = (int64_t) 0;
    }
    
    int64_t zm_lhs_124603 = add64(n_68746, i16_res_124586);
    int64_t zs_lhs_124604 = sub64(zm_lhs_124603, (int64_t) 1);
    int64_t m_124610 = sdiv_safe64(zs_lhs_124604, i16_res_124586);
    bool loop_cond_124611 = slt64((int64_t) 0, m_124610);
    
    if (mem_139591_cached_sizze_140935 < n_68746) {
        err = lexical_realloc(ctx, &mem_139591, &mem_139591_cached_sizze_140935, n_68746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139634_cached_sizze_140938 < b_68747) {
        err = lexical_realloc(ctx, &mem_139634, &mem_139634_cached_sizze_140938, b_68747);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_139586, &k_mem_139580, "k_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_139590, &pL_mem_139581, "pL_mem_139581") != 0)
        return 1;
    for (int64_t i_124614 = 0; i_124614 < (int64_t) 8; i_124614++) {
        int32_t binop_x_124617 = sext_i64_i32(i_124614);
        int32_t binop_x_124618 = mul32(2, binop_x_124617);
        int32_t zm_lhs_124619 = add32(2, binop_x_124618);
        int32_t min_arg1_124620 = sub32(zm_lhs_124619, 1);
        int32_t min_res_124621 = smin32(16, min_arg1_124620);
        int32_t zp_lhs_124622 = sub32(min_res_124621, binop_x_124618);
        int32_t ij_bits_124623 = add32(1, zp_lhs_124622);
        int32_t up_to_124624 = shl32(1, ij_bits_124623);
        int64_t tmp_124625 = sext_i32_i64(zp_lhs_124622);
        bool bounds_invalid_upwards_124626 = slt32(zp_lhs_124622, 0);
        bool valid_124628 = !bounds_invalid_upwards_124626;
        bool range_valid_c_124629;
        
        if (!valid_124628) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_124625, " is invalid.", "-> #0  ftbasics.fut:150:17-26\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftSMJ.fut:18:86-88\n   #3  ftSMJ.fut:32:58-60\n   #4  ftSMJ.fut:87:96-99\n   #5  ftRelational.fut:76:81-92\n   #6  ftRelational.fut:72:9-76:93\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t up_to_124642 = sext_i32_i64(up_to_124624);
        bool bounds_invalid_upwards_124643 = slt32(up_to_124624, 0);
        bool valid_124644 = !bounds_invalid_upwards_124643;
        bool range_valid_c_124645;
        
        if (!valid_124644) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..<", (long long) up_to_124642, " is invalid.", "-> #0  ftbasics.fut:174:21-30\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:76:81-92\n   #5  ftRelational.fut:72:9-76:93\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t distance_124627 = add64((int64_t) 1, tmp_124625);
        
        for (int64_t i_139365 = 0; i_139365 < n_68746; i_139365++) {
            int16_t eta_p_124631 = ((int16_t *) mem_param_139586.mem)[i_139365];
            int8_t defunc_0_f_res_124632;
            int8_t y_124634 = (int8_t) 0;
            
            for (int64_t i_124633 = 0; i_124633 < distance_124627; i_124633++) {
                int32_t binop_x_124635 = sext_i64_i32(i_124633);
                int32_t get_bit_arg0_124636 = add32(binop_x_124618, binop_x_124635);
                int32_t defunc_0_get_bit_res_124637;
                
                if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_124637, get_bit_arg0_124636, eta_p_124631) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                bool cond_124638 = get_bit_arg0_124636 == 15;
                int32_t defunc_0_get_bit_res_124639;
                
                if (cond_124638) {
                    int32_t defunc_0_get_bit_res_t_res_131970 = 1 ^ defunc_0_get_bit_res_124637;
                    
                    defunc_0_get_bit_res_124639 = defunc_0_get_bit_res_t_res_131970;
                } else {
                    defunc_0_get_bit_res_124639 = defunc_0_get_bit_res_124637;
                }
                
                int8_t loopres_124641;
                
                if (futrts_set_bit_2464(ctx, &loopres_124641, binop_x_124635, y_124634, defunc_0_get_bit_res_124639) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int8_t y_tmp_140328 = loopres_124641;
                
                y_124634 = y_tmp_140328;
            }
            defunc_0_f_res_124632 = y_124634;
            ((int8_t *) mem_139591)[i_139365] = defunc_0_f_res_124632;
        }
        
        int64_t defunc_0_radix_sort_multistep_res_124646;
        int64_t offs_124649;
        
        if (memblock_set(ctx, &mem_param_139600, &mem_139583, "mem_139583") != 0)
            return 1;
        offs_124649 = (int64_t) 0;
        for (int64_t i_124648 = 0; i_124648 < up_to_124642; i_124648++) {
            int32_t binop_x_124651 = sext_i64_i32(i_124648);
            int8_t index_primexp_124652 = zext_i32_i8(binop_x_124651);
            
            if (memblock_alloc(ctx, &mem_139602, bytes_139582, "mem_139602")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t inpacc_131975;
            int64_t defunc_0_reduce_res_131976;
            int64_t inpacc_131856;
            int64_t inpacc_131857;
            
            inpacc_131856 = (int64_t) 0;
            inpacc_131857 = (int64_t) 0;
            for (int64_t i_139383 = 0; i_139383 < n_68746; i_139383++) {
                int8_t eta_p_139551 = ((int8_t *) mem_139591)[i_139383];
                bool lifted_lambda_res_139552 = eta_p_139551 == index_primexp_124652;
                int64_t bool_res_139553 = btoi_bool_i64(lifted_lambda_res_139552);
                int64_t eta_p_139566 = ((int64_t *) mem_param_139600.mem)[i_139383];
                int64_t defunc_0_op_res_139567 = add64(inpacc_131856, bool_res_139553);
                int64_t zm_lhs_139568 = add64(offs_124649, defunc_0_op_res_139567);
                int64_t lifted_lambda_res_139569 = sub64(zm_lhs_139568, (int64_t) 1);
                int64_t defunc_0_f_res_139570 = mul64(bool_res_139553, lifted_lambda_res_139569);
                int64_t defunc_0_f_res_139571 = add64(eta_p_139566, defunc_0_f_res_139570);
                int64_t defunc_0_op_res_131905 = add64(inpacc_131857, bool_res_139553);
                
                ((int64_t *) mem_139602.mem)[i_139383] = defunc_0_f_res_139571;
                
                int64_t inpacc_tmp_140332 = defunc_0_op_res_139567;
                int64_t inpacc_tmp_140333 = defunc_0_op_res_131905;
                
                inpacc_131856 = inpacc_tmp_140332;
                inpacc_131857 = inpacc_tmp_140333;
            }
            inpacc_131975 = inpacc_131856;
            defunc_0_reduce_res_131976 = inpacc_131857;
            
            int64_t tmp_124677 = add64(offs_124649, defunc_0_reduce_res_131976);
            
            if (memblock_set(ctx, &mem_param_tmp_140329, &mem_139602, "mem_139602") != 0)
                return 1;
            
            int64_t offs_tmp_140330 = tmp_124677;
            
            if (memblock_set(ctx, &mem_param_139600, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
                return 1;
            offs_124649 = offs_tmp_140330;
        }
        if (memblock_set(ctx, &ext_mem_139611, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        defunc_0_radix_sort_multistep_res_124646 = offs_124649;
        if (memblock_alloc(ctx, &mem_139613, bytes_139656, "mem_139613")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_139613.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_param_139586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_68746});
        if (memblock_alloc(ctx, &mem_139615, bytes_139658, "mem_139615")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, (int64_t) 0, (int64_t []) {b_68747, (int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0, (int64_t []) {b_68747, (int64_t) 1}, (int64_t []) {n_68746, b_68747});
        
        bool partitioned_scatter_res_124684;
        int64_t partitioned_scatter_res_124687;
        bool loop_while_124688;
        int64_t p_124691;
        
        loop_while_124688 = loop_cond_124611;
        p_124691 = (int64_t) 0;
        while (loop_while_124688) {
            int64_t lower_bound_124692 = mul64(i16_res_124586, p_124691);
            int64_t min_arg1_124693 = add64(i16_res_124586, lower_bound_124692);
            int64_t min_res_124694 = smin64(n_68746, min_arg1_124693);
            int64_t j_m_i_124695 = sub64(min_res_124694, lower_bound_124692);
            bool empty_slice_124696 = j_m_i_124695 == (int64_t) 0;
            int64_t m_124697 = sub64(j_m_i_124695, (int64_t) 1);
            int64_t i_p_m_t_s_124698 = add64(lower_bound_124692, m_124697);
            bool zzero_leq_i_p_m_t_s_124699 = sle64((int64_t) 0, i_p_m_t_s_124698);
            bool i_p_m_t_s_leq_w_124700 = slt64(i_p_m_t_s_124698, n_68746);
            bool zzero_lte_i_124701 = sle64((int64_t) 0, lower_bound_124692);
            bool i_lte_j_124702 = sle64(lower_bound_124692, min_res_124694);
            bool y_124703 = i_p_m_t_s_leq_w_124700 && zzero_lte_i_124701;
            bool y_124704 = zzero_leq_i_p_m_t_s_124699 && y_124703;
            bool forwards_ok_124705 = i_lte_j_124702 && y_124704;
            bool ok_or_empty_124706 = empty_slice_124696 || forwards_ok_124705;
            bool index_certs_124707;
            
            if (!ok_or_empty_124706) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_124692, ":", (long long) min_res_124694, "] out of bounds for array of shape [", (long long) n_68746, "].", "-> #0  ftbasics.fut:72:25-56\n   #1  ftSMJ.fut:18:86-88\n   #2  ftSMJ.fut:32:58-60\n   #3  ftSMJ.fut:87:96-99\n   #4  ftRelational.fut:76:81-92\n   #5  ftRelational.fut:72:9-76:93\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_139623 = (int64_t) 2 * j_m_i_124695;
            int64_t bytes_139625 = b_68747 * j_m_i_124695;
            
            if (mem_139624_cached_sizze_140936 < bytes_139623) {
                err = lexical_realloc(ctx, &mem_139624, &mem_139624_cached_sizze_140936, bytes_139623);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139613.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_124692, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124695});
            if (mem_139626_cached_sizze_140937 < bytes_139625) {
                err = lexical_realloc(ctx, &mem_139626, &mem_139626_cached_sizze_140937, bytes_139625);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_68747, (int64_t) 1}, (uint8_t *) mem_139615.mem, (int64_t) 0 + b_68747 * lower_bound_124692, (int64_t []) {b_68747, (int64_t) 1}, (int64_t []) {j_m_i_124695, b_68747});
            for (int64_t write_iter_139385 = 0; write_iter_139385 < n_68746; write_iter_139385++) {
                int64_t write_iv_139388 = ((int64_t *) ext_mem_139611.mem)[write_iter_139385];
                int16_t write_iv_139389 = ((int16_t *) mem_param_139586.mem)[write_iter_139385];
                
                lmad_copy_1b(ctx, 1, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_param_139590.mem, (int64_t) 0 + write_iter_139385 * b_68747, (int64_t []) {(int64_t) 1}, (int64_t []) {b_68747});
                
                bool cond_131948 = sle64(lower_bound_124692, write_iv_139388);
                bool cond_t_res_131949 = slt64(write_iv_139388, min_res_124694);
                bool x_131950 = cond_131948 && cond_t_res_131949;
                int64_t lifted_lambda_res_131951;
                
                if (x_131950) {
                    int64_t lifted_lambda_res_t_res_131978 = sub64(write_iv_139388, lower_bound_124692);
                    
                    lifted_lambda_res_131951 = lifted_lambda_res_t_res_131978;
                } else {
                    lifted_lambda_res_131951 = (int64_t) -1;
                }
                if (sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124695)) {
                    ((int16_t *) mem_139624)[lifted_lambda_res_131951] = write_iv_139389;
                }
                if ((sle64((int64_t) 0, lifted_lambda_res_131951) && slt64(lifted_lambda_res_131951, j_m_i_124695)) && (sle64((int64_t) 0, (int64_t) 0) && slt64(b_68747 - (int64_t) 1, b_68747))) {
                    lmad_copy_1b(ctx, 1, (uint8_t *) mem_139626, lifted_lambda_res_131951 * b_68747, (int64_t []) {(int64_t) 1}, (uint8_t *) mem_139634, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {b_68747});
                }
            }
            
            int64_t tmp_124719 = add64((int64_t) 1, p_124691);
            
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_139613.mem, lower_bound_124692, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_139624, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_124695});
            lmad_copy_1b(ctx, 2, (uint8_t *) mem_139615.mem, b_68747 * lower_bound_124692, (int64_t []) {b_68747, (int64_t) 1}, (uint8_t *) mem_139626, (int64_t) 0, (int64_t []) {b_68747, (int64_t) 1}, (int64_t []) {j_m_i_124695, b_68747});
            
            bool loop_cond_124727 = slt64(tmp_124719, m_124610);
            bool loop_while_tmp_140335 = loop_cond_124727;
            int64_t p_tmp_140338 = tmp_124719;
            
            loop_while_124688 = loop_while_tmp_140335;
            p_124691 = p_tmp_140338;
        }
        partitioned_scatter_res_124684 = loop_while_124688;
        partitioned_scatter_res_124687 = p_124691;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140323, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_140324, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139586, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_139590, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_139655, &mem_param_139586, "mem_param_139586") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_139654, &mem_param_139590, "mem_param_139590") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139657, bytes_139656, "mem_139657")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_139657.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_139655.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_68746});
    if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_139659, bytes_139658, "mem_139659")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_1b(ctx, 2, (uint8_t *) mem_139659.mem, (int64_t) 0, (int64_t []) {b_68747, (int64_t) 1}, (uint8_t *) ext_mem_139654.mem, (int64_t) 0, (int64_t []) {b_68747, (int64_t) 1}, (int64_t []) {n_68746, b_68747});
    if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140320, &mem_139657, "mem_139657") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139659, "mem_139659") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140933, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140934, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139591);
        free(mem_139624);
        free(mem_139626);
        free(mem_139634);
        if (memblock_unref(ctx, &mem_139659, "mem_139659") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139657, "mem_139657") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140324, "mem_param_tmp_140324") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140323, "mem_param_tmp_140323") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139615, "mem_139615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139613, "mem_139613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_140329, "mem_param_tmp_140329") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139602, "mem_139602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139600, "mem_param_139600") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139611, "ext_mem_139611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139590, "mem_param_139590") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_139586, "mem_param_139586") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139654, "ext_mem_139654") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_139655, "ext_mem_139655") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139583, "mem_139583") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_getPartitionBounds_11848(struct futhark_context *ctx, struct memblock *mem_out_p_140939, struct memblock *mem_out_p_140940, int64_t *out_prim_out_140941, int64_t *out_prim_out_140942, int32_t *out_prim_out_140943, struct memblock pXs_mem_139580, int64_t n_113564, int64_t b_113565, int32_t curDepth_113566, int32_t i_113568, int32_t j_113569)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139582_cached_sizze_140944 = 0;
    unsigned char *mem_139582 = NULL;
    int64_t mem_139584_cached_sizze_140945 = 0;
    unsigned char *mem_139584 = NULL;
    int64_t mem_139591_cached_sizze_140946 = 0;
    unsigned char *mem_139591 = NULL;
    int64_t mem_139592_cached_sizze_140947 = 0;
    unsigned char *mem_139592 = NULL;
    int64_t mem_139612_cached_sizze_140948 = 0;
    unsigned char *mem_139612 = NULL;
    struct memblock mem_139623;
    
    mem_139623.references = NULL;
    
    struct memblock mem_139621;
    
    mem_139621.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t prim_out_140322;
    int64_t prim_out_140323;
    int32_t prim_out_140324;
    int64_t dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570 = sub64(n_113564, (int64_t) 1);
    bool bounds_invalid_upwards_113574 = slt64(n_113564, (int64_t) 1);
    bool valid_113579 = !bounds_invalid_upwards_113574;
    bool range_valid_c_113580;
    
    if (!valid_113579) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) n_113564, " is invalid.", "-> #0  ftHashJoin.fut:216:23-28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zm_lhs_130119 = mul64((int64_t) 8, b_113565);
    int64_t min_arg1_130120 = sub64(zm_lhs_130119, (int64_t) 1);
    int32_t i64_res_130105 = sext_i64_i32(b_113565);
    int32_t zm_lhs_130106 = mul32(8, i64_res_130105);
    int32_t min_arg1_130107 = sub32(zm_lhs_130106, 1);
    int32_t min_res_130108 = smin32(j_113569, min_arg1_130107);
    int32_t zm_rhs_130115 = sdiv32(min_res_130108, 8);
    int32_t zm_lhs_130116 = sub32(i64_res_130105, zm_rhs_130115);
    int32_t i32_arg0_130117 = sub32(zm_lhs_130116, 1);
    int64_t i32_res_130118 = sext_i32_i64(i32_arg0_130117);
    int64_t min_res_130121 = smin64(i32_res_130118, min_arg1_130120);
    bool y_130150 = slt64(min_res_130121, b_113565);
    bool x_130149 = sle64((int64_t) 0, min_res_130121);
    bool bounds_check_130151 = x_130149 && y_130150;
    bool index_certs_130152;
    
    if (!bounds_check_130151) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) min_res_130121, "] out of bounds for array of shape [", (long long) b_113565, "].", "-> #0  ftHashJoin.fut:32:38-54\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int32_t zm_rhs_130110 = sdiv32(i_113568, 8);
    int32_t zm_lhs_130111 = sub32(i64_res_130105, zm_rhs_130110);
    int32_t i32_arg0_130112 = sub32(zm_lhs_130111, 1);
    int64_t i32_res_130113 = sext_i32_i64(i32_arg0_130112);
    bool y_130139 = slt64(i32_res_130113, b_113565);
    bool x_130138 = sle64((int64_t) 0, i32_res_130113);
    bool bounds_check_130140 = x_130138 && y_130139;
    bool index_certs_130141;
    
    if (!bounds_check_130140) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_130113, "] out of bounds for array of shape [", (long long) b_113565, "].", "-> #0  ftHashJoin.fut:31:48-64\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int32_t lastBit_130123 = smod32(min_res_130108, 8);
    int32_t zm_lhs_130126 = sub32(8, lastBit_130123);
    int32_t i32_arg0_130127 = sub32(zm_lhs_130126, 1);
    int8_t unsign_arg0_130128 = zext_i32_i8(i32_arg0_130127);
    int8_t unsign_arg0_130129 = lshr8((int8_t) -1, unsign_arg0_130128);
    int32_t firstBit_130122 = smod32(i_113568, 8);
    int8_t unsign_arg0_130124 = zext_i32_i8(firstBit_130122);
    int8_t first_bitMask_130125 = shl8((int8_t) -1, unsign_arg0_130124);
    int64_t bytes_139581 = (int64_t) 8 * dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570;
    
    if (mem_139582_cached_sizze_140944 < bytes_139581) {
        err = lexical_realloc(ctx, &mem_139582, &mem_139582_cached_sizze_140944, bytes_139581);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139584_cached_sizze_140945 < bytes_139581) {
        err = lexical_realloc(ctx, &mem_139584, &mem_139584_cached_sizze_140945, bytes_139581);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139591_cached_sizze_140946 < b_113565) {
        err = lexical_realloc(ctx, &mem_139591, &mem_139591_cached_sizze_140946, b_113565);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_139592_cached_sizze_140947 < b_113565) {
        err = lexical_realloc(ctx, &mem_139592, &mem_139592_cached_sizze_140947, b_113565);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_139380;
    int64_t scanacc_139374 = (int64_t) 0;
    
    for (int64_t i_139377 = 0; i_139377 < dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570; i_139377++) {
        int64_t index_primexp_139551 = add64((int64_t) 1, i_139377);
        bool x_131729 = sle64((int64_t) 0, index_primexp_139551);
        bool y_131730 = slt64(index_primexp_139551, n_113564);
        bool bounds_check_131731 = x_131729 && y_131730;
        bool index_certs_131732;
        
        if (!bounds_check_131731) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) index_primexp_139551, "] out of bounds for array of shape [", (long long) n_113564, "].", "-> #0  ftHashJoin.fut:217:22-30\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:217:8-44\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool y_131736 = slt64(i_139377, n_113564);
        bool index_certs_131738;
        
        if (!y_131736) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_139377, "] out of bounds for array of shape [", (long long) n_113564, "].", "-> #0  ftHashJoin.fut:217:32-42\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftHashJoin.fut:217:8-44\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        for (int64_t i_139367 = 0; i_139367 < b_113565; i_139367++) {
            int8_t eta_p_131790 = ((int8_t *) pXs_mem_139580.mem)[index_primexp_139551 * b_113565 + i_139367];
            int8_t eta_p_131791 = ((int8_t *) pXs_mem_139580.mem)[i_139377 * b_113565 + i_139367];
            bool cond_131793 = sle64(i_139367, i32_res_130113);
            bool cond_t_res_131794 = sle64(min_res_130121, i_139367);
            bool x_131795 = cond_131793 && cond_t_res_131794;
            int8_t lifted_lambda_res_131796;
            
            if (x_131795) {
                lifted_lambda_res_131796 = eta_p_131790;
            } else {
                lifted_lambda_res_131796 = (int8_t) 0;
            }
            
            int8_t lifted_lambda_res_131801;
            
            if (x_131795) {
                lifted_lambda_res_131801 = eta_p_131791;
            } else {
                lifted_lambda_res_131801 = (int8_t) 0;
            }
            ((int8_t *) mem_139591)[i_139367] = lifted_lambda_res_131801;
            ((int8_t *) mem_139592)[i_139367] = lifted_lambda_res_131796;
        }
        
        int8_t za_lhs_131749 = ((int8_t *) mem_139592)[i32_res_130113];
        int8_t mod1_x_131750 = first_bitMask_130125 & za_lhs_131749;
        
        ((int8_t *) mem_139592)[i32_res_130113] = mod1_x_131750;
        
        int8_t za_lhs_131752 = ((int8_t *) mem_139592)[min_res_130121];
        int8_t tmp_131753 = unsign_arg0_130129 & za_lhs_131752;
        
        ((int8_t *) mem_139592)[min_res_130121] = tmp_131753;
        
        int8_t za_lhs_131762 = ((int8_t *) mem_139591)[i32_res_130113];
        int8_t mod1_x_131763 = first_bitMask_130125 & za_lhs_131762;
        
        ((int8_t *) mem_139591)[i32_res_130113] = mod1_x_131763;
        
        int8_t za_lhs_131765 = ((int8_t *) mem_139591)[min_res_130121];
        int8_t tmp_131766 = unsign_arg0_130129 & za_lhs_131765;
        
        ((int8_t *) mem_139591)[min_res_130121] = tmp_131766;
        
        bool defunc_0_reduce_res_131813;
        bool redout_139370 = 0;
        
        for (int64_t i_139371 = 0; i_139371 < b_113565; i_139371++) {
            int8_t eta_p_131783 = ((int8_t *) mem_139592)[i_139371];
            int8_t eta_p_131784 = ((int8_t *) mem_139591)[i_139371];
            bool lifted_lambda_res_131785 = eta_p_131783 == eta_p_131784;
            bool lifted_lambda_res_131786 = !lifted_lambda_res_131785;
            bool defunc_0_op_res_131779 = lifted_lambda_res_131786 || redout_139370;
            bool redout_tmp_140330 = defunc_0_op_res_131779;
            
            redout_139370 = redout_tmp_140330;
        }
        defunc_0_reduce_res_131813 = redout_139370;
        
        int64_t defunc_0_f_res_131780 = btoi_bool_i64(defunc_0_reduce_res_131813);
        int64_t defunc_0_op_res_123936 = add64(defunc_0_f_res_131780, scanacc_139374);
        
        ((int64_t *) mem_139582)[i_139377] = defunc_0_op_res_123936;
        ((int64_t *) mem_139584)[i_139377] = defunc_0_f_res_131780;
        
        int64_t scanacc_tmp_140325 = defunc_0_op_res_123936;
        
        scanacc_139374 = scanacc_tmp_140325;
    }
    discard_139380 = scanacc_139374;
    
    bool cond_123937 = dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570 == (int64_t) 0;
    bool x_123938 = !cond_123937;
    int64_t tmp_123939 = sub64(dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570, (int64_t) 1);
    bool x_123940 = sle64((int64_t) 0, tmp_123939);
    bool y_123941 = slt64(tmp_123939, dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570);
    bool bounds_check_123942 = x_123940 && y_123941;
    bool protect_assert_disj_123943 = cond_123937 || bounds_check_123942;
    bool index_certs_123944;
    
    if (!protect_assert_disj_123943) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_123939, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570, "].", "-> #0  /prelude/soacs.fut:257:33-47\n   #1  /prelude/functional.fut:9:44-45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t m_f_res_123945;
    
    if (x_123938) {
        int64_t x_131814 = ((int64_t *) mem_139582)[tmp_123939];
        
        m_f_res_123945 = x_131814;
    } else {
        m_f_res_123945 = (int64_t) 0;
    }
    
    int64_t m_123947;
    
    if (cond_123937) {
        m_123947 = (int64_t) 0;
    } else {
        m_123947 = m_f_res_123945;
    }
    
    int64_t m_123957 = sub64(m_123947, (int64_t) 1);
    bool i_p_m_t_s_leq_w_123959 = slt64(m_123957, dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570);
    bool zzero_leq_i_p_m_t_s_123958 = sle64((int64_t) 0, m_123957);
    bool y_123961 = zzero_leq_i_p_m_t_s_123958 && i_p_m_t_s_leq_w_123959;
    bool i_lte_j_123960 = sle64((int64_t) 0, m_123947);
    bool forwards_ok_123962 = i_lte_j_123960 && y_123961;
    bool eq_x_zz_123954 = (int64_t) 0 == m_f_res_123945;
    bool p_and_eq_x_y_123955 = x_123938 && eq_x_zz_123954;
    bool empty_slice_123956 = cond_123937 || p_and_eq_x_y_123955;
    bool ok_or_empty_123963 = empty_slice_123956 || forwards_ok_123962;
    bool index_certs_123964;
    
    if (!ok_or_empty_123963) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) m_123947, "] out of bounds for array of shape [", (long long) dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570, "].", "-> #0  /prelude/soacs.fut:258:29-35\n   #1  /prelude/functional.fut:9:44-45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139611 = (int64_t) 8 * m_123947;
    int64_t conc_tmp_120075 = (int64_t) 1 + m_123947;
    int64_t bytes_139620 = (int64_t) 8 * conc_tmp_120075;
    int64_t bytes_139622 = (int64_t) 4 * conc_tmp_120075;
    
    if (mem_139612_cached_sizze_140948 < bytes_139611) {
        err = lexical_realloc(ctx, &mem_139612, &mem_139612_cached_sizze_140948, bytes_139611);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_140331 = 0; i_140331 < m_123947; i_140331++) {
        int64_t x_140332 = (int64_t) 1 + i_140331 * (int64_t) 1;
        
        ((int64_t *) mem_139612)[i_140331] = x_140332;
    }
    for (int64_t write_iter_139381 = 0; write_iter_139381 < dzlz7bUZLzmZRz20Unz20U1z7dUzg_113570; write_iter_139381++) {
        int64_t write_iv_139383 = ((int64_t *) mem_139584)[write_iter_139381];
        int64_t write_iv_139384 = ((int64_t *) mem_139582)[write_iter_139381];
        int64_t index_primexp_139547 = add64((int64_t) 1, write_iter_139381);
        bool cond_131663 = write_iv_139383 == (int64_t) 1;
        int64_t lifted_lambda_res_131664;
        
        if (cond_131663) {
            int64_t lifted_lambda_res_t_res_131815 = sub64(write_iv_139384, (int64_t) 1);
            
            lifted_lambda_res_131664 = lifted_lambda_res_t_res_131815;
        } else {
            lifted_lambda_res_131664 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, lifted_lambda_res_131664) && slt64(lifted_lambda_res_131664, m_123947)) {
            ((int64_t *) mem_139612)[lifted_lambda_res_131664] = index_primexp_139547;
        }
    }
    if (memblock_alloc(ctx, &mem_139621, bytes_139620, "mem_139621")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140334 = 0; nest_i_140334 < (int64_t) 1; nest_i_140334++) {
        ((int64_t *) mem_139621.mem)[nest_i_140334] = (int64_t) 0;
    }
    
    int64_t tmp_offs_140335 = (int64_t) 0;
    
    if (!(tmp_offs_140335 == (int64_t) 0)) {
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139621.mem, tmp_offs_140335, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139621.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 1});
    }
    tmp_offs_140335 += (int64_t) 1;
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_139621.mem, tmp_offs_140335, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139612, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {m_123947});
    tmp_offs_140335 += m_123947;
    if (memblock_alloc(ctx, &mem_139623, bytes_139622, "mem_139623")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_140336 = 0; nest_i_140336 < conc_tmp_120075; nest_i_140336++) {
        ((int32_t *) mem_139623.mem)[nest_i_140336] = curDepth_113566;
    }
    if (memblock_set(ctx, &mem_out_140320, &mem_139621, "mem_139621") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_140321, &mem_139623, "mem_139623") != 0)
        return 1;
    prim_out_140322 = conc_tmp_120075;
    prim_out_140323 = conc_tmp_120075;
    prim_out_140324 = curDepth_113566;
    if (memblock_set(ctx, &*mem_out_p_140939, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140940, &mem_out_140321, "mem_out_140321") != 0)
        return 1;
    *out_prim_out_140941 = prim_out_140322;
    *out_prim_out_140942 = prim_out_140323;
    *out_prim_out_140943 = prim_out_140324;
    
  cleanup:
    {
        free(mem_139582);
        free(mem_139584);
        free(mem_139591);
        free(mem_139592);
        free(mem_139612);
        if (memblock_unref(ctx, &mem_139623, "mem_139623") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_139621, "mem_139621") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140321, "mem_out_140321") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_get_bit_1844(struct futhark_context *ctx, int32_t *out_prim_out_140949, int32_t bit_68124, int16_t x_68125)
{
    (void) ctx;
    
    int err = 0;
    int32_t prim_out_140320;
    int16_t i32_res_119992 = sext_i32_i16(bit_68124);
    int16_t zgzg_res_119995 = ashr16(x_68125, i32_res_119992);
    int16_t za_res_120000 = (int16_t) 1 & zgzg_res_119995;
    int32_t to_i32_res_120002 = sext_i16_i32(za_res_120000);
    
    prim_out_140320 = to_i32_res_120002;
    *out_prim_out_140949 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_get_bit_2253(struct futhark_context *ctx, int32_t *out_prim_out_140950, int32_t bit_69906, int64_t x_69907)
{
    (void) ctx;
    
    int err = 0;
    int32_t prim_out_140320;
    int64_t i32_res_119992 = sext_i32_i64(bit_69906);
    int64_t zgzg_res_119995 = ashr64(x_69907, i32_res_119992);
    int64_t za_res_120000 = (int64_t) 1 & zgzg_res_119995;
    int32_t to_i32_res_120002 = sext_i64_i32(za_res_120000);
    
    prim_out_140320 = to_i32_res_120002;
    *out_prim_out_140950 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_greatest_divisor_leq_than_5357(struct futhark_context *ctx, int64_t *out_prim_out_140951, int64_t upper_bound_72453, int64_t n_72454)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    bool upper_bound_72455 = sle64((int64_t) 1, upper_bound_72453);
    bool assert_c_72457;
    
    if (!upper_bound_72455) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (upper_bound >= 1)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:189:21-58\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_72466 = slt64(upper_bound_72453, n_72454);
    bool d_72475;
    int64_t d_72476;
    bool loop_while_72477;
    int64_t d_72478;
    
    loop_while_72477 = cond_72466;
    d_72478 = (int64_t) 1;
    while (loop_while_72477) {
        int64_t loopres_72479 = add64((int64_t) 1, d_72478);
        bool zzero_72481 = loopres_72479 == (int64_t) 0;
        bool nonzzero_72482 = !zzero_72481;
        bool nonzzero_cert_72483;
        
        if (!nonzzero_72482) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:190:36-38\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zg_lhs_72484 = sdiv64(n_72454, loopres_72479);
        bool cond_72486 = slt64(upper_bound_72453, zg_lhs_72484);
        bool loop_cond_72487;
        
        if (cond_72486) {
            loop_cond_72487 = 1;
        } else {
            int64_t znze_lhs_72491 = smod64(n_72454, loopres_72479);
            bool loop_cond_f_res_72493 = znze_lhs_72491 == (int64_t) 0;
            bool loop_cond_f_res_72494 = !loop_cond_f_res_72493;
            
            loop_cond_72487 = loop_cond_f_res_72494;
        }
        
        bool loop_while_tmp_140321 = loop_cond_72487;
        int64_t d_tmp_140322 = loopres_72479;
        
        loop_while_72477 = loop_while_tmp_140321;
        d_72478 = d_tmp_140322;
    }
    d_72475 = loop_while_72477;
    d_72476 = d_72478;
    
    bool zzero_72496 = d_72476 == (int64_t) 0;
    bool nonzzero_72497 = !zzero_72496;
    bool nonzzero_cert_72498;
    
    if (!nonzzero_72497) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:191:7-9\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t greatest_divisor_leq_than_res_72499 = sdiv64(n_72454, d_72476);
    
    prim_out_140320 = greatest_divisor_leq_than_res_72499;
    *out_prim_out_140951 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11363(struct futhark_context *ctx, struct memblock *mem_out_p_140952, struct memblock nameless_mem_139580, int64_t n_84370, int64_t incr_84371)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t rng_84376 = add64(n_84370, incr_84371);
    bool bounds_invalid_upwards_84380 = slt64(rng_84376, incr_84371);
    bool valid_84385 = !bounds_invalid_upwards_84380;
    bool range_valid_c_84386;
    
    if (!valid_84385) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_84371, "..<", (long long) rng_84376, " is invalid.", "-> #0  ftbasics.fut:11:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139581 = (int64_t) 8 * n_84370;
    
    if (memblock_alloc(ctx, &mem_139582, bytes_139581, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140321 = 0; i_140321 < n_84370; i_140321++) {
        int64_t x_140322 = incr_84371 + i_140321 * (int64_t) 1;
        
        ((int64_t *) mem_139582.mem)[i_140321] = x_140322;
    }
    if (memblock_set(ctx, &mem_out_140320, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140952, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11384(struct futhark_context *ctx, struct memblock *mem_out_p_140953, struct memblock nameless_mem_139580, int64_t n_85238, int64_t incr_85239)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t rng_85244 = add64(n_85238, incr_85239);
    bool bounds_invalid_upwards_85248 = slt64(rng_85244, incr_85239);
    bool valid_85253 = !bounds_invalid_upwards_85248;
    bool range_valid_c_85254;
    
    if (!valid_85253) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_85239, "..<", (long long) rng_85244, " is invalid.", "-> #0  ftbasics.fut:11:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139581 = (int64_t) 8 * n_85238;
    
    if (memblock_alloc(ctx, &mem_139582, bytes_139581, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140321 = 0; i_140321 < n_85238; i_140321++) {
        int64_t x_140322 = incr_85239 + i_140321 * (int64_t) 1;
        
        ((int64_t *) mem_139582.mem)[i_140321] = x_140322;
    }
    if (memblock_set(ctx, &mem_out_140320, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140953, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11406(struct futhark_context *ctx, struct memblock *mem_out_p_140954, struct memblock nameless_mem_139580, int64_t n_86106, int64_t incr_86107)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t rng_86112 = add64(n_86106, incr_86107);
    bool bounds_invalid_upwards_86116 = slt64(rng_86112, incr_86107);
    bool valid_86121 = !bounds_invalid_upwards_86116;
    bool range_valid_c_86122;
    
    if (!valid_86121) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_86107, "..<", (long long) rng_86112, " is invalid.", "-> #0  ftbasics.fut:11:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139581 = (int64_t) 8 * n_86106;
    
    if (memblock_alloc(ctx, &mem_139582, bytes_139581, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140321 = 0; i_140321 < n_86106; i_140321++) {
        int64_t x_140322 = incr_86107 + i_140321 * (int64_t) 1;
        
        ((int64_t *) mem_139582.mem)[i_140321] = x_140322;
    }
    if (memblock_set(ctx, &mem_out_140320, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140954, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11428(struct futhark_context *ctx, struct memblock *mem_out_p_140955, struct memblock nameless_mem_139580, int64_t n_86974, int64_t incr_86975)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t rng_86980 = add64(n_86974, incr_86975);
    bool bounds_invalid_upwards_86984 = slt64(rng_86980, incr_86975);
    bool valid_86989 = !bounds_invalid_upwards_86984;
    bool range_valid_c_86990;
    
    if (!valid_86989) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_86975, "..<", (long long) rng_86980, " is invalid.", "-> #0  ftbasics.fut:11:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139581 = (int64_t) 8 * n_86974;
    
    if (memblock_alloc(ctx, &mem_139582, bytes_139581, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140321 = 0; i_140321 < n_86974; i_140321++) {
        int64_t x_140322 = incr_86975 + i_140321 * (int64_t) 1;
        
        ((int64_t *) mem_139582.mem)[i_140321] = x_140322;
    }
    if (memblock_set(ctx, &mem_out_140320, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140955, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_11449(struct futhark_context *ctx, struct memblock *mem_out_p_140956, struct memblock nameless_mem_139580, int64_t n_87863, int64_t incr_87864)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_139582;
    
    mem_139582.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    int64_t rng_87869 = add64(n_87863, incr_87864);
    bool bounds_invalid_upwards_87873 = slt64(rng_87869, incr_87864);
    bool valid_87878 = !bounds_invalid_upwards_87873;
    bool range_valid_c_87879;
    
    if (!valid_87878) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_87864, "..<", (long long) rng_87869, " is invalid.", "-> #0  ftbasics.fut:11:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_139581 = (int64_t) 8 * n_87863;
    
    if (memblock_alloc(ctx, &mem_139582, bytes_139581, "mem_139582")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_140321 = 0; i_140321 < n_87863; i_140321++) {
        int64_t x_140322 = incr_87864 + i_140321 * (int64_t) 1;
        
        ((int64_t *) mem_139582.mem)[i_140321] = x_140322;
    }
    if (memblock_set(ctx, &mem_out_140320, &mem_139582, "mem_139582") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140956, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_139582, "mem_139582") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_lifted_normalizze_10472(struct futhark_context *ctx, int64_t *out_prim_out_140957, int64_t *out_prim_out_140958, int64_t *out_prim_out_140959, int64_t *out_prim_out_140960, int64_t *out_prim_out_140961, int64_t slo_72683, int64_t shi_72684, int64_t tlo_72685, int64_t thi_72686, int64_t count_72687)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_140320;
    int64_t prim_out_140321;
    int64_t prim_out_140322;
    int64_t prim_out_140323;
    int64_t prim_out_140324;
    int64_t min_arg1_72690 = add64(slo_72683, count_72687);
    int64_t min_res_119993 = smin64(shi_72684, min_arg1_72690);
    int64_t min_arg1_72694 = add64(tlo_72685, count_72687);
    int64_t min_res_119996 = smin64(thi_72686, min_arg1_72694);
    int64_t zp_lhs_72698 = sub64(min_res_119993, slo_72683);
    int64_t zp_rhs_72700 = sub64(min_res_119996, tlo_72685);
    int64_t zm_lhs_72702 = add64(zp_lhs_72698, zp_rhs_72700);
    int64_t slack_72704 = sub64(zm_lhs_72702, count_72687);
    int64_t min_res_119999 = smin64(zp_lhs_72698, slack_72704);
    int64_t min_res_120002 = smin64(zp_rhs_72700, min_res_119999);
    int64_t max_arg1_72714 = sub64(min_res_119993, min_res_120002);
    int64_t max_res_120005 = smax64(slo_72683, max_arg1_72714);
    int64_t max_arg1_72718 = sub64(min_res_119996, min_res_120002);
    int64_t max_res_120008 = smax64(tlo_72685, max_arg1_72718);
    int64_t zm_rhs_72722 = sub64(max_res_120005, slo_72683);
    int64_t zm_lhs_72724 = sub64(count_72687, zm_rhs_72722);
    int64_t zm_rhs_72726 = sub64(max_res_120008, tlo_72685);
    int64_t count_72728 = sub64(zm_lhs_72724, zm_rhs_72726);
    
    prim_out_140320 = max_res_120005;
    prim_out_140321 = min_res_119993;
    prim_out_140322 = max_res_120008;
    prim_out_140323 = min_res_119996;
    prim_out_140324 = count_72728;
    *out_prim_out_140957 = prim_out_140320;
    *out_prim_out_140958 = prim_out_140321;
    *out_prim_out_140959 = prim_out_140322;
    *out_prim_out_140960 = prim_out_140323;
    *out_prim_out_140961 = prim_out_140324;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_partitioned_scatter_11958(struct futhark_context *ctx, struct memblock *mem_out_p_140962, struct memblock dest_mem_139580, struct memblock is_mem_139581, struct memblock vs_mem_139582, int64_t nd_116929, int64_t n_116930, int64_t psizze_116931)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_139587_cached_sizze_140963 = 0;
    unsigned char *mem_139587 = NULL;
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    bool zzero_116939 = psizze_116931 == (int64_t) 0;
    bool nonzzero_116940 = !zzero_116939;
    bool nonzzero_cert_116941;
    
    if (!nonzzero_116940) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftbasics.fut:66:23-29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zm_lhs_116935 = add64(nd_116929, psizze_116931);
    int64_t zs_lhs_116937 = sub64(zm_lhs_116935, (int64_t) 1);
    int64_t m_116942 = sdiv64(zs_lhs_116937, psizze_116931);
    bool loop_cond_116946 = slt64((int64_t) 0, m_116942);
    bool partitioned_scatter_res_116947;
    int64_t partitioned_scatter_res_116949;
    bool loop_while_116950;
    int64_t p_116952;
    
    loop_while_116950 = loop_cond_116946;
    p_116952 = (int64_t) 0;
    while (loop_while_116950) {
        int64_t lower_bound_116953 = mul64(psizze_116931, p_116952);
        int64_t min_arg1_116955 = add64(psizze_116931, lower_bound_116953);
        int64_t min_res_120137 = smin64(nd_116929, min_arg1_116955);
        int64_t j_m_i_116964 = sub64(min_res_120137, lower_bound_116953);
        bool empty_slice_116971 = j_m_i_116964 == (int64_t) 0;
        int64_t m_116972 = sub64(j_m_i_116964, (int64_t) 1);
        int64_t i_p_m_t_s_116974 = add64(lower_bound_116953, m_116972);
        bool zzero_leq_i_p_m_t_s_116975 = sle64((int64_t) 0, i_p_m_t_s_116974);
        bool i_p_m_t_s_leq_w_116977 = slt64(i_p_m_t_s_116974, nd_116929);
        bool zzero_lte_i_116978 = sle64((int64_t) 0, lower_bound_116953);
        bool i_lte_j_116979 = sle64(lower_bound_116953, min_res_120137);
        bool y_116980 = i_p_m_t_s_leq_w_116977 && zzero_lte_i_116978;
        bool y_116981 = zzero_leq_i_p_m_t_s_116975 && y_116980;
        bool forwards_ok_116982 = i_lte_j_116979 && y_116981;
        bool ok_or_empty_116989 = empty_slice_116971 || forwards_ok_116982;
        bool index_certs_116991;
        
        if (!ok_or_empty_116989) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lower_bound_116953, ":", (long long) min_res_120137, "] out of bounds for array of shape [", (long long) nd_116929, "].", "-> #0  ftbasics.fut:72:25-56\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bytes_139586 = (int64_t) 8 * j_m_i_116964;
        
        if (mem_139587_cached_sizze_140963 < bytes_139586) {
            err = lexical_realloc(ctx, &mem_139587, &mem_139587_cached_sizze_140963, bytes_139586);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_139587, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) dest_mem_139580.mem, (int64_t) 0 + (int64_t) 1 * lower_bound_116953, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_116964});
        for (int64_t write_iter_139363 = 0; write_iter_139363 < n_116930; write_iter_139363++) {
            int64_t write_iv_139365 = ((int64_t *) vs_mem_139582.mem)[write_iter_139363];
            int64_t write_iv_139366 = ((int64_t *) is_mem_139581.mem)[write_iter_139363];
            bool cond_131662 = sle64(lower_bound_116953, write_iv_139366);
            bool cond_t_res_131663 = slt64(write_iv_139366, min_res_120137);
            bool x_131664 = cond_131662 && cond_t_res_131663;
            int64_t lifted_lambda_res_131665;
            
            if (x_131664) {
                int64_t lifted_lambda_res_t_res_131671 = sub64(write_iv_139366, lower_bound_116953);
                
                lifted_lambda_res_131665 = lifted_lambda_res_t_res_131671;
            } else {
                lifted_lambda_res_131665 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, lifted_lambda_res_131665) && slt64(lifted_lambda_res_131665, j_m_i_116964)) {
                ((int64_t *) mem_139587)[lifted_lambda_res_131665] = write_iv_139365;
            }
        }
        
        int64_t tmp_117009 = add64((int64_t) 1, p_116952);
        
        lmad_copy_8b(ctx, 1, (uint64_t *) dest_mem_139580.mem, lower_bound_116953, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_139587, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {j_m_i_116964});
        
        bool loop_cond_117054 = slt64(tmp_117009, m_116942);
        bool loop_while_tmp_140321 = loop_cond_117054;
        int64_t p_tmp_140323 = tmp_117009;
        
        loop_while_116950 = loop_while_tmp_140321;
        p_116952 = p_tmp_140323;
    }
    partitioned_scatter_res_116947 = loop_while_116950;
    partitioned_scatter_res_116949 = p_116952;
    if (memblock_set(ctx, &mem_out_140320, &dest_mem_139580, "dest_mem_139580") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_140962, &mem_out_140320, "mem_out_140320") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_139587);
        if (memblock_unref(ctx, &mem_out_140320, "mem_out_140320") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_set_bit_2464(struct futhark_context *ctx, int8_t *out_prim_out_140964, int32_t bit_67818, int8_t x_67819, int32_t b_67820)
{
    (void) ctx;
    
    int err = 0;
    int8_t prim_out_140320;
    int32_t i32_arg0_67821 = shl32(1, bit_67818);
    int32_t i32_arg_67823 = ~i32_arg0_67821;
    int8_t unsign_arg0_120136 = zext_i32_i8(i32_arg_67823);
    int8_t unsign_arg0_130103 = x_67819 & unsign_arg0_120136;
    int32_t i32_arg0_67828 = shl32(b_67820, bit_67818);
    int8_t unsign_arg0_120138 = zext_i32_i8(i32_arg0_67828);
    int8_t unsign_arg0_120141 = unsign_arg0_120138 | unsign_arg0_130103;
    
    prim_out_140320 = unsign_arg0_120141;
    *out_prim_out_140964 = prim_out_140320;
    
  cleanup:
    { }
    return err;
}

int futhark_entry_Inner_Radix_Hash_Join(struct futhark_context *ctx, struct futhark_opaque_joinPairs_bsq **out0, const int32_t in0, const struct futhark_u8_2d *in1, const struct futhark_u8_2d *in2, const struct futhark_opaque_partitionInfo *in3, const struct futhark_opaque_partitionInfo *in4, const struct futhark_opaque_radix_hashTable *in5, const int64_t in6)
{
    int64_t nR_119920 = (int64_t) 0;
    int64_t b_119921 = (int64_t) 0;
    int64_t nS_119922 = (int64_t) 0;
    int64_t dz2081U_119923 = (int64_t) 0;
    int64_t dz2081U_119924 = (int64_t) 0;
    int64_t dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925 = (int64_t) 0;
    int32_t radix_sizze_119926 = 0;
    int32_t maxDepth_119931 = 0;
    int32_t maxDepth_119934 = 0;
    int64_t scatter_psizze_119937 = (int64_t) 0;
    int64_t prim_out_140323 = (int64_t) 0;
    int64_t prim_out_140324 = (int64_t) 0;
    int64_t prim_out_140325 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock last_info_idx_mem_139587;
    
    last_info_idx_mem_139587.references = NULL;
    
    struct memblock first_info_idx_mem_139586;
    
    first_info_idx_mem_139586.references = NULL;
    
    struct memblock depths_mem_139585;
    
    depths_mem_139585.references = NULL;
    
    struct memblock bounds_mem_139584;
    
    bounds_mem_139584.references = NULL;
    
    struct memblock depths_mem_139583;
    
    depths_mem_139583.references = NULL;
    
    struct memblock bounds_mem_139582;
    
    bounds_mem_139582.references = NULL;
    
    struct memblock pS_mem_139581;
    
    pS_mem_139581.references = NULL;
    
    struct memblock pR_mem_139580;
    
    pR_mem_139580.references = NULL;
    radix_sizze_119926 = in0;
    pR_mem_139580 = in1->mem;
    nR_119920 = in1->shape[0];
    b_119921 = in1->shape[1];
    pS_mem_139581 = in2->mem;
    nS_119922 = in2->shape[0];
    b_119921 = in2->shape[1];
    bounds_mem_139582 = in3->v0->mem;
    dz2081U_119923 = in3->v0->shape[0];
    depths_mem_139583 = in3->v1->mem;
    dz2081U_119923 = in3->v1->shape[0];
    maxDepth_119931 = in3->v2;
    bounds_mem_139584 = in4->v0->mem;
    dz2081U_119924 = in4->v0->shape[0];
    depths_mem_139585 = in4->v1->mem;
    dz2081U_119924 = in4->v1->shape[0];
    maxDepth_119934 = in4->v2;
    first_info_idx_mem_139586 = in5->v0->mem;
    dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925 = in5->v0->shape[0];
    last_info_idx_mem_139587 = in5->v1->mem;
    dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925 = in5->v1->shape[0];
    scatter_psizze_119937 = in6;
    if (!((nR_119920 == in1->shape[0] && b_119921 == in1->shape[1]) && ((nS_119922 == in2->shape[0] && b_119921 == in2->shape[1]) && ((dz2081U_119923 == in3->v0->shape[0] && dz2081U_119923 == in3->v1->shape[0]) && ((dz2081U_119924 == in4->v0->shape[0] && dz2081U_119924 == in4->v1->shape[0]) && (dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925 == in5->v0->shape[0] && dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925 == in5->v1->shape[0])))))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_Inner_Radix_Hash_Join(ctx, &mem_out_140320, &mem_out_140321, &mem_out_140322, &prim_out_140323, &prim_out_140324, &prim_out_140325, pR_mem_139580, pS_mem_139581, bounds_mem_139582, depths_mem_139583, bounds_mem_139584, depths_mem_139585, first_info_idx_mem_139586, last_info_idx_mem_139587, nR_119920, b_119921, nS_119922, dz2081U_119923, dz2081U_119924, dzlz7bUZLztztZRz20U2z20UZLi32z20Uradix_sizzeZRz7dUzg_119925, radix_sizze_119926, maxDepth_119931, maxDepth_119934, scatter_psizze_119937);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_joinPairs_bsq *) malloc(sizeof(struct futhark_opaque_joinPairs_bsq))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140323;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140324;
            assert(((*out0)->v2 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v2->mem = mem_out_140322;
            (*out0)->v2->shape[0] = prim_out_140325;
            (*out0)->v2->shape[1] = b_119921;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_double(struct futhark_context *ctx, int64_t *out0, const struct futhark_f64_1d *in0)
{
    int64_t n_62657 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_139580;
    
    ks_mem_139580.references = NULL;
    ks_mem_139580 = in0->mem;
    n_62657 = in0->shape[0];
    if (!(n_62657 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_double(ctx, &prim_out_140320, ks_mem_139580, n_62657);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_float(struct futhark_context *ctx, int64_t *out0, const struct futhark_f32_1d *in0)
{
    int64_t n_62480 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_139580;
    
    ks_mem_139580.references = NULL;
    ks_mem_139580 = in0->mem;
    n_62480 = in0->shape[0];
    if (!(n_62480 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_float(ctx, &prim_out_140320, ks_mem_139580, n_62480);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_int(struct futhark_context *ctx, int64_t *out0, const struct futhark_i32_1d *in0)
{
    int64_t n_62129 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_139580;
    
    ks_mem_139580.references = NULL;
    ks_mem_139580 = in0->mem;
    n_62129 = in0->shape[0];
    if (!(n_62129 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_int(ctx, &prim_out_140320, ks_mem_139580, n_62129);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_long(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0)
{
    int64_t n_62303 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_139580;
    
    ks_mem_139580.references = NULL;
    ks_mem_139580 = in0->mem;
    n_62303 = in0->shape[0];
    if (!(n_62303 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_long(ctx, &prim_out_140320, ks_mem_139580, n_62303);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_short(struct futhark_context *ctx, int64_t *out0, const struct futhark_i16_1d *in0)
{
    int64_t n_61955 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_139580;
    
    ks_mem_139580.references = NULL;
    ks_mem_139580 = in0->mem;
    n_61955 = in0->shape[0];
    if (!(n_61955 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_short(ctx, &prim_out_140320, ks_mem_139580, n_61955);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_calc_partitions_from_partitioned_set(struct futhark_context *ctx, struct futhark_opaque_partitionInfo **out0, const int32_t in0, const struct futhark_u8_2d *in1, const int64_t in2, const int64_t in3, const int32_t in4)
{
    int64_t n_116595 = (int64_t) 0;
    int64_t b_116596 = (int64_t) 0;
    int32_t radix_sizze_116597 = 0;
    int64_t offset_116599 = (int64_t) 0;
    int64_t sizze_thresh_116600 = (int64_t) 0;
    int32_t max_depth_116601 = 0;
    int64_t prim_out_140322 = (int64_t) 0;
    int32_t prim_out_140323 = 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pXs_mem_139580;
    
    pXs_mem_139580.references = NULL;
    radix_sizze_116597 = in0;
    pXs_mem_139580 = in1->mem;
    n_116595 = in1->shape[0];
    b_116596 = in1->shape[1];
    offset_116599 = in2;
    sizze_thresh_116600 = in3;
    max_depth_116601 = in4;
    if (!(n_116595 == in1->shape[0] && b_116596 == in1->shape[1])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_calc_partitions_from_partitioned_set(ctx, &mem_out_140320, &mem_out_140321, &prim_out_140322, &prim_out_140323, pXs_mem_139580, n_116595, b_116596, radix_sizze_116597, offset_116599, sizze_thresh_116600, max_depth_116601);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_partitionInfo *) malloc(sizeof(struct futhark_opaque_partitionInfo))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140322;
            assert(((*out0)->v1 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140322;
            (*out0)->v2 = prim_out_140323;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_create_hash_table_from_partitioned_set(struct futhark_context *ctx, struct futhark_opaque_radix_hashTable **out0, const int32_t in0, const struct futhark_u8_2d *in1, const struct futhark_opaque_partitionInfo *in2, const int64_t in3)
{
    int64_t n_117403 = (int64_t) 0;
    int64_t b_117404 = (int64_t) 0;
    int64_t dz2080U_117405 = (int64_t) 0;
    int64_t dz2081U_117406 = (int64_t) 0;
    int32_t radix_sizze_117407 = 0;
    int32_t maxDepth_117411 = 0;
    int64_t scatter_psizze_117412 = (int64_t) 0;
    int64_t prim_out_140322 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock depths_mem_139582;
    
    depths_mem_139582.references = NULL;
    
    struct memblock bounds_mem_139581;
    
    bounds_mem_139581.references = NULL;
    
    struct memblock pXs_mem_139580;
    
    pXs_mem_139580.references = NULL;
    radix_sizze_117407 = in0;
    pXs_mem_139580 = in1->mem;
    n_117403 = in1->shape[0];
    b_117404 = in1->shape[1];
    bounds_mem_139581 = in2->v0->mem;
    dz2080U_117405 = in2->v0->shape[0];
    depths_mem_139582 = in2->v1->mem;
    dz2081U_117406 = in2->v1->shape[0];
    maxDepth_117411 = in2->v2;
    scatter_psizze_117412 = in3;
    if (!((n_117403 == in1->shape[0] && b_117404 == in1->shape[1]) && (dz2080U_117405 == in2->v0->shape[0] && dz2081U_117406 == in2->v1->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_create_hash_table_from_partitioned_set(ctx, &mem_out_140320, &mem_out_140321, &prim_out_140322, pXs_mem_139580, bounds_mem_139581, depths_mem_139582, n_117403, b_117404, dz2080U_117405, dz2081U_117406, radix_sizze_117407, maxDepth_117411, scatter_psizze_117412);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_radix_hashTable *) malloc(sizeof(struct futhark_opaque_radix_hashTable))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140322;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140322;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_GFTR(struct futhark_context *ctx, struct futhark_u8_2d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const int64_t in3, const struct futhark_u8_2d *in4)
{
    int64_t niz2084U_66270 = (int64_t) 0;
    int64_t dz2083U_66271 = (int64_t) 0;
    int64_t incr_66272 = (int64_t) 0;
    int64_t psizze_66273 = (int64_t) 0;
    int64_t pL_bytes_66275 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_66272 = in0;
    psizze_66273 = in1;
    is_mem_139580 = in2->mem;
    niz2084U_66270 = in2->shape[0];
    pL_bytes_66275 = in3;
    ys_mem_139581 = in4->mem;
    dz2083U_66271 = in4->shape[0];
    if (!(niz2084U_66270 == in2->shape[0] && (dz2083U_66271 == in4->shape[0] && pL_bytes_66275 == in4->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_GFTR(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, niz2084U_66270, dz2083U_66271, incr_66272, psizze_66273, pL_bytes_66275);
        if (ret == 0) {
            assert((*out0 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = niz2084U_66270;
            (*out0)->shape[1] = pL_bytes_66275;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_double(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f64_1d *in3)
{
    int64_t niz2084U_65806 = (int64_t) 0;
    int64_t dz2083U_65807 = (int64_t) 0;
    int64_t incr_65808 = (int64_t) 0;
    int64_t psizze_65809 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_65808 = in0;
    psizze_65809 = in1;
    is_mem_139580 = in2->mem;
    niz2084U_65806 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    dz2083U_65807 = in3->shape[0];
    if (!(niz2084U_65806 == in2->shape[0] && dz2083U_65807 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_double(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, niz2084U_65806, dz2083U_65807, incr_65808, psizze_65809);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = niz2084U_65806;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_double_GFUR(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_f64_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_f64_1d *in4)
{
    int64_t ni_67778 = (int64_t) 0;
    int64_t n_67779 = (int64_t) 0;
    int64_t incr_67780 = (int64_t) 0;
    int64_t psizze_67781 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139582;
    
    ys_mem_139582.references = NULL;
    
    struct memblock is_mem_139581;
    
    is_mem_139581.references = NULL;
    
    struct memblock preVals_mem_139580;
    
    preVals_mem_139580.references = NULL;
    incr_67780 = in0;
    psizze_67781 = in1;
    preVals_mem_139580 = in2->mem;
    ni_67778 = in2->shape[0];
    is_mem_139581 = in3->mem;
    ni_67778 = in3->shape[0];
    ys_mem_139582 = in4->mem;
    n_67779 = in4->shape[0];
    if (!(ni_67778 == in2->shape[0] && (ni_67778 == in3->shape[0] && n_67779 == in4->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_double_GFUR(ctx, &mem_out_140320, preVals_mem_139580, is_mem_139581, ys_mem_139582, ni_67778, n_67779, incr_67780, psizze_67781);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = ni_67778;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_float(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f32_1d *in3)
{
    int64_t niz2084U_65526 = (int64_t) 0;
    int64_t dz2083U_65527 = (int64_t) 0;
    int64_t incr_65528 = (int64_t) 0;
    int64_t psizze_65529 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_65528 = in0;
    psizze_65529 = in1;
    is_mem_139580 = in2->mem;
    niz2084U_65526 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    dz2083U_65527 = in3->shape[0];
    if (!(niz2084U_65526 == in2->shape[0] && dz2083U_65527 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_float(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, niz2084U_65526, dz2083U_65527, incr_65528, psizze_65529);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = niz2084U_65526;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_float_GFUR(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_f32_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_f32_1d *in4)
{
    int64_t ni_67477 = (int64_t) 0;
    int64_t n_67478 = (int64_t) 0;
    int64_t incr_67479 = (int64_t) 0;
    int64_t psizze_67480 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139582;
    
    ys_mem_139582.references = NULL;
    
    struct memblock is_mem_139581;
    
    is_mem_139581.references = NULL;
    
    struct memblock preVals_mem_139580;
    
    preVals_mem_139580.references = NULL;
    incr_67479 = in0;
    psizze_67480 = in1;
    preVals_mem_139580 = in2->mem;
    ni_67477 = in2->shape[0];
    is_mem_139581 = in3->mem;
    ni_67477 = in3->shape[0];
    ys_mem_139582 = in4->mem;
    n_67478 = in4->shape[0];
    if (!(ni_67477 == in2->shape[0] && (ni_67477 == in3->shape[0] && n_67478 == in4->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_float_GFUR(ctx, &mem_out_140320, preVals_mem_139580, is_mem_139581, ys_mem_139582, ni_67477, n_67478, incr_67479, psizze_67480);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = ni_67477;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_int(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i32_1d *in3)
{
    int64_t niz2084U_64966 = (int64_t) 0;
    int64_t dz2083U_64967 = (int64_t) 0;
    int64_t incr_64968 = (int64_t) 0;
    int64_t psizze_64969 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_64968 = in0;
    psizze_64969 = in1;
    is_mem_139580 = in2->mem;
    niz2084U_64966 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    dz2083U_64967 = in3->shape[0];
    if (!(niz2084U_64966 == in2->shape[0] && dz2083U_64967 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_int(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, niz2084U_64966, dz2083U_64967, incr_64968, psizze_64969);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = niz2084U_64966;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_int_GFUR(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i32_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_i32_1d *in4)
{
    int64_t ni_66875 = (int64_t) 0;
    int64_t n_66876 = (int64_t) 0;
    int64_t incr_66877 = (int64_t) 0;
    int64_t psizze_66878 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139582;
    
    ys_mem_139582.references = NULL;
    
    struct memblock is_mem_139581;
    
    is_mem_139581.references = NULL;
    
    struct memblock preVals_mem_139580;
    
    preVals_mem_139580.references = NULL;
    incr_66877 = in0;
    psizze_66878 = in1;
    preVals_mem_139580 = in2->mem;
    ni_66875 = in2->shape[0];
    is_mem_139581 = in3->mem;
    ni_66875 = in3->shape[0];
    ys_mem_139582 = in4->mem;
    n_66876 = in4->shape[0];
    if (!(ni_66875 == in2->shape[0] && (ni_66875 == in3->shape[0] && n_66876 == in4->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_int_GFUR(ctx, &mem_out_140320, preVals_mem_139580, is_mem_139581, ys_mem_139582, ni_66875, n_66876, incr_66877, psizze_66878);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = ni_66875;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_long(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3)
{
    int64_t niz2084U_65246 = (int64_t) 0;
    int64_t dz2083U_65247 = (int64_t) 0;
    int64_t incr_65248 = (int64_t) 0;
    int64_t psizze_65249 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_65248 = in0;
    psizze_65249 = in1;
    is_mem_139580 = in2->mem;
    niz2084U_65246 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    dz2083U_65247 = in3->shape[0];
    if (!(niz2084U_65246 == in2->shape[0] && dz2083U_65247 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_long(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, niz2084U_65246, dz2083U_65247, incr_65248, psizze_65249);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = niz2084U_65246;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_long_GFUR(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_i64_1d *in4)
{
    int64_t ni_67176 = (int64_t) 0;
    int64_t n_67177 = (int64_t) 0;
    int64_t incr_67178 = (int64_t) 0;
    int64_t psizze_67179 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139582;
    
    ys_mem_139582.references = NULL;
    
    struct memblock is_mem_139581;
    
    is_mem_139581.references = NULL;
    
    struct memblock preVals_mem_139580;
    
    preVals_mem_139580.references = NULL;
    incr_67178 = in0;
    psizze_67179 = in1;
    preVals_mem_139580 = in2->mem;
    ni_67176 = in2->shape[0];
    is_mem_139581 = in3->mem;
    ni_67176 = in3->shape[0];
    ys_mem_139582 = in4->mem;
    n_67177 = in4->shape[0];
    if (!(ni_67176 == in2->shape[0] && (ni_67176 == in3->shape[0] && n_67177 == in4->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_long_GFUR(ctx, &mem_out_140320, preVals_mem_139580, is_mem_139581, ys_mem_139582, ni_67176, n_67177, incr_67178, psizze_67179);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = ni_67176;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_short(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i16_1d *in3)
{
    int64_t niz2084U_64686 = (int64_t) 0;
    int64_t dz2083U_64687 = (int64_t) 0;
    int64_t incr_64688 = (int64_t) 0;
    int64_t psizze_64689 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_64688 = in0;
    psizze_64689 = in1;
    is_mem_139580 = in2->mem;
    niz2084U_64686 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    dz2083U_64687 = in3->shape[0];
    if (!(niz2084U_64686 == in2->shape[0] && dz2083U_64687 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_short(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, niz2084U_64686, dz2083U_64687, incr_64688, psizze_64689);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = niz2084U_64686;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_gather_payloads_short_GFUR(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i16_1d *in2, const struct futhark_i64_1d *in3, const struct futhark_i16_1d *in4)
{
    int64_t ni_66574 = (int64_t) 0;
    int64_t n_66575 = (int64_t) 0;
    int64_t incr_66576 = (int64_t) 0;
    int64_t psizze_66577 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139582;
    
    ys_mem_139582.references = NULL;
    
    struct memblock is_mem_139581;
    
    is_mem_139581.references = NULL;
    
    struct memblock preVals_mem_139580;
    
    preVals_mem_139580.references = NULL;
    incr_66576 = in0;
    psizze_66577 = in1;
    preVals_mem_139580 = in2->mem;
    ni_66574 = in2->shape[0];
    is_mem_139581 = in3->mem;
    ni_66574 = in3->shape[0];
    ys_mem_139582 = in4->mem;
    n_66575 = in4->shape[0];
    if (!(ni_66574 == in2->shape[0] && (ni_66574 == in3->shape[0] && n_66575 == in4->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_gather_payloads_short_GFUR(ctx, &mem_out_140320, preVals_mem_139580, is_mem_139581, ys_mem_139582, ni_66574, n_66575, incr_66576, psizze_66577);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = ni_66574;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_inner_SMJ_double(struct futhark_context *ctx, struct futhark_opaque_joinPairs_double **out0, const struct futhark_f64_1d *in0, const struct futhark_f64_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5)
{
    int64_t nR_111847 = (int64_t) 0;
    int64_t nS_111848 = (int64_t) 0;
    int64_t offset_R_111851 = (int64_t) 0;
    int64_t offset_S_111852 = (int64_t) 0;
    int64_t partitionSizze_111853 = (int64_t) 0;
    int64_t scatter_psizze_111854 = (int64_t) 0;
    int64_t prim_out_140323 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock tS_mem_139581;
    
    tS_mem_139581.references = NULL;
    
    struct memblock tR_mem_139580;
    
    tR_mem_139580.references = NULL;
    tR_mem_139580 = in0->mem;
    nR_111847 = in0->shape[0];
    tS_mem_139581 = in1->mem;
    nS_111848 = in1->shape[0];
    offset_R_111851 = in2;
    offset_S_111852 = in3;
    partitionSizze_111853 = in4;
    scatter_psizze_111854 = in5;
    if (!(nR_111847 == in0->shape[0] && nS_111848 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_inner_SMJ_double(ctx, &mem_out_140320, &mem_out_140321, &mem_out_140322, &prim_out_140323, tR_mem_139580, tS_mem_139581, nR_111847, nS_111848, offset_R_111851, offset_S_111852, partitionSizze_111853, scatter_psizze_111854);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_joinPairs_double *) malloc(sizeof(struct futhark_opaque_joinPairs_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140323;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140323;
            assert(((*out0)->v2 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v2->mem = mem_out_140322;
            (*out0)->v2->shape[0] = prim_out_140323;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_inner_SMJ_float(struct futhark_context *ctx, struct futhark_opaque_joinPairs_float **out0, const struct futhark_f32_1d *in0, const struct futhark_f32_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5)
{
    int64_t nR_109390 = (int64_t) 0;
    int64_t nS_109391 = (int64_t) 0;
    int64_t offset_R_109394 = (int64_t) 0;
    int64_t offset_S_109395 = (int64_t) 0;
    int64_t partitionSizze_109396 = (int64_t) 0;
    int64_t scatter_psizze_109397 = (int64_t) 0;
    int64_t prim_out_140323 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock tS_mem_139581;
    
    tS_mem_139581.references = NULL;
    
    struct memblock tR_mem_139580;
    
    tR_mem_139580.references = NULL;
    tR_mem_139580 = in0->mem;
    nR_109390 = in0->shape[0];
    tS_mem_139581 = in1->mem;
    nS_109391 = in1->shape[0];
    offset_R_109394 = in2;
    offset_S_109395 = in3;
    partitionSizze_109396 = in4;
    scatter_psizze_109397 = in5;
    if (!(nR_109390 == in0->shape[0] && nS_109391 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_inner_SMJ_float(ctx, &mem_out_140320, &mem_out_140321, &mem_out_140322, &prim_out_140323, tR_mem_139580, tS_mem_139581, nR_109390, nS_109391, offset_R_109394, offset_S_109395, partitionSizze_109396, scatter_psizze_109397);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_joinPairs_float *) malloc(sizeof(struct futhark_opaque_joinPairs_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140323;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140323;
            assert(((*out0)->v2 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v2->mem = mem_out_140322;
            (*out0)->v2->shape[0] = prim_out_140323;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_inner_SMJ_int(struct futhark_context *ctx, struct futhark_opaque_joinPairs_int **out0, const struct futhark_i32_1d *in0, const struct futhark_i32_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5)
{
    int64_t nR_104488 = (int64_t) 0;
    int64_t nS_104489 = (int64_t) 0;
    int64_t offset_R_104492 = (int64_t) 0;
    int64_t offset_S_104493 = (int64_t) 0;
    int64_t partitionSizze_104494 = (int64_t) 0;
    int64_t scatter_psizze_104495 = (int64_t) 0;
    int64_t prim_out_140323 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock tS_mem_139581;
    
    tS_mem_139581.references = NULL;
    
    struct memblock tR_mem_139580;
    
    tR_mem_139580.references = NULL;
    tR_mem_139580 = in0->mem;
    nR_104488 = in0->shape[0];
    tS_mem_139581 = in1->mem;
    nS_104489 = in1->shape[0];
    offset_R_104492 = in2;
    offset_S_104493 = in3;
    partitionSizze_104494 = in4;
    scatter_psizze_104495 = in5;
    if (!(nR_104488 == in0->shape[0] && nS_104489 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_inner_SMJ_int(ctx, &mem_out_140320, &mem_out_140321, &mem_out_140322, &prim_out_140323, tR_mem_139580, tS_mem_139581, nR_104488, nS_104489, offset_R_104492, offset_S_104493, partitionSizze_104494, scatter_psizze_104495);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_joinPairs_int *) malloc(sizeof(struct futhark_opaque_joinPairs_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140323;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140323;
            assert(((*out0)->v2 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v2->mem = mem_out_140322;
            (*out0)->v2->shape[0] = prim_out_140323;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_inner_SMJ_long(struct futhark_context *ctx, struct futhark_opaque_joinPairs_long **out0, const struct futhark_i64_1d *in0, const struct futhark_i64_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5)
{
    int64_t nR_106933 = (int64_t) 0;
    int64_t nS_106934 = (int64_t) 0;
    int64_t offset_R_106937 = (int64_t) 0;
    int64_t offset_S_106938 = (int64_t) 0;
    int64_t partitionSizze_106939 = (int64_t) 0;
    int64_t scatter_psizze_106940 = (int64_t) 0;
    int64_t prim_out_140323 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock tS_mem_139581;
    
    tS_mem_139581.references = NULL;
    
    struct memblock tR_mem_139580;
    
    tR_mem_139580.references = NULL;
    tR_mem_139580 = in0->mem;
    nR_106933 = in0->shape[0];
    tS_mem_139581 = in1->mem;
    nS_106934 = in1->shape[0];
    offset_R_106937 = in2;
    offset_S_106938 = in3;
    partitionSizze_106939 = in4;
    scatter_psizze_106940 = in5;
    if (!(nR_106933 == in0->shape[0] && nS_106934 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_inner_SMJ_long(ctx, &mem_out_140320, &mem_out_140321, &mem_out_140322, &prim_out_140323, tR_mem_139580, tS_mem_139581, nR_106933, nS_106934, offset_R_106937, offset_S_106938, partitionSizze_106939, scatter_psizze_106940);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_joinPairs_long *) malloc(sizeof(struct futhark_opaque_joinPairs_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140323;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140323;
            assert(((*out0)->v2 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v2->mem = mem_out_140322;
            (*out0)->v2->shape[0] = prim_out_140323;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_inner_SMJ_short(struct futhark_context *ctx, struct futhark_opaque_joinPairs_short **out0, const struct futhark_i16_1d *in0, const struct futhark_i16_1d *in1, const int64_t in2, const int64_t in3, const int64_t in4, const int64_t in5)
{
    int64_t nR_102031 = (int64_t) 0;
    int64_t nS_102032 = (int64_t) 0;
    int64_t offset_R_102035 = (int64_t) 0;
    int64_t offset_S_102036 = (int64_t) 0;
    int64_t partitionSizze_102037 = (int64_t) 0;
    int64_t scatter_psizze_102038 = (int64_t) 0;
    int64_t prim_out_140323 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140322;
    
    mem_out_140322.references = NULL;
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock tS_mem_139581;
    
    tS_mem_139581.references = NULL;
    
    struct memblock tR_mem_139580;
    
    tR_mem_139580.references = NULL;
    tR_mem_139580 = in0->mem;
    nR_102031 = in0->shape[0];
    tS_mem_139581 = in1->mem;
    nS_102032 = in1->shape[0];
    offset_R_102035 = in2;
    offset_S_102036 = in3;
    partitionSizze_102037 = in4;
    scatter_psizze_102038 = in5;
    if (!(nR_102031 == in0->shape[0] && nS_102032 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_inner_SMJ_short(ctx, &mem_out_140320, &mem_out_140321, &mem_out_140322, &prim_out_140323, tR_mem_139580, tS_mem_139581, nR_102031, nS_102032, offset_R_102035, offset_S_102036, partitionSizze_102037, scatter_psizze_102038);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_joinPairs_short *) malloc(sizeof(struct futhark_opaque_joinPairs_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = prim_out_140323;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = prim_out_140323;
            assert(((*out0)->v2 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v2->mem = mem_out_140322;
            (*out0)->v2->shape[0] = prim_out_140323;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_max_idx(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0)
{
    int64_t nz2080U_62734 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock eta_p_mem_139580;
    
    eta_p_mem_139580.references = NULL;
    eta_p_mem_139580 = in0->mem;
    nz2080U_62734 = in0->shape[0];
    if (!(nz2080U_62734 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_max_idx(ctx, &prim_out_140320, eta_p_mem_139580, nz2080U_62734);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const struct futhark_f64_1d *in1)
{
    int64_t n_99449 = (int64_t) 0;
    int64_t incr_99450 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_99450 = in0;
    xs_mem_139580 = in1->mem;
    n_99449 = in1->shape[0];
    if (!(n_99449 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_double(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_99449, incr_99450);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_double *) malloc(sizeof(struct futhark_opaque_sortInfo_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_99449;
            assert(((*out0)->v1 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_99449;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const struct futhark_f32_1d *in1)
{
    int64_t n_97304 = (int64_t) 0;
    int64_t incr_97305 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_97305 = in0;
    xs_mem_139580 = in1->mem;
    n_97304 = in1->shape[0];
    if (!(n_97304 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_float(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_97304, incr_97305);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_float *) malloc(sizeof(struct futhark_opaque_sortInfo_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_97304;
            assert(((*out0)->v1 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_97304;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const struct futhark_i32_1d *in1)
{
    int64_t n_93018 = (int64_t) 0;
    int64_t incr_93019 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_93019 = in0;
    xs_mem_139580 = in1->mem;
    n_93018 = in1->shape[0];
    if (!(n_93018 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_int(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_93018, incr_93019);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_int *) malloc(sizeof(struct futhark_opaque_sortInfo_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_93018;
            assert(((*out0)->v1 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_93018;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const struct futhark_i64_1d *in1)
{
    int64_t n_95159 = (int64_t) 0;
    int64_t incr_95160 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_95160 = in0;
    xs_mem_139580 = in1->mem;
    n_95159 = in1->shape[0];
    if (!(n_95159 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_long(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_95159, incr_95160);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_long *) malloc(sizeof(struct futhark_opaque_sortInfo_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_95159;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_95159;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const struct futhark_i16_1d *in1)
{
    int64_t n_90873 = (int64_t) 0;
    int64_t incr_90874 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_90874 = in0;
    xs_mem_139580 = in1->mem;
    n_90873 = in1->shape[0];
    if (!(n_90873 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_short(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_90873, incr_90874);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_short *) malloc(sizeof(struct futhark_opaque_sortInfo_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_90873;
            assert(((*out0)->v1 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_90873;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortRelation_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double **out0, const struct futhark_opaque_sortStruct_double *in0)
{
    int64_t n_84345 = (int64_t) 0;
    int64_t b_84346 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    k_mem_139580 = in0->v0->mem;
    n_84345 = in0->v0->shape[0];
    pL_mem_139581 = in0->v1->mem;
    n_84345 = in0->v1->shape[0];
    b_84346 = in0->v1->shape[1];
    if (!(n_84345 == in0->v0->shape[0] && (n_84345 == in0->v1->shape[0] && b_84346 == in0->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortRelation_double(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_84345, b_84346);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_double *) malloc(sizeof(struct futhark_opaque_sortStruct_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_84345;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_84345;
            (*out0)->v1->shape[1] = b_84346;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortRelation_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float **out0, const struct futhark_opaque_sortStruct_float *in0)
{
    int64_t n_81980 = (int64_t) 0;
    int64_t b_81981 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    k_mem_139580 = in0->v0->mem;
    n_81980 = in0->v0->shape[0];
    pL_mem_139581 = in0->v1->mem;
    n_81980 = in0->v1->shape[0];
    b_81981 = in0->v1->shape[1];
    if (!(n_81980 == in0->v0->shape[0] && (n_81980 == in0->v1->shape[0] && b_81981 == in0->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortRelation_float(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_81980, b_81981);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_float *) malloc(sizeof(struct futhark_opaque_sortStruct_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_81980;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_81980;
            (*out0)->v1->shape[1] = b_81981;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortRelation_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int **out0, const struct futhark_opaque_sortStruct_int *in0)
{
    int64_t n_77260 = (int64_t) 0;
    int64_t b_77261 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    k_mem_139580 = in0->v0->mem;
    n_77260 = in0->v0->shape[0];
    pL_mem_139581 = in0->v1->mem;
    n_77260 = in0->v1->shape[0];
    b_77261 = in0->v1->shape[1];
    if (!(n_77260 == in0->v0->shape[0] && (n_77260 == in0->v1->shape[0] && b_77261 == in0->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortRelation_int(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_77260, b_77261);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_int *) malloc(sizeof(struct futhark_opaque_sortStruct_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_77260;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_77260;
            (*out0)->v1->shape[1] = b_77261;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortRelation_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long **out0, const struct futhark_opaque_sortStruct_long *in0)
{
    int64_t n_79615 = (int64_t) 0;
    int64_t b_79616 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    k_mem_139580 = in0->v0->mem;
    n_79615 = in0->v0->shape[0];
    pL_mem_139581 = in0->v1->mem;
    n_79615 = in0->v1->shape[0];
    b_79616 = in0->v1->shape[1];
    if (!(n_79615 == in0->v0->shape[0] && (n_79615 == in0->v1->shape[0] && b_79616 == in0->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortRelation_long(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_79615, b_79616);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_long *) malloc(sizeof(struct futhark_opaque_sortStruct_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_79615;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_79615;
            (*out0)->v1->shape[1] = b_79616;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortRelation_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short **out0, const struct futhark_opaque_sortStruct_short *in0)
{
    int64_t n_74895 = (int64_t) 0;
    int64_t b_74896 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    k_mem_139580 = in0->v0->mem;
    n_74895 = in0->v0->shape[0];
    pL_mem_139581 = in0->v1->mem;
    n_74895 = in0->v1->shape[0];
    b_74896 = in0->v1->shape[1];
    if (!(n_74895 == in0->v0->shape[0] && (n_74895 == in0->v1->shape[0] && b_74896 == in0->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortRelation_short(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_74895, b_74896);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_short *) malloc(sizeof(struct futhark_opaque_sortStruct_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_74895;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_74895;
            (*out0)->v1->shape[1] = b_74896;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_min_idx(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0)
{
    int64_t nz2080U_62694 = (int64_t) 0;
    int64_t prim_out_140320 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock eta_p_mem_139580;
    
    eta_p_mem_139580.references = NULL;
    eta_p_mem_139580 = in0->mem;
    nz2080U_62694 = in0->shape[0];
    if (!(nz2080U_62694 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_min_idx(ctx, &prim_out_140320, eta_p_mem_139580, nz2080U_62694);
        if (ret == 0) {
            *out0 = prim_out_140320;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_double(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f64_1d *in3)
{
    int64_t n_64404 = (int64_t) 0;
    int64_t incr_64405 = (int64_t) 0;
    int64_t block_sizze_64406 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_64405 = in0;
    block_sizze_64406 = in1;
    is_mem_139580 = in2->mem;
    n_64404 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    n_64404 = in3->shape[0];
    if (!(n_64404 == in2->shape[0] && n_64404 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_double(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, n_64404, incr_64405, block_sizze_64406);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = n_64404;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_float(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f32_1d *in3)
{
    int64_t n_64070 = (int64_t) 0;
    int64_t incr_64071 = (int64_t) 0;
    int64_t block_sizze_64072 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_64071 = in0;
    block_sizze_64072 = in1;
    is_mem_139580 = in2->mem;
    n_64070 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    n_64070 = in3->shape[0];
    if (!(n_64070 == in2->shape[0] && n_64070 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_float(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, n_64070, incr_64071, block_sizze_64072);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = n_64070;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_int(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i32_1d *in3)
{
    int64_t n_63402 = (int64_t) 0;
    int64_t incr_63403 = (int64_t) 0;
    int64_t block_sizze_63404 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_63403 = in0;
    block_sizze_63404 = in1;
    is_mem_139580 = in2->mem;
    n_63402 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    n_63402 = in3->shape[0];
    if (!(n_63402 == in2->shape[0] && n_63402 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_int(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, n_63402, incr_63403, block_sizze_63404);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = n_63402;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_long(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3)
{
    int64_t n_63736 = (int64_t) 0;
    int64_t incr_63737 = (int64_t) 0;
    int64_t block_sizze_63738 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_63737 = in0;
    block_sizze_63738 = in1;
    is_mem_139580 = in2->mem;
    n_63736 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    n_63736 = in3->shape[0];
    if (!(n_63736 == in2->shape[0] && n_63736 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_long(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, n_63736, incr_63737, block_sizze_63738);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = n_63736;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_short(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i16_1d *in3)
{
    int64_t n_63068 = (int64_t) 0;
    int64_t incr_63069 = (int64_t) 0;
    int64_t block_sizze_63070 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock ys_mem_139581;
    
    ys_mem_139581.references = NULL;
    
    struct memblock is_mem_139580;
    
    is_mem_139580.references = NULL;
    incr_63069 = in0;
    block_sizze_63070 = in1;
    is_mem_139580 = in2->mem;
    n_63068 = in2->shape[0];
    ys_mem_139581 = in3->mem;
    n_63068 = in3->shape[0];
    if (!(n_63068 == in2->shape[0] && n_63068 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_short(ctx, &mem_out_140320, is_mem_139580, ys_mem_139581, n_63068, incr_63069, block_sizze_63070);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->mem = mem_out_140320;
            (*out0)->shape[0] = n_63068;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_partition_and_deepen_GFTR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFTR **out0, const int16_t in0, const int64_t in1, const int32_t in2, const struct futhark_u8_2d *in3, const struct futhark_u8_2d *in4, const int64_t in5, const int32_t in6)
{
    int64_t n_114415 = (int64_t) 0;
    int64_t b_114416 = (int64_t) 0;
    int64_t pL_b_114417 = (int64_t) 0;
    int16_t block_sizze_114418 = (int16_t) 0;
    int64_t gather_psizze_114419 = (int64_t) 0;
    int32_t radix_sizze_114420 = 0;
    int64_t sizze_thresh_114423 = (int64_t) 0;
    int32_t max_depth_114424 = 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    block_sizze_114418 = in0;
    gather_psizze_114419 = in1;
    radix_sizze_114420 = in2;
    xs_mem_139580 = in3->mem;
    n_114415 = in3->shape[0];
    b_114416 = in3->shape[1];
    pL_mem_139581 = in4->mem;
    n_114415 = in4->shape[0];
    pL_b_114417 = in4->shape[1];
    sizze_thresh_114423 = in5;
    max_depth_114424 = in6;
    if (!((n_114415 == in3->shape[0] && b_114416 == in3->shape[1]) && (n_114415 == in4->shape[0] && pL_b_114417 == in4->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_partition_and_deepen_GFTR(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, pL_mem_139581, n_114415, b_114416, pL_b_114417, block_sizze_114418, gather_psizze_114419, radix_sizze_114420, sizze_thresh_114423, max_depth_114424);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_partitionedSet_GFTR *) malloc(sizeof(struct futhark_opaque_partitionedSet_GFTR))) != NULL);
            assert(((*out0)->v0 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_114415;
            (*out0)->v0->shape[1] = b_114416;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_114415;
            (*out0)->v1->shape[1] = pL_b_114417;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_partition_and_deepen_GFUR(struct futhark_context *ctx, struct futhark_opaque_partitionedSet_GFUR **out0, const int16_t in0, const int64_t in1, const int32_t in2, const struct futhark_u8_2d *in3, const int64_t in4, const int64_t in5, const int32_t in6)
{
    int64_t n_115782 = (int64_t) 0;
    int64_t b_115783 = (int64_t) 0;
    int16_t block_sizze_115784 = (int16_t) 0;
    int64_t gather_psizze_115785 = (int64_t) 0;
    int32_t radix_sizze_115786 = 0;
    int64_t offset_115788 = (int64_t) 0;
    int64_t sizze_thresh_115789 = (int64_t) 0;
    int32_t max_depth_115790 = 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    block_sizze_115784 = in0;
    gather_psizze_115785 = in1;
    radix_sizze_115786 = in2;
    xs_mem_139580 = in3->mem;
    n_115782 = in3->shape[0];
    b_115783 = in3->shape[1];
    offset_115788 = in4;
    sizze_thresh_115789 = in5;
    max_depth_115790 = in6;
    if (!(n_115782 == in3->shape[0] && b_115783 == in3->shape[1])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_partition_and_deepen_GFUR(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_115782, b_115783, block_sizze_115784, gather_psizze_115785, radix_sizze_115786, offset_115788, sizze_thresh_115789, max_depth_115790);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_partitionedSet_GFUR *) malloc(sizeof(struct futhark_opaque_partitionedSet_GFUR))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_115782;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_115782;
            (*out0)->v1->shape[1] = b_115783;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const int16_t in1, const struct futhark_f64_1d *in2)
{
    int64_t n_88727 = (int64_t) 0;
    int64_t incr_88728 = (int64_t) 0;
    int16_t block_sizze_88729 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_88728 = in0;
    block_sizze_88729 = in1;
    xs_mem_139580 = in2->mem;
    n_88727 = in2->shape[0];
    if (!(n_88727 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_double(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_88727, incr_88728, block_sizze_88729);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_double *) malloc(sizeof(struct futhark_opaque_sortInfo_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_88727;
            assert(((*out0)->v1 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_88727;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const int16_t in1, const struct futhark_f32_1d *in2)
{
    int64_t n_87838 = (int64_t) 0;
    int64_t incr_87839 = (int64_t) 0;
    int16_t block_sizze_87840 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_87839 = in0;
    block_sizze_87840 = in1;
    xs_mem_139580 = in2->mem;
    n_87838 = in2->shape[0];
    if (!(n_87838 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_float(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_87838, incr_87839, block_sizze_87840);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_float *) malloc(sizeof(struct futhark_opaque_sortInfo_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_87838;
            assert(((*out0)->v1 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_87838;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const int16_t in1, const struct futhark_i32_1d *in2)
{
    int64_t n_86081 = (int64_t) 0;
    int64_t incr_86082 = (int64_t) 0;
    int16_t block_sizze_86083 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_86082 = in0;
    block_sizze_86083 = in1;
    xs_mem_139580 = in2->mem;
    n_86081 = in2->shape[0];
    if (!(n_86081 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_int(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_86081, incr_86082, block_sizze_86083);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_int *) malloc(sizeof(struct futhark_opaque_sortInfo_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_86081;
            assert(((*out0)->v1 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_86081;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const int16_t in1, const struct futhark_i64_1d *in2)
{
    int64_t n_86949 = (int64_t) 0;
    int64_t incr_86950 = (int64_t) 0;
    int16_t block_sizze_86951 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_86950 = in0;
    block_sizze_86951 = in1;
    xs_mem_139580 = in2->mem;
    n_86949 = in2->shape[0];
    if (!(n_86949 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_long(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_86949, incr_86950, block_sizze_86951);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_long *) malloc(sizeof(struct futhark_opaque_sortInfo_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_86949;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_86949;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const int16_t in1, const struct futhark_i16_1d *in2)
{
    int64_t n_85213 = (int64_t) 0;
    int64_t incr_85214 = (int64_t) 0;
    int16_t block_sizze_85215 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock xs_mem_139580;
    
    xs_mem_139580.references = NULL;
    incr_85214 = in0;
    block_sizze_85215 = in1;
    xs_mem_139580 = in2->mem;
    n_85213 = in2->shape[0];
    if (!(n_85213 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_short(ctx, &mem_out_140320, &mem_out_140321, xs_mem_139580, n_85213, incr_85214, block_sizze_85215);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_short *) malloc(sizeof(struct futhark_opaque_sortInfo_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_85213;
            assert(((*out0)->v1 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_85213;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortRelation_double(struct futhark_context *ctx, struct futhark_opaque_sortStruct_double **out0, const int16_t in0, const struct futhark_opaque_sortStruct_double *in1)
{
    int64_t n_72424 = (int64_t) 0;
    int64_t b_72425 = (int64_t) 0;
    int16_t block_sizze_72426 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    block_sizze_72426 = in0;
    k_mem_139580 = in1->v0->mem;
    n_72424 = in1->v0->shape[0];
    pL_mem_139581 = in1->v1->mem;
    n_72424 = in1->v1->shape[0];
    b_72425 = in1->v1->shape[1];
    if (!(n_72424 == in1->v0->shape[0] && (n_72424 == in1->v1->shape[0] && b_72425 == in1->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortRelation_double(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_72424, b_72425, block_sizze_72426);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_double *) malloc(sizeof(struct futhark_opaque_sortStruct_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_72424;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_72424;
            (*out0)->v1->shape[1] = b_72425;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortRelation_float(struct futhark_context *ctx, struct futhark_opaque_sortStruct_float **out0, const int16_t in0, const struct futhark_opaque_sortStruct_float *in1)
{
    int64_t n_71474 = (int64_t) 0;
    int64_t b_71475 = (int64_t) 0;
    int16_t block_sizze_71476 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    block_sizze_71476 = in0;
    k_mem_139580 = in1->v0->mem;
    n_71474 = in1->v0->shape[0];
    pL_mem_139581 = in1->v1->mem;
    n_71474 = in1->v1->shape[0];
    b_71475 = in1->v1->shape[1];
    if (!(n_71474 == in1->v0->shape[0] && (n_71474 == in1->v1->shape[0] && b_71475 == in1->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortRelation_float(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_71474, b_71475, block_sizze_71476);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_float *) malloc(sizeof(struct futhark_opaque_sortStruct_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_71474;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_71474;
            (*out0)->v1->shape[1] = b_71475;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortRelation_int(struct futhark_context *ctx, struct futhark_opaque_sortStruct_int **out0, const int16_t in0, const struct futhark_opaque_sortStruct_int *in1)
{
    int64_t n_69640 = (int64_t) 0;
    int64_t b_69641 = (int64_t) 0;
    int16_t block_sizze_69642 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    block_sizze_69642 = in0;
    k_mem_139580 = in1->v0->mem;
    n_69640 = in1->v0->shape[0];
    pL_mem_139581 = in1->v1->mem;
    n_69640 = in1->v1->shape[0];
    b_69641 = in1->v1->shape[1];
    if (!(n_69640 == in1->v0->shape[0] && (n_69640 == in1->v1->shape[0] && b_69641 == in1->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortRelation_int(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_69640, b_69641, block_sizze_69642);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_int *) malloc(sizeof(struct futhark_opaque_sortStruct_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_69640;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_69640;
            (*out0)->v1->shape[1] = b_69641;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortRelation_long(struct futhark_context *ctx, struct futhark_opaque_sortStruct_long **out0, const int16_t in0, const struct futhark_opaque_sortStruct_long *in1)
{
    int64_t n_70528 = (int64_t) 0;
    int64_t b_70529 = (int64_t) 0;
    int16_t block_sizze_70530 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    block_sizze_70530 = in0;
    k_mem_139580 = in1->v0->mem;
    n_70528 = in1->v0->shape[0];
    pL_mem_139581 = in1->v1->mem;
    n_70528 = in1->v1->shape[0];
    b_70529 = in1->v1->shape[1];
    if (!(n_70528 == in1->v0->shape[0] && (n_70528 == in1->v1->shape[0] && b_70529 == in1->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortRelation_long(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_70528, b_70529, block_sizze_70530);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_long *) malloc(sizeof(struct futhark_opaque_sortStruct_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_70528;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_70528;
            (*out0)->v1->shape[1] = b_70529;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortRelation_short(struct futhark_context *ctx, struct futhark_opaque_sortStruct_short **out0, const int16_t in0, const struct futhark_opaque_sortStruct_short *in1)
{
    int64_t n_68746 = (int64_t) 0;
    int64_t b_68747 = (int64_t) 0;
    int16_t block_sizze_68748 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_140321;
    
    mem_out_140321.references = NULL;
    
    struct memblock mem_out_140320;
    
    mem_out_140320.references = NULL;
    
    struct memblock pL_mem_139581;
    
    pL_mem_139581.references = NULL;
    
    struct memblock k_mem_139580;
    
    k_mem_139580.references = NULL;
    block_sizze_68748 = in0;
    k_mem_139580 = in1->v0->mem;
    n_68746 = in1->v0->shape[0];
    pL_mem_139581 = in1->v1->mem;
    n_68746 = in1->v1->shape[0];
    b_68747 = in1->v1->shape[1];
    if (!(n_68746 == in1->v0->shape[0] && (n_68746 == in1->v1->shape[0] && b_68747 == in1->v1->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortRelation_short(ctx, &mem_out_140320, &mem_out_140321, k_mem_139580, pL_mem_139581, n_68746, b_68747, block_sizze_68748);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortStruct_short *) malloc(sizeof(struct futhark_opaque_sortStruct_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v0->mem = mem_out_140320;
            (*out0)->v0->shape[0] = n_68746;
            assert(((*out0)->v1 = (struct futhark_u8_2d *) malloc(sizeof(struct futhark_u8_2d))) != NULL);
            (*out0)->v1->mem = mem_out_140321;
            (*out0)->v1->shape[0] = n_68746;
            (*out0)->v1->shape[1] = b_68747;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
