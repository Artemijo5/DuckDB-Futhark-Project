// Generated by Futhark 0.26.0 (prerelease - include info below when reporting bugs).
// git: 1de4f0c (Fri Jan 24 11:10:52 2025 +0100)
// Compiled with GHC 9.4.8.

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wunused-const-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#pragma clang diagnostic ignored "-Wunused-but-set-variable"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wunused-const-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg, const char *param_name, size_t new_value);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr, float *data);
int futhark_index_f32_1d(struct futhark_context *ctx, float *out, struct futhark_f32_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
struct futhark_f64_1d;
struct futhark_f64_1d *futhark_new_f64_1d(struct futhark_context *ctx, const double *data, int64_t dim0);
struct futhark_f64_1d *futhark_new_raw_f64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr);
int futhark_values_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr, double *data);
int futhark_index_f64_1d(struct futhark_context *ctx, double *out, struct futhark_f64_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr);
const int64_t *futhark_shape_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr);
struct futhark_i16_1d;
struct futhark_i16_1d *futhark_new_i16_1d(struct futhark_context *ctx, const int16_t *data, int64_t dim0);
struct futhark_i16_1d *futhark_new_raw_i16_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr);
int futhark_values_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr, int16_t *data);
int futhark_index_i16_1d(struct futhark_context *ctx, int16_t *out, struct futhark_i16_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr);
const int64_t *futhark_shape_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr);
struct futhark_i32_1d;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const int32_t *data, int64_t dim0);
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr);
int futhark_values_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr, int32_t *data);
int futhark_index_i32_1d(struct futhark_context *ctx, int32_t *out, struct futhark_i32_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr);
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr);
struct futhark_i64_1d;
struct futhark_i64_1d *futhark_new_i64_1d(struct futhark_context *ctx, const int64_t *data, int64_t dim0);
struct futhark_i64_1d *futhark_new_raw_i64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0);
int futhark_free_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr);
int futhark_values_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr, int64_t *data);
int futhark_index_i64_1d(struct futhark_context *ctx, int64_t *out, struct futhark_i64_1d *arr, int64_t i0);
unsigned char *futhark_values_raw_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr);
const int64_t *futhark_shape_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr);

// Opaque values
struct futhark_opaque_mergeInfo_double;
struct futhark_opaque_mergeInfo_float;
struct futhark_opaque_mergeInfo_int;
struct futhark_opaque_mergeInfo_long;
struct futhark_opaque_mergeInfo_short;
struct futhark_opaque_mergeTup_double;
struct futhark_opaque_mergeTup_float;
struct futhark_opaque_mergeTup_int;
struct futhark_opaque_mergeTup_long;
struct futhark_opaque_mergeTup_short;
struct futhark_opaque_sortInfo_double;
struct futhark_opaque_sortInfo_float;
struct futhark_opaque_sortInfo_int;
struct futhark_opaque_sortInfo_long;
struct futhark_opaque_sortInfo_short;
int futhark_free_opaque_mergeInfo_double(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_double *obj);
int futhark_store_opaque_mergeInfo_double(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_double *obj, void **p, size_t *n);
struct futhark_opaque_mergeInfo_double *futhark_restore_opaque_mergeInfo_double(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeInfo_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_double *obj);
int futhark_project_opaque_mergeInfo_double_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_double *obj);
int futhark_project_opaque_mergeInfo_double_vs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_mergeInfo_double *obj);
int futhark_new_opaque_mergeInfo_double(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_double **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_f64_1d *f_vs);
int futhark_free_opaque_mergeInfo_float(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_float *obj);
int futhark_store_opaque_mergeInfo_float(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_float *obj, void **p, size_t *n);
struct futhark_opaque_mergeInfo_float *futhark_restore_opaque_mergeInfo_float(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeInfo_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_float *obj);
int futhark_project_opaque_mergeInfo_float_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_float *obj);
int futhark_project_opaque_mergeInfo_float_vs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_mergeInfo_float *obj);
int futhark_new_opaque_mergeInfo_float(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_float **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_f32_1d *f_vs);
int futhark_free_opaque_mergeInfo_int(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_int *obj);
int futhark_store_opaque_mergeInfo_int(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_int *obj, void **p, size_t *n);
struct futhark_opaque_mergeInfo_int *futhark_restore_opaque_mergeInfo_int(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeInfo_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_int *obj);
int futhark_project_opaque_mergeInfo_int_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_int *obj);
int futhark_project_opaque_mergeInfo_int_vs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_mergeInfo_int *obj);
int futhark_new_opaque_mergeInfo_int(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_int **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_i32_1d *f_vs);
int futhark_free_opaque_mergeInfo_long(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_long *obj);
int futhark_store_opaque_mergeInfo_long(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_long *obj, void **p, size_t *n);
struct futhark_opaque_mergeInfo_long *futhark_restore_opaque_mergeInfo_long(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeInfo_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_long *obj);
int futhark_project_opaque_mergeInfo_long_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_long *obj);
int futhark_project_opaque_mergeInfo_long_vs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_long *obj);
int futhark_new_opaque_mergeInfo_long(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_long **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_i64_1d *f_vs);
int futhark_free_opaque_mergeInfo_short(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_short *obj);
int futhark_store_opaque_mergeInfo_short(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_short *obj, void **p, size_t *n);
struct futhark_opaque_mergeInfo_short *futhark_restore_opaque_mergeInfo_short(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeInfo_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_short *obj);
int futhark_project_opaque_mergeInfo_short_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_short *obj);
int futhark_project_opaque_mergeInfo_short_vs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_mergeInfo_short *obj);
int futhark_new_opaque_mergeInfo_short(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_short **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_i16_1d *f_vs);
int futhark_free_opaque_mergeTup_double(struct futhark_context *ctx, struct futhark_opaque_mergeTup_double *obj);
int futhark_store_opaque_mergeTup_double(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_double *obj, void **p, size_t *n);
struct futhark_opaque_mergeTup_double *futhark_restore_opaque_mergeTup_double(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeTup_double_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_double *obj);
int futhark_project_opaque_mergeTup_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_double *obj);
int futhark_project_opaque_mergeTup_double_xs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_mergeTup_double *obj);
int futhark_new_opaque_mergeTup_double(struct futhark_context *ctx, struct futhark_opaque_mergeTup_double **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_f64_1d *f_xs);
int futhark_free_opaque_mergeTup_float(struct futhark_context *ctx, struct futhark_opaque_mergeTup_float *obj);
int futhark_store_opaque_mergeTup_float(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_float *obj, void **p, size_t *n);
struct futhark_opaque_mergeTup_float *futhark_restore_opaque_mergeTup_float(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeTup_float_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_float *obj);
int futhark_project_opaque_mergeTup_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_float *obj);
int futhark_project_opaque_mergeTup_float_xs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_mergeTup_float *obj);
int futhark_new_opaque_mergeTup_float(struct futhark_context *ctx, struct futhark_opaque_mergeTup_float **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_f32_1d *f_xs);
int futhark_free_opaque_mergeTup_int(struct futhark_context *ctx, struct futhark_opaque_mergeTup_int *obj);
int futhark_store_opaque_mergeTup_int(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_int *obj, void **p, size_t *n);
struct futhark_opaque_mergeTup_int *futhark_restore_opaque_mergeTup_int(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeTup_int_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_int *obj);
int futhark_project_opaque_mergeTup_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_int *obj);
int futhark_project_opaque_mergeTup_int_xs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_mergeTup_int *obj);
int futhark_new_opaque_mergeTup_int(struct futhark_context *ctx, struct futhark_opaque_mergeTup_int **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_i32_1d *f_xs);
int futhark_free_opaque_mergeTup_long(struct futhark_context *ctx, struct futhark_opaque_mergeTup_long *obj);
int futhark_store_opaque_mergeTup_long(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_long *obj, void **p, size_t *n);
struct futhark_opaque_mergeTup_long *futhark_restore_opaque_mergeTup_long(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeTup_long_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_long *obj);
int futhark_project_opaque_mergeTup_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_long *obj);
int futhark_project_opaque_mergeTup_long_xs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_long *obj);
int futhark_new_opaque_mergeTup_long(struct futhark_context *ctx, struct futhark_opaque_mergeTup_long **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_xs);
int futhark_free_opaque_mergeTup_short(struct futhark_context *ctx, struct futhark_opaque_mergeTup_short *obj);
int futhark_store_opaque_mergeTup_short(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_short *obj, void **p, size_t *n);
struct futhark_opaque_mergeTup_short *futhark_restore_opaque_mergeTup_short(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_mergeTup_short_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_short *obj);
int futhark_project_opaque_mergeTup_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_short *obj);
int futhark_project_opaque_mergeTup_short_xs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_mergeTup_short *obj);
int futhark_new_opaque_mergeTup_short(struct futhark_context *ctx, struct futhark_opaque_mergeTup_short **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_i16_1d *f_xs);
int futhark_free_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double *obj);
int futhark_store_opaque_sortInfo_double(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_double *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_double *futhark_restore_opaque_sortInfo_double(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_double *obj);
int futhark_project_opaque_sortInfo_double_xs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_sortInfo_double *obj);
int futhark_new_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out, const struct futhark_i64_1d *f_is, const struct futhark_f64_1d *f_xs);
int futhark_free_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float *obj);
int futhark_store_opaque_sortInfo_float(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_float *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_float *futhark_restore_opaque_sortInfo_float(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_float *obj);
int futhark_project_opaque_sortInfo_float_xs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_sortInfo_float *obj);
int futhark_new_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out, const struct futhark_i64_1d *f_is, const struct futhark_f32_1d *f_xs);
int futhark_free_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int *obj);
int futhark_store_opaque_sortInfo_int(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_int *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_int *futhark_restore_opaque_sortInfo_int(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_int *obj);
int futhark_project_opaque_sortInfo_int_xs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_sortInfo_int *obj);
int futhark_new_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out, const struct futhark_i64_1d *f_is, const struct futhark_i32_1d *f_xs);
int futhark_free_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long *obj);
int futhark_store_opaque_sortInfo_long(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_long *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_long *futhark_restore_opaque_sortInfo_long(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj);
int futhark_project_opaque_sortInfo_long_xs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj);
int futhark_new_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_xs);
int futhark_free_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short *obj);
int futhark_store_opaque_sortInfo_short(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_short *obj, void **p, size_t *n);
struct futhark_opaque_sortInfo_short *futhark_restore_opaque_sortInfo_short(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_sortInfo_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_short *obj);
int futhark_project_opaque_sortInfo_short_xs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_sortInfo_short *obj);
int futhark_new_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out, const struct futhark_i64_1d *f_is, const struct futhark_i16_1d *f_xs);

// Entry points
int futhark_entry_argmin_double(struct futhark_context *ctx, int64_t *out0, const struct futhark_f64_1d *in0);
int futhark_entry_argmin_float(struct futhark_context *ctx, int64_t *out0, const struct futhark_f32_1d *in0);
int futhark_entry_argmin_int(struct futhark_context *ctx, int64_t *out0, const struct futhark_i32_1d *in0);
int futhark_entry_argmin_long(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0);
int futhark_entry_argmin_short(struct futhark_context *ctx, int64_t *out0, const struct futhark_i16_1d *in0);
int futhark_entry_mergeSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const struct futhark_f64_1d *in1);
int futhark_entry_mergeSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const struct futhark_f32_1d *in1);
int futhark_entry_mergeSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const struct futhark_i32_1d *in1);
int futhark_entry_mergeSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const struct futhark_i64_1d *in1);
int futhark_entry_mergeSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const struct futhark_i16_1d *in1);
int futhark_entry_mergeSorted_double(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_double **out0, const int64_t in0, const int64_t in1, const struct futhark_f64_1d *in2, const struct futhark_f64_1d *in3);
int futhark_entry_mergeSorted_float(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_float **out0, const int64_t in0, const int64_t in1, const struct futhark_f32_1d *in2, const struct futhark_f32_1d *in3);
int futhark_entry_mergeSorted_int(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_int **out0, const int64_t in0, const int64_t in1, const struct futhark_i32_1d *in2, const struct futhark_i32_1d *in3);
int futhark_entry_mergeSorted_long(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_long **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3);
int futhark_entry_mergeSorted_short(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_short **out0, const int64_t in0, const int64_t in1, const struct futhark_i16_1d *in2, const struct futhark_i16_1d *in3);
int futhark_entry_mergeTups_double(struct futhark_context *ctx, struct futhark_opaque_mergeTup_double **out0, const struct futhark_f64_1d *in0, const struct futhark_f64_1d *in1);
int futhark_entry_mergeTups_float(struct futhark_context *ctx, struct futhark_opaque_mergeTup_float **out0, const struct futhark_f32_1d *in0, const struct futhark_f32_1d *in1);
int futhark_entry_mergeTups_int(struct futhark_context *ctx, struct futhark_opaque_mergeTup_int **out0, const struct futhark_i32_1d *in0, const struct futhark_i32_1d *in1);
int futhark_entry_mergeTups_long(struct futhark_context *ctx, struct futhark_opaque_mergeTup_long **out0, const struct futhark_i64_1d *in0, const struct futhark_i64_1d *in1);
int futhark_entry_mergeTups_short(struct futhark_context *ctx, struct futhark_opaque_mergeTup_short **out0, const struct futhark_i16_1d *in0, const struct futhark_i16_1d *in1);
int futhark_entry_orderByIndices_double(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f64_1d *in3);
int futhark_entry_orderByIndices_float(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f32_1d *in3);
int futhark_entry_orderByIndices_int(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i32_1d *in3);
int futhark_entry_orderByIndices_long(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3);
int futhark_entry_orderByIndices_short(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i16_1d *in3);
int futhark_entry_radixSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const int16_t in1, const struct futhark_f64_1d *in2);
int futhark_entry_radixSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const int16_t in1, const struct futhark_f32_1d *in2);
int futhark_entry_radixSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const int16_t in1, const struct futhark_i32_1d *in2);
int futhark_entry_radixSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const int16_t in1, const struct futhark_i64_1d *in2);
int futhark_entry_radixSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const int16_t in1, const struct futhark_i16_1d *in2);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
#define SCALAR_FUN_ATTR static inline
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);
static char *strclone(const char *str);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

static void str_builder_str(struct str_builder *b, const char *s) {
  size_t needed = strlen(s);
  if (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }
  strcpy(b->str+b->used, s);
  b->used += needed;
}

static void str_builder_char(struct str_builder *b, char c) {
  size_t needed = 1;
  if (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }
  b->str[b->used] = c;
  b->str[b->used+1] = 0;
  b->used += needed;
}

static void str_builder_json_str(struct str_builder* sb, const char* s) {
  str_builder_char(sb, '"');
  for (int j = 0; s[j]; j++) {
    char c = s[j];
    switch (c) {
    case '\n':
      str_builder_str(sb, "\\n");
      break;
    case '"':
      str_builder_str(sb, "\\\"");
      break;
    default:
      str_builder_char(sb, c);
    }
  }
  str_builder_char(sb, '"');
}

static char *strclone(const char *str) {
  size_t size = strlen(str) + 1;
  char *copy = (char*) malloc(size);
  if (copy == NULL) {
    return NULL;
  }

  memcpy(copy, str, size);
  return copy;
}

// Assumes NULL-terminated.
static char *strconcat(const char *src_fragments[]) {
  size_t src_len = 0;
  const char **p;

  for (p = src_fragments; *p; p++) {
    src_len += strlen(*p);
  }

  char *src = (char*) malloc(src_len + 1);
  size_t n = 0;
  for (p = src_fragments; *p; p++) {
    strcpy(src + n, *p);
    n += strlen(*p);
  }

  return src;
}

// End of util.h.
// Start of cache.h

#define CACHE_HASH_SIZE 8 // In 32-bit words.

struct cache_hash {
  uint32_t hash[CACHE_HASH_SIZE];
};

// Initialise a blank cache.
static void cache_hash_init(struct cache_hash *c);

// Hash some bytes and add them to the accumulated hash.
static void cache_hash(struct cache_hash *out, const char *in, size_t n);

// Try to restore cache contents from a file with the given name.
// Assumes the cache is invalid if it contains the given hash.
// Allocates memory and reads the cache conents, which is returned in
// *buf with size *buflen.  If the cache is successfully loaded, this
// function returns 0.  Otherwise it returns nonzero.  Errno is set if
// the failure to load the cache is due to anything except invalid
// cache conents.  Note that failing to restore the cache is not
// necessarily a problem: it might just be invalid or not created yet.
static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen);

// Store cache contents in the given file, with the given hash.
static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen);

// Now for the implementation.

static void cache_hash_init(struct cache_hash *c) {
  memset(c->hash, 0, CACHE_HASH_SIZE * sizeof(uint32_t));
}

static void cache_hash(struct cache_hash *out, const char *in, size_t n) {
  // Adaptation of djb2 for larger output size by storing intermediate
  // states.
  uint32_t hash = 5381;
  for (size_t i = 0; i < n; i++) {
    hash = ((hash << 5) + hash) + in[i];
    out->hash[i % CACHE_HASH_SIZE] ^= hash;
  }
}

#define CACHE_HEADER_SIZE 8
static const char cache_header[CACHE_HEADER_SIZE] = "FUTHARK\0";

static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen) {
  FILE *f = fopen(fname, "rb");

  if (f == NULL) {
    return 1;
  }

  char f_header[CACHE_HEADER_SIZE];

  if (fread(f_header, sizeof(char), CACHE_HEADER_SIZE, f) != CACHE_HEADER_SIZE) {
    goto error;
  }

  if (memcmp(f_header, cache_header, CACHE_HEADER_SIZE) != 0) {
    goto error;
  }

  if (fseek(f, 0, SEEK_END) != 0) {
    goto error;
  }
  int64_t f_size = (int64_t)ftell(f);
  if (fseek(f, CACHE_HEADER_SIZE, SEEK_SET) != 0) {
    goto error;
  }

  int64_t expected_size;

  if (fread(&expected_size, sizeof(int64_t), 1, f) != 1) {
    goto error;
  }

  if (f_size != expected_size) {
    errno = 0;
    goto error;
  }

  int32_t f_hash[CACHE_HASH_SIZE];

  if (fread(f_hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (memcmp(f_hash, hash->hash, CACHE_HASH_SIZE) != 0) {
    errno = 0;
    goto error;
  }

  *buflen = f_size - CACHE_HEADER_SIZE - sizeof(int64_t) - CACHE_HASH_SIZE*sizeof(int32_t);
  *buf = malloc(*buflen);
  if (fread(*buf, sizeof(char), *buflen, f) != *buflen) {
    free(*buf);
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen) {
  FILE *f = fopen(fname, "wb");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(cache_header, CACHE_HEADER_SIZE, 1, f) != 1) {
    goto error;
  }

  int64_t size = CACHE_HEADER_SIZE + sizeof(int64_t) + CACHE_HASH_SIZE*sizeof(int32_t) + buflen;

  if (fwrite(&size, sizeof(size), 1, f) != 1) {
    goto error;
  }

  if (fwrite(hash->hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (fwrite(buf, sizeof(unsigned char), buflen, f) != buflen) {
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

// End of cache.h
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

SCALAR_FUN_ATTR uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

SCALAR_FUN_ATTR float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

SCALAR_FUN_ATTR uint16_t halfbitsnextafter(uint16_t from, uint16_t to) {
  int fabs = from & 0x7FFF, tabs = to & 0x7FFF;
  if(fabs > 0x7C00 || tabs > 0x7C00) {
    return ((from&0x7FFF)>0x7C00) ? (from|0x200) : (to|0x200);
  }
  if(from == to || !(fabs|tabs)) {
    return to;
  }
  if(!fabs) {
    return (to&0x8000)+1;
  }
  unsigned int out =
    from +
    (((from>>15)^(unsigned int)((from^(0x8000|(0x8000-(from>>15))))<(to^(0x8000|(0x8000-(to>>15))))))<<1)
    - 1;
  return out;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

static int64_t get_wall_time_ns(void) {
  return get_wall_time() * 1000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.
// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.
// Start of free_list.h.

typedef uintptr_t fl_mem;

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries; // Pointer to entries.
  int capacity;                    // Number of entries.
  int used;                        // Number of valid entries.
  lock_t lock;                     // Thread safety.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
  create_lock(&l->lock);
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  lock_lock(&l->lock);
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      if (i > p) {
        l->entries[i].valid = 0;
      }
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
  lock_unlock(&l->lock);
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
  free_lock(&l->lock);
}

// Not part of the interface, so no locking.
static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem mem, const char *tag) {
  lock_lock(&l->lock);
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
  lock_unlock(&l->lock);
}

// Determine whether this entry in the free list is acceptable for
// satisfying the request.  Not public, so no locking.
static bool free_list_acceptable(size_t size, const char* tag, struct free_list_entry *entry) {
  // We check not just the hard requirement (is the entry acceptable
  // and big enough?) but also put a cap on how much wasted space
  // (internal fragmentation) we allow.  This is necessarily a
  // heuristic, and a crude one.

  if (!entry->valid) {
    return false;
  }

  if (size > entry->size) {
    return false;
  }

  // We know the block fits.  Now the question is whether it is too
  // big.  Our policy is as follows:
  //
  // 1) We don't care about wasted space below 4096 bytes (to avoid
  // churn in tiny allocations).
  //
  // 2) If the tag matches, we allow _any_ amount of wasted space.
  //
  // 3) Otherwise we allow up to 50% wasted space.

  if (entry->size < 4096) {
    return true;
  }

  if (entry->tag == tag) {
    return true;
  }

  if (entry->size < size * 2) {
    return true;
  }

  return false;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size, const char *tag,
                          size_t *size_out, fl_mem *mem_out) {
  lock_lock(&l->lock);
  int size_match = -1;
  int i;
  int ret = 1;
  for (i = 0; i < l->capacity; i++) {
    if (free_list_acceptable(size, tag, &l->entries[i]) &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    ret = 0;
  }
  lock_unlock(&l->lock);
  return ret;
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem *mem_out) {
  lock_lock(&l->lock);
  int ret = 1;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      ret = 0;
      break;
    }
  }
  lock_unlock(&l->lock);
  return ret;
}

// End of free_list.h.
// Start of event_list.h

typedef int (*event_report_fn)(struct str_builder*, void*);

struct event {
  void* data;
  event_report_fn f;
  const char* name;
  char *description;
};

struct event_list {
  struct event *events;
  int num_events;
  int capacity;
};

static void event_list_init(struct event_list *l) {
  l->capacity = 100;
  l->num_events = 0;
  l->events = calloc(l->capacity, sizeof(struct event));
}

static void event_list_free(struct event_list *l) {
  free(l->events);
}

static void add_event_to_list(struct event_list *l,
                              const char* name,
                              char* description,
                              void* data,
                              event_report_fn f) {
  if (l->num_events == l->capacity) {
    l->capacity *= 2;
    l->events = realloc(l->events, l->capacity * sizeof(struct event));
  }
  l->events[l->num_events].name = name;
  l->events[l->num_events].description = description;
  l->events[l->num_events].data = data;
  l->events[l->num_events].f = f;
  l->num_events++;
}

static int report_events_in_list(struct event_list *l,
                                 struct str_builder* sb) {
  int ret = 0;
  for (int i = 0; i < l->num_events; i++) {
    if (i != 0) {
      str_builder_str(sb, ",");
    }
    str_builder_str(sb, "{\"name\":");
    str_builder_json_str(sb, l->events[i].name);
    str_builder_str(sb, ",\"description\":");
    str_builder_json_str(sb, l->events[i].description);
    free(l->events[i].description);
    if (l->events[i].f(sb, l->events[i].data) != 0) {
      ret = 1;
      break;
    }
    str_builder(sb, "}");
  }
  event_list_free(l);
  event_list_init(l);
  return ret;
}

// End of event_list.h

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

SCALAR_FUN_ATTR int32_t futrts_to_bits32(float x);
SCALAR_FUN_ATTR float futrts_from_bits32(int32_t x);

SCALAR_FUN_ATTR uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

SCALAR_FUN_ATTR uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

SCALAR_FUN_ATTR uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

SCALAR_FUN_ATTR uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

SCALAR_FUN_ATTR uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

SCALAR_FUN_ATTR uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

#if ISPC

SCALAR_FUN_ATTR uint8_t udiv8(uint8_t x, uint8_t y) {
  // This strange pattern is used to prevent the ISPC compiler from
  // causing SIGFPEs and bogus results on divisions where inactive lanes
  // have 0-valued divisors. It ensures that any inactive lane instead
  // has a divisor of 1. https://github.com/ispc/ispc/issues/2292
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR uint16_t udiv16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR uint32_t udiv32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return x / ys;
}

SCALAR_FUN_ATTR uint64_t udiv64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return x / ys;
}

SCALAR_FUN_ATTR uint8_t udiv_up8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint16_t udiv_up16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint32_t udiv_up32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint64_t udiv_up64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint8_t umod8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR uint16_t umod16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }


  return x % ys;
}

SCALAR_FUN_ATTR uint32_t umod32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR uint64_t umod64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : (x + y - 1) / ys;
}

SCALAR_FUN_ATTR uint8_t umod_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR uint16_t umod_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR uint32_t umod_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR uint64_t umod_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int8_t sdiv8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int8_t q = x / ys;
  int8_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int16_t sdiv16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int16_t q = x / ys;
  int16_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int32_t sdiv32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  int32_t q = x / ys;
  int32_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int64_t sdiv64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int64_t q = x / ys;
  int64_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int8_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int16_t smod16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int16_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int32_t smod32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int32_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int64_t smod64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  int64_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

SCALAR_FUN_ATTR int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

SCALAR_FUN_ATTR int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

SCALAR_FUN_ATTR int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

SCALAR_FUN_ATTR int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

SCALAR_FUN_ATTR int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

SCALAR_FUN_ATTR int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

SCALAR_FUN_ATTR int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

SCALAR_FUN_ATTR int8_t squot8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int16_t squot16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int32_t squot32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int64_t squot64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

SCALAR_FUN_ATTR int8_t srem8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int16_t srem16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int32_t srem32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int64_t srem64(int64_t x, int64_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x % ys;
}

SCALAR_FUN_ATTR int8_t squot_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int16_t squot_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int32_t squot_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int64_t squot_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x / ys;
}

SCALAR_FUN_ATTR int8_t srem_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int16_t srem_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int32_t srem_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

SCALAR_FUN_ATTR int64_t srem_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return y == 0 ? 0 : x % ys;
}

#else

SCALAR_FUN_ATTR uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

SCALAR_FUN_ATTR uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

SCALAR_FUN_ATTR uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

SCALAR_FUN_ATTR uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

SCALAR_FUN_ATTR int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

SCALAR_FUN_ATTR int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

SCALAR_FUN_ATTR int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

SCALAR_FUN_ATTR int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

SCALAR_FUN_ATTR int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

SCALAR_FUN_ATTR int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

SCALAR_FUN_ATTR int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

SCALAR_FUN_ATTR int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

SCALAR_FUN_ATTR int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

SCALAR_FUN_ATTR int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

SCALAR_FUN_ATTR int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

SCALAR_FUN_ATTR int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

SCALAR_FUN_ATTR int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

SCALAR_FUN_ATTR int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

SCALAR_FUN_ATTR int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

SCALAR_FUN_ATTR int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

SCALAR_FUN_ATTR int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

SCALAR_FUN_ATTR int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

#endif

SCALAR_FUN_ATTR int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

SCALAR_FUN_ATTR int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

SCALAR_FUN_ATTR uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

SCALAR_FUN_ATTR uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

SCALAR_FUN_ATTR uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

SCALAR_FUN_ATTR uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

SCALAR_FUN_ATTR uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

SCALAR_FUN_ATTR uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

SCALAR_FUN_ATTR uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

SCALAR_FUN_ATTR uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

SCALAR_FUN_ATTR bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool slt8(int8_t x, int8_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool slt16(int16_t x, int16_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool slt32(int32_t x, int32_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool slt64(int64_t x, int64_t y) {
  return x < y;
}

SCALAR_FUN_ATTR bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

SCALAR_FUN_ATTR uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

SCALAR_FUN_ATTR bool itob_i8_bool(int8_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR bool itob_i16_bool(int16_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR bool itob_i32_bool(int32_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR bool itob_i64_bool(int64_t x) {
  return x != 0;
}

SCALAR_FUN_ATTR int8_t btoi_bool_i8(bool x) {
  return x;
}

SCALAR_FUN_ATTR int16_t btoi_bool_i16(bool x) {
  return x;
}

SCALAR_FUN_ATTR int32_t btoi_bool_i32(bool x) {
  return x;
}

SCALAR_FUN_ATTR int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

SCALAR_FUN_ATTR int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

SCALAR_FUN_ATTR int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

SCALAR_FUN_ATTR int32_t abs32(int32_t x) {
  return abs(x);
}

SCALAR_FUN_ATTR int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__) || defined(ISPC)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

SCALAR_FUN_ATTR int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

SCALAR_FUN_ATTR int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

SCALAR_FUN_ATTR int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

SCALAR_FUN_ATTR int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

SCALAR_FUN_ATTR int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

SCALAR_FUN_ATTR int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

SCALAR_FUN_ATTR int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

SCALAR_FUN_ATTR int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR uint8_t  futrts_umul_hi8 ( uint8_t a,  uint8_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint8_t  futrts_smul_hi8 ( int8_t a,  int8_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint16_t futrts_smul_hi16(int16_t a, int16_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint32_t futrts_smul_hi32(int32_t a, int32_t b) { return mul_hi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_smul_hi64(int64_t a, int64_t b) { return mul_hi(a, b); }
#elif defined(__CUDA_ARCH__)
SCALAR_FUN_ATTR  uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return __umulhi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return __umul64hi(a, b); }
SCALAR_FUN_ATTR  uint8_t futrts_smul_hi8 ( int8_t a, int8_t b) { return ((int16_t)a) * ((int16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((int32_t)a) * ((int32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_smul_hi32(int32_t a, int32_t b) { return __mulhi(a, b); }
SCALAR_FUN_ATTR uint64_t futrts_smul_hi64(int64_t a, int64_t b) { return __mul64hi(a, b); }
#elif ISPC
SCALAR_FUN_ATTR uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 = al * bl;
  uint64_t p2 = al * bh;
  uint64_t p3 = ah * bl;
  uint64_t p4 = ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}
SCALAR_FUN_ATTR  int8_t futrts_smul_hi8 ( int8_t a,  int8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR int16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR int32_t futrts_smul_hi32(int32_t a, int32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
SCALAR_FUN_ATTR int64_t futrts_smul_hi64(int64_t a, int64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 =  al * bl;
  int64_t  p2 = al * bh;
  int64_t  p3 = ah * bl;
  uint64_t p4 =  ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}

#else // Not OpenCL, ISPC, or CUDA, but plain C.
SCALAR_FUN_ATTR uint8_t futrts_umul_hi8(uint8_t a, uint8_t b) { return ((uint16_t)a) * ((uint16_t)b) >> 8; }
SCALAR_FUN_ATTR uint16_t futrts_umul_hi16(uint16_t a, uint16_t b) { return ((uint32_t)a) * ((uint32_t)b) >> 16; }
SCALAR_FUN_ATTR uint32_t futrts_umul_hi32(uint32_t a, uint32_t b) { return ((uint64_t)a) * ((uint64_t)b) >> 32; }
SCALAR_FUN_ATTR uint64_t futrts_umul_hi64(uint64_t a, uint64_t b) { return ((__uint128_t)a) * ((__uint128_t)b) >> 64; }
SCALAR_FUN_ATTR int8_t futrts_smul_hi8(int8_t a, int8_t b) { return ((int16_t)a) * ((int16_t)b) >> 8; }
SCALAR_FUN_ATTR int16_t futrts_smul_hi16(int16_t a, int16_t b) { return ((int32_t)a) * ((int32_t)b) >> 16; }
SCALAR_FUN_ATTR int32_t futrts_smul_hi32(int32_t a, int32_t b) { return ((int64_t)a) * ((int64_t)b) >> 32; }
SCALAR_FUN_ATTR int64_t futrts_smul_hi64(int64_t a, int64_t b) { return ((__int128_t)a) * ((__int128_t)b) >> 64; }
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR  uint8_t futrts_umad_hi8 ( uint8_t a,  uint8_t b,  uint8_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint16_t futrts_umad_hi16(uint16_t a, uint16_t b, uint16_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint32_t futrts_umad_hi32(uint32_t a, uint32_t b, uint32_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint64_t futrts_umad_hi64(uint64_t a, uint64_t b, uint64_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR  uint8_t futrts_smad_hi8( int8_t a,  int8_t b,   int8_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint16_t futrts_smad_hi16(int16_t a, int16_t b, int16_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint32_t futrts_smad_hi32(int32_t a, int32_t b, int32_t c) { return mad_hi(a, b, c); }
SCALAR_FUN_ATTR uint64_t futrts_smad_hi64(int64_t a, int64_t b, int64_t c) { return mad_hi(a, b, c); }
#else // Not OpenCL

SCALAR_FUN_ATTR  uint8_t futrts_umad_hi8( uint8_t a,  uint8_t b,  uint8_t c) { return futrts_umul_hi8(a, b) + c; }
SCALAR_FUN_ATTR uint16_t futrts_umad_hi16(uint16_t a, uint16_t b, uint16_t c) { return futrts_umul_hi16(a, b) + c; }
SCALAR_FUN_ATTR uint32_t futrts_umad_hi32(uint32_t a, uint32_t b, uint32_t c) { return futrts_umul_hi32(a, b) + c; }
SCALAR_FUN_ATTR uint64_t futrts_umad_hi64(uint64_t a, uint64_t b, uint64_t c) { return futrts_umul_hi64(a, b) + c; }
SCALAR_FUN_ATTR  uint8_t futrts_smad_hi8 ( int8_t a,  int8_t b,  int8_t c) { return futrts_smul_hi8(a, b) + c; }
SCALAR_FUN_ATTR uint16_t futrts_smad_hi16(int16_t a, int16_t b, int16_t c) { return futrts_smul_hi16(a, b) + c; }
SCALAR_FUN_ATTR uint32_t futrts_smad_hi32(int32_t a, int32_t b, int32_t c) { return futrts_smul_hi32(a, b) + c; }
SCALAR_FUN_ATTR uint64_t futrts_smad_hi64(int64_t a, int64_t b, int64_t c) { return futrts_smul_hi64(a, b) + c; }
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#elif ISPC

SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return count_leading_zeros((int32_t)(uint8_t)x)-24;
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return count_leading_zeros((int32_t)(uint16_t)x)-16;
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return count_leading_zeros(x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return count_leading_zeros(x);
}

#else // Not OpenCL, ISPC or CUDA, but plain C.

SCALAR_FUN_ATTR int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

SCALAR_FUN_ATTR int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

SCALAR_FUN_ATTR int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#elif ISPC

SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : count_trailing_zeros((int32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : count_trailing_zeros((int32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  return count_trailing_zeros(x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  return count_trailing_zeros(x);
}

#else // Not OpenCL or CUDA, but plain C.

SCALAR_FUN_ATTR int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

SCALAR_FUN_ATTR int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

SCALAR_FUN_ATTR float fdiv32(float x, float y) {
  return x / y;
}

SCALAR_FUN_ATTR float fadd32(float x, float y) {
  return x + y;
}

SCALAR_FUN_ATTR float fsub32(float x, float y) {
  return x - y;
}

SCALAR_FUN_ATTR float fmul32(float x, float y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt32(float x, float y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple32(float x, float y) {
  return x <= y;
}

SCALAR_FUN_ATTR float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

SCALAR_FUN_ATTR float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
SCALAR_FUN_ATTR float fabs32(float x) {
  return fabs(x);
}

SCALAR_FUN_ATTR float fmax32(float x, float y) {
  return fmax(x, y);
}

SCALAR_FUN_ATTR float fmin32(float x, float y) {
  return fmin(x, y);
}

SCALAR_FUN_ATTR float fpow32(float x, float y) {
  return pow(x, y);
}

#elif ISPC

SCALAR_FUN_ATTR float fabs32(float x) {
  return abs(x);
}

SCALAR_FUN_ATTR float fmax32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

SCALAR_FUN_ATTR float fmin32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

SCALAR_FUN_ATTR float fpow32(float a, float b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

#else // Not OpenCL, but CUDA or plain C.

SCALAR_FUN_ATTR float fabs32(float x) {
  return fabsf(x);
}

SCALAR_FUN_ATTR float fmax32(float x, float y) {
  return fmaxf(x, y);
}

SCALAR_FUN_ATTR float fmin32(float x, float y) {
  return fminf(x, y);
}

SCALAR_FUN_ATTR float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

SCALAR_FUN_ATTR bool futrts_isnan32(float x) {
  return isnan(x);
}

#if ISPC

SCALAR_FUN_ATTR bool futrts_isinf32(float x) {
  return !isnan(x) && isnan(x - x);
}

SCALAR_FUN_ATTR bool futrts_isfinite32(float x) {
  return !isnan(x) && !futrts_isinf32(x);
}

#else

SCALAR_FUN_ATTR bool futrts_isinf32(float x) {
  return isinf(x);
}

#endif

SCALAR_FUN_ATTR int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

SCALAR_FUN_ATTR int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

SCALAR_FUN_ATTR int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

SCALAR_FUN_ATTR int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

SCALAR_FUN_ATTR uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

SCALAR_FUN_ATTR uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

SCALAR_FUN_ATTR uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

SCALAR_FUN_ATTR uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

SCALAR_FUN_ATTR bool ftob_f32_bool(float x) {
  return x != 0;
}

SCALAR_FUN_ATTR float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
SCALAR_FUN_ATTR float futrts_log32(float x) {
  return log(x);
}

SCALAR_FUN_ATTR float futrts_log2_32(float x) {
  return log2(x);
}

SCALAR_FUN_ATTR float futrts_log10_32(float x) {
  return log10(x);
}

SCALAR_FUN_ATTR float futrts_log1p_32(float x) {
  return log1p(x);
}

SCALAR_FUN_ATTR float futrts_sqrt32(float x) {
  return sqrt(x);
}

SCALAR_FUN_ATTR float futrts_cbrt32(float x) {
  return cbrt(x);
}

SCALAR_FUN_ATTR float futrts_exp32(float x) {
  return exp(x);
}

SCALAR_FUN_ATTR float futrts_cos32(float x) {
  return cos(x);
}

SCALAR_FUN_ATTR float futrts_sin32(float x) {
  return sin(x);
}

SCALAR_FUN_ATTR float futrts_tan32(float x) {
  return tan(x);
}

SCALAR_FUN_ATTR float futrts_acos32(float x) {
  return acos(x);
}

SCALAR_FUN_ATTR float futrts_asin32(float x) {
  return asin(x);
}

SCALAR_FUN_ATTR float futrts_atan32(float x) {
  return atan(x);
}

SCALAR_FUN_ATTR float futrts_cosh32(float x) {
  return cosh(x);
}

SCALAR_FUN_ATTR float futrts_sinh32(float x) {
  return sinh(x);
}

SCALAR_FUN_ATTR float futrts_tanh32(float x) {
  return tanh(x);
}

SCALAR_FUN_ATTR float futrts_acosh32(float x) {
  return acosh(x);
}

SCALAR_FUN_ATTR float futrts_asinh32(float x) {
  return asinh(x);
}

SCALAR_FUN_ATTR float futrts_atanh32(float x) {
  return atanh(x);
}

SCALAR_FUN_ATTR float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

SCALAR_FUN_ATTR float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

SCALAR_FUN_ATTR float futrts_gamma32(float x) {
  return tgamma(x);
}

SCALAR_FUN_ATTR float futrts_lgamma32(float x) {
  return lgamma(x);
}

SCALAR_FUN_ATTR float futrts_erf32(float x) {
  return erf(x);
}

SCALAR_FUN_ATTR float futrts_erfc32(float x) {
  return erfc(x);
}

SCALAR_FUN_ATTR float fmod32(float x, float y) {
  return fmod(x, y);
}

SCALAR_FUN_ATTR float futrts_round32(float x) {
  return rint(x);
}

SCALAR_FUN_ATTR float futrts_floor32(float x) {
  return floor(x);
}

SCALAR_FUN_ATTR float futrts_ceil32(float x) {
  return ceil(x);
}

SCALAR_FUN_ATTR float futrts_nextafter32(float x, float y) {
  return nextafter(x, y);
}

SCALAR_FUN_ATTR float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

SCALAR_FUN_ATTR float futrts_ldexp32(float x, int32_t y) {
  return ldexp(x, y);
}

SCALAR_FUN_ATTR float futrts_copysign32(float x, float y) {
  return copysign(x, y);
}

SCALAR_FUN_ATTR float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

SCALAR_FUN_ATTR float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#elif ISPC

SCALAR_FUN_ATTR float futrts_log32(float x) {
  return futrts_isfinite32(x) || (futrts_isinf32(x) && x < 0)? log(x) : x;
}

SCALAR_FUN_ATTR float futrts_log2_32(float x) {
  return futrts_log32(x) / log(2.0f);
}

SCALAR_FUN_ATTR float futrts_log10_32(float x) {
  return futrts_log32(x) / log(10.0f);
}

SCALAR_FUN_ATTR float futrts_log1p_32(float x) {
  if(x == -1.0f || (futrts_isinf32(x) && x > 0.0f)) return x / 0.0f;
  float y = 1.0f + x;
  float z = y - 1.0f;
  return log(y) - (z-x)/y;
}

SCALAR_FUN_ATTR float futrts_sqrt32(float x) {
  return sqrt(x);
}

extern "C" unmasked uniform float cbrtf(uniform float);
SCALAR_FUN_ATTR float futrts_cbrt32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR float futrts_exp32(float x) {
  return exp(x);
}

SCALAR_FUN_ATTR float futrts_cos32(float x) {
  return cos(x);
}

SCALAR_FUN_ATTR float futrts_sin32(float x) {
  return sin(x);
}

SCALAR_FUN_ATTR float futrts_tan32(float x) {
  return tan(x);
}

SCALAR_FUN_ATTR float futrts_acos32(float x) {
  return acos(x);
}

SCALAR_FUN_ATTR float futrts_asin32(float x) {
  return asin(x);
}

SCALAR_FUN_ATTR float futrts_atan32(float x) {
  return atan(x);
}

SCALAR_FUN_ATTR float futrts_cosh32(float x) {
  return (exp(x)+exp(-x)) / 2.0f;
}

SCALAR_FUN_ATTR float futrts_sinh32(float x) {
  return (exp(x)-exp(-x)) / 2.0f;
}

SCALAR_FUN_ATTR float futrts_tanh32(float x) {
  return futrts_sinh32(x)/futrts_cosh32(x);
}

SCALAR_FUN_ATTR float futrts_acosh32(float x) {
  float f = x+sqrt(x*x-1);
  if(futrts_isfinite32(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR float futrts_asinh32(float x) {
  float f = x+sqrt(x*x+1);
  if(futrts_isfinite32(f)) return log(f);
  return f;

}

SCALAR_FUN_ATTR float futrts_atanh32(float x) {
  float f = (1+x)/(1-x);
  if(futrts_isfinite32(f)) return log(f)/2.0f;
  return f;

}

SCALAR_FUN_ATTR float futrts_atan2_32(float x, float y) {
  return (x == 0.0f && y == 0.0f) ? 0.0f : atan2(x, y);
}

SCALAR_FUN_ATTR float futrts_hypot32(float x, float y) {
  if (futrts_isfinite32(x) && futrts_isfinite32(y)) {
    x = abs(x);
    y = abs(y);
    float a;
    float b;
    if (x >= y){
        a = x;
        b = y;
    } else {
        a = y;
        b = x;
    }
    if(b == 0){
      return a;
    }

    int e;
    float an;
    float bn;
    an = frexp (a, &e);
    bn = ldexp (b, - e);
    float cn;
    cn = sqrt (an * an + bn * bn);
    return ldexp (cn, e);
  } else {
    if (futrts_isinf32(x) || futrts_isinf32(y)) return INFINITY;
    else return x + y;
  }

}

extern "C" unmasked uniform float tgammaf(uniform float x);
SCALAR_FUN_ATTR float futrts_gamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = tgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
SCALAR_FUN_ATTR float futrts_lgamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = lgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erff(uniform float x);
SCALAR_FUN_ATTR float futrts_erf32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erff(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erfcf(uniform float x);
SCALAR_FUN_ATTR float futrts_erfc32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erfcf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR float fmod32(float x, float y) {
  return x - y * trunc(x/y);
}

SCALAR_FUN_ATTR float futrts_round32(float x) {
  return round(x);
}

SCALAR_FUN_ATTR float futrts_floor32(float x) {
  return floor(x);
}

SCALAR_FUN_ATTR float futrts_ceil32(float x) {
  return ceil(x);
}

extern "C" unmasked uniform float nextafterf(uniform float x, uniform float y);
SCALAR_FUN_ATTR float futrts_nextafter32(float x, float y) {
  float res;
  foreach_active (i) {
    uniform float r = nextafterf(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR float futrts_ldexp32(float x, int32_t y) {
  return x * pow((double)2.0, (double)y);
}

SCALAR_FUN_ATTR float futrts_copysign32(float x, float y) {
  int32_t xb = futrts_to_bits32(x);
  int32_t yb = futrts_to_bits32(y);
  return futrts_from_bits32((xb & ~(1<<31)) | (yb & (1<<31)));
}

SCALAR_FUN_ATTR float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

SCALAR_FUN_ATTR float futrts_fma32(float a, float b, float c) {
  return a * b + c;
}

#else // Not OpenCL or ISPC, but CUDA or plain C.

SCALAR_FUN_ATTR float futrts_log32(float x) {
  return logf(x);
}

SCALAR_FUN_ATTR float futrts_log2_32(float x) {
  return log2f(x);
}

SCALAR_FUN_ATTR float futrts_log10_32(float x) {
  return log10f(x);
}

SCALAR_FUN_ATTR float futrts_log1p_32(float x) {
  return log1pf(x);
}

SCALAR_FUN_ATTR float futrts_sqrt32(float x) {
  return sqrtf(x);
}

SCALAR_FUN_ATTR float futrts_cbrt32(float x) {
  return cbrtf(x);
}

SCALAR_FUN_ATTR float futrts_exp32(float x) {
  return expf(x);
}

SCALAR_FUN_ATTR float futrts_cos32(float x) {
  return cosf(x);
}

SCALAR_FUN_ATTR float futrts_sin32(float x) {
  return sinf(x);
}

SCALAR_FUN_ATTR float futrts_tan32(float x) {
  return tanf(x);
}

SCALAR_FUN_ATTR float futrts_acos32(float x) {
  return acosf(x);
}

SCALAR_FUN_ATTR float futrts_asin32(float x) {
  return asinf(x);
}

SCALAR_FUN_ATTR float futrts_atan32(float x) {
  return atanf(x);
}

SCALAR_FUN_ATTR float futrts_cosh32(float x) {
  return coshf(x);
}

SCALAR_FUN_ATTR float futrts_sinh32(float x) {
  return sinhf(x);
}

SCALAR_FUN_ATTR float futrts_tanh32(float x) {
  return tanhf(x);
}

SCALAR_FUN_ATTR float futrts_acosh32(float x) {
  return acoshf(x);
}

SCALAR_FUN_ATTR float futrts_asinh32(float x) {
  return asinhf(x);
}

SCALAR_FUN_ATTR float futrts_atanh32(float x) {
  return atanhf(x);
}

SCALAR_FUN_ATTR float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

SCALAR_FUN_ATTR float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

SCALAR_FUN_ATTR float futrts_gamma32(float x) {
  return tgammaf(x);
}

SCALAR_FUN_ATTR float futrts_lgamma32(float x) {
  return lgammaf(x);
}

SCALAR_FUN_ATTR float futrts_erf32(float x) {
  return erff(x);
}

SCALAR_FUN_ATTR float futrts_erfc32(float x) {
  return erfcf(x);
}

SCALAR_FUN_ATTR float fmod32(float x, float y) {
  return fmodf(x, y);
}

SCALAR_FUN_ATTR float futrts_round32(float x) {
  return rintf(x);
}

SCALAR_FUN_ATTR float futrts_floor32(float x) {
  return floorf(x);
}

SCALAR_FUN_ATTR float futrts_ceil32(float x) {
  return ceilf(x);
}

SCALAR_FUN_ATTR float futrts_nextafter32(float x, float y) {
  return nextafterf(x, y);
}

SCALAR_FUN_ATTR float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR float futrts_ldexp32(float x, int32_t y) {
  return ldexpf(x, y);
}

SCALAR_FUN_ATTR float futrts_copysign32(float x, float y) {
  return copysignf(x, y);
}

SCALAR_FUN_ATTR float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

SCALAR_FUN_ATTR float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

#if ISPC
SCALAR_FUN_ATTR int32_t futrts_to_bits32(float x) {
  return intbits(x);
}

SCALAR_FUN_ATTR float futrts_from_bits32(int32_t x) {
  return floatbits(x);
}
#else
SCALAR_FUN_ATTR int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}
#endif

SCALAR_FUN_ATTR float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#ifdef FUTHARK_F64_ENABLED

SCALAR_FUN_ATTR double futrts_from_bits64(int64_t x);
SCALAR_FUN_ATTR int64_t futrts_to_bits64(double x);

#if ISPC
SCALAR_FUN_ATTR bool futrts_isinf64(float x) {
  return !isnan(x) && isnan(x - x);
}

SCALAR_FUN_ATTR bool futrts_isfinite64(float x) {
  return !isnan(x) && !futrts_isinf64(x);
}

SCALAR_FUN_ATTR double fdiv64(double x, double y) {
  return x / y;
}

SCALAR_FUN_ATTR double fadd64(double x, double y) {
  return x + y;
}

SCALAR_FUN_ATTR double fsub64(double x, double y) {
  return x - y;
}

SCALAR_FUN_ATTR double fmul64(double x, double y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt64(double x, double y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple64(double x, double y) {
  return x <= y;
}

SCALAR_FUN_ATTR double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double fabs64(double x) {
  return abs(x);
}

SCALAR_FUN_ATTR double fmax64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

SCALAR_FUN_ATTR double fmin64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

SCALAR_FUN_ATTR double fpow64(double a, double b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

SCALAR_FUN_ATTR double futrts_log64(double x) {
  return futrts_isfinite64(x) || (futrts_isinf64(x) && x < 0)? log(x) : x;
}

SCALAR_FUN_ATTR double futrts_log2_64(double x) {
  return futrts_log64(x)/log(2.0d);
}

SCALAR_FUN_ATTR double futrts_log10_64(double x) {
  return futrts_log64(x)/log(10.0d);
}

SCALAR_FUN_ATTR double futrts_log1p_64(double x) {
  if(x == -1.0d || (futrts_isinf64(x) && x > 0.0d)) return x / 0.0d;
  double y = 1.0d + x;
  double z = y - 1.0d;
  return log(y) - (z-x)/y;
}

SCALAR_FUN_ATTR double futrts_sqrt64(double x) {
  return sqrt(x);
}

extern "C" unmasked uniform double cbrt(uniform double);
SCALAR_FUN_ATTR double futrts_cbrt64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_exp64(double x) {
  return exp(x);
}

SCALAR_FUN_ATTR double futrts_cos64(double x) {
  return cos(x);
}

SCALAR_FUN_ATTR double futrts_sin64(double x) {
  return sin(x);
}

SCALAR_FUN_ATTR double futrts_tan64(double x) {
  return tan(x);
}

SCALAR_FUN_ATTR double futrts_acos64(double x) {
  return acos(x);
}

SCALAR_FUN_ATTR double futrts_asin64(double x) {
  return asin(x);
}

SCALAR_FUN_ATTR double futrts_atan64(double x) {
  return atan(x);
}

SCALAR_FUN_ATTR double futrts_cosh64(double x) {
  return (exp(x)+exp(-x)) / 2.0d;
}

SCALAR_FUN_ATTR double futrts_sinh64(double x) {
  return (exp(x)-exp(-x)) / 2.0d;
}

SCALAR_FUN_ATTR double futrts_tanh64(double x) {
  return futrts_sinh64(x)/futrts_cosh64(x);
}

SCALAR_FUN_ATTR double futrts_acosh64(double x) {
  double f = x+sqrt(x*x-1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR double futrts_asinh64(double x) {
  double f = x+sqrt(x*x+1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR double futrts_atanh64(double x) {
  double f = (1.0d+x)/(1.0d-x);
  if(futrts_isfinite64(f)) return log(f)/2.0d;
  return f;

}

SCALAR_FUN_ATTR double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

extern "C" unmasked uniform double hypot(uniform double x, uniform double y);
SCALAR_FUN_ATTR double futrts_hypot64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = hypot(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double tgamma(uniform double x);
SCALAR_FUN_ATTR double futrts_gamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = tgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double lgamma(uniform double x);
SCALAR_FUN_ATTR double futrts_lgamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = lgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erf(uniform double x);
SCALAR_FUN_ATTR double futrts_erf64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erfc(uniform double x);
SCALAR_FUN_ATTR double futrts_erfc64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erfc(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_fma64(double a, double b, double c) {
  return a * b + c;
}

SCALAR_FUN_ATTR double futrts_round64(double x) {
  return round(x);
}

SCALAR_FUN_ATTR double futrts_ceil64(double x) {
  return ceil(x);
}

extern "C" unmasked uniform double nextafter(uniform float x, uniform double y);
SCALAR_FUN_ATTR float futrts_nextafter64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = nextafter(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_floor64(double x) {
  return floor(x);
}

SCALAR_FUN_ATTR bool futrts_isnan64(double x) {
  return isnan(x);
}

SCALAR_FUN_ATTR int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

SCALAR_FUN_ATTR int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

SCALAR_FUN_ATTR int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

SCALAR_FUN_ATTR int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

SCALAR_FUN_ATTR uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

SCALAR_FUN_ATTR uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

SCALAR_FUN_ATTR uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

SCALAR_FUN_ATTR uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

SCALAR_FUN_ATTR bool ftob_f64_bool(double x) {
  return x != 0.0;
}

SCALAR_FUN_ATTR double btof_bool_f64(bool x) {
  return x ? 1.0 : 0.0;
}

SCALAR_FUN_ATTR int64_t futrts_to_bits64(double x) {
  int64_t res;
  foreach_active (i) {
    uniform double tmp = extract(x, i);
    uniform int64_t r = *((uniform int64_t* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double futrts_from_bits64(int64_t x) {
  double res;
  foreach_active (i) {
    uniform int64_t tmp = extract(x, i);
    uniform double r = *((uniform double* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR double fmod64(double x, double y) {
  return x - y * trunc(x/y);
}

SCALAR_FUN_ATTR double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0 ? 1.0d : 0.0d) - (x < 0 ? 1.0d : 0.0d);
}

SCALAR_FUN_ATTR double futrts_lerp64(double v0, double v1, double t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR double futrts_ldexp64(double x, int32_t y) {
  return x * pow((double)2.0, (double)y);
}

SCALAR_FUN_ATTR double futrts_copysign64(double x, double y) {
  int64_t xb = futrts_to_bits64(x);
  int64_t yb = futrts_to_bits64(y);
  return futrts_from_bits64((xb & ~(((int64_t)1)<<63)) | (yb & (((int64_t)1)<<63)));
}

SCALAR_FUN_ATTR double futrts_mad64(double a, double b, double c) {
  return a * b + c;
}

SCALAR_FUN_ATTR float fpconv_f32_f32(float x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f32_f64(float x) {
  return (double) x;
}

SCALAR_FUN_ATTR float fpconv_f64_f32(double x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f64_f64(double x) {
  return (double) x;
}

#else

SCALAR_FUN_ATTR double fdiv64(double x, double y) {
  return x / y;
}

SCALAR_FUN_ATTR double fadd64(double x, double y) {
  return x + y;
}

SCALAR_FUN_ATTR double fsub64(double x, double y) {
  return x - y;
}

SCALAR_FUN_ATTR double fmul64(double x, double y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt64(double x, double y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple64(double x, double y) {
  return x <= y;
}

SCALAR_FUN_ATTR double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

SCALAR_FUN_ATTR double fabs64(double x) {
  return fabs(x);
}

SCALAR_FUN_ATTR double fmax64(double x, double y) {
  return fmax(x, y);
}

SCALAR_FUN_ATTR double fmin64(double x, double y) {
  return fmin(x, y);
}

SCALAR_FUN_ATTR double fpow64(double x, double y) {
  return pow(x, y);
}

SCALAR_FUN_ATTR double futrts_log64(double x) {
  return log(x);
}

SCALAR_FUN_ATTR double futrts_log2_64(double x) {
  return log2(x);
}

SCALAR_FUN_ATTR double futrts_log10_64(double x) {
  return log10(x);
}

SCALAR_FUN_ATTR double futrts_log1p_64(double x) {
  return log1p(x);
}

SCALAR_FUN_ATTR double futrts_sqrt64(double x) {
  return sqrt(x);
}

SCALAR_FUN_ATTR double futrts_cbrt64(double x) {
  return cbrt(x);
}

SCALAR_FUN_ATTR double futrts_exp64(double x) {
  return exp(x);
}

SCALAR_FUN_ATTR double futrts_cos64(double x) {
  return cos(x);
}

SCALAR_FUN_ATTR double futrts_sin64(double x) {
  return sin(x);
}

SCALAR_FUN_ATTR double futrts_tan64(double x) {
  return tan(x);
}

SCALAR_FUN_ATTR double futrts_acos64(double x) {
  return acos(x);
}

SCALAR_FUN_ATTR double futrts_asin64(double x) {
  return asin(x);
}

SCALAR_FUN_ATTR double futrts_atan64(double x) {
  return atan(x);
}

SCALAR_FUN_ATTR double futrts_cosh64(double x) {
  return cosh(x);
}

SCALAR_FUN_ATTR double futrts_sinh64(double x) {
  return sinh(x);
}

SCALAR_FUN_ATTR double futrts_tanh64(double x) {
  return tanh(x);
}

SCALAR_FUN_ATTR double futrts_acosh64(double x) {
  return acosh(x);
}

SCALAR_FUN_ATTR double futrts_asinh64(double x) {
  return asinh(x);
}

SCALAR_FUN_ATTR double futrts_atanh64(double x) {
  return atanh(x);
}

SCALAR_FUN_ATTR double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

SCALAR_FUN_ATTR double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

SCALAR_FUN_ATTR double futrts_gamma64(double x) {
  return tgamma(x);
}

SCALAR_FUN_ATTR double futrts_lgamma64(double x) {
  return lgamma(x);
}

SCALAR_FUN_ATTR double futrts_erf64(double x) {
  return erf(x);
}

SCALAR_FUN_ATTR double futrts_erfc64(double x) {
  return erfc(x);
}

SCALAR_FUN_ATTR double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

SCALAR_FUN_ATTR double futrts_round64(double x) {
  return rint(x);
}

SCALAR_FUN_ATTR double futrts_ceil64(double x) {
  return ceil(x);
}

SCALAR_FUN_ATTR float futrts_nextafter64(float x, float y) {
  return nextafter(x, y);
}

SCALAR_FUN_ATTR double futrts_floor64(double x) {
  return floor(x);
}

SCALAR_FUN_ATTR bool futrts_isnan64(double x) {
  return isnan(x);
}

SCALAR_FUN_ATTR bool futrts_isinf64(double x) {
  return isinf(x);
}

SCALAR_FUN_ATTR int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

SCALAR_FUN_ATTR int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

SCALAR_FUN_ATTR int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

SCALAR_FUN_ATTR int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

SCALAR_FUN_ATTR uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

SCALAR_FUN_ATTR uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

SCALAR_FUN_ATTR uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

SCALAR_FUN_ATTR uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

SCALAR_FUN_ATTR bool ftob_f64_bool(double x) {
  return x != 0;
}

SCALAR_FUN_ATTR double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

SCALAR_FUN_ATTR int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR double fmod64(double x, double y) {
  return fmod(x, y);
}

SCALAR_FUN_ATTR double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

SCALAR_FUN_ATTR double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

SCALAR_FUN_ATTR double futrts_ldexp64(double x, int32_t y) {
  return ldexp(x, y);
}

SCALAR_FUN_ATTR float futrts_copysign64(double x, double y) {
  return copysign(x, y);
}

SCALAR_FUN_ATTR double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

SCALAR_FUN_ATTR float fpconv_f32_f32(float x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f32_f64(float x) {
  return (double) x;
}

SCALAR_FUN_ATTR float fpconv_f64_f32(double x) {
  return (float) x;
}

SCALAR_FUN_ATTR double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600) && !(defined(ISPC))
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#elif ISPC
typedef float16 f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

SCALAR_FUN_ATTR f16 fadd16(f16 x, f16 y) {
  return x + y;
}

SCALAR_FUN_ATTR f16 fsub16(f16 x, f16 y) {
  return x - y;
}

SCALAR_FUN_ATTR f16 fmul16(f16 x, f16 y) {
  return x * y;
}

SCALAR_FUN_ATTR bool cmplt16(f16 x, f16 y) {
  return x < y;
}

SCALAR_FUN_ATTR bool cmple16(f16 x, f16 y) {
  return x <= y;
}

SCALAR_FUN_ATTR f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

SCALAR_FUN_ATTR int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

SCALAR_FUN_ATTR int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

SCALAR_FUN_ATTR int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

SCALAR_FUN_ATTR int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

SCALAR_FUN_ATTR uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

SCALAR_FUN_ATTR uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

SCALAR_FUN_ATTR uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

SCALAR_FUN_ATTR uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

SCALAR_FUN_ATTR bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

SCALAR_FUN_ATTR f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16
SCALAR_FUN_ATTR bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

#ifdef __OPENCL_VERSION__

SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return fabs(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#elif ISPC
SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return abs(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : max(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : min(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return fabsf(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

#if ISPC
SCALAR_FUN_ATTR bool futrts_isinf16(float x) {
  return !futrts_isnan16(x) && futrts_isnan16(x - x);
}
SCALAR_FUN_ATTR bool futrts_isfinite16(float x) {
  return !futrts_isnan16(x) && !futrts_isinf16(x);
}

#else

SCALAR_FUN_ATTR bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}
#endif

#ifdef __OPENCL_VERSION__
SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return log(x);
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return log2(x);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return log10(x);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  return log1p(x);
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  return cbrt(x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return exp(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return cos(x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return sin(x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return tan(x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return acos(x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return asin(x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return atan(x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  return erf(x);
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  return erfc(x);
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return rint(x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return floor(x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return nextafter(x, y);
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return ldexp(x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return copysign(x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}
#elif ISPC

SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return futrts_isfinite16(x) || (futrts_isinf16(x) && x < 0) ? log(x) : x;
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return futrts_log16(x) / log(2.0f16);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return futrts_log16(x) / log(10.0f16);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  if(x == -1.0f16 || (futrts_isinf16(x) && x > 0.0f16)) return x / 0.0f16;
  f16 y = 1.0f16 + x;
  f16 z = y - 1.0f16;
  return log(y) - (z-x)/y;
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return (float16)sqrt((float)x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return exp(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return (float16)cos((float)x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return (float16)sin((float)x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return (float16)tan((float)x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return (float16)acos((float)x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return (float16)asin((float)x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return (float16)atan((float)x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return (exp(x)+exp(-x)) / 2.0f16;
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return (exp(x)-exp(-x)) / 2.0f16;
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return futrts_sinh16(x)/futrts_cosh16(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x-1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x+1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  float16 f = (1+x)/(1-x);
  if(futrts_isfinite16(f)) return log(f)/2.0f16;
  return f;
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return (float16)atan2((float)x, (float)y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return (float16)futrts_hypot32((float)x, (float)y);
}

extern "C" unmasked uniform float tgammaf(uniform float x);
SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)tgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)lgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  f16 res = (f16)futrts_cbrt32((float)x);
  return res;
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  f16 res = (f16)futrts_erf32((float)x);
  return res;
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  f16 res = (f16)futrts_erfc32((float)x);
  return res;
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return x - y * (float16)trunc((float) (x/y));
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return (float16)round((float)x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return (float16)floor((float)x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return (float16)ceil((float)x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return (float16)futrts_nextafter32((float)x, (float) y);
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return futrts_ldexp32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return futrts_copysign32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

#else // Assume CUDA.

SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return hlog(x);
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  return (f16)log1pf((float)x);
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  return cbrtf(x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return hexp(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return hcos(x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return hsin(x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return tanf(x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return acosf(x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return asinf(x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return atanf(x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  return erff(x);
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  return erfcf(x);
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return rintf(x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return __ushort_as_half(halfbitsnextafter(__half_as_ushort(x), __half_as_ushort(y)));
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return futrts_ldexp32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return futrts_copysign32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#elif ISPC

SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  varying int16_t y = *((varying int16_t * uniform)&x);
  return y;
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  varying f16 y = *((varying f16 * uniform)&x);
  return y;
}
#else
SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

SCALAR_FUN_ATTR f16 fabs16(f16 x) {
  return fabs32(x);
}

SCALAR_FUN_ATTR f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

SCALAR_FUN_ATTR f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

SCALAR_FUN_ATTR f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

SCALAR_FUN_ATTR bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

SCALAR_FUN_ATTR bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

SCALAR_FUN_ATTR f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

SCALAR_FUN_ATTR f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

SCALAR_FUN_ATTR f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

SCALAR_FUN_ATTR f16 futrts_log1p_16(f16 x) {
  return futrts_log1p_32(x);
}

SCALAR_FUN_ATTR f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

SCALAR_FUN_ATTR f16 futrts_cbrt16(f16 x) {
  return futrts_cbrt32(x);
}

SCALAR_FUN_ATTR f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

SCALAR_FUN_ATTR f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

SCALAR_FUN_ATTR f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

SCALAR_FUN_ATTR f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

SCALAR_FUN_ATTR f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

SCALAR_FUN_ATTR f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

SCALAR_FUN_ATTR f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

SCALAR_FUN_ATTR f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

SCALAR_FUN_ATTR f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

SCALAR_FUN_ATTR f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

SCALAR_FUN_ATTR f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

SCALAR_FUN_ATTR f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

SCALAR_FUN_ATTR f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

SCALAR_FUN_ATTR f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

SCALAR_FUN_ATTR f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

SCALAR_FUN_ATTR f16 futrts_erf16(f16 x) {
  return futrts_erf32(x);
}

SCALAR_FUN_ATTR f16 futrts_erfc16(f16 x) {
  return futrts_erfc32(x);
}

SCALAR_FUN_ATTR f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

SCALAR_FUN_ATTR f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

SCALAR_FUN_ATTR f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

SCALAR_FUN_ATTR f16 futrts_nextafter16(f16 x, f16 y) {
  return halfbits2float(halfbitsnextafter(float2halfbits(x), float2halfbits(y)));
}

SCALAR_FUN_ATTR f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

SCALAR_FUN_ATTR f16 futrts_ldexp16(f16 x, int32_t y) {
  return futrts_ldexp32(x, y);
}

SCALAR_FUN_ATTR f16 futrts_copysign16(f16 x, f16 y) {
  return futrts_copysign32((float)x, y);
}

SCALAR_FUN_ATTR f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

SCALAR_FUN_ATTR f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

SCALAR_FUN_ATTR int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

SCALAR_FUN_ATTR f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

SCALAR_FUN_ATTR f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#endif

#endif

SCALAR_FUN_ATTR float fpconv_f16_f16(f16 x) {
  return x;
}

SCALAR_FUN_ATTR float fpconv_f16_f32(f16 x) {
  return x;
}

SCALAR_FUN_ATTR f16 fpconv_f32_f16(float x) {
  return (f16) x;
}

#ifdef FUTHARK_F64_ENABLED

SCALAR_FUN_ATTR double fpconv_f16_f64(f16 x) {
  return (double) x;
}

#if ISPC
SCALAR_FUN_ATTR f16 fpconv_f64_f16(double x) {
  return (f16) ((float)x);
}
#else
SCALAR_FUN_ATTR f16 fpconv_f64_f16(double x) {
  return (f16) x;
}
#endif
#endif


// End of scalar_f16.h.

// Start of context_prototypes.h
//
// Prototypes for the functions in context.h, or that will be called
// from those functions, that need to be available very early.

struct futhark_context_config;
struct futhark_context;

static void set_error(struct futhark_context* ctx, char *error);

// These are called in context/config new/free functions and contain
// shared setup.  They are generated by the compiler itself.
static int init_constants(struct futhark_context*);
static int free_constants(struct futhark_context*);
static void setup_program(struct futhark_context* ctx);
static void teardown_program(struct futhark_context *ctx);

// Allocate host memory.  Must be freed with host_free().
static void host_alloc(struct futhark_context* ctx, size_t size, const char* tag, size_t* size_out, void** mem_out);
// Allocate memory allocated with host_alloc().
static void host_free(struct futhark_context* ctx, size_t size, const char* tag, void* mem);

// Log that a copy has occurred.
static void log_copy(struct futhark_context* ctx,
                     const char *kind, int r,
                     int64_t dst_offset, int64_t dst_strides[r],
                     int64_t src_offset, int64_t src_strides[r],
                     int64_t shape[r]);

static void log_transpose(struct futhark_context* ctx,
                          int64_t k, int64_t m, int64_t n);

static bool lmad_map_tr(int64_t *num_arrays_out, int64_t *n_out, int64_t *m_out,
                        int r,
                        const int64_t dst_strides[r],
                        const int64_t src_strides[r],
                        const int64_t shape[r]);

static bool lmad_contiguous(int r, int64_t strides[r], int64_t shape[r]);

static bool lmad_memcpyable(int r,
                            int64_t dst_strides[r], int64_t src_strides[r], int64_t shape[r]);

static void add_event(struct futhark_context* ctx,
                      const char* name,
                      char* description,
                      void* data,
                      event_report_fn f);

// Functions that must be defined by the backend.
static void backend_context_config_setup(struct futhark_context_config* cfg);
static void backend_context_config_teardown(struct futhark_context_config* cfg);
static int backend_context_setup(struct futhark_context *ctx);
static void backend_context_teardown(struct futhark_context *ctx);

// End of of context_prototypes.h

struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct constants {
    int dummy;
};
struct tuning_params {
    int dummy;
};
static const int num_tuning_params = 0;
static const char *tuning_param_names[] = {NULL};
static const char *tuning_param_vars[] = {NULL};
static const char *tuning_param_classes[] = {NULL};
static int64_t tuning_param_defaults[] = {0};
// Start of backends/c.h

struct futhark_context_config {
  int in_use;
  int debugging;
  int profiling;
  int logging;
  char *cache_fname;
  int num_tuning_params;
  int64_t *tuning_params;
  const char** tuning_param_names;
  const char** tuning_param_vars;
  const char** tuning_param_classes;
};

static void backend_context_config_setup(struct futhark_context_config* cfg) {
  (void)cfg;
}

static void backend_context_config_teardown(struct futhark_context_config* cfg) {
  (void)cfg;
}

int futhark_context_config_set_tuning_param(struct futhark_context_config* cfg, const char *param_name, size_t param_value) {
  (void)cfg; (void)param_name; (void)param_value;
  return 1;
}

struct futhark_context {
  struct futhark_context_config* cfg;
  int detail_memory;
  int debugging;
  int profiling;
  int profiling_paused;
  int logging;
  lock_t lock;
  char *error;
  lock_t error_lock;
  FILE *log;
  struct constants *constants;
  struct free_list free_list;
  struct event_list event_list;
  int64_t peak_mem_usage_default;
  int64_t cur_mem_usage_default;
  struct program* program;
  bool program_initialised;
};

int backend_context_setup(struct futhark_context* ctx) {
  (void)ctx;
  return 0;
}

void backend_context_teardown(struct futhark_context* ctx) {
  (void)ctx;
}

int futhark_context_sync(struct futhark_context* ctx) {
  (void)ctx;
  return 0;
}

// End of backends/c.h

struct program {
    int dummy;
};
static void setup_program(struct futhark_context *ctx)
{
    (void) ctx;
    
    int error = 0;
    
    (void) error;
    ctx->program = malloc(sizeof(struct program));
}
static void teardown_program(struct futhark_context *ctx)
{
    (void) ctx;
    
    int error = 0;
    
    (void) error;
    free(ctx->program);
}
static void set_tuning_params(struct futhark_context *ctx)
{
    (void) ctx;
}
int memblock_unref(struct futhark_context *ctx, struct memblock *block, const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log, "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n", desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            host_free(ctx, (size_t) block->size, desc, (void *) block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log, "%lld bytes freed (now allocated: %lld bytes)\n", (long long) block->size, (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
int memblock_alloc(struct futhark_context *ctx, struct memblock *block, int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1, "Negative allocation of %lld bytes attempted for %s in %s.\n", (long long) size, desc, "default space", ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log, "Allocating %lld bytes for %s in %s (currently allocated: %lld bytes).\n", (long long) size, desc, "default space", (long long) ctx->cur_mem_usage_default);
    host_alloc(ctx, (size_t) size, desc, (size_t *) &size, (void *) &block->mem);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        
        long long new_usage = ctx->cur_mem_usage_default + size;
        
        if (ctx->detail_memory)
            fprintf(ctx->log, "Received block of %lld bytes; now allocated: %lld bytes", (long long) block->size, new_usage);
        ctx->cur_mem_usage_default = new_usage;
        if (new_usage > ctx->peak_mem_usage_default) {
            ctx->peak_mem_usage_default = new_usage;
            if (ctx->detail_memory)
                fprintf(ctx->log, " (new peak).\n");
        } else if (ctx->detail_memory)
            fprintf(ctx->log, ".\n");
        return FUTHARK_SUCCESS;
    } else {
        // We are naively assuming that any memory allocation error is due to OOM.
        lock_lock(&ctx->error_lock);
        
        char *old_error = ctx->error;
        
        ctx->error = msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s", "default space", (long long) size, (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        lock_unlock(&ctx->error_lock);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
int memblock_set(struct futhark_context *ctx, struct memblock *lhs, struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    str_builder_char(&builder, '{');
    str_builder_str(&builder, "\"memory\":{");
    str_builder(&builder, "\"default space\": %lld", (long long) ctx->peak_mem_usage_default);
    str_builder_str(&builder, "},\"events\":[");
    if (report_events_in_list(&ctx->event_list, &builder) != 0) {
        free(builder.str);
        return NULL;
    } else {
        str_builder_str(&builder, "]}");
        return builder.str;
    }
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

// Start of context.h

// Internal functions.

static void set_error(struct futhark_context* ctx, char *error) {
  lock_lock(&ctx->error_lock);
  if (ctx->error == NULL) {
    ctx->error = error;
  } else {
    free(error);
  }
  lock_unlock(&ctx->error_lock);
}

// XXX: should be static, but used in ispc_util.h
void lexical_realloc_error(struct futhark_context* ctx, size_t new_size) {
  set_error(ctx,
            msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                      (long long) new_size));
}

static int lexical_realloc(struct futhark_context *ctx,
                           unsigned char **ptr,
                           int64_t *old_size,
                           int64_t new_size) {
  unsigned char *new = realloc(*ptr, (size_t)new_size);
  if (new == NULL) {
    lexical_realloc_error(ctx, new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

static void free_all_in_free_list(struct futhark_context* ctx) {
  fl_mem mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, (fl_mem*)&mem) == 0) {
    free((void*)mem);
  }
}

static int is_small_alloc(size_t size) {
  return size < 1024*1024;
}

static void host_alloc(struct futhark_context* ctx,
                       size_t size, const char* tag, size_t* size_out, void** mem_out) {
  if (is_small_alloc(size) || free_list_find(&ctx->free_list, size, tag, size_out, (fl_mem*)mem_out) != 0) {
    *size_out = size;
    *mem_out = malloc(size);
  }
}

static void host_free(struct futhark_context* ctx,
                      size_t size, const char* tag, void* mem) {
  // Small allocations are handled by malloc()s own free list.  The
  // threshold here is kind of arbitrary, but seems to work OK.
  // Larger allocations are mmap()ed/munmapped() every time, which is
  // very slow, and Futhark programs tend to use a few very large
  // allocations.
  if (is_small_alloc(size)) {
    free(mem);
  } else {
    free_list_insert(&ctx->free_list, size, (fl_mem)mem, tag);
  }
}

static void add_event(struct futhark_context* ctx,
                      const char* name,
                      char* description,
                      void* data,
                      event_report_fn f) {
  if (ctx->logging) {
    fprintf(ctx->log, "Event: %s\n%s\n", name, description);
  }
  add_event_to_list(&ctx->event_list, name, description, data, f);
}

char *futhark_context_get_error(struct futhark_context *ctx) {
  char *error = ctx->error;
  ctx->error = NULL;
  return error;
}

void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag) {
    cfg->profiling = cfg->logging = cfg->debugging = flag;
}

void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag) {
    cfg->profiling = flag;
}

void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag) {
    cfg->logging = flag;
}

void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f) {
  cfg->cache_fname = strdup(f);
}

int futhark_get_tuning_param_count(void) {
  return num_tuning_params;
}

const char *futhark_get_tuning_param_name(int i) {
  return tuning_param_names[i];
}

const char *futhark_get_tuning_param_class(int i) {
    return tuning_param_classes[i];
}

void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f){
  ctx->log = f;
}

void futhark_context_pause_profiling(struct futhark_context *ctx) {
  ctx->profiling_paused = 1;
}

void futhark_context_unpause_profiling(struct futhark_context *ctx) {
  ctx->profiling_paused = 0;
}

struct futhark_context_config* futhark_context_config_new(void) {
  struct futhark_context_config* cfg = malloc(sizeof(struct futhark_context_config));
  if (cfg == NULL) {
    return NULL;
  }
  cfg->in_use = 0;
  cfg->debugging = 0;
  cfg->profiling = 0;
  cfg->logging = 0;
  cfg->cache_fname = NULL;
  cfg->num_tuning_params = num_tuning_params;
  cfg->tuning_params = malloc(cfg->num_tuning_params * sizeof(int64_t));
  memcpy(cfg->tuning_params, tuning_param_defaults,
         cfg->num_tuning_params * sizeof(int64_t));
  cfg->tuning_param_names = tuning_param_names;
  cfg->tuning_param_vars = tuning_param_vars;
  cfg->tuning_param_classes = tuning_param_classes;
  backend_context_config_setup(cfg);
  return cfg;
}

void futhark_context_config_free(struct futhark_context_config* cfg) {
  assert(!cfg->in_use);
  backend_context_config_teardown(cfg);
  free(cfg->cache_fname);
  free(cfg->tuning_params);
  free(cfg);
}

struct futhark_context* futhark_context_new(struct futhark_context_config* cfg) {
  struct futhark_context* ctx = malloc(sizeof(struct futhark_context));
  if (ctx == NULL) {
    return NULL;
  }
  assert(!cfg->in_use);
  ctx->cfg = cfg;
  ctx->cfg->in_use = 1;
  ctx->program_initialised = false;
  create_lock(&ctx->error_lock);
  create_lock(&ctx->lock);
  free_list_init(&ctx->free_list);
  event_list_init(&ctx->event_list);
  ctx->peak_mem_usage_default = 0;
  ctx->cur_mem_usage_default = 0;
  ctx->constants = malloc(sizeof(struct constants));
  ctx->debugging = cfg->debugging;
  ctx->logging = cfg->logging;
  ctx->detail_memory = cfg->logging;
  ctx->profiling = cfg->profiling;
  ctx->profiling_paused = 0;
  ctx->error = NULL;
  ctx->log = stderr;
  set_tuning_params(ctx);
  if (backend_context_setup(ctx) == 0) {
    setup_program(ctx);
    init_constants(ctx);
    ctx->program_initialised = true;
    (void)futhark_context_clear_caches(ctx);
    (void)futhark_context_sync(ctx);
  }
  return ctx;
}

void futhark_context_free(struct futhark_context* ctx) {
  if (ctx->program_initialised) {
    free_constants(ctx);
    teardown_program(ctx);
  }
  backend_context_teardown(ctx);
  free_all_in_free_list(ctx);
  free_list_destroy(&ctx->free_list);
  event_list_free(&ctx->event_list);
  free(ctx->constants);
  free(ctx->error);
  free_lock(&ctx->lock);
  free_lock(&ctx->error_lock);
  ctx->cfg->in_use = 0;
  free(ctx);
}

// End of context.h

// Start of copy.h

// Cache-oblivious map-transpose function.
#define GEN_MAP_TRANSPOSE(NAME, ELEM_TYPE)                              \
  static void map_transpose_##NAME                                      \
  (ELEM_TYPE* dst, ELEM_TYPE* src,                                      \
   int64_t k, int64_t m, int64_t n,                                     \
   int64_t cb, int64_t ce, int64_t rb, int64_t re)                      \
  {                                                                     \
  int32_t r = re - rb;                                                  \
  int32_t c = ce - cb;                                                  \
  if (k == 1) {                                                         \
    if (r <= 64 && c <= 64) {                                           \
      for (int64_t j = 0; j < c; j++) {                                 \
        for (int64_t i = 0; i < r; i++) {                               \
          dst[(j + cb) * n + (i + rb)] = src[(i + rb) * m + (j + cb)];  \
        }                                                               \
      }                                                                 \
    } else if (c <= r) {                                                \
      map_transpose_##NAME(dst, src, k, m, n, cb, ce, rb, rb + r/2);    \
      map_transpose_##NAME(dst, src, k, m, n, cb, ce, rb + r/2, re);    \
    } else {                                                            \
      map_transpose_##NAME(dst, src, k, m, n, cb, cb + c/2, rb, re);    \
      map_transpose_##NAME(dst, src, k, m, n, cb + c/2, ce, rb, re);    \
    }                                                                   \
  } else {                                                              \
  for (int64_t i = 0; i < k; i++) {                                     \
    map_transpose_##NAME(dst + i * m * n, src + i * m * n, 1, m, n, cb, ce, rb, re); \
  }\
} \
}

// Straightforward LMAD copy function.
#define GEN_LMAD_COPY_ELEMENTS(NAME, ELEM_TYPE)                         \
  static void lmad_copy_elements_##NAME(int r,                          \
                                        ELEM_TYPE* dst, int64_t dst_strides[r], \
                                        ELEM_TYPE *src, int64_t src_strides[r], \
                                        int64_t shape[r]) {             \
    if (r == 1) {                                                       \
      for (int i = 0; i < shape[0]; i++) {                              \
        dst[i*dst_strides[0]] = src[i*src_strides[0]];                  \
      }                                                                 \
    } else if (r > 1) {                                                 \
      for (int i = 0; i < shape[0]; i++) {                              \
        lmad_copy_elements_##NAME(r-1,                                  \
                                  dst+i*dst_strides[0], dst_strides+1,  \
                                  src+i*src_strides[0], src_strides+1,  \
                                  shape+1);                             \
      }                                                                 \
    }                                                                   \
  }                                                                     \

// Check whether this LMAD can be seen as a transposed 2D array.  This
// is done by checking every possible splitting point.
static bool lmad_is_tr(int64_t *n_out, int64_t *m_out,
                       int r,
                       const int64_t strides[r],
                       const int64_t shape[r]) {
  for (int i = 1; i < r; i++) {
    int n = 1, m = 1;
    bool ok = true;
    int64_t expected = 1;
    // Check strides before 'i'.
    for (int j = i-1; j >= 0; j--) {
      ok = ok && strides[j] == expected;
      expected *= shape[j];
      n *= shape[j];
    }
    // Check strides after 'i'.
    for (int j = r-1; j >= i; j--) {
      ok = ok && strides[j] == expected;
      expected *= shape[j];
      m *= shape[j];
    }
    if (ok) {
      *n_out = n;
      *m_out = m;
      return true;
    }
  }
  return false;
}

// This function determines whether the a 'dst' LMAD is row-major and
// 'src' LMAD is column-major.  Both LMADs are for arrays of the same
// shape.  Both LMADs are allowed to have additional dimensions "on
// top".  Essentially, this function determines whether a copy from
// 'src' to 'dst' is a "map(transpose)" that we know how to implement
// efficiently.  The LMADs can have arbitrary rank, and the main
// challenge here is checking whether the src LMAD actually
// corresponds to a 2D column-major layout by morally collapsing
// dimensions.  There is a lot of looping here, but the actual trip
// count is going to be very low in practice.
//
// Returns true if this is indeed a map(transpose), and writes the
// number of arrays, and moral array size to appropriate output
// parameters.
static bool lmad_map_tr(int64_t *num_arrays_out, int64_t *n_out, int64_t *m_out,
                        int r,
                        const int64_t dst_strides[r],
                        const int64_t src_strides[r],
                        const int64_t shape[r]) {
  int64_t rowmajor_strides[r];
  rowmajor_strides[r-1] = 1;

  for (int i = r-2; i >= 0; i--) {
    rowmajor_strides[i] = rowmajor_strides[i+1] * shape[i+1];
  }

  // map_r will be the number of mapped dimensions on top.
  int map_r = 0;
  int64_t num_arrays = 1;
  for (int i = 0; i < r; i++) {
    if (dst_strides[i] != rowmajor_strides[i] ||
        src_strides[i] != rowmajor_strides[i]) {
      break;
    } else {
      num_arrays *= shape[i];
      map_r++;
    }
  }

  *num_arrays_out = num_arrays;

  if (r==map_r) {
    return false;
  }

  if (memcmp(&rowmajor_strides[map_r],
             &dst_strides[map_r],
             sizeof(int64_t)*(r-map_r)) == 0) {
    return lmad_is_tr(n_out, m_out, r-map_r, src_strides+map_r, shape+map_r);
  } else if (memcmp(&rowmajor_strides[map_r],
                    &src_strides[map_r],
                    sizeof(int64_t)*(r-map_r)) == 0) {
    return lmad_is_tr(m_out, n_out, r-map_r, dst_strides+map_r, shape+map_r);
  }
  return false;
}

// Check if the strides correspond to row-major strides of *any*
// permutation of the shape.  This is done by recursive search with
// backtracking.  This is worst-case exponential, but hopefully the
// arrays we encounter do not have that many dimensions.
static bool lmad_contiguous_search(int checked, int64_t expected,
                                   int r,
                                   int64_t strides[r], int64_t shape[r], bool used[r]) {
  for (int i = 0; i < r; i++) {
    for (int j = 0; j < r; j++) {
      if (!used[j] && strides[j] == expected && strides[j] >= 0) {
        used[j] = true;
        if (checked+1 == r ||
            lmad_contiguous_search(checked+1, expected * shape[j], r, strides, shape, used)) {
          return true;
        }
        used[j] = false;
      }
    }
  }
  return false;
}

// Does this LMAD correspond to an array with positive strides and no
// holes?
static bool lmad_contiguous(int r, int64_t strides[r], int64_t shape[r]) {
  bool used[r];
  for (int i = 0; i < r; i++) {
    used[i] = false;
  }
  return lmad_contiguous_search(0, 1, r, strides, shape, used);
}

// Does this copy correspond to something that could be done with a
// memcpy()-like operation?  I.e. do the LMADs actually represent the
// same in-memory layout and are they contiguous?
static bool lmad_memcpyable(int r,
                            int64_t dst_strides[r], int64_t src_strides[r], int64_t shape[r]) {
  if (!lmad_contiguous(r, dst_strides, shape)) {
    return false;
  }
  for (int i = 0; i < r; i++) {
    if (dst_strides[i] != src_strides[i] && shape[i] != 1) {
      return false;
    }
  }
  return true;
}


static void log_copy(struct futhark_context* ctx,
                     const char *kind, int r,
                     int64_t dst_offset, int64_t dst_strides[r],
                     int64_t src_offset, int64_t src_strides[r],
                     int64_t shape[r]) {
  if (ctx->logging) {
    fprintf(ctx->log, "\n# Copy %s\n", kind);
    fprintf(ctx->log, "Shape: ");
    for (int i = 0; i < r; i++) { fprintf(ctx->log, "[%ld]", (long int)shape[i]); }
    fprintf(ctx->log, "\n");
    fprintf(ctx->log, "Dst offset: %ld\n", (long int)dst_offset);
    fprintf(ctx->log, "Dst strides:");
    for (int i = 0; i < r; i++) { fprintf(ctx->log, " %ld", (long int)dst_strides[i]); }
    fprintf(ctx->log, "\n");
    fprintf(ctx->log, "Src offset: %ld\n", (long int)src_offset);
    fprintf(ctx->log, "Src strides:");
    for (int i = 0; i < r; i++) { fprintf(ctx->log, " %ld", (long int)src_strides[i]); }
    fprintf(ctx->log, "\n");
  }
}

static void log_transpose(struct futhark_context* ctx,
                          int64_t k, int64_t n, int64_t m) {
  if (ctx->logging) {
    fprintf(ctx->log, "## Transpose\n");
    fprintf(ctx->log, "Arrays     : %ld\n", (long int)k);
    fprintf(ctx->log, "X elements : %ld\n", (long int)m);
    fprintf(ctx->log, "Y elements : %ld\n", (long int)n);
    fprintf(ctx->log, "\n");
  }
}

#define GEN_LMAD_COPY(NAME, ELEM_TYPE)                                  \
  static void lmad_copy_##NAME                                          \
  (struct futhark_context *ctx, int r,                                  \
   ELEM_TYPE* dst, int64_t dst_offset, int64_t dst_strides[r],          \
   ELEM_TYPE *src, int64_t src_offset, int64_t src_strides[r],          \
   int64_t shape[r]) {                                                  \
    log_copy(ctx, "CPU to CPU", r, dst_offset, dst_strides,             \
             src_offset, src_strides, shape);                           \
    int64_t size = 1;                                                   \
    for (int i = 0; i < r; i++) { size *= shape[i]; }                   \
    if (size == 0) { return; }                                          \
    int64_t k, n, m;                                                    \
    if (lmad_map_tr(&k, &n, &m,                                         \
                    r, dst_strides, src_strides, shape)) {              \
      log_transpose(ctx, k, n, m);                                      \
      map_transpose_##NAME                                              \
        (dst+dst_offset, src+src_offset, k, n, m, 0, n, 0, m);          \
    } else if (lmad_memcpyable(r, dst_strides, src_strides, shape)) {   \
      if (ctx->logging) {fprintf(ctx->log, "## Flat copy\n\n");}          \
      memcpy(dst+dst_offset, src+src_offset, size*sizeof(*dst));        \
    } else {                                                            \
      if (ctx->logging) {fprintf(ctx->log, "## General copy\n\n");}       \
      lmad_copy_elements_##NAME                                         \
        (r,                                                             \
         dst+dst_offset, dst_strides,                                   \
         src+src_offset, src_strides, shape);                           \
    }                                                                   \
  }

GEN_MAP_TRANSPOSE(1b, uint8_t)
GEN_MAP_TRANSPOSE(2b, uint16_t)
GEN_MAP_TRANSPOSE(4b, uint32_t)
GEN_MAP_TRANSPOSE(8b, uint64_t)

GEN_LMAD_COPY_ELEMENTS(1b, uint8_t)
GEN_LMAD_COPY_ELEMENTS(2b, uint16_t)
GEN_LMAD_COPY_ELEMENTS(4b, uint32_t)
GEN_LMAD_COPY_ELEMENTS(8b, uint64_t)

GEN_LMAD_COPY(1b, uint8_t)
GEN_LMAD_COPY(2b, uint16_t)
GEN_LMAD_COPY(4b, uint32_t)
GEN_LMAD_COPY(8b, uint64_t)

// End of copy.h

#define FUTHARK_FUN_ATTR static

FUTHARK_FUN_ATTR int futrts_entry_argmin_double(struct futhark_context *ctx, int64_t *out_prim_out_139413, struct memblock ks_mem_138403, int64_t n_92488);
FUTHARK_FUN_ATTR int futrts_entry_argmin_float(struct futhark_context *ctx, int64_t *out_prim_out_139414, struct memblock ks_mem_138403, int64_t n_92319);
FUTHARK_FUN_ATTR int futrts_entry_argmin_int(struct futhark_context *ctx, int64_t *out_prim_out_139415, struct memblock ks_mem_138403, int64_t n_91984);
FUTHARK_FUN_ATTR int futrts_entry_argmin_long(struct futhark_context *ctx, int64_t *out_prim_out_139416, struct memblock ks_mem_138403, int64_t n_92150);
FUTHARK_FUN_ATTR int futrts_entry_argmin_short(struct futhark_context *ctx, int64_t *out_prim_out_139417, struct memblock ks_mem_138403, int64_t n_91818);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_139418, struct memblock *mem_out_p_139419, struct memblock xs_mem_138403, int64_t n_90566, int64_t incr_90567);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_139430, struct memblock *mem_out_p_139431, struct memblock xs_mem_138403, int64_t n_88222, int64_t incr_88223);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_139442, struct memblock *mem_out_p_139443, struct memblock xs_mem_138403, int64_t n_83535, int64_t incr_83536);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_139454, struct memblock *mem_out_p_139455, struct memblock xs_mem_138403, int64_t n_85878, int64_t incr_85879);
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_139466, struct memblock *mem_out_p_139467, struct memblock xs_mem_138403, int64_t n_81191, int64_t incr_81192);
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_double(struct futhark_context *ctx, struct memblock *mem_out_p_139478, struct memblock *mem_out_p_139479, struct memblock *mem_out_p_139480, int64_t *out_prim_out_139481, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_123952, int64_t nb_123953, int64_t window_sizze_123954, int64_t threads_123955);
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_float(struct futhark_context *ctx, struct memblock *mem_out_p_139509, struct memblock *mem_out_p_139510, struct memblock *mem_out_p_139511, int64_t *out_prim_out_139512, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_117667, int64_t nb_117668, int64_t window_sizze_117669, int64_t threads_117670);
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_int(struct futhark_context *ctx, struct memblock *mem_out_p_139540, struct memblock *mem_out_p_139541, struct memblock *mem_out_p_139542, int64_t *out_prim_out_139543, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_105156, int64_t nb_105157, int64_t window_sizze_105158, int64_t threads_105159);
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_long(struct futhark_context *ctx, struct memblock *mem_out_p_139571, struct memblock *mem_out_p_139572, struct memblock *mem_out_p_139573, int64_t *out_prim_out_139574, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_111382, int64_t nb_111383, int64_t window_sizze_111384, int64_t threads_111385);
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_short(struct futhark_context *ctx, struct memblock *mem_out_p_139602, struct memblock *mem_out_p_139603, struct memblock *mem_out_p_139604, int64_t *out_prim_out_139605, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_98868, int64_t nb_98869, int64_t window_sizze_98870, int64_t threads_98871);
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_double(struct futhark_context *ctx, struct memblock *mem_out_p_139633, struct memblock *mem_out_p_139634, struct memblock *mem_out_p_139635, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_126289, int64_t w2_126290);
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_float(struct futhark_context *ctx, struct memblock *mem_out_p_139636, struct memblock *mem_out_p_139637, struct memblock *mem_out_p_139638, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_125790, int64_t w2_125791);
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_int(struct futhark_context *ctx, struct memblock *mem_out_p_139639, struct memblock *mem_out_p_139640, struct memblock *mem_out_p_139641, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_124976, int64_t w2_124977);
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_long(struct futhark_context *ctx, struct memblock *mem_out_p_139642, struct memblock *mem_out_p_139643, struct memblock *mem_out_p_139644, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_125291, int64_t w2_125292);
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_short(struct futhark_context *ctx, struct memblock *mem_out_p_139645, struct memblock *mem_out_p_139646, struct memblock *mem_out_p_139647, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_124477, int64_t w2_124478);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_double(struct futhark_context *ctx, struct memblock *mem_out_p_139648, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91649, int64_t incr_91650, int64_t block_sizze_91651);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_float(struct futhark_context *ctx, struct memblock *mem_out_p_139649, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91432, int64_t incr_91433, int64_t block_sizze_91434);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_int(struct futhark_context *ctx, struct memblock *mem_out_p_139650, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91011, int64_t incr_91012, int64_t block_sizze_91013);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_long(struct futhark_context *ctx, struct memblock *mem_out_p_139651, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91215, int64_t incr_91216, int64_t block_sizze_91217);
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_short(struct futhark_context *ctx, struct memblock *mem_out_p_139652, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_90794, int64_t incr_90795, int64_t block_sizze_90796);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_139653, struct memblock *mem_out_p_139654, struct memblock xs_mem_138403, int64_t n_78735, int64_t incr_78736, int16_t block_sizze_78737);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_139680, struct memblock *mem_out_p_139681, struct memblock xs_mem_138403, int64_t n_75980, int64_t incr_75981, int16_t block_sizze_75982);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_139707, struct memblock *mem_out_p_139708, struct memblock xs_mem_138403, int64_t n_70629, int64_t incr_70630, int16_t block_sizze_70631);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_139734, struct memblock *mem_out_p_139735, struct memblock xs_mem_138403, int64_t n_73229, int64_t incr_73230, int16_t block_sizze_73231);
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_139761, struct memblock *mem_out_p_139762, struct memblock xs_mem_138403, int64_t n_68012, int64_t incr_68013, int16_t block_sizze_68014);
FUTHARK_FUN_ATTR int futrts_get_bit_1844(struct futhark_context *ctx, int32_t *out_prim_out_139788, int32_t bit_65860, int16_t x_65861);
FUTHARK_FUN_ATTR int futrts_get_bit_2253(struct futhark_context *ctx, int32_t *out_prim_out_139789, int32_t bit_71077, int64_t x_71078);
FUTHARK_FUN_ATTR int futrts_greatest_divisor_leq_than_4833(struct futhark_context *ctx, int64_t *out_prim_out_139790, int64_t upper_bound_78759, int64_t n_78760);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_8973(struct futhark_context *ctx, struct memblock *mem_out_p_139791, struct memblock xs_mem_138403, int64_t n_65157, int64_t incr_65158);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9128(struct futhark_context *ctx, struct memblock *mem_out_p_139792, struct memblock xs_mem_138403, int64_t n_68037, int64_t incr_68038);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9238(struct futhark_context *ctx, struct memblock *mem_out_p_139793, struct memblock xs_mem_138403, int64_t n_70654, int64_t incr_70655);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9338(struct futhark_context *ctx, struct memblock *mem_out_p_139794, struct memblock xs_mem_138403, int64_t n_73254, int64_t incr_73255);
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9447(struct futhark_context *ctx, struct memblock *mem_out_p_139795, struct memblock xs_mem_138403, int64_t n_76005, int64_t incr_76006);
FUTHARK_FUN_ATTR int futrts_lifted_f_8935(struct futhark_context *ctx, int64_t *out_prim_out_139796, int16_t na_65384, int16_t nb_65385, int16_t nc_65386, int16_t bin_65387, int16_t a_65388, int16_t b_65389, int16_t c_65390, int16_t d_65391);
FUTHARK_FUN_ATTR int futrts_lifted_lambda_8934(struct futhark_context *ctx, int16_t *out_prim_out_139797, int16_t *out_prim_out_139798, int16_t *out_prim_out_139799, int16_t *out_prim_out_139800, int16_t x_65327);
FUTHARK_FUN_ATTR int futrts_lifted_normalizze_8911(struct futhark_context *ctx, int64_t *out_prim_out_139801, int64_t *out_prim_out_139802, int64_t *out_prim_out_139803, int64_t *out_prim_out_139804, int64_t *out_prim_out_139805, int64_t slo_78978, int64_t shi_78979, int64_t tlo_78980, int64_t thi_78981, int64_t count_78982);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_i16_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i16_1d *futhark_new_i16_1d(struct futhark_context *ctx, const int16_t *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i16_1d *bad = NULL;
    struct futhark_i16_1d *arr = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 2, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 2 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 2);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_i16_1d *futhark_new_raw_i16_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i16_1d *bad = NULL;
    struct futhark_i16_1d *arr = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr, int16_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 2 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 2);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_i16_1d(struct futhark_context *ctx, int16_t *out, struct futhark_i16_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (2 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 2 * (i0 * 1), 2);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i16_1d(struct futhark_context *ctx, struct futhark_i16_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const int32_t *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr, int32_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_i32_1d(struct futhark_context *ctx, int32_t *out, struct futhark_i32_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (4 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 4 * (i0 * 1), 4);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i64_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_i64_1d *futhark_new_i64_1d(struct futhark_context *ctx, const int64_t *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i64_1d *bad = NULL;
    struct futhark_i64_1d *arr = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 8, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 8 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 8);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_i64_1d *futhark_new_raw_i64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_i64_1d *bad = NULL;
    struct futhark_i64_1d *arr = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr, int64_t *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 8 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 8);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_i64_1d(struct futhark_context *ctx, int64_t *out, struct futhark_i64_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (8 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 8 * (i0 * 1), 8);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i64_1d(struct futhark_context *ctx, struct futhark_i64_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const float *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr, float *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_f32_1d(struct futhark_context *ctx, float *out, struct futhark_f32_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (4 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 4 * (i0 * 1), 4);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f64_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f64_1d *futhark_new_f64_1d(struct futhark_context *ctx, const double *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f64_1d *bad = NULL;
    struct futhark_f64_1d *arr = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 8, "arr->mem"))
        err = 1;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 8 > 0)
        memmove(arr->mem.mem + 0, (const unsigned char *) data + 0, (size_t) dim0 * 8);
    lock_unlock(&ctx->lock);
    if (err != 0) {
        free(arr);
        return bad;
    }
    return arr;
}
struct futhark_f64_1d *futhark_new_raw_f64_1d(struct futhark_context *ctx, unsigned char *data, int64_t dim0)
{
    int err = 0;
    struct futhark_f64_1d *bad = NULL;
    struct futhark_f64_1d *arr = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    arr->mem.mem = data;
    arr->shape[0] = dim0;
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr, double *data)
{
    int err = 0;
    
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 8 > 0)
        memmove((unsigned char *) data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 8);
    lock_unlock(&ctx->lock);
    return err;
}
int futhark_index_f64_1d(struct futhark_context *ctx, double *out, struct futhark_f64_1d *arr, int64_t i0)
{
    int err = 0;
    
    if (i0 >= 0 && i0 < arr->shape[0]) {
        lock_lock(&ctx->lock);
        if (8 > 0)
            memmove((unsigned char *) out + 0, arr->mem.mem + 8 * (i0 * 1), 8);
        lock_unlock(&ctx->lock);
    } else {
        err = 1;
        set_error(ctx, strdup("Index out of bounds."));
    }
    return err;
}
unsigned char *futhark_values_raw_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f64_1d(struct futhark_context *ctx, struct futhark_f64_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_opaque_sortInfo_short {
    struct futhark_i64_1d *v0;
    struct futhark_i16_1d *v1;
};
int futhark_project_opaque_sortInfo_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_short_xs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_sortInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i16_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i16_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i16_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out, const struct futhark_i64_1d *f_is, const struct futhark_i16_1d *f_xs)
{
    struct futhark_opaque_sortInfo_short *v = malloc(sizeof(struct futhark_opaque_sortInfo_short));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i16_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_short(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_short *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i16_1d(ctx, obj->v1)[0] * sizeof(int16_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i16", 4);
        out += 4;
        memcpy(out, futhark_shape_i16_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i16_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i16_1d(ctx, obj->v1)[0] * sizeof(int16_t);
    }
    return ret;
}
struct futhark_opaque_sortInfo_short *futhark_restore_opaque_sortInfo_short(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_short *obj = malloc(sizeof(struct futhark_opaque_sortInfo_short));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i16", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int16_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i16_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_int {
    struct futhark_i64_1d *v0;
    struct futhark_i32_1d *v1;
};
int futhark_project_opaque_sortInfo_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_int_xs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_sortInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out, const struct futhark_i64_1d *f_is, const struct futhark_i32_1d *f_xs)
{
    struct futhark_opaque_sortInfo_int *v = malloc(sizeof(struct futhark_opaque_sortInfo_int));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i32_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_int(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_int *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v1)[0] * sizeof(int32_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v1)[0] * sizeof(int32_t);
    }
    return ret;
}
struct futhark_opaque_sortInfo_int *futhark_restore_opaque_sortInfo_int(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_int *obj = malloc(sizeof(struct futhark_opaque_sortInfo_int));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int32_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_long {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
};
int futhark_project_opaque_sortInfo_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_long_xs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_xs)
{
    struct futhark_opaque_sortInfo_long *v = malloc(sizeof(struct futhark_opaque_sortInfo_long));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_long(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_long *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    }
    return ret;
}
struct futhark_opaque_sortInfo_long *futhark_restore_opaque_sortInfo_long(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_long *obj = malloc(sizeof(struct futhark_opaque_sortInfo_long));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_float {
    struct futhark_i64_1d *v0;
    struct futhark_f32_1d *v1;
};
int futhark_project_opaque_sortInfo_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_float_xs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_sortInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out, const struct futhark_i64_1d *f_is, const struct futhark_f32_1d *f_xs)
{
    struct futhark_opaque_sortInfo_float *v = malloc(sizeof(struct futhark_opaque_sortInfo_float));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_f32_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_float(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_float *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * sizeof(float);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * sizeof(float);
    }
    return ret;
}
struct futhark_opaque_sortInfo_float *futhark_restore_opaque_sortInfo_float(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_float *obj = malloc(sizeof(struct futhark_opaque_sortInfo_float));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(float);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_sortInfo_double {
    struct futhark_i64_1d *v0;
    struct futhark_f64_1d *v1;
};
int futhark_project_opaque_sortInfo_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_sortInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_sortInfo_double_xs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_sortInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_f64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_f64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out, const struct futhark_i64_1d *f_is, const struct futhark_f64_1d *f_xs)
{
    struct futhark_opaque_sortInfo_double *v = malloc(sizeof(struct futhark_opaque_sortInfo_double));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_f64_1d));
        *v->v1 = *f_xs;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_sortInfo_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_sortInfo_double(struct futhark_context *ctx, const struct futhark_opaque_sortInfo_double *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f64_1d(ctx, obj->v1)[0] * sizeof(double);
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f64", 4);
        out += 4;
        memcpy(out, futhark_shape_f64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f64_1d(ctx, obj->v1)[0] * sizeof(double);
    }
    return ret;
}
struct futhark_opaque_sortInfo_double *futhark_restore_opaque_sortInfo_double(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_sortInfo_double *obj = malloc(sizeof(struct futhark_opaque_sortInfo_double));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(double);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeInfo_short {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i16_1d *v2;
};
int futhark_project_opaque_mergeInfo_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_short_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_short_vs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_mergeInfo_short *obj)
{
    (void) ctx;
    
    struct futhark_i16_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i16_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i16_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeInfo_short(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_short **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_i16_1d *f_vs)
{
    struct futhark_opaque_mergeInfo_short *v = malloc(sizeof(struct futhark_opaque_mergeInfo_short));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_rs;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i16_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeInfo_short(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_short *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeInfo_short(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_short *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i16_1d(ctx, obj->v2)[0] * sizeof(int16_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i16", 4);
        out += 4;
        memcpy(out, futhark_shape_i16_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i16_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i16_1d(ctx, obj->v2)[0] * sizeof(int16_t);
    }
    return ret;
}
struct futhark_opaque_mergeInfo_short *futhark_restore_opaque_mergeInfo_short(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeInfo_short *obj = malloc(sizeof(struct futhark_opaque_mergeInfo_short));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i16", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int16_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i16_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeInfo_int {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i32_1d *v2;
};
int futhark_project_opaque_mergeInfo_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_int_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_int_vs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_mergeInfo_int *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeInfo_int(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_int **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_i32_1d *f_vs)
{
    struct futhark_opaque_mergeInfo_int *v = malloc(sizeof(struct futhark_opaque_mergeInfo_int));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_rs;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i32_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeInfo_int(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_int *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeInfo_int(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_int *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v2)[0] * sizeof(int32_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v2)[0] * sizeof(int32_t);
    }
    return ret;
}
struct futhark_opaque_mergeInfo_int *futhark_restore_opaque_mergeInfo_int(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeInfo_int *obj = malloc(sizeof(struct futhark_opaque_mergeInfo_int));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int32_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeInfo_long {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i64_1d *v2;
};
int futhark_project_opaque_mergeInfo_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_long_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_long_vs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeInfo_long(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_long **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_i64_1d *f_vs)
{
    struct futhark_opaque_mergeInfo_long *v = malloc(sizeof(struct futhark_opaque_mergeInfo_long));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_rs;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i64_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeInfo_long(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_long *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeInfo_long(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_long *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v2)[0] * sizeof(int64_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v2)[0] * sizeof(int64_t);
    }
    return ret;
}
struct futhark_opaque_mergeInfo_long *futhark_restore_opaque_mergeInfo_long(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeInfo_long *obj = malloc(sizeof(struct futhark_opaque_mergeInfo_long));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int64_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i64_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeInfo_float {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_f32_1d *v2;
};
int futhark_project_opaque_mergeInfo_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_float_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_float_vs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_mergeInfo_float *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeInfo_float(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_float **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_f32_1d *f_vs)
{
    struct futhark_opaque_mergeInfo_float *v = malloc(sizeof(struct futhark_opaque_mergeInfo_float));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_rs;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_f32_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeInfo_float(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_float *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeInfo_float(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_float *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v2)[0] * sizeof(float);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v2)[0] * sizeof(float);
    }
    return ret;
}
struct futhark_opaque_mergeInfo_float *futhark_restore_opaque_mergeInfo_float(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeInfo_float *obj = malloc(sizeof(struct futhark_opaque_mergeInfo_float));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(float);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeInfo_double {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_f64_1d *v2;
};
int futhark_project_opaque_mergeInfo_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_double_rs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeInfo_double_vs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_mergeInfo_double *obj)
{
    (void) ctx;
    
    struct futhark_f64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f64_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_f64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeInfo_double(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_double **out, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_rs, const struct futhark_f64_1d *f_vs)
{
    struct futhark_opaque_mergeInfo_double *v = malloc(sizeof(struct futhark_opaque_mergeInfo_double));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_is;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_rs;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_f64_1d));
        *v->v2 = *f_vs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeInfo_double(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_double *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeInfo_double(struct futhark_context *ctx, const struct futhark_opaque_mergeInfo_double *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f64_1d(ctx, obj->v2)[0] * sizeof(double);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f64", 4);
        out += 4;
        memcpy(out, futhark_shape_f64_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f64_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f64_1d(ctx, obj->v2)[0] * sizeof(double);
    }
    return ret;
}
struct futhark_opaque_mergeInfo_double *futhark_restore_opaque_mergeInfo_double(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeInfo_double *obj = malloc(sizeof(struct futhark_opaque_mergeInfo_double));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(double);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f64_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeTup_short {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i16_1d *v2;
};
int futhark_project_opaque_mergeTup_short_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_short_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_short *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_short_xs(struct futhark_context *ctx, struct futhark_i16_1d **out, const struct futhark_opaque_mergeTup_short *obj)
{
    (void) ctx;
    
    struct futhark_i16_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i16_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i16_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeTup_short(struct futhark_context *ctx, struct futhark_opaque_mergeTup_short **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_i16_1d *f_xs)
{
    struct futhark_opaque_mergeTup_short *v = malloc(sizeof(struct futhark_opaque_mergeTup_short));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_cs;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_is;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i16_1d));
        *v->v2 = *f_xs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeTup_short(struct futhark_context *ctx, struct futhark_opaque_mergeTup_short *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeTup_short(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_short *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i16_1d(ctx, obj->v2)[0] * sizeof(int16_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i16", 4);
        out += 4;
        memcpy(out, futhark_shape_i16_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i16_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i16_1d(ctx, obj->v2)[0] * sizeof(int16_t);
    }
    return ret;
}
struct futhark_opaque_mergeTup_short *futhark_restore_opaque_mergeTup_short(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeTup_short *obj = malloc(sizeof(struct futhark_opaque_mergeTup_short));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i16", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int16_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i16_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i16_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeTup_int {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i32_1d *v2;
};
int futhark_project_opaque_mergeTup_int_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_int_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_int *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_int_xs(struct futhark_context *ctx, struct futhark_i32_1d **out, const struct futhark_opaque_mergeTup_int *obj)
{
    (void) ctx;
    
    struct futhark_i32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i32_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeTup_int(struct futhark_context *ctx, struct futhark_opaque_mergeTup_int **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_i32_1d *f_xs)
{
    struct futhark_opaque_mergeTup_int *v = malloc(sizeof(struct futhark_opaque_mergeTup_int));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_cs;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_is;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i32_1d));
        *v->v2 = *f_xs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeTup_int(struct futhark_context *ctx, struct futhark_opaque_mergeTup_int *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeTup_int(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_int *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i32_1d(ctx, obj->v2)[0] * sizeof(int32_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, futhark_shape_i32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i32_1d(ctx, obj->v2)[0] * sizeof(int32_t);
    }
    return ret;
}
struct futhark_opaque_mergeTup_int *futhark_restore_opaque_mergeTup_int(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeTup_int *obj = malloc(sizeof(struct futhark_opaque_mergeTup_int));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int32_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeTup_long {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_i64_1d *v2;
};
int futhark_project_opaque_mergeTup_long_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_long_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_long_xs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_long *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeTup_long(struct futhark_context *ctx, struct futhark_opaque_mergeTup_long **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_i64_1d *f_xs)
{
    struct futhark_opaque_mergeTup_long *v = malloc(sizeof(struct futhark_opaque_mergeTup_long));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_cs;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_is;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_i64_1d));
        *v->v2 = *f_xs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeTup_long(struct futhark_context *ctx, struct futhark_opaque_mergeTup_long *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeTup_long(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_long *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v2)[0] * sizeof(int64_t);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v2)[0] * sizeof(int64_t);
    }
    return ret;
}
struct futhark_opaque_mergeTup_long *futhark_restore_opaque_mergeTup_long(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeTup_long *obj = malloc(sizeof(struct futhark_opaque_mergeTup_long));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(int64_t);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_i64_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeTup_float {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_f32_1d *v2;
};
int futhark_project_opaque_mergeTup_float_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_float_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_float *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_float_xs(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_mergeTup_float *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeTup_float(struct futhark_context *ctx, struct futhark_opaque_mergeTup_float **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_f32_1d *f_xs)
{
    struct futhark_opaque_mergeTup_float *v = malloc(sizeof(struct futhark_opaque_mergeTup_float));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_cs;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_is;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_f32_1d));
        *v->v2 = *f_xs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeTup_float(struct futhark_context *ctx, struct futhark_opaque_mergeTup_float *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeTup_float(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_float *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v2)[0] * sizeof(float);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v2)[0] * sizeof(float);
    }
    return ret;
}
struct futhark_opaque_mergeTup_float *futhark_restore_opaque_mergeTup_float(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeTup_float *obj = malloc(sizeof(struct futhark_opaque_mergeTup_float));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(float);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_mergeTup_double {
    struct futhark_i64_1d *v0;
    struct futhark_i64_1d *v1;
    struct futhark_f64_1d *v2;
};
int futhark_project_opaque_mergeTup_double_cs(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v0, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_double_is(struct futhark_context *ctx, struct futhark_i64_1d **out, const struct futhark_opaque_mergeTup_double *obj)
{
    (void) ctx;
    
    struct futhark_i64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_i64_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_i64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_mergeTup_double_xs(struct futhark_context *ctx, struct futhark_f64_1d **out, const struct futhark_opaque_mergeTup_double *obj)
{
    (void) ctx;
    
    struct futhark_f64_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f64_1d));
    memcpy(v, obj->v2, sizeof(struct futhark_f64_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_mergeTup_double(struct futhark_context *ctx, struct futhark_opaque_mergeTup_double **out, const struct futhark_i64_1d *f_cs, const struct futhark_i64_1d *f_is, const struct futhark_f64_1d *f_xs)
{
    struct futhark_opaque_mergeTup_double *v = malloc(sizeof(struct futhark_opaque_mergeTup_double));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_i64_1d));
        *v->v0 = *f_cs;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_i64_1d));
        *v->v1 = *f_is;
        (void) (*v->v1->mem.references)++;
    }
    {
        v->v2 = malloc(sizeof(struct futhark_f64_1d));
        *v->v2 = *f_xs;
        (void) (*v->v2->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return FUTHARK_SUCCESS;
}
int futhark_free_opaque_mergeTup_double(struct futhark_context *ctx, struct futhark_opaque_mergeTup_double *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_mergeTup_double(struct futhark_context *ctx, const struct futhark_opaque_mergeTup_double *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f64_1d(ctx, obj->v2)[0] * sizeof(double);
    
    *n = size_0 + size_1 + size_2;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v0)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " i64", 4);
        out += 4;
        memcpy(out, futhark_shape_i64_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_i64_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_i64_1d(ctx, obj->v1)[0] * sizeof(int64_t);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f64", 4);
        out += 4;
        memcpy(out, futhark_shape_f64_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f64_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f64_1d(ctx, obj->v2)[0] * sizeof(double);
    }
    return ret;
}
struct futhark_opaque_mergeTup_double *futhark_restore_opaque_mergeTup_double(struct futhark_context *ctx, const void *p)
{
    (void) ctx;
    
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_mergeTup_double *obj = malloc(sizeof(struct futhark_opaque_mergeTup_double));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * sizeof(int64_t);
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " i64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * sizeof(int64_t);
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f64", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * sizeof(double);
    if (err == 0) {
        obj->v0 = futhark_new_i64_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_i64_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f64_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_i64_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f64_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}

FUTHARK_FUN_ATTR int futrts_entry_argmin_double(struct futhark_context *ctx, int64_t *out_prim_out_139413, struct memblock ks_mem_138403, int64_t n_92488)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    int64_t defunc_0_reduce_comm_res_137808;
    double defunc_0_reduce_comm_res_137809;
    int64_t redout_138206;
    double redout_138207;
    
    redout_138206 = n_92488;
    redout_138207 = INFINITY;
    for (int64_t i_138208 = 0; i_138208 < n_92488; i_138208++) {
        double x_127140 = ((double *) ks_mem_138403.mem)[i_138208];
        bool defunc_0_lt_res_127145 = redout_138207 < x_127140;
        bool defunc_0_eq_res_127147 = redout_138207 == x_127140;
        bool cond_f_res_t_res_127148 = slt64(redout_138206, i_138208);
        bool x_127149 = defunc_0_eq_res_127147 && cond_f_res_t_res_127148;
        bool x_137786 = !defunc_0_lt_res_127145;
        bool y_137787 = x_127149 && x_137786;
        bool cond_127146 = defunc_0_lt_res_127145 || y_137787;
        int64_t defunc_0_op_res_127150;
        
        if (cond_127146) {
            defunc_0_op_res_127150 = redout_138206;
        } else {
            defunc_0_op_res_127150 = i_138208;
        }
        
        double defunc_0_op_res_127151;
        
        if (cond_127146) {
            defunc_0_op_res_127151 = redout_138207;
        } else {
            defunc_0_op_res_127151 = x_127140;
        }
        
        int64_t redout_tmp_139282 = defunc_0_op_res_127150;
        double redout_tmp_139283 = defunc_0_op_res_127151;
        
        redout_138206 = redout_tmp_139282;
        redout_138207 = redout_tmp_139283;
    }
    defunc_0_reduce_comm_res_137808 = redout_138206;
    defunc_0_reduce_comm_res_137809 = redout_138207;
    prim_out_139281 = defunc_0_reduce_comm_res_137808;
    *out_prim_out_139413 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_float(struct futhark_context *ctx, int64_t *out_prim_out_139414, struct memblock ks_mem_138403, int64_t n_92319)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    int64_t defunc_0_reduce_comm_res_137808;
    float defunc_0_reduce_comm_res_137809;
    int64_t redout_138206;
    float redout_138207;
    
    redout_138206 = n_92319;
    redout_138207 = INFINITY;
    for (int64_t i_138208 = 0; i_138208 < n_92319; i_138208++) {
        float x_127140 = ((float *) ks_mem_138403.mem)[i_138208];
        bool defunc_0_lt_res_127145 = redout_138207 < x_127140;
        bool defunc_0_eq_res_127147 = redout_138207 == x_127140;
        bool cond_f_res_t_res_127148 = slt64(redout_138206, i_138208);
        bool x_127149 = defunc_0_eq_res_127147 && cond_f_res_t_res_127148;
        bool x_137786 = !defunc_0_lt_res_127145;
        bool y_137787 = x_127149 && x_137786;
        bool cond_127146 = defunc_0_lt_res_127145 || y_137787;
        int64_t defunc_0_op_res_127150;
        
        if (cond_127146) {
            defunc_0_op_res_127150 = redout_138206;
        } else {
            defunc_0_op_res_127150 = i_138208;
        }
        
        float defunc_0_op_res_127151;
        
        if (cond_127146) {
            defunc_0_op_res_127151 = redout_138207;
        } else {
            defunc_0_op_res_127151 = x_127140;
        }
        
        int64_t redout_tmp_139282 = defunc_0_op_res_127150;
        float redout_tmp_139283 = defunc_0_op_res_127151;
        
        redout_138206 = redout_tmp_139282;
        redout_138207 = redout_tmp_139283;
    }
    defunc_0_reduce_comm_res_137808 = redout_138206;
    defunc_0_reduce_comm_res_137809 = redout_138207;
    prim_out_139281 = defunc_0_reduce_comm_res_137808;
    *out_prim_out_139414 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_int(struct futhark_context *ctx, int64_t *out_prim_out_139415, struct memblock ks_mem_138403, int64_t n_91984)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    int64_t defunc_0_reduce_comm_res_137808;
    int32_t defunc_0_reduce_comm_res_137809;
    int64_t redout_138206;
    int32_t redout_138207;
    
    redout_138206 = n_91984;
    redout_138207 = 2147483647;
    for (int64_t i_138208 = 0; i_138208 < n_91984; i_138208++) {
        int32_t x_127140 = ((int32_t *) ks_mem_138403.mem)[i_138208];
        bool defunc_0_lt_res_127145 = slt32(redout_138207, x_127140);
        bool defunc_0_eq_res_127147 = redout_138207 == x_127140;
        bool cond_f_res_t_res_127148 = slt64(redout_138206, i_138208);
        bool x_127149 = defunc_0_eq_res_127147 && cond_f_res_t_res_127148;
        bool x_137786 = !defunc_0_lt_res_127145;
        bool y_137787 = x_127149 && x_137786;
        bool cond_127146 = defunc_0_lt_res_127145 || y_137787;
        int64_t defunc_0_op_res_127150;
        
        if (cond_127146) {
            defunc_0_op_res_127150 = redout_138206;
        } else {
            defunc_0_op_res_127150 = i_138208;
        }
        
        int32_t defunc_0_op_res_127151;
        
        if (cond_127146) {
            defunc_0_op_res_127151 = redout_138207;
        } else {
            defunc_0_op_res_127151 = x_127140;
        }
        
        int64_t redout_tmp_139282 = defunc_0_op_res_127150;
        int32_t redout_tmp_139283 = defunc_0_op_res_127151;
        
        redout_138206 = redout_tmp_139282;
        redout_138207 = redout_tmp_139283;
    }
    defunc_0_reduce_comm_res_137808 = redout_138206;
    defunc_0_reduce_comm_res_137809 = redout_138207;
    prim_out_139281 = defunc_0_reduce_comm_res_137808;
    *out_prim_out_139415 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_long(struct futhark_context *ctx, int64_t *out_prim_out_139416, struct memblock ks_mem_138403, int64_t n_92150)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    int64_t defunc_0_reduce_comm_res_137808;
    int64_t defunc_0_reduce_comm_res_137809;
    int64_t redout_138206;
    int64_t redout_138207;
    
    redout_138206 = n_92150;
    redout_138207 = (int64_t) 9223372036854775807;
    for (int64_t i_138208 = 0; i_138208 < n_92150; i_138208++) {
        int64_t x_127140 = ((int64_t *) ks_mem_138403.mem)[i_138208];
        bool defunc_0_lt_res_127145 = slt64(redout_138207, x_127140);
        bool defunc_0_eq_res_127147 = redout_138207 == x_127140;
        bool cond_f_res_t_res_127148 = slt64(redout_138206, i_138208);
        bool x_127149 = defunc_0_eq_res_127147 && cond_f_res_t_res_127148;
        bool x_137786 = !defunc_0_lt_res_127145;
        bool y_137787 = x_127149 && x_137786;
        bool cond_127146 = defunc_0_lt_res_127145 || y_137787;
        int64_t defunc_0_op_res_127150;
        
        if (cond_127146) {
            defunc_0_op_res_127150 = redout_138206;
        } else {
            defunc_0_op_res_127150 = i_138208;
        }
        
        int64_t defunc_0_op_res_127151;
        
        if (cond_127146) {
            defunc_0_op_res_127151 = redout_138207;
        } else {
            defunc_0_op_res_127151 = x_127140;
        }
        
        int64_t redout_tmp_139282 = defunc_0_op_res_127150;
        int64_t redout_tmp_139283 = defunc_0_op_res_127151;
        
        redout_138206 = redout_tmp_139282;
        redout_138207 = redout_tmp_139283;
    }
    defunc_0_reduce_comm_res_137808 = redout_138206;
    defunc_0_reduce_comm_res_137809 = redout_138207;
    prim_out_139281 = defunc_0_reduce_comm_res_137808;
    *out_prim_out_139416 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_argmin_short(struct futhark_context *ctx, int64_t *out_prim_out_139417, struct memblock ks_mem_138403, int64_t n_91818)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    int64_t defunc_0_reduce_comm_res_137808;
    int16_t defunc_0_reduce_comm_res_137809;
    int64_t redout_138206;
    int16_t redout_138207;
    
    redout_138206 = n_91818;
    redout_138207 = (int16_t) 32767;
    for (int64_t i_138208 = 0; i_138208 < n_91818; i_138208++) {
        int16_t x_127140 = ((int16_t *) ks_mem_138403.mem)[i_138208];
        bool defunc_0_lt_res_127145 = slt16(redout_138207, x_127140);
        bool defunc_0_eq_res_127147 = redout_138207 == x_127140;
        bool cond_f_res_t_res_127148 = slt64(redout_138206, i_138208);
        bool x_127149 = defunc_0_eq_res_127147 && cond_f_res_t_res_127148;
        bool x_137786 = !defunc_0_lt_res_127145;
        bool y_137787 = x_127149 && x_137786;
        bool cond_127146 = defunc_0_lt_res_127145 || y_137787;
        int64_t defunc_0_op_res_127150;
        
        if (cond_127146) {
            defunc_0_op_res_127150 = redout_138206;
        } else {
            defunc_0_op_res_127150 = i_138208;
        }
        
        int16_t defunc_0_op_res_127151;
        
        if (cond_127146) {
            defunc_0_op_res_127151 = redout_138207;
        } else {
            defunc_0_op_res_127151 = x_127140;
        }
        
        int64_t redout_tmp_139282 = defunc_0_op_res_127150;
        int16_t redout_tmp_139283 = defunc_0_op_res_127151;
        
        redout_138206 = redout_tmp_139282;
        redout_138207 = redout_tmp_139283;
    }
    defunc_0_reduce_comm_res_137808 = redout_138206;
    defunc_0_reduce_comm_res_137809 = redout_138207;
    prim_out_139281 = defunc_0_reduce_comm_res_137808;
    *out_prim_out_139417 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_139418, struct memblock *mem_out_p_139419, struct memblock xs_mem_138403, int64_t n_90566, int64_t incr_90567)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138409_cached_sizze_139420 = 0;
    unsigned char *mem_138409 = NULL;
    int64_t mem_138412_cached_sizze_139421 = 0;
    unsigned char *mem_138412 = NULL;
    int64_t mem_138422_cached_sizze_139422 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139423 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138491_cached_sizze_139424 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138494_cached_sizze_139425 = 0;
    unsigned char *mem_138494 = NULL;
    int64_t mem_138504_cached_sizze_139426 = 0;
    unsigned char *mem_138504 = NULL;
    int64_t mem_138506_cached_sizze_139427 = 0;
    unsigned char *mem_138506 = NULL;
    int64_t mem_138521_cached_sizze_139428 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138524_cached_sizze_139429 = 0;
    unsigned char *mem_138524 = NULL;
    struct memblock mem_138615;
    
    mem_138615.references = NULL;
    
    struct memblock mem_138613;
    
    mem_138613.references = NULL;
    
    struct memblock mem_param_tmp_139300;
    
    mem_param_tmp_139300.references = NULL;
    
    struct memblock mem_param_tmp_139299;
    
    mem_param_tmp_139299.references = NULL;
    
    struct memblock mem_138601;
    
    mem_138601.references = NULL;
    
    struct memblock mem_138597;
    
    mem_138597.references = NULL;
    
    struct memblock mem_138563;
    
    mem_138563.references = NULL;
    
    struct memblock mem_138559;
    
    mem_138559.references = NULL;
    
    struct memblock mem_138568;
    
    mem_138568.references = NULL;
    
    struct memblock mem_138566;
    
    mem_138566.references = NULL;
    
    struct memblock ext_mem_138583;
    
    ext_mem_138583.references = NULL;
    
    struct memblock ext_mem_138586;
    
    ext_mem_138586.references = NULL;
    
    struct memblock mem_param_138488;
    
    mem_param_138488.references = NULL;
    
    struct memblock mem_param_138485;
    
    mem_param_138485.references = NULL;
    
    struct memblock ext_mem_138607;
    
    ext_mem_138607.references = NULL;
    
    struct memblock ext_mem_138608;
    
    ext_mem_138608.references = NULL;
    
    struct memblock mem_138481;
    
    mem_138481.references = NULL;
    
    struct memblock mem_138477;
    
    mem_138477.references = NULL;
    
    struct memblock ext_mem_138611;
    
    ext_mem_138611.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_90566;
    bool cond_132761 = sle64(n_90566, (int64_t) 1);
    int64_t zs_lhs_132762 = sub64(n_90566, (int64_t) 1);
    int64_t zp_rhs_132763 = sdiv_safe64(zs_lhs_132762, (int64_t) 20);
    int64_t min_num_blocks_132764 = add64((int64_t) 1, zp_rhs_132763);
    bool loop_cond_132765 = slt64((int64_t) 1, min_num_blocks_132764);
    bool smallest_pow_2_geq_than_res_132766;
    int64_t smallest_pow_2_geq_than_res_132767;
    bool loop_while_132768;
    int64_t x_132769;
    
    loop_while_132768 = loop_cond_132765;
    x_132769 = (int64_t) 1;
    while (loop_while_132768) {
        int64_t loopres_132770 = mul64((int64_t) 2, x_132769);
        bool loop_cond_132771 = slt64(loopres_132770, min_num_blocks_132764);
        bool loop_while_tmp_139283 = loop_cond_132771;
        int64_t x_tmp_139284 = loopres_132770;
        
        loop_while_132768 = loop_while_tmp_139283;
        x_132769 = x_tmp_139284;
    }
    smallest_pow_2_geq_than_res_132766 = loop_while_132768;
    smallest_pow_2_geq_than_res_132767 = x_132769;
    
    bool zzero_132772 = smallest_pow_2_geq_than_res_132767 == (int64_t) 0;
    bool nonzzero_132773 = !zzero_132772;
    bool protect_assert_disj_132774 = cond_132761 || nonzzero_132773;
    bool nonzzero_cert_132775;
    
    if (!protect_assert_disj_132774) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:44:3-28\n   #5  ftsort.fut:43:1-44:28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_132776 = sdiv_safe64(zs_lhs_132762, smallest_pow_2_geq_than_res_132767);
    int64_t block_sizze_132777 = add64((int64_t) 1, zp_rhs_132776);
    bool y_132782 = slt64((int64_t) 0, n_90566);
    bool protect_assert_disj_139017 = cond_132761 || y_132782;
    bool index_certs_132783;
    
    if (!protect_assert_disj_139017) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_90566, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:44:3-28\n   #5  ftsort.fut:43:1-44:28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132796 = slt64(smallest_pow_2_geq_than_res_132767, (int64_t) 0);
    bool valid_132797 = !bounds_invalid_upwards_132796;
    bool protect_assert_disj_139025 = cond_132761 || valid_132797;
    bool range_valid_c_132798;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_132767, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:193:54-57\n   #6  ftsort.fut:44:3-28\n   #7  ftsort.fut:43:1-44:28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132800 = slt64(block_sizze_132777, (int64_t) 0);
    bool valid_132801 = !bounds_invalid_upwards_132800;
    bool protect_assert_disj_139027 = cond_132761 || valid_132801;
    bool range_valid_c_132802;
    
    if (!protect_assert_disj_139027) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_132777, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_132804 = sle64(block_sizze_132777, (int64_t) 1);
    int64_t tmp_132805 = sub64(block_sizze_132777, (int64_t) 2);
    bool bounds_invalid_upwards_132806 = slt64(tmp_132805, (int64_t) 0);
    bool valid_132808 = !bounds_invalid_upwards_132806;
    bool protect_assert_disj_132809 = cond_132804 || valid_132808;
    bool protect_assert_disj_139029 = cond_132761 || protect_assert_disj_132809;
    bool range_valid_c_132810;
    
    if (!protect_assert_disj_139029) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_132805, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (futrts_indicesWithIncrement_9447(ctx, &ext_mem_138404, xs_mem_138403, n_90566, incr_90567) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139285 = 0; i_139285 < n_90566; i_139285++) {
        int64_t x_139286 = (int64_t) 0 + i_139285 * (int64_t) 1;
        
        ((int64_t *) mem_138406.mem)[i_139285] = x_139286;
    }
    
    int64_t flat_dim_132778 = smallest_pow_2_geq_than_res_132767 * block_sizze_132777;
    bool x_139012 = !cond_132761;
    int64_t greatest_divisor_leq_than_arg1_132780 = mul64((int64_t) 2, block_sizze_132777);
    int64_t merge_block_sizze_132781;
    
    if (x_139012) {
        int64_t x_139014;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139014, (int64_t) 8, greatest_divisor_leq_than_arg1_132780) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_132781 = x_139014;
    } else {
        merge_block_sizze_132781 = (int64_t) 0;
    }
    
    double reduce_arg1_132784;
    
    if (x_139012) {
        double x_139018 = ((double *) xs_mem_138403.mem)[(int64_t) 0];
        
        reduce_arg1_132784 = x_139018;
    } else {
        reduce_arg1_132784 = 0.0;
    }
    
    double defunc_0_reduce_res_137955;
    int64_t defunc_0_reduce_res_137956;
    
    if (x_139012) {
        double x_139020;
        int64_t x_139021;
        double redout_138206;
        int64_t redout_138207;
        
        redout_138206 = reduce_arg1_132784;
        redout_138207 = (int64_t) 0;
        for (int64_t i_138208 = 0; i_138208 < n_90566; i_138208++) {
            double x_132787 = ((double *) xs_mem_138403.mem)[i_138208];
            bool zlze_res_132793 = redout_138206 <= x_132787;
            double defunc_0_op_res_132794;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132794 = x_132787;
            } else {
                defunc_0_op_res_132794 = redout_138206;
            }
            
            int64_t defunc_0_op_res_132795;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132795 = i_138208;
            } else {
                defunc_0_op_res_132795 = redout_138207;
            }
            
            double redout_tmp_139287 = defunc_0_op_res_132794;
            int64_t redout_tmp_139288 = defunc_0_op_res_132795;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
        }
        x_139020 = redout_138206;
        x_139021 = redout_138207;
        defunc_0_reduce_res_137955 = x_139020;
        defunc_0_reduce_res_137956 = x_139021;
    } else {
        defunc_0_reduce_res_137955 = 0.0;
        defunc_0_reduce_res_137956 = (int64_t) 0;
    }
    
    int64_t distance_132807 = add64((int64_t) 1, tmp_132805);
    int64_t binop_x_138407 = (int64_t) 8 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138408 = block_sizze_132777 * binop_x_138407;
    int64_t bytes_138421 = (int64_t) 8 * block_sizze_132777;
    bool loop_cond_132881 = slt64(block_sizze_132777, flat_dim_132778);
    bool zzero_132882 = merge_block_sizze_132781 == (int64_t) 0;
    bool nonzzero_132883 = !zzero_132882;
    
    if (cond_132761) {
        if (memblock_set(ctx, &ext_mem_138611, &mem_138406, "mem_138406") != 0)
            return 1;
    } else {
        if (mem_138409_cached_sizze_139420 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138409, &mem_138409_cached_sizze_139420, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138412_cached_sizze_139421 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138412, &mem_138412_cached_sizze_139421, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138422_cached_sizze_139422 < bytes_138421) {
            err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139422, bytes_138421);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138424_cached_sizze_139423 < bytes_138421) {
            err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139423, bytes_138421);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138220 = 0; i_138220 < smallest_pow_2_geq_than_res_132767; i_138220++) {
            int64_t zp_lhs_132814 = mul64(block_sizze_132777, i_138220);
            
            for (int64_t i_138213 = 0; i_138213 < block_sizze_132777; i_138213++) {
                int64_t k_132818 = add64(zp_lhs_132814, i_138213);
                bool cond_132819 = slt64(k_132818, n_90566);
                double lifted_lambda_res_132820;
                int64_t lifted_lambda_res_132821;
                
                if (cond_132819) {
                    bool x_137808 = sle64((int64_t) 0, k_132818);
                    bool bounds_check_137809 = cond_132819 && x_137808;
                    bool index_certs_137810;
                    
                    if (!bounds_check_137809) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_132818, "] out of bounds for array of shape [", (long long) n_90566, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double lifted_lambda_res_t_res_137811 = ((double *) xs_mem_138403.mem)[k_132818];
                    
                    lifted_lambda_res_132820 = lifted_lambda_res_t_res_137811;
                    lifted_lambda_res_132821 = k_132818;
                } else {
                    lifted_lambda_res_132820 = defunc_0_reduce_res_137955;
                    lifted_lambda_res_132821 = defunc_0_reduce_res_137956;
                }
                ((double *) mem_138422)[i_138213] = lifted_lambda_res_132820;
                ((int64_t *) mem_138424)[i_138213] = lifted_lambda_res_132821;
            }
            if (!cond_132804) {
                for (int64_t i_132830 = 0; i_132830 < distance_132807; i_132830++) {
                    int64_t gt_arg1_132833 = add64((int64_t) 1, i_132830);
                    bool x_132834 = sle64((int64_t) 0, gt_arg1_132833);
                    bool y_132835 = slt64(gt_arg1_132833, block_sizze_132777);
                    bool bounds_check_132836 = x_132834 && y_132835;
                    bool index_certs_132837;
                    
                    if (!bounds_check_132836) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_132833, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_132839 = slt64(i_132830, block_sizze_132777);
                    bool index_certs_132840;
                    
                    if (!y_132839) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_132830, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double gt_arg1_132838 = ((double *) mem_138422)[gt_arg1_132833];
                    double gt_arg0_132841 = ((double *) mem_138422)[i_132830];
                    bool zlze_res_132842 = gt_arg0_132841 <= gt_arg1_132838;
                    bool defunc_0_lifted_gt_res_132843 = !zlze_res_132842;
                    bool s_132844;
                    int64_t s_132847;
                    bool loop_while_132848;
                    int64_t j_132851;
                    
                    loop_while_132848 = defunc_0_lifted_gt_res_132843;
                    j_132851 = i_132830;
                    while (loop_while_132848) {
                        bool x_132852 = sle64((int64_t) 0, j_132851);
                        bool y_132853 = slt64(j_132851, block_sizze_132777);
                        bool bounds_check_132854 = x_132852 && y_132853;
                        bool index_certs_132855;
                        
                        if (!bounds_check_132854) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_132851, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_132858 = add64((int64_t) 1, j_132851);
                        bool x_132859 = sle64((int64_t) 0, copy_arg0_132858);
                        bool y_132860 = slt64(copy_arg0_132858, block_sizze_132777);
                        bool bounds_check_132861 = x_132859 && y_132860;
                        bool index_certs_132862;
                        
                        if (!bounds_check_132861) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_132858, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double copy_arg0_132856 = ((double *) mem_138422)[j_132851];
                        int64_t copy_arg0_132857 = ((int64_t *) mem_138424)[j_132851];
                        double copy_arg0_132863 = ((double *) mem_138422)[copy_arg0_132858];
                        int64_t copy_arg0_132864 = ((int64_t *) mem_138424)[copy_arg0_132858];
                        
                        ((double *) mem_138422)[j_132851] = copy_arg0_132863;
                        ((int64_t *) mem_138424)[j_132851] = copy_arg0_132864;
                        ((double *) mem_138422)[copy_arg0_132858] = copy_arg0_132856;
                        ((int64_t *) mem_138424)[copy_arg0_132858] = copy_arg0_132857;
                        
                        int64_t tmp_132869 = sub64(j_132851, (int64_t) 1);
                        bool cond_132870 = sle64((int64_t) 0, tmp_132869);
                        bool loop_cond_132871;
                        
                        if (cond_132870) {
                            bool y_137813 = slt64(tmp_132869, block_sizze_132777);
                            bool bounds_check_137814 = cond_132870 && y_137813;
                            bool index_certs_137815;
                            
                            if (!bounds_check_137814) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132869, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double gt_arg1_137812 = ((double *) mem_138422)[j_132851];
                            double gt_arg0_137816 = ((double *) mem_138422)[tmp_132869];
                            bool zlze_res_137817 = gt_arg0_137816 <= gt_arg1_137812;
                            bool defunc_0_lifted_gt_res_137818 = !zlze_res_137817;
                            
                            loop_cond_132871 = defunc_0_lifted_gt_res_137818;
                        } else {
                            loop_cond_132871 = 0;
                        }
                        
                        bool loop_while_tmp_139295 = loop_cond_132871;
                        int64_t j_tmp_139298 = tmp_132869;
                        
                        loop_while_132848 = loop_while_tmp_139295;
                        j_132851 = j_tmp_139298;
                    }
                    s_132844 = loop_while_132848;
                    s_132847 = j_132851;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138409, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138422, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138412, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138424, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
        }
        if (memblock_alloc(ctx, &mem_138477, bytes_138408, "mem_138477")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138477.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138409, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        if (memblock_alloc(ctx, &mem_138481, bytes_138408, "mem_138481")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138481.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138412, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        
        int64_t data_132884;
        bool data_132885;
        int64_t data_132888;
        int64_t loop_dz2084Uz2082U_132889;
        bool loop_while_132890;
        int64_t stride_132893;
        
        if (memblock_set(ctx, &mem_param_138485, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138488, &mem_138481, "mem_138481") != 0)
            return 1;
        loop_dz2084Uz2082U_132889 = flat_dim_132778;
        loop_while_132890 = loop_cond_132881;
        stride_132893 = block_sizze_132777;
        while (loop_while_132890) {
            int64_t next_stride_132894 = mul64((int64_t) 2, stride_132893);
            bool zzero_132895 = next_stride_132894 == (int64_t) 0;
            bool nonzzero_132896 = !zzero_132895;
            bool nonzzero_cert_132897;
            
            if (!nonzzero_132896) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:44:3-28\n   #5  ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_132898 = sdiv64(flat_dim_132778, next_stride_132894);
            bool bounds_invalid_upwards_132899 = slt64(num_merges_132898, (int64_t) 0);
            bool valid_132900 = !bounds_invalid_upwards_132899;
            bool range_valid_c_132901;
            
            if (!valid_132900) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_132898, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:193:54-57\n   #6  ftsort.fut:44:3-28\n   #7  ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_132903 = sub64(next_stride_132894, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_132904 = sle64((int64_t) 0, m_132903);
            bool cond_132906 = slt64(next_stride_132894, (int64_t) 10);
            bool protect_assert_disj_132907 = nonzzero_132883 || cond_132906;
            bool nonzzero_cert_132908;
            
            if (!protect_assert_disj_132907) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_132909 = smod_safe64(next_stride_132894, merge_block_sizze_132781);
            bool num_blocks_132910 = zeze_lhs_132909 == (int64_t) 0;
            bool protect_assert_disj_132911 = cond_132906 || num_blocks_132910;
            bool assert_c_132912;
            
            if (!protect_assert_disj_132911) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_132914 = sdiv_safe64(next_stride_132894, merge_block_sizze_132781);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915 = add64((int64_t) 1, num_blocks_132914);
            int64_t j_m_i_132916 = sub64(next_stride_132894, stride_132893);
            int64_t flat_dim_132917 = merge_block_sizze_132781 * num_blocks_132914;
            bool bounds_invalid_upwards_132918 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, (int64_t) 0);
            bool zzero_lte_i_132919 = sle64((int64_t) 0, stride_132893);
            bool i_lte_j_132920 = sle64(stride_132893, next_stride_132894);
            bool empty_slice_132921 = stride_132893 == (int64_t) 0;
            int64_t m_132922 = sub64(stride_132893, (int64_t) 1);
            bool bounds_invalid_upwards_132923 = slt64(num_blocks_132914, (int64_t) 0);
            bool empty_slice_132924 = j_m_i_132916 == (int64_t) 0;
            int64_t m_132925 = sub64(j_m_i_132916, (int64_t) 1);
            bool cond_132926 = slt64((int64_t) 0, stride_132893);
            bool valid_132927 = !bounds_invalid_upwards_132918;
            bool zzero_leq_i_p_m_t_s_132928 = sle64((int64_t) 0, m_132922);
            bool i_p_m_t_s_leq_w_132929 = slt64(m_132922, next_stride_132894);
            bool valid_132930 = !bounds_invalid_upwards_132923;
            bool i_p_m_t_s_leq_w_132931 = slt64(m_132903, flat_dim_132917);
            int64_t i_p_m_t_s_132932 = add64(stride_132893, m_132925);
            bool y_132933 = slt64((int64_t) 0, j_m_i_132916);
            bool protect_assert_disj_132934 = cond_132906 || valid_132927;
            bool range_valid_c_132935;
            
            if (!protect_assert_disj_132934) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132936 = zzero_leq_i_p_m_t_s_132928 && i_p_m_t_s_leq_w_132929;
            bool protect_assert_disj_132937 = cond_132906 || valid_132930;
            bool range_valid_c_132938;
            
            if (!protect_assert_disj_132937) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_132914, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132939 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132931;
            bool zzero_leq_i_p_m_t_s_132940 = sle64((int64_t) 0, i_p_m_t_s_132932);
            bool i_p_m_t_s_leq_w_132941 = slt64(i_p_m_t_s_132932, next_stride_132894);
            bool forwards_ok_132942 = zzero_lte_i_132919 && y_132936;
            bool ok_or_empty_132943 = zzero_132895 || y_132939;
            bool y_132944 = zzero_lte_i_132919 && i_p_m_t_s_leq_w_132941;
            bool protect_assert_disj_132945 = cond_132926 || y_132933;
            bool ok_or_empty_132946 = empty_slice_132921 || forwards_ok_132942;
            bool protect_assert_disj_132947 = cond_132906 || ok_or_empty_132943;
            bool index_certs_132948;
            
            if (!protect_assert_disj_132947) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) flat_dim_132917, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132949 = zzero_leq_i_p_m_t_s_132940 && y_132944;
            bool loop_not_taken_132950 = !cond_132906;
            bool protect_assert_disj_132951 = protect_assert_disj_132945 || loop_not_taken_132950;
            bool index_certs_132952;
            
            if (!protect_assert_disj_132951) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132953 = cond_132906 || ok_or_empty_132946;
            bool index_certs_132954;
            
            if (!protect_assert_disj_132953) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:44:3-28\n   #12 ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_132955 = i_lte_j_132920 && y_132949;
            bool protect_assert_disj_132956 = ok_or_empty_132946 || loop_not_taken_132950;
            bool index_certs_132957;
            
            if (!protect_assert_disj_132956) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_132958 = empty_slice_132924 || forwards_ok_132955;
            bool protect_assert_disj_132959 = loop_not_taken_132950 || ok_or_empty_132958;
            bool index_certs_132960;
            
            if (!protect_assert_disj_132959) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132961 = cond_132906 || ok_or_empty_132958;
            bool index_certs_132962;
            
            if (!protect_assert_disj_132961) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:44:3-28\n   #12 ftsort.fut:43:1-44:28\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138489 = (int64_t) 8 * num_merges_132898;
            int64_t bytes_138490 = next_stride_132894 * binop_x_138489;
            bool i_lte_j_132905 = sle64((int64_t) 0, next_stride_132894);
            
            if (mem_138491_cached_sizze_139424 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139424, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138494_cached_sizze_139425 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138494, &mem_138494_cached_sizze_139425, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138503 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915;
            int64_t binop_x_138519 = (int64_t) 8 * num_blocks_132914;
            int64_t bytes_138520 = merge_block_sizze_132781 * binop_x_138519;
            int64_t bytes_138565 = (int64_t) 16 * stride_132893;
            
            for (int64_t i_138241 = 0; i_138241 < num_merges_132898; i_138241++) {
                int64_t start_132966 = mul64(next_stride_132894, i_138241);
                int64_t j_m_i_132967 = sub64(loop_dz2084Uz2082U_132889, start_132966);
                bool empty_slice_132968 = j_m_i_132967 == (int64_t) 0;
                int64_t m_132969 = sub64(j_m_i_132967, (int64_t) 1);
                int64_t i_p_m_t_s_132970 = add64(start_132966, m_132969);
                bool zzero_leq_i_p_m_t_s_132971 = sle64((int64_t) 0, i_p_m_t_s_132970);
                bool i_p_m_t_s_leq_w_132972 = slt64(i_p_m_t_s_132970, loop_dz2084Uz2082U_132889);
                bool zzero_lte_i_132973 = sle64((int64_t) 0, start_132966);
                bool i_lte_j_132974 = sle64(start_132966, loop_dz2084Uz2082U_132889);
                bool y_132975 = i_p_m_t_s_leq_w_132972 && zzero_lte_i_132973;
                bool y_132976 = zzero_leq_i_p_m_t_s_132971 && y_132975;
                bool forwards_ok_132977 = i_lte_j_132974 && y_132976;
                bool ok_or_empty_132978 = empty_slice_132968 || forwards_ok_132977;
                bool index_certs_132979;
                
                if (!ok_or_empty_132978) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_132966, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_132889, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_132980 = slt64(m_132903, j_m_i_132967);
                bool y_132981 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132980;
                bool forwards_ok_132982 = i_lte_j_132905 && y_132981;
                bool ok_or_empty_132983 = zzero_132895 || forwards_ok_132982;
                bool index_certs_132984;
                
                if (!ok_or_empty_132983) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) j_m_i_132967, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:44:3-28\n   #9  ftsort.fut:43:1-44:28\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_132906) {
                    double dummy_137844;
                    int64_t dummy_137845;
                    
                    if (cond_132926) {
                        double head_res_137846 = ((double *) mem_param_138485.mem)[start_132966];
                        int64_t head_res_137847 = ((int64_t *) mem_param_138488.mem)[start_132966];
                        
                        dummy_137844 = head_res_137846;
                        dummy_137845 = head_res_137847;
                    } else {
                        int64_t slice_137848 = stride_132893 + start_132966;
                        double head_res_137849 = ((double *) mem_param_138485.mem)[slice_137848];
                        int64_t head_res_137850 = ((int64_t *) mem_param_138488.mem)[slice_137848];
                        
                        dummy_137844 = head_res_137849;
                        dummy_137845 = head_res_137850;
                    }
                    if (memblock_alloc(ctx, &mem_138566, bytes_138565, "mem_138566")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139308 = 0; nest_i_139308 < next_stride_132894; nest_i_139308++) {
                        ((double *) mem_138566.mem)[nest_i_139308] = dummy_137844;
                    }
                    if (memblock_alloc(ctx, &mem_138568, bytes_138565, "mem_138568")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139309 = 0; nest_i_139309 < next_stride_132894; nest_i_139309++) {
                        ((int64_t *) mem_138568.mem)[nest_i_139309] = dummy_137845;
                    }
                    
                    int64_t data_137853;
                    int64_t i_137857 = (int64_t) 0;
                    
                    for (int64_t k_137856 = 0; k_137856 < next_stride_132894; k_137856++) {
                        int64_t j_137860 = sub64(k_137856, i_137857);
                        bool cond_137861 = j_137860 == j_m_i_132916;
                        bool cond_137862;
                        
                        if (cond_137861) {
                            cond_137862 = 1;
                        } else {
                            bool cond_137863 = slt64(i_137857, stride_132893);
                            bool cond_f_res_137864;
                            
                            if (cond_137863) {
                                bool x_137865 = sle64((int64_t) 0, j_137860);
                                bool y_137866 = slt64(j_137860, j_m_i_132916);
                                bool bounds_check_137867 = x_137865 && y_137866;
                                bool index_certs_137868;
                                
                                if (!bounds_check_137867) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_137872 = sle64((int64_t) 0, i_137857);
                                bool bounds_check_137873 = cond_137863 && x_137872;
                                bool index_certs_137874;
                                
                                if (!bounds_check_137873) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137869 = stride_132893 + j_137860;
                                int64_t slice_137870 = start_132966 + slice_137869;
                                double leq_arg1_137871 = ((double *) mem_param_138485.mem)[slice_137870];
                                int64_t slice_137875 = start_132966 + i_137857;
                                double leq_arg0_137876 = ((double *) mem_param_138485.mem)[slice_137875];
                                bool zlze_res_137877 = leq_arg0_137876 <= leq_arg1_137871;
                                
                                cond_f_res_137864 = zlze_res_137877;
                            } else {
                                cond_f_res_137864 = 0;
                            }
                            cond_137862 = cond_f_res_137864;
                        }
                        
                        int64_t loopres_137878;
                        double loopres_137879;
                        int64_t loopres_137880;
                        
                        if (cond_137862) {
                            bool x_137882 = sle64((int64_t) 0, i_137857);
                            bool y_137883 = slt64(i_137857, stride_132893);
                            bool bounds_check_137884 = x_137882 && y_137883;
                            bool index_certs_137885;
                            
                            if (!bounds_check_137884) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_137881 = add64((int64_t) 1, i_137857);
                            int64_t slice_137886 = start_132966 + i_137857;
                            double tmp_137887 = ((double *) mem_param_138485.mem)[slice_137886];
                            int64_t tmp_137888 = ((int64_t *) mem_param_138488.mem)[slice_137886];
                            
                            loopres_137878 = tmp_137881;
                            loopres_137879 = tmp_137887;
                            loopres_137880 = tmp_137888;
                        } else {
                            bool x_137889 = sle64((int64_t) 0, j_137860);
                            bool y_137890 = slt64(j_137860, j_m_i_132916);
                            bool bounds_check_137891 = x_137889 && y_137890;
                            bool index_certs_137892;
                            
                            if (!bounds_check_137891) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:44:3-28\n   #10 ftsort.fut:43:1-44:28\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137893 = stride_132893 + j_137860;
                            int64_t slice_137894 = start_132966 + slice_137893;
                            double tmp_137895 = ((double *) mem_param_138485.mem)[slice_137894];
                            int64_t tmp_137896 = ((int64_t *) mem_param_138488.mem)[slice_137894];
                            
                            loopres_137878 = i_137857;
                            loopres_137879 = tmp_137895;
                            loopres_137880 = tmp_137896;
                        }
                        ((double *) mem_138566.mem)[k_137856] = loopres_137879;
                        ((int64_t *) mem_138568.mem)[k_137856] = loopres_137880;
                        
                        int64_t i_tmp_139310 = loopres_137878;
                        
                        i_137857 = i_tmp_139310;
                    }
                    data_137853 = i_137857;
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138566, "mem_138566") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138568, "mem_138568") != 0)
                        return 1;
                } else {
                    if (mem_138504_cached_sizze_139426 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138504, &mem_138504_cached_sizze_139426, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138506_cached_sizze_139427 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138506, &mem_138506_cached_sizze_139427, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138227 = 0; i_138227 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915; i_138227++) {
                        int64_t split_count_arg3_133046 = mul64(merge_block_sizze_132781, i_138227);
                        int64_t defunc_0_split_count_res_133047;
                        int64_t defunc_0_split_count_res_133048;
                        int64_t defunc_0_split_count_res_133049;
                        int64_t defunc_0_split_count_res_133050;
                        int64_t defunc_0_split_count_res_133051;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_133047, &defunc_0_split_count_res_133048, &defunc_0_split_count_res_133049, &defunc_0_split_count_res_133050, &defunc_0_split_count_res_133051, (int64_t) 0, stride_132893, (int64_t) 0, j_m_i_132916, split_count_arg3_133046) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_133052 = slt64((int64_t) 0, defunc_0_split_count_res_133051);
                        bool defunc_0_split_count_res_133053;
                        int64_t defunc_0_split_count_res_133054;
                        int64_t defunc_0_split_count_res_133055;
                        int64_t defunc_0_split_count_res_133056;
                        int64_t defunc_0_split_count_res_133057;
                        int64_t defunc_0_split_count_res_133058;
                        bool loop_while_133059;
                        int64_t ss_133060;
                        int64_t ss_133061;
                        int64_t tt_133062;
                        int64_t tt_133063;
                        int64_t count_133064;
                        
                        loop_while_133059 = loop_cond_133052;
                        ss_133060 = defunc_0_split_count_res_133047;
                        ss_133061 = defunc_0_split_count_res_133048;
                        tt_133062 = defunc_0_split_count_res_133049;
                        tt_133063 = defunc_0_split_count_res_133050;
                        count_133064 = defunc_0_split_count_res_133051;
                        while (loop_while_133059) {
                            int64_t zlze_lhs_133065 = sub64(ss_133061, ss_133060);
                            bool cond_133066 = sle64(zlze_lhs_133065, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_133067;
                            int64_t defunc_0_lifted_step_res_133068;
                            int64_t defunc_0_lifted_step_res_133069;
                            int64_t defunc_0_lifted_step_res_133070;
                            
                            if (cond_133066) {
                                int64_t tmp_137899 = add64(tt_133062, count_133064);
                                
                                defunc_0_lifted_step_res_133067 = ss_133060;
                                defunc_0_lifted_step_res_133068 = tmp_137899;
                                defunc_0_lifted_step_res_133069 = tt_133063;
                                defunc_0_lifted_step_res_133070 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_133072 = sub64(tt_133063, tt_133062);
                                bool cond_133073 = sle64(zlze_lhs_133072, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_133074;
                                int64_t defunc_0_lifted_step_res_f_res_133075;
                                int64_t defunc_0_lifted_step_res_f_res_133076;
                                int64_t defunc_0_lifted_step_res_f_res_133077;
                                
                                if (cond_133073) {
                                    int64_t tmp_137900 = add64(ss_133060, count_133064);
                                    
                                    defunc_0_lifted_step_res_f_res_133074 = tmp_137900;
                                    defunc_0_lifted_step_res_f_res_133075 = tt_133062;
                                    defunc_0_lifted_step_res_f_res_133076 = tt_133063;
                                    defunc_0_lifted_step_res_f_res_133077 = (int64_t) 0;
                                } else {
                                    bool cond_133079 = count_133064 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133080;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133081;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133082;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133083;
                                    
                                    if (cond_133079) {
                                        bool x_137902 = sle64((int64_t) 0, ss_133060);
                                        bool y_137903 = slt64(ss_133060, stride_132893);
                                        bool bounds_check_137904 = x_137902 && y_137903;
                                        bool index_certs_137905;
                                        
                                        if (!bounds_check_137904) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_133060, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:44:3-28\n   #14 ftsort.fut:43:1-44:28\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137908 = sle64((int64_t) 0, tt_133062);
                                        bool y_137909 = slt64(tt_133062, j_m_i_132916);
                                        bool bounds_check_137910 = x_137908 && y_137909;
                                        bool index_certs_137911;
                                        
                                        if (!bounds_check_137910) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_133062, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:44:3-28\n   #14 ftsort.fut:43:1-44:28\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137906 = start_132966 + ss_133060;
                                        double leq_arg1_137907 = ((double *) mem_param_138485.mem)[slice_137906];
                                        int64_t slice_137912 = stride_132893 + tt_133062;
                                        int64_t slice_137913 = start_132966 + slice_137912;
                                        double leq_arg0_137914 = ((double *) mem_param_138485.mem)[slice_137913];
                                        bool zlze_res_137915 = leq_arg0_137914 <= leq_arg1_137907;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        
                                        if (zlze_res_137915) {
                                            int64_t tmp_137918 = add64((int64_t) 1, tt_133062);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = ss_133060;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tmp_137918;
                                        } else {
                                            int64_t tmp_137919 = add64((int64_t) 1, ss_133060);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = tmp_137919;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tt_133062;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = tt_133063;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = (int64_t) 0;
                                    } else {
                                        int64_t m_133102 = sdiv64(count_133064, (int64_t) 2);
                                        int64_t n_133103 = sub64(count_133064, m_133102);
                                        bool cond_133104 = n_133103 == (int64_t) 0;
                                        int64_t zgze_lhs_133105 = add64(ss_133060, m_133102);
                                        bool cond_f_res_133106 = sle64(ss_133061, zgze_lhs_133105);
                                        bool x_133107 = !cond_133104;
                                        bool y_133108 = cond_f_res_133106 && x_133107;
                                        bool cond_133109 = cond_133104 || y_133108;
                                        bool leq_y_x_133110;
                                        
                                        if (cond_133109) {
                                            leq_y_x_133110 = 1;
                                        } else {
                                            bool x_133111 = sle64((int64_t) 0, zgze_lhs_133105);
                                            bool y_133112 = slt64(zgze_lhs_133105, stride_132893);
                                            bool bounds_check_133113 = x_133111 && y_133112;
                                            bool index_certs_133114;
                                            
                                            if (!bounds_check_133113) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_133105, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:44:3-28\n   #14 ftsort.fut:43:1-44:28\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_133117 = add64(tt_133062, n_133103);
                                            int64_t leq_arg0_133118 = sub64(zm_lhs_133117, (int64_t) 1);
                                            bool x_133119 = sle64((int64_t) 0, leq_arg0_133118);
                                            bool y_133120 = slt64(leq_arg0_133118, j_m_i_132916);
                                            bool bounds_check_133121 = x_133119 && y_133120;
                                            bool index_certs_133122;
                                            
                                            if (!bounds_check_133121) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_133118, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:44:3-28\n   #14 ftsort.fut:43:1-44:28\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_133115 = start_132966 + zgze_lhs_133105;
                                            double leq_arg1_133116 = ((double *) mem_param_138485.mem)[slice_133115];
                                            int64_t slice_133123 = stride_132893 + leq_arg0_133118;
                                            int64_t slice_133124 = start_132966 + slice_133123;
                                            double leq_arg0_133125 = ((double *) mem_param_138485.mem)[slice_133124];
                                            bool zlze_res_133126 = leq_arg0_133125 <= leq_arg1_133116;
                                            
                                            leq_y_x_133110 = zlze_res_133126;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                        
                                        if (leq_y_x_133110) {
                                            int64_t tmp_137920 = add64(tt_133062, n_133103);
                                            int64_t tmp_137921 = sub64(count_133064, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tmp_137920;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tt_133063;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = tmp_137921;
                                        } else {
                                            int64_t tmp_133132 = add64(tt_133062, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tt_133062;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tmp_133132;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = count_133064;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = ss_133060;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                    }
                                    defunc_0_lifted_step_res_f_res_133074 = defunc_0_lifted_step_res_f_res_f_res_133080;
                                    defunc_0_lifted_step_res_f_res_133075 = defunc_0_lifted_step_res_f_res_f_res_133081;
                                    defunc_0_lifted_step_res_f_res_133076 = defunc_0_lifted_step_res_f_res_f_res_133082;
                                    defunc_0_lifted_step_res_f_res_133077 = defunc_0_lifted_step_res_f_res_f_res_133083;
                                }
                                defunc_0_lifted_step_res_133067 = defunc_0_lifted_step_res_f_res_133074;
                                defunc_0_lifted_step_res_133068 = defunc_0_lifted_step_res_f_res_133075;
                                defunc_0_lifted_step_res_133069 = defunc_0_lifted_step_res_f_res_133076;
                                defunc_0_lifted_step_res_133070 = defunc_0_lifted_step_res_f_res_133077;
                            }
                            
                            int64_t loopres_133133;
                            int64_t loopres_133134;
                            int64_t loopres_133135;
                            int64_t loopres_133136;
                            int64_t loopres_133137;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_133133, &loopres_133134, &loopres_133135, &loopres_133136, &loopres_133137, defunc_0_lifted_step_res_133067, ss_133061, defunc_0_lifted_step_res_133068, defunc_0_lifted_step_res_133069, defunc_0_lifted_step_res_133070) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_133138 = slt64((int64_t) 0, loopres_133137);
                            bool loop_while_tmp_139315 = loop_cond_133138;
                            int64_t ss_tmp_139316 = loopres_133133;
                            int64_t ss_tmp_139317 = loopres_133134;
                            int64_t tt_tmp_139318 = loopres_133135;
                            int64_t tt_tmp_139319 = loopres_133136;
                            int64_t count_tmp_139320 = loopres_133137;
                            
                            loop_while_133059 = loop_while_tmp_139315;
                            ss_133060 = ss_tmp_139316;
                            ss_133061 = ss_tmp_139317;
                            tt_133062 = tt_tmp_139318;
                            tt_133063 = tt_tmp_139319;
                            count_133064 = count_tmp_139320;
                        }
                        defunc_0_split_count_res_133053 = loop_while_133059;
                        defunc_0_split_count_res_133054 = ss_133060;
                        defunc_0_split_count_res_133055 = ss_133061;
                        defunc_0_split_count_res_133056 = tt_133062;
                        defunc_0_split_count_res_133057 = tt_133063;
                        defunc_0_split_count_res_133058 = count_133064;
                        ((int64_t *) mem_138504)[i_138227] = defunc_0_split_count_res_133054;
                        ((int64_t *) mem_138506)[i_138227] = defunc_0_split_count_res_133056;
                    }
                    if (mem_138521_cached_sizze_139428 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139428, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138524_cached_sizze_139429 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138524, &mem_138524_cached_sizze_139429, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138234 = 0; i_138234 < num_blocks_132914; i_138234++) {
                        bool y_133144 = slt64(i_138234, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool index_certs_133146;
                        
                        if (!y_133144) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138234, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133147 = ((int64_t *) mem_138504)[i_138234];
                        int64_t defunc_0_f_res_133148 = ((int64_t *) mem_138506)[i_138234];
                        int64_t tmp_133149 = add64((int64_t) 1, i_138234);
                        bool x_133150 = sle64((int64_t) 0, tmp_133149);
                        bool y_133151 = slt64(tmp_133149, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool bounds_check_133152 = x_133150 && y_133151;
                        bool index_certs_133153;
                        
                        if (!bounds_check_133152) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_133149, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133154 = ((int64_t *) mem_138504)[tmp_133149];
                        int64_t defunc_0_f_res_133155 = ((int64_t *) mem_138506)[tmp_133149];
                        int64_t merge_sequential_arg2_133156 = add64(stride_132893, defunc_0_f_res_133148);
                        int64_t merge_sequential_arg2_133157 = add64(stride_132893, defunc_0_f_res_133155);
                        int64_t j_m_i_133158 = sub64(merge_sequential_arg2_133157, merge_sequential_arg2_133156);
                        bool empty_slice_133159 = j_m_i_133158 == (int64_t) 0;
                        int64_t m_133160 = sub64(j_m_i_133158, (int64_t) 1);
                        int64_t i_p_m_t_s_133161 = add64(merge_sequential_arg2_133156, m_133160);
                        bool zzero_leq_i_p_m_t_s_133162 = sle64((int64_t) 0, i_p_m_t_s_133161);
                        bool i_p_m_t_s_leq_w_133163 = slt64(i_p_m_t_s_133161, next_stride_132894);
                        bool zzero_lte_i_133164 = sle64((int64_t) 0, merge_sequential_arg2_133156);
                        bool i_lte_j_133165 = sle64(merge_sequential_arg2_133156, merge_sequential_arg2_133157);
                        bool y_133166 = i_p_m_t_s_leq_w_133163 && zzero_lte_i_133164;
                        bool y_133167 = zzero_leq_i_p_m_t_s_133162 && y_133166;
                        bool forwards_ok_133168 = i_lte_j_133165 && y_133167;
                        bool ok_or_empty_133169 = empty_slice_133159 || forwards_ok_133168;
                        bool index_certs_133170;
                        
                        if (!ok_or_empty_133169) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_133156, ":", (long long) merge_sequential_arg2_133157, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_133171 = sub64(defunc_0_f_res_133154, defunc_0_f_res_133147);
                        bool empty_slice_133172 = j_m_i_133171 == (int64_t) 0;
                        int64_t m_133173 = sub64(j_m_i_133171, (int64_t) 1);
                        int64_t i_p_m_t_s_133174 = add64(defunc_0_f_res_133147, m_133173);
                        bool zzero_leq_i_p_m_t_s_133175 = sle64((int64_t) 0, i_p_m_t_s_133174);
                        bool i_p_m_t_s_leq_w_133176 = slt64(i_p_m_t_s_133174, next_stride_132894);
                        bool zzero_lte_i_133177 = sle64((int64_t) 0, defunc_0_f_res_133147);
                        bool i_lte_j_133178 = sle64(defunc_0_f_res_133147, defunc_0_f_res_133154);
                        bool y_133179 = i_p_m_t_s_leq_w_133176 && zzero_lte_i_133177;
                        bool y_133180 = zzero_leq_i_p_m_t_s_133175 && y_133179;
                        bool forwards_ok_133181 = i_lte_j_133178 && y_133180;
                        bool ok_or_empty_133182 = empty_slice_133172 || forwards_ok_133181;
                        bool index_certs_133183;
                        
                        if (!ok_or_empty_133182) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_133147, ":", (long long) defunc_0_f_res_133154, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:44:3-28\n   #11 ftsort.fut:43:1-44:28\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_133184 = slt64((int64_t) 0, j_m_i_133171);
                        double dummy_133185;
                        int64_t dummy_133186;
                        
                        if (cond_133184) {
                            bool index_certs_137922;
                            
                            if (!cond_133184) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:193:54-57\n   #12 ftsort.fut:44:3-28\n   #13 ftsort.fut:43:1-44:28\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137923 = start_132966 + defunc_0_f_res_133147;
                            double head_res_137924 = ((double *) mem_param_138485.mem)[slice_137923];
                            int64_t head_res_137925 = ((int64_t *) mem_param_138488.mem)[slice_137923];
                            
                            dummy_133185 = head_res_137924;
                            dummy_133186 = head_res_137925;
                        } else {
                            bool y_133191 = slt64((int64_t) 0, j_m_i_133158);
                            bool index_certs_133192;
                            
                            if (!y_133191) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:193:54-57\n   #12 ftsort.fut:44:3-28\n   #13 ftsort.fut:43:1-44:28\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_133193 = start_132966 + merge_sequential_arg2_133156;
                            double head_res_133194 = ((double *) mem_param_138485.mem)[slice_133193];
                            int64_t head_res_133195 = ((int64_t *) mem_param_138488.mem)[slice_133193];
                            
                            dummy_133185 = head_res_133194;
                            dummy_133186 = head_res_133195;
                        }
                        for (int64_t nest_i_139323 = 0; nest_i_139323 < merge_block_sizze_132781; nest_i_139323++) {
                            ((double *) mem_138521)[i_138234 * merge_block_sizze_132781 + nest_i_139323] = dummy_133185;
                        }
                        for (int64_t nest_i_139324 = 0; nest_i_139324 < merge_block_sizze_132781; nest_i_139324++) {
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + nest_i_139324] = dummy_133186;
                        }
                        
                        int64_t data_133198;
                        int64_t i_133202 = (int64_t) 0;
                        
                        for (int64_t k_133201 = 0; k_133201 < merge_block_sizze_132781; k_133201++) {
                            int64_t j_133205 = sub64(k_133201, i_133202);
                            bool cond_133206 = j_133205 == j_m_i_133158;
                            bool cond_133207;
                            
                            if (cond_133206) {
                                cond_133207 = 1;
                            } else {
                                bool cond_133208 = slt64(i_133202, j_m_i_133171);
                                bool cond_f_res_133209;
                                
                                if (cond_133208) {
                                    bool x_137926 = sle64((int64_t) 0, j_133205);
                                    bool y_137927 = slt64(j_133205, j_m_i_133158);
                                    bool bounds_check_137928 = x_137926 && y_137927;
                                    bool index_certs_137929;
                                    
                                    if (!bounds_check_137928) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:44:3-28\n   #12 ftsort.fut:43:1-44:28\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_137933 = sle64((int64_t) 0, i_133202);
                                    bool bounds_check_137934 = cond_133208 && x_137933;
                                    bool index_certs_137935;
                                    
                                    if (!bounds_check_137934) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:44:3-28\n   #12 ftsort.fut:43:1-44:28\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137930 = merge_sequential_arg2_133156 + j_133205;
                                    int64_t slice_137931 = start_132966 + slice_137930;
                                    double leq_arg1_137932 = ((double *) mem_param_138485.mem)[slice_137931];
                                    int64_t slice_137936 = defunc_0_f_res_133147 + i_133202;
                                    int64_t slice_137937 = start_132966 + slice_137936;
                                    double leq_arg0_137938 = ((double *) mem_param_138485.mem)[slice_137937];
                                    bool zlze_res_137939 = leq_arg0_137938 <= leq_arg1_137932;
                                    
                                    cond_f_res_133209 = zlze_res_137939;
                                } else {
                                    cond_f_res_133209 = 0;
                                }
                                cond_133207 = cond_f_res_133209;
                            }
                            
                            int64_t loopres_133224;
                            double loopres_133225;
                            int64_t loopres_133226;
                            
                            if (cond_133207) {
                                bool x_137941 = sle64((int64_t) 0, i_133202);
                                bool y_137942 = slt64(i_133202, j_m_i_133171);
                                bool bounds_check_137943 = x_137941 && y_137942;
                                bool index_certs_137944;
                                
                                if (!bounds_check_137943) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:44:3-28\n   #12 ftsort.fut:43:1-44:28\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_137940 = add64((int64_t) 1, i_133202);
                                int64_t slice_137945 = defunc_0_f_res_133147 + i_133202;
                                int64_t slice_137946 = start_132966 + slice_137945;
                                double tmp_137947 = ((double *) mem_param_138485.mem)[slice_137946];
                                int64_t tmp_137948 = ((int64_t *) mem_param_138488.mem)[slice_137946];
                                
                                loopres_133224 = tmp_137940;
                                loopres_133225 = tmp_137947;
                                loopres_133226 = tmp_137948;
                            } else {
                                bool x_133236 = sle64((int64_t) 0, j_133205);
                                bool y_133237 = slt64(j_133205, j_m_i_133158);
                                bool bounds_check_133238 = x_133236 && y_133237;
                                bool index_certs_133239;
                                
                                if (!bounds_check_133238) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:44:3-28\n   #12 ftsort.fut:43:1-44:28\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_133240 = merge_sequential_arg2_133156 + j_133205;
                                int64_t slice_133241 = start_132966 + slice_133240;
                                double tmp_133242 = ((double *) mem_param_138485.mem)[slice_133241];
                                int64_t tmp_133243 = ((int64_t *) mem_param_138488.mem)[slice_133241];
                                
                                loopres_133224 = i_133202;
                                loopres_133225 = tmp_133242;
                                loopres_133226 = tmp_133243;
                            }
                            ((double *) mem_138521)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133225;
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133226;
                            
                            int64_t i_tmp_139325 = loopres_133224;
                            
                            i_133202 = i_tmp_139325;
                        }
                        data_133198 = i_133202;
                    }
                    if (memblock_alloc(ctx, &mem_138559, bytes_138520, "mem_138559")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138559.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138521, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_alloc(ctx, &mem_138563, bytes_138520, "mem_138563")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138563.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138524, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138559, "mem_138559") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138563, "mem_138563") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138491, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138494, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138583.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
                    return 1;
            }
            
            int64_t flat_dim_133250 = next_stride_132894 * num_merges_132898;
            
            if (memblock_alloc(ctx, &mem_138597, bytes_138490, "mem_138597")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138597.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138491, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            if (memblock_alloc(ctx, &mem_138601, bytes_138490, "mem_138601")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138601.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138494, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            
            bool loop_cond_133253 = slt64(next_stride_132894, flat_dim_132778);
            
            if (memblock_set(ctx, &mem_param_tmp_139299, &mem_138597, "mem_138597") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139300, &mem_138601, "mem_138601") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139301 = flat_dim_133250;
            bool loop_while_tmp_139302 = loop_cond_133253;
            int64_t stride_tmp_139305 = next_stride_132894;
            
            if (memblock_set(ctx, &mem_param_138485, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138488, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
                return 1;
            loop_dz2084Uz2082U_132889 = loop_dz2084Uz2082U_tmp_139301;
            loop_while_132890 = loop_while_tmp_139302;
            stride_132893 = stride_tmp_139305;
        }
        if (memblock_set(ctx, &ext_mem_138608, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138607, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        data_132884 = loop_dz2084Uz2082U_132889;
        data_132885 = loop_while_132890;
        data_132888 = stride_132893;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        
        bool empty_slice_133254 = n_90566 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_133255 = sle64((int64_t) 0, zs_lhs_132762);
        bool i_p_m_t_s_leq_w_133256 = slt64(zs_lhs_132762, data_132884);
        bool y_133257 = zzero_leq_i_p_m_t_s_133255 && i_p_m_t_s_leq_w_133256;
        bool ok_or_empty_133258 = empty_slice_133254 || y_133257;
        bool index_certs_133259;
        
        if (!ok_or_empty_133258) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_90566, "] out of bounds for array of shape [", (long long) data_132884, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftbasics.fut:193:54-57\n   #5  ftsort.fut:44:3-28\n   #6  ftsort.fut:43:1-44:28\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138611, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138613, bytes_138405, "mem_138613")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138615, bytes_138405, "mem_138615")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138248 = 0; i_138248 < n_90566; i_138248++) {
        int64_t eta_p_133263 = ((int64_t *) ext_mem_138611.mem)[i_138248];
        bool x_133264 = sle64((int64_t) 0, eta_p_133263);
        bool y_133265 = slt64(eta_p_133263, n_90566);
        bool bounds_check_133266 = x_133264 && y_133265;
        bool index_certs_133267;
        
        if (!bounds_check_133266) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133263, "] out of bounds for array of shape [", (long long) n_90566, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:44:3-28\n   #5  ftsort.fut:43:1-44:28\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133268 = ((int64_t *) ext_mem_138404.mem)[eta_p_133263];
        double lifted_lambda_res_133269 = ((double *) xs_mem_138403.mem)[eta_p_133263];
        
        ((int64_t *) mem_138613.mem)[i_138248] = lifted_lambda_res_133268;
        ((double *) mem_138615.mem)[i_138248] = lifted_lambda_res_133269;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138613, "mem_138613") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138615, "mem_138615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139418, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139419, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138409);
        free(mem_138412);
        free(mem_138422);
        free(mem_138424);
        free(mem_138491);
        free(mem_138494);
        free(mem_138504);
        free(mem_138506);
        free(mem_138521);
        free(mem_138524);
        if (memblock_unref(ctx, &mem_138615, "mem_138615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138613, "mem_138613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138601, "mem_138601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138597, "mem_138597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138563, "mem_138563") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138559, "mem_138559") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138568, "mem_138568") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138566, "mem_138566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138608, "ext_mem_138608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_139430, struct memblock *mem_out_p_139431, struct memblock xs_mem_138403, int64_t n_88222, int64_t incr_88223)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138409_cached_sizze_139432 = 0;
    unsigned char *mem_138409 = NULL;
    int64_t mem_138412_cached_sizze_139433 = 0;
    unsigned char *mem_138412 = NULL;
    int64_t mem_138422_cached_sizze_139434 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139435 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138491_cached_sizze_139436 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138494_cached_sizze_139437 = 0;
    unsigned char *mem_138494 = NULL;
    int64_t mem_138504_cached_sizze_139438 = 0;
    unsigned char *mem_138504 = NULL;
    int64_t mem_138506_cached_sizze_139439 = 0;
    unsigned char *mem_138506 = NULL;
    int64_t mem_138521_cached_sizze_139440 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138524_cached_sizze_139441 = 0;
    unsigned char *mem_138524 = NULL;
    struct memblock mem_138615;
    
    mem_138615.references = NULL;
    
    struct memblock mem_138613;
    
    mem_138613.references = NULL;
    
    struct memblock mem_param_tmp_139300;
    
    mem_param_tmp_139300.references = NULL;
    
    struct memblock mem_param_tmp_139299;
    
    mem_param_tmp_139299.references = NULL;
    
    struct memblock mem_138601;
    
    mem_138601.references = NULL;
    
    struct memblock mem_138597;
    
    mem_138597.references = NULL;
    
    struct memblock mem_138563;
    
    mem_138563.references = NULL;
    
    struct memblock mem_138559;
    
    mem_138559.references = NULL;
    
    struct memblock mem_138568;
    
    mem_138568.references = NULL;
    
    struct memblock mem_138566;
    
    mem_138566.references = NULL;
    
    struct memblock ext_mem_138583;
    
    ext_mem_138583.references = NULL;
    
    struct memblock ext_mem_138586;
    
    ext_mem_138586.references = NULL;
    
    struct memblock mem_param_138488;
    
    mem_param_138488.references = NULL;
    
    struct memblock mem_param_138485;
    
    mem_param_138485.references = NULL;
    
    struct memblock ext_mem_138607;
    
    ext_mem_138607.references = NULL;
    
    struct memblock ext_mem_138608;
    
    ext_mem_138608.references = NULL;
    
    struct memblock mem_138481;
    
    mem_138481.references = NULL;
    
    struct memblock mem_138477;
    
    mem_138477.references = NULL;
    
    struct memblock ext_mem_138611;
    
    ext_mem_138611.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_88222;
    bool cond_132761 = sle64(n_88222, (int64_t) 1);
    int64_t zs_lhs_132762 = sub64(n_88222, (int64_t) 1);
    int64_t zp_rhs_132763 = sdiv_safe64(zs_lhs_132762, (int64_t) 20);
    int64_t min_num_blocks_132764 = add64((int64_t) 1, zp_rhs_132763);
    bool loop_cond_132765 = slt64((int64_t) 1, min_num_blocks_132764);
    bool smallest_pow_2_geq_than_res_132766;
    int64_t smallest_pow_2_geq_than_res_132767;
    bool loop_while_132768;
    int64_t x_132769;
    
    loop_while_132768 = loop_cond_132765;
    x_132769 = (int64_t) 1;
    while (loop_while_132768) {
        int64_t loopres_132770 = mul64((int64_t) 2, x_132769);
        bool loop_cond_132771 = slt64(loopres_132770, min_num_blocks_132764);
        bool loop_while_tmp_139283 = loop_cond_132771;
        int64_t x_tmp_139284 = loopres_132770;
        
        loop_while_132768 = loop_while_tmp_139283;
        x_132769 = x_tmp_139284;
    }
    smallest_pow_2_geq_than_res_132766 = loop_while_132768;
    smallest_pow_2_geq_than_res_132767 = x_132769;
    
    bool zzero_132772 = smallest_pow_2_geq_than_res_132767 == (int64_t) 0;
    bool nonzzero_132773 = !zzero_132772;
    bool protect_assert_disj_132774 = cond_132761 || nonzzero_132773;
    bool nonzzero_cert_132775;
    
    if (!protect_assert_disj_132774) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:41:3-27\n   #5  ftsort.fut:40:1-41:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_132776 = sdiv_safe64(zs_lhs_132762, smallest_pow_2_geq_than_res_132767);
    int64_t block_sizze_132777 = add64((int64_t) 1, zp_rhs_132776);
    bool y_132782 = slt64((int64_t) 0, n_88222);
    bool protect_assert_disj_139017 = cond_132761 || y_132782;
    bool index_certs_132783;
    
    if (!protect_assert_disj_139017) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_88222, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:41:3-27\n   #5  ftsort.fut:40:1-41:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132796 = slt64(smallest_pow_2_geq_than_res_132767, (int64_t) 0);
    bool valid_132797 = !bounds_invalid_upwards_132796;
    bool protect_assert_disj_139025 = cond_132761 || valid_132797;
    bool range_valid_c_132798;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_132767, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:193:54-57\n   #6  ftsort.fut:41:3-27\n   #7  ftsort.fut:40:1-41:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132800 = slt64(block_sizze_132777, (int64_t) 0);
    bool valid_132801 = !bounds_invalid_upwards_132800;
    bool protect_assert_disj_139027 = cond_132761 || valid_132801;
    bool range_valid_c_132802;
    
    if (!protect_assert_disj_139027) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_132777, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_132804 = sle64(block_sizze_132777, (int64_t) 1);
    int64_t tmp_132805 = sub64(block_sizze_132777, (int64_t) 2);
    bool bounds_invalid_upwards_132806 = slt64(tmp_132805, (int64_t) 0);
    bool valid_132808 = !bounds_invalid_upwards_132806;
    bool protect_assert_disj_132809 = cond_132804 || valid_132808;
    bool protect_assert_disj_139029 = cond_132761 || protect_assert_disj_132809;
    bool range_valid_c_132810;
    
    if (!protect_assert_disj_139029) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_132805, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138614 = (int64_t) 4 * n_88222;
    
    if (futrts_indicesWithIncrement_9338(ctx, &ext_mem_138404, xs_mem_138403, n_88222, incr_88223) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139285 = 0; i_139285 < n_88222; i_139285++) {
        int64_t x_139286 = (int64_t) 0 + i_139285 * (int64_t) 1;
        
        ((int64_t *) mem_138406.mem)[i_139285] = x_139286;
    }
    
    int64_t flat_dim_132778 = smallest_pow_2_geq_than_res_132767 * block_sizze_132777;
    bool x_139012 = !cond_132761;
    int64_t greatest_divisor_leq_than_arg1_132780 = mul64((int64_t) 2, block_sizze_132777);
    int64_t merge_block_sizze_132781;
    
    if (x_139012) {
        int64_t x_139014;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139014, (int64_t) 8, greatest_divisor_leq_than_arg1_132780) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_132781 = x_139014;
    } else {
        merge_block_sizze_132781 = (int64_t) 0;
    }
    
    float reduce_arg1_132784;
    
    if (x_139012) {
        float x_139018 = ((float *) xs_mem_138403.mem)[(int64_t) 0];
        
        reduce_arg1_132784 = x_139018;
    } else {
        reduce_arg1_132784 = 0.0F;
    }
    
    float defunc_0_reduce_res_137955;
    int64_t defunc_0_reduce_res_137956;
    
    if (x_139012) {
        float x_139020;
        int64_t x_139021;
        float redout_138206;
        int64_t redout_138207;
        
        redout_138206 = reduce_arg1_132784;
        redout_138207 = (int64_t) 0;
        for (int64_t i_138208 = 0; i_138208 < n_88222; i_138208++) {
            float x_132787 = ((float *) xs_mem_138403.mem)[i_138208];
            bool zlze_res_132793 = redout_138206 <= x_132787;
            float defunc_0_op_res_132794;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132794 = x_132787;
            } else {
                defunc_0_op_res_132794 = redout_138206;
            }
            
            int64_t defunc_0_op_res_132795;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132795 = i_138208;
            } else {
                defunc_0_op_res_132795 = redout_138207;
            }
            
            float redout_tmp_139287 = defunc_0_op_res_132794;
            int64_t redout_tmp_139288 = defunc_0_op_res_132795;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
        }
        x_139020 = redout_138206;
        x_139021 = redout_138207;
        defunc_0_reduce_res_137955 = x_139020;
        defunc_0_reduce_res_137956 = x_139021;
    } else {
        defunc_0_reduce_res_137955 = 0.0F;
        defunc_0_reduce_res_137956 = (int64_t) 0;
    }
    
    int64_t distance_132807 = add64((int64_t) 1, tmp_132805);
    int64_t binop_x_138407 = (int64_t) 4 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138408 = block_sizze_132777 * binop_x_138407;
    int64_t binop_x_138410 = (int64_t) 8 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138411 = block_sizze_132777 * binop_x_138410;
    int64_t bytes_138421 = (int64_t) 4 * block_sizze_132777;
    int64_t bytes_138423 = (int64_t) 8 * block_sizze_132777;
    bool loop_cond_132881 = slt64(block_sizze_132777, flat_dim_132778);
    bool zzero_132882 = merge_block_sizze_132781 == (int64_t) 0;
    bool nonzzero_132883 = !zzero_132882;
    
    if (cond_132761) {
        if (memblock_set(ctx, &ext_mem_138611, &mem_138406, "mem_138406") != 0)
            return 1;
    } else {
        if (mem_138409_cached_sizze_139432 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138409, &mem_138409_cached_sizze_139432, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138412_cached_sizze_139433 < bytes_138411) {
            err = lexical_realloc(ctx, &mem_138412, &mem_138412_cached_sizze_139433, bytes_138411);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138422_cached_sizze_139434 < bytes_138421) {
            err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139434, bytes_138421);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138424_cached_sizze_139435 < bytes_138423) {
            err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139435, bytes_138423);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138220 = 0; i_138220 < smallest_pow_2_geq_than_res_132767; i_138220++) {
            int64_t zp_lhs_132814 = mul64(block_sizze_132777, i_138220);
            
            for (int64_t i_138213 = 0; i_138213 < block_sizze_132777; i_138213++) {
                int64_t k_132818 = add64(zp_lhs_132814, i_138213);
                bool cond_132819 = slt64(k_132818, n_88222);
                float lifted_lambda_res_132820;
                int64_t lifted_lambda_res_132821;
                
                if (cond_132819) {
                    bool x_137808 = sle64((int64_t) 0, k_132818);
                    bool bounds_check_137809 = cond_132819 && x_137808;
                    bool index_certs_137810;
                    
                    if (!bounds_check_137809) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_132818, "] out of bounds for array of shape [", (long long) n_88222, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float lifted_lambda_res_t_res_137811 = ((float *) xs_mem_138403.mem)[k_132818];
                    
                    lifted_lambda_res_132820 = lifted_lambda_res_t_res_137811;
                    lifted_lambda_res_132821 = k_132818;
                } else {
                    lifted_lambda_res_132820 = defunc_0_reduce_res_137955;
                    lifted_lambda_res_132821 = defunc_0_reduce_res_137956;
                }
                ((float *) mem_138422)[i_138213] = lifted_lambda_res_132820;
                ((int64_t *) mem_138424)[i_138213] = lifted_lambda_res_132821;
            }
            if (!cond_132804) {
                for (int64_t i_132830 = 0; i_132830 < distance_132807; i_132830++) {
                    int64_t gt_arg1_132833 = add64((int64_t) 1, i_132830);
                    bool x_132834 = sle64((int64_t) 0, gt_arg1_132833);
                    bool y_132835 = slt64(gt_arg1_132833, block_sizze_132777);
                    bool bounds_check_132836 = x_132834 && y_132835;
                    bool index_certs_132837;
                    
                    if (!bounds_check_132836) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_132833, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_132839 = slt64(i_132830, block_sizze_132777);
                    bool index_certs_132840;
                    
                    if (!y_132839) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_132830, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float gt_arg1_132838 = ((float *) mem_138422)[gt_arg1_132833];
                    float gt_arg0_132841 = ((float *) mem_138422)[i_132830];
                    bool zlze_res_132842 = gt_arg0_132841 <= gt_arg1_132838;
                    bool defunc_0_lifted_gt_res_132843 = !zlze_res_132842;
                    bool s_132844;
                    int64_t s_132847;
                    bool loop_while_132848;
                    int64_t j_132851;
                    
                    loop_while_132848 = defunc_0_lifted_gt_res_132843;
                    j_132851 = i_132830;
                    while (loop_while_132848) {
                        bool x_132852 = sle64((int64_t) 0, j_132851);
                        bool y_132853 = slt64(j_132851, block_sizze_132777);
                        bool bounds_check_132854 = x_132852 && y_132853;
                        bool index_certs_132855;
                        
                        if (!bounds_check_132854) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_132851, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_132858 = add64((int64_t) 1, j_132851);
                        bool x_132859 = sle64((int64_t) 0, copy_arg0_132858);
                        bool y_132860 = slt64(copy_arg0_132858, block_sizze_132777);
                        bool bounds_check_132861 = x_132859 && y_132860;
                        bool index_certs_132862;
                        
                        if (!bounds_check_132861) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_132858, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        float copy_arg0_132856 = ((float *) mem_138422)[j_132851];
                        int64_t copy_arg0_132857 = ((int64_t *) mem_138424)[j_132851];
                        float copy_arg0_132863 = ((float *) mem_138422)[copy_arg0_132858];
                        int64_t copy_arg0_132864 = ((int64_t *) mem_138424)[copy_arg0_132858];
                        
                        ((float *) mem_138422)[j_132851] = copy_arg0_132863;
                        ((int64_t *) mem_138424)[j_132851] = copy_arg0_132864;
                        ((float *) mem_138422)[copy_arg0_132858] = copy_arg0_132856;
                        ((int64_t *) mem_138424)[copy_arg0_132858] = copy_arg0_132857;
                        
                        int64_t tmp_132869 = sub64(j_132851, (int64_t) 1);
                        bool cond_132870 = sle64((int64_t) 0, tmp_132869);
                        bool loop_cond_132871;
                        
                        if (cond_132870) {
                            bool y_137813 = slt64(tmp_132869, block_sizze_132777);
                            bool bounds_check_137814 = cond_132870 && y_137813;
                            bool index_certs_137815;
                            
                            if (!bounds_check_137814) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132869, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            float gt_arg1_137812 = ((float *) mem_138422)[j_132851];
                            float gt_arg0_137816 = ((float *) mem_138422)[tmp_132869];
                            bool zlze_res_137817 = gt_arg0_137816 <= gt_arg1_137812;
                            bool defunc_0_lifted_gt_res_137818 = !zlze_res_137817;
                            
                            loop_cond_132871 = defunc_0_lifted_gt_res_137818;
                        } else {
                            loop_cond_132871 = 0;
                        }
                        
                        bool loop_while_tmp_139295 = loop_cond_132871;
                        int64_t j_tmp_139298 = tmp_132869;
                        
                        loop_while_132848 = loop_while_tmp_139295;
                        j_132851 = j_tmp_139298;
                    }
                    s_132844 = loop_while_132848;
                    s_132847 = j_132851;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_138409, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138422, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138412, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138424, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
        }
        if (memblock_alloc(ctx, &mem_138477, bytes_138408, "mem_138477")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_138477.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint32_t *) mem_138409, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        if (memblock_alloc(ctx, &mem_138481, bytes_138411, "mem_138481")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138481.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138412, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        
        int64_t data_132884;
        bool data_132885;
        int64_t data_132888;
        int64_t loop_dz2084Uz2082U_132889;
        bool loop_while_132890;
        int64_t stride_132893;
        
        if (memblock_set(ctx, &mem_param_138485, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138488, &mem_138481, "mem_138481") != 0)
            return 1;
        loop_dz2084Uz2082U_132889 = flat_dim_132778;
        loop_while_132890 = loop_cond_132881;
        stride_132893 = block_sizze_132777;
        while (loop_while_132890) {
            int64_t next_stride_132894 = mul64((int64_t) 2, stride_132893);
            bool zzero_132895 = next_stride_132894 == (int64_t) 0;
            bool nonzzero_132896 = !zzero_132895;
            bool nonzzero_cert_132897;
            
            if (!nonzzero_132896) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:41:3-27\n   #5  ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_132898 = sdiv64(flat_dim_132778, next_stride_132894);
            bool bounds_invalid_upwards_132899 = slt64(num_merges_132898, (int64_t) 0);
            bool valid_132900 = !bounds_invalid_upwards_132899;
            bool range_valid_c_132901;
            
            if (!valid_132900) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_132898, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:193:54-57\n   #6  ftsort.fut:41:3-27\n   #7  ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_132903 = sub64(next_stride_132894, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_132904 = sle64((int64_t) 0, m_132903);
            bool cond_132906 = slt64(next_stride_132894, (int64_t) 10);
            bool protect_assert_disj_132907 = nonzzero_132883 || cond_132906;
            bool nonzzero_cert_132908;
            
            if (!protect_assert_disj_132907) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_132909 = smod_safe64(next_stride_132894, merge_block_sizze_132781);
            bool num_blocks_132910 = zeze_lhs_132909 == (int64_t) 0;
            bool protect_assert_disj_132911 = cond_132906 || num_blocks_132910;
            bool assert_c_132912;
            
            if (!protect_assert_disj_132911) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_132914 = sdiv_safe64(next_stride_132894, merge_block_sizze_132781);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915 = add64((int64_t) 1, num_blocks_132914);
            int64_t j_m_i_132916 = sub64(next_stride_132894, stride_132893);
            int64_t flat_dim_132917 = merge_block_sizze_132781 * num_blocks_132914;
            bool bounds_invalid_upwards_132918 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, (int64_t) 0);
            bool zzero_lte_i_132919 = sle64((int64_t) 0, stride_132893);
            bool i_lte_j_132920 = sle64(stride_132893, next_stride_132894);
            bool empty_slice_132921 = stride_132893 == (int64_t) 0;
            int64_t m_132922 = sub64(stride_132893, (int64_t) 1);
            bool bounds_invalid_upwards_132923 = slt64(num_blocks_132914, (int64_t) 0);
            bool empty_slice_132924 = j_m_i_132916 == (int64_t) 0;
            int64_t m_132925 = sub64(j_m_i_132916, (int64_t) 1);
            bool cond_132926 = slt64((int64_t) 0, stride_132893);
            bool valid_132927 = !bounds_invalid_upwards_132918;
            bool zzero_leq_i_p_m_t_s_132928 = sle64((int64_t) 0, m_132922);
            bool i_p_m_t_s_leq_w_132929 = slt64(m_132922, next_stride_132894);
            bool valid_132930 = !bounds_invalid_upwards_132923;
            bool i_p_m_t_s_leq_w_132931 = slt64(m_132903, flat_dim_132917);
            int64_t i_p_m_t_s_132932 = add64(stride_132893, m_132925);
            bool y_132933 = slt64((int64_t) 0, j_m_i_132916);
            bool protect_assert_disj_132934 = cond_132906 || valid_132927;
            bool range_valid_c_132935;
            
            if (!protect_assert_disj_132934) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132936 = zzero_leq_i_p_m_t_s_132928 && i_p_m_t_s_leq_w_132929;
            bool protect_assert_disj_132937 = cond_132906 || valid_132930;
            bool range_valid_c_132938;
            
            if (!protect_assert_disj_132937) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_132914, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132939 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132931;
            bool zzero_leq_i_p_m_t_s_132940 = sle64((int64_t) 0, i_p_m_t_s_132932);
            bool i_p_m_t_s_leq_w_132941 = slt64(i_p_m_t_s_132932, next_stride_132894);
            bool forwards_ok_132942 = zzero_lte_i_132919 && y_132936;
            bool ok_or_empty_132943 = zzero_132895 || y_132939;
            bool y_132944 = zzero_lte_i_132919 && i_p_m_t_s_leq_w_132941;
            bool protect_assert_disj_132945 = cond_132926 || y_132933;
            bool ok_or_empty_132946 = empty_slice_132921 || forwards_ok_132942;
            bool protect_assert_disj_132947 = cond_132906 || ok_or_empty_132943;
            bool index_certs_132948;
            
            if (!protect_assert_disj_132947) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) flat_dim_132917, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132949 = zzero_leq_i_p_m_t_s_132940 && y_132944;
            bool loop_not_taken_132950 = !cond_132906;
            bool protect_assert_disj_132951 = protect_assert_disj_132945 || loop_not_taken_132950;
            bool index_certs_132952;
            
            if (!protect_assert_disj_132951) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132953 = cond_132906 || ok_or_empty_132946;
            bool index_certs_132954;
            
            if (!protect_assert_disj_132953) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:41:3-27\n   #12 ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_132955 = i_lte_j_132920 && y_132949;
            bool protect_assert_disj_132956 = ok_or_empty_132946 || loop_not_taken_132950;
            bool index_certs_132957;
            
            if (!protect_assert_disj_132956) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_132958 = empty_slice_132924 || forwards_ok_132955;
            bool protect_assert_disj_132959 = loop_not_taken_132950 || ok_or_empty_132958;
            bool index_certs_132960;
            
            if (!protect_assert_disj_132959) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132961 = cond_132906 || ok_or_empty_132958;
            bool index_certs_132962;
            
            if (!protect_assert_disj_132961) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:41:3-27\n   #12 ftsort.fut:40:1-41:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138489 = (int64_t) 4 * num_merges_132898;
            int64_t bytes_138490 = next_stride_132894 * binop_x_138489;
            int64_t binop_x_138492 = (int64_t) 8 * num_merges_132898;
            int64_t bytes_138493 = next_stride_132894 * binop_x_138492;
            bool i_lte_j_132905 = sle64((int64_t) 0, next_stride_132894);
            
            if (mem_138491_cached_sizze_139436 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139436, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138494_cached_sizze_139437 < bytes_138493) {
                err = lexical_realloc(ctx, &mem_138494, &mem_138494_cached_sizze_139437, bytes_138493);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138503 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915;
            int64_t binop_x_138519 = (int64_t) 4 * num_blocks_132914;
            int64_t bytes_138520 = merge_block_sizze_132781 * binop_x_138519;
            int64_t binop_x_138522 = (int64_t) 8 * num_blocks_132914;
            int64_t bytes_138523 = merge_block_sizze_132781 * binop_x_138522;
            int64_t bytes_138565 = (int64_t) 8 * stride_132893;
            int64_t bytes_138567 = (int64_t) 16 * stride_132893;
            
            for (int64_t i_138241 = 0; i_138241 < num_merges_132898; i_138241++) {
                int64_t start_132966 = mul64(next_stride_132894, i_138241);
                int64_t j_m_i_132967 = sub64(loop_dz2084Uz2082U_132889, start_132966);
                bool empty_slice_132968 = j_m_i_132967 == (int64_t) 0;
                int64_t m_132969 = sub64(j_m_i_132967, (int64_t) 1);
                int64_t i_p_m_t_s_132970 = add64(start_132966, m_132969);
                bool zzero_leq_i_p_m_t_s_132971 = sle64((int64_t) 0, i_p_m_t_s_132970);
                bool i_p_m_t_s_leq_w_132972 = slt64(i_p_m_t_s_132970, loop_dz2084Uz2082U_132889);
                bool zzero_lte_i_132973 = sle64((int64_t) 0, start_132966);
                bool i_lte_j_132974 = sle64(start_132966, loop_dz2084Uz2082U_132889);
                bool y_132975 = i_p_m_t_s_leq_w_132972 && zzero_lte_i_132973;
                bool y_132976 = zzero_leq_i_p_m_t_s_132971 && y_132975;
                bool forwards_ok_132977 = i_lte_j_132974 && y_132976;
                bool ok_or_empty_132978 = empty_slice_132968 || forwards_ok_132977;
                bool index_certs_132979;
                
                if (!ok_or_empty_132978) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_132966, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_132889, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_132980 = slt64(m_132903, j_m_i_132967);
                bool y_132981 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132980;
                bool forwards_ok_132982 = i_lte_j_132905 && y_132981;
                bool ok_or_empty_132983 = zzero_132895 || forwards_ok_132982;
                bool index_certs_132984;
                
                if (!ok_or_empty_132983) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) j_m_i_132967, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:193:54-57\n   #8  ftsort.fut:41:3-27\n   #9  ftsort.fut:40:1-41:27\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_132906) {
                    float dummy_137844;
                    int64_t dummy_137845;
                    
                    if (cond_132926) {
                        float head_res_137846 = ((float *) mem_param_138485.mem)[start_132966];
                        int64_t head_res_137847 = ((int64_t *) mem_param_138488.mem)[start_132966];
                        
                        dummy_137844 = head_res_137846;
                        dummy_137845 = head_res_137847;
                    } else {
                        int64_t slice_137848 = stride_132893 + start_132966;
                        float head_res_137849 = ((float *) mem_param_138485.mem)[slice_137848];
                        int64_t head_res_137850 = ((int64_t *) mem_param_138488.mem)[slice_137848];
                        
                        dummy_137844 = head_res_137849;
                        dummy_137845 = head_res_137850;
                    }
                    if (memblock_alloc(ctx, &mem_138566, bytes_138565, "mem_138566")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139308 = 0; nest_i_139308 < next_stride_132894; nest_i_139308++) {
                        ((float *) mem_138566.mem)[nest_i_139308] = dummy_137844;
                    }
                    if (memblock_alloc(ctx, &mem_138568, bytes_138567, "mem_138568")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139309 = 0; nest_i_139309 < next_stride_132894; nest_i_139309++) {
                        ((int64_t *) mem_138568.mem)[nest_i_139309] = dummy_137845;
                    }
                    
                    int64_t data_137853;
                    int64_t i_137857 = (int64_t) 0;
                    
                    for (int64_t k_137856 = 0; k_137856 < next_stride_132894; k_137856++) {
                        int64_t j_137860 = sub64(k_137856, i_137857);
                        bool cond_137861 = j_137860 == j_m_i_132916;
                        bool cond_137862;
                        
                        if (cond_137861) {
                            cond_137862 = 1;
                        } else {
                            bool cond_137863 = slt64(i_137857, stride_132893);
                            bool cond_f_res_137864;
                            
                            if (cond_137863) {
                                bool x_137865 = sle64((int64_t) 0, j_137860);
                                bool y_137866 = slt64(j_137860, j_m_i_132916);
                                bool bounds_check_137867 = x_137865 && y_137866;
                                bool index_certs_137868;
                                
                                if (!bounds_check_137867) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_137872 = sle64((int64_t) 0, i_137857);
                                bool bounds_check_137873 = cond_137863 && x_137872;
                                bool index_certs_137874;
                                
                                if (!bounds_check_137873) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137869 = stride_132893 + j_137860;
                                int64_t slice_137870 = start_132966 + slice_137869;
                                float leq_arg1_137871 = ((float *) mem_param_138485.mem)[slice_137870];
                                int64_t slice_137875 = start_132966 + i_137857;
                                float leq_arg0_137876 = ((float *) mem_param_138485.mem)[slice_137875];
                                bool zlze_res_137877 = leq_arg0_137876 <= leq_arg1_137871;
                                
                                cond_f_res_137864 = zlze_res_137877;
                            } else {
                                cond_f_res_137864 = 0;
                            }
                            cond_137862 = cond_f_res_137864;
                        }
                        
                        int64_t loopres_137878;
                        float loopres_137879;
                        int64_t loopres_137880;
                        
                        if (cond_137862) {
                            bool x_137882 = sle64((int64_t) 0, i_137857);
                            bool y_137883 = slt64(i_137857, stride_132893);
                            bool bounds_check_137884 = x_137882 && y_137883;
                            bool index_certs_137885;
                            
                            if (!bounds_check_137884) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_137881 = add64((int64_t) 1, i_137857);
                            int64_t slice_137886 = start_132966 + i_137857;
                            float tmp_137887 = ((float *) mem_param_138485.mem)[slice_137886];
                            int64_t tmp_137888 = ((int64_t *) mem_param_138488.mem)[slice_137886];
                            
                            loopres_137878 = tmp_137881;
                            loopres_137879 = tmp_137887;
                            loopres_137880 = tmp_137888;
                        } else {
                            bool x_137889 = sle64((int64_t) 0, j_137860);
                            bool y_137890 = slt64(j_137860, j_m_i_132916);
                            bool bounds_check_137891 = x_137889 && y_137890;
                            bool index_certs_137892;
                            
                            if (!bounds_check_137891) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:193:54-57\n   #9  ftsort.fut:41:3-27\n   #10 ftsort.fut:40:1-41:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137893 = stride_132893 + j_137860;
                            int64_t slice_137894 = start_132966 + slice_137893;
                            float tmp_137895 = ((float *) mem_param_138485.mem)[slice_137894];
                            int64_t tmp_137896 = ((int64_t *) mem_param_138488.mem)[slice_137894];
                            
                            loopres_137878 = i_137857;
                            loopres_137879 = tmp_137895;
                            loopres_137880 = tmp_137896;
                        }
                        ((float *) mem_138566.mem)[k_137856] = loopres_137879;
                        ((int64_t *) mem_138568.mem)[k_137856] = loopres_137880;
                        
                        int64_t i_tmp_139310 = loopres_137878;
                        
                        i_137857 = i_tmp_139310;
                    }
                    data_137853 = i_137857;
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138566, "mem_138566") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138568, "mem_138568") != 0)
                        return 1;
                } else {
                    if (mem_138504_cached_sizze_139438 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138504, &mem_138504_cached_sizze_139438, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138506_cached_sizze_139439 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138506, &mem_138506_cached_sizze_139439, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138227 = 0; i_138227 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915; i_138227++) {
                        int64_t split_count_arg3_133046 = mul64(merge_block_sizze_132781, i_138227);
                        int64_t defunc_0_split_count_res_133047;
                        int64_t defunc_0_split_count_res_133048;
                        int64_t defunc_0_split_count_res_133049;
                        int64_t defunc_0_split_count_res_133050;
                        int64_t defunc_0_split_count_res_133051;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_133047, &defunc_0_split_count_res_133048, &defunc_0_split_count_res_133049, &defunc_0_split_count_res_133050, &defunc_0_split_count_res_133051, (int64_t) 0, stride_132893, (int64_t) 0, j_m_i_132916, split_count_arg3_133046) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_133052 = slt64((int64_t) 0, defunc_0_split_count_res_133051);
                        bool defunc_0_split_count_res_133053;
                        int64_t defunc_0_split_count_res_133054;
                        int64_t defunc_0_split_count_res_133055;
                        int64_t defunc_0_split_count_res_133056;
                        int64_t defunc_0_split_count_res_133057;
                        int64_t defunc_0_split_count_res_133058;
                        bool loop_while_133059;
                        int64_t ss_133060;
                        int64_t ss_133061;
                        int64_t tt_133062;
                        int64_t tt_133063;
                        int64_t count_133064;
                        
                        loop_while_133059 = loop_cond_133052;
                        ss_133060 = defunc_0_split_count_res_133047;
                        ss_133061 = defunc_0_split_count_res_133048;
                        tt_133062 = defunc_0_split_count_res_133049;
                        tt_133063 = defunc_0_split_count_res_133050;
                        count_133064 = defunc_0_split_count_res_133051;
                        while (loop_while_133059) {
                            int64_t zlze_lhs_133065 = sub64(ss_133061, ss_133060);
                            bool cond_133066 = sle64(zlze_lhs_133065, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_133067;
                            int64_t defunc_0_lifted_step_res_133068;
                            int64_t defunc_0_lifted_step_res_133069;
                            int64_t defunc_0_lifted_step_res_133070;
                            
                            if (cond_133066) {
                                int64_t tmp_137899 = add64(tt_133062, count_133064);
                                
                                defunc_0_lifted_step_res_133067 = ss_133060;
                                defunc_0_lifted_step_res_133068 = tmp_137899;
                                defunc_0_lifted_step_res_133069 = tt_133063;
                                defunc_0_lifted_step_res_133070 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_133072 = sub64(tt_133063, tt_133062);
                                bool cond_133073 = sle64(zlze_lhs_133072, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_133074;
                                int64_t defunc_0_lifted_step_res_f_res_133075;
                                int64_t defunc_0_lifted_step_res_f_res_133076;
                                int64_t defunc_0_lifted_step_res_f_res_133077;
                                
                                if (cond_133073) {
                                    int64_t tmp_137900 = add64(ss_133060, count_133064);
                                    
                                    defunc_0_lifted_step_res_f_res_133074 = tmp_137900;
                                    defunc_0_lifted_step_res_f_res_133075 = tt_133062;
                                    defunc_0_lifted_step_res_f_res_133076 = tt_133063;
                                    defunc_0_lifted_step_res_f_res_133077 = (int64_t) 0;
                                } else {
                                    bool cond_133079 = count_133064 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133080;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133081;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133082;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133083;
                                    
                                    if (cond_133079) {
                                        bool x_137902 = sle64((int64_t) 0, ss_133060);
                                        bool y_137903 = slt64(ss_133060, stride_132893);
                                        bool bounds_check_137904 = x_137902 && y_137903;
                                        bool index_certs_137905;
                                        
                                        if (!bounds_check_137904) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_133060, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:41:3-27\n   #14 ftsort.fut:40:1-41:27\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137908 = sle64((int64_t) 0, tt_133062);
                                        bool y_137909 = slt64(tt_133062, j_m_i_132916);
                                        bool bounds_check_137910 = x_137908 && y_137909;
                                        bool index_certs_137911;
                                        
                                        if (!bounds_check_137910) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_133062, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:41:3-27\n   #14 ftsort.fut:40:1-41:27\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137906 = start_132966 + ss_133060;
                                        float leq_arg1_137907 = ((float *) mem_param_138485.mem)[slice_137906];
                                        int64_t slice_137912 = stride_132893 + tt_133062;
                                        int64_t slice_137913 = start_132966 + slice_137912;
                                        float leq_arg0_137914 = ((float *) mem_param_138485.mem)[slice_137913];
                                        bool zlze_res_137915 = leq_arg0_137914 <= leq_arg1_137907;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        
                                        if (zlze_res_137915) {
                                            int64_t tmp_137918 = add64((int64_t) 1, tt_133062);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = ss_133060;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tmp_137918;
                                        } else {
                                            int64_t tmp_137919 = add64((int64_t) 1, ss_133060);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = tmp_137919;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tt_133062;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = tt_133063;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = (int64_t) 0;
                                    } else {
                                        int64_t m_133102 = sdiv64(count_133064, (int64_t) 2);
                                        int64_t n_133103 = sub64(count_133064, m_133102);
                                        bool cond_133104 = n_133103 == (int64_t) 0;
                                        int64_t zgze_lhs_133105 = add64(ss_133060, m_133102);
                                        bool cond_f_res_133106 = sle64(ss_133061, zgze_lhs_133105);
                                        bool x_133107 = !cond_133104;
                                        bool y_133108 = cond_f_res_133106 && x_133107;
                                        bool cond_133109 = cond_133104 || y_133108;
                                        bool leq_y_x_133110;
                                        
                                        if (cond_133109) {
                                            leq_y_x_133110 = 1;
                                        } else {
                                            bool x_133111 = sle64((int64_t) 0, zgze_lhs_133105);
                                            bool y_133112 = slt64(zgze_lhs_133105, stride_132893);
                                            bool bounds_check_133113 = x_133111 && y_133112;
                                            bool index_certs_133114;
                                            
                                            if (!bounds_check_133113) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_133105, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:41:3-27\n   #14 ftsort.fut:40:1-41:27\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_133117 = add64(tt_133062, n_133103);
                                            int64_t leq_arg0_133118 = sub64(zm_lhs_133117, (int64_t) 1);
                                            bool x_133119 = sle64((int64_t) 0, leq_arg0_133118);
                                            bool y_133120 = slt64(leq_arg0_133118, j_m_i_132916);
                                            bool bounds_check_133121 = x_133119 && y_133120;
                                            bool index_certs_133122;
                                            
                                            if (!bounds_check_133121) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_133118, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:193:54-57\n   #13 ftsort.fut:41:3-27\n   #14 ftsort.fut:40:1-41:27\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_133115 = start_132966 + zgze_lhs_133105;
                                            float leq_arg1_133116 = ((float *) mem_param_138485.mem)[slice_133115];
                                            int64_t slice_133123 = stride_132893 + leq_arg0_133118;
                                            int64_t slice_133124 = start_132966 + slice_133123;
                                            float leq_arg0_133125 = ((float *) mem_param_138485.mem)[slice_133124];
                                            bool zlze_res_133126 = leq_arg0_133125 <= leq_arg1_133116;
                                            
                                            leq_y_x_133110 = zlze_res_133126;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                        
                                        if (leq_y_x_133110) {
                                            int64_t tmp_137920 = add64(tt_133062, n_133103);
                                            int64_t tmp_137921 = sub64(count_133064, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tmp_137920;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tt_133063;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = tmp_137921;
                                        } else {
                                            int64_t tmp_133132 = add64(tt_133062, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tt_133062;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tmp_133132;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = count_133064;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = ss_133060;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                    }
                                    defunc_0_lifted_step_res_f_res_133074 = defunc_0_lifted_step_res_f_res_f_res_133080;
                                    defunc_0_lifted_step_res_f_res_133075 = defunc_0_lifted_step_res_f_res_f_res_133081;
                                    defunc_0_lifted_step_res_f_res_133076 = defunc_0_lifted_step_res_f_res_f_res_133082;
                                    defunc_0_lifted_step_res_f_res_133077 = defunc_0_lifted_step_res_f_res_f_res_133083;
                                }
                                defunc_0_lifted_step_res_133067 = defunc_0_lifted_step_res_f_res_133074;
                                defunc_0_lifted_step_res_133068 = defunc_0_lifted_step_res_f_res_133075;
                                defunc_0_lifted_step_res_133069 = defunc_0_lifted_step_res_f_res_133076;
                                defunc_0_lifted_step_res_133070 = defunc_0_lifted_step_res_f_res_133077;
                            }
                            
                            int64_t loopres_133133;
                            int64_t loopres_133134;
                            int64_t loopres_133135;
                            int64_t loopres_133136;
                            int64_t loopres_133137;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_133133, &loopres_133134, &loopres_133135, &loopres_133136, &loopres_133137, defunc_0_lifted_step_res_133067, ss_133061, defunc_0_lifted_step_res_133068, defunc_0_lifted_step_res_133069, defunc_0_lifted_step_res_133070) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_133138 = slt64((int64_t) 0, loopres_133137);
                            bool loop_while_tmp_139315 = loop_cond_133138;
                            int64_t ss_tmp_139316 = loopres_133133;
                            int64_t ss_tmp_139317 = loopres_133134;
                            int64_t tt_tmp_139318 = loopres_133135;
                            int64_t tt_tmp_139319 = loopres_133136;
                            int64_t count_tmp_139320 = loopres_133137;
                            
                            loop_while_133059 = loop_while_tmp_139315;
                            ss_133060 = ss_tmp_139316;
                            ss_133061 = ss_tmp_139317;
                            tt_133062 = tt_tmp_139318;
                            tt_133063 = tt_tmp_139319;
                            count_133064 = count_tmp_139320;
                        }
                        defunc_0_split_count_res_133053 = loop_while_133059;
                        defunc_0_split_count_res_133054 = ss_133060;
                        defunc_0_split_count_res_133055 = ss_133061;
                        defunc_0_split_count_res_133056 = tt_133062;
                        defunc_0_split_count_res_133057 = tt_133063;
                        defunc_0_split_count_res_133058 = count_133064;
                        ((int64_t *) mem_138504)[i_138227] = defunc_0_split_count_res_133054;
                        ((int64_t *) mem_138506)[i_138227] = defunc_0_split_count_res_133056;
                    }
                    if (mem_138521_cached_sizze_139440 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139440, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138524_cached_sizze_139441 < bytes_138523) {
                        err = lexical_realloc(ctx, &mem_138524, &mem_138524_cached_sizze_139441, bytes_138523);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138234 = 0; i_138234 < num_blocks_132914; i_138234++) {
                        bool y_133144 = slt64(i_138234, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool index_certs_133146;
                        
                        if (!y_133144) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138234, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133147 = ((int64_t *) mem_138504)[i_138234];
                        int64_t defunc_0_f_res_133148 = ((int64_t *) mem_138506)[i_138234];
                        int64_t tmp_133149 = add64((int64_t) 1, i_138234);
                        bool x_133150 = sle64((int64_t) 0, tmp_133149);
                        bool y_133151 = slt64(tmp_133149, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool bounds_check_133152 = x_133150 && y_133151;
                        bool index_certs_133153;
                        
                        if (!bounds_check_133152) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_133149, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133154 = ((int64_t *) mem_138504)[tmp_133149];
                        int64_t defunc_0_f_res_133155 = ((int64_t *) mem_138506)[tmp_133149];
                        int64_t merge_sequential_arg2_133156 = add64(stride_132893, defunc_0_f_res_133148);
                        int64_t merge_sequential_arg2_133157 = add64(stride_132893, defunc_0_f_res_133155);
                        int64_t j_m_i_133158 = sub64(merge_sequential_arg2_133157, merge_sequential_arg2_133156);
                        bool empty_slice_133159 = j_m_i_133158 == (int64_t) 0;
                        int64_t m_133160 = sub64(j_m_i_133158, (int64_t) 1);
                        int64_t i_p_m_t_s_133161 = add64(merge_sequential_arg2_133156, m_133160);
                        bool zzero_leq_i_p_m_t_s_133162 = sle64((int64_t) 0, i_p_m_t_s_133161);
                        bool i_p_m_t_s_leq_w_133163 = slt64(i_p_m_t_s_133161, next_stride_132894);
                        bool zzero_lte_i_133164 = sle64((int64_t) 0, merge_sequential_arg2_133156);
                        bool i_lte_j_133165 = sle64(merge_sequential_arg2_133156, merge_sequential_arg2_133157);
                        bool y_133166 = i_p_m_t_s_leq_w_133163 && zzero_lte_i_133164;
                        bool y_133167 = zzero_leq_i_p_m_t_s_133162 && y_133166;
                        bool forwards_ok_133168 = i_lte_j_133165 && y_133167;
                        bool ok_or_empty_133169 = empty_slice_133159 || forwards_ok_133168;
                        bool index_certs_133170;
                        
                        if (!ok_or_empty_133169) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_133156, ":", (long long) merge_sequential_arg2_133157, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_133171 = sub64(defunc_0_f_res_133154, defunc_0_f_res_133147);
                        bool empty_slice_133172 = j_m_i_133171 == (int64_t) 0;
                        int64_t m_133173 = sub64(j_m_i_133171, (int64_t) 1);
                        int64_t i_p_m_t_s_133174 = add64(defunc_0_f_res_133147, m_133173);
                        bool zzero_leq_i_p_m_t_s_133175 = sle64((int64_t) 0, i_p_m_t_s_133174);
                        bool i_p_m_t_s_leq_w_133176 = slt64(i_p_m_t_s_133174, next_stride_132894);
                        bool zzero_lte_i_133177 = sle64((int64_t) 0, defunc_0_f_res_133147);
                        bool i_lte_j_133178 = sle64(defunc_0_f_res_133147, defunc_0_f_res_133154);
                        bool y_133179 = i_p_m_t_s_leq_w_133176 && zzero_lte_i_133177;
                        bool y_133180 = zzero_leq_i_p_m_t_s_133175 && y_133179;
                        bool forwards_ok_133181 = i_lte_j_133178 && y_133180;
                        bool ok_or_empty_133182 = empty_slice_133172 || forwards_ok_133181;
                        bool index_certs_133183;
                        
                        if (!ok_or_empty_133182) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_133147, ":", (long long) defunc_0_f_res_133154, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:193:54-57\n   #10 ftsort.fut:41:3-27\n   #11 ftsort.fut:40:1-41:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_133184 = slt64((int64_t) 0, j_m_i_133171);
                        float dummy_133185;
                        int64_t dummy_133186;
                        
                        if (cond_133184) {
                            bool index_certs_137922;
                            
                            if (!cond_133184) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:193:54-57\n   #12 ftsort.fut:41:3-27\n   #13 ftsort.fut:40:1-41:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137923 = start_132966 + defunc_0_f_res_133147;
                            float head_res_137924 = ((float *) mem_param_138485.mem)[slice_137923];
                            int64_t head_res_137925 = ((int64_t *) mem_param_138488.mem)[slice_137923];
                            
                            dummy_133185 = head_res_137924;
                            dummy_133186 = head_res_137925;
                        } else {
                            bool y_133191 = slt64((int64_t) 0, j_m_i_133158);
                            bool index_certs_133192;
                            
                            if (!y_133191) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:193:54-57\n   #12 ftsort.fut:41:3-27\n   #13 ftsort.fut:40:1-41:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_133193 = start_132966 + merge_sequential_arg2_133156;
                            float head_res_133194 = ((float *) mem_param_138485.mem)[slice_133193];
                            int64_t head_res_133195 = ((int64_t *) mem_param_138488.mem)[slice_133193];
                            
                            dummy_133185 = head_res_133194;
                            dummy_133186 = head_res_133195;
                        }
                        for (int64_t nest_i_139323 = 0; nest_i_139323 < merge_block_sizze_132781; nest_i_139323++) {
                            ((float *) mem_138521)[i_138234 * merge_block_sizze_132781 + nest_i_139323] = dummy_133185;
                        }
                        for (int64_t nest_i_139324 = 0; nest_i_139324 < merge_block_sizze_132781; nest_i_139324++) {
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + nest_i_139324] = dummy_133186;
                        }
                        
                        int64_t data_133198;
                        int64_t i_133202 = (int64_t) 0;
                        
                        for (int64_t k_133201 = 0; k_133201 < merge_block_sizze_132781; k_133201++) {
                            int64_t j_133205 = sub64(k_133201, i_133202);
                            bool cond_133206 = j_133205 == j_m_i_133158;
                            bool cond_133207;
                            
                            if (cond_133206) {
                                cond_133207 = 1;
                            } else {
                                bool cond_133208 = slt64(i_133202, j_m_i_133171);
                                bool cond_f_res_133209;
                                
                                if (cond_133208) {
                                    bool x_137926 = sle64((int64_t) 0, j_133205);
                                    bool y_137927 = slt64(j_133205, j_m_i_133158);
                                    bool bounds_check_137928 = x_137926 && y_137927;
                                    bool index_certs_137929;
                                    
                                    if (!bounds_check_137928) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:41:3-27\n   #12 ftsort.fut:40:1-41:27\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_137933 = sle64((int64_t) 0, i_133202);
                                    bool bounds_check_137934 = cond_133208 && x_137933;
                                    bool index_certs_137935;
                                    
                                    if (!bounds_check_137934) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:41:3-27\n   #12 ftsort.fut:40:1-41:27\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137930 = merge_sequential_arg2_133156 + j_133205;
                                    int64_t slice_137931 = start_132966 + slice_137930;
                                    float leq_arg1_137932 = ((float *) mem_param_138485.mem)[slice_137931];
                                    int64_t slice_137936 = defunc_0_f_res_133147 + i_133202;
                                    int64_t slice_137937 = start_132966 + slice_137936;
                                    float leq_arg0_137938 = ((float *) mem_param_138485.mem)[slice_137937];
                                    bool zlze_res_137939 = leq_arg0_137938 <= leq_arg1_137932;
                                    
                                    cond_f_res_133209 = zlze_res_137939;
                                } else {
                                    cond_f_res_133209 = 0;
                                }
                                cond_133207 = cond_f_res_133209;
                            }
                            
                            int64_t loopres_133224;
                            float loopres_133225;
                            int64_t loopres_133226;
                            
                            if (cond_133207) {
                                bool x_137941 = sle64((int64_t) 0, i_133202);
                                bool y_137942 = slt64(i_133202, j_m_i_133171);
                                bool bounds_check_137943 = x_137941 && y_137942;
                                bool index_certs_137944;
                                
                                if (!bounds_check_137943) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:41:3-27\n   #12 ftsort.fut:40:1-41:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_137940 = add64((int64_t) 1, i_133202);
                                int64_t slice_137945 = defunc_0_f_res_133147 + i_133202;
                                int64_t slice_137946 = start_132966 + slice_137945;
                                float tmp_137947 = ((float *) mem_param_138485.mem)[slice_137946];
                                int64_t tmp_137948 = ((int64_t *) mem_param_138488.mem)[slice_137946];
                                
                                loopres_133224 = tmp_137940;
                                loopres_133225 = tmp_137947;
                                loopres_133226 = tmp_137948;
                            } else {
                                bool x_133236 = sle64((int64_t) 0, j_133205);
                                bool y_133237 = slt64(j_133205, j_m_i_133158);
                                bool bounds_check_133238 = x_133236 && y_133237;
                                bool index_certs_133239;
                                
                                if (!bounds_check_133238) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:193:54-57\n   #11 ftsort.fut:41:3-27\n   #12 ftsort.fut:40:1-41:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_133240 = merge_sequential_arg2_133156 + j_133205;
                                int64_t slice_133241 = start_132966 + slice_133240;
                                float tmp_133242 = ((float *) mem_param_138485.mem)[slice_133241];
                                int64_t tmp_133243 = ((int64_t *) mem_param_138488.mem)[slice_133241];
                                
                                loopres_133224 = i_133202;
                                loopres_133225 = tmp_133242;
                                loopres_133226 = tmp_133243;
                            }
                            ((float *) mem_138521)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133225;
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133226;
                            
                            int64_t i_tmp_139325 = loopres_133224;
                            
                            i_133202 = i_tmp_139325;
                        }
                        data_133198 = i_133202;
                    }
                    if (memblock_alloc(ctx, &mem_138559, bytes_138520, "mem_138559")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_138559.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint32_t *) mem_138521, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_alloc(ctx, &mem_138563, bytes_138523, "mem_138563")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138563.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138524, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138559, "mem_138559") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138563, "mem_138563") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_138491, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138494, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138583.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
                    return 1;
            }
            
            int64_t flat_dim_133250 = next_stride_132894 * num_merges_132898;
            
            if (memblock_alloc(ctx, &mem_138597, bytes_138490, "mem_138597")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_138597.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint32_t *) mem_138491, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            if (memblock_alloc(ctx, &mem_138601, bytes_138493, "mem_138601")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138601.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138494, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            
            bool loop_cond_133253 = slt64(next_stride_132894, flat_dim_132778);
            
            if (memblock_set(ctx, &mem_param_tmp_139299, &mem_138597, "mem_138597") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139300, &mem_138601, "mem_138601") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139301 = flat_dim_133250;
            bool loop_while_tmp_139302 = loop_cond_133253;
            int64_t stride_tmp_139305 = next_stride_132894;
            
            if (memblock_set(ctx, &mem_param_138485, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138488, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
                return 1;
            loop_dz2084Uz2082U_132889 = loop_dz2084Uz2082U_tmp_139301;
            loop_while_132890 = loop_while_tmp_139302;
            stride_132893 = stride_tmp_139305;
        }
        if (memblock_set(ctx, &ext_mem_138608, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138607, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        data_132884 = loop_dz2084Uz2082U_132889;
        data_132885 = loop_while_132890;
        data_132888 = stride_132893;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        
        bool empty_slice_133254 = n_88222 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_133255 = sle64((int64_t) 0, zs_lhs_132762);
        bool i_p_m_t_s_leq_w_133256 = slt64(zs_lhs_132762, data_132884);
        bool y_133257 = zzero_leq_i_p_m_t_s_133255 && i_p_m_t_s_leq_w_133256;
        bool ok_or_empty_133258 = empty_slice_133254 || y_133257;
        bool index_certs_133259;
        
        if (!ok_or_empty_133258) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_88222, "] out of bounds for array of shape [", (long long) data_132884, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftbasics.fut:193:54-57\n   #5  ftsort.fut:41:3-27\n   #6  ftsort.fut:40:1-41:27\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138611, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138613, bytes_138405, "mem_138613")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138615, bytes_138614, "mem_138615")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138248 = 0; i_138248 < n_88222; i_138248++) {
        int64_t eta_p_133263 = ((int64_t *) ext_mem_138611.mem)[i_138248];
        bool x_133264 = sle64((int64_t) 0, eta_p_133263);
        bool y_133265 = slt64(eta_p_133263, n_88222);
        bool bounds_check_133266 = x_133264 && y_133265;
        bool index_certs_133267;
        
        if (!bounds_check_133266) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133263, "] out of bounds for array of shape [", (long long) n_88222, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftbasics.fut:193:54-57\n   #4  ftsort.fut:41:3-27\n   #5  ftsort.fut:40:1-41:27\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133268 = ((int64_t *) ext_mem_138404.mem)[eta_p_133263];
        float lifted_lambda_res_133269 = ((float *) xs_mem_138403.mem)[eta_p_133263];
        
        ((int64_t *) mem_138613.mem)[i_138248] = lifted_lambda_res_133268;
        ((float *) mem_138615.mem)[i_138248] = lifted_lambda_res_133269;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138613, "mem_138613") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138615, "mem_138615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139430, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139431, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138409);
        free(mem_138412);
        free(mem_138422);
        free(mem_138424);
        free(mem_138491);
        free(mem_138494);
        free(mem_138504);
        free(mem_138506);
        free(mem_138521);
        free(mem_138524);
        if (memblock_unref(ctx, &mem_138615, "mem_138615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138613, "mem_138613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138601, "mem_138601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138597, "mem_138597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138563, "mem_138563") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138559, "mem_138559") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138568, "mem_138568") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138566, "mem_138566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138608, "ext_mem_138608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_139442, struct memblock *mem_out_p_139443, struct memblock xs_mem_138403, int64_t n_83535, int64_t incr_83536)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138409_cached_sizze_139444 = 0;
    unsigned char *mem_138409 = NULL;
    int64_t mem_138412_cached_sizze_139445 = 0;
    unsigned char *mem_138412 = NULL;
    int64_t mem_138422_cached_sizze_139446 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139447 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138491_cached_sizze_139448 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138494_cached_sizze_139449 = 0;
    unsigned char *mem_138494 = NULL;
    int64_t mem_138504_cached_sizze_139450 = 0;
    unsigned char *mem_138504 = NULL;
    int64_t mem_138506_cached_sizze_139451 = 0;
    unsigned char *mem_138506 = NULL;
    int64_t mem_138521_cached_sizze_139452 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138524_cached_sizze_139453 = 0;
    unsigned char *mem_138524 = NULL;
    struct memblock mem_138615;
    
    mem_138615.references = NULL;
    
    struct memblock mem_138613;
    
    mem_138613.references = NULL;
    
    struct memblock mem_param_tmp_139300;
    
    mem_param_tmp_139300.references = NULL;
    
    struct memblock mem_param_tmp_139299;
    
    mem_param_tmp_139299.references = NULL;
    
    struct memblock mem_138601;
    
    mem_138601.references = NULL;
    
    struct memblock mem_138597;
    
    mem_138597.references = NULL;
    
    struct memblock mem_138563;
    
    mem_138563.references = NULL;
    
    struct memblock mem_138559;
    
    mem_138559.references = NULL;
    
    struct memblock mem_138568;
    
    mem_138568.references = NULL;
    
    struct memblock mem_138566;
    
    mem_138566.references = NULL;
    
    struct memblock ext_mem_138583;
    
    ext_mem_138583.references = NULL;
    
    struct memblock ext_mem_138586;
    
    ext_mem_138586.references = NULL;
    
    struct memblock mem_param_138488;
    
    mem_param_138488.references = NULL;
    
    struct memblock mem_param_138485;
    
    mem_param_138485.references = NULL;
    
    struct memblock ext_mem_138607;
    
    ext_mem_138607.references = NULL;
    
    struct memblock ext_mem_138608;
    
    ext_mem_138608.references = NULL;
    
    struct memblock mem_138481;
    
    mem_138481.references = NULL;
    
    struct memblock mem_138477;
    
    mem_138477.references = NULL;
    
    struct memblock ext_mem_138611;
    
    ext_mem_138611.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_83535;
    bool cond_132761 = sle64(n_83535, (int64_t) 1);
    int64_t zs_lhs_132762 = sub64(n_83535, (int64_t) 1);
    int64_t zp_rhs_132763 = sdiv_safe64(zs_lhs_132762, (int64_t) 20);
    int64_t min_num_blocks_132764 = add64((int64_t) 1, zp_rhs_132763);
    bool loop_cond_132765 = slt64((int64_t) 1, min_num_blocks_132764);
    bool smallest_pow_2_geq_than_res_132766;
    int64_t smallest_pow_2_geq_than_res_132767;
    bool loop_while_132768;
    int64_t x_132769;
    
    loop_while_132768 = loop_cond_132765;
    x_132769 = (int64_t) 1;
    while (loop_while_132768) {
        int64_t loopres_132770 = mul64((int64_t) 2, x_132769);
        bool loop_cond_132771 = slt64(loopres_132770, min_num_blocks_132764);
        bool loop_while_tmp_139283 = loop_cond_132771;
        int64_t x_tmp_139284 = loopres_132770;
        
        loop_while_132768 = loop_while_tmp_139283;
        x_132769 = x_tmp_139284;
    }
    smallest_pow_2_geq_than_res_132766 = loop_while_132768;
    smallest_pow_2_geq_than_res_132767 = x_132769;
    
    bool zzero_132772 = smallest_pow_2_geq_than_res_132767 == (int64_t) 0;
    bool nonzzero_132773 = !zzero_132772;
    bool protect_assert_disj_132774 = cond_132761 || nonzzero_132773;
    bool nonzzero_cert_132775;
    
    if (!protect_assert_disj_132774) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:35:3-25\n   #5  ftsort.fut:34:1-35:25\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_132776 = sdiv_safe64(zs_lhs_132762, smallest_pow_2_geq_than_res_132767);
    int64_t block_sizze_132777 = add64((int64_t) 1, zp_rhs_132776);
    bool y_132782 = slt64((int64_t) 0, n_83535);
    bool protect_assert_disj_139017 = cond_132761 || y_132782;
    bool index_certs_132783;
    
    if (!protect_assert_disj_139017) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_83535, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:35:3-25\n   #5  ftsort.fut:34:1-35:25\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132796 = slt64(smallest_pow_2_geq_than_res_132767, (int64_t) 0);
    bool valid_132797 = !bounds_invalid_upwards_132796;
    bool protect_assert_disj_139025 = cond_132761 || valid_132797;
    bool range_valid_c_132798;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_132767, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:140:54-57\n   #6  ftsort.fut:35:3-25\n   #7  ftsort.fut:34:1-35:25\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132800 = slt64(block_sizze_132777, (int64_t) 0);
    bool valid_132801 = !bounds_invalid_upwards_132800;
    bool protect_assert_disj_139027 = cond_132761 || valid_132801;
    bool range_valid_c_132802;
    
    if (!protect_assert_disj_139027) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_132777, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_132804 = sle64(block_sizze_132777, (int64_t) 1);
    int64_t tmp_132805 = sub64(block_sizze_132777, (int64_t) 2);
    bool bounds_invalid_upwards_132806 = slt64(tmp_132805, (int64_t) 0);
    bool valid_132808 = !bounds_invalid_upwards_132806;
    bool protect_assert_disj_132809 = cond_132804 || valid_132808;
    bool protect_assert_disj_139029 = cond_132761 || protect_assert_disj_132809;
    bool range_valid_c_132810;
    
    if (!protect_assert_disj_139029) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_132805, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138614 = (int64_t) 4 * n_83535;
    
    if (futrts_indicesWithIncrement_9128(ctx, &ext_mem_138404, xs_mem_138403, n_83535, incr_83536) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139285 = 0; i_139285 < n_83535; i_139285++) {
        int64_t x_139286 = (int64_t) 0 + i_139285 * (int64_t) 1;
        
        ((int64_t *) mem_138406.mem)[i_139285] = x_139286;
    }
    
    int64_t flat_dim_132778 = smallest_pow_2_geq_than_res_132767 * block_sizze_132777;
    bool x_139012 = !cond_132761;
    int64_t greatest_divisor_leq_than_arg1_132780 = mul64((int64_t) 2, block_sizze_132777);
    int64_t merge_block_sizze_132781;
    
    if (x_139012) {
        int64_t x_139014;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139014, (int64_t) 8, greatest_divisor_leq_than_arg1_132780) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_132781 = x_139014;
    } else {
        merge_block_sizze_132781 = (int64_t) 0;
    }
    
    int32_t reduce_arg1_132784;
    
    if (x_139012) {
        int32_t x_139018 = ((int32_t *) xs_mem_138403.mem)[(int64_t) 0];
        
        reduce_arg1_132784 = x_139018;
    } else {
        reduce_arg1_132784 = 0;
    }
    
    int32_t defunc_0_reduce_res_137955;
    int64_t defunc_0_reduce_res_137956;
    
    if (x_139012) {
        int32_t x_139020;
        int64_t x_139021;
        int32_t redout_138206;
        int64_t redout_138207;
        
        redout_138206 = reduce_arg1_132784;
        redout_138207 = (int64_t) 0;
        for (int64_t i_138208 = 0; i_138208 < n_83535; i_138208++) {
            int32_t x_132787 = ((int32_t *) xs_mem_138403.mem)[i_138208];
            bool zlze_res_132793 = sle32(redout_138206, x_132787);
            int32_t defunc_0_op_res_132794;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132794 = x_132787;
            } else {
                defunc_0_op_res_132794 = redout_138206;
            }
            
            int64_t defunc_0_op_res_132795;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132795 = i_138208;
            } else {
                defunc_0_op_res_132795 = redout_138207;
            }
            
            int32_t redout_tmp_139287 = defunc_0_op_res_132794;
            int64_t redout_tmp_139288 = defunc_0_op_res_132795;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
        }
        x_139020 = redout_138206;
        x_139021 = redout_138207;
        defunc_0_reduce_res_137955 = x_139020;
        defunc_0_reduce_res_137956 = x_139021;
    } else {
        defunc_0_reduce_res_137955 = 0;
        defunc_0_reduce_res_137956 = (int64_t) 0;
    }
    
    int64_t distance_132807 = add64((int64_t) 1, tmp_132805);
    int64_t binop_x_138407 = (int64_t) 4 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138408 = block_sizze_132777 * binop_x_138407;
    int64_t binop_x_138410 = (int64_t) 8 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138411 = block_sizze_132777 * binop_x_138410;
    int64_t bytes_138421 = (int64_t) 4 * block_sizze_132777;
    int64_t bytes_138423 = (int64_t) 8 * block_sizze_132777;
    bool loop_cond_132881 = slt64(block_sizze_132777, flat_dim_132778);
    bool zzero_132882 = merge_block_sizze_132781 == (int64_t) 0;
    bool nonzzero_132883 = !zzero_132882;
    
    if (cond_132761) {
        if (memblock_set(ctx, &ext_mem_138611, &mem_138406, "mem_138406") != 0)
            return 1;
    } else {
        if (mem_138409_cached_sizze_139444 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138409, &mem_138409_cached_sizze_139444, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138412_cached_sizze_139445 < bytes_138411) {
            err = lexical_realloc(ctx, &mem_138412, &mem_138412_cached_sizze_139445, bytes_138411);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138422_cached_sizze_139446 < bytes_138421) {
            err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139446, bytes_138421);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138424_cached_sizze_139447 < bytes_138423) {
            err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139447, bytes_138423);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138220 = 0; i_138220 < smallest_pow_2_geq_than_res_132767; i_138220++) {
            int64_t zp_lhs_132814 = mul64(block_sizze_132777, i_138220);
            
            for (int64_t i_138213 = 0; i_138213 < block_sizze_132777; i_138213++) {
                int64_t k_132818 = add64(zp_lhs_132814, i_138213);
                bool cond_132819 = slt64(k_132818, n_83535);
                int32_t lifted_lambda_res_132820;
                int64_t lifted_lambda_res_132821;
                
                if (cond_132819) {
                    bool x_137808 = sle64((int64_t) 0, k_132818);
                    bool bounds_check_137809 = cond_132819 && x_137808;
                    bool index_certs_137810;
                    
                    if (!bounds_check_137809) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_132818, "] out of bounds for array of shape [", (long long) n_83535, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t lifted_lambda_res_t_res_137811 = ((int32_t *) xs_mem_138403.mem)[k_132818];
                    
                    lifted_lambda_res_132820 = lifted_lambda_res_t_res_137811;
                    lifted_lambda_res_132821 = k_132818;
                } else {
                    lifted_lambda_res_132820 = defunc_0_reduce_res_137955;
                    lifted_lambda_res_132821 = defunc_0_reduce_res_137956;
                }
                ((int32_t *) mem_138422)[i_138213] = lifted_lambda_res_132820;
                ((int64_t *) mem_138424)[i_138213] = lifted_lambda_res_132821;
            }
            if (!cond_132804) {
                for (int64_t i_132830 = 0; i_132830 < distance_132807; i_132830++) {
                    int64_t gt_arg1_132833 = add64((int64_t) 1, i_132830);
                    bool x_132834 = sle64((int64_t) 0, gt_arg1_132833);
                    bool y_132835 = slt64(gt_arg1_132833, block_sizze_132777);
                    bool bounds_check_132836 = x_132834 && y_132835;
                    bool index_certs_132837;
                    
                    if (!bounds_check_132836) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_132833, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_132839 = slt64(i_132830, block_sizze_132777);
                    bool index_certs_132840;
                    
                    if (!y_132839) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_132830, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t gt_arg1_132838 = ((int32_t *) mem_138422)[gt_arg1_132833];
                    int32_t gt_arg0_132841 = ((int32_t *) mem_138422)[i_132830];
                    bool zlze_res_132842 = sle32(gt_arg0_132841, gt_arg1_132838);
                    bool defunc_0_lifted_gt_res_132843 = !zlze_res_132842;
                    bool s_132844;
                    int64_t s_132847;
                    bool loop_while_132848;
                    int64_t j_132851;
                    
                    loop_while_132848 = defunc_0_lifted_gt_res_132843;
                    j_132851 = i_132830;
                    while (loop_while_132848) {
                        bool x_132852 = sle64((int64_t) 0, j_132851);
                        bool y_132853 = slt64(j_132851, block_sizze_132777);
                        bool bounds_check_132854 = x_132852 && y_132853;
                        bool index_certs_132855;
                        
                        if (!bounds_check_132854) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_132851, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_132858 = add64((int64_t) 1, j_132851);
                        bool x_132859 = sle64((int64_t) 0, copy_arg0_132858);
                        bool y_132860 = slt64(copy_arg0_132858, block_sizze_132777);
                        bool bounds_check_132861 = x_132859 && y_132860;
                        bool index_certs_132862;
                        
                        if (!bounds_check_132861) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_132858, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t copy_arg0_132856 = ((int32_t *) mem_138422)[j_132851];
                        int64_t copy_arg0_132857 = ((int64_t *) mem_138424)[j_132851];
                        int32_t copy_arg0_132863 = ((int32_t *) mem_138422)[copy_arg0_132858];
                        int64_t copy_arg0_132864 = ((int64_t *) mem_138424)[copy_arg0_132858];
                        
                        ((int32_t *) mem_138422)[j_132851] = copy_arg0_132863;
                        ((int64_t *) mem_138424)[j_132851] = copy_arg0_132864;
                        ((int32_t *) mem_138422)[copy_arg0_132858] = copy_arg0_132856;
                        ((int64_t *) mem_138424)[copy_arg0_132858] = copy_arg0_132857;
                        
                        int64_t tmp_132869 = sub64(j_132851, (int64_t) 1);
                        bool cond_132870 = sle64((int64_t) 0, tmp_132869);
                        bool loop_cond_132871;
                        
                        if (cond_132870) {
                            bool y_137813 = slt64(tmp_132869, block_sizze_132777);
                            bool bounds_check_137814 = cond_132870 && y_137813;
                            bool index_certs_137815;
                            
                            if (!bounds_check_137814) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132869, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t gt_arg1_137812 = ((int32_t *) mem_138422)[j_132851];
                            int32_t gt_arg0_137816 = ((int32_t *) mem_138422)[tmp_132869];
                            bool zlze_res_137817 = sle32(gt_arg0_137816, gt_arg1_137812);
                            bool defunc_0_lifted_gt_res_137818 = !zlze_res_137817;
                            
                            loop_cond_132871 = defunc_0_lifted_gt_res_137818;
                        } else {
                            loop_cond_132871 = 0;
                        }
                        
                        bool loop_while_tmp_139295 = loop_cond_132871;
                        int64_t j_tmp_139298 = tmp_132869;
                        
                        loop_while_132848 = loop_while_tmp_139295;
                        j_132851 = j_tmp_139298;
                    }
                    s_132844 = loop_while_132848;
                    s_132847 = j_132851;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_138409, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138422, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138412, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138424, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
        }
        if (memblock_alloc(ctx, &mem_138477, bytes_138408, "mem_138477")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_138477.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint32_t *) mem_138409, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        if (memblock_alloc(ctx, &mem_138481, bytes_138411, "mem_138481")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138481.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138412, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        
        int64_t data_132884;
        bool data_132885;
        int64_t data_132888;
        int64_t loop_dz2084Uz2082U_132889;
        bool loop_while_132890;
        int64_t stride_132893;
        
        if (memblock_set(ctx, &mem_param_138485, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138488, &mem_138481, "mem_138481") != 0)
            return 1;
        loop_dz2084Uz2082U_132889 = flat_dim_132778;
        loop_while_132890 = loop_cond_132881;
        stride_132893 = block_sizze_132777;
        while (loop_while_132890) {
            int64_t next_stride_132894 = mul64((int64_t) 2, stride_132893);
            bool zzero_132895 = next_stride_132894 == (int64_t) 0;
            bool nonzzero_132896 = !zzero_132895;
            bool nonzzero_cert_132897;
            
            if (!nonzzero_132896) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:35:3-25\n   #5  ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_132898 = sdiv64(flat_dim_132778, next_stride_132894);
            bool bounds_invalid_upwards_132899 = slt64(num_merges_132898, (int64_t) 0);
            bool valid_132900 = !bounds_invalid_upwards_132899;
            bool range_valid_c_132901;
            
            if (!valid_132900) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_132898, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:140:54-57\n   #6  ftsort.fut:35:3-25\n   #7  ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_132903 = sub64(next_stride_132894, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_132904 = sle64((int64_t) 0, m_132903);
            bool cond_132906 = slt64(next_stride_132894, (int64_t) 10);
            bool protect_assert_disj_132907 = nonzzero_132883 || cond_132906;
            bool nonzzero_cert_132908;
            
            if (!protect_assert_disj_132907) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_132909 = smod_safe64(next_stride_132894, merge_block_sizze_132781);
            bool num_blocks_132910 = zeze_lhs_132909 == (int64_t) 0;
            bool protect_assert_disj_132911 = cond_132906 || num_blocks_132910;
            bool assert_c_132912;
            
            if (!protect_assert_disj_132911) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_132914 = sdiv_safe64(next_stride_132894, merge_block_sizze_132781);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915 = add64((int64_t) 1, num_blocks_132914);
            int64_t j_m_i_132916 = sub64(next_stride_132894, stride_132893);
            int64_t flat_dim_132917 = merge_block_sizze_132781 * num_blocks_132914;
            bool bounds_invalid_upwards_132918 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, (int64_t) 0);
            bool zzero_lte_i_132919 = sle64((int64_t) 0, stride_132893);
            bool i_lte_j_132920 = sle64(stride_132893, next_stride_132894);
            bool empty_slice_132921 = stride_132893 == (int64_t) 0;
            int64_t m_132922 = sub64(stride_132893, (int64_t) 1);
            bool bounds_invalid_upwards_132923 = slt64(num_blocks_132914, (int64_t) 0);
            bool empty_slice_132924 = j_m_i_132916 == (int64_t) 0;
            int64_t m_132925 = sub64(j_m_i_132916, (int64_t) 1);
            bool cond_132926 = slt64((int64_t) 0, stride_132893);
            bool valid_132927 = !bounds_invalid_upwards_132918;
            bool zzero_leq_i_p_m_t_s_132928 = sle64((int64_t) 0, m_132922);
            bool i_p_m_t_s_leq_w_132929 = slt64(m_132922, next_stride_132894);
            bool valid_132930 = !bounds_invalid_upwards_132923;
            bool i_p_m_t_s_leq_w_132931 = slt64(m_132903, flat_dim_132917);
            int64_t i_p_m_t_s_132932 = add64(stride_132893, m_132925);
            bool y_132933 = slt64((int64_t) 0, j_m_i_132916);
            bool protect_assert_disj_132934 = cond_132906 || valid_132927;
            bool range_valid_c_132935;
            
            if (!protect_assert_disj_132934) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132936 = zzero_leq_i_p_m_t_s_132928 && i_p_m_t_s_leq_w_132929;
            bool protect_assert_disj_132937 = cond_132906 || valid_132930;
            bool range_valid_c_132938;
            
            if (!protect_assert_disj_132937) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_132914, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132939 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132931;
            bool zzero_leq_i_p_m_t_s_132940 = sle64((int64_t) 0, i_p_m_t_s_132932);
            bool i_p_m_t_s_leq_w_132941 = slt64(i_p_m_t_s_132932, next_stride_132894);
            bool forwards_ok_132942 = zzero_lte_i_132919 && y_132936;
            bool ok_or_empty_132943 = zzero_132895 || y_132939;
            bool y_132944 = zzero_lte_i_132919 && i_p_m_t_s_leq_w_132941;
            bool protect_assert_disj_132945 = cond_132926 || y_132933;
            bool ok_or_empty_132946 = empty_slice_132921 || forwards_ok_132942;
            bool protect_assert_disj_132947 = cond_132906 || ok_or_empty_132943;
            bool index_certs_132948;
            
            if (!protect_assert_disj_132947) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) flat_dim_132917, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132949 = zzero_leq_i_p_m_t_s_132940 && y_132944;
            bool loop_not_taken_132950 = !cond_132906;
            bool protect_assert_disj_132951 = protect_assert_disj_132945 || loop_not_taken_132950;
            bool index_certs_132952;
            
            if (!protect_assert_disj_132951) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132953 = cond_132906 || ok_or_empty_132946;
            bool index_certs_132954;
            
            if (!protect_assert_disj_132953) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:35:3-25\n   #12 ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_132955 = i_lte_j_132920 && y_132949;
            bool protect_assert_disj_132956 = ok_or_empty_132946 || loop_not_taken_132950;
            bool index_certs_132957;
            
            if (!protect_assert_disj_132956) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_132958 = empty_slice_132924 || forwards_ok_132955;
            bool protect_assert_disj_132959 = loop_not_taken_132950 || ok_or_empty_132958;
            bool index_certs_132960;
            
            if (!protect_assert_disj_132959) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132961 = cond_132906 || ok_or_empty_132958;
            bool index_certs_132962;
            
            if (!protect_assert_disj_132961) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:35:3-25\n   #12 ftsort.fut:34:1-35:25\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138489 = (int64_t) 4 * num_merges_132898;
            int64_t bytes_138490 = next_stride_132894 * binop_x_138489;
            int64_t binop_x_138492 = (int64_t) 8 * num_merges_132898;
            int64_t bytes_138493 = next_stride_132894 * binop_x_138492;
            bool i_lte_j_132905 = sle64((int64_t) 0, next_stride_132894);
            
            if (mem_138491_cached_sizze_139448 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139448, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138494_cached_sizze_139449 < bytes_138493) {
                err = lexical_realloc(ctx, &mem_138494, &mem_138494_cached_sizze_139449, bytes_138493);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138503 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915;
            int64_t binop_x_138519 = (int64_t) 4 * num_blocks_132914;
            int64_t bytes_138520 = merge_block_sizze_132781 * binop_x_138519;
            int64_t binop_x_138522 = (int64_t) 8 * num_blocks_132914;
            int64_t bytes_138523 = merge_block_sizze_132781 * binop_x_138522;
            int64_t bytes_138565 = (int64_t) 8 * stride_132893;
            int64_t bytes_138567 = (int64_t) 16 * stride_132893;
            
            for (int64_t i_138241 = 0; i_138241 < num_merges_132898; i_138241++) {
                int64_t start_132966 = mul64(next_stride_132894, i_138241);
                int64_t j_m_i_132967 = sub64(loop_dz2084Uz2082U_132889, start_132966);
                bool empty_slice_132968 = j_m_i_132967 == (int64_t) 0;
                int64_t m_132969 = sub64(j_m_i_132967, (int64_t) 1);
                int64_t i_p_m_t_s_132970 = add64(start_132966, m_132969);
                bool zzero_leq_i_p_m_t_s_132971 = sle64((int64_t) 0, i_p_m_t_s_132970);
                bool i_p_m_t_s_leq_w_132972 = slt64(i_p_m_t_s_132970, loop_dz2084Uz2082U_132889);
                bool zzero_lte_i_132973 = sle64((int64_t) 0, start_132966);
                bool i_lte_j_132974 = sle64(start_132966, loop_dz2084Uz2082U_132889);
                bool y_132975 = i_p_m_t_s_leq_w_132972 && zzero_lte_i_132973;
                bool y_132976 = zzero_leq_i_p_m_t_s_132971 && y_132975;
                bool forwards_ok_132977 = i_lte_j_132974 && y_132976;
                bool ok_or_empty_132978 = empty_slice_132968 || forwards_ok_132977;
                bool index_certs_132979;
                
                if (!ok_or_empty_132978) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_132966, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_132889, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_132980 = slt64(m_132903, j_m_i_132967);
                bool y_132981 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132980;
                bool forwards_ok_132982 = i_lte_j_132905 && y_132981;
                bool ok_or_empty_132983 = zzero_132895 || forwards_ok_132982;
                bool index_certs_132984;
                
                if (!ok_or_empty_132983) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) j_m_i_132967, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:35:3-25\n   #9  ftsort.fut:34:1-35:25\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_132906) {
                    int32_t dummy_137844;
                    int64_t dummy_137845;
                    
                    if (cond_132926) {
                        int32_t head_res_137846 = ((int32_t *) mem_param_138485.mem)[start_132966];
                        int64_t head_res_137847 = ((int64_t *) mem_param_138488.mem)[start_132966];
                        
                        dummy_137844 = head_res_137846;
                        dummy_137845 = head_res_137847;
                    } else {
                        int64_t slice_137848 = stride_132893 + start_132966;
                        int32_t head_res_137849 = ((int32_t *) mem_param_138485.mem)[slice_137848];
                        int64_t head_res_137850 = ((int64_t *) mem_param_138488.mem)[slice_137848];
                        
                        dummy_137844 = head_res_137849;
                        dummy_137845 = head_res_137850;
                    }
                    if (memblock_alloc(ctx, &mem_138566, bytes_138565, "mem_138566")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139308 = 0; nest_i_139308 < next_stride_132894; nest_i_139308++) {
                        ((int32_t *) mem_138566.mem)[nest_i_139308] = dummy_137844;
                    }
                    if (memblock_alloc(ctx, &mem_138568, bytes_138567, "mem_138568")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139309 = 0; nest_i_139309 < next_stride_132894; nest_i_139309++) {
                        ((int64_t *) mem_138568.mem)[nest_i_139309] = dummy_137845;
                    }
                    
                    int64_t data_137853;
                    int64_t i_137857 = (int64_t) 0;
                    
                    for (int64_t k_137856 = 0; k_137856 < next_stride_132894; k_137856++) {
                        int64_t j_137860 = sub64(k_137856, i_137857);
                        bool cond_137861 = j_137860 == j_m_i_132916;
                        bool cond_137862;
                        
                        if (cond_137861) {
                            cond_137862 = 1;
                        } else {
                            bool cond_137863 = slt64(i_137857, stride_132893);
                            bool cond_f_res_137864;
                            
                            if (cond_137863) {
                                bool x_137865 = sle64((int64_t) 0, j_137860);
                                bool y_137866 = slt64(j_137860, j_m_i_132916);
                                bool bounds_check_137867 = x_137865 && y_137866;
                                bool index_certs_137868;
                                
                                if (!bounds_check_137867) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_137872 = sle64((int64_t) 0, i_137857);
                                bool bounds_check_137873 = cond_137863 && x_137872;
                                bool index_certs_137874;
                                
                                if (!bounds_check_137873) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137869 = stride_132893 + j_137860;
                                int64_t slice_137870 = start_132966 + slice_137869;
                                int32_t leq_arg1_137871 = ((int32_t *) mem_param_138485.mem)[slice_137870];
                                int64_t slice_137875 = start_132966 + i_137857;
                                int32_t leq_arg0_137876 = ((int32_t *) mem_param_138485.mem)[slice_137875];
                                bool zlze_res_137877 = sle32(leq_arg0_137876, leq_arg1_137871);
                                
                                cond_f_res_137864 = zlze_res_137877;
                            } else {
                                cond_f_res_137864 = 0;
                            }
                            cond_137862 = cond_f_res_137864;
                        }
                        
                        int64_t loopres_137878;
                        int32_t loopres_137879;
                        int64_t loopres_137880;
                        
                        if (cond_137862) {
                            bool x_137882 = sle64((int64_t) 0, i_137857);
                            bool y_137883 = slt64(i_137857, stride_132893);
                            bool bounds_check_137884 = x_137882 && y_137883;
                            bool index_certs_137885;
                            
                            if (!bounds_check_137884) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_137881 = add64((int64_t) 1, i_137857);
                            int64_t slice_137886 = start_132966 + i_137857;
                            int32_t tmp_137887 = ((int32_t *) mem_param_138485.mem)[slice_137886];
                            int64_t tmp_137888 = ((int64_t *) mem_param_138488.mem)[slice_137886];
                            
                            loopres_137878 = tmp_137881;
                            loopres_137879 = tmp_137887;
                            loopres_137880 = tmp_137888;
                        } else {
                            bool x_137889 = sle64((int64_t) 0, j_137860);
                            bool y_137890 = slt64(j_137860, j_m_i_132916);
                            bool bounds_check_137891 = x_137889 && y_137890;
                            bool index_certs_137892;
                            
                            if (!bounds_check_137891) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:35:3-25\n   #10 ftsort.fut:34:1-35:25\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137893 = stride_132893 + j_137860;
                            int64_t slice_137894 = start_132966 + slice_137893;
                            int32_t tmp_137895 = ((int32_t *) mem_param_138485.mem)[slice_137894];
                            int64_t tmp_137896 = ((int64_t *) mem_param_138488.mem)[slice_137894];
                            
                            loopres_137878 = i_137857;
                            loopres_137879 = tmp_137895;
                            loopres_137880 = tmp_137896;
                        }
                        ((int32_t *) mem_138566.mem)[k_137856] = loopres_137879;
                        ((int64_t *) mem_138568.mem)[k_137856] = loopres_137880;
                        
                        int64_t i_tmp_139310 = loopres_137878;
                        
                        i_137857 = i_tmp_139310;
                    }
                    data_137853 = i_137857;
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138566, "mem_138566") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138568, "mem_138568") != 0)
                        return 1;
                } else {
                    if (mem_138504_cached_sizze_139450 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138504, &mem_138504_cached_sizze_139450, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138506_cached_sizze_139451 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138506, &mem_138506_cached_sizze_139451, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138227 = 0; i_138227 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915; i_138227++) {
                        int64_t split_count_arg3_133046 = mul64(merge_block_sizze_132781, i_138227);
                        int64_t defunc_0_split_count_res_133047;
                        int64_t defunc_0_split_count_res_133048;
                        int64_t defunc_0_split_count_res_133049;
                        int64_t defunc_0_split_count_res_133050;
                        int64_t defunc_0_split_count_res_133051;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_133047, &defunc_0_split_count_res_133048, &defunc_0_split_count_res_133049, &defunc_0_split_count_res_133050, &defunc_0_split_count_res_133051, (int64_t) 0, stride_132893, (int64_t) 0, j_m_i_132916, split_count_arg3_133046) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_133052 = slt64((int64_t) 0, defunc_0_split_count_res_133051);
                        bool defunc_0_split_count_res_133053;
                        int64_t defunc_0_split_count_res_133054;
                        int64_t defunc_0_split_count_res_133055;
                        int64_t defunc_0_split_count_res_133056;
                        int64_t defunc_0_split_count_res_133057;
                        int64_t defunc_0_split_count_res_133058;
                        bool loop_while_133059;
                        int64_t ss_133060;
                        int64_t ss_133061;
                        int64_t tt_133062;
                        int64_t tt_133063;
                        int64_t count_133064;
                        
                        loop_while_133059 = loop_cond_133052;
                        ss_133060 = defunc_0_split_count_res_133047;
                        ss_133061 = defunc_0_split_count_res_133048;
                        tt_133062 = defunc_0_split_count_res_133049;
                        tt_133063 = defunc_0_split_count_res_133050;
                        count_133064 = defunc_0_split_count_res_133051;
                        while (loop_while_133059) {
                            int64_t zlze_lhs_133065 = sub64(ss_133061, ss_133060);
                            bool cond_133066 = sle64(zlze_lhs_133065, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_133067;
                            int64_t defunc_0_lifted_step_res_133068;
                            int64_t defunc_0_lifted_step_res_133069;
                            int64_t defunc_0_lifted_step_res_133070;
                            
                            if (cond_133066) {
                                int64_t tmp_137899 = add64(tt_133062, count_133064);
                                
                                defunc_0_lifted_step_res_133067 = ss_133060;
                                defunc_0_lifted_step_res_133068 = tmp_137899;
                                defunc_0_lifted_step_res_133069 = tt_133063;
                                defunc_0_lifted_step_res_133070 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_133072 = sub64(tt_133063, tt_133062);
                                bool cond_133073 = sle64(zlze_lhs_133072, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_133074;
                                int64_t defunc_0_lifted_step_res_f_res_133075;
                                int64_t defunc_0_lifted_step_res_f_res_133076;
                                int64_t defunc_0_lifted_step_res_f_res_133077;
                                
                                if (cond_133073) {
                                    int64_t tmp_137900 = add64(ss_133060, count_133064);
                                    
                                    defunc_0_lifted_step_res_f_res_133074 = tmp_137900;
                                    defunc_0_lifted_step_res_f_res_133075 = tt_133062;
                                    defunc_0_lifted_step_res_f_res_133076 = tt_133063;
                                    defunc_0_lifted_step_res_f_res_133077 = (int64_t) 0;
                                } else {
                                    bool cond_133079 = count_133064 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133080;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133081;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133082;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133083;
                                    
                                    if (cond_133079) {
                                        bool x_137902 = sle64((int64_t) 0, ss_133060);
                                        bool y_137903 = slt64(ss_133060, stride_132893);
                                        bool bounds_check_137904 = x_137902 && y_137903;
                                        bool index_certs_137905;
                                        
                                        if (!bounds_check_137904) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_133060, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:35:3-25\n   #14 ftsort.fut:34:1-35:25\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137908 = sle64((int64_t) 0, tt_133062);
                                        bool y_137909 = slt64(tt_133062, j_m_i_132916);
                                        bool bounds_check_137910 = x_137908 && y_137909;
                                        bool index_certs_137911;
                                        
                                        if (!bounds_check_137910) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_133062, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:35:3-25\n   #14 ftsort.fut:34:1-35:25\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137906 = start_132966 + ss_133060;
                                        int32_t leq_arg1_137907 = ((int32_t *) mem_param_138485.mem)[slice_137906];
                                        int64_t slice_137912 = stride_132893 + tt_133062;
                                        int64_t slice_137913 = start_132966 + slice_137912;
                                        int32_t leq_arg0_137914 = ((int32_t *) mem_param_138485.mem)[slice_137913];
                                        bool zlze_res_137915 = sle32(leq_arg0_137914, leq_arg1_137907);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        
                                        if (zlze_res_137915) {
                                            int64_t tmp_137918 = add64((int64_t) 1, tt_133062);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = ss_133060;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tmp_137918;
                                        } else {
                                            int64_t tmp_137919 = add64((int64_t) 1, ss_133060);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = tmp_137919;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tt_133062;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = tt_133063;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = (int64_t) 0;
                                    } else {
                                        int64_t m_133102 = sdiv64(count_133064, (int64_t) 2);
                                        int64_t n_133103 = sub64(count_133064, m_133102);
                                        bool cond_133104 = n_133103 == (int64_t) 0;
                                        int64_t zgze_lhs_133105 = add64(ss_133060, m_133102);
                                        bool cond_f_res_133106 = sle64(ss_133061, zgze_lhs_133105);
                                        bool x_133107 = !cond_133104;
                                        bool y_133108 = cond_f_res_133106 && x_133107;
                                        bool cond_133109 = cond_133104 || y_133108;
                                        bool leq_y_x_133110;
                                        
                                        if (cond_133109) {
                                            leq_y_x_133110 = 1;
                                        } else {
                                            bool x_133111 = sle64((int64_t) 0, zgze_lhs_133105);
                                            bool y_133112 = slt64(zgze_lhs_133105, stride_132893);
                                            bool bounds_check_133113 = x_133111 && y_133112;
                                            bool index_certs_133114;
                                            
                                            if (!bounds_check_133113) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_133105, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:35:3-25\n   #14 ftsort.fut:34:1-35:25\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_133117 = add64(tt_133062, n_133103);
                                            int64_t leq_arg0_133118 = sub64(zm_lhs_133117, (int64_t) 1);
                                            bool x_133119 = sle64((int64_t) 0, leq_arg0_133118);
                                            bool y_133120 = slt64(leq_arg0_133118, j_m_i_132916);
                                            bool bounds_check_133121 = x_133119 && y_133120;
                                            bool index_certs_133122;
                                            
                                            if (!bounds_check_133121) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_133118, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:35:3-25\n   #14 ftsort.fut:34:1-35:25\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_133115 = start_132966 + zgze_lhs_133105;
                                            int32_t leq_arg1_133116 = ((int32_t *) mem_param_138485.mem)[slice_133115];
                                            int64_t slice_133123 = stride_132893 + leq_arg0_133118;
                                            int64_t slice_133124 = start_132966 + slice_133123;
                                            int32_t leq_arg0_133125 = ((int32_t *) mem_param_138485.mem)[slice_133124];
                                            bool zlze_res_133126 = sle32(leq_arg0_133125, leq_arg1_133116);
                                            
                                            leq_y_x_133110 = zlze_res_133126;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                        
                                        if (leq_y_x_133110) {
                                            int64_t tmp_137920 = add64(tt_133062, n_133103);
                                            int64_t tmp_137921 = sub64(count_133064, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tmp_137920;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tt_133063;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = tmp_137921;
                                        } else {
                                            int64_t tmp_133132 = add64(tt_133062, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tt_133062;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tmp_133132;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = count_133064;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = ss_133060;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                    }
                                    defunc_0_lifted_step_res_f_res_133074 = defunc_0_lifted_step_res_f_res_f_res_133080;
                                    defunc_0_lifted_step_res_f_res_133075 = defunc_0_lifted_step_res_f_res_f_res_133081;
                                    defunc_0_lifted_step_res_f_res_133076 = defunc_0_lifted_step_res_f_res_f_res_133082;
                                    defunc_0_lifted_step_res_f_res_133077 = defunc_0_lifted_step_res_f_res_f_res_133083;
                                }
                                defunc_0_lifted_step_res_133067 = defunc_0_lifted_step_res_f_res_133074;
                                defunc_0_lifted_step_res_133068 = defunc_0_lifted_step_res_f_res_133075;
                                defunc_0_lifted_step_res_133069 = defunc_0_lifted_step_res_f_res_133076;
                                defunc_0_lifted_step_res_133070 = defunc_0_lifted_step_res_f_res_133077;
                            }
                            
                            int64_t loopres_133133;
                            int64_t loopres_133134;
                            int64_t loopres_133135;
                            int64_t loopres_133136;
                            int64_t loopres_133137;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_133133, &loopres_133134, &loopres_133135, &loopres_133136, &loopres_133137, defunc_0_lifted_step_res_133067, ss_133061, defunc_0_lifted_step_res_133068, defunc_0_lifted_step_res_133069, defunc_0_lifted_step_res_133070) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_133138 = slt64((int64_t) 0, loopres_133137);
                            bool loop_while_tmp_139315 = loop_cond_133138;
                            int64_t ss_tmp_139316 = loopres_133133;
                            int64_t ss_tmp_139317 = loopres_133134;
                            int64_t tt_tmp_139318 = loopres_133135;
                            int64_t tt_tmp_139319 = loopres_133136;
                            int64_t count_tmp_139320 = loopres_133137;
                            
                            loop_while_133059 = loop_while_tmp_139315;
                            ss_133060 = ss_tmp_139316;
                            ss_133061 = ss_tmp_139317;
                            tt_133062 = tt_tmp_139318;
                            tt_133063 = tt_tmp_139319;
                            count_133064 = count_tmp_139320;
                        }
                        defunc_0_split_count_res_133053 = loop_while_133059;
                        defunc_0_split_count_res_133054 = ss_133060;
                        defunc_0_split_count_res_133055 = ss_133061;
                        defunc_0_split_count_res_133056 = tt_133062;
                        defunc_0_split_count_res_133057 = tt_133063;
                        defunc_0_split_count_res_133058 = count_133064;
                        ((int64_t *) mem_138504)[i_138227] = defunc_0_split_count_res_133054;
                        ((int64_t *) mem_138506)[i_138227] = defunc_0_split_count_res_133056;
                    }
                    if (mem_138521_cached_sizze_139452 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139452, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138524_cached_sizze_139453 < bytes_138523) {
                        err = lexical_realloc(ctx, &mem_138524, &mem_138524_cached_sizze_139453, bytes_138523);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138234 = 0; i_138234 < num_blocks_132914; i_138234++) {
                        bool y_133144 = slt64(i_138234, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool index_certs_133146;
                        
                        if (!y_133144) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138234, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133147 = ((int64_t *) mem_138504)[i_138234];
                        int64_t defunc_0_f_res_133148 = ((int64_t *) mem_138506)[i_138234];
                        int64_t tmp_133149 = add64((int64_t) 1, i_138234);
                        bool x_133150 = sle64((int64_t) 0, tmp_133149);
                        bool y_133151 = slt64(tmp_133149, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool bounds_check_133152 = x_133150 && y_133151;
                        bool index_certs_133153;
                        
                        if (!bounds_check_133152) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_133149, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133154 = ((int64_t *) mem_138504)[tmp_133149];
                        int64_t defunc_0_f_res_133155 = ((int64_t *) mem_138506)[tmp_133149];
                        int64_t merge_sequential_arg2_133156 = add64(stride_132893, defunc_0_f_res_133148);
                        int64_t merge_sequential_arg2_133157 = add64(stride_132893, defunc_0_f_res_133155);
                        int64_t j_m_i_133158 = sub64(merge_sequential_arg2_133157, merge_sequential_arg2_133156);
                        bool empty_slice_133159 = j_m_i_133158 == (int64_t) 0;
                        int64_t m_133160 = sub64(j_m_i_133158, (int64_t) 1);
                        int64_t i_p_m_t_s_133161 = add64(merge_sequential_arg2_133156, m_133160);
                        bool zzero_leq_i_p_m_t_s_133162 = sle64((int64_t) 0, i_p_m_t_s_133161);
                        bool i_p_m_t_s_leq_w_133163 = slt64(i_p_m_t_s_133161, next_stride_132894);
                        bool zzero_lte_i_133164 = sle64((int64_t) 0, merge_sequential_arg2_133156);
                        bool i_lte_j_133165 = sle64(merge_sequential_arg2_133156, merge_sequential_arg2_133157);
                        bool y_133166 = i_p_m_t_s_leq_w_133163 && zzero_lte_i_133164;
                        bool y_133167 = zzero_leq_i_p_m_t_s_133162 && y_133166;
                        bool forwards_ok_133168 = i_lte_j_133165 && y_133167;
                        bool ok_or_empty_133169 = empty_slice_133159 || forwards_ok_133168;
                        bool index_certs_133170;
                        
                        if (!ok_or_empty_133169) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_133156, ":", (long long) merge_sequential_arg2_133157, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_133171 = sub64(defunc_0_f_res_133154, defunc_0_f_res_133147);
                        bool empty_slice_133172 = j_m_i_133171 == (int64_t) 0;
                        int64_t m_133173 = sub64(j_m_i_133171, (int64_t) 1);
                        int64_t i_p_m_t_s_133174 = add64(defunc_0_f_res_133147, m_133173);
                        bool zzero_leq_i_p_m_t_s_133175 = sle64((int64_t) 0, i_p_m_t_s_133174);
                        bool i_p_m_t_s_leq_w_133176 = slt64(i_p_m_t_s_133174, next_stride_132894);
                        bool zzero_lte_i_133177 = sle64((int64_t) 0, defunc_0_f_res_133147);
                        bool i_lte_j_133178 = sle64(defunc_0_f_res_133147, defunc_0_f_res_133154);
                        bool y_133179 = i_p_m_t_s_leq_w_133176 && zzero_lte_i_133177;
                        bool y_133180 = zzero_leq_i_p_m_t_s_133175 && y_133179;
                        bool forwards_ok_133181 = i_lte_j_133178 && y_133180;
                        bool ok_or_empty_133182 = empty_slice_133172 || forwards_ok_133181;
                        bool index_certs_133183;
                        
                        if (!ok_or_empty_133182) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_133147, ":", (long long) defunc_0_f_res_133154, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:35:3-25\n   #11 ftsort.fut:34:1-35:25\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_133184 = slt64((int64_t) 0, j_m_i_133171);
                        int32_t dummy_133185;
                        int64_t dummy_133186;
                        
                        if (cond_133184) {
                            bool index_certs_137922;
                            
                            if (!cond_133184) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:140:54-57\n   #12 ftsort.fut:35:3-25\n   #13 ftsort.fut:34:1-35:25\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137923 = start_132966 + defunc_0_f_res_133147;
                            int32_t head_res_137924 = ((int32_t *) mem_param_138485.mem)[slice_137923];
                            int64_t head_res_137925 = ((int64_t *) mem_param_138488.mem)[slice_137923];
                            
                            dummy_133185 = head_res_137924;
                            dummy_133186 = head_res_137925;
                        } else {
                            bool y_133191 = slt64((int64_t) 0, j_m_i_133158);
                            bool index_certs_133192;
                            
                            if (!y_133191) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:140:54-57\n   #12 ftsort.fut:35:3-25\n   #13 ftsort.fut:34:1-35:25\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_133193 = start_132966 + merge_sequential_arg2_133156;
                            int32_t head_res_133194 = ((int32_t *) mem_param_138485.mem)[slice_133193];
                            int64_t head_res_133195 = ((int64_t *) mem_param_138488.mem)[slice_133193];
                            
                            dummy_133185 = head_res_133194;
                            dummy_133186 = head_res_133195;
                        }
                        for (int64_t nest_i_139323 = 0; nest_i_139323 < merge_block_sizze_132781; nest_i_139323++) {
                            ((int32_t *) mem_138521)[i_138234 * merge_block_sizze_132781 + nest_i_139323] = dummy_133185;
                        }
                        for (int64_t nest_i_139324 = 0; nest_i_139324 < merge_block_sizze_132781; nest_i_139324++) {
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + nest_i_139324] = dummy_133186;
                        }
                        
                        int64_t data_133198;
                        int64_t i_133202 = (int64_t) 0;
                        
                        for (int64_t k_133201 = 0; k_133201 < merge_block_sizze_132781; k_133201++) {
                            int64_t j_133205 = sub64(k_133201, i_133202);
                            bool cond_133206 = j_133205 == j_m_i_133158;
                            bool cond_133207;
                            
                            if (cond_133206) {
                                cond_133207 = 1;
                            } else {
                                bool cond_133208 = slt64(i_133202, j_m_i_133171);
                                bool cond_f_res_133209;
                                
                                if (cond_133208) {
                                    bool x_137926 = sle64((int64_t) 0, j_133205);
                                    bool y_137927 = slt64(j_133205, j_m_i_133158);
                                    bool bounds_check_137928 = x_137926 && y_137927;
                                    bool index_certs_137929;
                                    
                                    if (!bounds_check_137928) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:35:3-25\n   #12 ftsort.fut:34:1-35:25\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_137933 = sle64((int64_t) 0, i_133202);
                                    bool bounds_check_137934 = cond_133208 && x_137933;
                                    bool index_certs_137935;
                                    
                                    if (!bounds_check_137934) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:35:3-25\n   #12 ftsort.fut:34:1-35:25\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137930 = merge_sequential_arg2_133156 + j_133205;
                                    int64_t slice_137931 = start_132966 + slice_137930;
                                    int32_t leq_arg1_137932 = ((int32_t *) mem_param_138485.mem)[slice_137931];
                                    int64_t slice_137936 = defunc_0_f_res_133147 + i_133202;
                                    int64_t slice_137937 = start_132966 + slice_137936;
                                    int32_t leq_arg0_137938 = ((int32_t *) mem_param_138485.mem)[slice_137937];
                                    bool zlze_res_137939 = sle32(leq_arg0_137938, leq_arg1_137932);
                                    
                                    cond_f_res_133209 = zlze_res_137939;
                                } else {
                                    cond_f_res_133209 = 0;
                                }
                                cond_133207 = cond_f_res_133209;
                            }
                            
                            int64_t loopres_133224;
                            int32_t loopres_133225;
                            int64_t loopres_133226;
                            
                            if (cond_133207) {
                                bool x_137941 = sle64((int64_t) 0, i_133202);
                                bool y_137942 = slt64(i_133202, j_m_i_133171);
                                bool bounds_check_137943 = x_137941 && y_137942;
                                bool index_certs_137944;
                                
                                if (!bounds_check_137943) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:35:3-25\n   #12 ftsort.fut:34:1-35:25\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_137940 = add64((int64_t) 1, i_133202);
                                int64_t slice_137945 = defunc_0_f_res_133147 + i_133202;
                                int64_t slice_137946 = start_132966 + slice_137945;
                                int32_t tmp_137947 = ((int32_t *) mem_param_138485.mem)[slice_137946];
                                int64_t tmp_137948 = ((int64_t *) mem_param_138488.mem)[slice_137946];
                                
                                loopres_133224 = tmp_137940;
                                loopres_133225 = tmp_137947;
                                loopres_133226 = tmp_137948;
                            } else {
                                bool x_133236 = sle64((int64_t) 0, j_133205);
                                bool y_133237 = slt64(j_133205, j_m_i_133158);
                                bool bounds_check_133238 = x_133236 && y_133237;
                                bool index_certs_133239;
                                
                                if (!bounds_check_133238) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:35:3-25\n   #12 ftsort.fut:34:1-35:25\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_133240 = merge_sequential_arg2_133156 + j_133205;
                                int64_t slice_133241 = start_132966 + slice_133240;
                                int32_t tmp_133242 = ((int32_t *) mem_param_138485.mem)[slice_133241];
                                int64_t tmp_133243 = ((int64_t *) mem_param_138488.mem)[slice_133241];
                                
                                loopres_133224 = i_133202;
                                loopres_133225 = tmp_133242;
                                loopres_133226 = tmp_133243;
                            }
                            ((int32_t *) mem_138521)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133225;
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133226;
                            
                            int64_t i_tmp_139325 = loopres_133224;
                            
                            i_133202 = i_tmp_139325;
                        }
                        data_133198 = i_133202;
                    }
                    if (memblock_alloc(ctx, &mem_138559, bytes_138520, "mem_138559")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_138559.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint32_t *) mem_138521, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_alloc(ctx, &mem_138563, bytes_138523, "mem_138563")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138563.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138524, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138559, "mem_138559") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138563, "mem_138563") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_138491, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138494, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138583.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
                    return 1;
            }
            
            int64_t flat_dim_133250 = next_stride_132894 * num_merges_132898;
            
            if (memblock_alloc(ctx, &mem_138597, bytes_138490, "mem_138597")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_138597.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint32_t *) mem_138491, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            if (memblock_alloc(ctx, &mem_138601, bytes_138493, "mem_138601")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138601.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138494, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            
            bool loop_cond_133253 = slt64(next_stride_132894, flat_dim_132778);
            
            if (memblock_set(ctx, &mem_param_tmp_139299, &mem_138597, "mem_138597") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139300, &mem_138601, "mem_138601") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139301 = flat_dim_133250;
            bool loop_while_tmp_139302 = loop_cond_133253;
            int64_t stride_tmp_139305 = next_stride_132894;
            
            if (memblock_set(ctx, &mem_param_138485, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138488, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
                return 1;
            loop_dz2084Uz2082U_132889 = loop_dz2084Uz2082U_tmp_139301;
            loop_while_132890 = loop_while_tmp_139302;
            stride_132893 = stride_tmp_139305;
        }
        if (memblock_set(ctx, &ext_mem_138608, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138607, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        data_132884 = loop_dz2084Uz2082U_132889;
        data_132885 = loop_while_132890;
        data_132888 = stride_132893;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        
        bool empty_slice_133254 = n_83535 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_133255 = sle64((int64_t) 0, zs_lhs_132762);
        bool i_p_m_t_s_leq_w_133256 = slt64(zs_lhs_132762, data_132884);
        bool y_133257 = zzero_leq_i_p_m_t_s_133255 && i_p_m_t_s_leq_w_133256;
        bool ok_or_empty_133258 = empty_slice_133254 || y_133257;
        bool index_certs_133259;
        
        if (!ok_or_empty_133258) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_83535, "] out of bounds for array of shape [", (long long) data_132884, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftbasics.fut:140:54-57\n   #5  ftsort.fut:35:3-25\n   #6  ftsort.fut:34:1-35:25\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138611, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138613, bytes_138405, "mem_138613")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138615, bytes_138614, "mem_138615")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138248 = 0; i_138248 < n_83535; i_138248++) {
        int64_t eta_p_133263 = ((int64_t *) ext_mem_138611.mem)[i_138248];
        bool x_133264 = sle64((int64_t) 0, eta_p_133263);
        bool y_133265 = slt64(eta_p_133263, n_83535);
        bool bounds_check_133266 = x_133264 && y_133265;
        bool index_certs_133267;
        
        if (!bounds_check_133266) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133263, "] out of bounds for array of shape [", (long long) n_83535, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:35:3-25\n   #5  ftsort.fut:34:1-35:25\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133268 = ((int64_t *) ext_mem_138404.mem)[eta_p_133263];
        int32_t lifted_lambda_res_133269 = ((int32_t *) xs_mem_138403.mem)[eta_p_133263];
        
        ((int64_t *) mem_138613.mem)[i_138248] = lifted_lambda_res_133268;
        ((int32_t *) mem_138615.mem)[i_138248] = lifted_lambda_res_133269;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138613, "mem_138613") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138615, "mem_138615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139442, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139443, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138409);
        free(mem_138412);
        free(mem_138422);
        free(mem_138424);
        free(mem_138491);
        free(mem_138494);
        free(mem_138504);
        free(mem_138506);
        free(mem_138521);
        free(mem_138524);
        if (memblock_unref(ctx, &mem_138615, "mem_138615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138613, "mem_138613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138601, "mem_138601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138597, "mem_138597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138563, "mem_138563") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138559, "mem_138559") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138568, "mem_138568") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138566, "mem_138566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138608, "ext_mem_138608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_139454, struct memblock *mem_out_p_139455, struct memblock xs_mem_138403, int64_t n_85878, int64_t incr_85879)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138409_cached_sizze_139456 = 0;
    unsigned char *mem_138409 = NULL;
    int64_t mem_138412_cached_sizze_139457 = 0;
    unsigned char *mem_138412 = NULL;
    int64_t mem_138422_cached_sizze_139458 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139459 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138491_cached_sizze_139460 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138494_cached_sizze_139461 = 0;
    unsigned char *mem_138494 = NULL;
    int64_t mem_138504_cached_sizze_139462 = 0;
    unsigned char *mem_138504 = NULL;
    int64_t mem_138506_cached_sizze_139463 = 0;
    unsigned char *mem_138506 = NULL;
    int64_t mem_138521_cached_sizze_139464 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138524_cached_sizze_139465 = 0;
    unsigned char *mem_138524 = NULL;
    struct memblock mem_138615;
    
    mem_138615.references = NULL;
    
    struct memblock mem_138613;
    
    mem_138613.references = NULL;
    
    struct memblock mem_param_tmp_139300;
    
    mem_param_tmp_139300.references = NULL;
    
    struct memblock mem_param_tmp_139299;
    
    mem_param_tmp_139299.references = NULL;
    
    struct memblock mem_138601;
    
    mem_138601.references = NULL;
    
    struct memblock mem_138597;
    
    mem_138597.references = NULL;
    
    struct memblock mem_138563;
    
    mem_138563.references = NULL;
    
    struct memblock mem_138559;
    
    mem_138559.references = NULL;
    
    struct memblock mem_138568;
    
    mem_138568.references = NULL;
    
    struct memblock mem_138566;
    
    mem_138566.references = NULL;
    
    struct memblock ext_mem_138583;
    
    ext_mem_138583.references = NULL;
    
    struct memblock ext_mem_138586;
    
    ext_mem_138586.references = NULL;
    
    struct memblock mem_param_138488;
    
    mem_param_138488.references = NULL;
    
    struct memblock mem_param_138485;
    
    mem_param_138485.references = NULL;
    
    struct memblock ext_mem_138607;
    
    ext_mem_138607.references = NULL;
    
    struct memblock ext_mem_138608;
    
    ext_mem_138608.references = NULL;
    
    struct memblock mem_138481;
    
    mem_138481.references = NULL;
    
    struct memblock mem_138477;
    
    mem_138477.references = NULL;
    
    struct memblock ext_mem_138611;
    
    ext_mem_138611.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_85878;
    bool cond_132761 = sle64(n_85878, (int64_t) 1);
    int64_t zs_lhs_132762 = sub64(n_85878, (int64_t) 1);
    int64_t zp_rhs_132763 = sdiv_safe64(zs_lhs_132762, (int64_t) 20);
    int64_t min_num_blocks_132764 = add64((int64_t) 1, zp_rhs_132763);
    bool loop_cond_132765 = slt64((int64_t) 1, min_num_blocks_132764);
    bool smallest_pow_2_geq_than_res_132766;
    int64_t smallest_pow_2_geq_than_res_132767;
    bool loop_while_132768;
    int64_t x_132769;
    
    loop_while_132768 = loop_cond_132765;
    x_132769 = (int64_t) 1;
    while (loop_while_132768) {
        int64_t loopres_132770 = mul64((int64_t) 2, x_132769);
        bool loop_cond_132771 = slt64(loopres_132770, min_num_blocks_132764);
        bool loop_while_tmp_139283 = loop_cond_132771;
        int64_t x_tmp_139284 = loopres_132770;
        
        loop_while_132768 = loop_while_tmp_139283;
        x_132769 = x_tmp_139284;
    }
    smallest_pow_2_geq_than_res_132766 = loop_while_132768;
    smallest_pow_2_geq_than_res_132767 = x_132769;
    
    bool zzero_132772 = smallest_pow_2_geq_than_res_132767 == (int64_t) 0;
    bool nonzzero_132773 = !zzero_132772;
    bool protect_assert_disj_132774 = cond_132761 || nonzzero_132773;
    bool nonzzero_cert_132775;
    
    if (!protect_assert_disj_132774) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:38:3-26\n   #5  ftsort.fut:37:1-38:26\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_132776 = sdiv_safe64(zs_lhs_132762, smallest_pow_2_geq_than_res_132767);
    int64_t block_sizze_132777 = add64((int64_t) 1, zp_rhs_132776);
    bool y_132782 = slt64((int64_t) 0, n_85878);
    bool protect_assert_disj_139017 = cond_132761 || y_132782;
    bool index_certs_132783;
    
    if (!protect_assert_disj_139017) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_85878, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:38:3-26\n   #5  ftsort.fut:37:1-38:26\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132796 = slt64(smallest_pow_2_geq_than_res_132767, (int64_t) 0);
    bool valid_132797 = !bounds_invalid_upwards_132796;
    bool protect_assert_disj_139025 = cond_132761 || valid_132797;
    bool range_valid_c_132798;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_132767, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:140:54-57\n   #6  ftsort.fut:38:3-26\n   #7  ftsort.fut:37:1-38:26\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132800 = slt64(block_sizze_132777, (int64_t) 0);
    bool valid_132801 = !bounds_invalid_upwards_132800;
    bool protect_assert_disj_139027 = cond_132761 || valid_132801;
    bool range_valid_c_132802;
    
    if (!protect_assert_disj_139027) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_132777, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_132804 = sle64(block_sizze_132777, (int64_t) 1);
    int64_t tmp_132805 = sub64(block_sizze_132777, (int64_t) 2);
    bool bounds_invalid_upwards_132806 = slt64(tmp_132805, (int64_t) 0);
    bool valid_132808 = !bounds_invalid_upwards_132806;
    bool protect_assert_disj_132809 = cond_132804 || valid_132808;
    bool protect_assert_disj_139029 = cond_132761 || protect_assert_disj_132809;
    bool range_valid_c_132810;
    
    if (!protect_assert_disj_139029) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_132805, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (futrts_indicesWithIncrement_9238(ctx, &ext_mem_138404, xs_mem_138403, n_85878, incr_85879) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139285 = 0; i_139285 < n_85878; i_139285++) {
        int64_t x_139286 = (int64_t) 0 + i_139285 * (int64_t) 1;
        
        ((int64_t *) mem_138406.mem)[i_139285] = x_139286;
    }
    
    int64_t flat_dim_132778 = smallest_pow_2_geq_than_res_132767 * block_sizze_132777;
    bool x_139012 = !cond_132761;
    int64_t greatest_divisor_leq_than_arg1_132780 = mul64((int64_t) 2, block_sizze_132777);
    int64_t merge_block_sizze_132781;
    
    if (x_139012) {
        int64_t x_139014;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139014, (int64_t) 8, greatest_divisor_leq_than_arg1_132780) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_132781 = x_139014;
    } else {
        merge_block_sizze_132781 = (int64_t) 0;
    }
    
    int64_t reduce_arg1_132784;
    
    if (x_139012) {
        int64_t x_139018 = ((int64_t *) xs_mem_138403.mem)[(int64_t) 0];
        
        reduce_arg1_132784 = x_139018;
    } else {
        reduce_arg1_132784 = (int64_t) 0;
    }
    
    int64_t defunc_0_reduce_res_137955;
    int64_t defunc_0_reduce_res_137956;
    
    if (x_139012) {
        int64_t x_139020;
        int64_t x_139021;
        int64_t redout_138206;
        int64_t redout_138207;
        
        redout_138206 = reduce_arg1_132784;
        redout_138207 = (int64_t) 0;
        for (int64_t i_138208 = 0; i_138208 < n_85878; i_138208++) {
            int64_t x_132787 = ((int64_t *) xs_mem_138403.mem)[i_138208];
            bool zlze_res_132793 = sle64(redout_138206, x_132787);
            int64_t defunc_0_op_res_132794;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132794 = x_132787;
            } else {
                defunc_0_op_res_132794 = redout_138206;
            }
            
            int64_t defunc_0_op_res_132795;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132795 = i_138208;
            } else {
                defunc_0_op_res_132795 = redout_138207;
            }
            
            int64_t redout_tmp_139287 = defunc_0_op_res_132794;
            int64_t redout_tmp_139288 = defunc_0_op_res_132795;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
        }
        x_139020 = redout_138206;
        x_139021 = redout_138207;
        defunc_0_reduce_res_137955 = x_139020;
        defunc_0_reduce_res_137956 = x_139021;
    } else {
        defunc_0_reduce_res_137955 = (int64_t) 0;
        defunc_0_reduce_res_137956 = (int64_t) 0;
    }
    
    int64_t distance_132807 = add64((int64_t) 1, tmp_132805);
    int64_t binop_x_138407 = (int64_t) 8 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138408 = block_sizze_132777 * binop_x_138407;
    int64_t bytes_138421 = (int64_t) 8 * block_sizze_132777;
    bool loop_cond_132881 = slt64(block_sizze_132777, flat_dim_132778);
    bool zzero_132882 = merge_block_sizze_132781 == (int64_t) 0;
    bool nonzzero_132883 = !zzero_132882;
    
    if (cond_132761) {
        if (memblock_set(ctx, &ext_mem_138611, &mem_138406, "mem_138406") != 0)
            return 1;
    } else {
        if (mem_138409_cached_sizze_139456 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138409, &mem_138409_cached_sizze_139456, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138412_cached_sizze_139457 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138412, &mem_138412_cached_sizze_139457, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138422_cached_sizze_139458 < bytes_138421) {
            err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139458, bytes_138421);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138424_cached_sizze_139459 < bytes_138421) {
            err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139459, bytes_138421);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138220 = 0; i_138220 < smallest_pow_2_geq_than_res_132767; i_138220++) {
            int64_t zp_lhs_132814 = mul64(block_sizze_132777, i_138220);
            
            for (int64_t i_138213 = 0; i_138213 < block_sizze_132777; i_138213++) {
                int64_t k_132818 = add64(zp_lhs_132814, i_138213);
                bool cond_132819 = slt64(k_132818, n_85878);
                int64_t lifted_lambda_res_132820;
                int64_t lifted_lambda_res_132821;
                
                if (cond_132819) {
                    bool x_137808 = sle64((int64_t) 0, k_132818);
                    bool bounds_check_137809 = cond_132819 && x_137808;
                    bool index_certs_137810;
                    
                    if (!bounds_check_137809) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_132818, "] out of bounds for array of shape [", (long long) n_85878, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t lifted_lambda_res_t_res_137811 = ((int64_t *) xs_mem_138403.mem)[k_132818];
                    
                    lifted_lambda_res_132820 = lifted_lambda_res_t_res_137811;
                    lifted_lambda_res_132821 = k_132818;
                } else {
                    lifted_lambda_res_132820 = defunc_0_reduce_res_137955;
                    lifted_lambda_res_132821 = defunc_0_reduce_res_137956;
                }
                ((int64_t *) mem_138422)[i_138213] = lifted_lambda_res_132820;
                ((int64_t *) mem_138424)[i_138213] = lifted_lambda_res_132821;
            }
            if (!cond_132804) {
                for (int64_t i_132830 = 0; i_132830 < distance_132807; i_132830++) {
                    int64_t gt_arg1_132833 = add64((int64_t) 1, i_132830);
                    bool x_132834 = sle64((int64_t) 0, gt_arg1_132833);
                    bool y_132835 = slt64(gt_arg1_132833, block_sizze_132777);
                    bool bounds_check_132836 = x_132834 && y_132835;
                    bool index_certs_132837;
                    
                    if (!bounds_check_132836) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_132833, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_132839 = slt64(i_132830, block_sizze_132777);
                    bool index_certs_132840;
                    
                    if (!y_132839) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_132830, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t gt_arg1_132838 = ((int64_t *) mem_138422)[gt_arg1_132833];
                    int64_t gt_arg0_132841 = ((int64_t *) mem_138422)[i_132830];
                    bool zlze_res_132842 = sle64(gt_arg0_132841, gt_arg1_132838);
                    bool defunc_0_lifted_gt_res_132843 = !zlze_res_132842;
                    bool s_132844;
                    int64_t s_132847;
                    bool loop_while_132848;
                    int64_t j_132851;
                    
                    loop_while_132848 = defunc_0_lifted_gt_res_132843;
                    j_132851 = i_132830;
                    while (loop_while_132848) {
                        bool x_132852 = sle64((int64_t) 0, j_132851);
                        bool y_132853 = slt64(j_132851, block_sizze_132777);
                        bool bounds_check_132854 = x_132852 && y_132853;
                        bool index_certs_132855;
                        
                        if (!bounds_check_132854) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_132851, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_132858 = add64((int64_t) 1, j_132851);
                        bool x_132859 = sle64((int64_t) 0, copy_arg0_132858);
                        bool y_132860 = slt64(copy_arg0_132858, block_sizze_132777);
                        bool bounds_check_132861 = x_132859 && y_132860;
                        bool index_certs_132862;
                        
                        if (!bounds_check_132861) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_132858, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_132856 = ((int64_t *) mem_138422)[j_132851];
                        int64_t copy_arg0_132857 = ((int64_t *) mem_138424)[j_132851];
                        int64_t copy_arg0_132863 = ((int64_t *) mem_138422)[copy_arg0_132858];
                        int64_t copy_arg0_132864 = ((int64_t *) mem_138424)[copy_arg0_132858];
                        
                        ((int64_t *) mem_138422)[j_132851] = copy_arg0_132863;
                        ((int64_t *) mem_138424)[j_132851] = copy_arg0_132864;
                        ((int64_t *) mem_138422)[copy_arg0_132858] = copy_arg0_132856;
                        ((int64_t *) mem_138424)[copy_arg0_132858] = copy_arg0_132857;
                        
                        int64_t tmp_132869 = sub64(j_132851, (int64_t) 1);
                        bool cond_132870 = sle64((int64_t) 0, tmp_132869);
                        bool loop_cond_132871;
                        
                        if (cond_132870) {
                            bool y_137813 = slt64(tmp_132869, block_sizze_132777);
                            bool bounds_check_137814 = cond_132870 && y_137813;
                            bool index_certs_137815;
                            
                            if (!bounds_check_137814) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132869, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t gt_arg1_137812 = ((int64_t *) mem_138422)[j_132851];
                            int64_t gt_arg0_137816 = ((int64_t *) mem_138422)[tmp_132869];
                            bool zlze_res_137817 = sle64(gt_arg0_137816, gt_arg1_137812);
                            bool defunc_0_lifted_gt_res_137818 = !zlze_res_137817;
                            
                            loop_cond_132871 = defunc_0_lifted_gt_res_137818;
                        } else {
                            loop_cond_132871 = 0;
                        }
                        
                        bool loop_while_tmp_139295 = loop_cond_132871;
                        int64_t j_tmp_139298 = tmp_132869;
                        
                        loop_while_132848 = loop_while_tmp_139295;
                        j_132851 = j_tmp_139298;
                    }
                    s_132844 = loop_while_132848;
                    s_132847 = j_132851;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138409, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138422, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138412, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138424, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
        }
        if (memblock_alloc(ctx, &mem_138477, bytes_138408, "mem_138477")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138477.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138409, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        if (memblock_alloc(ctx, &mem_138481, bytes_138408, "mem_138481")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138481.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138412, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        
        int64_t data_132884;
        bool data_132885;
        int64_t data_132888;
        int64_t loop_dz2084Uz2082U_132889;
        bool loop_while_132890;
        int64_t stride_132893;
        
        if (memblock_set(ctx, &mem_param_138485, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138488, &mem_138481, "mem_138481") != 0)
            return 1;
        loop_dz2084Uz2082U_132889 = flat_dim_132778;
        loop_while_132890 = loop_cond_132881;
        stride_132893 = block_sizze_132777;
        while (loop_while_132890) {
            int64_t next_stride_132894 = mul64((int64_t) 2, stride_132893);
            bool zzero_132895 = next_stride_132894 == (int64_t) 0;
            bool nonzzero_132896 = !zzero_132895;
            bool nonzzero_cert_132897;
            
            if (!nonzzero_132896) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:38:3-26\n   #5  ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_132898 = sdiv64(flat_dim_132778, next_stride_132894);
            bool bounds_invalid_upwards_132899 = slt64(num_merges_132898, (int64_t) 0);
            bool valid_132900 = !bounds_invalid_upwards_132899;
            bool range_valid_c_132901;
            
            if (!valid_132900) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_132898, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:140:54-57\n   #6  ftsort.fut:38:3-26\n   #7  ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_132903 = sub64(next_stride_132894, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_132904 = sle64((int64_t) 0, m_132903);
            bool cond_132906 = slt64(next_stride_132894, (int64_t) 10);
            bool protect_assert_disj_132907 = nonzzero_132883 || cond_132906;
            bool nonzzero_cert_132908;
            
            if (!protect_assert_disj_132907) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_132909 = smod_safe64(next_stride_132894, merge_block_sizze_132781);
            bool num_blocks_132910 = zeze_lhs_132909 == (int64_t) 0;
            bool protect_assert_disj_132911 = cond_132906 || num_blocks_132910;
            bool assert_c_132912;
            
            if (!protect_assert_disj_132911) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_132914 = sdiv_safe64(next_stride_132894, merge_block_sizze_132781);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915 = add64((int64_t) 1, num_blocks_132914);
            int64_t j_m_i_132916 = sub64(next_stride_132894, stride_132893);
            int64_t flat_dim_132917 = merge_block_sizze_132781 * num_blocks_132914;
            bool bounds_invalid_upwards_132918 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, (int64_t) 0);
            bool zzero_lte_i_132919 = sle64((int64_t) 0, stride_132893);
            bool i_lte_j_132920 = sle64(stride_132893, next_stride_132894);
            bool empty_slice_132921 = stride_132893 == (int64_t) 0;
            int64_t m_132922 = sub64(stride_132893, (int64_t) 1);
            bool bounds_invalid_upwards_132923 = slt64(num_blocks_132914, (int64_t) 0);
            bool empty_slice_132924 = j_m_i_132916 == (int64_t) 0;
            int64_t m_132925 = sub64(j_m_i_132916, (int64_t) 1);
            bool cond_132926 = slt64((int64_t) 0, stride_132893);
            bool valid_132927 = !bounds_invalid_upwards_132918;
            bool zzero_leq_i_p_m_t_s_132928 = sle64((int64_t) 0, m_132922);
            bool i_p_m_t_s_leq_w_132929 = slt64(m_132922, next_stride_132894);
            bool valid_132930 = !bounds_invalid_upwards_132923;
            bool i_p_m_t_s_leq_w_132931 = slt64(m_132903, flat_dim_132917);
            int64_t i_p_m_t_s_132932 = add64(stride_132893, m_132925);
            bool y_132933 = slt64((int64_t) 0, j_m_i_132916);
            bool protect_assert_disj_132934 = cond_132906 || valid_132927;
            bool range_valid_c_132935;
            
            if (!protect_assert_disj_132934) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132936 = zzero_leq_i_p_m_t_s_132928 && i_p_m_t_s_leq_w_132929;
            bool protect_assert_disj_132937 = cond_132906 || valid_132930;
            bool range_valid_c_132938;
            
            if (!protect_assert_disj_132937) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_132914, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132939 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132931;
            bool zzero_leq_i_p_m_t_s_132940 = sle64((int64_t) 0, i_p_m_t_s_132932);
            bool i_p_m_t_s_leq_w_132941 = slt64(i_p_m_t_s_132932, next_stride_132894);
            bool forwards_ok_132942 = zzero_lte_i_132919 && y_132936;
            bool ok_or_empty_132943 = zzero_132895 || y_132939;
            bool y_132944 = zzero_lte_i_132919 && i_p_m_t_s_leq_w_132941;
            bool protect_assert_disj_132945 = cond_132926 || y_132933;
            bool ok_or_empty_132946 = empty_slice_132921 || forwards_ok_132942;
            bool protect_assert_disj_132947 = cond_132906 || ok_or_empty_132943;
            bool index_certs_132948;
            
            if (!protect_assert_disj_132947) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) flat_dim_132917, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132949 = zzero_leq_i_p_m_t_s_132940 && y_132944;
            bool loop_not_taken_132950 = !cond_132906;
            bool protect_assert_disj_132951 = protect_assert_disj_132945 || loop_not_taken_132950;
            bool index_certs_132952;
            
            if (!protect_assert_disj_132951) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132953 = cond_132906 || ok_or_empty_132946;
            bool index_certs_132954;
            
            if (!protect_assert_disj_132953) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:38:3-26\n   #12 ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_132955 = i_lte_j_132920 && y_132949;
            bool protect_assert_disj_132956 = ok_or_empty_132946 || loop_not_taken_132950;
            bool index_certs_132957;
            
            if (!protect_assert_disj_132956) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_132958 = empty_slice_132924 || forwards_ok_132955;
            bool protect_assert_disj_132959 = loop_not_taken_132950 || ok_or_empty_132958;
            bool index_certs_132960;
            
            if (!protect_assert_disj_132959) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132961 = cond_132906 || ok_or_empty_132958;
            bool index_certs_132962;
            
            if (!protect_assert_disj_132961) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:38:3-26\n   #12 ftsort.fut:37:1-38:26\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138489 = (int64_t) 8 * num_merges_132898;
            int64_t bytes_138490 = next_stride_132894 * binop_x_138489;
            bool i_lte_j_132905 = sle64((int64_t) 0, next_stride_132894);
            
            if (mem_138491_cached_sizze_139460 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139460, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138494_cached_sizze_139461 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138494, &mem_138494_cached_sizze_139461, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138503 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915;
            int64_t binop_x_138519 = (int64_t) 8 * num_blocks_132914;
            int64_t bytes_138520 = merge_block_sizze_132781 * binop_x_138519;
            int64_t bytes_138565 = (int64_t) 16 * stride_132893;
            
            for (int64_t i_138241 = 0; i_138241 < num_merges_132898; i_138241++) {
                int64_t start_132966 = mul64(next_stride_132894, i_138241);
                int64_t j_m_i_132967 = sub64(loop_dz2084Uz2082U_132889, start_132966);
                bool empty_slice_132968 = j_m_i_132967 == (int64_t) 0;
                int64_t m_132969 = sub64(j_m_i_132967, (int64_t) 1);
                int64_t i_p_m_t_s_132970 = add64(start_132966, m_132969);
                bool zzero_leq_i_p_m_t_s_132971 = sle64((int64_t) 0, i_p_m_t_s_132970);
                bool i_p_m_t_s_leq_w_132972 = slt64(i_p_m_t_s_132970, loop_dz2084Uz2082U_132889);
                bool zzero_lte_i_132973 = sle64((int64_t) 0, start_132966);
                bool i_lte_j_132974 = sle64(start_132966, loop_dz2084Uz2082U_132889);
                bool y_132975 = i_p_m_t_s_leq_w_132972 && zzero_lte_i_132973;
                bool y_132976 = zzero_leq_i_p_m_t_s_132971 && y_132975;
                bool forwards_ok_132977 = i_lte_j_132974 && y_132976;
                bool ok_or_empty_132978 = empty_slice_132968 || forwards_ok_132977;
                bool index_certs_132979;
                
                if (!ok_or_empty_132978) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_132966, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_132889, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_132980 = slt64(m_132903, j_m_i_132967);
                bool y_132981 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132980;
                bool forwards_ok_132982 = i_lte_j_132905 && y_132981;
                bool ok_or_empty_132983 = zzero_132895 || forwards_ok_132982;
                bool index_certs_132984;
                
                if (!ok_or_empty_132983) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) j_m_i_132967, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:38:3-26\n   #9  ftsort.fut:37:1-38:26\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_132906) {
                    int64_t dummy_137844;
                    int64_t dummy_137845;
                    
                    if (cond_132926) {
                        int64_t head_res_137846 = ((int64_t *) mem_param_138485.mem)[start_132966];
                        int64_t head_res_137847 = ((int64_t *) mem_param_138488.mem)[start_132966];
                        
                        dummy_137844 = head_res_137846;
                        dummy_137845 = head_res_137847;
                    } else {
                        int64_t slice_137848 = stride_132893 + start_132966;
                        int64_t head_res_137849 = ((int64_t *) mem_param_138485.mem)[slice_137848];
                        int64_t head_res_137850 = ((int64_t *) mem_param_138488.mem)[slice_137848];
                        
                        dummy_137844 = head_res_137849;
                        dummy_137845 = head_res_137850;
                    }
                    if (memblock_alloc(ctx, &mem_138566, bytes_138565, "mem_138566")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139308 = 0; nest_i_139308 < next_stride_132894; nest_i_139308++) {
                        ((int64_t *) mem_138566.mem)[nest_i_139308] = dummy_137844;
                    }
                    if (memblock_alloc(ctx, &mem_138568, bytes_138565, "mem_138568")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139309 = 0; nest_i_139309 < next_stride_132894; nest_i_139309++) {
                        ((int64_t *) mem_138568.mem)[nest_i_139309] = dummy_137845;
                    }
                    
                    int64_t data_137853;
                    int64_t i_137857 = (int64_t) 0;
                    
                    for (int64_t k_137856 = 0; k_137856 < next_stride_132894; k_137856++) {
                        int64_t j_137860 = sub64(k_137856, i_137857);
                        bool cond_137861 = j_137860 == j_m_i_132916;
                        bool cond_137862;
                        
                        if (cond_137861) {
                            cond_137862 = 1;
                        } else {
                            bool cond_137863 = slt64(i_137857, stride_132893);
                            bool cond_f_res_137864;
                            
                            if (cond_137863) {
                                bool x_137865 = sle64((int64_t) 0, j_137860);
                                bool y_137866 = slt64(j_137860, j_m_i_132916);
                                bool bounds_check_137867 = x_137865 && y_137866;
                                bool index_certs_137868;
                                
                                if (!bounds_check_137867) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_137872 = sle64((int64_t) 0, i_137857);
                                bool bounds_check_137873 = cond_137863 && x_137872;
                                bool index_certs_137874;
                                
                                if (!bounds_check_137873) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137869 = stride_132893 + j_137860;
                                int64_t slice_137870 = start_132966 + slice_137869;
                                int64_t leq_arg1_137871 = ((int64_t *) mem_param_138485.mem)[slice_137870];
                                int64_t slice_137875 = start_132966 + i_137857;
                                int64_t leq_arg0_137876 = ((int64_t *) mem_param_138485.mem)[slice_137875];
                                bool zlze_res_137877 = sle64(leq_arg0_137876, leq_arg1_137871);
                                
                                cond_f_res_137864 = zlze_res_137877;
                            } else {
                                cond_f_res_137864 = 0;
                            }
                            cond_137862 = cond_f_res_137864;
                        }
                        
                        int64_t loopres_137878;
                        int64_t loopres_137879;
                        int64_t loopres_137880;
                        
                        if (cond_137862) {
                            bool x_137882 = sle64((int64_t) 0, i_137857);
                            bool y_137883 = slt64(i_137857, stride_132893);
                            bool bounds_check_137884 = x_137882 && y_137883;
                            bool index_certs_137885;
                            
                            if (!bounds_check_137884) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_137881 = add64((int64_t) 1, i_137857);
                            int64_t slice_137886 = start_132966 + i_137857;
                            int64_t tmp_137887 = ((int64_t *) mem_param_138485.mem)[slice_137886];
                            int64_t tmp_137888 = ((int64_t *) mem_param_138488.mem)[slice_137886];
                            
                            loopres_137878 = tmp_137881;
                            loopres_137879 = tmp_137887;
                            loopres_137880 = tmp_137888;
                        } else {
                            bool x_137889 = sle64((int64_t) 0, j_137860);
                            bool y_137890 = slt64(j_137860, j_m_i_132916);
                            bool bounds_check_137891 = x_137889 && y_137890;
                            bool index_certs_137892;
                            
                            if (!bounds_check_137891) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:38:3-26\n   #10 ftsort.fut:37:1-38:26\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137893 = stride_132893 + j_137860;
                            int64_t slice_137894 = start_132966 + slice_137893;
                            int64_t tmp_137895 = ((int64_t *) mem_param_138485.mem)[slice_137894];
                            int64_t tmp_137896 = ((int64_t *) mem_param_138488.mem)[slice_137894];
                            
                            loopres_137878 = i_137857;
                            loopres_137879 = tmp_137895;
                            loopres_137880 = tmp_137896;
                        }
                        ((int64_t *) mem_138566.mem)[k_137856] = loopres_137879;
                        ((int64_t *) mem_138568.mem)[k_137856] = loopres_137880;
                        
                        int64_t i_tmp_139310 = loopres_137878;
                        
                        i_137857 = i_tmp_139310;
                    }
                    data_137853 = i_137857;
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138566, "mem_138566") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138568, "mem_138568") != 0)
                        return 1;
                } else {
                    if (mem_138504_cached_sizze_139462 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138504, &mem_138504_cached_sizze_139462, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138506_cached_sizze_139463 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138506, &mem_138506_cached_sizze_139463, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138227 = 0; i_138227 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915; i_138227++) {
                        int64_t split_count_arg3_133046 = mul64(merge_block_sizze_132781, i_138227);
                        int64_t defunc_0_split_count_res_133047;
                        int64_t defunc_0_split_count_res_133048;
                        int64_t defunc_0_split_count_res_133049;
                        int64_t defunc_0_split_count_res_133050;
                        int64_t defunc_0_split_count_res_133051;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_133047, &defunc_0_split_count_res_133048, &defunc_0_split_count_res_133049, &defunc_0_split_count_res_133050, &defunc_0_split_count_res_133051, (int64_t) 0, stride_132893, (int64_t) 0, j_m_i_132916, split_count_arg3_133046) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_133052 = slt64((int64_t) 0, defunc_0_split_count_res_133051);
                        bool defunc_0_split_count_res_133053;
                        int64_t defunc_0_split_count_res_133054;
                        int64_t defunc_0_split_count_res_133055;
                        int64_t defunc_0_split_count_res_133056;
                        int64_t defunc_0_split_count_res_133057;
                        int64_t defunc_0_split_count_res_133058;
                        bool loop_while_133059;
                        int64_t ss_133060;
                        int64_t ss_133061;
                        int64_t tt_133062;
                        int64_t tt_133063;
                        int64_t count_133064;
                        
                        loop_while_133059 = loop_cond_133052;
                        ss_133060 = defunc_0_split_count_res_133047;
                        ss_133061 = defunc_0_split_count_res_133048;
                        tt_133062 = defunc_0_split_count_res_133049;
                        tt_133063 = defunc_0_split_count_res_133050;
                        count_133064 = defunc_0_split_count_res_133051;
                        while (loop_while_133059) {
                            int64_t zlze_lhs_133065 = sub64(ss_133061, ss_133060);
                            bool cond_133066 = sle64(zlze_lhs_133065, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_133067;
                            int64_t defunc_0_lifted_step_res_133068;
                            int64_t defunc_0_lifted_step_res_133069;
                            int64_t defunc_0_lifted_step_res_133070;
                            
                            if (cond_133066) {
                                int64_t tmp_137899 = add64(tt_133062, count_133064);
                                
                                defunc_0_lifted_step_res_133067 = ss_133060;
                                defunc_0_lifted_step_res_133068 = tmp_137899;
                                defunc_0_lifted_step_res_133069 = tt_133063;
                                defunc_0_lifted_step_res_133070 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_133072 = sub64(tt_133063, tt_133062);
                                bool cond_133073 = sle64(zlze_lhs_133072, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_133074;
                                int64_t defunc_0_lifted_step_res_f_res_133075;
                                int64_t defunc_0_lifted_step_res_f_res_133076;
                                int64_t defunc_0_lifted_step_res_f_res_133077;
                                
                                if (cond_133073) {
                                    int64_t tmp_137900 = add64(ss_133060, count_133064);
                                    
                                    defunc_0_lifted_step_res_f_res_133074 = tmp_137900;
                                    defunc_0_lifted_step_res_f_res_133075 = tt_133062;
                                    defunc_0_lifted_step_res_f_res_133076 = tt_133063;
                                    defunc_0_lifted_step_res_f_res_133077 = (int64_t) 0;
                                } else {
                                    bool cond_133079 = count_133064 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133080;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133081;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133082;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133083;
                                    
                                    if (cond_133079) {
                                        bool x_137902 = sle64((int64_t) 0, ss_133060);
                                        bool y_137903 = slt64(ss_133060, stride_132893);
                                        bool bounds_check_137904 = x_137902 && y_137903;
                                        bool index_certs_137905;
                                        
                                        if (!bounds_check_137904) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_133060, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:38:3-26\n   #14 ftsort.fut:37:1-38:26\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137908 = sle64((int64_t) 0, tt_133062);
                                        bool y_137909 = slt64(tt_133062, j_m_i_132916);
                                        bool bounds_check_137910 = x_137908 && y_137909;
                                        bool index_certs_137911;
                                        
                                        if (!bounds_check_137910) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_133062, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:38:3-26\n   #14 ftsort.fut:37:1-38:26\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137906 = start_132966 + ss_133060;
                                        int64_t leq_arg1_137907 = ((int64_t *) mem_param_138485.mem)[slice_137906];
                                        int64_t slice_137912 = stride_132893 + tt_133062;
                                        int64_t slice_137913 = start_132966 + slice_137912;
                                        int64_t leq_arg0_137914 = ((int64_t *) mem_param_138485.mem)[slice_137913];
                                        bool zlze_res_137915 = sle64(leq_arg0_137914, leq_arg1_137907);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        
                                        if (zlze_res_137915) {
                                            int64_t tmp_137918 = add64((int64_t) 1, tt_133062);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = ss_133060;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tmp_137918;
                                        } else {
                                            int64_t tmp_137919 = add64((int64_t) 1, ss_133060);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = tmp_137919;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tt_133062;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = tt_133063;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = (int64_t) 0;
                                    } else {
                                        int64_t m_133102 = sdiv64(count_133064, (int64_t) 2);
                                        int64_t n_133103 = sub64(count_133064, m_133102);
                                        bool cond_133104 = n_133103 == (int64_t) 0;
                                        int64_t zgze_lhs_133105 = add64(ss_133060, m_133102);
                                        bool cond_f_res_133106 = sle64(ss_133061, zgze_lhs_133105);
                                        bool x_133107 = !cond_133104;
                                        bool y_133108 = cond_f_res_133106 && x_133107;
                                        bool cond_133109 = cond_133104 || y_133108;
                                        bool leq_y_x_133110;
                                        
                                        if (cond_133109) {
                                            leq_y_x_133110 = 1;
                                        } else {
                                            bool x_133111 = sle64((int64_t) 0, zgze_lhs_133105);
                                            bool y_133112 = slt64(zgze_lhs_133105, stride_132893);
                                            bool bounds_check_133113 = x_133111 && y_133112;
                                            bool index_certs_133114;
                                            
                                            if (!bounds_check_133113) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_133105, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:38:3-26\n   #14 ftsort.fut:37:1-38:26\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_133117 = add64(tt_133062, n_133103);
                                            int64_t leq_arg0_133118 = sub64(zm_lhs_133117, (int64_t) 1);
                                            bool x_133119 = sle64((int64_t) 0, leq_arg0_133118);
                                            bool y_133120 = slt64(leq_arg0_133118, j_m_i_132916);
                                            bool bounds_check_133121 = x_133119 && y_133120;
                                            bool index_certs_133122;
                                            
                                            if (!bounds_check_133121) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_133118, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:38:3-26\n   #14 ftsort.fut:37:1-38:26\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_133115 = start_132966 + zgze_lhs_133105;
                                            int64_t leq_arg1_133116 = ((int64_t *) mem_param_138485.mem)[slice_133115];
                                            int64_t slice_133123 = stride_132893 + leq_arg0_133118;
                                            int64_t slice_133124 = start_132966 + slice_133123;
                                            int64_t leq_arg0_133125 = ((int64_t *) mem_param_138485.mem)[slice_133124];
                                            bool zlze_res_133126 = sle64(leq_arg0_133125, leq_arg1_133116);
                                            
                                            leq_y_x_133110 = zlze_res_133126;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                        
                                        if (leq_y_x_133110) {
                                            int64_t tmp_137920 = add64(tt_133062, n_133103);
                                            int64_t tmp_137921 = sub64(count_133064, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tmp_137920;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tt_133063;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = tmp_137921;
                                        } else {
                                            int64_t tmp_133132 = add64(tt_133062, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tt_133062;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tmp_133132;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = count_133064;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = ss_133060;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                    }
                                    defunc_0_lifted_step_res_f_res_133074 = defunc_0_lifted_step_res_f_res_f_res_133080;
                                    defunc_0_lifted_step_res_f_res_133075 = defunc_0_lifted_step_res_f_res_f_res_133081;
                                    defunc_0_lifted_step_res_f_res_133076 = defunc_0_lifted_step_res_f_res_f_res_133082;
                                    defunc_0_lifted_step_res_f_res_133077 = defunc_0_lifted_step_res_f_res_f_res_133083;
                                }
                                defunc_0_lifted_step_res_133067 = defunc_0_lifted_step_res_f_res_133074;
                                defunc_0_lifted_step_res_133068 = defunc_0_lifted_step_res_f_res_133075;
                                defunc_0_lifted_step_res_133069 = defunc_0_lifted_step_res_f_res_133076;
                                defunc_0_lifted_step_res_133070 = defunc_0_lifted_step_res_f_res_133077;
                            }
                            
                            int64_t loopres_133133;
                            int64_t loopres_133134;
                            int64_t loopres_133135;
                            int64_t loopres_133136;
                            int64_t loopres_133137;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_133133, &loopres_133134, &loopres_133135, &loopres_133136, &loopres_133137, defunc_0_lifted_step_res_133067, ss_133061, defunc_0_lifted_step_res_133068, defunc_0_lifted_step_res_133069, defunc_0_lifted_step_res_133070) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_133138 = slt64((int64_t) 0, loopres_133137);
                            bool loop_while_tmp_139315 = loop_cond_133138;
                            int64_t ss_tmp_139316 = loopres_133133;
                            int64_t ss_tmp_139317 = loopres_133134;
                            int64_t tt_tmp_139318 = loopres_133135;
                            int64_t tt_tmp_139319 = loopres_133136;
                            int64_t count_tmp_139320 = loopres_133137;
                            
                            loop_while_133059 = loop_while_tmp_139315;
                            ss_133060 = ss_tmp_139316;
                            ss_133061 = ss_tmp_139317;
                            tt_133062 = tt_tmp_139318;
                            tt_133063 = tt_tmp_139319;
                            count_133064 = count_tmp_139320;
                        }
                        defunc_0_split_count_res_133053 = loop_while_133059;
                        defunc_0_split_count_res_133054 = ss_133060;
                        defunc_0_split_count_res_133055 = ss_133061;
                        defunc_0_split_count_res_133056 = tt_133062;
                        defunc_0_split_count_res_133057 = tt_133063;
                        defunc_0_split_count_res_133058 = count_133064;
                        ((int64_t *) mem_138504)[i_138227] = defunc_0_split_count_res_133054;
                        ((int64_t *) mem_138506)[i_138227] = defunc_0_split_count_res_133056;
                    }
                    if (mem_138521_cached_sizze_139464 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139464, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138524_cached_sizze_139465 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138524, &mem_138524_cached_sizze_139465, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138234 = 0; i_138234 < num_blocks_132914; i_138234++) {
                        bool y_133144 = slt64(i_138234, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool index_certs_133146;
                        
                        if (!y_133144) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138234, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133147 = ((int64_t *) mem_138504)[i_138234];
                        int64_t defunc_0_f_res_133148 = ((int64_t *) mem_138506)[i_138234];
                        int64_t tmp_133149 = add64((int64_t) 1, i_138234);
                        bool x_133150 = sle64((int64_t) 0, tmp_133149);
                        bool y_133151 = slt64(tmp_133149, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool bounds_check_133152 = x_133150 && y_133151;
                        bool index_certs_133153;
                        
                        if (!bounds_check_133152) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_133149, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133154 = ((int64_t *) mem_138504)[tmp_133149];
                        int64_t defunc_0_f_res_133155 = ((int64_t *) mem_138506)[tmp_133149];
                        int64_t merge_sequential_arg2_133156 = add64(stride_132893, defunc_0_f_res_133148);
                        int64_t merge_sequential_arg2_133157 = add64(stride_132893, defunc_0_f_res_133155);
                        int64_t j_m_i_133158 = sub64(merge_sequential_arg2_133157, merge_sequential_arg2_133156);
                        bool empty_slice_133159 = j_m_i_133158 == (int64_t) 0;
                        int64_t m_133160 = sub64(j_m_i_133158, (int64_t) 1);
                        int64_t i_p_m_t_s_133161 = add64(merge_sequential_arg2_133156, m_133160);
                        bool zzero_leq_i_p_m_t_s_133162 = sle64((int64_t) 0, i_p_m_t_s_133161);
                        bool i_p_m_t_s_leq_w_133163 = slt64(i_p_m_t_s_133161, next_stride_132894);
                        bool zzero_lte_i_133164 = sle64((int64_t) 0, merge_sequential_arg2_133156);
                        bool i_lte_j_133165 = sle64(merge_sequential_arg2_133156, merge_sequential_arg2_133157);
                        bool y_133166 = i_p_m_t_s_leq_w_133163 && zzero_lte_i_133164;
                        bool y_133167 = zzero_leq_i_p_m_t_s_133162 && y_133166;
                        bool forwards_ok_133168 = i_lte_j_133165 && y_133167;
                        bool ok_or_empty_133169 = empty_slice_133159 || forwards_ok_133168;
                        bool index_certs_133170;
                        
                        if (!ok_or_empty_133169) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_133156, ":", (long long) merge_sequential_arg2_133157, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_133171 = sub64(defunc_0_f_res_133154, defunc_0_f_res_133147);
                        bool empty_slice_133172 = j_m_i_133171 == (int64_t) 0;
                        int64_t m_133173 = sub64(j_m_i_133171, (int64_t) 1);
                        int64_t i_p_m_t_s_133174 = add64(defunc_0_f_res_133147, m_133173);
                        bool zzero_leq_i_p_m_t_s_133175 = sle64((int64_t) 0, i_p_m_t_s_133174);
                        bool i_p_m_t_s_leq_w_133176 = slt64(i_p_m_t_s_133174, next_stride_132894);
                        bool zzero_lte_i_133177 = sle64((int64_t) 0, defunc_0_f_res_133147);
                        bool i_lte_j_133178 = sle64(defunc_0_f_res_133147, defunc_0_f_res_133154);
                        bool y_133179 = i_p_m_t_s_leq_w_133176 && zzero_lte_i_133177;
                        bool y_133180 = zzero_leq_i_p_m_t_s_133175 && y_133179;
                        bool forwards_ok_133181 = i_lte_j_133178 && y_133180;
                        bool ok_or_empty_133182 = empty_slice_133172 || forwards_ok_133181;
                        bool index_certs_133183;
                        
                        if (!ok_or_empty_133182) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_133147, ":", (long long) defunc_0_f_res_133154, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:38:3-26\n   #11 ftsort.fut:37:1-38:26\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_133184 = slt64((int64_t) 0, j_m_i_133171);
                        int64_t dummy_133185;
                        int64_t dummy_133186;
                        
                        if (cond_133184) {
                            bool index_certs_137922;
                            
                            if (!cond_133184) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:140:54-57\n   #12 ftsort.fut:38:3-26\n   #13 ftsort.fut:37:1-38:26\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137923 = start_132966 + defunc_0_f_res_133147;
                            int64_t head_res_137924 = ((int64_t *) mem_param_138485.mem)[slice_137923];
                            int64_t head_res_137925 = ((int64_t *) mem_param_138488.mem)[slice_137923];
                            
                            dummy_133185 = head_res_137924;
                            dummy_133186 = head_res_137925;
                        } else {
                            bool y_133191 = slt64((int64_t) 0, j_m_i_133158);
                            bool index_certs_133192;
                            
                            if (!y_133191) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:140:54-57\n   #12 ftsort.fut:38:3-26\n   #13 ftsort.fut:37:1-38:26\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_133193 = start_132966 + merge_sequential_arg2_133156;
                            int64_t head_res_133194 = ((int64_t *) mem_param_138485.mem)[slice_133193];
                            int64_t head_res_133195 = ((int64_t *) mem_param_138488.mem)[slice_133193];
                            
                            dummy_133185 = head_res_133194;
                            dummy_133186 = head_res_133195;
                        }
                        for (int64_t nest_i_139323 = 0; nest_i_139323 < merge_block_sizze_132781; nest_i_139323++) {
                            ((int64_t *) mem_138521)[i_138234 * merge_block_sizze_132781 + nest_i_139323] = dummy_133185;
                        }
                        for (int64_t nest_i_139324 = 0; nest_i_139324 < merge_block_sizze_132781; nest_i_139324++) {
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + nest_i_139324] = dummy_133186;
                        }
                        
                        int64_t data_133198;
                        int64_t i_133202 = (int64_t) 0;
                        
                        for (int64_t k_133201 = 0; k_133201 < merge_block_sizze_132781; k_133201++) {
                            int64_t j_133205 = sub64(k_133201, i_133202);
                            bool cond_133206 = j_133205 == j_m_i_133158;
                            bool cond_133207;
                            
                            if (cond_133206) {
                                cond_133207 = 1;
                            } else {
                                bool cond_133208 = slt64(i_133202, j_m_i_133171);
                                bool cond_f_res_133209;
                                
                                if (cond_133208) {
                                    bool x_137926 = sle64((int64_t) 0, j_133205);
                                    bool y_137927 = slt64(j_133205, j_m_i_133158);
                                    bool bounds_check_137928 = x_137926 && y_137927;
                                    bool index_certs_137929;
                                    
                                    if (!bounds_check_137928) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:38:3-26\n   #12 ftsort.fut:37:1-38:26\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_137933 = sle64((int64_t) 0, i_133202);
                                    bool bounds_check_137934 = cond_133208 && x_137933;
                                    bool index_certs_137935;
                                    
                                    if (!bounds_check_137934) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:38:3-26\n   #12 ftsort.fut:37:1-38:26\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137930 = merge_sequential_arg2_133156 + j_133205;
                                    int64_t slice_137931 = start_132966 + slice_137930;
                                    int64_t leq_arg1_137932 = ((int64_t *) mem_param_138485.mem)[slice_137931];
                                    int64_t slice_137936 = defunc_0_f_res_133147 + i_133202;
                                    int64_t slice_137937 = start_132966 + slice_137936;
                                    int64_t leq_arg0_137938 = ((int64_t *) mem_param_138485.mem)[slice_137937];
                                    bool zlze_res_137939 = sle64(leq_arg0_137938, leq_arg1_137932);
                                    
                                    cond_f_res_133209 = zlze_res_137939;
                                } else {
                                    cond_f_res_133209 = 0;
                                }
                                cond_133207 = cond_f_res_133209;
                            }
                            
                            int64_t loopres_133224;
                            int64_t loopres_133225;
                            int64_t loopres_133226;
                            
                            if (cond_133207) {
                                bool x_137941 = sle64((int64_t) 0, i_133202);
                                bool y_137942 = slt64(i_133202, j_m_i_133171);
                                bool bounds_check_137943 = x_137941 && y_137942;
                                bool index_certs_137944;
                                
                                if (!bounds_check_137943) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:38:3-26\n   #12 ftsort.fut:37:1-38:26\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_137940 = add64((int64_t) 1, i_133202);
                                int64_t slice_137945 = defunc_0_f_res_133147 + i_133202;
                                int64_t slice_137946 = start_132966 + slice_137945;
                                int64_t tmp_137947 = ((int64_t *) mem_param_138485.mem)[slice_137946];
                                int64_t tmp_137948 = ((int64_t *) mem_param_138488.mem)[slice_137946];
                                
                                loopres_133224 = tmp_137940;
                                loopres_133225 = tmp_137947;
                                loopres_133226 = tmp_137948;
                            } else {
                                bool x_133236 = sle64((int64_t) 0, j_133205);
                                bool y_133237 = slt64(j_133205, j_m_i_133158);
                                bool bounds_check_133238 = x_133236 && y_133237;
                                bool index_certs_133239;
                                
                                if (!bounds_check_133238) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:38:3-26\n   #12 ftsort.fut:37:1-38:26\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_133240 = merge_sequential_arg2_133156 + j_133205;
                                int64_t slice_133241 = start_132966 + slice_133240;
                                int64_t tmp_133242 = ((int64_t *) mem_param_138485.mem)[slice_133241];
                                int64_t tmp_133243 = ((int64_t *) mem_param_138488.mem)[slice_133241];
                                
                                loopres_133224 = i_133202;
                                loopres_133225 = tmp_133242;
                                loopres_133226 = tmp_133243;
                            }
                            ((int64_t *) mem_138521)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133225;
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133226;
                            
                            int64_t i_tmp_139325 = loopres_133224;
                            
                            i_133202 = i_tmp_139325;
                        }
                        data_133198 = i_133202;
                    }
                    if (memblock_alloc(ctx, &mem_138559, bytes_138520, "mem_138559")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138559.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138521, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_alloc(ctx, &mem_138563, bytes_138520, "mem_138563")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138563.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138524, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138559, "mem_138559") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138563, "mem_138563") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138491, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138494, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138583.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
                    return 1;
            }
            
            int64_t flat_dim_133250 = next_stride_132894 * num_merges_132898;
            
            if (memblock_alloc(ctx, &mem_138597, bytes_138490, "mem_138597")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138597.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138491, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            if (memblock_alloc(ctx, &mem_138601, bytes_138490, "mem_138601")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138601.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138494, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            
            bool loop_cond_133253 = slt64(next_stride_132894, flat_dim_132778);
            
            if (memblock_set(ctx, &mem_param_tmp_139299, &mem_138597, "mem_138597") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139300, &mem_138601, "mem_138601") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139301 = flat_dim_133250;
            bool loop_while_tmp_139302 = loop_cond_133253;
            int64_t stride_tmp_139305 = next_stride_132894;
            
            if (memblock_set(ctx, &mem_param_138485, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138488, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
                return 1;
            loop_dz2084Uz2082U_132889 = loop_dz2084Uz2082U_tmp_139301;
            loop_while_132890 = loop_while_tmp_139302;
            stride_132893 = stride_tmp_139305;
        }
        if (memblock_set(ctx, &ext_mem_138608, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138607, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        data_132884 = loop_dz2084Uz2082U_132889;
        data_132885 = loop_while_132890;
        data_132888 = stride_132893;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        
        bool empty_slice_133254 = n_85878 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_133255 = sle64((int64_t) 0, zs_lhs_132762);
        bool i_p_m_t_s_leq_w_133256 = slt64(zs_lhs_132762, data_132884);
        bool y_133257 = zzero_leq_i_p_m_t_s_133255 && i_p_m_t_s_leq_w_133256;
        bool ok_or_empty_133258 = empty_slice_133254 || y_133257;
        bool index_certs_133259;
        
        if (!ok_or_empty_133258) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_85878, "] out of bounds for array of shape [", (long long) data_132884, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftbasics.fut:140:54-57\n   #5  ftsort.fut:38:3-26\n   #6  ftsort.fut:37:1-38:26\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138611, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138613, bytes_138405, "mem_138613")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138615, bytes_138405, "mem_138615")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138248 = 0; i_138248 < n_85878; i_138248++) {
        int64_t eta_p_133263 = ((int64_t *) ext_mem_138611.mem)[i_138248];
        bool x_133264 = sle64((int64_t) 0, eta_p_133263);
        bool y_133265 = slt64(eta_p_133263, n_85878);
        bool bounds_check_133266 = x_133264 && y_133265;
        bool index_certs_133267;
        
        if (!bounds_check_133266) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133263, "] out of bounds for array of shape [", (long long) n_85878, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:38:3-26\n   #5  ftsort.fut:37:1-38:26\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133268 = ((int64_t *) ext_mem_138404.mem)[eta_p_133263];
        int64_t lifted_lambda_res_133269 = ((int64_t *) xs_mem_138403.mem)[eta_p_133263];
        
        ((int64_t *) mem_138613.mem)[i_138248] = lifted_lambda_res_133268;
        ((int64_t *) mem_138615.mem)[i_138248] = lifted_lambda_res_133269;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138613, "mem_138613") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138615, "mem_138615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139454, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139455, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138409);
        free(mem_138412);
        free(mem_138422);
        free(mem_138424);
        free(mem_138491);
        free(mem_138494);
        free(mem_138504);
        free(mem_138506);
        free(mem_138521);
        free(mem_138524);
        if (memblock_unref(ctx, &mem_138615, "mem_138615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138613, "mem_138613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138601, "mem_138601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138597, "mem_138597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138563, "mem_138563") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138559, "mem_138559") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138568, "mem_138568") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138566, "mem_138566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138608, "ext_mem_138608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_139466, struct memblock *mem_out_p_139467, struct memblock xs_mem_138403, int64_t n_81191, int64_t incr_81192)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138409_cached_sizze_139468 = 0;
    unsigned char *mem_138409 = NULL;
    int64_t mem_138412_cached_sizze_139469 = 0;
    unsigned char *mem_138412 = NULL;
    int64_t mem_138422_cached_sizze_139470 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139471 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138491_cached_sizze_139472 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138494_cached_sizze_139473 = 0;
    unsigned char *mem_138494 = NULL;
    int64_t mem_138504_cached_sizze_139474 = 0;
    unsigned char *mem_138504 = NULL;
    int64_t mem_138506_cached_sizze_139475 = 0;
    unsigned char *mem_138506 = NULL;
    int64_t mem_138521_cached_sizze_139476 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138524_cached_sizze_139477 = 0;
    unsigned char *mem_138524 = NULL;
    struct memblock mem_138615;
    
    mem_138615.references = NULL;
    
    struct memblock mem_138613;
    
    mem_138613.references = NULL;
    
    struct memblock mem_param_tmp_139300;
    
    mem_param_tmp_139300.references = NULL;
    
    struct memblock mem_param_tmp_139299;
    
    mem_param_tmp_139299.references = NULL;
    
    struct memblock mem_138601;
    
    mem_138601.references = NULL;
    
    struct memblock mem_138597;
    
    mem_138597.references = NULL;
    
    struct memblock mem_138563;
    
    mem_138563.references = NULL;
    
    struct memblock mem_138559;
    
    mem_138559.references = NULL;
    
    struct memblock mem_138568;
    
    mem_138568.references = NULL;
    
    struct memblock mem_138566;
    
    mem_138566.references = NULL;
    
    struct memblock ext_mem_138583;
    
    ext_mem_138583.references = NULL;
    
    struct memblock ext_mem_138586;
    
    ext_mem_138586.references = NULL;
    
    struct memblock mem_param_138488;
    
    mem_param_138488.references = NULL;
    
    struct memblock mem_param_138485;
    
    mem_param_138485.references = NULL;
    
    struct memblock ext_mem_138607;
    
    ext_mem_138607.references = NULL;
    
    struct memblock ext_mem_138608;
    
    ext_mem_138608.references = NULL;
    
    struct memblock mem_138481;
    
    mem_138481.references = NULL;
    
    struct memblock mem_138477;
    
    mem_138477.references = NULL;
    
    struct memblock ext_mem_138611;
    
    ext_mem_138611.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_81191;
    bool cond_132761 = sle64(n_81191, (int64_t) 1);
    int64_t zs_lhs_132762 = sub64(n_81191, (int64_t) 1);
    int64_t zp_rhs_132763 = sdiv_safe64(zs_lhs_132762, (int64_t) 20);
    int64_t min_num_blocks_132764 = add64((int64_t) 1, zp_rhs_132763);
    bool loop_cond_132765 = slt64((int64_t) 1, min_num_blocks_132764);
    bool smallest_pow_2_geq_than_res_132766;
    int64_t smallest_pow_2_geq_than_res_132767;
    bool loop_while_132768;
    int64_t x_132769;
    
    loop_while_132768 = loop_cond_132765;
    x_132769 = (int64_t) 1;
    while (loop_while_132768) {
        int64_t loopres_132770 = mul64((int64_t) 2, x_132769);
        bool loop_cond_132771 = slt64(loopres_132770, min_num_blocks_132764);
        bool loop_while_tmp_139283 = loop_cond_132771;
        int64_t x_tmp_139284 = loopres_132770;
        
        loop_while_132768 = loop_while_tmp_139283;
        x_132769 = x_tmp_139284;
    }
    smallest_pow_2_geq_than_res_132766 = loop_while_132768;
    smallest_pow_2_geq_than_res_132767 = x_132769;
    
    bool zzero_132772 = smallest_pow_2_geq_than_res_132767 == (int64_t) 0;
    bool nonzzero_132773 = !zzero_132772;
    bool protect_assert_disj_132774 = cond_132761 || nonzzero_132773;
    bool nonzzero_cert_132775;
    
    if (!protect_assert_disj_132774) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:32:3-27\n   #5  ftsort.fut:31:1-32:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_132776 = sdiv_safe64(zs_lhs_132762, smallest_pow_2_geq_than_res_132767);
    int64_t block_sizze_132777 = add64((int64_t) 1, zp_rhs_132776);
    bool y_132782 = slt64((int64_t) 0, n_81191);
    bool protect_assert_disj_139017 = cond_132761 || y_132782;
    bool index_certs_132783;
    
    if (!protect_assert_disj_139017) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) n_81191, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:32:3-27\n   #5  ftsort.fut:31:1-32:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132796 = slt64(smallest_pow_2_geq_than_res_132767, (int64_t) 0);
    bool valid_132797 = !bounds_invalid_upwards_132796;
    bool protect_assert_disj_139025 = cond_132761 || valid_132797;
    bool range_valid_c_132798;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_132767, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:140:54-57\n   #6  ftsort.fut:32:3-27\n   #7  ftsort.fut:31:1-32:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_132800 = slt64(block_sizze_132777, (int64_t) 0);
    bool valid_132801 = !bounds_invalid_upwards_132800;
    bool protect_assert_disj_139027 = cond_132761 || valid_132801;
    bool range_valid_c_132802;
    
    if (!protect_assert_disj_139027) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_132777, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_132804 = sle64(block_sizze_132777, (int64_t) 1);
    int64_t tmp_132805 = sub64(block_sizze_132777, (int64_t) 2);
    bool bounds_invalid_upwards_132806 = slt64(tmp_132805, (int64_t) 0);
    bool valid_132808 = !bounds_invalid_upwards_132806;
    bool protect_assert_disj_132809 = cond_132804 || valid_132808;
    bool protect_assert_disj_139029 = cond_132761 || protect_assert_disj_132809;
    bool range_valid_c_132810;
    
    if (!protect_assert_disj_139029) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_132805, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138614 = (int64_t) 2 * n_81191;
    
    if (futrts_indicesWithIncrement_8973(ctx, &ext_mem_138404, xs_mem_138403, n_81191, incr_81192) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139285 = 0; i_139285 < n_81191; i_139285++) {
        int64_t x_139286 = (int64_t) 0 + i_139285 * (int64_t) 1;
        
        ((int64_t *) mem_138406.mem)[i_139285] = x_139286;
    }
    
    int64_t flat_dim_132778 = smallest_pow_2_geq_than_res_132767 * block_sizze_132777;
    bool x_139012 = !cond_132761;
    int64_t greatest_divisor_leq_than_arg1_132780 = mul64((int64_t) 2, block_sizze_132777);
    int64_t merge_block_sizze_132781;
    
    if (x_139012) {
        int64_t x_139014;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139014, (int64_t) 8, greatest_divisor_leq_than_arg1_132780) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_132781 = x_139014;
    } else {
        merge_block_sizze_132781 = (int64_t) 0;
    }
    
    int16_t reduce_arg1_132784;
    
    if (x_139012) {
        int16_t x_139018 = ((int16_t *) xs_mem_138403.mem)[(int64_t) 0];
        
        reduce_arg1_132784 = x_139018;
    } else {
        reduce_arg1_132784 = (int16_t) 0;
    }
    
    int16_t defunc_0_reduce_res_137955;
    int64_t defunc_0_reduce_res_137956;
    
    if (x_139012) {
        int16_t x_139020;
        int64_t x_139021;
        int16_t redout_138206;
        int64_t redout_138207;
        
        redout_138206 = reduce_arg1_132784;
        redout_138207 = (int64_t) 0;
        for (int64_t i_138208 = 0; i_138208 < n_81191; i_138208++) {
            int16_t x_132787 = ((int16_t *) xs_mem_138403.mem)[i_138208];
            bool zlze_res_132793 = sle16(redout_138206, x_132787);
            int16_t defunc_0_op_res_132794;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132794 = x_132787;
            } else {
                defunc_0_op_res_132794 = redout_138206;
            }
            
            int64_t defunc_0_op_res_132795;
            
            if (zlze_res_132793) {
                defunc_0_op_res_132795 = i_138208;
            } else {
                defunc_0_op_res_132795 = redout_138207;
            }
            
            int16_t redout_tmp_139287 = defunc_0_op_res_132794;
            int64_t redout_tmp_139288 = defunc_0_op_res_132795;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
        }
        x_139020 = redout_138206;
        x_139021 = redout_138207;
        defunc_0_reduce_res_137955 = x_139020;
        defunc_0_reduce_res_137956 = x_139021;
    } else {
        defunc_0_reduce_res_137955 = (int16_t) 0;
        defunc_0_reduce_res_137956 = (int64_t) 0;
    }
    
    int64_t distance_132807 = add64((int64_t) 1, tmp_132805);
    int64_t binop_x_138407 = (int64_t) 2 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138408 = block_sizze_132777 * binop_x_138407;
    int64_t binop_x_138410 = (int64_t) 8 * smallest_pow_2_geq_than_res_132767;
    int64_t bytes_138411 = block_sizze_132777 * binop_x_138410;
    int64_t bytes_138423 = (int64_t) 8 * block_sizze_132777;
    bool loop_cond_132881 = slt64(block_sizze_132777, flat_dim_132778);
    bool zzero_132882 = merge_block_sizze_132781 == (int64_t) 0;
    bool nonzzero_132883 = !zzero_132882;
    
    if (cond_132761) {
        if (memblock_set(ctx, &ext_mem_138611, &mem_138406, "mem_138406") != 0)
            return 1;
    } else {
        if (mem_138409_cached_sizze_139468 < bytes_138408) {
            err = lexical_realloc(ctx, &mem_138409, &mem_138409_cached_sizze_139468, bytes_138408);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138412_cached_sizze_139469 < bytes_138411) {
            err = lexical_realloc(ctx, &mem_138412, &mem_138412_cached_sizze_139469, bytes_138411);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138422_cached_sizze_139470 < greatest_divisor_leq_than_arg1_132780) {
            err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139470, greatest_divisor_leq_than_arg1_132780);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138424_cached_sizze_139471 < bytes_138423) {
            err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139471, bytes_138423);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138220 = 0; i_138220 < smallest_pow_2_geq_than_res_132767; i_138220++) {
            int64_t zp_lhs_132814 = mul64(block_sizze_132777, i_138220);
            
            for (int64_t i_138213 = 0; i_138213 < block_sizze_132777; i_138213++) {
                int64_t k_132818 = add64(zp_lhs_132814, i_138213);
                bool cond_132819 = slt64(k_132818, n_81191);
                int16_t lifted_lambda_res_132820;
                int64_t lifted_lambda_res_132821;
                
                if (cond_132819) {
                    bool x_137808 = sle64((int64_t) 0, k_132818);
                    bool bounds_check_137809 = cond_132819 && x_137808;
                    bool index_certs_137810;
                    
                    if (!bounds_check_137809) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_132818, "] out of bounds for array of shape [", (long long) n_81191, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:244:40-246:44\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t lifted_lambda_res_t_res_137811 = ((int16_t *) xs_mem_138403.mem)[k_132818];
                    
                    lifted_lambda_res_132820 = lifted_lambda_res_t_res_137811;
                    lifted_lambda_res_132821 = k_132818;
                } else {
                    lifted_lambda_res_132820 = defunc_0_reduce_res_137955;
                    lifted_lambda_res_132821 = defunc_0_reduce_res_137956;
                }
                ((int16_t *) mem_138422)[i_138213] = lifted_lambda_res_132820;
                ((int64_t *) mem_138424)[i_138213] = lifted_lambda_res_132821;
            }
            if (!cond_132804) {
                for (int64_t i_132830 = 0; i_132830 < distance_132807; i_132830++) {
                    int64_t gt_arg1_132833 = add64((int64_t) 1, i_132830);
                    bool x_132834 = sle64((int64_t) 0, gt_arg1_132833);
                    bool y_132835 = slt64(gt_arg1_132833, block_sizze_132777);
                    bool bounds_check_132836 = x_132834 && y_132835;
                    bool index_certs_132837;
                    
                    if (!bounds_check_132836) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_132833, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_132839 = slt64(i_132830, block_sizze_132777);
                    bool index_certs_132840;
                    
                    if (!y_132839) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_132830, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t gt_arg1_132838 = ((int16_t *) mem_138422)[gt_arg1_132833];
                    int16_t gt_arg0_132841 = ((int16_t *) mem_138422)[i_132830];
                    bool zlze_res_132842 = sle16(gt_arg0_132841, gt_arg1_132838);
                    bool defunc_0_lifted_gt_res_132843 = !zlze_res_132842;
                    bool s_132844;
                    int64_t s_132847;
                    bool loop_while_132848;
                    int64_t j_132851;
                    
                    loop_while_132848 = defunc_0_lifted_gt_res_132843;
                    j_132851 = i_132830;
                    while (loop_while_132848) {
                        bool x_132852 = sle64((int64_t) 0, j_132851);
                        bool y_132853 = slt64(j_132851, block_sizze_132777);
                        bool bounds_check_132854 = x_132852 && y_132853;
                        bool index_certs_132855;
                        
                        if (!bounds_check_132854) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_132851, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_132858 = add64((int64_t) 1, j_132851);
                        bool x_132859 = sle64((int64_t) 0, copy_arg0_132858);
                        bool y_132860 = slt64(copy_arg0_132858, block_sizze_132777);
                        bool bounds_check_132861 = x_132859 && y_132860;
                        bool index_certs_132862;
                        
                        if (!bounds_check_132861) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_132858, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int16_t copy_arg0_132856 = ((int16_t *) mem_138422)[j_132851];
                        int64_t copy_arg0_132857 = ((int64_t *) mem_138424)[j_132851];
                        int16_t copy_arg0_132863 = ((int16_t *) mem_138422)[copy_arg0_132858];
                        int64_t copy_arg0_132864 = ((int64_t *) mem_138424)[copy_arg0_132858];
                        
                        ((int16_t *) mem_138422)[j_132851] = copy_arg0_132863;
                        ((int64_t *) mem_138424)[j_132851] = copy_arg0_132864;
                        ((int16_t *) mem_138422)[copy_arg0_132858] = copy_arg0_132856;
                        ((int64_t *) mem_138424)[copy_arg0_132858] = copy_arg0_132857;
                        
                        int64_t tmp_132869 = sub64(j_132851, (int64_t) 1);
                        bool cond_132870 = sle64((int64_t) 0, tmp_132869);
                        bool loop_cond_132871;
                        
                        if (cond_132870) {
                            bool y_137813 = slt64(tmp_132869, block_sizze_132777);
                            bool bounds_check_137814 = cond_132870 && y_137813;
                            bool index_certs_137815;
                            
                            if (!bounds_check_137814) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132869, "] out of bounds for array of shape [", (long long) block_sizze_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:243:35-248:37\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int16_t gt_arg1_137812 = ((int16_t *) mem_138422)[j_132851];
                            int16_t gt_arg0_137816 = ((int16_t *) mem_138422)[tmp_132869];
                            bool zlze_res_137817 = sle16(gt_arg0_137816, gt_arg1_137812);
                            bool defunc_0_lifted_gt_res_137818 = !zlze_res_137817;
                            
                            loop_cond_132871 = defunc_0_lifted_gt_res_137818;
                        } else {
                            loop_cond_132871 = 0;
                        }
                        
                        bool loop_while_tmp_139295 = loop_cond_132871;
                        int64_t j_tmp_139298 = tmp_132869;
                        
                        loop_while_132848 = loop_while_tmp_139295;
                        j_132851 = j_tmp_139298;
                    }
                    s_132844 = loop_while_132848;
                    s_132847 = j_132851;
                }
            }
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_138409, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_138422, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138412, i_138220 * block_sizze_132777, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138424, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_132777});
        }
        if (memblock_alloc(ctx, &mem_138477, bytes_138408, "mem_138477")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 2, (uint16_t *) mem_138477.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint16_t *) mem_138409, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        if (memblock_alloc(ctx, &mem_138481, bytes_138411, "mem_138481")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138481.mem, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (uint64_t *) mem_138412, (int64_t) 0, (int64_t []) {block_sizze_132777, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_132767, block_sizze_132777});
        
        int64_t data_132884;
        bool data_132885;
        int64_t data_132888;
        int64_t loop_dz2084Uz2082U_132889;
        bool loop_while_132890;
        int64_t stride_132893;
        
        if (memblock_set(ctx, &mem_param_138485, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138488, &mem_138481, "mem_138481") != 0)
            return 1;
        loop_dz2084Uz2082U_132889 = flat_dim_132778;
        loop_while_132890 = loop_cond_132881;
        stride_132893 = block_sizze_132777;
        while (loop_while_132890) {
            int64_t next_stride_132894 = mul64((int64_t) 2, stride_132893);
            bool zzero_132895 = next_stride_132894 == (int64_t) 0;
            bool nonzzero_132896 = !zzero_132895;
            bool nonzzero_cert_132897;
            
            if (!nonzzero_132896) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:32:3-27\n   #5  ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_132898 = sdiv64(flat_dim_132778, next_stride_132894);
            bool bounds_invalid_upwards_132899 = slt64(num_merges_132898, (int64_t) 0);
            bool valid_132900 = !bounds_invalid_upwards_132899;
            bool range_valid_c_132901;
            
            if (!valid_132900) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_132898, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftbasics.fut:140:54-57\n   #6  ftsort.fut:32:3-27\n   #7  ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_132903 = sub64(next_stride_132894, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_132904 = sle64((int64_t) 0, m_132903);
            bool cond_132906 = slt64(next_stride_132894, (int64_t) 10);
            bool protect_assert_disj_132907 = nonzzero_132883 || cond_132906;
            bool nonzzero_cert_132908;
            
            if (!protect_assert_disj_132907) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_132909 = smod_safe64(next_stride_132894, merge_block_sizze_132781);
            bool num_blocks_132910 = zeze_lhs_132909 == (int64_t) 0;
            bool protect_assert_disj_132911 = cond_132906 || num_blocks_132910;
            bool assert_c_132912;
            
            if (!protect_assert_disj_132911) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_132914 = sdiv_safe64(next_stride_132894, merge_block_sizze_132781);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915 = add64((int64_t) 1, num_blocks_132914);
            int64_t j_m_i_132916 = sub64(next_stride_132894, stride_132893);
            int64_t flat_dim_132917 = merge_block_sizze_132781 * num_blocks_132914;
            bool bounds_invalid_upwards_132918 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, (int64_t) 0);
            bool zzero_lte_i_132919 = sle64((int64_t) 0, stride_132893);
            bool i_lte_j_132920 = sle64(stride_132893, next_stride_132894);
            bool empty_slice_132921 = stride_132893 == (int64_t) 0;
            int64_t m_132922 = sub64(stride_132893, (int64_t) 1);
            bool bounds_invalid_upwards_132923 = slt64(num_blocks_132914, (int64_t) 0);
            bool empty_slice_132924 = j_m_i_132916 == (int64_t) 0;
            int64_t m_132925 = sub64(j_m_i_132916, (int64_t) 1);
            bool cond_132926 = slt64((int64_t) 0, stride_132893);
            bool valid_132927 = !bounds_invalid_upwards_132918;
            bool zzero_leq_i_p_m_t_s_132928 = sle64((int64_t) 0, m_132922);
            bool i_p_m_t_s_leq_w_132929 = slt64(m_132922, next_stride_132894);
            bool valid_132930 = !bounds_invalid_upwards_132923;
            bool i_p_m_t_s_leq_w_132931 = slt64(m_132903, flat_dim_132917);
            int64_t i_p_m_t_s_132932 = add64(stride_132893, m_132925);
            bool y_132933 = slt64((int64_t) 0, j_m_i_132916);
            bool protect_assert_disj_132934 = cond_132906 || valid_132927;
            bool range_valid_c_132935;
            
            if (!protect_assert_disj_132934) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132936 = zzero_leq_i_p_m_t_s_132928 && i_p_m_t_s_leq_w_132929;
            bool protect_assert_disj_132937 = cond_132906 || valid_132930;
            bool range_valid_c_132938;
            
            if (!protect_assert_disj_132937) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_132914, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132939 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132931;
            bool zzero_leq_i_p_m_t_s_132940 = sle64((int64_t) 0, i_p_m_t_s_132932);
            bool i_p_m_t_s_leq_w_132941 = slt64(i_p_m_t_s_132932, next_stride_132894);
            bool forwards_ok_132942 = zzero_lte_i_132919 && y_132936;
            bool ok_or_empty_132943 = zzero_132895 || y_132939;
            bool y_132944 = zzero_lte_i_132919 && i_p_m_t_s_leq_w_132941;
            bool protect_assert_disj_132945 = cond_132926 || y_132933;
            bool ok_or_empty_132946 = empty_slice_132921 || forwards_ok_132942;
            bool protect_assert_disj_132947 = cond_132906 || ok_or_empty_132943;
            bool index_certs_132948;
            
            if (!protect_assert_disj_132947) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) flat_dim_132917, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_132949 = zzero_leq_i_p_m_t_s_132940 && y_132944;
            bool loop_not_taken_132950 = !cond_132906;
            bool protect_assert_disj_132951 = protect_assert_disj_132945 || loop_not_taken_132950;
            bool index_certs_132952;
            
            if (!protect_assert_disj_132951) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132953 = cond_132906 || ok_or_empty_132946;
            bool index_certs_132954;
            
            if (!protect_assert_disj_132953) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:32:3-27\n   #12 ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_132955 = i_lte_j_132920 && y_132949;
            bool protect_assert_disj_132956 = ok_or_empty_132946 || loop_not_taken_132950;
            bool index_certs_132957;
            
            if (!protect_assert_disj_132956) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_132893, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_132958 = empty_slice_132924 || forwards_ok_132955;
            bool protect_assert_disj_132959 = loop_not_taken_132950 || ok_or_empty_132958;
            bool index_certs_132960;
            
            if (!protect_assert_disj_132959) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_132961 = cond_132906 || ok_or_empty_132958;
            bool index_certs_132962;
            
            if (!protect_assert_disj_132961) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_132893, ":] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:32:3-27\n   #12 ftsort.fut:31:1-32:27\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138489 = (int64_t) 2 * num_merges_132898;
            int64_t bytes_138490 = next_stride_132894 * binop_x_138489;
            int64_t binop_x_138492 = (int64_t) 8 * num_merges_132898;
            int64_t bytes_138493 = next_stride_132894 * binop_x_138492;
            bool i_lte_j_132905 = sle64((int64_t) 0, next_stride_132894);
            
            if (mem_138491_cached_sizze_139472 < bytes_138490) {
                err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139472, bytes_138490);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138494_cached_sizze_139473 < bytes_138493) {
                err = lexical_realloc(ctx, &mem_138494, &mem_138494_cached_sizze_139473, bytes_138493);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138503 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915;
            int64_t binop_x_138519 = (int64_t) 2 * num_blocks_132914;
            int64_t bytes_138520 = merge_block_sizze_132781 * binop_x_138519;
            int64_t binop_x_138522 = (int64_t) 8 * num_blocks_132914;
            int64_t bytes_138523 = merge_block_sizze_132781 * binop_x_138522;
            int64_t bytes_138565 = (int64_t) 4 * stride_132893;
            int64_t bytes_138567 = (int64_t) 16 * stride_132893;
            
            for (int64_t i_138241 = 0; i_138241 < num_merges_132898; i_138241++) {
                int64_t start_132966 = mul64(next_stride_132894, i_138241);
                int64_t j_m_i_132967 = sub64(loop_dz2084Uz2082U_132889, start_132966);
                bool empty_slice_132968 = j_m_i_132967 == (int64_t) 0;
                int64_t m_132969 = sub64(j_m_i_132967, (int64_t) 1);
                int64_t i_p_m_t_s_132970 = add64(start_132966, m_132969);
                bool zzero_leq_i_p_m_t_s_132971 = sle64((int64_t) 0, i_p_m_t_s_132970);
                bool i_p_m_t_s_leq_w_132972 = slt64(i_p_m_t_s_132970, loop_dz2084Uz2082U_132889);
                bool zzero_lte_i_132973 = sle64((int64_t) 0, start_132966);
                bool i_lte_j_132974 = sle64(start_132966, loop_dz2084Uz2082U_132889);
                bool y_132975 = i_p_m_t_s_leq_w_132972 && zzero_lte_i_132973;
                bool y_132976 = zzero_leq_i_p_m_t_s_132971 && y_132975;
                bool forwards_ok_132977 = i_lte_j_132974 && y_132976;
                bool ok_or_empty_132978 = empty_slice_132968 || forwards_ok_132977;
                bool index_certs_132979;
                
                if (!ok_or_empty_132978) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_132966, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_132889, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_132980 = slt64(m_132903, j_m_i_132967);
                bool y_132981 = zzero_leq_i_p_m_t_s_132904 && i_p_m_t_s_leq_w_132980;
                bool forwards_ok_132982 = i_lte_j_132905 && y_132981;
                bool ok_or_empty_132983 = zzero_132895 || forwards_ok_132982;
                bool index_certs_132984;
                
                if (!ok_or_empty_132983) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_132894, "] out of bounds for array of shape [", (long long) j_m_i_132967, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftbasics.fut:140:54-57\n   #8  ftsort.fut:32:3-27\n   #9  ftsort.fut:31:1-32:27\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_132906) {
                    int16_t dummy_137844;
                    int64_t dummy_137845;
                    
                    if (cond_132926) {
                        int16_t head_res_137846 = ((int16_t *) mem_param_138485.mem)[start_132966];
                        int64_t head_res_137847 = ((int64_t *) mem_param_138488.mem)[start_132966];
                        
                        dummy_137844 = head_res_137846;
                        dummy_137845 = head_res_137847;
                    } else {
                        int64_t slice_137848 = stride_132893 + start_132966;
                        int16_t head_res_137849 = ((int16_t *) mem_param_138485.mem)[slice_137848];
                        int64_t head_res_137850 = ((int64_t *) mem_param_138488.mem)[slice_137848];
                        
                        dummy_137844 = head_res_137849;
                        dummy_137845 = head_res_137850;
                    }
                    if (memblock_alloc(ctx, &mem_138566, bytes_138565, "mem_138566")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139308 = 0; nest_i_139308 < next_stride_132894; nest_i_139308++) {
                        ((int16_t *) mem_138566.mem)[nest_i_139308] = dummy_137844;
                    }
                    if (memblock_alloc(ctx, &mem_138568, bytes_138567, "mem_138568")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139309 = 0; nest_i_139309 < next_stride_132894; nest_i_139309++) {
                        ((int64_t *) mem_138568.mem)[nest_i_139309] = dummy_137845;
                    }
                    
                    int64_t data_137853;
                    int64_t i_137857 = (int64_t) 0;
                    
                    for (int64_t k_137856 = 0; k_137856 < next_stride_132894; k_137856++) {
                        int64_t j_137860 = sub64(k_137856, i_137857);
                        bool cond_137861 = j_137860 == j_m_i_132916;
                        bool cond_137862;
                        
                        if (cond_137861) {
                            cond_137862 = 1;
                        } else {
                            bool cond_137863 = slt64(i_137857, stride_132893);
                            bool cond_f_res_137864;
                            
                            if (cond_137863) {
                                bool x_137865 = sle64((int64_t) 0, j_137860);
                                bool y_137866 = slt64(j_137860, j_m_i_132916);
                                bool bounds_check_137867 = x_137865 && y_137866;
                                bool index_certs_137868;
                                
                                if (!bounds_check_137867) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_137872 = sle64((int64_t) 0, i_137857);
                                bool bounds_check_137873 = cond_137863 && x_137872;
                                bool index_certs_137874;
                                
                                if (!bounds_check_137873) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137869 = stride_132893 + j_137860;
                                int64_t slice_137870 = start_132966 + slice_137869;
                                int16_t leq_arg1_137871 = ((int16_t *) mem_param_138485.mem)[slice_137870];
                                int64_t slice_137875 = start_132966 + i_137857;
                                int16_t leq_arg0_137876 = ((int16_t *) mem_param_138485.mem)[slice_137875];
                                bool zlze_res_137877 = sle16(leq_arg0_137876, leq_arg1_137871);
                                
                                cond_f_res_137864 = zlze_res_137877;
                            } else {
                                cond_f_res_137864 = 0;
                            }
                            cond_137862 = cond_f_res_137864;
                        }
                        
                        int64_t loopres_137878;
                        int16_t loopres_137879;
                        int64_t loopres_137880;
                        
                        if (cond_137862) {
                            bool x_137882 = sle64((int64_t) 0, i_137857);
                            bool y_137883 = slt64(i_137857, stride_132893);
                            bool bounds_check_137884 = x_137882 && y_137883;
                            bool index_certs_137885;
                            
                            if (!bounds_check_137884) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137857, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_137881 = add64((int64_t) 1, i_137857);
                            int64_t slice_137886 = start_132966 + i_137857;
                            int16_t tmp_137887 = ((int16_t *) mem_param_138485.mem)[slice_137886];
                            int64_t tmp_137888 = ((int64_t *) mem_param_138488.mem)[slice_137886];
                            
                            loopres_137878 = tmp_137881;
                            loopres_137879 = tmp_137887;
                            loopres_137880 = tmp_137888;
                        } else {
                            bool x_137889 = sle64((int64_t) 0, j_137860);
                            bool y_137890 = slt64(j_137860, j_m_i_132916);
                            bool bounds_check_137891 = x_137889 && y_137890;
                            bool index_certs_137892;
                            
                            if (!bounds_check_137891) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137860, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftbasics.fut:140:54-57\n   #9  ftsort.fut:32:3-27\n   #10 ftsort.fut:31:1-32:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137893 = stride_132893 + j_137860;
                            int64_t slice_137894 = start_132966 + slice_137893;
                            int16_t tmp_137895 = ((int16_t *) mem_param_138485.mem)[slice_137894];
                            int64_t tmp_137896 = ((int64_t *) mem_param_138488.mem)[slice_137894];
                            
                            loopres_137878 = i_137857;
                            loopres_137879 = tmp_137895;
                            loopres_137880 = tmp_137896;
                        }
                        ((int16_t *) mem_138566.mem)[k_137856] = loopres_137879;
                        ((int64_t *) mem_138568.mem)[k_137856] = loopres_137880;
                        
                        int64_t i_tmp_139310 = loopres_137878;
                        
                        i_137857 = i_tmp_139310;
                    }
                    data_137853 = i_137857;
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138566, "mem_138566") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138568, "mem_138568") != 0)
                        return 1;
                } else {
                    if (mem_138504_cached_sizze_139474 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138504, &mem_138504_cached_sizze_139474, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138506_cached_sizze_139475 < bytes_138503) {
                        err = lexical_realloc(ctx, &mem_138506, &mem_138506_cached_sizze_139475, bytes_138503);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138227 = 0; i_138227 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915; i_138227++) {
                        int64_t split_count_arg3_133046 = mul64(merge_block_sizze_132781, i_138227);
                        int64_t defunc_0_split_count_res_133047;
                        int64_t defunc_0_split_count_res_133048;
                        int64_t defunc_0_split_count_res_133049;
                        int64_t defunc_0_split_count_res_133050;
                        int64_t defunc_0_split_count_res_133051;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_133047, &defunc_0_split_count_res_133048, &defunc_0_split_count_res_133049, &defunc_0_split_count_res_133050, &defunc_0_split_count_res_133051, (int64_t) 0, stride_132893, (int64_t) 0, j_m_i_132916, split_count_arg3_133046) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_133052 = slt64((int64_t) 0, defunc_0_split_count_res_133051);
                        bool defunc_0_split_count_res_133053;
                        int64_t defunc_0_split_count_res_133054;
                        int64_t defunc_0_split_count_res_133055;
                        int64_t defunc_0_split_count_res_133056;
                        int64_t defunc_0_split_count_res_133057;
                        int64_t defunc_0_split_count_res_133058;
                        bool loop_while_133059;
                        int64_t ss_133060;
                        int64_t ss_133061;
                        int64_t tt_133062;
                        int64_t tt_133063;
                        int64_t count_133064;
                        
                        loop_while_133059 = loop_cond_133052;
                        ss_133060 = defunc_0_split_count_res_133047;
                        ss_133061 = defunc_0_split_count_res_133048;
                        tt_133062 = defunc_0_split_count_res_133049;
                        tt_133063 = defunc_0_split_count_res_133050;
                        count_133064 = defunc_0_split_count_res_133051;
                        while (loop_while_133059) {
                            int64_t zlze_lhs_133065 = sub64(ss_133061, ss_133060);
                            bool cond_133066 = sle64(zlze_lhs_133065, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_133067;
                            int64_t defunc_0_lifted_step_res_133068;
                            int64_t defunc_0_lifted_step_res_133069;
                            int64_t defunc_0_lifted_step_res_133070;
                            
                            if (cond_133066) {
                                int64_t tmp_137899 = add64(tt_133062, count_133064);
                                
                                defunc_0_lifted_step_res_133067 = ss_133060;
                                defunc_0_lifted_step_res_133068 = tmp_137899;
                                defunc_0_lifted_step_res_133069 = tt_133063;
                                defunc_0_lifted_step_res_133070 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_133072 = sub64(tt_133063, tt_133062);
                                bool cond_133073 = sle64(zlze_lhs_133072, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_133074;
                                int64_t defunc_0_lifted_step_res_f_res_133075;
                                int64_t defunc_0_lifted_step_res_f_res_133076;
                                int64_t defunc_0_lifted_step_res_f_res_133077;
                                
                                if (cond_133073) {
                                    int64_t tmp_137900 = add64(ss_133060, count_133064);
                                    
                                    defunc_0_lifted_step_res_f_res_133074 = tmp_137900;
                                    defunc_0_lifted_step_res_f_res_133075 = tt_133062;
                                    defunc_0_lifted_step_res_f_res_133076 = tt_133063;
                                    defunc_0_lifted_step_res_f_res_133077 = (int64_t) 0;
                                } else {
                                    bool cond_133079 = count_133064 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133080;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133081;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133082;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_133083;
                                    
                                    if (cond_133079) {
                                        bool x_137902 = sle64((int64_t) 0, ss_133060);
                                        bool y_137903 = slt64(ss_133060, stride_132893);
                                        bool bounds_check_137904 = x_137902 && y_137903;
                                        bool index_certs_137905;
                                        
                                        if (!bounds_check_137904) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_133060, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:32:3-27\n   #14 ftsort.fut:31:1-32:27\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137908 = sle64((int64_t) 0, tt_133062);
                                        bool y_137909 = slt64(tt_133062, j_m_i_132916);
                                        bool bounds_check_137910 = x_137908 && y_137909;
                                        bool index_certs_137911;
                                        
                                        if (!bounds_check_137910) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_133062, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:32:3-27\n   #14 ftsort.fut:31:1-32:27\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137906 = start_132966 + ss_133060;
                                        int16_t leq_arg1_137907 = ((int16_t *) mem_param_138485.mem)[slice_137906];
                                        int64_t slice_137912 = stride_132893 + tt_133062;
                                        int64_t slice_137913 = start_132966 + slice_137912;
                                        int16_t leq_arg0_137914 = ((int16_t *) mem_param_138485.mem)[slice_137913];
                                        bool zlze_res_137915 = sle16(leq_arg0_137914, leq_arg1_137907);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        
                                        if (zlze_res_137915) {
                                            int64_t tmp_137918 = add64((int64_t) 1, tt_133062);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = ss_133060;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tmp_137918;
                                        } else {
                                            int64_t tmp_137919 = add64((int64_t) 1, ss_133060);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137916 = tmp_137919;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_137917 = tt_133062;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = defunc_0_lifted_step_res_f_res_f_res_t_res_137916;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_t_res_137917;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = tt_133063;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = (int64_t) 0;
                                    } else {
                                        int64_t m_133102 = sdiv64(count_133064, (int64_t) 2);
                                        int64_t n_133103 = sub64(count_133064, m_133102);
                                        bool cond_133104 = n_133103 == (int64_t) 0;
                                        int64_t zgze_lhs_133105 = add64(ss_133060, m_133102);
                                        bool cond_f_res_133106 = sle64(ss_133061, zgze_lhs_133105);
                                        bool x_133107 = !cond_133104;
                                        bool y_133108 = cond_f_res_133106 && x_133107;
                                        bool cond_133109 = cond_133104 || y_133108;
                                        bool leq_y_x_133110;
                                        
                                        if (cond_133109) {
                                            leq_y_x_133110 = 1;
                                        } else {
                                            bool x_133111 = sle64((int64_t) 0, zgze_lhs_133105);
                                            bool y_133112 = slt64(zgze_lhs_133105, stride_132893);
                                            bool bounds_check_133113 = x_133111 && y_133112;
                                            bool index_certs_133114;
                                            
                                            if (!bounds_check_133113) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_133105, "] out of bounds for array of shape [", (long long) stride_132893, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:32:3-27\n   #14 ftsort.fut:31:1-32:27\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_133117 = add64(tt_133062, n_133103);
                                            int64_t leq_arg0_133118 = sub64(zm_lhs_133117, (int64_t) 1);
                                            bool x_133119 = sle64((int64_t) 0, leq_arg0_133118);
                                            bool y_133120 = slt64(leq_arg0_133118, j_m_i_132916);
                                            bool bounds_check_133121 = x_133119 && y_133120;
                                            bool index_certs_133122;
                                            
                                            if (!bounds_check_133121) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_133118, "] out of bounds for array of shape [", (long long) j_m_i_132916, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #10 lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftbasics.fut:140:54-57\n   #13 ftsort.fut:32:3-27\n   #14 ftsort.fut:31:1-32:27\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_133115 = start_132966 + zgze_lhs_133105;
                                            int16_t leq_arg1_133116 = ((int16_t *) mem_param_138485.mem)[slice_133115];
                                            int64_t slice_133123 = stride_132893 + leq_arg0_133118;
                                            int64_t slice_133124 = start_132966 + slice_133123;
                                            int16_t leq_arg0_133125 = ((int16_t *) mem_param_138485.mem)[slice_133124];
                                            bool zlze_res_133126 = sle16(leq_arg0_133125, leq_arg1_133116);
                                            
                                            leq_y_x_133110 = zlze_res_133126;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                        
                                        if (leq_y_x_133110) {
                                            int64_t tmp_137920 = add64(tt_133062, n_133103);
                                            int64_t tmp_137921 = sub64(count_133064, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tmp_137920;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tt_133063;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = tmp_137921;
                                        } else {
                                            int64_t tmp_133132 = add64(tt_133062, n_133103);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133127 = tt_133062;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133128 = tmp_133132;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_133129 = count_133064;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_133080 = ss_133060;
                                        defunc_0_lifted_step_res_f_res_f_res_133081 = defunc_0_lifted_step_res_f_res_f_res_f_res_133127;
                                        defunc_0_lifted_step_res_f_res_f_res_133082 = defunc_0_lifted_step_res_f_res_f_res_f_res_133128;
                                        defunc_0_lifted_step_res_f_res_f_res_133083 = defunc_0_lifted_step_res_f_res_f_res_f_res_133129;
                                    }
                                    defunc_0_lifted_step_res_f_res_133074 = defunc_0_lifted_step_res_f_res_f_res_133080;
                                    defunc_0_lifted_step_res_f_res_133075 = defunc_0_lifted_step_res_f_res_f_res_133081;
                                    defunc_0_lifted_step_res_f_res_133076 = defunc_0_lifted_step_res_f_res_f_res_133082;
                                    defunc_0_lifted_step_res_f_res_133077 = defunc_0_lifted_step_res_f_res_f_res_133083;
                                }
                                defunc_0_lifted_step_res_133067 = defunc_0_lifted_step_res_f_res_133074;
                                defunc_0_lifted_step_res_133068 = defunc_0_lifted_step_res_f_res_133075;
                                defunc_0_lifted_step_res_133069 = defunc_0_lifted_step_res_f_res_133076;
                                defunc_0_lifted_step_res_133070 = defunc_0_lifted_step_res_f_res_133077;
                            }
                            
                            int64_t loopres_133133;
                            int64_t loopres_133134;
                            int64_t loopres_133135;
                            int64_t loopres_133136;
                            int64_t loopres_133137;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_133133, &loopres_133134, &loopres_133135, &loopres_133136, &loopres_133137, defunc_0_lifted_step_res_133067, ss_133061, defunc_0_lifted_step_res_133068, defunc_0_lifted_step_res_133069, defunc_0_lifted_step_res_133070) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_133138 = slt64((int64_t) 0, loopres_133137);
                            bool loop_while_tmp_139315 = loop_cond_133138;
                            int64_t ss_tmp_139316 = loopres_133133;
                            int64_t ss_tmp_139317 = loopres_133134;
                            int64_t tt_tmp_139318 = loopres_133135;
                            int64_t tt_tmp_139319 = loopres_133136;
                            int64_t count_tmp_139320 = loopres_133137;
                            
                            loop_while_133059 = loop_while_tmp_139315;
                            ss_133060 = ss_tmp_139316;
                            ss_133061 = ss_tmp_139317;
                            tt_133062 = tt_tmp_139318;
                            tt_133063 = tt_tmp_139319;
                            count_133064 = count_tmp_139320;
                        }
                        defunc_0_split_count_res_133053 = loop_while_133059;
                        defunc_0_split_count_res_133054 = ss_133060;
                        defunc_0_split_count_res_133055 = ss_133061;
                        defunc_0_split_count_res_133056 = tt_133062;
                        defunc_0_split_count_res_133057 = tt_133063;
                        defunc_0_split_count_res_133058 = count_133064;
                        ((int64_t *) mem_138504)[i_138227] = defunc_0_split_count_res_133054;
                        ((int64_t *) mem_138506)[i_138227] = defunc_0_split_count_res_133056;
                    }
                    if (mem_138521_cached_sizze_139476 < bytes_138520) {
                        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139476, bytes_138520);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138524_cached_sizze_139477 < bytes_138523) {
                        err = lexical_realloc(ctx, &mem_138524, &mem_138524_cached_sizze_139477, bytes_138523);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138234 = 0; i_138234 < num_blocks_132914; i_138234++) {
                        bool y_133144 = slt64(i_138234, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool index_certs_133146;
                        
                        if (!y_133144) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138234, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133147 = ((int64_t *) mem_138504)[i_138234];
                        int64_t defunc_0_f_res_133148 = ((int64_t *) mem_138506)[i_138234];
                        int64_t tmp_133149 = add64((int64_t) 1, i_138234);
                        bool x_133150 = sle64((int64_t) 0, tmp_133149);
                        bool y_133151 = slt64(tmp_133149, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915);
                        bool bounds_check_133152 = x_133150 && y_133151;
                        bool index_certs_133153;
                        
                        if (!bounds_check_133152) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_133149, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_132915, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_133154 = ((int64_t *) mem_138504)[tmp_133149];
                        int64_t defunc_0_f_res_133155 = ((int64_t *) mem_138506)[tmp_133149];
                        int64_t merge_sequential_arg2_133156 = add64(stride_132893, defunc_0_f_res_133148);
                        int64_t merge_sequential_arg2_133157 = add64(stride_132893, defunc_0_f_res_133155);
                        int64_t j_m_i_133158 = sub64(merge_sequential_arg2_133157, merge_sequential_arg2_133156);
                        bool empty_slice_133159 = j_m_i_133158 == (int64_t) 0;
                        int64_t m_133160 = sub64(j_m_i_133158, (int64_t) 1);
                        int64_t i_p_m_t_s_133161 = add64(merge_sequential_arg2_133156, m_133160);
                        bool zzero_leq_i_p_m_t_s_133162 = sle64((int64_t) 0, i_p_m_t_s_133161);
                        bool i_p_m_t_s_leq_w_133163 = slt64(i_p_m_t_s_133161, next_stride_132894);
                        bool zzero_lte_i_133164 = sle64((int64_t) 0, merge_sequential_arg2_133156);
                        bool i_lte_j_133165 = sle64(merge_sequential_arg2_133156, merge_sequential_arg2_133157);
                        bool y_133166 = i_p_m_t_s_leq_w_133163 && zzero_lte_i_133164;
                        bool y_133167 = zzero_leq_i_p_m_t_s_133162 && y_133166;
                        bool forwards_ok_133168 = i_lte_j_133165 && y_133167;
                        bool ok_or_empty_133169 = empty_slice_133159 || forwards_ok_133168;
                        bool index_certs_133170;
                        
                        if (!ok_or_empty_133169) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_133156, ":", (long long) merge_sequential_arg2_133157, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_133171 = sub64(defunc_0_f_res_133154, defunc_0_f_res_133147);
                        bool empty_slice_133172 = j_m_i_133171 == (int64_t) 0;
                        int64_t m_133173 = sub64(j_m_i_133171, (int64_t) 1);
                        int64_t i_p_m_t_s_133174 = add64(defunc_0_f_res_133147, m_133173);
                        bool zzero_leq_i_p_m_t_s_133175 = sle64((int64_t) 0, i_p_m_t_s_133174);
                        bool i_p_m_t_s_leq_w_133176 = slt64(i_p_m_t_s_133174, next_stride_132894);
                        bool zzero_lte_i_133177 = sle64((int64_t) 0, defunc_0_f_res_133147);
                        bool i_lte_j_133178 = sle64(defunc_0_f_res_133147, defunc_0_f_res_133154);
                        bool y_133179 = i_p_m_t_s_leq_w_133176 && zzero_lte_i_133177;
                        bool y_133180 = zzero_leq_i_p_m_t_s_133175 && y_133179;
                        bool forwards_ok_133181 = i_lte_j_133178 && y_133180;
                        bool ok_or_empty_133182 = empty_slice_133172 || forwards_ok_133181;
                        bool index_certs_133183;
                        
                        if (!ok_or_empty_133182) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_133147, ":", (long long) defunc_0_f_res_133154, "] out of bounds for array of shape [", (long long) next_stride_132894, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftbasics.fut:140:54-57\n   #10 ftsort.fut:32:3-27\n   #11 ftsort.fut:31:1-32:27\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_133184 = slt64((int64_t) 0, j_m_i_133171);
                        int16_t dummy_133185;
                        int64_t dummy_133186;
                        
                        if (cond_133184) {
                            bool index_certs_137922;
                            
                            if (!cond_133184) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:140:54-57\n   #12 ftsort.fut:32:3-27\n   #13 ftsort.fut:31:1-32:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137923 = start_132966 + defunc_0_f_res_133147;
                            int16_t head_res_137924 = ((int16_t *) mem_param_138485.mem)[slice_137923];
                            int64_t head_res_137925 = ((int64_t *) mem_param_138488.mem)[slice_137923];
                            
                            dummy_133185 = head_res_137924;
                            dummy_133186 = head_res_137925;
                        } else {
                            bool y_133191 = slt64((int64_t) 0, j_m_i_133158);
                            bool index_certs_133192;
                            
                            if (!y_133191) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftbasics.fut:140:54-57\n   #12 ftsort.fut:32:3-27\n   #13 ftsort.fut:31:1-32:27\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_133193 = start_132966 + merge_sequential_arg2_133156;
                            int16_t head_res_133194 = ((int16_t *) mem_param_138485.mem)[slice_133193];
                            int64_t head_res_133195 = ((int64_t *) mem_param_138488.mem)[slice_133193];
                            
                            dummy_133185 = head_res_133194;
                            dummy_133186 = head_res_133195;
                        }
                        for (int64_t nest_i_139323 = 0; nest_i_139323 < merge_block_sizze_132781; nest_i_139323++) {
                            ((int16_t *) mem_138521)[i_138234 * merge_block_sizze_132781 + nest_i_139323] = dummy_133185;
                        }
                        for (int64_t nest_i_139324 = 0; nest_i_139324 < merge_block_sizze_132781; nest_i_139324++) {
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + nest_i_139324] = dummy_133186;
                        }
                        
                        int64_t data_133198;
                        int64_t i_133202 = (int64_t) 0;
                        
                        for (int64_t k_133201 = 0; k_133201 < merge_block_sizze_132781; k_133201++) {
                            int64_t j_133205 = sub64(k_133201, i_133202);
                            bool cond_133206 = j_133205 == j_m_i_133158;
                            bool cond_133207;
                            
                            if (cond_133206) {
                                cond_133207 = 1;
                            } else {
                                bool cond_133208 = slt64(i_133202, j_m_i_133171);
                                bool cond_f_res_133209;
                                
                                if (cond_133208) {
                                    bool x_137926 = sle64((int64_t) 0, j_133205);
                                    bool y_137927 = slt64(j_133205, j_m_i_133158);
                                    bool bounds_check_137928 = x_137926 && y_137927;
                                    bool index_certs_137929;
                                    
                                    if (!bounds_check_137928) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:32:3-27\n   #12 ftsort.fut:31:1-32:27\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_137933 = sle64((int64_t) 0, i_133202);
                                    bool bounds_check_137934 = cond_133208 && x_137933;
                                    bool index_certs_137935;
                                    
                                    if (!bounds_check_137934) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:32:3-27\n   #12 ftsort.fut:31:1-32:27\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137930 = merge_sequential_arg2_133156 + j_133205;
                                    int64_t slice_137931 = start_132966 + slice_137930;
                                    int16_t leq_arg1_137932 = ((int16_t *) mem_param_138485.mem)[slice_137931];
                                    int64_t slice_137936 = defunc_0_f_res_133147 + i_133202;
                                    int64_t slice_137937 = start_132966 + slice_137936;
                                    int16_t leq_arg0_137938 = ((int16_t *) mem_param_138485.mem)[slice_137937];
                                    bool zlze_res_137939 = sle16(leq_arg0_137938, leq_arg1_137932);
                                    
                                    cond_f_res_133209 = zlze_res_137939;
                                } else {
                                    cond_f_res_133209 = 0;
                                }
                                cond_133207 = cond_f_res_133209;
                            }
                            
                            int64_t loopres_133224;
                            int16_t loopres_133225;
                            int64_t loopres_133226;
                            
                            if (cond_133207) {
                                bool x_137941 = sle64((int64_t) 0, i_133202);
                                bool y_137942 = slt64(i_133202, j_m_i_133171);
                                bool bounds_check_137943 = x_137941 && y_137942;
                                bool index_certs_137944;
                                
                                if (!bounds_check_137943) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_133202, "] out of bounds for array of shape [", (long long) j_m_i_133171, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:32:3-27\n   #12 ftsort.fut:31:1-32:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_137940 = add64((int64_t) 1, i_133202);
                                int64_t slice_137945 = defunc_0_f_res_133147 + i_133202;
                                int64_t slice_137946 = start_132966 + slice_137945;
                                int16_t tmp_137947 = ((int16_t *) mem_param_138485.mem)[slice_137946];
                                int64_t tmp_137948 = ((int64_t *) mem_param_138488.mem)[slice_137946];
                                
                                loopres_133224 = tmp_137940;
                                loopres_133225 = tmp_137947;
                                loopres_133226 = tmp_137948;
                            } else {
                                bool x_133236 = sle64((int64_t) 0, j_133205);
                                bool y_133237 = slt64(j_133205, j_m_i_133158);
                                bool bounds_check_133238 = x_133236 && y_133237;
                                bool index_certs_133239;
                                
                                if (!bounds_check_133238) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_133205, "] out of bounds for array of shape [", (long long) j_m_i_133158, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:256:39-260:59\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftbasics.fut:140:54-57\n   #11 ftsort.fut:32:3-27\n   #12 ftsort.fut:31:1-32:27\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_133240 = merge_sequential_arg2_133156 + j_133205;
                                int64_t slice_133241 = start_132966 + slice_133240;
                                int16_t tmp_133242 = ((int16_t *) mem_param_138485.mem)[slice_133241];
                                int64_t tmp_133243 = ((int64_t *) mem_param_138488.mem)[slice_133241];
                                
                                loopres_133224 = i_133202;
                                loopres_133225 = tmp_133242;
                                loopres_133226 = tmp_133243;
                            }
                            ((int16_t *) mem_138521)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133225;
                            ((int64_t *) mem_138524)[i_138234 * merge_block_sizze_132781 + k_133201] = loopres_133226;
                            
                            int64_t i_tmp_139325 = loopres_133224;
                            
                            i_133202 = i_tmp_139325;
                        }
                        data_133198 = i_133202;
                    }
                    if (memblock_alloc(ctx, &mem_138559, bytes_138520, "mem_138559")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_2b(ctx, 2, (uint16_t *) mem_138559.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint16_t *) mem_138521, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_alloc(ctx, &mem_138563, bytes_138523, "mem_138563")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138563.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (uint64_t *) mem_138524, (int64_t) 0, (int64_t []) {merge_block_sizze_132781, (int64_t) 1}, (int64_t []) {num_blocks_132914, merge_block_sizze_132781});
                    if (memblock_set(ctx, &ext_mem_138586, &mem_138559, "mem_138559") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138583, &mem_138563, "mem_138563") != 0)
                        return 1;
                }
                lmad_copy_2b(ctx, 1, (uint16_t *) mem_138491, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_138586.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138494, i_138241 * next_stride_132894, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138583.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_132894});
                if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
                    return 1;
            }
            
            int64_t flat_dim_133250 = next_stride_132894 * num_merges_132898;
            
            if (memblock_alloc(ctx, &mem_138597, bytes_138490, "mem_138597")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_2b(ctx, 2, (uint16_t *) mem_138597.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint16_t *) mem_138491, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            if (memblock_alloc(ctx, &mem_138601, bytes_138493, "mem_138601")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138601.mem, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (uint64_t *) mem_138494, (int64_t) 0, (int64_t []) {next_stride_132894, (int64_t) 1}, (int64_t []) {num_merges_132898, next_stride_132894});
            
            bool loop_cond_133253 = slt64(next_stride_132894, flat_dim_132778);
            
            if (memblock_set(ctx, &mem_param_tmp_139299, &mem_138597, "mem_138597") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139300, &mem_138601, "mem_138601") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139301 = flat_dim_133250;
            bool loop_while_tmp_139302 = loop_cond_133253;
            int64_t stride_tmp_139305 = next_stride_132894;
            
            if (memblock_set(ctx, &mem_param_138485, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138488, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
                return 1;
            loop_dz2084Uz2082U_132889 = loop_dz2084Uz2082U_tmp_139301;
            loop_while_132890 = loop_while_tmp_139302;
            stride_132893 = stride_tmp_139305;
        }
        if (memblock_set(ctx, &ext_mem_138608, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138607, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        data_132884 = loop_dz2084Uz2082U_132889;
        data_132885 = loop_while_132890;
        data_132888 = stride_132893;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        
        bool empty_slice_133254 = n_81191 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_133255 = sle64((int64_t) 0, zs_lhs_132762);
        bool i_p_m_t_s_leq_w_133256 = slt64(zs_lhs_132762, data_132884);
        bool y_133257 = zzero_leq_i_p_m_t_s_133255 && i_p_m_t_s_leq_w_133256;
        bool ok_or_empty_133258 = empty_slice_133254 || y_133257;
        bool index_certs_133259;
        
        if (!ok_or_empty_133258) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) n_81191, "] out of bounds for array of shape [", (long long) data_132884, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftbasics.fut:140:54-57\n   #5  ftsort.fut:32:3-27\n   #6  ftsort.fut:31:1-32:27\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138611, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138613, bytes_138405, "mem_138613")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138615, bytes_138614, "mem_138615")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138248 = 0; i_138248 < n_81191; i_138248++) {
        int64_t eta_p_133263 = ((int64_t *) ext_mem_138611.mem)[i_138248];
        bool x_133264 = sle64((int64_t) 0, eta_p_133263);
        bool y_133265 = slt64(eta_p_133263, n_81191);
        bool bounds_check_133266 = x_133264 && y_133265;
        bool index_certs_133267;
        
        if (!bounds_check_133266) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133263, "] out of bounds for array of shape [", (long long) n_81191, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  ftbasics.fut:140:54-57\n   #4  ftsort.fut:32:3-27\n   #5  ftsort.fut:31:1-32:27\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133268 = ((int64_t *) ext_mem_138404.mem)[eta_p_133263];
        int16_t lifted_lambda_res_133269 = ((int16_t *) xs_mem_138403.mem)[eta_p_133263];
        
        ((int64_t *) mem_138613.mem)[i_138248] = lifted_lambda_res_133268;
        ((int16_t *) mem_138615.mem)[i_138248] = lifted_lambda_res_133269;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138613, "mem_138613") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138615, "mem_138615") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139466, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139467, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138409);
        free(mem_138412);
        free(mem_138422);
        free(mem_138424);
        free(mem_138491);
        free(mem_138494);
        free(mem_138504);
        free(mem_138506);
        free(mem_138521);
        free(mem_138524);
        if (memblock_unref(ctx, &mem_138615, "mem_138615") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138613, "mem_138613") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139300, "mem_param_tmp_139300") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139299, "mem_param_tmp_139299") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138601, "mem_138601") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138597, "mem_138597") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138563, "mem_138563") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138559, "mem_138559") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138568, "mem_138568") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138566, "mem_138566") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138583, "ext_mem_138583") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138586, "ext_mem_138586") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138488, "mem_param_138488") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138485, "mem_param_138485") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138607, "ext_mem_138607") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138608, "ext_mem_138608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138481, "mem_138481") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138477, "mem_138477") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138611, "ext_mem_138611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_double(struct futhark_context *ctx, struct memblock *mem_out_p_139478, struct memblock *mem_out_p_139479, struct memblock *mem_out_p_139480, int64_t *out_prim_out_139481, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_123952, int64_t nb_123953, int64_t window_sizze_123954, int64_t threads_123955)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138421_cached_sizze_139482 = 0;
    unsigned char *mem_138421 = NULL;
    int64_t mem_138423_cached_sizze_139483 = 0;
    unsigned char *mem_138423 = NULL;
    int64_t mem_138438_cached_sizze_139484 = 0;
    unsigned char *mem_138438 = NULL;
    int64_t mem_138441_cached_sizze_139485 = 0;
    unsigned char *mem_138441 = NULL;
    int64_t mem_138444_cached_sizze_139486 = 0;
    unsigned char *mem_138444 = NULL;
    int64_t mem_138447_cached_sizze_139487 = 0;
    unsigned char *mem_138447 = NULL;
    int64_t mem_138474_cached_sizze_139488 = 0;
    unsigned char *mem_138474 = NULL;
    int64_t mem_138477_cached_sizze_139489 = 0;
    unsigned char *mem_138477 = NULL;
    int64_t mem_138487_cached_sizze_139490 = 0;
    unsigned char *mem_138487 = NULL;
    int64_t mem_138489_cached_sizze_139491 = 0;
    unsigned char *mem_138489 = NULL;
    int64_t mem_138556_cached_sizze_139492 = 0;
    unsigned char *mem_138556 = NULL;
    int64_t mem_138559_cached_sizze_139493 = 0;
    unsigned char *mem_138559 = NULL;
    int64_t mem_138569_cached_sizze_139494 = 0;
    unsigned char *mem_138569 = NULL;
    int64_t mem_138571_cached_sizze_139495 = 0;
    unsigned char *mem_138571 = NULL;
    int64_t mem_138586_cached_sizze_139496 = 0;
    unsigned char *mem_138586 = NULL;
    int64_t mem_138589_cached_sizze_139497 = 0;
    unsigned char *mem_138589 = NULL;
    int64_t mem_138728_cached_sizze_139498 = 0;
    unsigned char *mem_138728 = NULL;
    int64_t mem_138770_cached_sizze_139499 = 0;
    unsigned char *mem_138770 = NULL;
    int64_t mem_138773_cached_sizze_139500 = 0;
    unsigned char *mem_138773 = NULL;
    int64_t mem_138783_cached_sizze_139501 = 0;
    unsigned char *mem_138783 = NULL;
    int64_t mem_138785_cached_sizze_139502 = 0;
    unsigned char *mem_138785 = NULL;
    int64_t mem_138852_cached_sizze_139503 = 0;
    unsigned char *mem_138852 = NULL;
    int64_t mem_138855_cached_sizze_139504 = 0;
    unsigned char *mem_138855 = NULL;
    int64_t mem_138865_cached_sizze_139505 = 0;
    unsigned char *mem_138865 = NULL;
    int64_t mem_138867_cached_sizze_139506 = 0;
    unsigned char *mem_138867 = NULL;
    int64_t mem_138882_cached_sizze_139507 = 0;
    unsigned char *mem_138882 = NULL;
    int64_t mem_138885_cached_sizze_139508 = 0;
    unsigned char *mem_138885 = NULL;
    struct memblock mem_param_tmp_139382;
    
    mem_param_tmp_139382.references = NULL;
    
    struct memblock mem_param_tmp_139381;
    
    mem_param_tmp_139381.references = NULL;
    
    struct memblock mem_138962;
    
    mem_138962.references = NULL;
    
    struct memblock mem_138958;
    
    mem_138958.references = NULL;
    
    struct memblock mem_138924;
    
    mem_138924.references = NULL;
    
    struct memblock mem_138920;
    
    mem_138920.references = NULL;
    
    struct memblock mem_138929;
    
    mem_138929.references = NULL;
    
    struct memblock mem_138927;
    
    mem_138927.references = NULL;
    
    struct memblock ext_mem_138944;
    
    ext_mem_138944.references = NULL;
    
    struct memblock ext_mem_138947;
    
    ext_mem_138947.references = NULL;
    
    struct memblock mem_param_138849;
    
    mem_param_138849.references = NULL;
    
    struct memblock mem_param_138846;
    
    mem_param_138846.references = NULL;
    
    struct memblock ext_mem_138968;
    
    ext_mem_138968.references = NULL;
    
    struct memblock ext_mem_138969;
    
    ext_mem_138969.references = NULL;
    
    struct memblock mem_138842;
    
    mem_138842.references = NULL;
    
    struct memblock mem_138838;
    
    mem_138838.references = NULL;
    
    struct memblock ext_mem_138972;
    
    ext_mem_138972.references = NULL;
    
    struct memblock mem_138767;
    
    mem_138767.references = NULL;
    
    struct memblock mem_param_tmp_139326;
    
    mem_param_tmp_139326.references = NULL;
    
    struct memblock mem_param_tmp_139325;
    
    mem_param_tmp_139325.references = NULL;
    
    struct memblock mem_138666;
    
    mem_138666.references = NULL;
    
    struct memblock mem_138662;
    
    mem_138662.references = NULL;
    
    struct memblock mem_138628;
    
    mem_138628.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock mem_138633;
    
    mem_138633.references = NULL;
    
    struct memblock mem_138631;
    
    mem_138631.references = NULL;
    
    struct memblock ext_mem_138648;
    
    ext_mem_138648.references = NULL;
    
    struct memblock ext_mem_138651;
    
    ext_mem_138651.references = NULL;
    
    struct memblock mem_param_138553;
    
    mem_param_138553.references = NULL;
    
    struct memblock mem_param_138550;
    
    mem_param_138550.references = NULL;
    
    struct memblock ext_mem_138672;
    
    ext_mem_138672.references = NULL;
    
    struct memblock ext_mem_138673;
    
    ext_mem_138673.references = NULL;
    
    struct memblock mem_138546;
    
    mem_138546.references = NULL;
    
    struct memblock mem_138542;
    
    mem_138542.references = NULL;
    
    struct memblock ext_mem_138676;
    
    ext_mem_138676.references = NULL;
    
    struct memblock mem_138471;
    
    mem_138471.references = NULL;
    
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t prim_out_139284;
    int64_t dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368 = add64(na_123952, nb_123953);
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139285 = 0; nest_i_139285 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139285++) {
        ((int64_t *) mem_138406.mem)[nest_i_139285] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139286 = 0; nest_i_139286 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139286++) {
        ((int64_t *) mem_138408.mem)[nest_i_139286] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139287 = 0; nest_i_139287 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139287++) {
        ((double *) mem_138410.mem)[nest_i_139287] = 0.0;
    }
    
    int64_t zl_rhs_136372 = sub64(na_123952, window_sizze_123954);
    bool cond_136373 = slt64((int64_t) 0, zl_rhs_136372);
    int64_t zl_rhs_136374 = sub64(nb_123953, window_sizze_123954);
    bool loop_cond_f_res_136375 = slt64((int64_t) 0, zl_rhs_136374);
    bool x_136376 = !cond_136373;
    bool y_136377 = loop_cond_f_res_136375 && x_136376;
    bool loop_cond_136378 = cond_136373 || y_136377;
    bool zzero_136379 = threads_123955 == (int64_t) 0;
    bool nonzzero_136380 = !zzero_136379;
    bool loop_not_taken_136381 = !loop_cond_136378;
    bool protect_assert_disj_136382 = nonzzero_136380 || loop_not_taken_136381;
    bool nonzzero_cert_136383;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:184:30-38\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool nonzzero_cert_136385;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:117:30-38\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:305:82-85\n   #4  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_136386 = sub64(threads_123955, (int64_t) 1);
    bool x_136387 = sle64((int64_t) 0, tmp_136386);
    bool y_136388 = slt64(tmp_136386, threads_123955);
    bool bounds_check_136389 = x_136387 && y_136388;
    bool protect_assert_disj_136390 = loop_not_taken_136381 || bounds_check_136389;
    bool index_certs_136391;
    
    if (!protect_assert_disj_136390) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136386, "] out of bounds for array of shape [", (long long) threads_123955, "].", "-> #0  ftsort.fut:207:7-33\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138420 = (int64_t) 8 * threads_123955;
    
    if (mem_138421_cached_sizze_139482 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138421, &mem_138421_cached_sizze_139482, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138423_cached_sizze_139483 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138423, &mem_138423_cached_sizze_139483, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    bool defunc_0_merge_pipeline_res_136392;
    int64_t defunc_0_merge_pipeline_res_136396;
    int64_t defunc_0_merge_pipeline_res_136397;
    bool loop_while_136398;
    int64_t p_136402;
    int64_t p_136403;
    
    loop_while_136398 = loop_cond_136378;
    p_136402 = (int64_t) 0;
    p_136403 = (int64_t) 0;
    while (loop_while_136398) {
        int64_t min_arg1_136404 = sub64(na_123952, p_136402);
        int64_t min_res_136405 = smin64(window_sizze_123954, min_arg1_136404);
        int64_t min_arg1_136406 = sub64(nb_123953, p_136403);
        int64_t min_res_136407 = smin64(window_sizze_123954, min_arg1_136406);
        int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408 = add64(min_res_136405, min_res_136407);
        int64_t lb_merge_136409 = add64(p_136402, p_136403);
        int64_t zp_lhs_136410 = add64(min_res_136405, lb_merge_136409);
        int64_t ub_merge_136411 = add64(min_res_136407, zp_lhs_136410);
        int64_t as_136412 = add64(p_136402, min_res_136405);
        bool empty_slice_136413 = min_res_136405 == (int64_t) 0;
        int64_t m_136414 = sub64(min_res_136405, (int64_t) 1);
        int64_t i_p_m_t_s_136415 = add64(p_136402, m_136414);
        bool zzero_leq_i_p_m_t_s_136416 = sle64((int64_t) 0, i_p_m_t_s_136415);
        bool i_p_m_t_s_leq_w_136417 = slt64(i_p_m_t_s_136415, na_123952);
        bool zzero_lte_i_136418 = sle64((int64_t) 0, p_136402);
        bool i_lte_j_136419 = sle64(p_136402, as_136412);
        bool y_136420 = i_p_m_t_s_leq_w_136417 && zzero_lte_i_136418;
        bool y_136421 = zzero_leq_i_p_m_t_s_136416 && y_136420;
        bool forwards_ok_136422 = i_lte_j_136419 && y_136421;
        bool ok_or_empty_136423 = empty_slice_136413 || forwards_ok_136422;
        bool index_certs_136424;
        
        if (!ok_or_empty_136423) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136402, ":", (long long) as_136412, "] out of bounds for array of shape [", (long long) na_123952, "].", "-> #0  ftsort.fut:243:16-46\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bs_136425 = add64(p_136403, min_res_136407);
        bool empty_slice_136426 = min_res_136407 == (int64_t) 0;
        int64_t m_136427 = sub64(min_res_136407, (int64_t) 1);
        int64_t i_p_m_t_s_136428 = add64(p_136403, m_136427);
        bool zzero_leq_i_p_m_t_s_136429 = sle64((int64_t) 0, i_p_m_t_s_136428);
        bool i_p_m_t_s_leq_w_136430 = slt64(i_p_m_t_s_136428, nb_123953);
        bool zzero_lte_i_136431 = sle64((int64_t) 0, p_136403);
        bool i_lte_j_136432 = sle64(p_136403, bs_136425);
        bool y_136433 = i_p_m_t_s_leq_w_136430 && zzero_lte_i_136431;
        bool y_136434 = zzero_leq_i_p_m_t_s_136429 && y_136433;
        bool forwards_ok_136435 = i_lte_j_136432 && y_136434;
        bool ok_or_empty_136436 = empty_slice_136426 || forwards_ok_136435;
        bool index_certs_136437;
        
        if (!ok_or_empty_136436) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136403, ":", (long long) bs_136425, "] out of bounds for array of shape [", (long long) nb_123953, "].", "-> #0  ftsort.fut:244:16-46\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zp_rhs_136438 = sdiv64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, threads_123955);
        int64_t perThread_136439 = add64((int64_t) 1, zp_rhs_136438);
        int64_t bytes_138437 = perThread_136439 * bytes_138420;
        int64_t bytes_138725 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        int64_t j_m_i_137176 = sub64(ub_merge_136411, lb_merge_136409);
        bool empty_slice_137177 = j_m_i_137176 == (int64_t) 0;
        int64_t m_137178 = sub64(j_m_i_137176, (int64_t) 1);
        int64_t i_p_m_t_s_137179 = add64(lb_merge_136409, m_137178);
        bool zzero_leq_i_p_m_t_s_137180 = sle64((int64_t) 0, i_p_m_t_s_137179);
        bool i_p_m_t_s_leq_w_137181 = slt64(i_p_m_t_s_137179, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
        bool zzero_lte_i_137182 = sle64((int64_t) 0, lb_merge_136409);
        bool i_lte_j_137183 = sle64(lb_merge_136409, ub_merge_136411);
        bool y_137184 = i_p_m_t_s_leq_w_137181 && zzero_lte_i_137182;
        bool y_137185 = zzero_leq_i_p_m_t_s_137180 && y_137184;
        bool forwards_ok_137186 = i_lte_j_137183 && y_137185;
        bool ok_or_empty_137187 = empty_slice_137177 || forwards_ok_137186;
        bool index_certs_137188;
        
        if (!ok_or_empty_137187) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lb_merge_136409, ":", (long long) ub_merge_136411, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool dim_match_137189 = j_m_i_137176 == dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        bool empty_or_match_cert_137190;
        
        if (!dim_match_137189) {
            set_error(ctx, msgprintf("Error: %s%s%lld%s%s%s%lld%s%s\n\nBacktrace:\n%s", "Shape ", "[", (long long) j_m_i_137176, "]", " of slice does not match shape ", "[", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, "]", " of value.", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440 = mul64(threads_123955, perThread_136439);
        
        for (int64_t i_138210 = 0; i_138210 < threads_123955; i_138210++) {
            int64_t zs_lhs_136444 = mul64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, i_138210);
            int64_t index_136445 = sdiv64(zs_lhs_136444, threads_123955);
            bool cond_136446 = slt64(min_res_136405, index_136445);
            int64_t atop_136447;
            
            if (cond_136446) {
                atop_136447 = min_res_136405;
            } else {
                atop_136447 = index_136445;
            }
            
            int64_t btop_136448;
            
            if (cond_136446) {
                int64_t btop_t_res_137808 = sub64(index_136445, min_res_136405);
                
                btop_136448 = btop_t_res_137808;
            } else {
                btop_136448 = (int64_t) 0;
            }
            
            bool defunc_0_f_res_136450;
            int64_t defunc_0_f_res_136451;
            int64_t defunc_0_f_res_136452;
            int64_t defunc_0_f_res_136453;
            int64_t defunc_0_f_res_136454;
            int64_t defunc_0_f_res_136455;
            bool loop_while_136456;
            int64_t p_136457;
            int64_t p_136458;
            int64_t p_136459;
            int64_t p_136460;
            int64_t p_136461;
            
            loop_while_136456 = 1;
            p_136457 = btop_136448;
            p_136458 = min_res_136405;
            p_136459 = atop_136447;
            p_136460 = min_res_136407;
            p_136461 = btop_136448;
            while (loop_while_136456) {
                int64_t zs_lhs_136462 = sub64(p_136459, p_136457);
                int64_t offset_136463 = sdiv64(zs_lhs_136462, (int64_t) 2);
                int64_t ai_136464 = sub64(p_136459, offset_136463);
                int64_t bi_136465 = add64(p_136461, offset_136463);
                bool cond_136466 = sle64((int64_t) 0, ai_136464);
                bool cond_t_res_136467 = slt64(ai_136464, min_res_136405);
                bool x_136468 = cond_136466 && cond_t_res_136467;
                double acur_136469;
                
                if (x_136468) {
                    bool index_certs_137809;
                    
                    if (!x_136468) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ai_136464, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:128:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:305:82-85\n   #4  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137810 = p_136402 + ai_136464;
                    double acur_t_res_137811 = ((double *) a_list_mem_138403.mem)[slice_137810];
                    
                    acur_136469 = acur_t_res_137811;
                } else {
                    bool cond_136473 = slt64(ai_136464, (int64_t) 0);
                    double acur_f_res_136474;
                    
                    if (cond_136473) {
                        acur_f_res_136474 = -INFINITY;
                    } else {
                        acur_f_res_136474 = INFINITY;
                    }
                    acur_136469 = acur_f_res_136474;
                }
                
                bool cond_136475 = slt64((int64_t) 0, ai_136464);
                double aprev_136476;
                
                if (cond_136475) {
                    int64_t tmp_137812 = sub64(ai_136464, (int64_t) 1);
                    bool x_137813 = sle64((int64_t) 0, tmp_137812);
                    bool y_137814 = slt64(tmp_137812, min_res_136405);
                    bool bounds_check_137815 = x_137813 && y_137814;
                    bool index_certs_137816;
                    
                    if (!bounds_check_137815) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137812, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:129:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:305:82-85\n   #4  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137817 = p_136402 + tmp_137812;
                    double aprev_t_res_137818 = ((double *) a_list_mem_138403.mem)[slice_137817];
                    
                    aprev_136476 = aprev_t_res_137818;
                } else {
                    aprev_136476 = -INFINITY;
                }
                
                bool cond_136484 = sle64((int64_t) 0, bi_136465);
                bool cond_t_res_136485 = slt64(bi_136465, min_res_136407);
                bool x_136486 = cond_136484 && cond_t_res_136485;
                double bcur_136487;
                
                if (x_136486) {
                    bool index_certs_137819;
                    
                    if (!x_136486) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bi_136465, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:130:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:305:82-85\n   #4  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137820 = p_136403 + bi_136465;
                    double bcur_t_res_137821 = ((double *) b_list_mem_138404.mem)[slice_137820];
                    
                    bcur_136487 = bcur_t_res_137821;
                } else {
                    bool cond_136491 = slt64(bi_136465, (int64_t) 0);
                    double bcur_f_res_136492;
                    
                    if (cond_136491) {
                        bcur_f_res_136492 = -INFINITY;
                    } else {
                        bcur_f_res_136492 = INFINITY;
                    }
                    bcur_136487 = bcur_f_res_136492;
                }
                
                bool cond_136493 = slt64((int64_t) 0, bi_136465);
                double bprev_136494;
                
                if (cond_136493) {
                    int64_t tmp_137822 = sub64(bi_136465, (int64_t) 1);
                    bool x_137823 = sle64((int64_t) 0, tmp_137822);
                    bool y_137824 = slt64(tmp_137822, min_res_136407);
                    bool bounds_check_137825 = x_137823 && y_137824;
                    bool index_certs_137826;
                    
                    if (!bounds_check_137825) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137822, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:131:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:305:82-85\n   #4  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137827 = p_136403 + tmp_137822;
                    double bprev_t_res_137828 = ((double *) b_list_mem_138404.mem)[slice_137827];
                    
                    bprev_136494 = bprev_t_res_137828;
                } else {
                    bprev_136494 = -INFINITY;
                }
                
                bool defunc_0_gt_res_136502 = bprev_136494 < acur_136469;
                int64_t loopres_136503;
                int64_t loopres_136504;
                int64_t loopres_136505;
                int64_t loopres_136506;
                int64_t loopres_136507;
                bool loopres_136508;
                
                if (defunc_0_gt_res_136502) {
                    bool defunc_0_leq_res_137829 = aprev_136476 <= bcur_136487;
                    int64_t loopres_t_res_137830;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137830 = ai_136464;
                    } else {
                        loopres_t_res_137830 = min_res_136405;
                    }
                    
                    int64_t loopres_t_res_137831;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137831 = bi_136465;
                    } else {
                        loopres_t_res_137831 = min_res_136407;
                    }
                    
                    bool x_137832 = !defunc_0_leq_res_137829;
                    int64_t loopres_t_res_137833;
                    int64_t loopres_t_res_137834;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137833 = p_136459;
                        loopres_t_res_137834 = p_136461;
                    } else {
                        int64_t tmp_137835 = sub64(ai_136464, (int64_t) 1);
                        int64_t tmp_137836 = add64((int64_t) 1, bi_136465);
                        
                        loopres_t_res_137833 = tmp_137835;
                        loopres_t_res_137834 = tmp_137836;
                    }
                    loopres_136503 = p_136457;
                    loopres_136504 = loopres_t_res_137830;
                    loopres_136505 = loopres_t_res_137833;
                    loopres_136506 = loopres_t_res_137831;
                    loopres_136507 = loopres_t_res_137834;
                    loopres_136508 = x_137832;
                } else {
                    int64_t tmp_136517 = add64((int64_t) 1, ai_136464);
                    
                    loopres_136503 = tmp_136517;
                    loopres_136504 = min_res_136405;
                    loopres_136505 = p_136459;
                    loopres_136506 = min_res_136407;
                    loopres_136507 = p_136461;
                    loopres_136508 = 1;
                }
                
                bool loop_while_tmp_139296 = loopres_136508;
                int64_t p_tmp_139297 = loopres_136503;
                int64_t p_tmp_139298 = loopres_136504;
                int64_t p_tmp_139299 = loopres_136505;
                int64_t p_tmp_139300 = loopres_136506;
                int64_t p_tmp_139301 = loopres_136507;
                
                loop_while_136456 = loop_while_tmp_139296;
                p_136457 = p_tmp_139297;
                p_136458 = p_tmp_139298;
                p_136459 = p_tmp_139299;
                p_136460 = p_tmp_139300;
                p_136461 = p_tmp_139301;
            }
            defunc_0_f_res_136450 = loop_while_136456;
            defunc_0_f_res_136451 = p_136457;
            defunc_0_f_res_136452 = p_136458;
            defunc_0_f_res_136453 = p_136459;
            defunc_0_f_res_136454 = p_136460;
            defunc_0_f_res_136455 = p_136461;
            ((int64_t *) mem_138421)[i_138210] = defunc_0_f_res_136452;
            ((int64_t *) mem_138423)[i_138210] = defunc_0_f_res_136454;
        }
        if (mem_138438_cached_sizze_139484 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138438, &mem_138438_cached_sizze_139484, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138441_cached_sizze_139485 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138441, &mem_138441_cached_sizze_139485, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138444_cached_sizze_139486 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138444, &mem_138444_cached_sizze_139486, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138447_cached_sizze_139487 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138447, &mem_138447_cached_sizze_139487, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138273 = 0; i_138273 < threads_123955; i_138273++) {
            int64_t defunc_0_f_res_136531 = ((int64_t *) mem_138421)[i_138273];
            int64_t defunc_0_f_res_136532 = ((int64_t *) mem_138423)[i_138273];
            int64_t zl_lhs_136533 = add64((int64_t) 1, i_138273);
            bool cond_136534 = slt64(zl_lhs_136533, threads_123955);
            bool x_136535 = sle64((int64_t) 0, zl_lhs_136533);
            bool bounds_check_136536 = cond_136534 && x_136535;
            bool loop_not_taken_136537 = !cond_136534;
            bool protect_assert_disj_136538 = bounds_check_136536 || loop_not_taken_136537;
            bool index_certs_136539;
            
            if (!protect_assert_disj_136538) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_lhs_136533, "] out of bounds for array of shape [", (long long) threads_123955, "].", "-> #0  ftsort.fut:191:39-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t defunc_0_f_res_t_res_136540;
            
            if (cond_136534) {
                int64_t x_137837 = ((int64_t *) mem_138421)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136540 = x_137837;
            } else {
                defunc_0_f_res_t_res_136540 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_t_res_136542;
            
            if (cond_136534) {
                int64_t x_137838 = ((int64_t *) mem_138423)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136542 = x_137838;
            } else {
                defunc_0_f_res_t_res_136542 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_136544;
            
            if (cond_136534) {
                defunc_0_f_res_136544 = defunc_0_f_res_t_res_136540;
            } else {
                defunc_0_f_res_136544 = defunc_0_f_res_136531;
            }
            
            int64_t defunc_0_f_res_136545;
            
            if (cond_136534) {
                defunc_0_f_res_136545 = defunc_0_f_res_t_res_136542;
            } else {
                defunc_0_f_res_136545 = defunc_0_f_res_136532;
            }
            
            int64_t dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 = sub64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            int64_t dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 = sub64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 = add64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t zm_lhs_136549 = add64(defunc_0_f_res_136544, defunc_0_f_res_136545);
            int64_t zm_rhs_136550 = add64(defunc_0_f_res_136531, defunc_0_f_res_136532);
            int64_t card_136551 = sub64(zm_lhs_136549, zm_rhs_136550);
            bool empty_slice_136552 = dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 == (int64_t) 0;
            int64_t m_136553 = sub64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 1);
            int64_t i_p_m_t_s_136554 = add64(defunc_0_f_res_136531, m_136553);
            bool zzero_leq_i_p_m_t_s_136555 = sle64((int64_t) 0, i_p_m_t_s_136554);
            bool i_p_m_t_s_leq_w_136556 = slt64(i_p_m_t_s_136554, min_res_136405);
            bool zzero_lte_i_136557 = sle64((int64_t) 0, defunc_0_f_res_136531);
            bool i_lte_j_136558 = sle64(defunc_0_f_res_136531, defunc_0_f_res_136544);
            bool y_136559 = i_p_m_t_s_leq_w_136556 && zzero_lte_i_136557;
            bool y_136560 = zzero_leq_i_p_m_t_s_136555 && y_136559;
            bool forwards_ok_136561 = i_lte_j_136558 && y_136560;
            bool ok_or_empty_136562 = empty_slice_136552 || forwards_ok_136561;
            bool index_certs_136563;
            
            if (!ok_or_empty_136562) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136531, ":", (long long) defunc_0_f_res_136544, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:193:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136564 = slt64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            bool valid_136565 = !bounds_invalid_upwards_136564;
            bool range_valid_c_136566;
            
            if (!valid_136565) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136531, "..<", (long long) defunc_0_f_res_136544, " is invalid.", "-> #0  ftsort.fut:193:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_136569 = dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 == (int64_t) 0;
            int64_t m_136570 = sub64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, (int64_t) 1);
            int64_t i_p_m_t_s_136571 = add64(defunc_0_f_res_136532, m_136570);
            bool zzero_leq_i_p_m_t_s_136572 = sle64((int64_t) 0, i_p_m_t_s_136571);
            bool i_p_m_t_s_leq_w_136573 = slt64(i_p_m_t_s_136571, min_res_136407);
            bool zzero_lte_i_136574 = sle64((int64_t) 0, defunc_0_f_res_136532);
            bool i_lte_j_136575 = sle64(defunc_0_f_res_136532, defunc_0_f_res_136545);
            bool y_136576 = i_p_m_t_s_leq_w_136573 && zzero_lte_i_136574;
            bool y_136577 = zzero_leq_i_p_m_t_s_136572 && y_136576;
            bool forwards_ok_136578 = i_lte_j_136575 && y_136577;
            bool ok_or_empty_136579 = empty_slice_136569 || forwards_ok_136578;
            bool index_certs_136580;
            
            if (!ok_or_empty_136579) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136532, ":", (long long) defunc_0_f_res_136545, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:194:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136581 = slt64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            bool valid_136582 = !bounds_invalid_upwards_136581;
            bool range_valid_c_136583;
            
            if (!valid_136582) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136532, "..<", (long long) defunc_0_f_res_136545, " is invalid.", "-> #0  ftsort.fut:194:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_138470 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool cond_136588 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zs_lhs_136589 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zp_rhs_136590 = sdiv_safe64(zs_lhs_136589, (int64_t) 20);
            int64_t min_num_blocks_136591 = add64((int64_t) 1, zp_rhs_136590);
            bool loop_cond_136592 = slt64((int64_t) 1, min_num_blocks_136591);
            bool smallest_pow_2_geq_than_res_136593;
            int64_t smallest_pow_2_geq_than_res_136594;
            bool loop_while_136595;
            int64_t x_136596;
            
            loop_while_136595 = loop_cond_136592;
            x_136596 = (int64_t) 1;
            while (loop_while_136595) {
                int64_t loopres_136597 = mul64((int64_t) 2, x_136596);
                bool loop_cond_136598 = slt64(loopres_136597, min_num_blocks_136591);
                bool loop_while_tmp_139306 = loop_cond_136598;
                int64_t x_tmp_139307 = loopres_136597;
                
                loop_while_136595 = loop_while_tmp_139306;
                x_136596 = x_tmp_139307;
            }
            smallest_pow_2_geq_than_res_136593 = loop_while_136595;
            smallest_pow_2_geq_than_res_136594 = x_136596;
            
            bool zzero_136599 = smallest_pow_2_geq_than_res_136594 == (int64_t) 0;
            bool nonzzero_136600 = !zzero_136599;
            bool protect_assert_disj_136601 = cond_136588 || nonzzero_136600;
            bool nonzzero_cert_136602;
            
            if (!protect_assert_disj_136601) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zp_rhs_136603 = sdiv_safe64(zs_lhs_136589, smallest_pow_2_geq_than_res_136594);
            int64_t block_sizze_136604 = add64((int64_t) 1, zp_rhs_136603);
            bool y_136609 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
            bool protect_assert_disj_139059 = cond_136588 || y_136609;
            bool index_certs_136610;
            
            if (!protect_assert_disj_139059) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136629 = slt64(smallest_pow_2_geq_than_res_136594, (int64_t) 0);
            bool valid_136630 = !bounds_invalid_upwards_136629;
            bool protect_assert_disj_139067 = cond_136588 || valid_136630;
            bool range_valid_c_136631;
            
            if (!protect_assert_disj_139067) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_136594, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:305:82-85\n   #7  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136633 = slt64(block_sizze_136604, (int64_t) 0);
            bool valid_136634 = !bounds_invalid_upwards_136633;
            bool protect_assert_disj_139069 = cond_136588 || valid_136634;
            bool range_valid_c_136635;
            
            if (!protect_assert_disj_139069) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_136604, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool cond_136637 = sle64(block_sizze_136604, (int64_t) 1);
            int64_t tmp_136638 = sub64(block_sizze_136604, (int64_t) 2);
            bool bounds_invalid_upwards_136639 = slt64(tmp_136638, (int64_t) 0);
            bool valid_136641 = !bounds_invalid_upwards_136639;
            bool protect_assert_disj_136642 = cond_136637 || valid_136641;
            bool protect_assert_disj_139071 = cond_136588 || protect_assert_disj_136642;
            bool range_valid_c_136643;
            
            if (!protect_assert_disj_139071) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_136638, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool dim_match_137123 = card_136551 == dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool empty_or_match_cert_137124;
            
            if (!dim_match_137123) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] cannot match shape of type `[", (long long) card_136551, "](i64, i64, f64)`.", "-> #0  ftsort.fut:195:20-196:82\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_137125 = card_136551 == (int64_t) 0;
            int64_t m_137126 = sub64(card_136551, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137127 = sle64((int64_t) 0, m_137126);
            bool i_p_m_t_s_leq_w_137128 = slt64(m_137126, card_136551);
            bool y_137129 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137128;
            bool ok_or_empty_137130 = empty_slice_137125 || y_137129;
            bool index_certs_137131;
            
            if (!ok_or_empty_137130) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) card_136551, "].", "-> #0  ftsort.fut:197:41-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool i_p_m_t_s_leq_w_137132 = slt64(m_137126, perThread_136439);
            bool y_137133 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137132;
            bool ok_or_empty_137134 = empty_slice_137125 || y_137133;
            bool index_certs_137135;
            
            if (!ok_or_empty_137134) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:197:17-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t nest_i_139308 = 0; nest_i_139308 < perThread_136439; nest_i_139308++) {
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + nest_i_139308] = (int64_t) -1;
            }
            for (int64_t nest_i_139309 = 0; nest_i_139309 < perThread_136439; nest_i_139309++) {
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + nest_i_139309] = (int64_t) -1;
            }
            for (int64_t nest_i_139310 = 0; nest_i_139310 < perThread_136439; nest_i_139310++) {
                ((double *) mem_138447)[i_138273 * perThread_136439 + nest_i_139310] = 0.0;
            }
            
            int64_t slice_136567 = p_136402 + defunc_0_f_res_136531;
            int64_t slice_136584 = p_136403 + defunc_0_f_res_136532;
            
            if (memblock_alloc(ctx, &mem_138471, bytes_138470, "mem_138471")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139311 = 0; i_139311 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_139311++) {
                int64_t x_139312 = (int64_t) 0 + i_139311 * (int64_t) 1;
                
                ((int64_t *) mem_138471.mem)[i_139311] = x_139312;
            }
            
            int64_t flat_dim_136605 = smallest_pow_2_geq_than_res_136594 * block_sizze_136604;
            bool x_139054 = !cond_136588;
            int64_t greatest_divisor_leq_than_arg1_136607 = mul64((int64_t) 2, block_sizze_136604);
            int64_t merge_block_sizze_136608;
            
            if (x_139054) {
                int64_t x_139056;
                
                if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139056, (int64_t) 8, greatest_divisor_leq_than_arg1_136607) != 0) {
                    err = 1;
                    goto cleanup;
                }
                merge_block_sizze_136608 = x_139056;
            } else {
                merge_block_sizze_136608 = (int64_t) 0;
            }
            
            bool index_concat_cmp_136611 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 0);
            bool x_139050 = !index_concat_cmp_136611;
            bool protect_cond_conj_139060 = x_139050 && x_139054;
            double index_concat_136617;
            
            if (protect_cond_conj_139060) {
                double x_139052 = ((double *) a_list_mem_138403.mem)[slice_136567];
                
                index_concat_136617 = x_139052;
            } else {
                index_concat_136617 = 0.0;
            }
            
            int64_t index_concat_i_137839 = sub64((int64_t) 0, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t slice_137840 = defunc_0_f_res_136532 + index_concat_i_137839;
            int64_t slice_137841 = p_136403 + slice_137840;
            bool protect_cond_conj_139061 = index_concat_cmp_136611 && x_139054;
            double index_concat_137842;
            
            if (protect_cond_conj_139061) {
                double x_139048 = ((double *) b_list_mem_138404.mem)[slice_137841];
                
                index_concat_137842 = x_139048;
            } else {
                index_concat_137842 = 0.0;
            }
            
            double index_concat_branch_136612;
            
            if (index_concat_cmp_136611) {
                index_concat_branch_136612 = index_concat_137842;
            } else {
                index_concat_branch_136612 = index_concat_136617;
            }
            
            double defunc_0_reduce_res_138002;
            int64_t defunc_0_reduce_res_138003;
            
            if (x_139054) {
                double x_139062;
                int64_t x_139063;
                double redout_138213;
                int64_t redout_138214;
                
                redout_138213 = index_concat_branch_136612;
                redout_138214 = (int64_t) 0;
                for (int64_t i_138215 = 0; i_138215 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138215++) {
                    bool index_concat_cmp_138390 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, i_138215);
                    double index_concat_branch_138394;
                    
                    if (index_concat_cmp_138390) {
                        int64_t index_concat_i_138391 = sub64(i_138215, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                        int64_t slice_138401 = slice_136584 + index_concat_i_138391;
                        double index_concat_138392 = ((double *) b_list_mem_138404.mem)[slice_138401];
                        
                        index_concat_branch_138394 = index_concat_138392;
                    } else {
                        int64_t slice_138402 = slice_136567 + i_138215;
                        double index_concat_138393 = ((double *) a_list_mem_138403.mem)[slice_138402];
                        
                        index_concat_branch_138394 = index_concat_138393;
                    }
                    
                    bool defunc_0_leq_res_136626 = redout_138213 <= index_concat_branch_138394;
                    double defunc_0_op_res_136627;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136627 = index_concat_branch_138394;
                    } else {
                        defunc_0_op_res_136627 = redout_138213;
                    }
                    
                    int64_t defunc_0_op_res_136628;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136628 = i_138215;
                    } else {
                        defunc_0_op_res_136628 = redout_138214;
                    }
                    
                    double redout_tmp_139313 = defunc_0_op_res_136627;
                    int64_t redout_tmp_139314 = defunc_0_op_res_136628;
                    
                    redout_138213 = redout_tmp_139313;
                    redout_138214 = redout_tmp_139314;
                }
                x_139062 = redout_138213;
                x_139063 = redout_138214;
                defunc_0_reduce_res_138002 = x_139062;
                defunc_0_reduce_res_138003 = x_139063;
            } else {
                defunc_0_reduce_res_138002 = 0.0;
                defunc_0_reduce_res_138003 = (int64_t) 0;
            }
            
            int64_t distance_136640 = add64((int64_t) 1, tmp_136638);
            int64_t binop_x_138472 = (int64_t) 8 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138473 = block_sizze_136604 * binop_x_138472;
            int64_t bytes_138486 = (int64_t) 8 * block_sizze_136604;
            bool loop_cond_136722 = slt64(block_sizze_136604, flat_dim_136605);
            bool zzero_136723 = merge_block_sizze_136608 == (int64_t) 0;
            bool nonzzero_136724 = !zzero_136723;
            
            if (cond_136588) {
                if (memblock_set(ctx, &ext_mem_138676, &mem_138471, "mem_138471") != 0)
                    return 1;
            } else {
                if (mem_138474_cached_sizze_139488 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138474, &mem_138474_cached_sizze_139488, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138477_cached_sizze_139489 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138477, &mem_138477_cached_sizze_139489, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138487_cached_sizze_139490 < bytes_138486) {
                    err = lexical_realloc(ctx, &mem_138487, &mem_138487_cached_sizze_139490, bytes_138486);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138489_cached_sizze_139491 < bytes_138486) {
                    err = lexical_realloc(ctx, &mem_138489, &mem_138489_cached_sizze_139491, bytes_138486);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                for (int64_t i_138227 = 0; i_138227 < smallest_pow_2_geq_than_res_136594; i_138227++) {
                    int64_t zp_lhs_136647 = mul64(block_sizze_136604, i_138227);
                    
                    for (int64_t i_138220 = 0; i_138220 < block_sizze_136604; i_138220++) {
                        int64_t k_136651 = add64(zp_lhs_136647, i_138220);
                        bool cond_136652 = slt64(k_136651, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                        double lifted_lambda_res_136653;
                        int64_t lifted_lambda_res_136654;
                        
                        if (cond_136652) {
                            bool x_137847 = sle64((int64_t) 0, k_136651);
                            bool bounds_check_137848 = cond_136652 && x_137847;
                            bool index_certs_137849;
                            
                            if (!bounds_check_137848) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_136651, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool index_concat_cmp_137850 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, k_136651);
                            double index_concat_branch_137851;
                            
                            if (index_concat_cmp_137850) {
                                int64_t index_concat_i_137852 = sub64(k_136651, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                                int64_t slice_137853 = defunc_0_f_res_136532 + index_concat_i_137852;
                                int64_t slice_137854 = p_136403 + slice_137853;
                                double index_concat_137855 = ((double *) b_list_mem_138404.mem)[slice_137854];
                                
                                index_concat_branch_137851 = index_concat_137855;
                            } else {
                                int64_t slice_137856 = defunc_0_f_res_136531 + k_136651;
                                int64_t slice_137857 = p_136402 + slice_137856;
                                double index_concat_137858 = ((double *) a_list_mem_138403.mem)[slice_137857];
                                
                                index_concat_branch_137851 = index_concat_137858;
                            }
                            lifted_lambda_res_136653 = index_concat_branch_137851;
                            lifted_lambda_res_136654 = k_136651;
                        } else {
                            lifted_lambda_res_136653 = defunc_0_reduce_res_138002;
                            lifted_lambda_res_136654 = defunc_0_reduce_res_138003;
                        }
                        ((double *) mem_138487)[i_138220] = lifted_lambda_res_136653;
                        ((int64_t *) mem_138489)[i_138220] = lifted_lambda_res_136654;
                    }
                    if (!cond_136637) {
                        for (int64_t i_136671 = 0; i_136671 < distance_136640; i_136671++) {
                            int64_t gt_arg1_136674 = add64((int64_t) 1, i_136671);
                            bool x_136675 = sle64((int64_t) 0, gt_arg1_136674);
                            bool y_136676 = slt64(gt_arg1_136674, block_sizze_136604);
                            bool bounds_check_136677 = x_136675 && y_136676;
                            bool index_certs_136678;
                            
                            if (!bounds_check_136677) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_136674, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool y_136680 = slt64(i_136671, block_sizze_136604);
                            bool index_certs_136681;
                            
                            if (!y_136680) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_136671, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double gt_arg1_136679 = ((double *) mem_138487)[gt_arg1_136674];
                            double gt_arg0_136682 = ((double *) mem_138487)[i_136671];
                            bool defunc_0_leq_res_136683 = gt_arg0_136682 <= gt_arg1_136679;
                            bool defunc_0_lifted_gt_res_136684 = !defunc_0_leq_res_136683;
                            bool s_136685;
                            int64_t s_136688;
                            bool loop_while_136689;
                            int64_t j_136692;
                            
                            loop_while_136689 = defunc_0_lifted_gt_res_136684;
                            j_136692 = i_136671;
                            while (loop_while_136689) {
                                bool x_136693 = sle64((int64_t) 0, j_136692);
                                bool y_136694 = slt64(j_136692, block_sizze_136604);
                                bool bounds_check_136695 = x_136693 && y_136694;
                                bool index_certs_136696;
                                
                                if (!bounds_check_136695) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_136692, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t copy_arg0_136699 = add64((int64_t) 1, j_136692);
                                bool x_136700 = sle64((int64_t) 0, copy_arg0_136699);
                                bool y_136701 = slt64(copy_arg0_136699, block_sizze_136604);
                                bool bounds_check_136702 = x_136700 && y_136701;
                                bool index_certs_136703;
                                
                                if (!bounds_check_136702) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_136699, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                double copy_arg0_136697 = ((double *) mem_138487)[j_136692];
                                int64_t copy_arg0_136698 = ((int64_t *) mem_138489)[j_136692];
                                double copy_arg0_136704 = ((double *) mem_138487)[copy_arg0_136699];
                                int64_t copy_arg0_136705 = ((int64_t *) mem_138489)[copy_arg0_136699];
                                
                                ((double *) mem_138487)[j_136692] = copy_arg0_136704;
                                ((int64_t *) mem_138489)[j_136692] = copy_arg0_136705;
                                ((double *) mem_138487)[copy_arg0_136699] = copy_arg0_136697;
                                ((int64_t *) mem_138489)[copy_arg0_136699] = copy_arg0_136698;
                                
                                int64_t tmp_136710 = sub64(j_136692, (int64_t) 1);
                                bool cond_136711 = sle64((int64_t) 0, tmp_136710);
                                bool loop_cond_136712;
                                
                                if (cond_136711) {
                                    bool y_137860 = slt64(tmp_136710, block_sizze_136604);
                                    bool bounds_check_137861 = cond_136711 && y_137860;
                                    bool index_certs_137862;
                                    
                                    if (!bounds_check_137861) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136710, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    double gt_arg1_137859 = ((double *) mem_138487)[j_136692];
                                    double gt_arg0_137863 = ((double *) mem_138487)[tmp_136710];
                                    bool defunc_0_leq_res_137864 = gt_arg0_137863 <= gt_arg1_137859;
                                    bool defunc_0_lifted_gt_res_137865 = !defunc_0_leq_res_137864;
                                    
                                    loop_cond_136712 = defunc_0_lifted_gt_res_137865;
                                } else {
                                    loop_cond_136712 = 0;
                                }
                                
                                bool loop_while_tmp_139321 = loop_cond_136712;
                                int64_t j_tmp_139324 = tmp_136710;
                                
                                loop_while_136689 = loop_while_tmp_139321;
                                j_136692 = j_tmp_139324;
                            }
                            s_136685 = loop_while_136689;
                            s_136688 = j_136692;
                        }
                    }
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138474, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138487, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138477, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138489, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                }
                if (memblock_alloc(ctx, &mem_138542, bytes_138473, "mem_138542")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138542.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138474, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                if (memblock_alloc(ctx, &mem_138546, bytes_138473, "mem_138546")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138546.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138477, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                
                int64_t data_136725;
                bool data_136726;
                int64_t data_136729;
                int64_t loop_dz2084Uz2082U_136730;
                bool loop_while_136731;
                int64_t stride_136734;
                
                if (memblock_set(ctx, &mem_param_138550, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_138553, &mem_138546, "mem_138546") != 0)
                    return 1;
                loop_dz2084Uz2082U_136730 = flat_dim_136605;
                loop_while_136731 = loop_cond_136722;
                stride_136734 = block_sizze_136604;
                while (loop_while_136731) {
                    int64_t next_stride_136735 = mul64((int64_t) 2, stride_136734);
                    bool zzero_136736 = next_stride_136735 == (int64_t) 0;
                    bool nonzzero_136737 = !zzero_136736;
                    bool nonzzero_cert_136738;
                    
                    if (!nonzzero_136737) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_merges_136739 = sdiv64(flat_dim_136605, next_stride_136735);
                    bool bounds_invalid_upwards_136740 = slt64(num_merges_136739, (int64_t) 0);
                    bool valid_136741 = !bounds_invalid_upwards_136740;
                    bool range_valid_c_136742;
                    
                    if (!valid_136741) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_136739, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:305:82-85\n   #7  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t m_136744 = sub64(next_stride_136735, (int64_t) 1);
                    bool zzero_leq_i_p_m_t_s_136745 = sle64((int64_t) 0, m_136744);
                    bool cond_136747 = slt64(next_stride_136735, (int64_t) 10);
                    bool protect_assert_disj_136748 = nonzzero_136724 || cond_136747;
                    bool nonzzero_cert_136749;
                    
                    if (!protect_assert_disj_136748) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t zeze_lhs_136750 = smod_safe64(next_stride_136735, merge_block_sizze_136608);
                    bool num_blocks_136751 = zeze_lhs_136750 == (int64_t) 0;
                    bool protect_assert_disj_136752 = cond_136747 || num_blocks_136751;
                    bool assert_c_136753;
                    
                    if (!protect_assert_disj_136752) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_blocks_136754 = sdiv_safe64(next_stride_136735, merge_block_sizze_136608);
                    int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755 = add64((int64_t) 1, num_blocks_136754);
                    int64_t j_m_i_136756 = sub64(next_stride_136735, stride_136734);
                    int64_t flat_dim_136757 = merge_block_sizze_136608 * num_blocks_136754;
                    bool bounds_invalid_upwards_136758 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, (int64_t) 0);
                    bool empty_slice_136759 = j_m_i_136756 == (int64_t) 0;
                    int64_t m_136760 = sub64(j_m_i_136756, (int64_t) 1);
                    bool zzero_lte_i_136761 = sle64((int64_t) 0, stride_136734);
                    bool i_lte_j_136762 = sle64(stride_136734, next_stride_136735);
                    bool empty_slice_136763 = stride_136734 == (int64_t) 0;
                    int64_t m_136764 = sub64(stride_136734, (int64_t) 1);
                    bool bounds_invalid_upwards_136765 = slt64(num_blocks_136754, (int64_t) 0);
                    bool cond_136766 = slt64((int64_t) 0, stride_136734);
                    bool valid_136767 = !bounds_invalid_upwards_136758;
                    int64_t i_p_m_t_s_136768 = add64(stride_136734, m_136760);
                    bool zzero_leq_i_p_m_t_s_136769 = sle64((int64_t) 0, m_136764);
                    bool i_p_m_t_s_leq_w_136770 = slt64(m_136764, next_stride_136735);
                    bool valid_136771 = !bounds_invalid_upwards_136765;
                    bool i_p_m_t_s_leq_w_136772 = slt64(m_136744, flat_dim_136757);
                    bool y_136773 = slt64((int64_t) 0, j_m_i_136756);
                    bool protect_assert_disj_136774 = cond_136747 || valid_136767;
                    bool range_valid_c_136775;
                    
                    if (!protect_assert_disj_136774) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool zzero_leq_i_p_m_t_s_136776 = sle64((int64_t) 0, i_p_m_t_s_136768);
                    bool i_p_m_t_s_leq_w_136777 = slt64(i_p_m_t_s_136768, next_stride_136735);
                    bool y_136778 = zzero_leq_i_p_m_t_s_136769 && i_p_m_t_s_leq_w_136770;
                    bool protect_assert_disj_136779 = cond_136747 || valid_136771;
                    bool range_valid_c_136780;
                    
                    if (!protect_assert_disj_136779) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_136754, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_136781 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136772;
                    bool y_136782 = zzero_lte_i_136761 && i_p_m_t_s_leq_w_136777;
                    bool forwards_ok_136783 = zzero_lte_i_136761 && y_136778;
                    bool ok_or_empty_136784 = zzero_136736 || y_136781;
                    bool protect_assert_disj_136785 = cond_136766 || y_136773;
                    bool y_136786 = zzero_leq_i_p_m_t_s_136776 && y_136782;
                    bool ok_or_empty_136787 = empty_slice_136763 || forwards_ok_136783;
                    bool protect_assert_disj_136788 = cond_136747 || ok_or_empty_136784;
                    bool index_certs_136789;
                    
                    if (!protect_assert_disj_136788) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) flat_dim_136757, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool loop_not_taken_136790 = !cond_136747;
                    bool protect_assert_disj_136791 = protect_assert_disj_136785 || loop_not_taken_136790;
                    bool index_certs_136792;
                    
                    if (!protect_assert_disj_136791) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool forwards_ok_136793 = i_lte_j_136762 && y_136786;
                    bool protect_assert_disj_136794 = cond_136747 || ok_or_empty_136787;
                    bool index_certs_136795;
                    
                    if (!protect_assert_disj_136794) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136796 = ok_or_empty_136787 || loop_not_taken_136790;
                    bool index_certs_136797;
                    
                    if (!protect_assert_disj_136796) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool ok_or_empty_136798 = empty_slice_136759 || forwards_ok_136793;
                    bool protect_assert_disj_136799 = cond_136747 || ok_or_empty_136798;
                    bool index_certs_136800;
                    
                    if (!protect_assert_disj_136799) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136801 = loop_not_taken_136790 || ok_or_empty_136798;
                    bool index_certs_136802;
                    
                    if (!protect_assert_disj_136801) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_138554 = (int64_t) 8 * num_merges_136739;
                    int64_t bytes_138555 = next_stride_136735 * binop_x_138554;
                    bool i_lte_j_136746 = sle64((int64_t) 0, next_stride_136735);
                    
                    if (mem_138556_cached_sizze_139492 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138556, &mem_138556_cached_sizze_139492, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138559_cached_sizze_139493 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138559, &mem_138559_cached_sizze_139493, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    
                    int64_t bytes_138568 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755;
                    int64_t binop_x_138584 = (int64_t) 8 * num_blocks_136754;
                    int64_t bytes_138585 = merge_block_sizze_136608 * binop_x_138584;
                    int64_t bytes_138630 = (int64_t) 16 * stride_136734;
                    
                    for (int64_t i_138248 = 0; i_138248 < num_merges_136739; i_138248++) {
                        int64_t start_136806 = mul64(next_stride_136735, i_138248);
                        int64_t j_m_i_136807 = sub64(loop_dz2084Uz2082U_136730, start_136806);
                        bool empty_slice_136808 = j_m_i_136807 == (int64_t) 0;
                        int64_t m_136809 = sub64(j_m_i_136807, (int64_t) 1);
                        int64_t i_p_m_t_s_136810 = add64(start_136806, m_136809);
                        bool zzero_leq_i_p_m_t_s_136811 = sle64((int64_t) 0, i_p_m_t_s_136810);
                        bool i_p_m_t_s_leq_w_136812 = slt64(i_p_m_t_s_136810, loop_dz2084Uz2082U_136730);
                        bool zzero_lte_i_136813 = sle64((int64_t) 0, start_136806);
                        bool i_lte_j_136814 = sle64(start_136806, loop_dz2084Uz2082U_136730);
                        bool y_136815 = i_p_m_t_s_leq_w_136812 && zzero_lte_i_136813;
                        bool y_136816 = zzero_leq_i_p_m_t_s_136811 && y_136815;
                        bool forwards_ok_136817 = i_lte_j_136814 && y_136816;
                        bool ok_or_empty_136818 = empty_slice_136808 || forwards_ok_136817;
                        bool index_certs_136819;
                        
                        if (!ok_or_empty_136818) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_136806, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_136730, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool i_p_m_t_s_leq_w_136820 = slt64(m_136744, j_m_i_136807);
                        bool y_136821 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136820;
                        bool forwards_ok_136822 = i_lte_j_136746 && y_136821;
                        bool ok_or_empty_136823 = zzero_136736 || forwards_ok_136822;
                        bool index_certs_136824;
                        
                        if (!ok_or_empty_136823) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) j_m_i_136807, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        if (cond_136747) {
                            double dummy_137891;
                            int64_t dummy_137892;
                            
                            if (cond_136766) {
                                double head_res_137893 = ((double *) mem_param_138550.mem)[start_136806];
                                int64_t head_res_137894 = ((int64_t *) mem_param_138553.mem)[start_136806];
                                
                                dummy_137891 = head_res_137893;
                                dummy_137892 = head_res_137894;
                            } else {
                                int64_t slice_137895 = stride_136734 + start_136806;
                                double head_res_137896 = ((double *) mem_param_138550.mem)[slice_137895];
                                int64_t head_res_137897 = ((int64_t *) mem_param_138553.mem)[slice_137895];
                                
                                dummy_137891 = head_res_137896;
                                dummy_137892 = head_res_137897;
                            }
                            if (memblock_alloc(ctx, &mem_138631, bytes_138630, "mem_138631")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139334 = 0; nest_i_139334 < next_stride_136735; nest_i_139334++) {
                                ((double *) mem_138631.mem)[nest_i_139334] = dummy_137891;
                            }
                            if (memblock_alloc(ctx, &mem_138633, bytes_138630, "mem_138633")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139335 = 0; nest_i_139335 < next_stride_136735; nest_i_139335++) {
                                ((int64_t *) mem_138633.mem)[nest_i_139335] = dummy_137892;
                            }
                            
                            int64_t data_137900;
                            int64_t i_137904 = (int64_t) 0;
                            
                            for (int64_t k_137903 = 0; k_137903 < next_stride_136735; k_137903++) {
                                int64_t j_137907 = sub64(k_137903, i_137904);
                                bool cond_137908 = j_137907 == j_m_i_136756;
                                bool cond_137909;
                                
                                if (cond_137908) {
                                    cond_137909 = 1;
                                } else {
                                    bool cond_137910 = slt64(i_137904, stride_136734);
                                    bool cond_f_res_137911;
                                    
                                    if (cond_137910) {
                                        bool x_137912 = sle64((int64_t) 0, j_137907);
                                        bool y_137913 = slt64(j_137907, j_m_i_136756);
                                        bool bounds_check_137914 = x_137912 && y_137913;
                                        bool index_certs_137915;
                                        
                                        if (!bounds_check_137914) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137919 = sle64((int64_t) 0, i_137904);
                                        bool bounds_check_137920 = cond_137910 && x_137919;
                                        bool index_certs_137921;
                                        
                                        if (!bounds_check_137920) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137916 = stride_136734 + j_137907;
                                        int64_t slice_137917 = start_136806 + slice_137916;
                                        double leq_arg1_137918 = ((double *) mem_param_138550.mem)[slice_137917];
                                        int64_t slice_137922 = start_136806 + i_137904;
                                        double leq_arg0_137923 = ((double *) mem_param_138550.mem)[slice_137922];
                                        bool defunc_0_leq_res_137924 = leq_arg0_137923 <= leq_arg1_137918;
                                        
                                        cond_f_res_137911 = defunc_0_leq_res_137924;
                                    } else {
                                        cond_f_res_137911 = 0;
                                    }
                                    cond_137909 = cond_f_res_137911;
                                }
                                
                                int64_t loopres_137925;
                                double loopres_137926;
                                int64_t loopres_137927;
                                
                                if (cond_137909) {
                                    bool x_137929 = sle64((int64_t) 0, i_137904);
                                    bool y_137930 = slt64(i_137904, stride_136734);
                                    bool bounds_check_137931 = x_137929 && y_137930;
                                    bool index_certs_137932;
                                    
                                    if (!bounds_check_137931) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t tmp_137928 = add64((int64_t) 1, i_137904);
                                    int64_t slice_137933 = start_136806 + i_137904;
                                    double tmp_137934 = ((double *) mem_param_138550.mem)[slice_137933];
                                    int64_t tmp_137935 = ((int64_t *) mem_param_138553.mem)[slice_137933];
                                    
                                    loopres_137925 = tmp_137928;
                                    loopres_137926 = tmp_137934;
                                    loopres_137927 = tmp_137935;
                                } else {
                                    bool x_137936 = sle64((int64_t) 0, j_137907);
                                    bool y_137937 = slt64(j_137907, j_m_i_136756);
                                    bool bounds_check_137938 = x_137936 && y_137937;
                                    bool index_certs_137939;
                                    
                                    if (!bounds_check_137938) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137940 = stride_136734 + j_137907;
                                    int64_t slice_137941 = start_136806 + slice_137940;
                                    double tmp_137942 = ((double *) mem_param_138550.mem)[slice_137941];
                                    int64_t tmp_137943 = ((int64_t *) mem_param_138553.mem)[slice_137941];
                                    
                                    loopres_137925 = i_137904;
                                    loopres_137926 = tmp_137942;
                                    loopres_137927 = tmp_137943;
                                }
                                ((double *) mem_138631.mem)[k_137903] = loopres_137926;
                                ((int64_t *) mem_138633.mem)[k_137903] = loopres_137927;
                                
                                int64_t i_tmp_139336 = loopres_137925;
                                
                                i_137904 = i_tmp_139336;
                            }
                            data_137900 = i_137904;
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138631, "mem_138631") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138633, "mem_138633") != 0)
                                return 1;
                        } else {
                            if (mem_138569_cached_sizze_139494 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138569, &mem_138569_cached_sizze_139494, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138571_cached_sizze_139495 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138571, &mem_138571_cached_sizze_139495, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138234 = 0; i_138234 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755; i_138234++) {
                                int64_t split_count_arg3_136886 = mul64(merge_block_sizze_136608, i_138234);
                                int64_t defunc_0_split_count_res_136887;
                                int64_t defunc_0_split_count_res_136888;
                                int64_t defunc_0_split_count_res_136889;
                                int64_t defunc_0_split_count_res_136890;
                                int64_t defunc_0_split_count_res_136891;
                                
                                if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_136887, &defunc_0_split_count_res_136888, &defunc_0_split_count_res_136889, &defunc_0_split_count_res_136890, &defunc_0_split_count_res_136891, (int64_t) 0, stride_136734, (int64_t) 0, j_m_i_136756, split_count_arg3_136886) != 0) {
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                bool loop_cond_136892 = slt64((int64_t) 0, defunc_0_split_count_res_136891);
                                bool defunc_0_split_count_res_136893;
                                int64_t defunc_0_split_count_res_136894;
                                int64_t defunc_0_split_count_res_136895;
                                int64_t defunc_0_split_count_res_136896;
                                int64_t defunc_0_split_count_res_136897;
                                int64_t defunc_0_split_count_res_136898;
                                bool loop_while_136899;
                                int64_t ss_136900;
                                int64_t ss_136901;
                                int64_t tt_136902;
                                int64_t tt_136903;
                                int64_t count_136904;
                                
                                loop_while_136899 = loop_cond_136892;
                                ss_136900 = defunc_0_split_count_res_136887;
                                ss_136901 = defunc_0_split_count_res_136888;
                                tt_136902 = defunc_0_split_count_res_136889;
                                tt_136903 = defunc_0_split_count_res_136890;
                                count_136904 = defunc_0_split_count_res_136891;
                                while (loop_while_136899) {
                                    int64_t zlze_lhs_136905 = sub64(ss_136901, ss_136900);
                                    bool cond_136906 = sle64(zlze_lhs_136905, (int64_t) 0);
                                    int64_t defunc_0_lifted_step_res_136907;
                                    int64_t defunc_0_lifted_step_res_136908;
                                    int64_t defunc_0_lifted_step_res_136909;
                                    int64_t defunc_0_lifted_step_res_136910;
                                    
                                    if (cond_136906) {
                                        int64_t tmp_137946 = add64(tt_136902, count_136904);
                                        
                                        defunc_0_lifted_step_res_136907 = ss_136900;
                                        defunc_0_lifted_step_res_136908 = tmp_137946;
                                        defunc_0_lifted_step_res_136909 = tt_136903;
                                        defunc_0_lifted_step_res_136910 = (int64_t) 0;
                                    } else {
                                        int64_t zlze_lhs_136912 = sub64(tt_136903, tt_136902);
                                        bool cond_136913 = sle64(zlze_lhs_136912, (int64_t) 0);
                                        int64_t defunc_0_lifted_step_res_f_res_136914;
                                        int64_t defunc_0_lifted_step_res_f_res_136915;
                                        int64_t defunc_0_lifted_step_res_f_res_136916;
                                        int64_t defunc_0_lifted_step_res_f_res_136917;
                                        
                                        if (cond_136913) {
                                            int64_t tmp_137947 = add64(ss_136900, count_136904);
                                            
                                            defunc_0_lifted_step_res_f_res_136914 = tmp_137947;
                                            defunc_0_lifted_step_res_f_res_136915 = tt_136902;
                                            defunc_0_lifted_step_res_f_res_136916 = tt_136903;
                                            defunc_0_lifted_step_res_f_res_136917 = (int64_t) 0;
                                        } else {
                                            bool cond_136919 = count_136904 == (int64_t) 1;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136920;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136921;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136922;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136923;
                                            
                                            if (cond_136919) {
                                                bool x_137949 = sle64((int64_t) 0, ss_136900);
                                                bool y_137950 = slt64(ss_136900, stride_136734);
                                                bool bounds_check_137951 = x_137949 && y_137950;
                                                bool index_certs_137952;
                                                
                                                if (!bounds_check_137951) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_136900, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:305:82-85\n   #14 ftsort.fut:299:1-305:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                bool x_137955 = sle64((int64_t) 0, tt_136902);
                                                bool y_137956 = slt64(tt_136902, j_m_i_136756);
                                                bool bounds_check_137957 = x_137955 && y_137956;
                                                bool index_certs_137958;
                                                
                                                if (!bounds_check_137957) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_136902, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:305:82-85\n   #14 ftsort.fut:299:1-305:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                int64_t slice_137953 = start_136806 + ss_136900;
                                                double leq_arg1_137954 = ((double *) mem_param_138550.mem)[slice_137953];
                                                int64_t slice_137959 = stride_136734 + tt_136902;
                                                int64_t slice_137960 = start_136806 + slice_137959;
                                                double leq_arg0_137961 = ((double *) mem_param_138550.mem)[slice_137960];
                                                bool defunc_0_leq_res_137962 = leq_arg0_137961 <= leq_arg1_137954;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                
                                                if (defunc_0_leq_res_137962) {
                                                    int64_t tmp_137965 = add64((int64_t) 1, tt_136902);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = ss_136900;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tmp_137965;
                                                } else {
                                                    int64_t tmp_137966 = add64((int64_t) 1, ss_136900);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = tmp_137966;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tt_136902;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = tt_136903;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = (int64_t) 0;
                                            } else {
                                                int64_t m_136942 = sdiv64(count_136904, (int64_t) 2);
                                                int64_t n_136943 = sub64(count_136904, m_136942);
                                                bool cond_136944 = n_136943 == (int64_t) 0;
                                                int64_t zgze_lhs_136945 = add64(ss_136900, m_136942);
                                                bool cond_f_res_136946 = sle64(ss_136901, zgze_lhs_136945);
                                                bool x_136947 = !cond_136944;
                                                bool y_136948 = cond_f_res_136946 && x_136947;
                                                bool cond_136949 = cond_136944 || y_136948;
                                                bool leq_y_x_136950;
                                                
                                                if (cond_136949) {
                                                    leq_y_x_136950 = 1;
                                                } else {
                                                    bool x_136951 = sle64((int64_t) 0, zgze_lhs_136945);
                                                    bool y_136952 = slt64(zgze_lhs_136945, stride_136734);
                                                    bool bounds_check_136953 = x_136951 && y_136952;
                                                    bool index_certs_136954;
                                                    
                                                    if (!bounds_check_136953) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_136945, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:305:82-85\n   #14 ftsort.fut:299:1-305:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t zm_lhs_136957 = add64(tt_136902, n_136943);
                                                    int64_t leq_arg0_136958 = sub64(zm_lhs_136957, (int64_t) 1);
                                                    bool x_136959 = sle64((int64_t) 0, leq_arg0_136958);
                                                    bool y_136960 = slt64(leq_arg0_136958, j_m_i_136756);
                                                    bool bounds_check_136961 = x_136959 && y_136960;
                                                    bool index_certs_136962;
                                                    
                                                    if (!bounds_check_136961) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_136958, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:305:82-85\n   #14 ftsort.fut:299:1-305:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t slice_136955 = start_136806 + zgze_lhs_136945;
                                                    double leq_arg1_136956 = ((double *) mem_param_138550.mem)[slice_136955];
                                                    int64_t slice_136963 = stride_136734 + leq_arg0_136958;
                                                    int64_t slice_136964 = start_136806 + slice_136963;
                                                    double leq_arg0_136965 = ((double *) mem_param_138550.mem)[slice_136964];
                                                    bool defunc_0_leq_res_136966 = leq_arg0_136965 <= leq_arg1_136956;
                                                    
                                                    leq_y_x_136950 = defunc_0_leq_res_136966;
                                                }
                                                
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                                
                                                if (leq_y_x_136950) {
                                                    int64_t tmp_137967 = add64(tt_136902, n_136943);
                                                    int64_t tmp_137968 = sub64(count_136904, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tmp_137967;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tt_136903;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = tmp_137968;
                                                } else {
                                                    int64_t tmp_136972 = add64(tt_136902, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tt_136902;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tmp_136972;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = count_136904;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = ss_136900;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                            }
                                            defunc_0_lifted_step_res_f_res_136914 = defunc_0_lifted_step_res_f_res_f_res_136920;
                                            defunc_0_lifted_step_res_f_res_136915 = defunc_0_lifted_step_res_f_res_f_res_136921;
                                            defunc_0_lifted_step_res_f_res_136916 = defunc_0_lifted_step_res_f_res_f_res_136922;
                                            defunc_0_lifted_step_res_f_res_136917 = defunc_0_lifted_step_res_f_res_f_res_136923;
                                        }
                                        defunc_0_lifted_step_res_136907 = defunc_0_lifted_step_res_f_res_136914;
                                        defunc_0_lifted_step_res_136908 = defunc_0_lifted_step_res_f_res_136915;
                                        defunc_0_lifted_step_res_136909 = defunc_0_lifted_step_res_f_res_136916;
                                        defunc_0_lifted_step_res_136910 = defunc_0_lifted_step_res_f_res_136917;
                                    }
                                    
                                    int64_t loopres_136973;
                                    int64_t loopres_136974;
                                    int64_t loopres_136975;
                                    int64_t loopres_136976;
                                    int64_t loopres_136977;
                                    
                                    if (futrts_lifted_normalizze_8911(ctx, &loopres_136973, &loopres_136974, &loopres_136975, &loopres_136976, &loopres_136977, defunc_0_lifted_step_res_136907, ss_136901, defunc_0_lifted_step_res_136908, defunc_0_lifted_step_res_136909, defunc_0_lifted_step_res_136910) != 0) {
                                        err = 1;
                                        goto cleanup;
                                    }
                                    
                                    bool loop_cond_136978 = slt64((int64_t) 0, loopres_136977);
                                    bool loop_while_tmp_139341 = loop_cond_136978;
                                    int64_t ss_tmp_139342 = loopres_136973;
                                    int64_t ss_tmp_139343 = loopres_136974;
                                    int64_t tt_tmp_139344 = loopres_136975;
                                    int64_t tt_tmp_139345 = loopres_136976;
                                    int64_t count_tmp_139346 = loopres_136977;
                                    
                                    loop_while_136899 = loop_while_tmp_139341;
                                    ss_136900 = ss_tmp_139342;
                                    ss_136901 = ss_tmp_139343;
                                    tt_136902 = tt_tmp_139344;
                                    tt_136903 = tt_tmp_139345;
                                    count_136904 = count_tmp_139346;
                                }
                                defunc_0_split_count_res_136893 = loop_while_136899;
                                defunc_0_split_count_res_136894 = ss_136900;
                                defunc_0_split_count_res_136895 = ss_136901;
                                defunc_0_split_count_res_136896 = tt_136902;
                                defunc_0_split_count_res_136897 = tt_136903;
                                defunc_0_split_count_res_136898 = count_136904;
                                ((int64_t *) mem_138569)[i_138234] = defunc_0_split_count_res_136894;
                                ((int64_t *) mem_138571)[i_138234] = defunc_0_split_count_res_136896;
                            }
                            if (mem_138586_cached_sizze_139496 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138586, &mem_138586_cached_sizze_139496, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138589_cached_sizze_139497 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138589, &mem_138589_cached_sizze_139497, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138241 = 0; i_138241 < num_blocks_136754; i_138241++) {
                                bool y_136984 = slt64(i_138241, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool index_certs_136986;
                                
                                if (!y_136984) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138241, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136987 = ((int64_t *) mem_138569)[i_138241];
                                int64_t defunc_0_f_res_136988 = ((int64_t *) mem_138571)[i_138241];
                                int64_t tmp_136989 = add64((int64_t) 1, i_138241);
                                bool x_136990 = sle64((int64_t) 0, tmp_136989);
                                bool y_136991 = slt64(tmp_136989, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool bounds_check_136992 = x_136990 && y_136991;
                                bool index_certs_136993;
                                
                                if (!bounds_check_136992) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136989, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136994 = ((int64_t *) mem_138569)[tmp_136989];
                                int64_t defunc_0_f_res_136995 = ((int64_t *) mem_138571)[tmp_136989];
                                int64_t merge_sequential_arg2_136996 = add64(stride_136734, defunc_0_f_res_136988);
                                int64_t merge_sequential_arg2_136997 = add64(stride_136734, defunc_0_f_res_136995);
                                int64_t j_m_i_136998 = sub64(merge_sequential_arg2_136997, merge_sequential_arg2_136996);
                                bool empty_slice_136999 = j_m_i_136998 == (int64_t) 0;
                                int64_t m_137000 = sub64(j_m_i_136998, (int64_t) 1);
                                int64_t i_p_m_t_s_137001 = add64(merge_sequential_arg2_136996, m_137000);
                                bool zzero_leq_i_p_m_t_s_137002 = sle64((int64_t) 0, i_p_m_t_s_137001);
                                bool i_p_m_t_s_leq_w_137003 = slt64(i_p_m_t_s_137001, next_stride_136735);
                                bool zzero_lte_i_137004 = sle64((int64_t) 0, merge_sequential_arg2_136996);
                                bool i_lte_j_137005 = sle64(merge_sequential_arg2_136996, merge_sequential_arg2_136997);
                                bool y_137006 = i_p_m_t_s_leq_w_137003 && zzero_lte_i_137004;
                                bool y_137007 = zzero_leq_i_p_m_t_s_137002 && y_137006;
                                bool forwards_ok_137008 = i_lte_j_137005 && y_137007;
                                bool ok_or_empty_137009 = empty_slice_136999 || forwards_ok_137008;
                                bool index_certs_137010;
                                
                                if (!ok_or_empty_137009) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_136996, ":", (long long) merge_sequential_arg2_136997, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t j_m_i_137011 = sub64(defunc_0_f_res_136994, defunc_0_f_res_136987);
                                bool empty_slice_137012 = j_m_i_137011 == (int64_t) 0;
                                int64_t m_137013 = sub64(j_m_i_137011, (int64_t) 1);
                                int64_t i_p_m_t_s_137014 = add64(defunc_0_f_res_136987, m_137013);
                                bool zzero_leq_i_p_m_t_s_137015 = sle64((int64_t) 0, i_p_m_t_s_137014);
                                bool i_p_m_t_s_leq_w_137016 = slt64(i_p_m_t_s_137014, next_stride_136735);
                                bool zzero_lte_i_137017 = sle64((int64_t) 0, defunc_0_f_res_136987);
                                bool i_lte_j_137018 = sle64(defunc_0_f_res_136987, defunc_0_f_res_136994);
                                bool y_137019 = i_p_m_t_s_leq_w_137016 && zzero_lte_i_137017;
                                bool y_137020 = zzero_leq_i_p_m_t_s_137015 && y_137019;
                                bool forwards_ok_137021 = i_lte_j_137018 && y_137020;
                                bool ok_or_empty_137022 = empty_slice_137012 || forwards_ok_137021;
                                bool index_certs_137023;
                                
                                if (!ok_or_empty_137022) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136987, ":", (long long) defunc_0_f_res_136994, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool cond_137024 = slt64((int64_t) 0, j_m_i_137011);
                                double dummy_137025;
                                int64_t dummy_137026;
                                
                                if (cond_137024) {
                                    bool index_certs_137969;
                                    
                                    if (!cond_137024) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:305:82-85\n   #13 ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137970 = start_136806 + defunc_0_f_res_136987;
                                    double head_res_137971 = ((double *) mem_param_138550.mem)[slice_137970];
                                    int64_t head_res_137972 = ((int64_t *) mem_param_138553.mem)[slice_137970];
                                    
                                    dummy_137025 = head_res_137971;
                                    dummy_137026 = head_res_137972;
                                } else {
                                    bool y_137031 = slt64((int64_t) 0, j_m_i_136998);
                                    bool index_certs_137032;
                                    
                                    if (!y_137031) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:305:82-85\n   #13 ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137033 = start_136806 + merge_sequential_arg2_136996;
                                    double head_res_137034 = ((double *) mem_param_138550.mem)[slice_137033];
                                    int64_t head_res_137035 = ((int64_t *) mem_param_138553.mem)[slice_137033];
                                    
                                    dummy_137025 = head_res_137034;
                                    dummy_137026 = head_res_137035;
                                }
                                for (int64_t nest_i_139349 = 0; nest_i_139349 < merge_block_sizze_136608; nest_i_139349++) {
                                    ((double *) mem_138586)[i_138241 * merge_block_sizze_136608 + nest_i_139349] = dummy_137025;
                                }
                                for (int64_t nest_i_139350 = 0; nest_i_139350 < merge_block_sizze_136608; nest_i_139350++) {
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + nest_i_139350] = dummy_137026;
                                }
                                
                                int64_t data_137038;
                                int64_t i_137042 = (int64_t) 0;
                                
                                for (int64_t k_137041 = 0; k_137041 < merge_block_sizze_136608; k_137041++) {
                                    int64_t j_137045 = sub64(k_137041, i_137042);
                                    bool cond_137046 = j_137045 == j_m_i_136998;
                                    bool cond_137047;
                                    
                                    if (cond_137046) {
                                        cond_137047 = 1;
                                    } else {
                                        bool cond_137048 = slt64(i_137042, j_m_i_137011);
                                        bool cond_f_res_137049;
                                        
                                        if (cond_137048) {
                                            bool x_137973 = sle64((int64_t) 0, j_137045);
                                            bool y_137974 = slt64(j_137045, j_m_i_136998);
                                            bool bounds_check_137975 = x_137973 && y_137974;
                                            bool index_certs_137976;
                                            
                                            if (!bounds_check_137975) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            bool x_137980 = sle64((int64_t) 0, i_137042);
                                            bool bounds_check_137981 = cond_137048 && x_137980;
                                            bool index_certs_137982;
                                            
                                            if (!bounds_check_137981) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137977 = merge_sequential_arg2_136996 + j_137045;
                                            int64_t slice_137978 = start_136806 + slice_137977;
                                            double leq_arg1_137979 = ((double *) mem_param_138550.mem)[slice_137978];
                                            int64_t slice_137983 = defunc_0_f_res_136987 + i_137042;
                                            int64_t slice_137984 = start_136806 + slice_137983;
                                            double leq_arg0_137985 = ((double *) mem_param_138550.mem)[slice_137984];
                                            bool defunc_0_leq_res_137986 = leq_arg0_137985 <= leq_arg1_137979;
                                            
                                            cond_f_res_137049 = defunc_0_leq_res_137986;
                                        } else {
                                            cond_f_res_137049 = 0;
                                        }
                                        cond_137047 = cond_f_res_137049;
                                    }
                                    
                                    int64_t loopres_137064;
                                    double loopres_137065;
                                    int64_t loopres_137066;
                                    
                                    if (cond_137047) {
                                        bool x_137988 = sle64((int64_t) 0, i_137042);
                                        bool y_137989 = slt64(i_137042, j_m_i_137011);
                                        bool bounds_check_137990 = x_137988 && y_137989;
                                        bool index_certs_137991;
                                        
                                        if (!bounds_check_137990) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t tmp_137987 = add64((int64_t) 1, i_137042);
                                        int64_t slice_137992 = defunc_0_f_res_136987 + i_137042;
                                        int64_t slice_137993 = start_136806 + slice_137992;
                                        double tmp_137994 = ((double *) mem_param_138550.mem)[slice_137993];
                                        int64_t tmp_137995 = ((int64_t *) mem_param_138553.mem)[slice_137993];
                                        
                                        loopres_137064 = tmp_137987;
                                        loopres_137065 = tmp_137994;
                                        loopres_137066 = tmp_137995;
                                    } else {
                                        bool x_137076 = sle64((int64_t) 0, j_137045);
                                        bool y_137077 = slt64(j_137045, j_m_i_136998);
                                        bool bounds_check_137078 = x_137076 && y_137077;
                                        bool index_certs_137079;
                                        
                                        if (!bounds_check_137078) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137080 = merge_sequential_arg2_136996 + j_137045;
                                        int64_t slice_137081 = start_136806 + slice_137080;
                                        double tmp_137082 = ((double *) mem_param_138550.mem)[slice_137081];
                                        int64_t tmp_137083 = ((int64_t *) mem_param_138553.mem)[slice_137081];
                                        
                                        loopres_137064 = i_137042;
                                        loopres_137065 = tmp_137082;
                                        loopres_137066 = tmp_137083;
                                    }
                                    ((double *) mem_138586)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137065;
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137066;
                                    
                                    int64_t i_tmp_139351 = loopres_137064;
                                    
                                    i_137042 = i_tmp_139351;
                                }
                                data_137038 = i_137042;
                            }
                            if (memblock_alloc(ctx, &mem_138624, bytes_138585, "mem_138624")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138624.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138586, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_alloc(ctx, &mem_138628, bytes_138585, "mem_138628")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138628.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138589, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138624, "mem_138624") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138628, "mem_138628") != 0)
                                return 1;
                        }
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138556, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138651.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
                            return 1;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138559, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
                            return 1;
                    }
                    
                    int64_t flat_dim_137090 = next_stride_136735 * num_merges_136739;
                    
                    if (memblock_alloc(ctx, &mem_138662, bytes_138555, "mem_138662")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138662.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138556, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    if (memblock_alloc(ctx, &mem_138666, bytes_138555, "mem_138666")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138666.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138559, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    
                    bool loop_cond_137093 = slt64(next_stride_136735, flat_dim_136605);
                    
                    if (memblock_set(ctx, &mem_param_tmp_139325, &mem_138662, "mem_138662") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_tmp_139326, &mem_138666, "mem_138666") != 0)
                        return 1;
                    
                    int64_t loop_dz2084Uz2082U_tmp_139327 = flat_dim_137090;
                    bool loop_while_tmp_139328 = loop_cond_137093;
                    int64_t stride_tmp_139331 = next_stride_136735;
                    
                    if (memblock_set(ctx, &mem_param_138550, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_138553, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
                        return 1;
                    loop_dz2084Uz2082U_136730 = loop_dz2084Uz2082U_tmp_139327;
                    loop_while_136731 = loop_while_tmp_139328;
                    stride_136734 = stride_tmp_139331;
                }
                if (memblock_set(ctx, &ext_mem_138673, &mem_param_138550, "mem_param_138550") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_138672, &mem_param_138553, "mem_param_138553") != 0)
                    return 1;
                data_136725 = loop_dz2084Uz2082U_136730;
                data_136726 = loop_while_136731;
                data_136729 = stride_136734;
                if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
                    return 1;
                
                bool empty_slice_137094 = dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 == (int64_t) 0;
                bool zzero_leq_i_p_m_t_s_137095 = sle64((int64_t) 0, zs_lhs_136589);
                bool i_p_m_t_s_leq_w_137096 = slt64(zs_lhs_136589, data_136725);
                bool y_137097 = zzero_leq_i_p_m_t_s_137095 && i_p_m_t_s_leq_w_137096;
                bool ok_or_empty_137098 = empty_slice_137094 || y_137097;
                bool index_certs_137099;
                
                if (!ok_or_empty_137098) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] out of bounds for array of shape [", (long long) data_136725, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:305:82-85\n   #7  ftsort.fut:299:1-305:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_138676, &ext_mem_138672, "ext_mem_138672") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
                return 1;
            for (int64_t i_138257 = 0; i_138257 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138257++) {
                int64_t eta_p_137104 = ((int64_t *) ext_mem_138676.mem)[i_138257];
                bool x_137105 = sle64((int64_t) 0, eta_p_137104);
                bool y_137106 = slt64(eta_p_137104, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                bool bounds_check_137107 = x_137105 && y_137106;
                bool index_certs_137108;
                
                if (!bounds_check_137107) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137104, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool index_concat_cmp_137109 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, eta_p_137104);
                int64_t index_concat_branch_137110 = btoi_bool_i64(index_concat_cmp_137109);
                int64_t index_concat_branch_137111;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138006 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t index_primexp_138007 = add64(defunc_0_f_res_136532, index_concat_i_138006);
                    
                    index_concat_branch_137111 = index_primexp_138007;
                } else {
                    int64_t index_primexp_137114 = add64(defunc_0_f_res_136531, eta_p_137104);
                    
                    index_concat_branch_137111 = index_primexp_137114;
                }
                
                double index_concat_branch_137115;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138008 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t slice_138009 = defunc_0_f_res_136532 + index_concat_i_138008;
                    int64_t slice_138010 = p_136403 + slice_138009;
                    double index_concat_138011 = ((double *) b_list_mem_138404.mem)[slice_138010];
                    
                    index_concat_branch_137115 = index_concat_138011;
                } else {
                    int64_t slice_137120 = defunc_0_f_res_136531 + eta_p_137104;
                    int64_t slice_137121 = p_136402 + slice_137120;
                    double index_concat_137122 = ((double *) a_list_mem_138403.mem)[slice_137121];
                    
                    index_concat_branch_137115 = index_concat_137122;
                }
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137110;
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137111;
                ((double *) mem_138447)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137115;
            }
            if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
                return 1;
            for (int64_t i_138263 = 0; i_138263 < perThread_136439; i_138263++) {
                int64_t lifted_lambda_res_137141 = add64(zm_rhs_136550, i_138263);
                
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + i_138263] = lifted_lambda_res_137141;
            }
            
            bool cond_137142 = card_136551 == zp_rhs_136438;
            
            if (cond_137142) {
                bool y_138012 = slt64(card_136551, perThread_136439);
                bool index_certs_138013;
                
                if (!y_138012) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:199:46-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:305:82-85\n   #3  ftsort.fut:299:1-305:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + card_136551] = (int64_t) -1;
            }
        }
        for (int64_t nest_i_139358 = 0; nest_i_139358 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139358++) {
            ((double *) mem_138410.mem)[lb_merge_136409 + nest_i_139358] = 0.0;
        }
        if (mem_138728_cached_sizze_139498 < bytes_138725) {
            err = lexical_realloc(ctx, &mem_138728, &mem_138728_cached_sizze_139498, bytes_138725);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_139359 = 0; nest_i_139359 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139359++) {
            ((int64_t *) mem_138728)[nest_i_139359] = (int64_t) -1;
        }
        for (int64_t nest_i_139360 = 0; nest_i_139360 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139360++) {
            ((int64_t *) mem_138406.mem)[lb_merge_136409 + nest_i_139360] = (int64_t) -1;
        }
        for (int64_t write_iter_138278 = 0; write_iter_138278 < dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440; write_iter_138278++) {
            int64_t new_index_138359 = squot64(write_iter_138278, perThread_136439);
            int64_t binop_y_138361 = perThread_136439 * new_index_138359;
            int64_t new_index_138362 = write_iter_138278 - binop_y_138361;
            int64_t write_iv_138282 = ((int64_t *) mem_138438)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138283 = ((int64_t *) mem_138441)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138284 = ((int64_t *) mem_138444)[new_index_138359 * perThread_136439 + new_index_138362];
            double write_iv_138285 = ((double *) mem_138447)[new_index_138359 * perThread_136439 + new_index_138362];
            
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138406.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138283;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138728)[write_iv_138282] = write_iv_138284;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((double *) mem_138410.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138285;
            }
        }
        
        int64_t defunc_0_mergeFunc_par_res_137151 = ((int64_t *) mem_138421)[tmp_136386];
        int64_t defunc_0_mergeFunc_par_res_137152 = ((int64_t *) mem_138423)[tmp_136386];
        
        for (int64_t i_138291 = 0; i_138291 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; i_138291++) {
            int64_t eta_p_137164 = ((int64_t *) mem_138406.mem)[lb_merge_136409 + i_138291];
            int64_t eta_p_137165 = ((int64_t *) mem_138728)[i_138291];
            bool cond_137166 = eta_p_137164 == (int64_t) 0;
            int64_t lifted_lambda_res_137167;
            
            if (cond_137166) {
                int64_t tmp_138019 = add64(p_136402, eta_p_137165);
                
                lifted_lambda_res_137167 = tmp_138019;
            } else {
                bool cond_137169 = eta_p_137164 == (int64_t) 1;
                int64_t lifted_lambda_res_f_res_137170;
                
                if (cond_137169) {
                    int64_t tmp_138020 = add64(p_136403, eta_p_137165);
                    
                    lifted_lambda_res_f_res_137170 = tmp_138020;
                } else {
                    lifted_lambda_res_f_res_137170 = eta_p_137165;
                }
                lifted_lambda_res_137167 = lifted_lambda_res_f_res_137170;
            }
            ((int64_t *) mem_138408.mem)[lb_merge_136409 + i_138291] = lifted_lambda_res_137167;
        }
        
        int64_t corrected_ubs_137174 = add64(p_136402, defunc_0_mergeFunc_par_res_137151);
        int64_t corrected_ubs_137175 = add64(p_136403, defunc_0_mergeFunc_par_res_137152);
        bool cond_137194 = slt64(corrected_ubs_137174, zl_rhs_136372);
        bool loop_cond_f_res_137195 = slt64(corrected_ubs_137175, zl_rhs_136374);
        bool x_137196 = !cond_137194;
        bool y_137197 = loop_cond_f_res_137195 && x_137196;
        bool loop_cond_137198 = cond_137194 || y_137197;
        bool loop_while_tmp_139288 = loop_cond_137198;
        int64_t p_tmp_139292 = corrected_ubs_137174;
        int64_t p_tmp_139293 = corrected_ubs_137175;
        
        loop_while_136398 = loop_while_tmp_139288;
        p_136402 = p_tmp_139292;
        p_136403 = p_tmp_139293;
    }
    defunc_0_merge_pipeline_res_136392 = loop_while_136398;
    defunc_0_merge_pipeline_res_136396 = p_136402;
    defunc_0_merge_pipeline_res_136397 = p_136403;
    
    int64_t dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 = sub64(na_123952, defunc_0_merge_pipeline_res_136396);
    int64_t arg_137200 = add64(defunc_0_merge_pipeline_res_136396, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 = sub64(dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, arg_137200);
    int64_t dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 = sub64(nb_123953, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 = add64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202);
    bool empty_slice_137204 = dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 == (int64_t) 0;
    int64_t m_137205 = sub64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 1);
    int64_t i_p_m_t_s_137206 = add64(defunc_0_merge_pipeline_res_136396, m_137205);
    bool zzero_leq_i_p_m_t_s_137207 = sle64((int64_t) 0, i_p_m_t_s_137206);
    bool i_p_m_t_s_leq_w_137208 = slt64(i_p_m_t_s_137206, na_123952);
    bool zzero_lte_i_137209 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136396);
    bool i_lte_j_137210 = sle64(defunc_0_merge_pipeline_res_136396, na_123952);
    bool y_137211 = i_p_m_t_s_leq_w_137208 && zzero_lte_i_137209;
    bool y_137212 = zzero_leq_i_p_m_t_s_137207 && y_137211;
    bool forwards_ok_137213 = i_lte_j_137210 && y_137212;
    bool ok_or_empty_137214 = empty_slice_137204 || forwards_ok_137213;
    bool index_certs_137215;
    
    if (!ok_or_empty_137214) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136396, ":", (long long) na_123952, "] out of bounds for array of shape [", (long long) na_123952, "].", "-> #0  ftsort.fut:256:57-73\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137216 = slt64(na_123952, defunc_0_merge_pipeline_res_136396);
    bool valid_137217 = !bounds_invalid_upwards_137216;
    bool range_valid_c_137218;
    
    if (!valid_137217) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136396, "..<", (long long) na_123952, " is invalid.", "-> #0  ftsort.fut:256:45-55\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137220 = dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 == (int64_t) 0;
    int64_t m_137221 = sub64(dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202, (int64_t) 1);
    int64_t i_p_m_t_s_137222 = add64(defunc_0_merge_pipeline_res_136397, m_137221);
    bool zzero_leq_i_p_m_t_s_137223 = sle64((int64_t) 0, i_p_m_t_s_137222);
    bool i_p_m_t_s_leq_w_137224 = slt64(i_p_m_t_s_137222, nb_123953);
    bool zzero_lte_i_137225 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136397);
    bool i_lte_j_137226 = sle64(defunc_0_merge_pipeline_res_136397, nb_123953);
    bool y_137227 = i_p_m_t_s_leq_w_137224 && zzero_lte_i_137225;
    bool y_137228 = zzero_leq_i_p_m_t_s_137223 && y_137227;
    bool forwards_ok_137229 = i_lte_j_137226 && y_137228;
    bool ok_or_empty_137230 = empty_slice_137220 || forwards_ok_137229;
    bool index_certs_137231;
    
    if (!ok_or_empty_137230) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136397, ":", (long long) nb_123953, "] out of bounds for array of shape [", (long long) nb_123953, "].", "-> #0  ftsort.fut:257:57-73\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137232 = slt64(nb_123953, defunc_0_merge_pipeline_res_136397);
    bool valid_137233 = !bounds_invalid_upwards_137232;
    bool range_valid_c_137234;
    
    if (!valid_137233) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136397, "..<", (long long) nb_123953, " is invalid.", "-> #0  ftsort.fut:257:45-55\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138766 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool cond_137238 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zs_lhs_137239 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zp_rhs_137240 = sdiv_safe64(zs_lhs_137239, (int64_t) 20);
    int64_t min_num_blocks_137241 = add64((int64_t) 1, zp_rhs_137240);
    bool loop_cond_137242 = slt64((int64_t) 1, min_num_blocks_137241);
    bool smallest_pow_2_geq_than_res_137243;
    int64_t smallest_pow_2_geq_than_res_137244;
    bool loop_while_137245;
    int64_t x_137246;
    
    loop_while_137245 = loop_cond_137242;
    x_137246 = (int64_t) 1;
    while (loop_while_137245) {
        int64_t loopres_137247 = mul64((int64_t) 2, x_137246);
        bool loop_cond_137248 = slt64(loopres_137247, min_num_blocks_137241);
        bool loop_while_tmp_139365 = loop_cond_137248;
        int64_t x_tmp_139366 = loopres_137247;
        
        loop_while_137245 = loop_while_tmp_139365;
        x_137246 = x_tmp_139366;
    }
    smallest_pow_2_geq_than_res_137243 = loop_while_137245;
    smallest_pow_2_geq_than_res_137244 = x_137246;
    
    bool zzero_137249 = smallest_pow_2_geq_than_res_137244 == (int64_t) 0;
    bool nonzzero_137250 = !zzero_137249;
    bool protect_assert_disj_137251 = cond_137238 || nonzzero_137250;
    bool nonzzero_cert_137252;
    
    if (!protect_assert_disj_137251) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:305:82-85\n   #5  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_137253 = sdiv_safe64(zs_lhs_137239, smallest_pow_2_geq_than_res_137244);
    int64_t block_sizze_137254 = add64((int64_t) 1, zp_rhs_137253);
    bool y_137259 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
    bool protect_assert_disj_139025 = cond_137238 || y_137259;
    bool index_certs_137260;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:305:82-85\n   #5  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137278 = slt64(smallest_pow_2_geq_than_res_137244, (int64_t) 0);
    bool valid_137279 = !bounds_invalid_upwards_137278;
    bool protect_assert_disj_139033 = cond_137238 || valid_137279;
    bool range_valid_c_137280;
    
    if (!protect_assert_disj_139033) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_137244, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137282 = slt64(block_sizze_137254, (int64_t) 0);
    bool valid_137283 = !bounds_invalid_upwards_137282;
    bool protect_assert_disj_139035 = cond_137238 || valid_137283;
    bool range_valid_c_137284;
    
    if (!protect_assert_disj_139035) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_137254, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_137286 = sle64(block_sizze_137254, (int64_t) 1);
    int64_t tmp_137287 = sub64(block_sizze_137254, (int64_t) 2);
    bool bounds_invalid_upwards_137288 = slt64(tmp_137287, (int64_t) 0);
    bool valid_137290 = !bounds_invalid_upwards_137288;
    bool protect_assert_disj_137291 = cond_137286 || valid_137290;
    bool protect_assert_disj_139037 = cond_137238 || protect_assert_disj_137291;
    bool range_valid_c_137292;
    
    if (!protect_assert_disj_139037) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_137287, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_137768 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool empty_or_match_cert_137769;
    
    if (!dim_match_137768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] cannot match shape of type `[", (long long) dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, "](i64, i64, f64)`.", "-> #0  ftsort.fut:258:20-259:95\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137770 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == (int64_t) 0;
    int64_t m_137771 = sub64(dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, (int64_t) 1);
    int64_t i_p_m_t_s_137772 = add64(arg_137200, m_137771);
    bool zzero_leq_i_p_m_t_s_137773 = sle64((int64_t) 0, i_p_m_t_s_137772);
    bool i_p_m_t_s_leq_w_137774 = slt64(i_p_m_t_s_137772, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool zzero_lte_i_137775 = sle64((int64_t) 0, arg_137200);
    bool i_lte_j_137776 = sle64(arg_137200, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool y_137777 = i_p_m_t_s_leq_w_137774 && zzero_lte_i_137775;
    bool y_137778 = zzero_leq_i_p_m_t_s_137773 && y_137777;
    bool forwards_ok_137779 = i_lte_j_137776 && y_137778;
    bool ok_or_empty_137780 = empty_slice_137770 || forwards_ok_137779;
    bool index_certs_137781;
    
    if (!ok_or_empty_137780) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_137200, ":", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:260:21-79\n   #1  ftsort.fut:305:82-85\n   #2  ftsort.fut:299:1-305:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138767, bytes_138766, "mem_138767")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_139367++) {
        int64_t x_139368 = (int64_t) 0 + i_139367 * (int64_t) 1;
        
        ((int64_t *) mem_138767.mem)[i_139367] = x_139368;
    }
    
    int64_t flat_dim_137255 = smallest_pow_2_geq_than_res_137244 * block_sizze_137254;
    bool x_139020 = !cond_137238;
    int64_t greatest_divisor_leq_than_arg1_137257 = mul64((int64_t) 2, block_sizze_137254);
    int64_t merge_block_sizze_137258;
    
    if (x_139020) {
        int64_t x_139022;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139022, (int64_t) 8, greatest_divisor_leq_than_arg1_137257) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_137258 = x_139022;
    } else {
        merge_block_sizze_137258 = (int64_t) 0;
    }
    
    bool index_concat_cmp_137261 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 0);
    bool x_139016 = !index_concat_cmp_137261;
    bool protect_cond_conj_139026 = x_139016 && x_139020;
    double index_concat_137266;
    
    if (protect_cond_conj_139026) {
        double x_139018 = ((double *) a_list_mem_138403.mem)[defunc_0_merge_pipeline_res_136396];
        
        index_concat_137266 = x_139018;
    } else {
        index_concat_137266 = 0.0;
    }
    
    int64_t index_concat_i_138035 = sub64((int64_t) 0, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
    int64_t slice_138036 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138035;
    bool protect_cond_conj_139027 = index_concat_cmp_137261 && x_139020;
    double index_concat_138037;
    
    if (protect_cond_conj_139027) {
        double x_139014 = ((double *) b_list_mem_138404.mem)[slice_138036];
        
        index_concat_138037 = x_139014;
    } else {
        index_concat_138037 = 0.0;
    }
    
    double index_concat_branch_137262;
    
    if (index_concat_cmp_137261) {
        index_concat_branch_137262 = index_concat_138037;
    } else {
        index_concat_branch_137262 = index_concat_137266;
    }
    
    double defunc_0_reduce_res_138194;
    int64_t defunc_0_reduce_res_138195;
    
    if (x_139020) {
        double x_139028;
        int64_t x_139029;
        double redout_138293;
        int64_t redout_138294;
        
        redout_138293 = index_concat_branch_137262;
        redout_138294 = (int64_t) 0;
        for (int64_t i_138295 = 0; i_138295 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138295++) {
            bool index_concat_cmp_138354 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, i_138295);
            double index_concat_branch_138358;
            
            if (index_concat_cmp_138354) {
                int64_t index_concat_i_138355 = sub64(i_138295, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                int64_t slice_138399 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138355;
                double index_concat_138356 = ((double *) b_list_mem_138404.mem)[slice_138399];
                
                index_concat_branch_138358 = index_concat_138356;
            } else {
                int64_t slice_138400 = defunc_0_merge_pipeline_res_136396 + i_138295;
                double index_concat_138357 = ((double *) a_list_mem_138403.mem)[slice_138400];
                
                index_concat_branch_138358 = index_concat_138357;
            }
            
            bool defunc_0_leq_res_137275 = redout_138293 <= index_concat_branch_138358;
            double defunc_0_op_res_137276;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137276 = index_concat_branch_138358;
            } else {
                defunc_0_op_res_137276 = redout_138293;
            }
            
            int64_t defunc_0_op_res_137277;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137277 = i_138295;
            } else {
                defunc_0_op_res_137277 = redout_138294;
            }
            
            double redout_tmp_139369 = defunc_0_op_res_137276;
            int64_t redout_tmp_139370 = defunc_0_op_res_137277;
            
            redout_138293 = redout_tmp_139369;
            redout_138294 = redout_tmp_139370;
        }
        x_139028 = redout_138293;
        x_139029 = redout_138294;
        defunc_0_reduce_res_138194 = x_139028;
        defunc_0_reduce_res_138195 = x_139029;
    } else {
        defunc_0_reduce_res_138194 = 0.0;
        defunc_0_reduce_res_138195 = (int64_t) 0;
    }
    
    int64_t distance_137289 = add64((int64_t) 1, tmp_137287);
    int64_t binop_x_138768 = (int64_t) 8 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138769 = block_sizze_137254 * binop_x_138768;
    int64_t bytes_138782 = (int64_t) 8 * block_sizze_137254;
    bool loop_cond_137369 = slt64(block_sizze_137254, flat_dim_137255);
    bool zzero_137370 = merge_block_sizze_137258 == (int64_t) 0;
    bool nonzzero_137371 = !zzero_137370;
    
    if (cond_137238) {
        if (memblock_set(ctx, &ext_mem_138972, &mem_138767, "mem_138767") != 0)
            return 1;
    } else {
        if (mem_138770_cached_sizze_139499 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138770, &mem_138770_cached_sizze_139499, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138773_cached_sizze_139500 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138773, &mem_138773_cached_sizze_139500, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138783_cached_sizze_139501 < bytes_138782) {
            err = lexical_realloc(ctx, &mem_138783, &mem_138783_cached_sizze_139501, bytes_138782);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138785_cached_sizze_139502 < bytes_138782) {
            err = lexical_realloc(ctx, &mem_138785, &mem_138785_cached_sizze_139502, bytes_138782);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138307 = 0; i_138307 < smallest_pow_2_geq_than_res_137244; i_138307++) {
            int64_t zp_lhs_137296 = mul64(block_sizze_137254, i_138307);
            
            for (int64_t i_138300 = 0; i_138300 < block_sizze_137254; i_138300++) {
                int64_t k_137300 = add64(zp_lhs_137296, i_138300);
                bool cond_137301 = slt64(k_137300, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
                double lifted_lambda_res_137302;
                int64_t lifted_lambda_res_137303;
                
                if (cond_137301) {
                    bool x_138041 = sle64((int64_t) 0, k_137300);
                    bool bounds_check_138042 = cond_137301 && x_138041;
                    bool index_certs_138043;
                    
                    if (!bounds_check_138042) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_137300, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool index_concat_cmp_138044 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, k_137300);
                    double index_concat_branch_138045;
                    
                    if (index_concat_cmp_138044) {
                        int64_t index_concat_i_138046 = sub64(k_137300, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                        int64_t slice_138047 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138046;
                        double index_concat_138048 = ((double *) b_list_mem_138404.mem)[slice_138047];
                        
                        index_concat_branch_138045 = index_concat_138048;
                    } else {
                        int64_t slice_138049 = defunc_0_merge_pipeline_res_136396 + k_137300;
                        double index_concat_138050 = ((double *) a_list_mem_138403.mem)[slice_138049];
                        
                        index_concat_branch_138045 = index_concat_138050;
                    }
                    lifted_lambda_res_137302 = index_concat_branch_138045;
                    lifted_lambda_res_137303 = k_137300;
                } else {
                    lifted_lambda_res_137302 = defunc_0_reduce_res_138194;
                    lifted_lambda_res_137303 = defunc_0_reduce_res_138195;
                }
                ((double *) mem_138783)[i_138300] = lifted_lambda_res_137302;
                ((int64_t *) mem_138785)[i_138300] = lifted_lambda_res_137303;
            }
            if (!cond_137286) {
                for (int64_t i_137318 = 0; i_137318 < distance_137289; i_137318++) {
                    int64_t gt_arg1_137321 = add64((int64_t) 1, i_137318);
                    bool x_137322 = sle64((int64_t) 0, gt_arg1_137321);
                    bool y_137323 = slt64(gt_arg1_137321, block_sizze_137254);
                    bool bounds_check_137324 = x_137322 && y_137323;
                    bool index_certs_137325;
                    
                    if (!bounds_check_137324) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_137321, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_137327 = slt64(i_137318, block_sizze_137254);
                    bool index_certs_137328;
                    
                    if (!y_137327) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137318, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    double gt_arg1_137326 = ((double *) mem_138783)[gt_arg1_137321];
                    double gt_arg0_137329 = ((double *) mem_138783)[i_137318];
                    bool defunc_0_leq_res_137330 = gt_arg0_137329 <= gt_arg1_137326;
                    bool defunc_0_lifted_gt_res_137331 = !defunc_0_leq_res_137330;
                    bool s_137332;
                    int64_t s_137335;
                    bool loop_while_137336;
                    int64_t j_137339;
                    
                    loop_while_137336 = defunc_0_lifted_gt_res_137331;
                    j_137339 = i_137318;
                    while (loop_while_137336) {
                        bool x_137340 = sle64((int64_t) 0, j_137339);
                        bool y_137341 = slt64(j_137339, block_sizze_137254);
                        bool bounds_check_137342 = x_137340 && y_137341;
                        bool index_certs_137343;
                        
                        if (!bounds_check_137342) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137339, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_137346 = add64((int64_t) 1, j_137339);
                        bool x_137347 = sle64((int64_t) 0, copy_arg0_137346);
                        bool y_137348 = slt64(copy_arg0_137346, block_sizze_137254);
                        bool bounds_check_137349 = x_137347 && y_137348;
                        bool index_certs_137350;
                        
                        if (!bounds_check_137349) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_137346, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        double copy_arg0_137344 = ((double *) mem_138783)[j_137339];
                        int64_t copy_arg0_137345 = ((int64_t *) mem_138785)[j_137339];
                        double copy_arg0_137351 = ((double *) mem_138783)[copy_arg0_137346];
                        int64_t copy_arg0_137352 = ((int64_t *) mem_138785)[copy_arg0_137346];
                        
                        ((double *) mem_138783)[j_137339] = copy_arg0_137351;
                        ((int64_t *) mem_138785)[j_137339] = copy_arg0_137352;
                        ((double *) mem_138783)[copy_arg0_137346] = copy_arg0_137344;
                        ((int64_t *) mem_138785)[copy_arg0_137346] = copy_arg0_137345;
                        
                        int64_t tmp_137357 = sub64(j_137339, (int64_t) 1);
                        bool cond_137358 = sle64((int64_t) 0, tmp_137357);
                        bool loop_cond_137359;
                        
                        if (cond_137358) {
                            bool y_138052 = slt64(tmp_137357, block_sizze_137254);
                            bool bounds_check_138053 = cond_137358 && y_138052;
                            bool index_certs_138054;
                            
                            if (!bounds_check_138053) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137357, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            double gt_arg1_138051 = ((double *) mem_138783)[j_137339];
                            double gt_arg0_138055 = ((double *) mem_138783)[tmp_137357];
                            bool defunc_0_leq_res_138056 = gt_arg0_138055 <= gt_arg1_138051;
                            bool defunc_0_lifted_gt_res_138057 = !defunc_0_leq_res_138056;
                            
                            loop_cond_137359 = defunc_0_lifted_gt_res_138057;
                        } else {
                            loop_cond_137359 = 0;
                        }
                        
                        bool loop_while_tmp_139377 = loop_cond_137359;
                        int64_t j_tmp_139380 = tmp_137357;
                        
                        loop_while_137336 = loop_while_tmp_139377;
                        j_137339 = j_tmp_139380;
                    }
                    s_137332 = loop_while_137336;
                    s_137335 = j_137339;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138770, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138783, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138773, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138785, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
        }
        if (memblock_alloc(ctx, &mem_138838, bytes_138769, "mem_138838")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138838.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138770, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        if (memblock_alloc(ctx, &mem_138842, bytes_138769, "mem_138842")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138842.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138773, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        
        int64_t data_137372;
        bool data_137373;
        int64_t data_137376;
        int64_t loop_dz2084Uz2082U_137377;
        bool loop_while_137378;
        int64_t stride_137381;
        
        if (memblock_set(ctx, &mem_param_138846, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138849, &mem_138842, "mem_138842") != 0)
            return 1;
        loop_dz2084Uz2082U_137377 = flat_dim_137255;
        loop_while_137378 = loop_cond_137369;
        stride_137381 = block_sizze_137254;
        while (loop_while_137378) {
            int64_t next_stride_137382 = mul64((int64_t) 2, stride_137381);
            bool zzero_137383 = next_stride_137382 == (int64_t) 0;
            bool nonzzero_137384 = !zzero_137383;
            bool nonzzero_cert_137385;
            
            if (!nonzzero_137384) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:305:82-85\n   #5  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_137386 = sdiv64(flat_dim_137255, next_stride_137382);
            bool bounds_invalid_upwards_137387 = slt64(num_merges_137386, (int64_t) 0);
            bool valid_137388 = !bounds_invalid_upwards_137387;
            bool range_valid_c_137389;
            
            if (!valid_137388) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_137386, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_137391 = sub64(next_stride_137382, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137392 = sle64((int64_t) 0, m_137391);
            bool cond_137394 = slt64(next_stride_137382, (int64_t) 10);
            bool protect_assert_disj_137395 = nonzzero_137371 || cond_137394;
            bool nonzzero_cert_137396;
            
            if (!protect_assert_disj_137395) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_137397 = smod_safe64(next_stride_137382, merge_block_sizze_137258);
            bool num_blocks_137398 = zeze_lhs_137397 == (int64_t) 0;
            bool protect_assert_disj_137399 = cond_137394 || num_blocks_137398;
            bool assert_c_137400;
            
            if (!protect_assert_disj_137399) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_137401 = sdiv_safe64(next_stride_137382, merge_block_sizze_137258);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402 = add64((int64_t) 1, num_blocks_137401);
            int64_t j_m_i_137403 = sub64(next_stride_137382, stride_137381);
            int64_t flat_dim_137404 = merge_block_sizze_137258 * num_blocks_137401;
            bool bounds_invalid_upwards_137405 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, (int64_t) 0);
            bool empty_slice_137406 = j_m_i_137403 == (int64_t) 0;
            int64_t m_137407 = sub64(j_m_i_137403, (int64_t) 1);
            bool zzero_lte_i_137408 = sle64((int64_t) 0, stride_137381);
            bool i_lte_j_137409 = sle64(stride_137381, next_stride_137382);
            bool empty_slice_137410 = stride_137381 == (int64_t) 0;
            int64_t m_137411 = sub64(stride_137381, (int64_t) 1);
            bool bounds_invalid_upwards_137412 = slt64(num_blocks_137401, (int64_t) 0);
            bool cond_137413 = slt64((int64_t) 0, stride_137381);
            bool valid_137414 = !bounds_invalid_upwards_137405;
            int64_t i_p_m_t_s_137415 = add64(stride_137381, m_137407);
            bool zzero_leq_i_p_m_t_s_137416 = sle64((int64_t) 0, m_137411);
            bool i_p_m_t_s_leq_w_137417 = slt64(m_137411, next_stride_137382);
            bool valid_137418 = !bounds_invalid_upwards_137412;
            bool i_p_m_t_s_leq_w_137419 = slt64(m_137391, flat_dim_137404);
            bool y_137420 = slt64((int64_t) 0, j_m_i_137403);
            bool protect_assert_disj_137421 = cond_137394 || valid_137414;
            bool range_valid_c_137422;
            
            if (!protect_assert_disj_137421) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_137423 = sle64((int64_t) 0, i_p_m_t_s_137415);
            bool i_p_m_t_s_leq_w_137424 = slt64(i_p_m_t_s_137415, next_stride_137382);
            bool y_137425 = zzero_leq_i_p_m_t_s_137416 && i_p_m_t_s_leq_w_137417;
            bool protect_assert_disj_137426 = cond_137394 || valid_137418;
            bool range_valid_c_137427;
            
            if (!protect_assert_disj_137426) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_137401, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_137428 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137419;
            bool y_137429 = zzero_lte_i_137408 && i_p_m_t_s_leq_w_137424;
            bool forwards_ok_137430 = zzero_lte_i_137408 && y_137425;
            bool ok_or_empty_137431 = zzero_137383 || y_137428;
            bool protect_assert_disj_137432 = cond_137413 || y_137420;
            bool y_137433 = zzero_leq_i_p_m_t_s_137423 && y_137429;
            bool ok_or_empty_137434 = empty_slice_137410 || forwards_ok_137430;
            bool protect_assert_disj_137435 = cond_137394 || ok_or_empty_137431;
            bool index_certs_137436;
            
            if (!protect_assert_disj_137435) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) flat_dim_137404, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_137437 = !cond_137394;
            bool protect_assert_disj_137438 = protect_assert_disj_137432 || loop_not_taken_137437;
            bool index_certs_137439;
            
            if (!protect_assert_disj_137438) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_137440 = i_lte_j_137409 && y_137433;
            bool protect_assert_disj_137441 = cond_137394 || ok_or_empty_137434;
            bool index_certs_137442;
            
            if (!protect_assert_disj_137441) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137443 = ok_or_empty_137434 || loop_not_taken_137437;
            bool index_certs_137444;
            
            if (!protect_assert_disj_137443) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_137445 = empty_slice_137406 || forwards_ok_137440;
            bool protect_assert_disj_137446 = cond_137394 || ok_or_empty_137445;
            bool index_certs_137447;
            
            if (!protect_assert_disj_137446) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137448 = loop_not_taken_137437 || ok_or_empty_137445;
            bool index_certs_137449;
            
            if (!protect_assert_disj_137448) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138850 = (int64_t) 8 * num_merges_137386;
            int64_t bytes_138851 = next_stride_137382 * binop_x_138850;
            bool i_lte_j_137393 = sle64((int64_t) 0, next_stride_137382);
            
            if (mem_138852_cached_sizze_139503 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138852, &mem_138852_cached_sizze_139503, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138855_cached_sizze_139504 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138855, &mem_138855_cached_sizze_139504, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138864 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402;
            int64_t binop_x_138880 = (int64_t) 8 * num_blocks_137401;
            int64_t bytes_138881 = merge_block_sizze_137258 * binop_x_138880;
            int64_t bytes_138926 = (int64_t) 16 * stride_137381;
            
            for (int64_t i_138328 = 0; i_138328 < num_merges_137386; i_138328++) {
                int64_t start_137453 = mul64(next_stride_137382, i_138328);
                int64_t j_m_i_137454 = sub64(loop_dz2084Uz2082U_137377, start_137453);
                bool empty_slice_137455 = j_m_i_137454 == (int64_t) 0;
                int64_t m_137456 = sub64(j_m_i_137454, (int64_t) 1);
                int64_t i_p_m_t_s_137457 = add64(start_137453, m_137456);
                bool zzero_leq_i_p_m_t_s_137458 = sle64((int64_t) 0, i_p_m_t_s_137457);
                bool i_p_m_t_s_leq_w_137459 = slt64(i_p_m_t_s_137457, loop_dz2084Uz2082U_137377);
                bool zzero_lte_i_137460 = sle64((int64_t) 0, start_137453);
                bool i_lte_j_137461 = sle64(start_137453, loop_dz2084Uz2082U_137377);
                bool y_137462 = i_p_m_t_s_leq_w_137459 && zzero_lte_i_137460;
                bool y_137463 = zzero_leq_i_p_m_t_s_137458 && y_137462;
                bool forwards_ok_137464 = i_lte_j_137461 && y_137463;
                bool ok_or_empty_137465 = empty_slice_137455 || forwards_ok_137464;
                bool index_certs_137466;
                
                if (!ok_or_empty_137465) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_137453, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_137377, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_137467 = slt64(m_137391, j_m_i_137454);
                bool y_137468 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137467;
                bool forwards_ok_137469 = i_lte_j_137393 && y_137468;
                bool ok_or_empty_137470 = zzero_137383 || forwards_ok_137469;
                bool index_certs_137471;
                
                if (!ok_or_empty_137470) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) j_m_i_137454, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:305:82-85\n   #8  ftsort.fut:299:1-305:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_137394) {
                    double dummy_138083;
                    int64_t dummy_138084;
                    
                    if (cond_137413) {
                        double head_res_138085 = ((double *) mem_param_138846.mem)[start_137453];
                        int64_t head_res_138086 = ((int64_t *) mem_param_138849.mem)[start_137453];
                        
                        dummy_138083 = head_res_138085;
                        dummy_138084 = head_res_138086;
                    } else {
                        int64_t slice_138087 = stride_137381 + start_137453;
                        double head_res_138088 = ((double *) mem_param_138846.mem)[slice_138087];
                        int64_t head_res_138089 = ((int64_t *) mem_param_138849.mem)[slice_138087];
                        
                        dummy_138083 = head_res_138088;
                        dummy_138084 = head_res_138089;
                    }
                    if (memblock_alloc(ctx, &mem_138927, bytes_138926, "mem_138927")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139390 = 0; nest_i_139390 < next_stride_137382; nest_i_139390++) {
                        ((double *) mem_138927.mem)[nest_i_139390] = dummy_138083;
                    }
                    if (memblock_alloc(ctx, &mem_138929, bytes_138926, "mem_138929")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139391 = 0; nest_i_139391 < next_stride_137382; nest_i_139391++) {
                        ((int64_t *) mem_138929.mem)[nest_i_139391] = dummy_138084;
                    }
                    
                    int64_t data_138092;
                    int64_t i_138096 = (int64_t) 0;
                    
                    for (int64_t k_138095 = 0; k_138095 < next_stride_137382; k_138095++) {
                        int64_t j_138099 = sub64(k_138095, i_138096);
                        bool cond_138100 = j_138099 == j_m_i_137403;
                        bool cond_138101;
                        
                        if (cond_138100) {
                            cond_138101 = 1;
                        } else {
                            bool cond_138102 = slt64(i_138096, stride_137381);
                            bool cond_f_res_138103;
                            
                            if (cond_138102) {
                                bool x_138104 = sle64((int64_t) 0, j_138099);
                                bool y_138105 = slt64(j_138099, j_m_i_137403);
                                bool bounds_check_138106 = x_138104 && y_138105;
                                bool index_certs_138107;
                                
                                if (!bounds_check_138106) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_138111 = sle64((int64_t) 0, i_138096);
                                bool bounds_check_138112 = cond_138102 && x_138111;
                                bool index_certs_138113;
                                
                                if (!bounds_check_138112) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_138108 = stride_137381 + j_138099;
                                int64_t slice_138109 = start_137453 + slice_138108;
                                double leq_arg1_138110 = ((double *) mem_param_138846.mem)[slice_138109];
                                int64_t slice_138114 = start_137453 + i_138096;
                                double leq_arg0_138115 = ((double *) mem_param_138846.mem)[slice_138114];
                                bool defunc_0_leq_res_138116 = leq_arg0_138115 <= leq_arg1_138110;
                                
                                cond_f_res_138103 = defunc_0_leq_res_138116;
                            } else {
                                cond_f_res_138103 = 0;
                            }
                            cond_138101 = cond_f_res_138103;
                        }
                        
                        int64_t loopres_138117;
                        double loopres_138118;
                        int64_t loopres_138119;
                        
                        if (cond_138101) {
                            bool x_138121 = sle64((int64_t) 0, i_138096);
                            bool y_138122 = slt64(i_138096, stride_137381);
                            bool bounds_check_138123 = x_138121 && y_138122;
                            bool index_certs_138124;
                            
                            if (!bounds_check_138123) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_138120 = add64((int64_t) 1, i_138096);
                            int64_t slice_138125 = start_137453 + i_138096;
                            double tmp_138126 = ((double *) mem_param_138846.mem)[slice_138125];
                            int64_t tmp_138127 = ((int64_t *) mem_param_138849.mem)[slice_138125];
                            
                            loopres_138117 = tmp_138120;
                            loopres_138118 = tmp_138126;
                            loopres_138119 = tmp_138127;
                        } else {
                            bool x_138128 = sle64((int64_t) 0, j_138099);
                            bool y_138129 = slt64(j_138099, j_m_i_137403);
                            bool bounds_check_138130 = x_138128 && y_138129;
                            bool index_certs_138131;
                            
                            if (!bounds_check_138130) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:305:82-85\n   #9  ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138132 = stride_137381 + j_138099;
                            int64_t slice_138133 = start_137453 + slice_138132;
                            double tmp_138134 = ((double *) mem_param_138846.mem)[slice_138133];
                            int64_t tmp_138135 = ((int64_t *) mem_param_138849.mem)[slice_138133];
                            
                            loopres_138117 = i_138096;
                            loopres_138118 = tmp_138134;
                            loopres_138119 = tmp_138135;
                        }
                        ((double *) mem_138927.mem)[k_138095] = loopres_138118;
                        ((int64_t *) mem_138929.mem)[k_138095] = loopres_138119;
                        
                        int64_t i_tmp_139392 = loopres_138117;
                        
                        i_138096 = i_tmp_139392;
                    }
                    data_138092 = i_138096;
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138927, "mem_138927") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138929, "mem_138929") != 0)
                        return 1;
                } else {
                    if (mem_138865_cached_sizze_139505 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138865, &mem_138865_cached_sizze_139505, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138867_cached_sizze_139506 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138867, &mem_138867_cached_sizze_139506, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138314 = 0; i_138314 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402; i_138314++) {
                        int64_t split_count_arg3_137533 = mul64(merge_block_sizze_137258, i_138314);
                        int64_t defunc_0_split_count_res_137534;
                        int64_t defunc_0_split_count_res_137535;
                        int64_t defunc_0_split_count_res_137536;
                        int64_t defunc_0_split_count_res_137537;
                        int64_t defunc_0_split_count_res_137538;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_137534, &defunc_0_split_count_res_137535, &defunc_0_split_count_res_137536, &defunc_0_split_count_res_137537, &defunc_0_split_count_res_137538, (int64_t) 0, stride_137381, (int64_t) 0, j_m_i_137403, split_count_arg3_137533) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_137539 = slt64((int64_t) 0, defunc_0_split_count_res_137538);
                        bool defunc_0_split_count_res_137540;
                        int64_t defunc_0_split_count_res_137541;
                        int64_t defunc_0_split_count_res_137542;
                        int64_t defunc_0_split_count_res_137543;
                        int64_t defunc_0_split_count_res_137544;
                        int64_t defunc_0_split_count_res_137545;
                        bool loop_while_137546;
                        int64_t ss_137547;
                        int64_t ss_137548;
                        int64_t tt_137549;
                        int64_t tt_137550;
                        int64_t count_137551;
                        
                        loop_while_137546 = loop_cond_137539;
                        ss_137547 = defunc_0_split_count_res_137534;
                        ss_137548 = defunc_0_split_count_res_137535;
                        tt_137549 = defunc_0_split_count_res_137536;
                        tt_137550 = defunc_0_split_count_res_137537;
                        count_137551 = defunc_0_split_count_res_137538;
                        while (loop_while_137546) {
                            int64_t zlze_lhs_137552 = sub64(ss_137548, ss_137547);
                            bool cond_137553 = sle64(zlze_lhs_137552, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_137554;
                            int64_t defunc_0_lifted_step_res_137555;
                            int64_t defunc_0_lifted_step_res_137556;
                            int64_t defunc_0_lifted_step_res_137557;
                            
                            if (cond_137553) {
                                int64_t tmp_138138 = add64(tt_137549, count_137551);
                                
                                defunc_0_lifted_step_res_137554 = ss_137547;
                                defunc_0_lifted_step_res_137555 = tmp_138138;
                                defunc_0_lifted_step_res_137556 = tt_137550;
                                defunc_0_lifted_step_res_137557 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_137559 = sub64(tt_137550, tt_137549);
                                bool cond_137560 = sle64(zlze_lhs_137559, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_137561;
                                int64_t defunc_0_lifted_step_res_f_res_137562;
                                int64_t defunc_0_lifted_step_res_f_res_137563;
                                int64_t defunc_0_lifted_step_res_f_res_137564;
                                
                                if (cond_137560) {
                                    int64_t tmp_138139 = add64(ss_137547, count_137551);
                                    
                                    defunc_0_lifted_step_res_f_res_137561 = tmp_138139;
                                    defunc_0_lifted_step_res_f_res_137562 = tt_137549;
                                    defunc_0_lifted_step_res_f_res_137563 = tt_137550;
                                    defunc_0_lifted_step_res_f_res_137564 = (int64_t) 0;
                                } else {
                                    bool cond_137566 = count_137551 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137567;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137568;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137569;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137570;
                                    
                                    if (cond_137566) {
                                        bool x_138141 = sle64((int64_t) 0, ss_137547);
                                        bool y_138142 = slt64(ss_137547, stride_137381);
                                        bool bounds_check_138143 = x_138141 && y_138142;
                                        bool index_certs_138144;
                                        
                                        if (!bounds_check_138143) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_137547, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:305:82-85\n   #13 ftsort.fut:299:1-305:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_138147 = sle64((int64_t) 0, tt_137549);
                                        bool y_138148 = slt64(tt_137549, j_m_i_137403);
                                        bool bounds_check_138149 = x_138147 && y_138148;
                                        bool index_certs_138150;
                                        
                                        if (!bounds_check_138149) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_137549, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:305:82-85\n   #13 ftsort.fut:299:1-305:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_138145 = start_137453 + ss_137547;
                                        double leq_arg1_138146 = ((double *) mem_param_138846.mem)[slice_138145];
                                        int64_t slice_138151 = stride_137381 + tt_137549;
                                        int64_t slice_138152 = start_137453 + slice_138151;
                                        double leq_arg0_138153 = ((double *) mem_param_138846.mem)[slice_138152];
                                        bool defunc_0_leq_res_138154 = leq_arg0_138153 <= leq_arg1_138146;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        
                                        if (defunc_0_leq_res_138154) {
                                            int64_t tmp_138157 = add64((int64_t) 1, tt_137549);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = ss_137547;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tmp_138157;
                                        } else {
                                            int64_t tmp_138158 = add64((int64_t) 1, ss_137547);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = tmp_138158;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tt_137549;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = tt_137550;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = (int64_t) 0;
                                    } else {
                                        int64_t m_137589 = sdiv64(count_137551, (int64_t) 2);
                                        int64_t n_137590 = sub64(count_137551, m_137589);
                                        bool cond_137591 = n_137590 == (int64_t) 0;
                                        int64_t zgze_lhs_137592 = add64(ss_137547, m_137589);
                                        bool cond_f_res_137593 = sle64(ss_137548, zgze_lhs_137592);
                                        bool x_137594 = !cond_137591;
                                        bool y_137595 = cond_f_res_137593 && x_137594;
                                        bool cond_137596 = cond_137591 || y_137595;
                                        bool leq_y_x_137597;
                                        
                                        if (cond_137596) {
                                            leq_y_x_137597 = 1;
                                        } else {
                                            bool x_137598 = sle64((int64_t) 0, zgze_lhs_137592);
                                            bool y_137599 = slt64(zgze_lhs_137592, stride_137381);
                                            bool bounds_check_137600 = x_137598 && y_137599;
                                            bool index_certs_137601;
                                            
                                            if (!bounds_check_137600) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_137592, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:305:82-85\n   #13 ftsort.fut:299:1-305:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_137604 = add64(tt_137549, n_137590);
                                            int64_t leq_arg0_137605 = sub64(zm_lhs_137604, (int64_t) 1);
                                            bool x_137606 = sle64((int64_t) 0, leq_arg0_137605);
                                            bool y_137607 = slt64(leq_arg0_137605, j_m_i_137403);
                                            bool bounds_check_137608 = x_137606 && y_137607;
                                            bool index_certs_137609;
                                            
                                            if (!bounds_check_137608) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_137605, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:305:82-85\n   #13 ftsort.fut:299:1-305:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137602 = start_137453 + zgze_lhs_137592;
                                            double leq_arg1_137603 = ((double *) mem_param_138846.mem)[slice_137602];
                                            int64_t slice_137610 = stride_137381 + leq_arg0_137605;
                                            int64_t slice_137611 = start_137453 + slice_137610;
                                            double leq_arg0_137612 = ((double *) mem_param_138846.mem)[slice_137611];
                                            bool defunc_0_leq_res_137613 = leq_arg0_137612 <= leq_arg1_137603;
                                            
                                            leq_y_x_137597 = defunc_0_leq_res_137613;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                        
                                        if (leq_y_x_137597) {
                                            int64_t tmp_138159 = add64(tt_137549, n_137590);
                                            int64_t tmp_138160 = sub64(count_137551, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tmp_138159;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tt_137550;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = tmp_138160;
                                        } else {
                                            int64_t tmp_137619 = add64(tt_137549, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tt_137549;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tmp_137619;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = count_137551;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = ss_137547;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                    }
                                    defunc_0_lifted_step_res_f_res_137561 = defunc_0_lifted_step_res_f_res_f_res_137567;
                                    defunc_0_lifted_step_res_f_res_137562 = defunc_0_lifted_step_res_f_res_f_res_137568;
                                    defunc_0_lifted_step_res_f_res_137563 = defunc_0_lifted_step_res_f_res_f_res_137569;
                                    defunc_0_lifted_step_res_f_res_137564 = defunc_0_lifted_step_res_f_res_f_res_137570;
                                }
                                defunc_0_lifted_step_res_137554 = defunc_0_lifted_step_res_f_res_137561;
                                defunc_0_lifted_step_res_137555 = defunc_0_lifted_step_res_f_res_137562;
                                defunc_0_lifted_step_res_137556 = defunc_0_lifted_step_res_f_res_137563;
                                defunc_0_lifted_step_res_137557 = defunc_0_lifted_step_res_f_res_137564;
                            }
                            
                            int64_t loopres_137620;
                            int64_t loopres_137621;
                            int64_t loopres_137622;
                            int64_t loopres_137623;
                            int64_t loopres_137624;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_137620, &loopres_137621, &loopres_137622, &loopres_137623, &loopres_137624, defunc_0_lifted_step_res_137554, ss_137548, defunc_0_lifted_step_res_137555, defunc_0_lifted_step_res_137556, defunc_0_lifted_step_res_137557) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_137625 = slt64((int64_t) 0, loopres_137624);
                            bool loop_while_tmp_139397 = loop_cond_137625;
                            int64_t ss_tmp_139398 = loopres_137620;
                            int64_t ss_tmp_139399 = loopres_137621;
                            int64_t tt_tmp_139400 = loopres_137622;
                            int64_t tt_tmp_139401 = loopres_137623;
                            int64_t count_tmp_139402 = loopres_137624;
                            
                            loop_while_137546 = loop_while_tmp_139397;
                            ss_137547 = ss_tmp_139398;
                            ss_137548 = ss_tmp_139399;
                            tt_137549 = tt_tmp_139400;
                            tt_137550 = tt_tmp_139401;
                            count_137551 = count_tmp_139402;
                        }
                        defunc_0_split_count_res_137540 = loop_while_137546;
                        defunc_0_split_count_res_137541 = ss_137547;
                        defunc_0_split_count_res_137542 = ss_137548;
                        defunc_0_split_count_res_137543 = tt_137549;
                        defunc_0_split_count_res_137544 = tt_137550;
                        defunc_0_split_count_res_137545 = count_137551;
                        ((int64_t *) mem_138865)[i_138314] = defunc_0_split_count_res_137541;
                        ((int64_t *) mem_138867)[i_138314] = defunc_0_split_count_res_137543;
                    }
                    if (mem_138882_cached_sizze_139507 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138882, &mem_138882_cached_sizze_139507, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138885_cached_sizze_139508 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138885, &mem_138885_cached_sizze_139508, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138321 = 0; i_138321 < num_blocks_137401; i_138321++) {
                        bool y_137631 = slt64(i_138321, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool index_certs_137633;
                        
                        if (!y_137631) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138321, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137634 = ((int64_t *) mem_138865)[i_138321];
                        int64_t defunc_0_f_res_137635 = ((int64_t *) mem_138867)[i_138321];
                        int64_t tmp_137636 = add64((int64_t) 1, i_138321);
                        bool x_137637 = sle64((int64_t) 0, tmp_137636);
                        bool y_137638 = slt64(tmp_137636, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool bounds_check_137639 = x_137637 && y_137638;
                        bool index_certs_137640;
                        
                        if (!bounds_check_137639) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137636, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137641 = ((int64_t *) mem_138865)[tmp_137636];
                        int64_t defunc_0_f_res_137642 = ((int64_t *) mem_138867)[tmp_137636];
                        int64_t merge_sequential_arg2_137643 = add64(stride_137381, defunc_0_f_res_137635);
                        int64_t merge_sequential_arg2_137644 = add64(stride_137381, defunc_0_f_res_137642);
                        int64_t j_m_i_137645 = sub64(merge_sequential_arg2_137644, merge_sequential_arg2_137643);
                        bool empty_slice_137646 = j_m_i_137645 == (int64_t) 0;
                        int64_t m_137647 = sub64(j_m_i_137645, (int64_t) 1);
                        int64_t i_p_m_t_s_137648 = add64(merge_sequential_arg2_137643, m_137647);
                        bool zzero_leq_i_p_m_t_s_137649 = sle64((int64_t) 0, i_p_m_t_s_137648);
                        bool i_p_m_t_s_leq_w_137650 = slt64(i_p_m_t_s_137648, next_stride_137382);
                        bool zzero_lte_i_137651 = sle64((int64_t) 0, merge_sequential_arg2_137643);
                        bool i_lte_j_137652 = sle64(merge_sequential_arg2_137643, merge_sequential_arg2_137644);
                        bool y_137653 = i_p_m_t_s_leq_w_137650 && zzero_lte_i_137651;
                        bool y_137654 = zzero_leq_i_p_m_t_s_137649 && y_137653;
                        bool forwards_ok_137655 = i_lte_j_137652 && y_137654;
                        bool ok_or_empty_137656 = empty_slice_137646 || forwards_ok_137655;
                        bool index_certs_137657;
                        
                        if (!ok_or_empty_137656) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_137643, ":", (long long) merge_sequential_arg2_137644, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_137658 = sub64(defunc_0_f_res_137641, defunc_0_f_res_137634);
                        bool empty_slice_137659 = j_m_i_137658 == (int64_t) 0;
                        int64_t m_137660 = sub64(j_m_i_137658, (int64_t) 1);
                        int64_t i_p_m_t_s_137661 = add64(defunc_0_f_res_137634, m_137660);
                        bool zzero_leq_i_p_m_t_s_137662 = sle64((int64_t) 0, i_p_m_t_s_137661);
                        bool i_p_m_t_s_leq_w_137663 = slt64(i_p_m_t_s_137661, next_stride_137382);
                        bool zzero_lte_i_137664 = sle64((int64_t) 0, defunc_0_f_res_137634);
                        bool i_lte_j_137665 = sle64(defunc_0_f_res_137634, defunc_0_f_res_137641);
                        bool y_137666 = i_p_m_t_s_leq_w_137663 && zzero_lte_i_137664;
                        bool y_137667 = zzero_leq_i_p_m_t_s_137662 && y_137666;
                        bool forwards_ok_137668 = i_lte_j_137665 && y_137667;
                        bool ok_or_empty_137669 = empty_slice_137659 || forwards_ok_137668;
                        bool index_certs_137670;
                        
                        if (!ok_or_empty_137669) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_137634, ":", (long long) defunc_0_f_res_137641, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:305:82-85\n   #10 ftsort.fut:299:1-305:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_137671 = slt64((int64_t) 0, j_m_i_137658);
                        double dummy_137672;
                        int64_t dummy_137673;
                        
                        if (cond_137671) {
                            bool index_certs_138161;
                            
                            if (!cond_137671) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138162 = start_137453 + defunc_0_f_res_137634;
                            double head_res_138163 = ((double *) mem_param_138846.mem)[slice_138162];
                            int64_t head_res_138164 = ((int64_t *) mem_param_138849.mem)[slice_138162];
                            
                            dummy_137672 = head_res_138163;
                            dummy_137673 = head_res_138164;
                        } else {
                            bool y_137678 = slt64((int64_t) 0, j_m_i_137645);
                            bool index_certs_137679;
                            
                            if (!y_137678) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:305:82-85\n   #12 ftsort.fut:299:1-305:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137680 = start_137453 + merge_sequential_arg2_137643;
                            double head_res_137681 = ((double *) mem_param_138846.mem)[slice_137680];
                            int64_t head_res_137682 = ((int64_t *) mem_param_138849.mem)[slice_137680];
                            
                            dummy_137672 = head_res_137681;
                            dummy_137673 = head_res_137682;
                        }
                        for (int64_t nest_i_139405 = 0; nest_i_139405 < merge_block_sizze_137258; nest_i_139405++) {
                            ((double *) mem_138882)[i_138321 * merge_block_sizze_137258 + nest_i_139405] = dummy_137672;
                        }
                        for (int64_t nest_i_139406 = 0; nest_i_139406 < merge_block_sizze_137258; nest_i_139406++) {
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + nest_i_139406] = dummy_137673;
                        }
                        
                        int64_t data_137685;
                        int64_t i_137689 = (int64_t) 0;
                        
                        for (int64_t k_137688 = 0; k_137688 < merge_block_sizze_137258; k_137688++) {
                            int64_t j_137692 = sub64(k_137688, i_137689);
                            bool cond_137693 = j_137692 == j_m_i_137645;
                            bool cond_137694;
                            
                            if (cond_137693) {
                                cond_137694 = 1;
                            } else {
                                bool cond_137695 = slt64(i_137689, j_m_i_137658);
                                bool cond_f_res_137696;
                                
                                if (cond_137695) {
                                    bool x_138165 = sle64((int64_t) 0, j_137692);
                                    bool y_138166 = slt64(j_137692, j_m_i_137645);
                                    bool bounds_check_138167 = x_138165 && y_138166;
                                    bool index_certs_138168;
                                    
                                    if (!bounds_check_138167) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_138172 = sle64((int64_t) 0, i_137689);
                                    bool bounds_check_138173 = cond_137695 && x_138172;
                                    bool index_certs_138174;
                                    
                                    if (!bounds_check_138173) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_138169 = merge_sequential_arg2_137643 + j_137692;
                                    int64_t slice_138170 = start_137453 + slice_138169;
                                    double leq_arg1_138171 = ((double *) mem_param_138846.mem)[slice_138170];
                                    int64_t slice_138175 = defunc_0_f_res_137634 + i_137689;
                                    int64_t slice_138176 = start_137453 + slice_138175;
                                    double leq_arg0_138177 = ((double *) mem_param_138846.mem)[slice_138176];
                                    bool defunc_0_leq_res_138178 = leq_arg0_138177 <= leq_arg1_138171;
                                    
                                    cond_f_res_137696 = defunc_0_leq_res_138178;
                                } else {
                                    cond_f_res_137696 = 0;
                                }
                                cond_137694 = cond_f_res_137696;
                            }
                            
                            int64_t loopres_137711;
                            double loopres_137712;
                            int64_t loopres_137713;
                            
                            if (cond_137694) {
                                bool x_138180 = sle64((int64_t) 0, i_137689);
                                bool y_138181 = slt64(i_137689, j_m_i_137658);
                                bool bounds_check_138182 = x_138180 && y_138181;
                                bool index_certs_138183;
                                
                                if (!bounds_check_138182) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_138179 = add64((int64_t) 1, i_137689);
                                int64_t slice_138184 = defunc_0_f_res_137634 + i_137689;
                                int64_t slice_138185 = start_137453 + slice_138184;
                                double tmp_138186 = ((double *) mem_param_138846.mem)[slice_138185];
                                int64_t tmp_138187 = ((int64_t *) mem_param_138849.mem)[slice_138185];
                                
                                loopres_137711 = tmp_138179;
                                loopres_137712 = tmp_138186;
                                loopres_137713 = tmp_138187;
                            } else {
                                bool x_137723 = sle64((int64_t) 0, j_137692);
                                bool y_137724 = slt64(j_137692, j_m_i_137645);
                                bool bounds_check_137725 = x_137723 && y_137724;
                                bool index_certs_137726;
                                
                                if (!bounds_check_137725) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:305:82-85\n   #11 ftsort.fut:299:1-305:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137727 = merge_sequential_arg2_137643 + j_137692;
                                int64_t slice_137728 = start_137453 + slice_137727;
                                double tmp_137729 = ((double *) mem_param_138846.mem)[slice_137728];
                                int64_t tmp_137730 = ((int64_t *) mem_param_138849.mem)[slice_137728];
                                
                                loopres_137711 = i_137689;
                                loopres_137712 = tmp_137729;
                                loopres_137713 = tmp_137730;
                            }
                            ((double *) mem_138882)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137712;
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137713;
                            
                            int64_t i_tmp_139407 = loopres_137711;
                            
                            i_137689 = i_tmp_139407;
                        }
                        data_137685 = i_137689;
                    }
                    if (memblock_alloc(ctx, &mem_138920, bytes_138881, "mem_138920")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138920.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138882, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_alloc(ctx, &mem_138924, bytes_138881, "mem_138924")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138924.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138885, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138920, "mem_138920") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138924, "mem_138924") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138852, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138947.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138855, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138944.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
                    return 1;
            }
            
            int64_t flat_dim_137737 = next_stride_137382 * num_merges_137386;
            
            if (memblock_alloc(ctx, &mem_138958, bytes_138851, "mem_138958")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138958.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138852, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            if (memblock_alloc(ctx, &mem_138962, bytes_138851, "mem_138962")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138962.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138855, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            
            bool loop_cond_137740 = slt64(next_stride_137382, flat_dim_137255);
            
            if (memblock_set(ctx, &mem_param_tmp_139381, &mem_138958, "mem_138958") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139382, &mem_138962, "mem_138962") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139383 = flat_dim_137737;
            bool loop_while_tmp_139384 = loop_cond_137740;
            int64_t stride_tmp_139387 = next_stride_137382;
            
            if (memblock_set(ctx, &mem_param_138846, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138849, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
                return 1;
            loop_dz2084Uz2082U_137377 = loop_dz2084Uz2082U_tmp_139383;
            loop_while_137378 = loop_while_tmp_139384;
            stride_137381 = stride_tmp_139387;
        }
        if (memblock_set(ctx, &ext_mem_138969, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138968, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        data_137372 = loop_dz2084Uz2082U_137377;
        data_137373 = loop_while_137378;
        data_137376 = stride_137381;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        
        bool empty_slice_137741 = dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_137742 = sle64((int64_t) 0, zs_lhs_137239);
        bool i_p_m_t_s_leq_w_137743 = slt64(zs_lhs_137239, data_137372);
        bool y_137744 = zzero_leq_i_p_m_t_s_137742 && i_p_m_t_s_leq_w_137743;
        bool ok_or_empty_137745 = empty_slice_137741 || y_137744;
        bool index_certs_137746;
        
        if (!ok_or_empty_137745) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] out of bounds for array of shape [", (long long) data_137372, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:305:82-85\n   #6  ftsort.fut:299:1-305:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138972, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
        return 1;
    for (int64_t i_138337 = 0; i_138337 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138337++) {
        int64_t eta_p_137751 = ((int64_t *) ext_mem_138972.mem)[i_138337];
        bool x_137752 = sle64((int64_t) 0, eta_p_137751);
        bool y_137753 = slt64(eta_p_137751, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
        bool bounds_check_137754 = x_137752 && y_137753;
        bool index_certs_137755;
        
        if (!bounds_check_137754) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137751, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:305:82-85\n   #5  ftsort.fut:299:1-305:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_concat_cmp_137756 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, eta_p_137751);
        int64_t index_concat_branch_137757 = btoi_bool_i64(index_concat_cmp_137756);
        int64_t index_concat_branch_137758;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138198 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t index_primexp_138199 = add64(defunc_0_merge_pipeline_res_136397, index_concat_i_138198);
            
            index_concat_branch_137758 = index_primexp_138199;
        } else {
            int64_t index_primexp_137761 = add64(defunc_0_merge_pipeline_res_136396, eta_p_137751);
            
            index_concat_branch_137758 = index_primexp_137761;
        }
        
        double index_concat_branch_137762;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138200 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t slice_138201 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138200;
            double index_concat_138202 = ((double *) b_list_mem_138404.mem)[slice_138201];
            
            index_concat_branch_137762 = index_concat_138202;
        } else {
            int64_t slice_137766 = defunc_0_merge_pipeline_res_136396 + eta_p_137751;
            double index_concat_137767 = ((double *) a_list_mem_138403.mem)[slice_137766];
            
            index_concat_branch_137762 = index_concat_137767;
        }
        ((int64_t *) mem_138406.mem)[arg_137200 + i_138337] = index_concat_branch_137757;
        ((int64_t *) mem_138408.mem)[arg_137200 + i_138337] = index_concat_branch_137758;
        ((double *) mem_138410.mem)[arg_137200 + i_138337] = index_concat_branch_137762;
    }
    if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138410, "mem_138410") != 0)
        return 1;
    prim_out_139284 = dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    if (memblock_set(ctx, &*mem_out_p_139478, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139479, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139480, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    *out_prim_out_139481 = prim_out_139284;
    
  cleanup:
    {
        free(mem_138421);
        free(mem_138423);
        free(mem_138438);
        free(mem_138441);
        free(mem_138444);
        free(mem_138447);
        free(mem_138474);
        free(mem_138477);
        free(mem_138487);
        free(mem_138489);
        free(mem_138556);
        free(mem_138559);
        free(mem_138569);
        free(mem_138571);
        free(mem_138586);
        free(mem_138589);
        free(mem_138728);
        free(mem_138770);
        free(mem_138773);
        free(mem_138783);
        free(mem_138785);
        free(mem_138852);
        free(mem_138855);
        free(mem_138865);
        free(mem_138867);
        free(mem_138882);
        free(mem_138885);
        if (memblock_unref(ctx, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138962, "mem_138962") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138958, "mem_138958") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138924, "mem_138924") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138920, "mem_138920") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138929, "mem_138929") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138927, "mem_138927") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138969, "ext_mem_138969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138666, "mem_138666") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138662, "mem_138662") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138628, "mem_138628") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138633, "mem_138633") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138631, "mem_138631") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138553, "mem_param_138553") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138550, "mem_param_138550") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138672, "ext_mem_138672") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138673, "ext_mem_138673") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_float(struct futhark_context *ctx, struct memblock *mem_out_p_139509, struct memblock *mem_out_p_139510, struct memblock *mem_out_p_139511, int64_t *out_prim_out_139512, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_117667, int64_t nb_117668, int64_t window_sizze_117669, int64_t threads_117670)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138421_cached_sizze_139513 = 0;
    unsigned char *mem_138421 = NULL;
    int64_t mem_138423_cached_sizze_139514 = 0;
    unsigned char *mem_138423 = NULL;
    int64_t mem_138438_cached_sizze_139515 = 0;
    unsigned char *mem_138438 = NULL;
    int64_t mem_138441_cached_sizze_139516 = 0;
    unsigned char *mem_138441 = NULL;
    int64_t mem_138444_cached_sizze_139517 = 0;
    unsigned char *mem_138444 = NULL;
    int64_t mem_138447_cached_sizze_139518 = 0;
    unsigned char *mem_138447 = NULL;
    int64_t mem_138474_cached_sizze_139519 = 0;
    unsigned char *mem_138474 = NULL;
    int64_t mem_138477_cached_sizze_139520 = 0;
    unsigned char *mem_138477 = NULL;
    int64_t mem_138487_cached_sizze_139521 = 0;
    unsigned char *mem_138487 = NULL;
    int64_t mem_138489_cached_sizze_139522 = 0;
    unsigned char *mem_138489 = NULL;
    int64_t mem_138556_cached_sizze_139523 = 0;
    unsigned char *mem_138556 = NULL;
    int64_t mem_138559_cached_sizze_139524 = 0;
    unsigned char *mem_138559 = NULL;
    int64_t mem_138569_cached_sizze_139525 = 0;
    unsigned char *mem_138569 = NULL;
    int64_t mem_138571_cached_sizze_139526 = 0;
    unsigned char *mem_138571 = NULL;
    int64_t mem_138586_cached_sizze_139527 = 0;
    unsigned char *mem_138586 = NULL;
    int64_t mem_138589_cached_sizze_139528 = 0;
    unsigned char *mem_138589 = NULL;
    int64_t mem_138728_cached_sizze_139529 = 0;
    unsigned char *mem_138728 = NULL;
    int64_t mem_138770_cached_sizze_139530 = 0;
    unsigned char *mem_138770 = NULL;
    int64_t mem_138773_cached_sizze_139531 = 0;
    unsigned char *mem_138773 = NULL;
    int64_t mem_138783_cached_sizze_139532 = 0;
    unsigned char *mem_138783 = NULL;
    int64_t mem_138785_cached_sizze_139533 = 0;
    unsigned char *mem_138785 = NULL;
    int64_t mem_138852_cached_sizze_139534 = 0;
    unsigned char *mem_138852 = NULL;
    int64_t mem_138855_cached_sizze_139535 = 0;
    unsigned char *mem_138855 = NULL;
    int64_t mem_138865_cached_sizze_139536 = 0;
    unsigned char *mem_138865 = NULL;
    int64_t mem_138867_cached_sizze_139537 = 0;
    unsigned char *mem_138867 = NULL;
    int64_t mem_138882_cached_sizze_139538 = 0;
    unsigned char *mem_138882 = NULL;
    int64_t mem_138885_cached_sizze_139539 = 0;
    unsigned char *mem_138885 = NULL;
    struct memblock mem_param_tmp_139382;
    
    mem_param_tmp_139382.references = NULL;
    
    struct memblock mem_param_tmp_139381;
    
    mem_param_tmp_139381.references = NULL;
    
    struct memblock mem_138962;
    
    mem_138962.references = NULL;
    
    struct memblock mem_138958;
    
    mem_138958.references = NULL;
    
    struct memblock mem_138924;
    
    mem_138924.references = NULL;
    
    struct memblock mem_138920;
    
    mem_138920.references = NULL;
    
    struct memblock mem_138929;
    
    mem_138929.references = NULL;
    
    struct memblock mem_138927;
    
    mem_138927.references = NULL;
    
    struct memblock ext_mem_138944;
    
    ext_mem_138944.references = NULL;
    
    struct memblock ext_mem_138947;
    
    ext_mem_138947.references = NULL;
    
    struct memblock mem_param_138849;
    
    mem_param_138849.references = NULL;
    
    struct memblock mem_param_138846;
    
    mem_param_138846.references = NULL;
    
    struct memblock ext_mem_138968;
    
    ext_mem_138968.references = NULL;
    
    struct memblock ext_mem_138969;
    
    ext_mem_138969.references = NULL;
    
    struct memblock mem_138842;
    
    mem_138842.references = NULL;
    
    struct memblock mem_138838;
    
    mem_138838.references = NULL;
    
    struct memblock ext_mem_138972;
    
    ext_mem_138972.references = NULL;
    
    struct memblock mem_138767;
    
    mem_138767.references = NULL;
    
    struct memblock mem_param_tmp_139326;
    
    mem_param_tmp_139326.references = NULL;
    
    struct memblock mem_param_tmp_139325;
    
    mem_param_tmp_139325.references = NULL;
    
    struct memblock mem_138666;
    
    mem_138666.references = NULL;
    
    struct memblock mem_138662;
    
    mem_138662.references = NULL;
    
    struct memblock mem_138628;
    
    mem_138628.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock mem_138633;
    
    mem_138633.references = NULL;
    
    struct memblock mem_138631;
    
    mem_138631.references = NULL;
    
    struct memblock ext_mem_138648;
    
    ext_mem_138648.references = NULL;
    
    struct memblock ext_mem_138651;
    
    ext_mem_138651.references = NULL;
    
    struct memblock mem_param_138553;
    
    mem_param_138553.references = NULL;
    
    struct memblock mem_param_138550;
    
    mem_param_138550.references = NULL;
    
    struct memblock ext_mem_138672;
    
    ext_mem_138672.references = NULL;
    
    struct memblock ext_mem_138673;
    
    ext_mem_138673.references = NULL;
    
    struct memblock mem_138546;
    
    mem_138546.references = NULL;
    
    struct memblock mem_138542;
    
    mem_138542.references = NULL;
    
    struct memblock ext_mem_138676;
    
    ext_mem_138676.references = NULL;
    
    struct memblock mem_138471;
    
    mem_138471.references = NULL;
    
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t prim_out_139284;
    int64_t dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368 = add64(na_117667, nb_117668);
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139285 = 0; nest_i_139285 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139285++) {
        ((int64_t *) mem_138406.mem)[nest_i_139285] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139286 = 0; nest_i_139286 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139286++) {
        ((int64_t *) mem_138408.mem)[nest_i_139286] = (int64_t) -1;
    }
    
    int64_t bytes_138409 = (int64_t) 4 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138410, bytes_138409, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139287 = 0; nest_i_139287 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139287++) {
        ((float *) mem_138410.mem)[nest_i_139287] = 0.0F;
    }
    
    int64_t zl_rhs_136372 = sub64(na_117667, window_sizze_117669);
    bool cond_136373 = slt64((int64_t) 0, zl_rhs_136372);
    int64_t zl_rhs_136374 = sub64(nb_117668, window_sizze_117669);
    bool loop_cond_f_res_136375 = slt64((int64_t) 0, zl_rhs_136374);
    bool x_136376 = !cond_136373;
    bool y_136377 = loop_cond_f_res_136375 && x_136376;
    bool loop_cond_136378 = cond_136373 || y_136377;
    bool zzero_136379 = threads_117670 == (int64_t) 0;
    bool nonzzero_136380 = !zzero_136379;
    bool loop_not_taken_136381 = !loop_cond_136378;
    bool protect_assert_disj_136382 = nonzzero_136380 || loop_not_taken_136381;
    bool nonzzero_cert_136383;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:184:30-38\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool nonzzero_cert_136385;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:117:30-38\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:297:82-85\n   #4  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_136386 = sub64(threads_117670, (int64_t) 1);
    bool x_136387 = sle64((int64_t) 0, tmp_136386);
    bool y_136388 = slt64(tmp_136386, threads_117670);
    bool bounds_check_136389 = x_136387 && y_136388;
    bool protect_assert_disj_136390 = loop_not_taken_136381 || bounds_check_136389;
    bool index_certs_136391;
    
    if (!protect_assert_disj_136390) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136386, "] out of bounds for array of shape [", (long long) threads_117670, "].", "-> #0  ftsort.fut:207:7-33\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138420 = (int64_t) 8 * threads_117670;
    int64_t binop_x_138445 = (int64_t) 4 * threads_117670;
    
    if (mem_138421_cached_sizze_139513 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138421, &mem_138421_cached_sizze_139513, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138423_cached_sizze_139514 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138423, &mem_138423_cached_sizze_139514, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    bool defunc_0_merge_pipeline_res_136392;
    int64_t defunc_0_merge_pipeline_res_136396;
    int64_t defunc_0_merge_pipeline_res_136397;
    bool loop_while_136398;
    int64_t p_136402;
    int64_t p_136403;
    
    loop_while_136398 = loop_cond_136378;
    p_136402 = (int64_t) 0;
    p_136403 = (int64_t) 0;
    while (loop_while_136398) {
        int64_t min_arg1_136404 = sub64(na_117667, p_136402);
        int64_t min_res_136405 = smin64(window_sizze_117669, min_arg1_136404);
        int64_t min_arg1_136406 = sub64(nb_117668, p_136403);
        int64_t min_res_136407 = smin64(window_sizze_117669, min_arg1_136406);
        int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408 = add64(min_res_136405, min_res_136407);
        int64_t lb_merge_136409 = add64(p_136402, p_136403);
        int64_t zp_lhs_136410 = add64(min_res_136405, lb_merge_136409);
        int64_t ub_merge_136411 = add64(min_res_136407, zp_lhs_136410);
        int64_t as_136412 = add64(p_136402, min_res_136405);
        bool empty_slice_136413 = min_res_136405 == (int64_t) 0;
        int64_t m_136414 = sub64(min_res_136405, (int64_t) 1);
        int64_t i_p_m_t_s_136415 = add64(p_136402, m_136414);
        bool zzero_leq_i_p_m_t_s_136416 = sle64((int64_t) 0, i_p_m_t_s_136415);
        bool i_p_m_t_s_leq_w_136417 = slt64(i_p_m_t_s_136415, na_117667);
        bool zzero_lte_i_136418 = sle64((int64_t) 0, p_136402);
        bool i_lte_j_136419 = sle64(p_136402, as_136412);
        bool y_136420 = i_p_m_t_s_leq_w_136417 && zzero_lte_i_136418;
        bool y_136421 = zzero_leq_i_p_m_t_s_136416 && y_136420;
        bool forwards_ok_136422 = i_lte_j_136419 && y_136421;
        bool ok_or_empty_136423 = empty_slice_136413 || forwards_ok_136422;
        bool index_certs_136424;
        
        if (!ok_or_empty_136423) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136402, ":", (long long) as_136412, "] out of bounds for array of shape [", (long long) na_117667, "].", "-> #0  ftsort.fut:243:16-46\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bs_136425 = add64(p_136403, min_res_136407);
        bool empty_slice_136426 = min_res_136407 == (int64_t) 0;
        int64_t m_136427 = sub64(min_res_136407, (int64_t) 1);
        int64_t i_p_m_t_s_136428 = add64(p_136403, m_136427);
        bool zzero_leq_i_p_m_t_s_136429 = sle64((int64_t) 0, i_p_m_t_s_136428);
        bool i_p_m_t_s_leq_w_136430 = slt64(i_p_m_t_s_136428, nb_117668);
        bool zzero_lte_i_136431 = sle64((int64_t) 0, p_136403);
        bool i_lte_j_136432 = sle64(p_136403, bs_136425);
        bool y_136433 = i_p_m_t_s_leq_w_136430 && zzero_lte_i_136431;
        bool y_136434 = zzero_leq_i_p_m_t_s_136429 && y_136433;
        bool forwards_ok_136435 = i_lte_j_136432 && y_136434;
        bool ok_or_empty_136436 = empty_slice_136426 || forwards_ok_136435;
        bool index_certs_136437;
        
        if (!ok_or_empty_136436) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136403, ":", (long long) bs_136425, "] out of bounds for array of shape [", (long long) nb_117668, "].", "-> #0  ftsort.fut:244:16-46\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zp_rhs_136438 = sdiv64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, threads_117670);
        int64_t perThread_136439 = add64((int64_t) 1, zp_rhs_136438);
        int64_t bytes_138437 = perThread_136439 * bytes_138420;
        int64_t bytes_138446 = perThread_136439 * binop_x_138445;
        int64_t bytes_138727 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        int64_t j_m_i_137176 = sub64(ub_merge_136411, lb_merge_136409);
        bool empty_slice_137177 = j_m_i_137176 == (int64_t) 0;
        int64_t m_137178 = sub64(j_m_i_137176, (int64_t) 1);
        int64_t i_p_m_t_s_137179 = add64(lb_merge_136409, m_137178);
        bool zzero_leq_i_p_m_t_s_137180 = sle64((int64_t) 0, i_p_m_t_s_137179);
        bool i_p_m_t_s_leq_w_137181 = slt64(i_p_m_t_s_137179, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
        bool zzero_lte_i_137182 = sle64((int64_t) 0, lb_merge_136409);
        bool i_lte_j_137183 = sle64(lb_merge_136409, ub_merge_136411);
        bool y_137184 = i_p_m_t_s_leq_w_137181 && zzero_lte_i_137182;
        bool y_137185 = zzero_leq_i_p_m_t_s_137180 && y_137184;
        bool forwards_ok_137186 = i_lte_j_137183 && y_137185;
        bool ok_or_empty_137187 = empty_slice_137177 || forwards_ok_137186;
        bool index_certs_137188;
        
        if (!ok_or_empty_137187) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lb_merge_136409, ":", (long long) ub_merge_136411, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool dim_match_137189 = j_m_i_137176 == dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        bool empty_or_match_cert_137190;
        
        if (!dim_match_137189) {
            set_error(ctx, msgprintf("Error: %s%s%lld%s%s%s%lld%s%s\n\nBacktrace:\n%s", "Shape ", "[", (long long) j_m_i_137176, "]", " of slice does not match shape ", "[", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, "]", " of value.", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440 = mul64(threads_117670, perThread_136439);
        
        for (int64_t i_138210 = 0; i_138210 < threads_117670; i_138210++) {
            int64_t zs_lhs_136444 = mul64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, i_138210);
            int64_t index_136445 = sdiv64(zs_lhs_136444, threads_117670);
            bool cond_136446 = slt64(min_res_136405, index_136445);
            int64_t atop_136447;
            
            if (cond_136446) {
                atop_136447 = min_res_136405;
            } else {
                atop_136447 = index_136445;
            }
            
            int64_t btop_136448;
            
            if (cond_136446) {
                int64_t btop_t_res_137808 = sub64(index_136445, min_res_136405);
                
                btop_136448 = btop_t_res_137808;
            } else {
                btop_136448 = (int64_t) 0;
            }
            
            bool defunc_0_f_res_136450;
            int64_t defunc_0_f_res_136451;
            int64_t defunc_0_f_res_136452;
            int64_t defunc_0_f_res_136453;
            int64_t defunc_0_f_res_136454;
            int64_t defunc_0_f_res_136455;
            bool loop_while_136456;
            int64_t p_136457;
            int64_t p_136458;
            int64_t p_136459;
            int64_t p_136460;
            int64_t p_136461;
            
            loop_while_136456 = 1;
            p_136457 = btop_136448;
            p_136458 = min_res_136405;
            p_136459 = atop_136447;
            p_136460 = min_res_136407;
            p_136461 = btop_136448;
            while (loop_while_136456) {
                int64_t zs_lhs_136462 = sub64(p_136459, p_136457);
                int64_t offset_136463 = sdiv64(zs_lhs_136462, (int64_t) 2);
                int64_t ai_136464 = sub64(p_136459, offset_136463);
                int64_t bi_136465 = add64(p_136461, offset_136463);
                bool cond_136466 = sle64((int64_t) 0, ai_136464);
                bool cond_t_res_136467 = slt64(ai_136464, min_res_136405);
                bool x_136468 = cond_136466 && cond_t_res_136467;
                float acur_136469;
                
                if (x_136468) {
                    bool index_certs_137809;
                    
                    if (!x_136468) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ai_136464, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:128:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:297:82-85\n   #4  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137810 = p_136402 + ai_136464;
                    float acur_t_res_137811 = ((float *) a_list_mem_138403.mem)[slice_137810];
                    
                    acur_136469 = acur_t_res_137811;
                } else {
                    bool cond_136473 = slt64(ai_136464, (int64_t) 0);
                    float acur_f_res_136474;
                    
                    if (cond_136473) {
                        acur_f_res_136474 = -INFINITY;
                    } else {
                        acur_f_res_136474 = INFINITY;
                    }
                    acur_136469 = acur_f_res_136474;
                }
                
                bool cond_136475 = slt64((int64_t) 0, ai_136464);
                float aprev_136476;
                
                if (cond_136475) {
                    int64_t tmp_137812 = sub64(ai_136464, (int64_t) 1);
                    bool x_137813 = sle64((int64_t) 0, tmp_137812);
                    bool y_137814 = slt64(tmp_137812, min_res_136405);
                    bool bounds_check_137815 = x_137813 && y_137814;
                    bool index_certs_137816;
                    
                    if (!bounds_check_137815) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137812, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:129:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:297:82-85\n   #4  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137817 = p_136402 + tmp_137812;
                    float aprev_t_res_137818 = ((float *) a_list_mem_138403.mem)[slice_137817];
                    
                    aprev_136476 = aprev_t_res_137818;
                } else {
                    aprev_136476 = -INFINITY;
                }
                
                bool cond_136484 = sle64((int64_t) 0, bi_136465);
                bool cond_t_res_136485 = slt64(bi_136465, min_res_136407);
                bool x_136486 = cond_136484 && cond_t_res_136485;
                float bcur_136487;
                
                if (x_136486) {
                    bool index_certs_137819;
                    
                    if (!x_136486) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bi_136465, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:130:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:297:82-85\n   #4  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137820 = p_136403 + bi_136465;
                    float bcur_t_res_137821 = ((float *) b_list_mem_138404.mem)[slice_137820];
                    
                    bcur_136487 = bcur_t_res_137821;
                } else {
                    bool cond_136491 = slt64(bi_136465, (int64_t) 0);
                    float bcur_f_res_136492;
                    
                    if (cond_136491) {
                        bcur_f_res_136492 = -INFINITY;
                    } else {
                        bcur_f_res_136492 = INFINITY;
                    }
                    bcur_136487 = bcur_f_res_136492;
                }
                
                bool cond_136493 = slt64((int64_t) 0, bi_136465);
                float bprev_136494;
                
                if (cond_136493) {
                    int64_t tmp_137822 = sub64(bi_136465, (int64_t) 1);
                    bool x_137823 = sle64((int64_t) 0, tmp_137822);
                    bool y_137824 = slt64(tmp_137822, min_res_136407);
                    bool bounds_check_137825 = x_137823 && y_137824;
                    bool index_certs_137826;
                    
                    if (!bounds_check_137825) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137822, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:131:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:297:82-85\n   #4  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137827 = p_136403 + tmp_137822;
                    float bprev_t_res_137828 = ((float *) b_list_mem_138404.mem)[slice_137827];
                    
                    bprev_136494 = bprev_t_res_137828;
                } else {
                    bprev_136494 = -INFINITY;
                }
                
                bool defunc_0_gt_res_136502 = bprev_136494 < acur_136469;
                int64_t loopres_136503;
                int64_t loopres_136504;
                int64_t loopres_136505;
                int64_t loopres_136506;
                int64_t loopres_136507;
                bool loopres_136508;
                
                if (defunc_0_gt_res_136502) {
                    bool defunc_0_leq_res_137829 = aprev_136476 <= bcur_136487;
                    int64_t loopres_t_res_137830;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137830 = ai_136464;
                    } else {
                        loopres_t_res_137830 = min_res_136405;
                    }
                    
                    int64_t loopres_t_res_137831;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137831 = bi_136465;
                    } else {
                        loopres_t_res_137831 = min_res_136407;
                    }
                    
                    bool x_137832 = !defunc_0_leq_res_137829;
                    int64_t loopres_t_res_137833;
                    int64_t loopres_t_res_137834;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137833 = p_136459;
                        loopres_t_res_137834 = p_136461;
                    } else {
                        int64_t tmp_137835 = sub64(ai_136464, (int64_t) 1);
                        int64_t tmp_137836 = add64((int64_t) 1, bi_136465);
                        
                        loopres_t_res_137833 = tmp_137835;
                        loopres_t_res_137834 = tmp_137836;
                    }
                    loopres_136503 = p_136457;
                    loopres_136504 = loopres_t_res_137830;
                    loopres_136505 = loopres_t_res_137833;
                    loopres_136506 = loopres_t_res_137831;
                    loopres_136507 = loopres_t_res_137834;
                    loopres_136508 = x_137832;
                } else {
                    int64_t tmp_136517 = add64((int64_t) 1, ai_136464);
                    
                    loopres_136503 = tmp_136517;
                    loopres_136504 = min_res_136405;
                    loopres_136505 = p_136459;
                    loopres_136506 = min_res_136407;
                    loopres_136507 = p_136461;
                    loopres_136508 = 1;
                }
                
                bool loop_while_tmp_139296 = loopres_136508;
                int64_t p_tmp_139297 = loopres_136503;
                int64_t p_tmp_139298 = loopres_136504;
                int64_t p_tmp_139299 = loopres_136505;
                int64_t p_tmp_139300 = loopres_136506;
                int64_t p_tmp_139301 = loopres_136507;
                
                loop_while_136456 = loop_while_tmp_139296;
                p_136457 = p_tmp_139297;
                p_136458 = p_tmp_139298;
                p_136459 = p_tmp_139299;
                p_136460 = p_tmp_139300;
                p_136461 = p_tmp_139301;
            }
            defunc_0_f_res_136450 = loop_while_136456;
            defunc_0_f_res_136451 = p_136457;
            defunc_0_f_res_136452 = p_136458;
            defunc_0_f_res_136453 = p_136459;
            defunc_0_f_res_136454 = p_136460;
            defunc_0_f_res_136455 = p_136461;
            ((int64_t *) mem_138421)[i_138210] = defunc_0_f_res_136452;
            ((int64_t *) mem_138423)[i_138210] = defunc_0_f_res_136454;
        }
        if (mem_138438_cached_sizze_139515 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138438, &mem_138438_cached_sizze_139515, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138441_cached_sizze_139516 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138441, &mem_138441_cached_sizze_139516, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138444_cached_sizze_139517 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138444, &mem_138444_cached_sizze_139517, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138447_cached_sizze_139518 < bytes_138446) {
            err = lexical_realloc(ctx, &mem_138447, &mem_138447_cached_sizze_139518, bytes_138446);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138273 = 0; i_138273 < threads_117670; i_138273++) {
            int64_t defunc_0_f_res_136531 = ((int64_t *) mem_138421)[i_138273];
            int64_t defunc_0_f_res_136532 = ((int64_t *) mem_138423)[i_138273];
            int64_t zl_lhs_136533 = add64((int64_t) 1, i_138273);
            bool cond_136534 = slt64(zl_lhs_136533, threads_117670);
            bool x_136535 = sle64((int64_t) 0, zl_lhs_136533);
            bool bounds_check_136536 = cond_136534 && x_136535;
            bool loop_not_taken_136537 = !cond_136534;
            bool protect_assert_disj_136538 = bounds_check_136536 || loop_not_taken_136537;
            bool index_certs_136539;
            
            if (!protect_assert_disj_136538) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_lhs_136533, "] out of bounds for array of shape [", (long long) threads_117670, "].", "-> #0  ftsort.fut:191:39-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t defunc_0_f_res_t_res_136540;
            
            if (cond_136534) {
                int64_t x_137837 = ((int64_t *) mem_138421)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136540 = x_137837;
            } else {
                defunc_0_f_res_t_res_136540 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_t_res_136542;
            
            if (cond_136534) {
                int64_t x_137838 = ((int64_t *) mem_138423)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136542 = x_137838;
            } else {
                defunc_0_f_res_t_res_136542 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_136544;
            
            if (cond_136534) {
                defunc_0_f_res_136544 = defunc_0_f_res_t_res_136540;
            } else {
                defunc_0_f_res_136544 = defunc_0_f_res_136531;
            }
            
            int64_t defunc_0_f_res_136545;
            
            if (cond_136534) {
                defunc_0_f_res_136545 = defunc_0_f_res_t_res_136542;
            } else {
                defunc_0_f_res_136545 = defunc_0_f_res_136532;
            }
            
            int64_t dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 = sub64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            int64_t dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 = sub64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 = add64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t zm_lhs_136549 = add64(defunc_0_f_res_136544, defunc_0_f_res_136545);
            int64_t zm_rhs_136550 = add64(defunc_0_f_res_136531, defunc_0_f_res_136532);
            int64_t card_136551 = sub64(zm_lhs_136549, zm_rhs_136550);
            bool empty_slice_136552 = dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 == (int64_t) 0;
            int64_t m_136553 = sub64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 1);
            int64_t i_p_m_t_s_136554 = add64(defunc_0_f_res_136531, m_136553);
            bool zzero_leq_i_p_m_t_s_136555 = sle64((int64_t) 0, i_p_m_t_s_136554);
            bool i_p_m_t_s_leq_w_136556 = slt64(i_p_m_t_s_136554, min_res_136405);
            bool zzero_lte_i_136557 = sle64((int64_t) 0, defunc_0_f_res_136531);
            bool i_lte_j_136558 = sle64(defunc_0_f_res_136531, defunc_0_f_res_136544);
            bool y_136559 = i_p_m_t_s_leq_w_136556 && zzero_lte_i_136557;
            bool y_136560 = zzero_leq_i_p_m_t_s_136555 && y_136559;
            bool forwards_ok_136561 = i_lte_j_136558 && y_136560;
            bool ok_or_empty_136562 = empty_slice_136552 || forwards_ok_136561;
            bool index_certs_136563;
            
            if (!ok_or_empty_136562) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136531, ":", (long long) defunc_0_f_res_136544, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:193:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136564 = slt64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            bool valid_136565 = !bounds_invalid_upwards_136564;
            bool range_valid_c_136566;
            
            if (!valid_136565) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136531, "..<", (long long) defunc_0_f_res_136544, " is invalid.", "-> #0  ftsort.fut:193:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_136569 = dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 == (int64_t) 0;
            int64_t m_136570 = sub64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, (int64_t) 1);
            int64_t i_p_m_t_s_136571 = add64(defunc_0_f_res_136532, m_136570);
            bool zzero_leq_i_p_m_t_s_136572 = sle64((int64_t) 0, i_p_m_t_s_136571);
            bool i_p_m_t_s_leq_w_136573 = slt64(i_p_m_t_s_136571, min_res_136407);
            bool zzero_lte_i_136574 = sle64((int64_t) 0, defunc_0_f_res_136532);
            bool i_lte_j_136575 = sle64(defunc_0_f_res_136532, defunc_0_f_res_136545);
            bool y_136576 = i_p_m_t_s_leq_w_136573 && zzero_lte_i_136574;
            bool y_136577 = zzero_leq_i_p_m_t_s_136572 && y_136576;
            bool forwards_ok_136578 = i_lte_j_136575 && y_136577;
            bool ok_or_empty_136579 = empty_slice_136569 || forwards_ok_136578;
            bool index_certs_136580;
            
            if (!ok_or_empty_136579) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136532, ":", (long long) defunc_0_f_res_136545, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:194:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136581 = slt64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            bool valid_136582 = !bounds_invalid_upwards_136581;
            bool range_valid_c_136583;
            
            if (!valid_136582) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136532, "..<", (long long) defunc_0_f_res_136545, " is invalid.", "-> #0  ftsort.fut:194:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_138470 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool cond_136588 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zs_lhs_136589 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zp_rhs_136590 = sdiv_safe64(zs_lhs_136589, (int64_t) 20);
            int64_t min_num_blocks_136591 = add64((int64_t) 1, zp_rhs_136590);
            bool loop_cond_136592 = slt64((int64_t) 1, min_num_blocks_136591);
            bool smallest_pow_2_geq_than_res_136593;
            int64_t smallest_pow_2_geq_than_res_136594;
            bool loop_while_136595;
            int64_t x_136596;
            
            loop_while_136595 = loop_cond_136592;
            x_136596 = (int64_t) 1;
            while (loop_while_136595) {
                int64_t loopres_136597 = mul64((int64_t) 2, x_136596);
                bool loop_cond_136598 = slt64(loopres_136597, min_num_blocks_136591);
                bool loop_while_tmp_139306 = loop_cond_136598;
                int64_t x_tmp_139307 = loopres_136597;
                
                loop_while_136595 = loop_while_tmp_139306;
                x_136596 = x_tmp_139307;
            }
            smallest_pow_2_geq_than_res_136593 = loop_while_136595;
            smallest_pow_2_geq_than_res_136594 = x_136596;
            
            bool zzero_136599 = smallest_pow_2_geq_than_res_136594 == (int64_t) 0;
            bool nonzzero_136600 = !zzero_136599;
            bool protect_assert_disj_136601 = cond_136588 || nonzzero_136600;
            bool nonzzero_cert_136602;
            
            if (!protect_assert_disj_136601) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zp_rhs_136603 = sdiv_safe64(zs_lhs_136589, smallest_pow_2_geq_than_res_136594);
            int64_t block_sizze_136604 = add64((int64_t) 1, zp_rhs_136603);
            bool y_136609 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
            bool protect_assert_disj_139059 = cond_136588 || y_136609;
            bool index_certs_136610;
            
            if (!protect_assert_disj_139059) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136629 = slt64(smallest_pow_2_geq_than_res_136594, (int64_t) 0);
            bool valid_136630 = !bounds_invalid_upwards_136629;
            bool protect_assert_disj_139067 = cond_136588 || valid_136630;
            bool range_valid_c_136631;
            
            if (!protect_assert_disj_139067) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_136594, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:297:82-85\n   #7  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136633 = slt64(block_sizze_136604, (int64_t) 0);
            bool valid_136634 = !bounds_invalid_upwards_136633;
            bool protect_assert_disj_139069 = cond_136588 || valid_136634;
            bool range_valid_c_136635;
            
            if (!protect_assert_disj_139069) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_136604, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool cond_136637 = sle64(block_sizze_136604, (int64_t) 1);
            int64_t tmp_136638 = sub64(block_sizze_136604, (int64_t) 2);
            bool bounds_invalid_upwards_136639 = slt64(tmp_136638, (int64_t) 0);
            bool valid_136641 = !bounds_invalid_upwards_136639;
            bool protect_assert_disj_136642 = cond_136637 || valid_136641;
            bool protect_assert_disj_139071 = cond_136588 || protect_assert_disj_136642;
            bool range_valid_c_136643;
            
            if (!protect_assert_disj_139071) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_136638, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool dim_match_137123 = card_136551 == dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool empty_or_match_cert_137124;
            
            if (!dim_match_137123) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] cannot match shape of type `[", (long long) card_136551, "](i64, i64, f32)`.", "-> #0  ftsort.fut:195:20-196:82\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_137125 = card_136551 == (int64_t) 0;
            int64_t m_137126 = sub64(card_136551, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137127 = sle64((int64_t) 0, m_137126);
            bool i_p_m_t_s_leq_w_137128 = slt64(m_137126, card_136551);
            bool y_137129 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137128;
            bool ok_or_empty_137130 = empty_slice_137125 || y_137129;
            bool index_certs_137131;
            
            if (!ok_or_empty_137130) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) card_136551, "].", "-> #0  ftsort.fut:197:41-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool i_p_m_t_s_leq_w_137132 = slt64(m_137126, perThread_136439);
            bool y_137133 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137132;
            bool ok_or_empty_137134 = empty_slice_137125 || y_137133;
            bool index_certs_137135;
            
            if (!ok_or_empty_137134) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:197:17-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t nest_i_139308 = 0; nest_i_139308 < perThread_136439; nest_i_139308++) {
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + nest_i_139308] = (int64_t) -1;
            }
            for (int64_t nest_i_139309 = 0; nest_i_139309 < perThread_136439; nest_i_139309++) {
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + nest_i_139309] = (int64_t) -1;
            }
            for (int64_t nest_i_139310 = 0; nest_i_139310 < perThread_136439; nest_i_139310++) {
                ((float *) mem_138447)[i_138273 * perThread_136439 + nest_i_139310] = 0.0F;
            }
            
            int64_t slice_136567 = p_136402 + defunc_0_f_res_136531;
            int64_t slice_136584 = p_136403 + defunc_0_f_res_136532;
            
            if (memblock_alloc(ctx, &mem_138471, bytes_138470, "mem_138471")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139311 = 0; i_139311 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_139311++) {
                int64_t x_139312 = (int64_t) 0 + i_139311 * (int64_t) 1;
                
                ((int64_t *) mem_138471.mem)[i_139311] = x_139312;
            }
            
            int64_t flat_dim_136605 = smallest_pow_2_geq_than_res_136594 * block_sizze_136604;
            bool x_139054 = !cond_136588;
            int64_t greatest_divisor_leq_than_arg1_136607 = mul64((int64_t) 2, block_sizze_136604);
            int64_t merge_block_sizze_136608;
            
            if (x_139054) {
                int64_t x_139056;
                
                if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139056, (int64_t) 8, greatest_divisor_leq_than_arg1_136607) != 0) {
                    err = 1;
                    goto cleanup;
                }
                merge_block_sizze_136608 = x_139056;
            } else {
                merge_block_sizze_136608 = (int64_t) 0;
            }
            
            bool index_concat_cmp_136611 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 0);
            bool x_139050 = !index_concat_cmp_136611;
            bool protect_cond_conj_139060 = x_139050 && x_139054;
            float index_concat_136617;
            
            if (protect_cond_conj_139060) {
                float x_139052 = ((float *) a_list_mem_138403.mem)[slice_136567];
                
                index_concat_136617 = x_139052;
            } else {
                index_concat_136617 = 0.0F;
            }
            
            int64_t index_concat_i_137839 = sub64((int64_t) 0, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t slice_137840 = defunc_0_f_res_136532 + index_concat_i_137839;
            int64_t slice_137841 = p_136403 + slice_137840;
            bool protect_cond_conj_139061 = index_concat_cmp_136611 && x_139054;
            float index_concat_137842;
            
            if (protect_cond_conj_139061) {
                float x_139048 = ((float *) b_list_mem_138404.mem)[slice_137841];
                
                index_concat_137842 = x_139048;
            } else {
                index_concat_137842 = 0.0F;
            }
            
            float index_concat_branch_136612;
            
            if (index_concat_cmp_136611) {
                index_concat_branch_136612 = index_concat_137842;
            } else {
                index_concat_branch_136612 = index_concat_136617;
            }
            
            float defunc_0_reduce_res_138002;
            int64_t defunc_0_reduce_res_138003;
            
            if (x_139054) {
                float x_139062;
                int64_t x_139063;
                float redout_138213;
                int64_t redout_138214;
                
                redout_138213 = index_concat_branch_136612;
                redout_138214 = (int64_t) 0;
                for (int64_t i_138215 = 0; i_138215 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138215++) {
                    bool index_concat_cmp_138390 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, i_138215);
                    float index_concat_branch_138394;
                    
                    if (index_concat_cmp_138390) {
                        int64_t index_concat_i_138391 = sub64(i_138215, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                        int64_t slice_138401 = slice_136584 + index_concat_i_138391;
                        float index_concat_138392 = ((float *) b_list_mem_138404.mem)[slice_138401];
                        
                        index_concat_branch_138394 = index_concat_138392;
                    } else {
                        int64_t slice_138402 = slice_136567 + i_138215;
                        float index_concat_138393 = ((float *) a_list_mem_138403.mem)[slice_138402];
                        
                        index_concat_branch_138394 = index_concat_138393;
                    }
                    
                    bool defunc_0_leq_res_136626 = redout_138213 <= index_concat_branch_138394;
                    float defunc_0_op_res_136627;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136627 = index_concat_branch_138394;
                    } else {
                        defunc_0_op_res_136627 = redout_138213;
                    }
                    
                    int64_t defunc_0_op_res_136628;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136628 = i_138215;
                    } else {
                        defunc_0_op_res_136628 = redout_138214;
                    }
                    
                    float redout_tmp_139313 = defunc_0_op_res_136627;
                    int64_t redout_tmp_139314 = defunc_0_op_res_136628;
                    
                    redout_138213 = redout_tmp_139313;
                    redout_138214 = redout_tmp_139314;
                }
                x_139062 = redout_138213;
                x_139063 = redout_138214;
                defunc_0_reduce_res_138002 = x_139062;
                defunc_0_reduce_res_138003 = x_139063;
            } else {
                defunc_0_reduce_res_138002 = 0.0F;
                defunc_0_reduce_res_138003 = (int64_t) 0;
            }
            
            int64_t distance_136640 = add64((int64_t) 1, tmp_136638);
            int64_t binop_x_138472 = (int64_t) 4 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138473 = block_sizze_136604 * binop_x_138472;
            int64_t binop_x_138475 = (int64_t) 8 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138476 = block_sizze_136604 * binop_x_138475;
            int64_t bytes_138486 = (int64_t) 4 * block_sizze_136604;
            int64_t bytes_138488 = (int64_t) 8 * block_sizze_136604;
            bool loop_cond_136722 = slt64(block_sizze_136604, flat_dim_136605);
            bool zzero_136723 = merge_block_sizze_136608 == (int64_t) 0;
            bool nonzzero_136724 = !zzero_136723;
            
            if (cond_136588) {
                if (memblock_set(ctx, &ext_mem_138676, &mem_138471, "mem_138471") != 0)
                    return 1;
            } else {
                if (mem_138474_cached_sizze_139519 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138474, &mem_138474_cached_sizze_139519, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138477_cached_sizze_139520 < bytes_138476) {
                    err = lexical_realloc(ctx, &mem_138477, &mem_138477_cached_sizze_139520, bytes_138476);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138487_cached_sizze_139521 < bytes_138486) {
                    err = lexical_realloc(ctx, &mem_138487, &mem_138487_cached_sizze_139521, bytes_138486);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138489_cached_sizze_139522 < bytes_138488) {
                    err = lexical_realloc(ctx, &mem_138489, &mem_138489_cached_sizze_139522, bytes_138488);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                for (int64_t i_138227 = 0; i_138227 < smallest_pow_2_geq_than_res_136594; i_138227++) {
                    int64_t zp_lhs_136647 = mul64(block_sizze_136604, i_138227);
                    
                    for (int64_t i_138220 = 0; i_138220 < block_sizze_136604; i_138220++) {
                        int64_t k_136651 = add64(zp_lhs_136647, i_138220);
                        bool cond_136652 = slt64(k_136651, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                        float lifted_lambda_res_136653;
                        int64_t lifted_lambda_res_136654;
                        
                        if (cond_136652) {
                            bool x_137847 = sle64((int64_t) 0, k_136651);
                            bool bounds_check_137848 = cond_136652 && x_137847;
                            bool index_certs_137849;
                            
                            if (!bounds_check_137848) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_136651, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool index_concat_cmp_137850 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, k_136651);
                            float index_concat_branch_137851;
                            
                            if (index_concat_cmp_137850) {
                                int64_t index_concat_i_137852 = sub64(k_136651, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                                int64_t slice_137853 = defunc_0_f_res_136532 + index_concat_i_137852;
                                int64_t slice_137854 = p_136403 + slice_137853;
                                float index_concat_137855 = ((float *) b_list_mem_138404.mem)[slice_137854];
                                
                                index_concat_branch_137851 = index_concat_137855;
                            } else {
                                int64_t slice_137856 = defunc_0_f_res_136531 + k_136651;
                                int64_t slice_137857 = p_136402 + slice_137856;
                                float index_concat_137858 = ((float *) a_list_mem_138403.mem)[slice_137857];
                                
                                index_concat_branch_137851 = index_concat_137858;
                            }
                            lifted_lambda_res_136653 = index_concat_branch_137851;
                            lifted_lambda_res_136654 = k_136651;
                        } else {
                            lifted_lambda_res_136653 = defunc_0_reduce_res_138002;
                            lifted_lambda_res_136654 = defunc_0_reduce_res_138003;
                        }
                        ((float *) mem_138487)[i_138220] = lifted_lambda_res_136653;
                        ((int64_t *) mem_138489)[i_138220] = lifted_lambda_res_136654;
                    }
                    if (!cond_136637) {
                        for (int64_t i_136671 = 0; i_136671 < distance_136640; i_136671++) {
                            int64_t gt_arg1_136674 = add64((int64_t) 1, i_136671);
                            bool x_136675 = sle64((int64_t) 0, gt_arg1_136674);
                            bool y_136676 = slt64(gt_arg1_136674, block_sizze_136604);
                            bool bounds_check_136677 = x_136675 && y_136676;
                            bool index_certs_136678;
                            
                            if (!bounds_check_136677) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_136674, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool y_136680 = slt64(i_136671, block_sizze_136604);
                            bool index_certs_136681;
                            
                            if (!y_136680) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_136671, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            float gt_arg1_136679 = ((float *) mem_138487)[gt_arg1_136674];
                            float gt_arg0_136682 = ((float *) mem_138487)[i_136671];
                            bool defunc_0_leq_res_136683 = gt_arg0_136682 <= gt_arg1_136679;
                            bool defunc_0_lifted_gt_res_136684 = !defunc_0_leq_res_136683;
                            bool s_136685;
                            int64_t s_136688;
                            bool loop_while_136689;
                            int64_t j_136692;
                            
                            loop_while_136689 = defunc_0_lifted_gt_res_136684;
                            j_136692 = i_136671;
                            while (loop_while_136689) {
                                bool x_136693 = sle64((int64_t) 0, j_136692);
                                bool y_136694 = slt64(j_136692, block_sizze_136604);
                                bool bounds_check_136695 = x_136693 && y_136694;
                                bool index_certs_136696;
                                
                                if (!bounds_check_136695) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_136692, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t copy_arg0_136699 = add64((int64_t) 1, j_136692);
                                bool x_136700 = sle64((int64_t) 0, copy_arg0_136699);
                                bool y_136701 = slt64(copy_arg0_136699, block_sizze_136604);
                                bool bounds_check_136702 = x_136700 && y_136701;
                                bool index_certs_136703;
                                
                                if (!bounds_check_136702) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_136699, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                float copy_arg0_136697 = ((float *) mem_138487)[j_136692];
                                int64_t copy_arg0_136698 = ((int64_t *) mem_138489)[j_136692];
                                float copy_arg0_136704 = ((float *) mem_138487)[copy_arg0_136699];
                                int64_t copy_arg0_136705 = ((int64_t *) mem_138489)[copy_arg0_136699];
                                
                                ((float *) mem_138487)[j_136692] = copy_arg0_136704;
                                ((int64_t *) mem_138489)[j_136692] = copy_arg0_136705;
                                ((float *) mem_138487)[copy_arg0_136699] = copy_arg0_136697;
                                ((int64_t *) mem_138489)[copy_arg0_136699] = copy_arg0_136698;
                                
                                int64_t tmp_136710 = sub64(j_136692, (int64_t) 1);
                                bool cond_136711 = sle64((int64_t) 0, tmp_136710);
                                bool loop_cond_136712;
                                
                                if (cond_136711) {
                                    bool y_137860 = slt64(tmp_136710, block_sizze_136604);
                                    bool bounds_check_137861 = cond_136711 && y_137860;
                                    bool index_certs_137862;
                                    
                                    if (!bounds_check_137861) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136710, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    float gt_arg1_137859 = ((float *) mem_138487)[j_136692];
                                    float gt_arg0_137863 = ((float *) mem_138487)[tmp_136710];
                                    bool defunc_0_leq_res_137864 = gt_arg0_137863 <= gt_arg1_137859;
                                    bool defunc_0_lifted_gt_res_137865 = !defunc_0_leq_res_137864;
                                    
                                    loop_cond_136712 = defunc_0_lifted_gt_res_137865;
                                } else {
                                    loop_cond_136712 = 0;
                                }
                                
                                bool loop_while_tmp_139321 = loop_cond_136712;
                                int64_t j_tmp_139324 = tmp_136710;
                                
                                loop_while_136689 = loop_while_tmp_139321;
                                j_136692 = j_tmp_139324;
                            }
                            s_136685 = loop_while_136689;
                            s_136688 = j_136692;
                        }
                    }
                    lmad_copy_4b(ctx, 1, (uint32_t *) mem_138474, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138487, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138477, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138489, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                }
                if (memblock_alloc(ctx, &mem_138542, bytes_138473, "mem_138542")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_4b(ctx, 2, (uint32_t *) mem_138542.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint32_t *) mem_138474, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                if (memblock_alloc(ctx, &mem_138546, bytes_138476, "mem_138546")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138546.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138477, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                
                int64_t data_136725;
                bool data_136726;
                int64_t data_136729;
                int64_t loop_dz2084Uz2082U_136730;
                bool loop_while_136731;
                int64_t stride_136734;
                
                if (memblock_set(ctx, &mem_param_138550, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_138553, &mem_138546, "mem_138546") != 0)
                    return 1;
                loop_dz2084Uz2082U_136730 = flat_dim_136605;
                loop_while_136731 = loop_cond_136722;
                stride_136734 = block_sizze_136604;
                while (loop_while_136731) {
                    int64_t next_stride_136735 = mul64((int64_t) 2, stride_136734);
                    bool zzero_136736 = next_stride_136735 == (int64_t) 0;
                    bool nonzzero_136737 = !zzero_136736;
                    bool nonzzero_cert_136738;
                    
                    if (!nonzzero_136737) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_merges_136739 = sdiv64(flat_dim_136605, next_stride_136735);
                    bool bounds_invalid_upwards_136740 = slt64(num_merges_136739, (int64_t) 0);
                    bool valid_136741 = !bounds_invalid_upwards_136740;
                    bool range_valid_c_136742;
                    
                    if (!valid_136741) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_136739, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:297:82-85\n   #7  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t m_136744 = sub64(next_stride_136735, (int64_t) 1);
                    bool zzero_leq_i_p_m_t_s_136745 = sle64((int64_t) 0, m_136744);
                    bool cond_136747 = slt64(next_stride_136735, (int64_t) 10);
                    bool protect_assert_disj_136748 = nonzzero_136724 || cond_136747;
                    bool nonzzero_cert_136749;
                    
                    if (!protect_assert_disj_136748) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t zeze_lhs_136750 = smod_safe64(next_stride_136735, merge_block_sizze_136608);
                    bool num_blocks_136751 = zeze_lhs_136750 == (int64_t) 0;
                    bool protect_assert_disj_136752 = cond_136747 || num_blocks_136751;
                    bool assert_c_136753;
                    
                    if (!protect_assert_disj_136752) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_blocks_136754 = sdiv_safe64(next_stride_136735, merge_block_sizze_136608);
                    int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755 = add64((int64_t) 1, num_blocks_136754);
                    int64_t j_m_i_136756 = sub64(next_stride_136735, stride_136734);
                    int64_t flat_dim_136757 = merge_block_sizze_136608 * num_blocks_136754;
                    bool bounds_invalid_upwards_136758 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, (int64_t) 0);
                    bool empty_slice_136759 = j_m_i_136756 == (int64_t) 0;
                    int64_t m_136760 = sub64(j_m_i_136756, (int64_t) 1);
                    bool zzero_lte_i_136761 = sle64((int64_t) 0, stride_136734);
                    bool i_lte_j_136762 = sle64(stride_136734, next_stride_136735);
                    bool empty_slice_136763 = stride_136734 == (int64_t) 0;
                    int64_t m_136764 = sub64(stride_136734, (int64_t) 1);
                    bool bounds_invalid_upwards_136765 = slt64(num_blocks_136754, (int64_t) 0);
                    bool cond_136766 = slt64((int64_t) 0, stride_136734);
                    bool valid_136767 = !bounds_invalid_upwards_136758;
                    int64_t i_p_m_t_s_136768 = add64(stride_136734, m_136760);
                    bool zzero_leq_i_p_m_t_s_136769 = sle64((int64_t) 0, m_136764);
                    bool i_p_m_t_s_leq_w_136770 = slt64(m_136764, next_stride_136735);
                    bool valid_136771 = !bounds_invalid_upwards_136765;
                    bool i_p_m_t_s_leq_w_136772 = slt64(m_136744, flat_dim_136757);
                    bool y_136773 = slt64((int64_t) 0, j_m_i_136756);
                    bool protect_assert_disj_136774 = cond_136747 || valid_136767;
                    bool range_valid_c_136775;
                    
                    if (!protect_assert_disj_136774) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool zzero_leq_i_p_m_t_s_136776 = sle64((int64_t) 0, i_p_m_t_s_136768);
                    bool i_p_m_t_s_leq_w_136777 = slt64(i_p_m_t_s_136768, next_stride_136735);
                    bool y_136778 = zzero_leq_i_p_m_t_s_136769 && i_p_m_t_s_leq_w_136770;
                    bool protect_assert_disj_136779 = cond_136747 || valid_136771;
                    bool range_valid_c_136780;
                    
                    if (!protect_assert_disj_136779) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_136754, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_136781 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136772;
                    bool y_136782 = zzero_lte_i_136761 && i_p_m_t_s_leq_w_136777;
                    bool forwards_ok_136783 = zzero_lte_i_136761 && y_136778;
                    bool ok_or_empty_136784 = zzero_136736 || y_136781;
                    bool protect_assert_disj_136785 = cond_136766 || y_136773;
                    bool y_136786 = zzero_leq_i_p_m_t_s_136776 && y_136782;
                    bool ok_or_empty_136787 = empty_slice_136763 || forwards_ok_136783;
                    bool protect_assert_disj_136788 = cond_136747 || ok_or_empty_136784;
                    bool index_certs_136789;
                    
                    if (!protect_assert_disj_136788) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) flat_dim_136757, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool loop_not_taken_136790 = !cond_136747;
                    bool protect_assert_disj_136791 = protect_assert_disj_136785 || loop_not_taken_136790;
                    bool index_certs_136792;
                    
                    if (!protect_assert_disj_136791) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool forwards_ok_136793 = i_lte_j_136762 && y_136786;
                    bool protect_assert_disj_136794 = cond_136747 || ok_or_empty_136787;
                    bool index_certs_136795;
                    
                    if (!protect_assert_disj_136794) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136796 = ok_or_empty_136787 || loop_not_taken_136790;
                    bool index_certs_136797;
                    
                    if (!protect_assert_disj_136796) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool ok_or_empty_136798 = empty_slice_136759 || forwards_ok_136793;
                    bool protect_assert_disj_136799 = cond_136747 || ok_or_empty_136798;
                    bool index_certs_136800;
                    
                    if (!protect_assert_disj_136799) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136801 = loop_not_taken_136790 || ok_or_empty_136798;
                    bool index_certs_136802;
                    
                    if (!protect_assert_disj_136801) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_138554 = (int64_t) 4 * num_merges_136739;
                    int64_t bytes_138555 = next_stride_136735 * binop_x_138554;
                    int64_t binop_x_138557 = (int64_t) 8 * num_merges_136739;
                    int64_t bytes_138558 = next_stride_136735 * binop_x_138557;
                    bool i_lte_j_136746 = sle64((int64_t) 0, next_stride_136735);
                    
                    if (mem_138556_cached_sizze_139523 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138556, &mem_138556_cached_sizze_139523, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138559_cached_sizze_139524 < bytes_138558) {
                        err = lexical_realloc(ctx, &mem_138559, &mem_138559_cached_sizze_139524, bytes_138558);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    
                    int64_t bytes_138568 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755;
                    int64_t binop_x_138584 = (int64_t) 4 * num_blocks_136754;
                    int64_t bytes_138585 = merge_block_sizze_136608 * binop_x_138584;
                    int64_t binop_x_138587 = (int64_t) 8 * num_blocks_136754;
                    int64_t bytes_138588 = merge_block_sizze_136608 * binop_x_138587;
                    int64_t bytes_138630 = (int64_t) 8 * stride_136734;
                    int64_t bytes_138632 = (int64_t) 16 * stride_136734;
                    
                    for (int64_t i_138248 = 0; i_138248 < num_merges_136739; i_138248++) {
                        int64_t start_136806 = mul64(next_stride_136735, i_138248);
                        int64_t j_m_i_136807 = sub64(loop_dz2084Uz2082U_136730, start_136806);
                        bool empty_slice_136808 = j_m_i_136807 == (int64_t) 0;
                        int64_t m_136809 = sub64(j_m_i_136807, (int64_t) 1);
                        int64_t i_p_m_t_s_136810 = add64(start_136806, m_136809);
                        bool zzero_leq_i_p_m_t_s_136811 = sle64((int64_t) 0, i_p_m_t_s_136810);
                        bool i_p_m_t_s_leq_w_136812 = slt64(i_p_m_t_s_136810, loop_dz2084Uz2082U_136730);
                        bool zzero_lte_i_136813 = sle64((int64_t) 0, start_136806);
                        bool i_lte_j_136814 = sle64(start_136806, loop_dz2084Uz2082U_136730);
                        bool y_136815 = i_p_m_t_s_leq_w_136812 && zzero_lte_i_136813;
                        bool y_136816 = zzero_leq_i_p_m_t_s_136811 && y_136815;
                        bool forwards_ok_136817 = i_lte_j_136814 && y_136816;
                        bool ok_or_empty_136818 = empty_slice_136808 || forwards_ok_136817;
                        bool index_certs_136819;
                        
                        if (!ok_or_empty_136818) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_136806, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_136730, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool i_p_m_t_s_leq_w_136820 = slt64(m_136744, j_m_i_136807);
                        bool y_136821 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136820;
                        bool forwards_ok_136822 = i_lte_j_136746 && y_136821;
                        bool ok_or_empty_136823 = zzero_136736 || forwards_ok_136822;
                        bool index_certs_136824;
                        
                        if (!ok_or_empty_136823) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) j_m_i_136807, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        if (cond_136747) {
                            float dummy_137891;
                            int64_t dummy_137892;
                            
                            if (cond_136766) {
                                float head_res_137893 = ((float *) mem_param_138550.mem)[start_136806];
                                int64_t head_res_137894 = ((int64_t *) mem_param_138553.mem)[start_136806];
                                
                                dummy_137891 = head_res_137893;
                                dummy_137892 = head_res_137894;
                            } else {
                                int64_t slice_137895 = stride_136734 + start_136806;
                                float head_res_137896 = ((float *) mem_param_138550.mem)[slice_137895];
                                int64_t head_res_137897 = ((int64_t *) mem_param_138553.mem)[slice_137895];
                                
                                dummy_137891 = head_res_137896;
                                dummy_137892 = head_res_137897;
                            }
                            if (memblock_alloc(ctx, &mem_138631, bytes_138630, "mem_138631")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139334 = 0; nest_i_139334 < next_stride_136735; nest_i_139334++) {
                                ((float *) mem_138631.mem)[nest_i_139334] = dummy_137891;
                            }
                            if (memblock_alloc(ctx, &mem_138633, bytes_138632, "mem_138633")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139335 = 0; nest_i_139335 < next_stride_136735; nest_i_139335++) {
                                ((int64_t *) mem_138633.mem)[nest_i_139335] = dummy_137892;
                            }
                            
                            int64_t data_137900;
                            int64_t i_137904 = (int64_t) 0;
                            
                            for (int64_t k_137903 = 0; k_137903 < next_stride_136735; k_137903++) {
                                int64_t j_137907 = sub64(k_137903, i_137904);
                                bool cond_137908 = j_137907 == j_m_i_136756;
                                bool cond_137909;
                                
                                if (cond_137908) {
                                    cond_137909 = 1;
                                } else {
                                    bool cond_137910 = slt64(i_137904, stride_136734);
                                    bool cond_f_res_137911;
                                    
                                    if (cond_137910) {
                                        bool x_137912 = sle64((int64_t) 0, j_137907);
                                        bool y_137913 = slt64(j_137907, j_m_i_136756);
                                        bool bounds_check_137914 = x_137912 && y_137913;
                                        bool index_certs_137915;
                                        
                                        if (!bounds_check_137914) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137919 = sle64((int64_t) 0, i_137904);
                                        bool bounds_check_137920 = cond_137910 && x_137919;
                                        bool index_certs_137921;
                                        
                                        if (!bounds_check_137920) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137916 = stride_136734 + j_137907;
                                        int64_t slice_137917 = start_136806 + slice_137916;
                                        float leq_arg1_137918 = ((float *) mem_param_138550.mem)[slice_137917];
                                        int64_t slice_137922 = start_136806 + i_137904;
                                        float leq_arg0_137923 = ((float *) mem_param_138550.mem)[slice_137922];
                                        bool defunc_0_leq_res_137924 = leq_arg0_137923 <= leq_arg1_137918;
                                        
                                        cond_f_res_137911 = defunc_0_leq_res_137924;
                                    } else {
                                        cond_f_res_137911 = 0;
                                    }
                                    cond_137909 = cond_f_res_137911;
                                }
                                
                                int64_t loopres_137925;
                                float loopres_137926;
                                int64_t loopres_137927;
                                
                                if (cond_137909) {
                                    bool x_137929 = sle64((int64_t) 0, i_137904);
                                    bool y_137930 = slt64(i_137904, stride_136734);
                                    bool bounds_check_137931 = x_137929 && y_137930;
                                    bool index_certs_137932;
                                    
                                    if (!bounds_check_137931) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t tmp_137928 = add64((int64_t) 1, i_137904);
                                    int64_t slice_137933 = start_136806 + i_137904;
                                    float tmp_137934 = ((float *) mem_param_138550.mem)[slice_137933];
                                    int64_t tmp_137935 = ((int64_t *) mem_param_138553.mem)[slice_137933];
                                    
                                    loopres_137925 = tmp_137928;
                                    loopres_137926 = tmp_137934;
                                    loopres_137927 = tmp_137935;
                                } else {
                                    bool x_137936 = sle64((int64_t) 0, j_137907);
                                    bool y_137937 = slt64(j_137907, j_m_i_136756);
                                    bool bounds_check_137938 = x_137936 && y_137937;
                                    bool index_certs_137939;
                                    
                                    if (!bounds_check_137938) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137940 = stride_136734 + j_137907;
                                    int64_t slice_137941 = start_136806 + slice_137940;
                                    float tmp_137942 = ((float *) mem_param_138550.mem)[slice_137941];
                                    int64_t tmp_137943 = ((int64_t *) mem_param_138553.mem)[slice_137941];
                                    
                                    loopres_137925 = i_137904;
                                    loopres_137926 = tmp_137942;
                                    loopres_137927 = tmp_137943;
                                }
                                ((float *) mem_138631.mem)[k_137903] = loopres_137926;
                                ((int64_t *) mem_138633.mem)[k_137903] = loopres_137927;
                                
                                int64_t i_tmp_139336 = loopres_137925;
                                
                                i_137904 = i_tmp_139336;
                            }
                            data_137900 = i_137904;
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138631, "mem_138631") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138633, "mem_138633") != 0)
                                return 1;
                        } else {
                            if (mem_138569_cached_sizze_139525 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138569, &mem_138569_cached_sizze_139525, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138571_cached_sizze_139526 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138571, &mem_138571_cached_sizze_139526, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138234 = 0; i_138234 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755; i_138234++) {
                                int64_t split_count_arg3_136886 = mul64(merge_block_sizze_136608, i_138234);
                                int64_t defunc_0_split_count_res_136887;
                                int64_t defunc_0_split_count_res_136888;
                                int64_t defunc_0_split_count_res_136889;
                                int64_t defunc_0_split_count_res_136890;
                                int64_t defunc_0_split_count_res_136891;
                                
                                if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_136887, &defunc_0_split_count_res_136888, &defunc_0_split_count_res_136889, &defunc_0_split_count_res_136890, &defunc_0_split_count_res_136891, (int64_t) 0, stride_136734, (int64_t) 0, j_m_i_136756, split_count_arg3_136886) != 0) {
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                bool loop_cond_136892 = slt64((int64_t) 0, defunc_0_split_count_res_136891);
                                bool defunc_0_split_count_res_136893;
                                int64_t defunc_0_split_count_res_136894;
                                int64_t defunc_0_split_count_res_136895;
                                int64_t defunc_0_split_count_res_136896;
                                int64_t defunc_0_split_count_res_136897;
                                int64_t defunc_0_split_count_res_136898;
                                bool loop_while_136899;
                                int64_t ss_136900;
                                int64_t ss_136901;
                                int64_t tt_136902;
                                int64_t tt_136903;
                                int64_t count_136904;
                                
                                loop_while_136899 = loop_cond_136892;
                                ss_136900 = defunc_0_split_count_res_136887;
                                ss_136901 = defunc_0_split_count_res_136888;
                                tt_136902 = defunc_0_split_count_res_136889;
                                tt_136903 = defunc_0_split_count_res_136890;
                                count_136904 = defunc_0_split_count_res_136891;
                                while (loop_while_136899) {
                                    int64_t zlze_lhs_136905 = sub64(ss_136901, ss_136900);
                                    bool cond_136906 = sle64(zlze_lhs_136905, (int64_t) 0);
                                    int64_t defunc_0_lifted_step_res_136907;
                                    int64_t defunc_0_lifted_step_res_136908;
                                    int64_t defunc_0_lifted_step_res_136909;
                                    int64_t defunc_0_lifted_step_res_136910;
                                    
                                    if (cond_136906) {
                                        int64_t tmp_137946 = add64(tt_136902, count_136904);
                                        
                                        defunc_0_lifted_step_res_136907 = ss_136900;
                                        defunc_0_lifted_step_res_136908 = tmp_137946;
                                        defunc_0_lifted_step_res_136909 = tt_136903;
                                        defunc_0_lifted_step_res_136910 = (int64_t) 0;
                                    } else {
                                        int64_t zlze_lhs_136912 = sub64(tt_136903, tt_136902);
                                        bool cond_136913 = sle64(zlze_lhs_136912, (int64_t) 0);
                                        int64_t defunc_0_lifted_step_res_f_res_136914;
                                        int64_t defunc_0_lifted_step_res_f_res_136915;
                                        int64_t defunc_0_lifted_step_res_f_res_136916;
                                        int64_t defunc_0_lifted_step_res_f_res_136917;
                                        
                                        if (cond_136913) {
                                            int64_t tmp_137947 = add64(ss_136900, count_136904);
                                            
                                            defunc_0_lifted_step_res_f_res_136914 = tmp_137947;
                                            defunc_0_lifted_step_res_f_res_136915 = tt_136902;
                                            defunc_0_lifted_step_res_f_res_136916 = tt_136903;
                                            defunc_0_lifted_step_res_f_res_136917 = (int64_t) 0;
                                        } else {
                                            bool cond_136919 = count_136904 == (int64_t) 1;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136920;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136921;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136922;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136923;
                                            
                                            if (cond_136919) {
                                                bool x_137949 = sle64((int64_t) 0, ss_136900);
                                                bool y_137950 = slt64(ss_136900, stride_136734);
                                                bool bounds_check_137951 = x_137949 && y_137950;
                                                bool index_certs_137952;
                                                
                                                if (!bounds_check_137951) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_136900, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:297:82-85\n   #14 ftsort.fut:291:1-297:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                bool x_137955 = sle64((int64_t) 0, tt_136902);
                                                bool y_137956 = slt64(tt_136902, j_m_i_136756);
                                                bool bounds_check_137957 = x_137955 && y_137956;
                                                bool index_certs_137958;
                                                
                                                if (!bounds_check_137957) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_136902, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:297:82-85\n   #14 ftsort.fut:291:1-297:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                int64_t slice_137953 = start_136806 + ss_136900;
                                                float leq_arg1_137954 = ((float *) mem_param_138550.mem)[slice_137953];
                                                int64_t slice_137959 = stride_136734 + tt_136902;
                                                int64_t slice_137960 = start_136806 + slice_137959;
                                                float leq_arg0_137961 = ((float *) mem_param_138550.mem)[slice_137960];
                                                bool defunc_0_leq_res_137962 = leq_arg0_137961 <= leq_arg1_137954;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                
                                                if (defunc_0_leq_res_137962) {
                                                    int64_t tmp_137965 = add64((int64_t) 1, tt_136902);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = ss_136900;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tmp_137965;
                                                } else {
                                                    int64_t tmp_137966 = add64((int64_t) 1, ss_136900);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = tmp_137966;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tt_136902;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = tt_136903;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = (int64_t) 0;
                                            } else {
                                                int64_t m_136942 = sdiv64(count_136904, (int64_t) 2);
                                                int64_t n_136943 = sub64(count_136904, m_136942);
                                                bool cond_136944 = n_136943 == (int64_t) 0;
                                                int64_t zgze_lhs_136945 = add64(ss_136900, m_136942);
                                                bool cond_f_res_136946 = sle64(ss_136901, zgze_lhs_136945);
                                                bool x_136947 = !cond_136944;
                                                bool y_136948 = cond_f_res_136946 && x_136947;
                                                bool cond_136949 = cond_136944 || y_136948;
                                                bool leq_y_x_136950;
                                                
                                                if (cond_136949) {
                                                    leq_y_x_136950 = 1;
                                                } else {
                                                    bool x_136951 = sle64((int64_t) 0, zgze_lhs_136945);
                                                    bool y_136952 = slt64(zgze_lhs_136945, stride_136734);
                                                    bool bounds_check_136953 = x_136951 && y_136952;
                                                    bool index_certs_136954;
                                                    
                                                    if (!bounds_check_136953) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_136945, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:297:82-85\n   #14 ftsort.fut:291:1-297:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t zm_lhs_136957 = add64(tt_136902, n_136943);
                                                    int64_t leq_arg0_136958 = sub64(zm_lhs_136957, (int64_t) 1);
                                                    bool x_136959 = sle64((int64_t) 0, leq_arg0_136958);
                                                    bool y_136960 = slt64(leq_arg0_136958, j_m_i_136756);
                                                    bool bounds_check_136961 = x_136959 && y_136960;
                                                    bool index_certs_136962;
                                                    
                                                    if (!bounds_check_136961) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_136958, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:297:82-85\n   #14 ftsort.fut:291:1-297:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t slice_136955 = start_136806 + zgze_lhs_136945;
                                                    float leq_arg1_136956 = ((float *) mem_param_138550.mem)[slice_136955];
                                                    int64_t slice_136963 = stride_136734 + leq_arg0_136958;
                                                    int64_t slice_136964 = start_136806 + slice_136963;
                                                    float leq_arg0_136965 = ((float *) mem_param_138550.mem)[slice_136964];
                                                    bool defunc_0_leq_res_136966 = leq_arg0_136965 <= leq_arg1_136956;
                                                    
                                                    leq_y_x_136950 = defunc_0_leq_res_136966;
                                                }
                                                
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                                
                                                if (leq_y_x_136950) {
                                                    int64_t tmp_137967 = add64(tt_136902, n_136943);
                                                    int64_t tmp_137968 = sub64(count_136904, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tmp_137967;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tt_136903;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = tmp_137968;
                                                } else {
                                                    int64_t tmp_136972 = add64(tt_136902, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tt_136902;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tmp_136972;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = count_136904;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = ss_136900;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                            }
                                            defunc_0_lifted_step_res_f_res_136914 = defunc_0_lifted_step_res_f_res_f_res_136920;
                                            defunc_0_lifted_step_res_f_res_136915 = defunc_0_lifted_step_res_f_res_f_res_136921;
                                            defunc_0_lifted_step_res_f_res_136916 = defunc_0_lifted_step_res_f_res_f_res_136922;
                                            defunc_0_lifted_step_res_f_res_136917 = defunc_0_lifted_step_res_f_res_f_res_136923;
                                        }
                                        defunc_0_lifted_step_res_136907 = defunc_0_lifted_step_res_f_res_136914;
                                        defunc_0_lifted_step_res_136908 = defunc_0_lifted_step_res_f_res_136915;
                                        defunc_0_lifted_step_res_136909 = defunc_0_lifted_step_res_f_res_136916;
                                        defunc_0_lifted_step_res_136910 = defunc_0_lifted_step_res_f_res_136917;
                                    }
                                    
                                    int64_t loopres_136973;
                                    int64_t loopres_136974;
                                    int64_t loopres_136975;
                                    int64_t loopres_136976;
                                    int64_t loopres_136977;
                                    
                                    if (futrts_lifted_normalizze_8911(ctx, &loopres_136973, &loopres_136974, &loopres_136975, &loopres_136976, &loopres_136977, defunc_0_lifted_step_res_136907, ss_136901, defunc_0_lifted_step_res_136908, defunc_0_lifted_step_res_136909, defunc_0_lifted_step_res_136910) != 0) {
                                        err = 1;
                                        goto cleanup;
                                    }
                                    
                                    bool loop_cond_136978 = slt64((int64_t) 0, loopres_136977);
                                    bool loop_while_tmp_139341 = loop_cond_136978;
                                    int64_t ss_tmp_139342 = loopres_136973;
                                    int64_t ss_tmp_139343 = loopres_136974;
                                    int64_t tt_tmp_139344 = loopres_136975;
                                    int64_t tt_tmp_139345 = loopres_136976;
                                    int64_t count_tmp_139346 = loopres_136977;
                                    
                                    loop_while_136899 = loop_while_tmp_139341;
                                    ss_136900 = ss_tmp_139342;
                                    ss_136901 = ss_tmp_139343;
                                    tt_136902 = tt_tmp_139344;
                                    tt_136903 = tt_tmp_139345;
                                    count_136904 = count_tmp_139346;
                                }
                                defunc_0_split_count_res_136893 = loop_while_136899;
                                defunc_0_split_count_res_136894 = ss_136900;
                                defunc_0_split_count_res_136895 = ss_136901;
                                defunc_0_split_count_res_136896 = tt_136902;
                                defunc_0_split_count_res_136897 = tt_136903;
                                defunc_0_split_count_res_136898 = count_136904;
                                ((int64_t *) mem_138569)[i_138234] = defunc_0_split_count_res_136894;
                                ((int64_t *) mem_138571)[i_138234] = defunc_0_split_count_res_136896;
                            }
                            if (mem_138586_cached_sizze_139527 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138586, &mem_138586_cached_sizze_139527, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138589_cached_sizze_139528 < bytes_138588) {
                                err = lexical_realloc(ctx, &mem_138589, &mem_138589_cached_sizze_139528, bytes_138588);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138241 = 0; i_138241 < num_blocks_136754; i_138241++) {
                                bool y_136984 = slt64(i_138241, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool index_certs_136986;
                                
                                if (!y_136984) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138241, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136987 = ((int64_t *) mem_138569)[i_138241];
                                int64_t defunc_0_f_res_136988 = ((int64_t *) mem_138571)[i_138241];
                                int64_t tmp_136989 = add64((int64_t) 1, i_138241);
                                bool x_136990 = sle64((int64_t) 0, tmp_136989);
                                bool y_136991 = slt64(tmp_136989, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool bounds_check_136992 = x_136990 && y_136991;
                                bool index_certs_136993;
                                
                                if (!bounds_check_136992) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136989, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136994 = ((int64_t *) mem_138569)[tmp_136989];
                                int64_t defunc_0_f_res_136995 = ((int64_t *) mem_138571)[tmp_136989];
                                int64_t merge_sequential_arg2_136996 = add64(stride_136734, defunc_0_f_res_136988);
                                int64_t merge_sequential_arg2_136997 = add64(stride_136734, defunc_0_f_res_136995);
                                int64_t j_m_i_136998 = sub64(merge_sequential_arg2_136997, merge_sequential_arg2_136996);
                                bool empty_slice_136999 = j_m_i_136998 == (int64_t) 0;
                                int64_t m_137000 = sub64(j_m_i_136998, (int64_t) 1);
                                int64_t i_p_m_t_s_137001 = add64(merge_sequential_arg2_136996, m_137000);
                                bool zzero_leq_i_p_m_t_s_137002 = sle64((int64_t) 0, i_p_m_t_s_137001);
                                bool i_p_m_t_s_leq_w_137003 = slt64(i_p_m_t_s_137001, next_stride_136735);
                                bool zzero_lte_i_137004 = sle64((int64_t) 0, merge_sequential_arg2_136996);
                                bool i_lte_j_137005 = sle64(merge_sequential_arg2_136996, merge_sequential_arg2_136997);
                                bool y_137006 = i_p_m_t_s_leq_w_137003 && zzero_lte_i_137004;
                                bool y_137007 = zzero_leq_i_p_m_t_s_137002 && y_137006;
                                bool forwards_ok_137008 = i_lte_j_137005 && y_137007;
                                bool ok_or_empty_137009 = empty_slice_136999 || forwards_ok_137008;
                                bool index_certs_137010;
                                
                                if (!ok_or_empty_137009) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_136996, ":", (long long) merge_sequential_arg2_136997, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t j_m_i_137011 = sub64(defunc_0_f_res_136994, defunc_0_f_res_136987);
                                bool empty_slice_137012 = j_m_i_137011 == (int64_t) 0;
                                int64_t m_137013 = sub64(j_m_i_137011, (int64_t) 1);
                                int64_t i_p_m_t_s_137014 = add64(defunc_0_f_res_136987, m_137013);
                                bool zzero_leq_i_p_m_t_s_137015 = sle64((int64_t) 0, i_p_m_t_s_137014);
                                bool i_p_m_t_s_leq_w_137016 = slt64(i_p_m_t_s_137014, next_stride_136735);
                                bool zzero_lte_i_137017 = sle64((int64_t) 0, defunc_0_f_res_136987);
                                bool i_lte_j_137018 = sle64(defunc_0_f_res_136987, defunc_0_f_res_136994);
                                bool y_137019 = i_p_m_t_s_leq_w_137016 && zzero_lte_i_137017;
                                bool y_137020 = zzero_leq_i_p_m_t_s_137015 && y_137019;
                                bool forwards_ok_137021 = i_lte_j_137018 && y_137020;
                                bool ok_or_empty_137022 = empty_slice_137012 || forwards_ok_137021;
                                bool index_certs_137023;
                                
                                if (!ok_or_empty_137022) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136987, ":", (long long) defunc_0_f_res_136994, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool cond_137024 = slt64((int64_t) 0, j_m_i_137011);
                                float dummy_137025;
                                int64_t dummy_137026;
                                
                                if (cond_137024) {
                                    bool index_certs_137969;
                                    
                                    if (!cond_137024) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:297:82-85\n   #13 ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137970 = start_136806 + defunc_0_f_res_136987;
                                    float head_res_137971 = ((float *) mem_param_138550.mem)[slice_137970];
                                    int64_t head_res_137972 = ((int64_t *) mem_param_138553.mem)[slice_137970];
                                    
                                    dummy_137025 = head_res_137971;
                                    dummy_137026 = head_res_137972;
                                } else {
                                    bool y_137031 = slt64((int64_t) 0, j_m_i_136998);
                                    bool index_certs_137032;
                                    
                                    if (!y_137031) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:297:82-85\n   #13 ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137033 = start_136806 + merge_sequential_arg2_136996;
                                    float head_res_137034 = ((float *) mem_param_138550.mem)[slice_137033];
                                    int64_t head_res_137035 = ((int64_t *) mem_param_138553.mem)[slice_137033];
                                    
                                    dummy_137025 = head_res_137034;
                                    dummy_137026 = head_res_137035;
                                }
                                for (int64_t nest_i_139349 = 0; nest_i_139349 < merge_block_sizze_136608; nest_i_139349++) {
                                    ((float *) mem_138586)[i_138241 * merge_block_sizze_136608 + nest_i_139349] = dummy_137025;
                                }
                                for (int64_t nest_i_139350 = 0; nest_i_139350 < merge_block_sizze_136608; nest_i_139350++) {
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + nest_i_139350] = dummy_137026;
                                }
                                
                                int64_t data_137038;
                                int64_t i_137042 = (int64_t) 0;
                                
                                for (int64_t k_137041 = 0; k_137041 < merge_block_sizze_136608; k_137041++) {
                                    int64_t j_137045 = sub64(k_137041, i_137042);
                                    bool cond_137046 = j_137045 == j_m_i_136998;
                                    bool cond_137047;
                                    
                                    if (cond_137046) {
                                        cond_137047 = 1;
                                    } else {
                                        bool cond_137048 = slt64(i_137042, j_m_i_137011);
                                        bool cond_f_res_137049;
                                        
                                        if (cond_137048) {
                                            bool x_137973 = sle64((int64_t) 0, j_137045);
                                            bool y_137974 = slt64(j_137045, j_m_i_136998);
                                            bool bounds_check_137975 = x_137973 && y_137974;
                                            bool index_certs_137976;
                                            
                                            if (!bounds_check_137975) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            bool x_137980 = sle64((int64_t) 0, i_137042);
                                            bool bounds_check_137981 = cond_137048 && x_137980;
                                            bool index_certs_137982;
                                            
                                            if (!bounds_check_137981) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137977 = merge_sequential_arg2_136996 + j_137045;
                                            int64_t slice_137978 = start_136806 + slice_137977;
                                            float leq_arg1_137979 = ((float *) mem_param_138550.mem)[slice_137978];
                                            int64_t slice_137983 = defunc_0_f_res_136987 + i_137042;
                                            int64_t slice_137984 = start_136806 + slice_137983;
                                            float leq_arg0_137985 = ((float *) mem_param_138550.mem)[slice_137984];
                                            bool defunc_0_leq_res_137986 = leq_arg0_137985 <= leq_arg1_137979;
                                            
                                            cond_f_res_137049 = defunc_0_leq_res_137986;
                                        } else {
                                            cond_f_res_137049 = 0;
                                        }
                                        cond_137047 = cond_f_res_137049;
                                    }
                                    
                                    int64_t loopres_137064;
                                    float loopres_137065;
                                    int64_t loopres_137066;
                                    
                                    if (cond_137047) {
                                        bool x_137988 = sle64((int64_t) 0, i_137042);
                                        bool y_137989 = slt64(i_137042, j_m_i_137011);
                                        bool bounds_check_137990 = x_137988 && y_137989;
                                        bool index_certs_137991;
                                        
                                        if (!bounds_check_137990) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t tmp_137987 = add64((int64_t) 1, i_137042);
                                        int64_t slice_137992 = defunc_0_f_res_136987 + i_137042;
                                        int64_t slice_137993 = start_136806 + slice_137992;
                                        float tmp_137994 = ((float *) mem_param_138550.mem)[slice_137993];
                                        int64_t tmp_137995 = ((int64_t *) mem_param_138553.mem)[slice_137993];
                                        
                                        loopres_137064 = tmp_137987;
                                        loopres_137065 = tmp_137994;
                                        loopres_137066 = tmp_137995;
                                    } else {
                                        bool x_137076 = sle64((int64_t) 0, j_137045);
                                        bool y_137077 = slt64(j_137045, j_m_i_136998);
                                        bool bounds_check_137078 = x_137076 && y_137077;
                                        bool index_certs_137079;
                                        
                                        if (!bounds_check_137078) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137080 = merge_sequential_arg2_136996 + j_137045;
                                        int64_t slice_137081 = start_136806 + slice_137080;
                                        float tmp_137082 = ((float *) mem_param_138550.mem)[slice_137081];
                                        int64_t tmp_137083 = ((int64_t *) mem_param_138553.mem)[slice_137081];
                                        
                                        loopres_137064 = i_137042;
                                        loopres_137065 = tmp_137082;
                                        loopres_137066 = tmp_137083;
                                    }
                                    ((float *) mem_138586)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137065;
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137066;
                                    
                                    int64_t i_tmp_139351 = loopres_137064;
                                    
                                    i_137042 = i_tmp_139351;
                                }
                                data_137038 = i_137042;
                            }
                            if (memblock_alloc(ctx, &mem_138624, bytes_138585, "mem_138624")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_4b(ctx, 2, (uint32_t *) mem_138624.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint32_t *) mem_138586, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_alloc(ctx, &mem_138628, bytes_138588, "mem_138628")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138628.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138589, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138624, "mem_138624") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138628, "mem_138628") != 0)
                                return 1;
                        }
                        lmad_copy_4b(ctx, 1, (uint32_t *) mem_138556, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138651.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
                            return 1;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138559, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
                            return 1;
                    }
                    
                    int64_t flat_dim_137090 = next_stride_136735 * num_merges_136739;
                    
                    if (memblock_alloc(ctx, &mem_138662, bytes_138555, "mem_138662")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_138662.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint32_t *) mem_138556, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    if (memblock_alloc(ctx, &mem_138666, bytes_138558, "mem_138666")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138666.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138559, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    
                    bool loop_cond_137093 = slt64(next_stride_136735, flat_dim_136605);
                    
                    if (memblock_set(ctx, &mem_param_tmp_139325, &mem_138662, "mem_138662") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_tmp_139326, &mem_138666, "mem_138666") != 0)
                        return 1;
                    
                    int64_t loop_dz2084Uz2082U_tmp_139327 = flat_dim_137090;
                    bool loop_while_tmp_139328 = loop_cond_137093;
                    int64_t stride_tmp_139331 = next_stride_136735;
                    
                    if (memblock_set(ctx, &mem_param_138550, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_138553, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
                        return 1;
                    loop_dz2084Uz2082U_136730 = loop_dz2084Uz2082U_tmp_139327;
                    loop_while_136731 = loop_while_tmp_139328;
                    stride_136734 = stride_tmp_139331;
                }
                if (memblock_set(ctx, &ext_mem_138673, &mem_param_138550, "mem_param_138550") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_138672, &mem_param_138553, "mem_param_138553") != 0)
                    return 1;
                data_136725 = loop_dz2084Uz2082U_136730;
                data_136726 = loop_while_136731;
                data_136729 = stride_136734;
                if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
                    return 1;
                
                bool empty_slice_137094 = dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 == (int64_t) 0;
                bool zzero_leq_i_p_m_t_s_137095 = sle64((int64_t) 0, zs_lhs_136589);
                bool i_p_m_t_s_leq_w_137096 = slt64(zs_lhs_136589, data_136725);
                bool y_137097 = zzero_leq_i_p_m_t_s_137095 && i_p_m_t_s_leq_w_137096;
                bool ok_or_empty_137098 = empty_slice_137094 || y_137097;
                bool index_certs_137099;
                
                if (!ok_or_empty_137098) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] out of bounds for array of shape [", (long long) data_136725, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:297:82-85\n   #7  ftsort.fut:291:1-297:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_138676, &ext_mem_138672, "ext_mem_138672") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
                return 1;
            for (int64_t i_138257 = 0; i_138257 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138257++) {
                int64_t eta_p_137104 = ((int64_t *) ext_mem_138676.mem)[i_138257];
                bool x_137105 = sle64((int64_t) 0, eta_p_137104);
                bool y_137106 = slt64(eta_p_137104, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                bool bounds_check_137107 = x_137105 && y_137106;
                bool index_certs_137108;
                
                if (!bounds_check_137107) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137104, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool index_concat_cmp_137109 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, eta_p_137104);
                int64_t index_concat_branch_137110 = btoi_bool_i64(index_concat_cmp_137109);
                int64_t index_concat_branch_137111;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138006 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t index_primexp_138007 = add64(defunc_0_f_res_136532, index_concat_i_138006);
                    
                    index_concat_branch_137111 = index_primexp_138007;
                } else {
                    int64_t index_primexp_137114 = add64(defunc_0_f_res_136531, eta_p_137104);
                    
                    index_concat_branch_137111 = index_primexp_137114;
                }
                
                float index_concat_branch_137115;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138008 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t slice_138009 = defunc_0_f_res_136532 + index_concat_i_138008;
                    int64_t slice_138010 = p_136403 + slice_138009;
                    float index_concat_138011 = ((float *) b_list_mem_138404.mem)[slice_138010];
                    
                    index_concat_branch_137115 = index_concat_138011;
                } else {
                    int64_t slice_137120 = defunc_0_f_res_136531 + eta_p_137104;
                    int64_t slice_137121 = p_136402 + slice_137120;
                    float index_concat_137122 = ((float *) a_list_mem_138403.mem)[slice_137121];
                    
                    index_concat_branch_137115 = index_concat_137122;
                }
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137110;
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137111;
                ((float *) mem_138447)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137115;
            }
            if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
                return 1;
            for (int64_t i_138263 = 0; i_138263 < perThread_136439; i_138263++) {
                int64_t lifted_lambda_res_137141 = add64(zm_rhs_136550, i_138263);
                
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + i_138263] = lifted_lambda_res_137141;
            }
            
            bool cond_137142 = card_136551 == zp_rhs_136438;
            
            if (cond_137142) {
                bool y_138012 = slt64(card_136551, perThread_136439);
                bool index_certs_138013;
                
                if (!y_138012) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:199:46-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:297:82-85\n   #3  ftsort.fut:291:1-297:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + card_136551] = (int64_t) -1;
            }
        }
        for (int64_t nest_i_139358 = 0; nest_i_139358 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139358++) {
            ((float *) mem_138410.mem)[lb_merge_136409 + nest_i_139358] = 0.0F;
        }
        if (mem_138728_cached_sizze_139529 < bytes_138727) {
            err = lexical_realloc(ctx, &mem_138728, &mem_138728_cached_sizze_139529, bytes_138727);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_139359 = 0; nest_i_139359 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139359++) {
            ((int64_t *) mem_138728)[nest_i_139359] = (int64_t) -1;
        }
        for (int64_t nest_i_139360 = 0; nest_i_139360 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139360++) {
            ((int64_t *) mem_138406.mem)[lb_merge_136409 + nest_i_139360] = (int64_t) -1;
        }
        for (int64_t write_iter_138278 = 0; write_iter_138278 < dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440; write_iter_138278++) {
            int64_t new_index_138359 = squot64(write_iter_138278, perThread_136439);
            int64_t binop_y_138361 = perThread_136439 * new_index_138359;
            int64_t new_index_138362 = write_iter_138278 - binop_y_138361;
            int64_t write_iv_138282 = ((int64_t *) mem_138438)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138283 = ((int64_t *) mem_138441)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138284 = ((int64_t *) mem_138444)[new_index_138359 * perThread_136439 + new_index_138362];
            float write_iv_138285 = ((float *) mem_138447)[new_index_138359 * perThread_136439 + new_index_138362];
            
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138406.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138283;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138728)[write_iv_138282] = write_iv_138284;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((float *) mem_138410.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138285;
            }
        }
        
        int64_t defunc_0_mergeFunc_par_res_137151 = ((int64_t *) mem_138421)[tmp_136386];
        int64_t defunc_0_mergeFunc_par_res_137152 = ((int64_t *) mem_138423)[tmp_136386];
        
        for (int64_t i_138291 = 0; i_138291 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; i_138291++) {
            int64_t eta_p_137164 = ((int64_t *) mem_138406.mem)[lb_merge_136409 + i_138291];
            int64_t eta_p_137165 = ((int64_t *) mem_138728)[i_138291];
            bool cond_137166 = eta_p_137164 == (int64_t) 0;
            int64_t lifted_lambda_res_137167;
            
            if (cond_137166) {
                int64_t tmp_138019 = add64(p_136402, eta_p_137165);
                
                lifted_lambda_res_137167 = tmp_138019;
            } else {
                bool cond_137169 = eta_p_137164 == (int64_t) 1;
                int64_t lifted_lambda_res_f_res_137170;
                
                if (cond_137169) {
                    int64_t tmp_138020 = add64(p_136403, eta_p_137165);
                    
                    lifted_lambda_res_f_res_137170 = tmp_138020;
                } else {
                    lifted_lambda_res_f_res_137170 = eta_p_137165;
                }
                lifted_lambda_res_137167 = lifted_lambda_res_f_res_137170;
            }
            ((int64_t *) mem_138408.mem)[lb_merge_136409 + i_138291] = lifted_lambda_res_137167;
        }
        
        int64_t corrected_ubs_137174 = add64(p_136402, defunc_0_mergeFunc_par_res_137151);
        int64_t corrected_ubs_137175 = add64(p_136403, defunc_0_mergeFunc_par_res_137152);
        bool cond_137194 = slt64(corrected_ubs_137174, zl_rhs_136372);
        bool loop_cond_f_res_137195 = slt64(corrected_ubs_137175, zl_rhs_136374);
        bool x_137196 = !cond_137194;
        bool y_137197 = loop_cond_f_res_137195 && x_137196;
        bool loop_cond_137198 = cond_137194 || y_137197;
        bool loop_while_tmp_139288 = loop_cond_137198;
        int64_t p_tmp_139292 = corrected_ubs_137174;
        int64_t p_tmp_139293 = corrected_ubs_137175;
        
        loop_while_136398 = loop_while_tmp_139288;
        p_136402 = p_tmp_139292;
        p_136403 = p_tmp_139293;
    }
    defunc_0_merge_pipeline_res_136392 = loop_while_136398;
    defunc_0_merge_pipeline_res_136396 = p_136402;
    defunc_0_merge_pipeline_res_136397 = p_136403;
    
    int64_t dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 = sub64(na_117667, defunc_0_merge_pipeline_res_136396);
    int64_t arg_137200 = add64(defunc_0_merge_pipeline_res_136396, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 = sub64(dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, arg_137200);
    int64_t dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 = sub64(nb_117668, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 = add64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202);
    bool empty_slice_137204 = dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 == (int64_t) 0;
    int64_t m_137205 = sub64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 1);
    int64_t i_p_m_t_s_137206 = add64(defunc_0_merge_pipeline_res_136396, m_137205);
    bool zzero_leq_i_p_m_t_s_137207 = sle64((int64_t) 0, i_p_m_t_s_137206);
    bool i_p_m_t_s_leq_w_137208 = slt64(i_p_m_t_s_137206, na_117667);
    bool zzero_lte_i_137209 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136396);
    bool i_lte_j_137210 = sle64(defunc_0_merge_pipeline_res_136396, na_117667);
    bool y_137211 = i_p_m_t_s_leq_w_137208 && zzero_lte_i_137209;
    bool y_137212 = zzero_leq_i_p_m_t_s_137207 && y_137211;
    bool forwards_ok_137213 = i_lte_j_137210 && y_137212;
    bool ok_or_empty_137214 = empty_slice_137204 || forwards_ok_137213;
    bool index_certs_137215;
    
    if (!ok_or_empty_137214) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136396, ":", (long long) na_117667, "] out of bounds for array of shape [", (long long) na_117667, "].", "-> #0  ftsort.fut:256:57-73\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137216 = slt64(na_117667, defunc_0_merge_pipeline_res_136396);
    bool valid_137217 = !bounds_invalid_upwards_137216;
    bool range_valid_c_137218;
    
    if (!valid_137217) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136396, "..<", (long long) na_117667, " is invalid.", "-> #0  ftsort.fut:256:45-55\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137220 = dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 == (int64_t) 0;
    int64_t m_137221 = sub64(dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202, (int64_t) 1);
    int64_t i_p_m_t_s_137222 = add64(defunc_0_merge_pipeline_res_136397, m_137221);
    bool zzero_leq_i_p_m_t_s_137223 = sle64((int64_t) 0, i_p_m_t_s_137222);
    bool i_p_m_t_s_leq_w_137224 = slt64(i_p_m_t_s_137222, nb_117668);
    bool zzero_lte_i_137225 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136397);
    bool i_lte_j_137226 = sle64(defunc_0_merge_pipeline_res_136397, nb_117668);
    bool y_137227 = i_p_m_t_s_leq_w_137224 && zzero_lte_i_137225;
    bool y_137228 = zzero_leq_i_p_m_t_s_137223 && y_137227;
    bool forwards_ok_137229 = i_lte_j_137226 && y_137228;
    bool ok_or_empty_137230 = empty_slice_137220 || forwards_ok_137229;
    bool index_certs_137231;
    
    if (!ok_or_empty_137230) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136397, ":", (long long) nb_117668, "] out of bounds for array of shape [", (long long) nb_117668, "].", "-> #0  ftsort.fut:257:57-73\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137232 = slt64(nb_117668, defunc_0_merge_pipeline_res_136397);
    bool valid_137233 = !bounds_invalid_upwards_137232;
    bool range_valid_c_137234;
    
    if (!valid_137233) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136397, "..<", (long long) nb_117668, " is invalid.", "-> #0  ftsort.fut:257:45-55\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138766 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool cond_137238 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zs_lhs_137239 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zp_rhs_137240 = sdiv_safe64(zs_lhs_137239, (int64_t) 20);
    int64_t min_num_blocks_137241 = add64((int64_t) 1, zp_rhs_137240);
    bool loop_cond_137242 = slt64((int64_t) 1, min_num_blocks_137241);
    bool smallest_pow_2_geq_than_res_137243;
    int64_t smallest_pow_2_geq_than_res_137244;
    bool loop_while_137245;
    int64_t x_137246;
    
    loop_while_137245 = loop_cond_137242;
    x_137246 = (int64_t) 1;
    while (loop_while_137245) {
        int64_t loopres_137247 = mul64((int64_t) 2, x_137246);
        bool loop_cond_137248 = slt64(loopres_137247, min_num_blocks_137241);
        bool loop_while_tmp_139365 = loop_cond_137248;
        int64_t x_tmp_139366 = loopres_137247;
        
        loop_while_137245 = loop_while_tmp_139365;
        x_137246 = x_tmp_139366;
    }
    smallest_pow_2_geq_than_res_137243 = loop_while_137245;
    smallest_pow_2_geq_than_res_137244 = x_137246;
    
    bool zzero_137249 = smallest_pow_2_geq_than_res_137244 == (int64_t) 0;
    bool nonzzero_137250 = !zzero_137249;
    bool protect_assert_disj_137251 = cond_137238 || nonzzero_137250;
    bool nonzzero_cert_137252;
    
    if (!protect_assert_disj_137251) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:297:82-85\n   #5  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_137253 = sdiv_safe64(zs_lhs_137239, smallest_pow_2_geq_than_res_137244);
    int64_t block_sizze_137254 = add64((int64_t) 1, zp_rhs_137253);
    bool y_137259 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
    bool protect_assert_disj_139025 = cond_137238 || y_137259;
    bool index_certs_137260;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:297:82-85\n   #5  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137278 = slt64(smallest_pow_2_geq_than_res_137244, (int64_t) 0);
    bool valid_137279 = !bounds_invalid_upwards_137278;
    bool protect_assert_disj_139033 = cond_137238 || valid_137279;
    bool range_valid_c_137280;
    
    if (!protect_assert_disj_139033) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_137244, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137282 = slt64(block_sizze_137254, (int64_t) 0);
    bool valid_137283 = !bounds_invalid_upwards_137282;
    bool protect_assert_disj_139035 = cond_137238 || valid_137283;
    bool range_valid_c_137284;
    
    if (!protect_assert_disj_139035) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_137254, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_137286 = sle64(block_sizze_137254, (int64_t) 1);
    int64_t tmp_137287 = sub64(block_sizze_137254, (int64_t) 2);
    bool bounds_invalid_upwards_137288 = slt64(tmp_137287, (int64_t) 0);
    bool valid_137290 = !bounds_invalid_upwards_137288;
    bool protect_assert_disj_137291 = cond_137286 || valid_137290;
    bool protect_assert_disj_139037 = cond_137238 || protect_assert_disj_137291;
    bool range_valid_c_137292;
    
    if (!protect_assert_disj_139037) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_137287, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_137768 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool empty_or_match_cert_137769;
    
    if (!dim_match_137768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] cannot match shape of type `[", (long long) dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, "](i64, i64, f32)`.", "-> #0  ftsort.fut:258:20-259:95\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137770 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == (int64_t) 0;
    int64_t m_137771 = sub64(dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, (int64_t) 1);
    int64_t i_p_m_t_s_137772 = add64(arg_137200, m_137771);
    bool zzero_leq_i_p_m_t_s_137773 = sle64((int64_t) 0, i_p_m_t_s_137772);
    bool i_p_m_t_s_leq_w_137774 = slt64(i_p_m_t_s_137772, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool zzero_lte_i_137775 = sle64((int64_t) 0, arg_137200);
    bool i_lte_j_137776 = sle64(arg_137200, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool y_137777 = i_p_m_t_s_leq_w_137774 && zzero_lte_i_137775;
    bool y_137778 = zzero_leq_i_p_m_t_s_137773 && y_137777;
    bool forwards_ok_137779 = i_lte_j_137776 && y_137778;
    bool ok_or_empty_137780 = empty_slice_137770 || forwards_ok_137779;
    bool index_certs_137781;
    
    if (!ok_or_empty_137780) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_137200, ":", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:260:21-79\n   #1  ftsort.fut:297:82-85\n   #2  ftsort.fut:291:1-297:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138767, bytes_138766, "mem_138767")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_139367++) {
        int64_t x_139368 = (int64_t) 0 + i_139367 * (int64_t) 1;
        
        ((int64_t *) mem_138767.mem)[i_139367] = x_139368;
    }
    
    int64_t flat_dim_137255 = smallest_pow_2_geq_than_res_137244 * block_sizze_137254;
    bool x_139020 = !cond_137238;
    int64_t greatest_divisor_leq_than_arg1_137257 = mul64((int64_t) 2, block_sizze_137254);
    int64_t merge_block_sizze_137258;
    
    if (x_139020) {
        int64_t x_139022;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139022, (int64_t) 8, greatest_divisor_leq_than_arg1_137257) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_137258 = x_139022;
    } else {
        merge_block_sizze_137258 = (int64_t) 0;
    }
    
    bool index_concat_cmp_137261 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 0);
    bool x_139016 = !index_concat_cmp_137261;
    bool protect_cond_conj_139026 = x_139016 && x_139020;
    float index_concat_137266;
    
    if (protect_cond_conj_139026) {
        float x_139018 = ((float *) a_list_mem_138403.mem)[defunc_0_merge_pipeline_res_136396];
        
        index_concat_137266 = x_139018;
    } else {
        index_concat_137266 = 0.0F;
    }
    
    int64_t index_concat_i_138035 = sub64((int64_t) 0, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
    int64_t slice_138036 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138035;
    bool protect_cond_conj_139027 = index_concat_cmp_137261 && x_139020;
    float index_concat_138037;
    
    if (protect_cond_conj_139027) {
        float x_139014 = ((float *) b_list_mem_138404.mem)[slice_138036];
        
        index_concat_138037 = x_139014;
    } else {
        index_concat_138037 = 0.0F;
    }
    
    float index_concat_branch_137262;
    
    if (index_concat_cmp_137261) {
        index_concat_branch_137262 = index_concat_138037;
    } else {
        index_concat_branch_137262 = index_concat_137266;
    }
    
    float defunc_0_reduce_res_138194;
    int64_t defunc_0_reduce_res_138195;
    
    if (x_139020) {
        float x_139028;
        int64_t x_139029;
        float redout_138293;
        int64_t redout_138294;
        
        redout_138293 = index_concat_branch_137262;
        redout_138294 = (int64_t) 0;
        for (int64_t i_138295 = 0; i_138295 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138295++) {
            bool index_concat_cmp_138354 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, i_138295);
            float index_concat_branch_138358;
            
            if (index_concat_cmp_138354) {
                int64_t index_concat_i_138355 = sub64(i_138295, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                int64_t slice_138399 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138355;
                float index_concat_138356 = ((float *) b_list_mem_138404.mem)[slice_138399];
                
                index_concat_branch_138358 = index_concat_138356;
            } else {
                int64_t slice_138400 = defunc_0_merge_pipeline_res_136396 + i_138295;
                float index_concat_138357 = ((float *) a_list_mem_138403.mem)[slice_138400];
                
                index_concat_branch_138358 = index_concat_138357;
            }
            
            bool defunc_0_leq_res_137275 = redout_138293 <= index_concat_branch_138358;
            float defunc_0_op_res_137276;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137276 = index_concat_branch_138358;
            } else {
                defunc_0_op_res_137276 = redout_138293;
            }
            
            int64_t defunc_0_op_res_137277;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137277 = i_138295;
            } else {
                defunc_0_op_res_137277 = redout_138294;
            }
            
            float redout_tmp_139369 = defunc_0_op_res_137276;
            int64_t redout_tmp_139370 = defunc_0_op_res_137277;
            
            redout_138293 = redout_tmp_139369;
            redout_138294 = redout_tmp_139370;
        }
        x_139028 = redout_138293;
        x_139029 = redout_138294;
        defunc_0_reduce_res_138194 = x_139028;
        defunc_0_reduce_res_138195 = x_139029;
    } else {
        defunc_0_reduce_res_138194 = 0.0F;
        defunc_0_reduce_res_138195 = (int64_t) 0;
    }
    
    int64_t distance_137289 = add64((int64_t) 1, tmp_137287);
    int64_t binop_x_138768 = (int64_t) 4 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138769 = block_sizze_137254 * binop_x_138768;
    int64_t binop_x_138771 = (int64_t) 8 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138772 = block_sizze_137254 * binop_x_138771;
    int64_t bytes_138782 = (int64_t) 4 * block_sizze_137254;
    int64_t bytes_138784 = (int64_t) 8 * block_sizze_137254;
    bool loop_cond_137369 = slt64(block_sizze_137254, flat_dim_137255);
    bool zzero_137370 = merge_block_sizze_137258 == (int64_t) 0;
    bool nonzzero_137371 = !zzero_137370;
    
    if (cond_137238) {
        if (memblock_set(ctx, &ext_mem_138972, &mem_138767, "mem_138767") != 0)
            return 1;
    } else {
        if (mem_138770_cached_sizze_139530 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138770, &mem_138770_cached_sizze_139530, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138773_cached_sizze_139531 < bytes_138772) {
            err = lexical_realloc(ctx, &mem_138773, &mem_138773_cached_sizze_139531, bytes_138772);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138783_cached_sizze_139532 < bytes_138782) {
            err = lexical_realloc(ctx, &mem_138783, &mem_138783_cached_sizze_139532, bytes_138782);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138785_cached_sizze_139533 < bytes_138784) {
            err = lexical_realloc(ctx, &mem_138785, &mem_138785_cached_sizze_139533, bytes_138784);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138307 = 0; i_138307 < smallest_pow_2_geq_than_res_137244; i_138307++) {
            int64_t zp_lhs_137296 = mul64(block_sizze_137254, i_138307);
            
            for (int64_t i_138300 = 0; i_138300 < block_sizze_137254; i_138300++) {
                int64_t k_137300 = add64(zp_lhs_137296, i_138300);
                bool cond_137301 = slt64(k_137300, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
                float lifted_lambda_res_137302;
                int64_t lifted_lambda_res_137303;
                
                if (cond_137301) {
                    bool x_138041 = sle64((int64_t) 0, k_137300);
                    bool bounds_check_138042 = cond_137301 && x_138041;
                    bool index_certs_138043;
                    
                    if (!bounds_check_138042) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_137300, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool index_concat_cmp_138044 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, k_137300);
                    float index_concat_branch_138045;
                    
                    if (index_concat_cmp_138044) {
                        int64_t index_concat_i_138046 = sub64(k_137300, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                        int64_t slice_138047 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138046;
                        float index_concat_138048 = ((float *) b_list_mem_138404.mem)[slice_138047];
                        
                        index_concat_branch_138045 = index_concat_138048;
                    } else {
                        int64_t slice_138049 = defunc_0_merge_pipeline_res_136396 + k_137300;
                        float index_concat_138050 = ((float *) a_list_mem_138403.mem)[slice_138049];
                        
                        index_concat_branch_138045 = index_concat_138050;
                    }
                    lifted_lambda_res_137302 = index_concat_branch_138045;
                    lifted_lambda_res_137303 = k_137300;
                } else {
                    lifted_lambda_res_137302 = defunc_0_reduce_res_138194;
                    lifted_lambda_res_137303 = defunc_0_reduce_res_138195;
                }
                ((float *) mem_138783)[i_138300] = lifted_lambda_res_137302;
                ((int64_t *) mem_138785)[i_138300] = lifted_lambda_res_137303;
            }
            if (!cond_137286) {
                for (int64_t i_137318 = 0; i_137318 < distance_137289; i_137318++) {
                    int64_t gt_arg1_137321 = add64((int64_t) 1, i_137318);
                    bool x_137322 = sle64((int64_t) 0, gt_arg1_137321);
                    bool y_137323 = slt64(gt_arg1_137321, block_sizze_137254);
                    bool bounds_check_137324 = x_137322 && y_137323;
                    bool index_certs_137325;
                    
                    if (!bounds_check_137324) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_137321, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_137327 = slt64(i_137318, block_sizze_137254);
                    bool index_certs_137328;
                    
                    if (!y_137327) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137318, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    float gt_arg1_137326 = ((float *) mem_138783)[gt_arg1_137321];
                    float gt_arg0_137329 = ((float *) mem_138783)[i_137318];
                    bool defunc_0_leq_res_137330 = gt_arg0_137329 <= gt_arg1_137326;
                    bool defunc_0_lifted_gt_res_137331 = !defunc_0_leq_res_137330;
                    bool s_137332;
                    int64_t s_137335;
                    bool loop_while_137336;
                    int64_t j_137339;
                    
                    loop_while_137336 = defunc_0_lifted_gt_res_137331;
                    j_137339 = i_137318;
                    while (loop_while_137336) {
                        bool x_137340 = sle64((int64_t) 0, j_137339);
                        bool y_137341 = slt64(j_137339, block_sizze_137254);
                        bool bounds_check_137342 = x_137340 && y_137341;
                        bool index_certs_137343;
                        
                        if (!bounds_check_137342) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137339, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_137346 = add64((int64_t) 1, j_137339);
                        bool x_137347 = sle64((int64_t) 0, copy_arg0_137346);
                        bool y_137348 = slt64(copy_arg0_137346, block_sizze_137254);
                        bool bounds_check_137349 = x_137347 && y_137348;
                        bool index_certs_137350;
                        
                        if (!bounds_check_137349) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_137346, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        float copy_arg0_137344 = ((float *) mem_138783)[j_137339];
                        int64_t copy_arg0_137345 = ((int64_t *) mem_138785)[j_137339];
                        float copy_arg0_137351 = ((float *) mem_138783)[copy_arg0_137346];
                        int64_t copy_arg0_137352 = ((int64_t *) mem_138785)[copy_arg0_137346];
                        
                        ((float *) mem_138783)[j_137339] = copy_arg0_137351;
                        ((int64_t *) mem_138785)[j_137339] = copy_arg0_137352;
                        ((float *) mem_138783)[copy_arg0_137346] = copy_arg0_137344;
                        ((int64_t *) mem_138785)[copy_arg0_137346] = copy_arg0_137345;
                        
                        int64_t tmp_137357 = sub64(j_137339, (int64_t) 1);
                        bool cond_137358 = sle64((int64_t) 0, tmp_137357);
                        bool loop_cond_137359;
                        
                        if (cond_137358) {
                            bool y_138052 = slt64(tmp_137357, block_sizze_137254);
                            bool bounds_check_138053 = cond_137358 && y_138052;
                            bool index_certs_138054;
                            
                            if (!bounds_check_138053) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137357, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            float gt_arg1_138051 = ((float *) mem_138783)[j_137339];
                            float gt_arg0_138055 = ((float *) mem_138783)[tmp_137357];
                            bool defunc_0_leq_res_138056 = gt_arg0_138055 <= gt_arg1_138051;
                            bool defunc_0_lifted_gt_res_138057 = !defunc_0_leq_res_138056;
                            
                            loop_cond_137359 = defunc_0_lifted_gt_res_138057;
                        } else {
                            loop_cond_137359 = 0;
                        }
                        
                        bool loop_while_tmp_139377 = loop_cond_137359;
                        int64_t j_tmp_139380 = tmp_137357;
                        
                        loop_while_137336 = loop_while_tmp_139377;
                        j_137339 = j_tmp_139380;
                    }
                    s_137332 = loop_while_137336;
                    s_137335 = j_137339;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_138770, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138783, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138773, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138785, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
        }
        if (memblock_alloc(ctx, &mem_138838, bytes_138769, "mem_138838")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_138838.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint32_t *) mem_138770, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        if (memblock_alloc(ctx, &mem_138842, bytes_138772, "mem_138842")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138842.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138773, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        
        int64_t data_137372;
        bool data_137373;
        int64_t data_137376;
        int64_t loop_dz2084Uz2082U_137377;
        bool loop_while_137378;
        int64_t stride_137381;
        
        if (memblock_set(ctx, &mem_param_138846, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138849, &mem_138842, "mem_138842") != 0)
            return 1;
        loop_dz2084Uz2082U_137377 = flat_dim_137255;
        loop_while_137378 = loop_cond_137369;
        stride_137381 = block_sizze_137254;
        while (loop_while_137378) {
            int64_t next_stride_137382 = mul64((int64_t) 2, stride_137381);
            bool zzero_137383 = next_stride_137382 == (int64_t) 0;
            bool nonzzero_137384 = !zzero_137383;
            bool nonzzero_cert_137385;
            
            if (!nonzzero_137384) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:297:82-85\n   #5  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_137386 = sdiv64(flat_dim_137255, next_stride_137382);
            bool bounds_invalid_upwards_137387 = slt64(num_merges_137386, (int64_t) 0);
            bool valid_137388 = !bounds_invalid_upwards_137387;
            bool range_valid_c_137389;
            
            if (!valid_137388) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_137386, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_137391 = sub64(next_stride_137382, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137392 = sle64((int64_t) 0, m_137391);
            bool cond_137394 = slt64(next_stride_137382, (int64_t) 10);
            bool protect_assert_disj_137395 = nonzzero_137371 || cond_137394;
            bool nonzzero_cert_137396;
            
            if (!protect_assert_disj_137395) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_137397 = smod_safe64(next_stride_137382, merge_block_sizze_137258);
            bool num_blocks_137398 = zeze_lhs_137397 == (int64_t) 0;
            bool protect_assert_disj_137399 = cond_137394 || num_blocks_137398;
            bool assert_c_137400;
            
            if (!protect_assert_disj_137399) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_137401 = sdiv_safe64(next_stride_137382, merge_block_sizze_137258);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402 = add64((int64_t) 1, num_blocks_137401);
            int64_t j_m_i_137403 = sub64(next_stride_137382, stride_137381);
            int64_t flat_dim_137404 = merge_block_sizze_137258 * num_blocks_137401;
            bool bounds_invalid_upwards_137405 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, (int64_t) 0);
            bool empty_slice_137406 = j_m_i_137403 == (int64_t) 0;
            int64_t m_137407 = sub64(j_m_i_137403, (int64_t) 1);
            bool zzero_lte_i_137408 = sle64((int64_t) 0, stride_137381);
            bool i_lte_j_137409 = sle64(stride_137381, next_stride_137382);
            bool empty_slice_137410 = stride_137381 == (int64_t) 0;
            int64_t m_137411 = sub64(stride_137381, (int64_t) 1);
            bool bounds_invalid_upwards_137412 = slt64(num_blocks_137401, (int64_t) 0);
            bool cond_137413 = slt64((int64_t) 0, stride_137381);
            bool valid_137414 = !bounds_invalid_upwards_137405;
            int64_t i_p_m_t_s_137415 = add64(stride_137381, m_137407);
            bool zzero_leq_i_p_m_t_s_137416 = sle64((int64_t) 0, m_137411);
            bool i_p_m_t_s_leq_w_137417 = slt64(m_137411, next_stride_137382);
            bool valid_137418 = !bounds_invalid_upwards_137412;
            bool i_p_m_t_s_leq_w_137419 = slt64(m_137391, flat_dim_137404);
            bool y_137420 = slt64((int64_t) 0, j_m_i_137403);
            bool protect_assert_disj_137421 = cond_137394 || valid_137414;
            bool range_valid_c_137422;
            
            if (!protect_assert_disj_137421) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_137423 = sle64((int64_t) 0, i_p_m_t_s_137415);
            bool i_p_m_t_s_leq_w_137424 = slt64(i_p_m_t_s_137415, next_stride_137382);
            bool y_137425 = zzero_leq_i_p_m_t_s_137416 && i_p_m_t_s_leq_w_137417;
            bool protect_assert_disj_137426 = cond_137394 || valid_137418;
            bool range_valid_c_137427;
            
            if (!protect_assert_disj_137426) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_137401, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_137428 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137419;
            bool y_137429 = zzero_lte_i_137408 && i_p_m_t_s_leq_w_137424;
            bool forwards_ok_137430 = zzero_lte_i_137408 && y_137425;
            bool ok_or_empty_137431 = zzero_137383 || y_137428;
            bool protect_assert_disj_137432 = cond_137413 || y_137420;
            bool y_137433 = zzero_leq_i_p_m_t_s_137423 && y_137429;
            bool ok_or_empty_137434 = empty_slice_137410 || forwards_ok_137430;
            bool protect_assert_disj_137435 = cond_137394 || ok_or_empty_137431;
            bool index_certs_137436;
            
            if (!protect_assert_disj_137435) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) flat_dim_137404, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_137437 = !cond_137394;
            bool protect_assert_disj_137438 = protect_assert_disj_137432 || loop_not_taken_137437;
            bool index_certs_137439;
            
            if (!protect_assert_disj_137438) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_137440 = i_lte_j_137409 && y_137433;
            bool protect_assert_disj_137441 = cond_137394 || ok_or_empty_137434;
            bool index_certs_137442;
            
            if (!protect_assert_disj_137441) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137443 = ok_or_empty_137434 || loop_not_taken_137437;
            bool index_certs_137444;
            
            if (!protect_assert_disj_137443) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_137445 = empty_slice_137406 || forwards_ok_137440;
            bool protect_assert_disj_137446 = cond_137394 || ok_or_empty_137445;
            bool index_certs_137447;
            
            if (!protect_assert_disj_137446) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137448 = loop_not_taken_137437 || ok_or_empty_137445;
            bool index_certs_137449;
            
            if (!protect_assert_disj_137448) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138850 = (int64_t) 4 * num_merges_137386;
            int64_t bytes_138851 = next_stride_137382 * binop_x_138850;
            int64_t binop_x_138853 = (int64_t) 8 * num_merges_137386;
            int64_t bytes_138854 = next_stride_137382 * binop_x_138853;
            bool i_lte_j_137393 = sle64((int64_t) 0, next_stride_137382);
            
            if (mem_138852_cached_sizze_139534 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138852, &mem_138852_cached_sizze_139534, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138855_cached_sizze_139535 < bytes_138854) {
                err = lexical_realloc(ctx, &mem_138855, &mem_138855_cached_sizze_139535, bytes_138854);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138864 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402;
            int64_t binop_x_138880 = (int64_t) 4 * num_blocks_137401;
            int64_t bytes_138881 = merge_block_sizze_137258 * binop_x_138880;
            int64_t binop_x_138883 = (int64_t) 8 * num_blocks_137401;
            int64_t bytes_138884 = merge_block_sizze_137258 * binop_x_138883;
            int64_t bytes_138926 = (int64_t) 8 * stride_137381;
            int64_t bytes_138928 = (int64_t) 16 * stride_137381;
            
            for (int64_t i_138328 = 0; i_138328 < num_merges_137386; i_138328++) {
                int64_t start_137453 = mul64(next_stride_137382, i_138328);
                int64_t j_m_i_137454 = sub64(loop_dz2084Uz2082U_137377, start_137453);
                bool empty_slice_137455 = j_m_i_137454 == (int64_t) 0;
                int64_t m_137456 = sub64(j_m_i_137454, (int64_t) 1);
                int64_t i_p_m_t_s_137457 = add64(start_137453, m_137456);
                bool zzero_leq_i_p_m_t_s_137458 = sle64((int64_t) 0, i_p_m_t_s_137457);
                bool i_p_m_t_s_leq_w_137459 = slt64(i_p_m_t_s_137457, loop_dz2084Uz2082U_137377);
                bool zzero_lte_i_137460 = sle64((int64_t) 0, start_137453);
                bool i_lte_j_137461 = sle64(start_137453, loop_dz2084Uz2082U_137377);
                bool y_137462 = i_p_m_t_s_leq_w_137459 && zzero_lte_i_137460;
                bool y_137463 = zzero_leq_i_p_m_t_s_137458 && y_137462;
                bool forwards_ok_137464 = i_lte_j_137461 && y_137463;
                bool ok_or_empty_137465 = empty_slice_137455 || forwards_ok_137464;
                bool index_certs_137466;
                
                if (!ok_or_empty_137465) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_137453, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_137377, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_137467 = slt64(m_137391, j_m_i_137454);
                bool y_137468 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137467;
                bool forwards_ok_137469 = i_lte_j_137393 && y_137468;
                bool ok_or_empty_137470 = zzero_137383 || forwards_ok_137469;
                bool index_certs_137471;
                
                if (!ok_or_empty_137470) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) j_m_i_137454, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:297:82-85\n   #8  ftsort.fut:291:1-297:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_137394) {
                    float dummy_138083;
                    int64_t dummy_138084;
                    
                    if (cond_137413) {
                        float head_res_138085 = ((float *) mem_param_138846.mem)[start_137453];
                        int64_t head_res_138086 = ((int64_t *) mem_param_138849.mem)[start_137453];
                        
                        dummy_138083 = head_res_138085;
                        dummy_138084 = head_res_138086;
                    } else {
                        int64_t slice_138087 = stride_137381 + start_137453;
                        float head_res_138088 = ((float *) mem_param_138846.mem)[slice_138087];
                        int64_t head_res_138089 = ((int64_t *) mem_param_138849.mem)[slice_138087];
                        
                        dummy_138083 = head_res_138088;
                        dummy_138084 = head_res_138089;
                    }
                    if (memblock_alloc(ctx, &mem_138927, bytes_138926, "mem_138927")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139390 = 0; nest_i_139390 < next_stride_137382; nest_i_139390++) {
                        ((float *) mem_138927.mem)[nest_i_139390] = dummy_138083;
                    }
                    if (memblock_alloc(ctx, &mem_138929, bytes_138928, "mem_138929")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139391 = 0; nest_i_139391 < next_stride_137382; nest_i_139391++) {
                        ((int64_t *) mem_138929.mem)[nest_i_139391] = dummy_138084;
                    }
                    
                    int64_t data_138092;
                    int64_t i_138096 = (int64_t) 0;
                    
                    for (int64_t k_138095 = 0; k_138095 < next_stride_137382; k_138095++) {
                        int64_t j_138099 = sub64(k_138095, i_138096);
                        bool cond_138100 = j_138099 == j_m_i_137403;
                        bool cond_138101;
                        
                        if (cond_138100) {
                            cond_138101 = 1;
                        } else {
                            bool cond_138102 = slt64(i_138096, stride_137381);
                            bool cond_f_res_138103;
                            
                            if (cond_138102) {
                                bool x_138104 = sle64((int64_t) 0, j_138099);
                                bool y_138105 = slt64(j_138099, j_m_i_137403);
                                bool bounds_check_138106 = x_138104 && y_138105;
                                bool index_certs_138107;
                                
                                if (!bounds_check_138106) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_138111 = sle64((int64_t) 0, i_138096);
                                bool bounds_check_138112 = cond_138102 && x_138111;
                                bool index_certs_138113;
                                
                                if (!bounds_check_138112) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_138108 = stride_137381 + j_138099;
                                int64_t slice_138109 = start_137453 + slice_138108;
                                float leq_arg1_138110 = ((float *) mem_param_138846.mem)[slice_138109];
                                int64_t slice_138114 = start_137453 + i_138096;
                                float leq_arg0_138115 = ((float *) mem_param_138846.mem)[slice_138114];
                                bool defunc_0_leq_res_138116 = leq_arg0_138115 <= leq_arg1_138110;
                                
                                cond_f_res_138103 = defunc_0_leq_res_138116;
                            } else {
                                cond_f_res_138103 = 0;
                            }
                            cond_138101 = cond_f_res_138103;
                        }
                        
                        int64_t loopres_138117;
                        float loopres_138118;
                        int64_t loopres_138119;
                        
                        if (cond_138101) {
                            bool x_138121 = sle64((int64_t) 0, i_138096);
                            bool y_138122 = slt64(i_138096, stride_137381);
                            bool bounds_check_138123 = x_138121 && y_138122;
                            bool index_certs_138124;
                            
                            if (!bounds_check_138123) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_138120 = add64((int64_t) 1, i_138096);
                            int64_t slice_138125 = start_137453 + i_138096;
                            float tmp_138126 = ((float *) mem_param_138846.mem)[slice_138125];
                            int64_t tmp_138127 = ((int64_t *) mem_param_138849.mem)[slice_138125];
                            
                            loopres_138117 = tmp_138120;
                            loopres_138118 = tmp_138126;
                            loopres_138119 = tmp_138127;
                        } else {
                            bool x_138128 = sle64((int64_t) 0, j_138099);
                            bool y_138129 = slt64(j_138099, j_m_i_137403);
                            bool bounds_check_138130 = x_138128 && y_138129;
                            bool index_certs_138131;
                            
                            if (!bounds_check_138130) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:297:82-85\n   #9  ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138132 = stride_137381 + j_138099;
                            int64_t slice_138133 = start_137453 + slice_138132;
                            float tmp_138134 = ((float *) mem_param_138846.mem)[slice_138133];
                            int64_t tmp_138135 = ((int64_t *) mem_param_138849.mem)[slice_138133];
                            
                            loopres_138117 = i_138096;
                            loopres_138118 = tmp_138134;
                            loopres_138119 = tmp_138135;
                        }
                        ((float *) mem_138927.mem)[k_138095] = loopres_138118;
                        ((int64_t *) mem_138929.mem)[k_138095] = loopres_138119;
                        
                        int64_t i_tmp_139392 = loopres_138117;
                        
                        i_138096 = i_tmp_139392;
                    }
                    data_138092 = i_138096;
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138927, "mem_138927") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138929, "mem_138929") != 0)
                        return 1;
                } else {
                    if (mem_138865_cached_sizze_139536 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138865, &mem_138865_cached_sizze_139536, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138867_cached_sizze_139537 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138867, &mem_138867_cached_sizze_139537, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138314 = 0; i_138314 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402; i_138314++) {
                        int64_t split_count_arg3_137533 = mul64(merge_block_sizze_137258, i_138314);
                        int64_t defunc_0_split_count_res_137534;
                        int64_t defunc_0_split_count_res_137535;
                        int64_t defunc_0_split_count_res_137536;
                        int64_t defunc_0_split_count_res_137537;
                        int64_t defunc_0_split_count_res_137538;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_137534, &defunc_0_split_count_res_137535, &defunc_0_split_count_res_137536, &defunc_0_split_count_res_137537, &defunc_0_split_count_res_137538, (int64_t) 0, stride_137381, (int64_t) 0, j_m_i_137403, split_count_arg3_137533) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_137539 = slt64((int64_t) 0, defunc_0_split_count_res_137538);
                        bool defunc_0_split_count_res_137540;
                        int64_t defunc_0_split_count_res_137541;
                        int64_t defunc_0_split_count_res_137542;
                        int64_t defunc_0_split_count_res_137543;
                        int64_t defunc_0_split_count_res_137544;
                        int64_t defunc_0_split_count_res_137545;
                        bool loop_while_137546;
                        int64_t ss_137547;
                        int64_t ss_137548;
                        int64_t tt_137549;
                        int64_t tt_137550;
                        int64_t count_137551;
                        
                        loop_while_137546 = loop_cond_137539;
                        ss_137547 = defunc_0_split_count_res_137534;
                        ss_137548 = defunc_0_split_count_res_137535;
                        tt_137549 = defunc_0_split_count_res_137536;
                        tt_137550 = defunc_0_split_count_res_137537;
                        count_137551 = defunc_0_split_count_res_137538;
                        while (loop_while_137546) {
                            int64_t zlze_lhs_137552 = sub64(ss_137548, ss_137547);
                            bool cond_137553 = sle64(zlze_lhs_137552, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_137554;
                            int64_t defunc_0_lifted_step_res_137555;
                            int64_t defunc_0_lifted_step_res_137556;
                            int64_t defunc_0_lifted_step_res_137557;
                            
                            if (cond_137553) {
                                int64_t tmp_138138 = add64(tt_137549, count_137551);
                                
                                defunc_0_lifted_step_res_137554 = ss_137547;
                                defunc_0_lifted_step_res_137555 = tmp_138138;
                                defunc_0_lifted_step_res_137556 = tt_137550;
                                defunc_0_lifted_step_res_137557 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_137559 = sub64(tt_137550, tt_137549);
                                bool cond_137560 = sle64(zlze_lhs_137559, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_137561;
                                int64_t defunc_0_lifted_step_res_f_res_137562;
                                int64_t defunc_0_lifted_step_res_f_res_137563;
                                int64_t defunc_0_lifted_step_res_f_res_137564;
                                
                                if (cond_137560) {
                                    int64_t tmp_138139 = add64(ss_137547, count_137551);
                                    
                                    defunc_0_lifted_step_res_f_res_137561 = tmp_138139;
                                    defunc_0_lifted_step_res_f_res_137562 = tt_137549;
                                    defunc_0_lifted_step_res_f_res_137563 = tt_137550;
                                    defunc_0_lifted_step_res_f_res_137564 = (int64_t) 0;
                                } else {
                                    bool cond_137566 = count_137551 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137567;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137568;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137569;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137570;
                                    
                                    if (cond_137566) {
                                        bool x_138141 = sle64((int64_t) 0, ss_137547);
                                        bool y_138142 = slt64(ss_137547, stride_137381);
                                        bool bounds_check_138143 = x_138141 && y_138142;
                                        bool index_certs_138144;
                                        
                                        if (!bounds_check_138143) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_137547, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:297:82-85\n   #13 ftsort.fut:291:1-297:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_138147 = sle64((int64_t) 0, tt_137549);
                                        bool y_138148 = slt64(tt_137549, j_m_i_137403);
                                        bool bounds_check_138149 = x_138147 && y_138148;
                                        bool index_certs_138150;
                                        
                                        if (!bounds_check_138149) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_137549, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:297:82-85\n   #13 ftsort.fut:291:1-297:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_138145 = start_137453 + ss_137547;
                                        float leq_arg1_138146 = ((float *) mem_param_138846.mem)[slice_138145];
                                        int64_t slice_138151 = stride_137381 + tt_137549;
                                        int64_t slice_138152 = start_137453 + slice_138151;
                                        float leq_arg0_138153 = ((float *) mem_param_138846.mem)[slice_138152];
                                        bool defunc_0_leq_res_138154 = leq_arg0_138153 <= leq_arg1_138146;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        
                                        if (defunc_0_leq_res_138154) {
                                            int64_t tmp_138157 = add64((int64_t) 1, tt_137549);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = ss_137547;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tmp_138157;
                                        } else {
                                            int64_t tmp_138158 = add64((int64_t) 1, ss_137547);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = tmp_138158;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tt_137549;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = tt_137550;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = (int64_t) 0;
                                    } else {
                                        int64_t m_137589 = sdiv64(count_137551, (int64_t) 2);
                                        int64_t n_137590 = sub64(count_137551, m_137589);
                                        bool cond_137591 = n_137590 == (int64_t) 0;
                                        int64_t zgze_lhs_137592 = add64(ss_137547, m_137589);
                                        bool cond_f_res_137593 = sle64(ss_137548, zgze_lhs_137592);
                                        bool x_137594 = !cond_137591;
                                        bool y_137595 = cond_f_res_137593 && x_137594;
                                        bool cond_137596 = cond_137591 || y_137595;
                                        bool leq_y_x_137597;
                                        
                                        if (cond_137596) {
                                            leq_y_x_137597 = 1;
                                        } else {
                                            bool x_137598 = sle64((int64_t) 0, zgze_lhs_137592);
                                            bool y_137599 = slt64(zgze_lhs_137592, stride_137381);
                                            bool bounds_check_137600 = x_137598 && y_137599;
                                            bool index_certs_137601;
                                            
                                            if (!bounds_check_137600) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_137592, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:297:82-85\n   #13 ftsort.fut:291:1-297:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_137604 = add64(tt_137549, n_137590);
                                            int64_t leq_arg0_137605 = sub64(zm_lhs_137604, (int64_t) 1);
                                            bool x_137606 = sle64((int64_t) 0, leq_arg0_137605);
                                            bool y_137607 = slt64(leq_arg0_137605, j_m_i_137403);
                                            bool bounds_check_137608 = x_137606 && y_137607;
                                            bool index_certs_137609;
                                            
                                            if (!bounds_check_137608) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_137605, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:297:82-85\n   #13 ftsort.fut:291:1-297:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137602 = start_137453 + zgze_lhs_137592;
                                            float leq_arg1_137603 = ((float *) mem_param_138846.mem)[slice_137602];
                                            int64_t slice_137610 = stride_137381 + leq_arg0_137605;
                                            int64_t slice_137611 = start_137453 + slice_137610;
                                            float leq_arg0_137612 = ((float *) mem_param_138846.mem)[slice_137611];
                                            bool defunc_0_leq_res_137613 = leq_arg0_137612 <= leq_arg1_137603;
                                            
                                            leq_y_x_137597 = defunc_0_leq_res_137613;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                        
                                        if (leq_y_x_137597) {
                                            int64_t tmp_138159 = add64(tt_137549, n_137590);
                                            int64_t tmp_138160 = sub64(count_137551, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tmp_138159;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tt_137550;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = tmp_138160;
                                        } else {
                                            int64_t tmp_137619 = add64(tt_137549, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tt_137549;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tmp_137619;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = count_137551;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = ss_137547;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                    }
                                    defunc_0_lifted_step_res_f_res_137561 = defunc_0_lifted_step_res_f_res_f_res_137567;
                                    defunc_0_lifted_step_res_f_res_137562 = defunc_0_lifted_step_res_f_res_f_res_137568;
                                    defunc_0_lifted_step_res_f_res_137563 = defunc_0_lifted_step_res_f_res_f_res_137569;
                                    defunc_0_lifted_step_res_f_res_137564 = defunc_0_lifted_step_res_f_res_f_res_137570;
                                }
                                defunc_0_lifted_step_res_137554 = defunc_0_lifted_step_res_f_res_137561;
                                defunc_0_lifted_step_res_137555 = defunc_0_lifted_step_res_f_res_137562;
                                defunc_0_lifted_step_res_137556 = defunc_0_lifted_step_res_f_res_137563;
                                defunc_0_lifted_step_res_137557 = defunc_0_lifted_step_res_f_res_137564;
                            }
                            
                            int64_t loopres_137620;
                            int64_t loopres_137621;
                            int64_t loopres_137622;
                            int64_t loopres_137623;
                            int64_t loopres_137624;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_137620, &loopres_137621, &loopres_137622, &loopres_137623, &loopres_137624, defunc_0_lifted_step_res_137554, ss_137548, defunc_0_lifted_step_res_137555, defunc_0_lifted_step_res_137556, defunc_0_lifted_step_res_137557) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_137625 = slt64((int64_t) 0, loopres_137624);
                            bool loop_while_tmp_139397 = loop_cond_137625;
                            int64_t ss_tmp_139398 = loopres_137620;
                            int64_t ss_tmp_139399 = loopres_137621;
                            int64_t tt_tmp_139400 = loopres_137622;
                            int64_t tt_tmp_139401 = loopres_137623;
                            int64_t count_tmp_139402 = loopres_137624;
                            
                            loop_while_137546 = loop_while_tmp_139397;
                            ss_137547 = ss_tmp_139398;
                            ss_137548 = ss_tmp_139399;
                            tt_137549 = tt_tmp_139400;
                            tt_137550 = tt_tmp_139401;
                            count_137551 = count_tmp_139402;
                        }
                        defunc_0_split_count_res_137540 = loop_while_137546;
                        defunc_0_split_count_res_137541 = ss_137547;
                        defunc_0_split_count_res_137542 = ss_137548;
                        defunc_0_split_count_res_137543 = tt_137549;
                        defunc_0_split_count_res_137544 = tt_137550;
                        defunc_0_split_count_res_137545 = count_137551;
                        ((int64_t *) mem_138865)[i_138314] = defunc_0_split_count_res_137541;
                        ((int64_t *) mem_138867)[i_138314] = defunc_0_split_count_res_137543;
                    }
                    if (mem_138882_cached_sizze_139538 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138882, &mem_138882_cached_sizze_139538, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138885_cached_sizze_139539 < bytes_138884) {
                        err = lexical_realloc(ctx, &mem_138885, &mem_138885_cached_sizze_139539, bytes_138884);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138321 = 0; i_138321 < num_blocks_137401; i_138321++) {
                        bool y_137631 = slt64(i_138321, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool index_certs_137633;
                        
                        if (!y_137631) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138321, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137634 = ((int64_t *) mem_138865)[i_138321];
                        int64_t defunc_0_f_res_137635 = ((int64_t *) mem_138867)[i_138321];
                        int64_t tmp_137636 = add64((int64_t) 1, i_138321);
                        bool x_137637 = sle64((int64_t) 0, tmp_137636);
                        bool y_137638 = slt64(tmp_137636, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool bounds_check_137639 = x_137637 && y_137638;
                        bool index_certs_137640;
                        
                        if (!bounds_check_137639) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137636, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137641 = ((int64_t *) mem_138865)[tmp_137636];
                        int64_t defunc_0_f_res_137642 = ((int64_t *) mem_138867)[tmp_137636];
                        int64_t merge_sequential_arg2_137643 = add64(stride_137381, defunc_0_f_res_137635);
                        int64_t merge_sequential_arg2_137644 = add64(stride_137381, defunc_0_f_res_137642);
                        int64_t j_m_i_137645 = sub64(merge_sequential_arg2_137644, merge_sequential_arg2_137643);
                        bool empty_slice_137646 = j_m_i_137645 == (int64_t) 0;
                        int64_t m_137647 = sub64(j_m_i_137645, (int64_t) 1);
                        int64_t i_p_m_t_s_137648 = add64(merge_sequential_arg2_137643, m_137647);
                        bool zzero_leq_i_p_m_t_s_137649 = sle64((int64_t) 0, i_p_m_t_s_137648);
                        bool i_p_m_t_s_leq_w_137650 = slt64(i_p_m_t_s_137648, next_stride_137382);
                        bool zzero_lte_i_137651 = sle64((int64_t) 0, merge_sequential_arg2_137643);
                        bool i_lte_j_137652 = sle64(merge_sequential_arg2_137643, merge_sequential_arg2_137644);
                        bool y_137653 = i_p_m_t_s_leq_w_137650 && zzero_lte_i_137651;
                        bool y_137654 = zzero_leq_i_p_m_t_s_137649 && y_137653;
                        bool forwards_ok_137655 = i_lte_j_137652 && y_137654;
                        bool ok_or_empty_137656 = empty_slice_137646 || forwards_ok_137655;
                        bool index_certs_137657;
                        
                        if (!ok_or_empty_137656) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_137643, ":", (long long) merge_sequential_arg2_137644, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_137658 = sub64(defunc_0_f_res_137641, defunc_0_f_res_137634);
                        bool empty_slice_137659 = j_m_i_137658 == (int64_t) 0;
                        int64_t m_137660 = sub64(j_m_i_137658, (int64_t) 1);
                        int64_t i_p_m_t_s_137661 = add64(defunc_0_f_res_137634, m_137660);
                        bool zzero_leq_i_p_m_t_s_137662 = sle64((int64_t) 0, i_p_m_t_s_137661);
                        bool i_p_m_t_s_leq_w_137663 = slt64(i_p_m_t_s_137661, next_stride_137382);
                        bool zzero_lte_i_137664 = sle64((int64_t) 0, defunc_0_f_res_137634);
                        bool i_lte_j_137665 = sle64(defunc_0_f_res_137634, defunc_0_f_res_137641);
                        bool y_137666 = i_p_m_t_s_leq_w_137663 && zzero_lte_i_137664;
                        bool y_137667 = zzero_leq_i_p_m_t_s_137662 && y_137666;
                        bool forwards_ok_137668 = i_lte_j_137665 && y_137667;
                        bool ok_or_empty_137669 = empty_slice_137659 || forwards_ok_137668;
                        bool index_certs_137670;
                        
                        if (!ok_or_empty_137669) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_137634, ":", (long long) defunc_0_f_res_137641, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:297:82-85\n   #10 ftsort.fut:291:1-297:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_137671 = slt64((int64_t) 0, j_m_i_137658);
                        float dummy_137672;
                        int64_t dummy_137673;
                        
                        if (cond_137671) {
                            bool index_certs_138161;
                            
                            if (!cond_137671) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138162 = start_137453 + defunc_0_f_res_137634;
                            float head_res_138163 = ((float *) mem_param_138846.mem)[slice_138162];
                            int64_t head_res_138164 = ((int64_t *) mem_param_138849.mem)[slice_138162];
                            
                            dummy_137672 = head_res_138163;
                            dummy_137673 = head_res_138164;
                        } else {
                            bool y_137678 = slt64((int64_t) 0, j_m_i_137645);
                            bool index_certs_137679;
                            
                            if (!y_137678) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:297:82-85\n   #12 ftsort.fut:291:1-297:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137680 = start_137453 + merge_sequential_arg2_137643;
                            float head_res_137681 = ((float *) mem_param_138846.mem)[slice_137680];
                            int64_t head_res_137682 = ((int64_t *) mem_param_138849.mem)[slice_137680];
                            
                            dummy_137672 = head_res_137681;
                            dummy_137673 = head_res_137682;
                        }
                        for (int64_t nest_i_139405 = 0; nest_i_139405 < merge_block_sizze_137258; nest_i_139405++) {
                            ((float *) mem_138882)[i_138321 * merge_block_sizze_137258 + nest_i_139405] = dummy_137672;
                        }
                        for (int64_t nest_i_139406 = 0; nest_i_139406 < merge_block_sizze_137258; nest_i_139406++) {
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + nest_i_139406] = dummy_137673;
                        }
                        
                        int64_t data_137685;
                        int64_t i_137689 = (int64_t) 0;
                        
                        for (int64_t k_137688 = 0; k_137688 < merge_block_sizze_137258; k_137688++) {
                            int64_t j_137692 = sub64(k_137688, i_137689);
                            bool cond_137693 = j_137692 == j_m_i_137645;
                            bool cond_137694;
                            
                            if (cond_137693) {
                                cond_137694 = 1;
                            } else {
                                bool cond_137695 = slt64(i_137689, j_m_i_137658);
                                bool cond_f_res_137696;
                                
                                if (cond_137695) {
                                    bool x_138165 = sle64((int64_t) 0, j_137692);
                                    bool y_138166 = slt64(j_137692, j_m_i_137645);
                                    bool bounds_check_138167 = x_138165 && y_138166;
                                    bool index_certs_138168;
                                    
                                    if (!bounds_check_138167) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_138172 = sle64((int64_t) 0, i_137689);
                                    bool bounds_check_138173 = cond_137695 && x_138172;
                                    bool index_certs_138174;
                                    
                                    if (!bounds_check_138173) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_138169 = merge_sequential_arg2_137643 + j_137692;
                                    int64_t slice_138170 = start_137453 + slice_138169;
                                    float leq_arg1_138171 = ((float *) mem_param_138846.mem)[slice_138170];
                                    int64_t slice_138175 = defunc_0_f_res_137634 + i_137689;
                                    int64_t slice_138176 = start_137453 + slice_138175;
                                    float leq_arg0_138177 = ((float *) mem_param_138846.mem)[slice_138176];
                                    bool defunc_0_leq_res_138178 = leq_arg0_138177 <= leq_arg1_138171;
                                    
                                    cond_f_res_137696 = defunc_0_leq_res_138178;
                                } else {
                                    cond_f_res_137696 = 0;
                                }
                                cond_137694 = cond_f_res_137696;
                            }
                            
                            int64_t loopres_137711;
                            float loopres_137712;
                            int64_t loopres_137713;
                            
                            if (cond_137694) {
                                bool x_138180 = sle64((int64_t) 0, i_137689);
                                bool y_138181 = slt64(i_137689, j_m_i_137658);
                                bool bounds_check_138182 = x_138180 && y_138181;
                                bool index_certs_138183;
                                
                                if (!bounds_check_138182) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_138179 = add64((int64_t) 1, i_137689);
                                int64_t slice_138184 = defunc_0_f_res_137634 + i_137689;
                                int64_t slice_138185 = start_137453 + slice_138184;
                                float tmp_138186 = ((float *) mem_param_138846.mem)[slice_138185];
                                int64_t tmp_138187 = ((int64_t *) mem_param_138849.mem)[slice_138185];
                                
                                loopres_137711 = tmp_138179;
                                loopres_137712 = tmp_138186;
                                loopres_137713 = tmp_138187;
                            } else {
                                bool x_137723 = sle64((int64_t) 0, j_137692);
                                bool y_137724 = slt64(j_137692, j_m_i_137645);
                                bool bounds_check_137725 = x_137723 && y_137724;
                                bool index_certs_137726;
                                
                                if (!bounds_check_137725) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:297:82-85\n   #11 ftsort.fut:291:1-297:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137727 = merge_sequential_arg2_137643 + j_137692;
                                int64_t slice_137728 = start_137453 + slice_137727;
                                float tmp_137729 = ((float *) mem_param_138846.mem)[slice_137728];
                                int64_t tmp_137730 = ((int64_t *) mem_param_138849.mem)[slice_137728];
                                
                                loopres_137711 = i_137689;
                                loopres_137712 = tmp_137729;
                                loopres_137713 = tmp_137730;
                            }
                            ((float *) mem_138882)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137712;
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137713;
                            
                            int64_t i_tmp_139407 = loopres_137711;
                            
                            i_137689 = i_tmp_139407;
                        }
                        data_137685 = i_137689;
                    }
                    if (memblock_alloc(ctx, &mem_138920, bytes_138881, "mem_138920")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_138920.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint32_t *) mem_138882, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_alloc(ctx, &mem_138924, bytes_138884, "mem_138924")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138924.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138885, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138920, "mem_138920") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138924, "mem_138924") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_138852, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138947.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138855, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138944.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
                    return 1;
            }
            
            int64_t flat_dim_137737 = next_stride_137382 * num_merges_137386;
            
            if (memblock_alloc(ctx, &mem_138958, bytes_138851, "mem_138958")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_138958.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint32_t *) mem_138852, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            if (memblock_alloc(ctx, &mem_138962, bytes_138854, "mem_138962")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138962.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138855, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            
            bool loop_cond_137740 = slt64(next_stride_137382, flat_dim_137255);
            
            if (memblock_set(ctx, &mem_param_tmp_139381, &mem_138958, "mem_138958") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139382, &mem_138962, "mem_138962") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139383 = flat_dim_137737;
            bool loop_while_tmp_139384 = loop_cond_137740;
            int64_t stride_tmp_139387 = next_stride_137382;
            
            if (memblock_set(ctx, &mem_param_138846, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138849, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
                return 1;
            loop_dz2084Uz2082U_137377 = loop_dz2084Uz2082U_tmp_139383;
            loop_while_137378 = loop_while_tmp_139384;
            stride_137381 = stride_tmp_139387;
        }
        if (memblock_set(ctx, &ext_mem_138969, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138968, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        data_137372 = loop_dz2084Uz2082U_137377;
        data_137373 = loop_while_137378;
        data_137376 = stride_137381;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        
        bool empty_slice_137741 = dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_137742 = sle64((int64_t) 0, zs_lhs_137239);
        bool i_p_m_t_s_leq_w_137743 = slt64(zs_lhs_137239, data_137372);
        bool y_137744 = zzero_leq_i_p_m_t_s_137742 && i_p_m_t_s_leq_w_137743;
        bool ok_or_empty_137745 = empty_slice_137741 || y_137744;
        bool index_certs_137746;
        
        if (!ok_or_empty_137745) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] out of bounds for array of shape [", (long long) data_137372, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:297:82-85\n   #6  ftsort.fut:291:1-297:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138972, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
        return 1;
    for (int64_t i_138337 = 0; i_138337 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138337++) {
        int64_t eta_p_137751 = ((int64_t *) ext_mem_138972.mem)[i_138337];
        bool x_137752 = sle64((int64_t) 0, eta_p_137751);
        bool y_137753 = slt64(eta_p_137751, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
        bool bounds_check_137754 = x_137752 && y_137753;
        bool index_certs_137755;
        
        if (!bounds_check_137754) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137751, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:297:82-85\n   #5  ftsort.fut:291:1-297:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_concat_cmp_137756 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, eta_p_137751);
        int64_t index_concat_branch_137757 = btoi_bool_i64(index_concat_cmp_137756);
        int64_t index_concat_branch_137758;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138198 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t index_primexp_138199 = add64(defunc_0_merge_pipeline_res_136397, index_concat_i_138198);
            
            index_concat_branch_137758 = index_primexp_138199;
        } else {
            int64_t index_primexp_137761 = add64(defunc_0_merge_pipeline_res_136396, eta_p_137751);
            
            index_concat_branch_137758 = index_primexp_137761;
        }
        
        float index_concat_branch_137762;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138200 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t slice_138201 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138200;
            float index_concat_138202 = ((float *) b_list_mem_138404.mem)[slice_138201];
            
            index_concat_branch_137762 = index_concat_138202;
        } else {
            int64_t slice_137766 = defunc_0_merge_pipeline_res_136396 + eta_p_137751;
            float index_concat_137767 = ((float *) a_list_mem_138403.mem)[slice_137766];
            
            index_concat_branch_137762 = index_concat_137767;
        }
        ((int64_t *) mem_138406.mem)[arg_137200 + i_138337] = index_concat_branch_137757;
        ((int64_t *) mem_138408.mem)[arg_137200 + i_138337] = index_concat_branch_137758;
        ((float *) mem_138410.mem)[arg_137200 + i_138337] = index_concat_branch_137762;
    }
    if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138410, "mem_138410") != 0)
        return 1;
    prim_out_139284 = dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    if (memblock_set(ctx, &*mem_out_p_139509, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139510, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139511, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    *out_prim_out_139512 = prim_out_139284;
    
  cleanup:
    {
        free(mem_138421);
        free(mem_138423);
        free(mem_138438);
        free(mem_138441);
        free(mem_138444);
        free(mem_138447);
        free(mem_138474);
        free(mem_138477);
        free(mem_138487);
        free(mem_138489);
        free(mem_138556);
        free(mem_138559);
        free(mem_138569);
        free(mem_138571);
        free(mem_138586);
        free(mem_138589);
        free(mem_138728);
        free(mem_138770);
        free(mem_138773);
        free(mem_138783);
        free(mem_138785);
        free(mem_138852);
        free(mem_138855);
        free(mem_138865);
        free(mem_138867);
        free(mem_138882);
        free(mem_138885);
        if (memblock_unref(ctx, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138962, "mem_138962") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138958, "mem_138958") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138924, "mem_138924") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138920, "mem_138920") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138929, "mem_138929") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138927, "mem_138927") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138969, "ext_mem_138969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138666, "mem_138666") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138662, "mem_138662") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138628, "mem_138628") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138633, "mem_138633") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138631, "mem_138631") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138553, "mem_param_138553") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138550, "mem_param_138550") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138672, "ext_mem_138672") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138673, "ext_mem_138673") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_int(struct futhark_context *ctx, struct memblock *mem_out_p_139540, struct memblock *mem_out_p_139541, struct memblock *mem_out_p_139542, int64_t *out_prim_out_139543, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_105156, int64_t nb_105157, int64_t window_sizze_105158, int64_t threads_105159)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138421_cached_sizze_139544 = 0;
    unsigned char *mem_138421 = NULL;
    int64_t mem_138423_cached_sizze_139545 = 0;
    unsigned char *mem_138423 = NULL;
    int64_t mem_138438_cached_sizze_139546 = 0;
    unsigned char *mem_138438 = NULL;
    int64_t mem_138441_cached_sizze_139547 = 0;
    unsigned char *mem_138441 = NULL;
    int64_t mem_138444_cached_sizze_139548 = 0;
    unsigned char *mem_138444 = NULL;
    int64_t mem_138447_cached_sizze_139549 = 0;
    unsigned char *mem_138447 = NULL;
    int64_t mem_138474_cached_sizze_139550 = 0;
    unsigned char *mem_138474 = NULL;
    int64_t mem_138477_cached_sizze_139551 = 0;
    unsigned char *mem_138477 = NULL;
    int64_t mem_138487_cached_sizze_139552 = 0;
    unsigned char *mem_138487 = NULL;
    int64_t mem_138489_cached_sizze_139553 = 0;
    unsigned char *mem_138489 = NULL;
    int64_t mem_138556_cached_sizze_139554 = 0;
    unsigned char *mem_138556 = NULL;
    int64_t mem_138559_cached_sizze_139555 = 0;
    unsigned char *mem_138559 = NULL;
    int64_t mem_138569_cached_sizze_139556 = 0;
    unsigned char *mem_138569 = NULL;
    int64_t mem_138571_cached_sizze_139557 = 0;
    unsigned char *mem_138571 = NULL;
    int64_t mem_138586_cached_sizze_139558 = 0;
    unsigned char *mem_138586 = NULL;
    int64_t mem_138589_cached_sizze_139559 = 0;
    unsigned char *mem_138589 = NULL;
    int64_t mem_138728_cached_sizze_139560 = 0;
    unsigned char *mem_138728 = NULL;
    int64_t mem_138770_cached_sizze_139561 = 0;
    unsigned char *mem_138770 = NULL;
    int64_t mem_138773_cached_sizze_139562 = 0;
    unsigned char *mem_138773 = NULL;
    int64_t mem_138783_cached_sizze_139563 = 0;
    unsigned char *mem_138783 = NULL;
    int64_t mem_138785_cached_sizze_139564 = 0;
    unsigned char *mem_138785 = NULL;
    int64_t mem_138852_cached_sizze_139565 = 0;
    unsigned char *mem_138852 = NULL;
    int64_t mem_138855_cached_sizze_139566 = 0;
    unsigned char *mem_138855 = NULL;
    int64_t mem_138865_cached_sizze_139567 = 0;
    unsigned char *mem_138865 = NULL;
    int64_t mem_138867_cached_sizze_139568 = 0;
    unsigned char *mem_138867 = NULL;
    int64_t mem_138882_cached_sizze_139569 = 0;
    unsigned char *mem_138882 = NULL;
    int64_t mem_138885_cached_sizze_139570 = 0;
    unsigned char *mem_138885 = NULL;
    struct memblock mem_param_tmp_139382;
    
    mem_param_tmp_139382.references = NULL;
    
    struct memblock mem_param_tmp_139381;
    
    mem_param_tmp_139381.references = NULL;
    
    struct memblock mem_138962;
    
    mem_138962.references = NULL;
    
    struct memblock mem_138958;
    
    mem_138958.references = NULL;
    
    struct memblock mem_138924;
    
    mem_138924.references = NULL;
    
    struct memblock mem_138920;
    
    mem_138920.references = NULL;
    
    struct memblock mem_138929;
    
    mem_138929.references = NULL;
    
    struct memblock mem_138927;
    
    mem_138927.references = NULL;
    
    struct memblock ext_mem_138944;
    
    ext_mem_138944.references = NULL;
    
    struct memblock ext_mem_138947;
    
    ext_mem_138947.references = NULL;
    
    struct memblock mem_param_138849;
    
    mem_param_138849.references = NULL;
    
    struct memblock mem_param_138846;
    
    mem_param_138846.references = NULL;
    
    struct memblock ext_mem_138968;
    
    ext_mem_138968.references = NULL;
    
    struct memblock ext_mem_138969;
    
    ext_mem_138969.references = NULL;
    
    struct memblock mem_138842;
    
    mem_138842.references = NULL;
    
    struct memblock mem_138838;
    
    mem_138838.references = NULL;
    
    struct memblock ext_mem_138972;
    
    ext_mem_138972.references = NULL;
    
    struct memblock mem_138767;
    
    mem_138767.references = NULL;
    
    struct memblock mem_param_tmp_139326;
    
    mem_param_tmp_139326.references = NULL;
    
    struct memblock mem_param_tmp_139325;
    
    mem_param_tmp_139325.references = NULL;
    
    struct memblock mem_138666;
    
    mem_138666.references = NULL;
    
    struct memblock mem_138662;
    
    mem_138662.references = NULL;
    
    struct memblock mem_138628;
    
    mem_138628.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock mem_138633;
    
    mem_138633.references = NULL;
    
    struct memblock mem_138631;
    
    mem_138631.references = NULL;
    
    struct memblock ext_mem_138648;
    
    ext_mem_138648.references = NULL;
    
    struct memblock ext_mem_138651;
    
    ext_mem_138651.references = NULL;
    
    struct memblock mem_param_138553;
    
    mem_param_138553.references = NULL;
    
    struct memblock mem_param_138550;
    
    mem_param_138550.references = NULL;
    
    struct memblock ext_mem_138672;
    
    ext_mem_138672.references = NULL;
    
    struct memblock ext_mem_138673;
    
    ext_mem_138673.references = NULL;
    
    struct memblock mem_138546;
    
    mem_138546.references = NULL;
    
    struct memblock mem_138542;
    
    mem_138542.references = NULL;
    
    struct memblock ext_mem_138676;
    
    ext_mem_138676.references = NULL;
    
    struct memblock mem_138471;
    
    mem_138471.references = NULL;
    
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t prim_out_139284;
    int64_t dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368 = add64(na_105156, nb_105157);
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139285 = 0; nest_i_139285 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139285++) {
        ((int64_t *) mem_138406.mem)[nest_i_139285] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139286 = 0; nest_i_139286 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139286++) {
        ((int64_t *) mem_138408.mem)[nest_i_139286] = (int64_t) -1;
    }
    
    int64_t bytes_138409 = (int64_t) 4 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138410, bytes_138409, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139287 = 0; nest_i_139287 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139287++) {
        ((int32_t *) mem_138410.mem)[nest_i_139287] = 0;
    }
    
    int64_t zl_rhs_136372 = sub64(na_105156, window_sizze_105158);
    bool cond_136373 = slt64((int64_t) 0, zl_rhs_136372);
    int64_t zl_rhs_136374 = sub64(nb_105157, window_sizze_105158);
    bool loop_cond_f_res_136375 = slt64((int64_t) 0, zl_rhs_136374);
    bool x_136376 = !cond_136373;
    bool y_136377 = loop_cond_f_res_136375 && x_136376;
    bool loop_cond_136378 = cond_136373 || y_136377;
    bool zzero_136379 = threads_105159 == (int64_t) 0;
    bool nonzzero_136380 = !zzero_136379;
    bool loop_not_taken_136381 = !loop_cond_136378;
    bool protect_assert_disj_136382 = nonzzero_136380 || loop_not_taken_136381;
    bool nonzzero_cert_136383;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:184:30-38\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool nonzzero_cert_136385;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:117:30-38\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:281:82-85\n   #4  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_136386 = sub64(threads_105159, (int64_t) 1);
    bool x_136387 = sle64((int64_t) 0, tmp_136386);
    bool y_136388 = slt64(tmp_136386, threads_105159);
    bool bounds_check_136389 = x_136387 && y_136388;
    bool protect_assert_disj_136390 = loop_not_taken_136381 || bounds_check_136389;
    bool index_certs_136391;
    
    if (!protect_assert_disj_136390) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136386, "] out of bounds for array of shape [", (long long) threads_105159, "].", "-> #0  ftsort.fut:207:7-33\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138420 = (int64_t) 8 * threads_105159;
    int64_t binop_x_138445 = (int64_t) 4 * threads_105159;
    
    if (mem_138421_cached_sizze_139544 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138421, &mem_138421_cached_sizze_139544, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138423_cached_sizze_139545 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138423, &mem_138423_cached_sizze_139545, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    bool defunc_0_merge_pipeline_res_136392;
    int64_t defunc_0_merge_pipeline_res_136396;
    int64_t defunc_0_merge_pipeline_res_136397;
    bool loop_while_136398;
    int64_t p_136402;
    int64_t p_136403;
    
    loop_while_136398 = loop_cond_136378;
    p_136402 = (int64_t) 0;
    p_136403 = (int64_t) 0;
    while (loop_while_136398) {
        int64_t min_arg1_136404 = sub64(na_105156, p_136402);
        int64_t min_res_136405 = smin64(window_sizze_105158, min_arg1_136404);
        int64_t min_arg1_136406 = sub64(nb_105157, p_136403);
        int64_t min_res_136407 = smin64(window_sizze_105158, min_arg1_136406);
        int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408 = add64(min_res_136405, min_res_136407);
        int64_t lb_merge_136409 = add64(p_136402, p_136403);
        int64_t zp_lhs_136410 = add64(min_res_136405, lb_merge_136409);
        int64_t ub_merge_136411 = add64(min_res_136407, zp_lhs_136410);
        int64_t as_136412 = add64(p_136402, min_res_136405);
        bool empty_slice_136413 = min_res_136405 == (int64_t) 0;
        int64_t m_136414 = sub64(min_res_136405, (int64_t) 1);
        int64_t i_p_m_t_s_136415 = add64(p_136402, m_136414);
        bool zzero_leq_i_p_m_t_s_136416 = sle64((int64_t) 0, i_p_m_t_s_136415);
        bool i_p_m_t_s_leq_w_136417 = slt64(i_p_m_t_s_136415, na_105156);
        bool zzero_lte_i_136418 = sle64((int64_t) 0, p_136402);
        bool i_lte_j_136419 = sle64(p_136402, as_136412);
        bool y_136420 = i_p_m_t_s_leq_w_136417 && zzero_lte_i_136418;
        bool y_136421 = zzero_leq_i_p_m_t_s_136416 && y_136420;
        bool forwards_ok_136422 = i_lte_j_136419 && y_136421;
        bool ok_or_empty_136423 = empty_slice_136413 || forwards_ok_136422;
        bool index_certs_136424;
        
        if (!ok_or_empty_136423) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136402, ":", (long long) as_136412, "] out of bounds for array of shape [", (long long) na_105156, "].", "-> #0  ftsort.fut:243:16-46\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bs_136425 = add64(p_136403, min_res_136407);
        bool empty_slice_136426 = min_res_136407 == (int64_t) 0;
        int64_t m_136427 = sub64(min_res_136407, (int64_t) 1);
        int64_t i_p_m_t_s_136428 = add64(p_136403, m_136427);
        bool zzero_leq_i_p_m_t_s_136429 = sle64((int64_t) 0, i_p_m_t_s_136428);
        bool i_p_m_t_s_leq_w_136430 = slt64(i_p_m_t_s_136428, nb_105157);
        bool zzero_lte_i_136431 = sle64((int64_t) 0, p_136403);
        bool i_lte_j_136432 = sle64(p_136403, bs_136425);
        bool y_136433 = i_p_m_t_s_leq_w_136430 && zzero_lte_i_136431;
        bool y_136434 = zzero_leq_i_p_m_t_s_136429 && y_136433;
        bool forwards_ok_136435 = i_lte_j_136432 && y_136434;
        bool ok_or_empty_136436 = empty_slice_136426 || forwards_ok_136435;
        bool index_certs_136437;
        
        if (!ok_or_empty_136436) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136403, ":", (long long) bs_136425, "] out of bounds for array of shape [", (long long) nb_105157, "].", "-> #0  ftsort.fut:244:16-46\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zp_rhs_136438 = sdiv64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, threads_105159);
        int64_t perThread_136439 = add64((int64_t) 1, zp_rhs_136438);
        int64_t bytes_138437 = perThread_136439 * bytes_138420;
        int64_t bytes_138446 = perThread_136439 * binop_x_138445;
        int64_t bytes_138727 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        int64_t j_m_i_137176 = sub64(ub_merge_136411, lb_merge_136409);
        bool empty_slice_137177 = j_m_i_137176 == (int64_t) 0;
        int64_t m_137178 = sub64(j_m_i_137176, (int64_t) 1);
        int64_t i_p_m_t_s_137179 = add64(lb_merge_136409, m_137178);
        bool zzero_leq_i_p_m_t_s_137180 = sle64((int64_t) 0, i_p_m_t_s_137179);
        bool i_p_m_t_s_leq_w_137181 = slt64(i_p_m_t_s_137179, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
        bool zzero_lte_i_137182 = sle64((int64_t) 0, lb_merge_136409);
        bool i_lte_j_137183 = sle64(lb_merge_136409, ub_merge_136411);
        bool y_137184 = i_p_m_t_s_leq_w_137181 && zzero_lte_i_137182;
        bool y_137185 = zzero_leq_i_p_m_t_s_137180 && y_137184;
        bool forwards_ok_137186 = i_lte_j_137183 && y_137185;
        bool ok_or_empty_137187 = empty_slice_137177 || forwards_ok_137186;
        bool index_certs_137188;
        
        if (!ok_or_empty_137187) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lb_merge_136409, ":", (long long) ub_merge_136411, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool dim_match_137189 = j_m_i_137176 == dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        bool empty_or_match_cert_137190;
        
        if (!dim_match_137189) {
            set_error(ctx, msgprintf("Error: %s%s%lld%s%s%s%lld%s%s\n\nBacktrace:\n%s", "Shape ", "[", (long long) j_m_i_137176, "]", " of slice does not match shape ", "[", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, "]", " of value.", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440 = mul64(threads_105159, perThread_136439);
        
        for (int64_t i_138210 = 0; i_138210 < threads_105159; i_138210++) {
            int64_t zs_lhs_136444 = mul64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, i_138210);
            int64_t index_136445 = sdiv64(zs_lhs_136444, threads_105159);
            bool cond_136446 = slt64(min_res_136405, index_136445);
            int64_t atop_136447;
            
            if (cond_136446) {
                atop_136447 = min_res_136405;
            } else {
                atop_136447 = index_136445;
            }
            
            int64_t btop_136448;
            
            if (cond_136446) {
                int64_t btop_t_res_137808 = sub64(index_136445, min_res_136405);
                
                btop_136448 = btop_t_res_137808;
            } else {
                btop_136448 = (int64_t) 0;
            }
            
            bool defunc_0_f_res_136450;
            int64_t defunc_0_f_res_136451;
            int64_t defunc_0_f_res_136452;
            int64_t defunc_0_f_res_136453;
            int64_t defunc_0_f_res_136454;
            int64_t defunc_0_f_res_136455;
            bool loop_while_136456;
            int64_t p_136457;
            int64_t p_136458;
            int64_t p_136459;
            int64_t p_136460;
            int64_t p_136461;
            
            loop_while_136456 = 1;
            p_136457 = btop_136448;
            p_136458 = min_res_136405;
            p_136459 = atop_136447;
            p_136460 = min_res_136407;
            p_136461 = btop_136448;
            while (loop_while_136456) {
                int64_t zs_lhs_136462 = sub64(p_136459, p_136457);
                int64_t offset_136463 = sdiv64(zs_lhs_136462, (int64_t) 2);
                int64_t ai_136464 = sub64(p_136459, offset_136463);
                int64_t bi_136465 = add64(p_136461, offset_136463);
                bool cond_136466 = sle64((int64_t) 0, ai_136464);
                bool cond_t_res_136467 = slt64(ai_136464, min_res_136405);
                bool x_136468 = cond_136466 && cond_t_res_136467;
                int32_t acur_136469;
                
                if (x_136468) {
                    bool index_certs_137809;
                    
                    if (!x_136468) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ai_136464, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:128:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:281:82-85\n   #4  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137810 = p_136402 + ai_136464;
                    int32_t acur_t_res_137811 = ((int32_t *) a_list_mem_138403.mem)[slice_137810];
                    
                    acur_136469 = acur_t_res_137811;
                } else {
                    bool cond_136473 = slt64(ai_136464, (int64_t) 0);
                    int32_t acur_f_res_136474;
                    
                    if (cond_136473) {
                        acur_f_res_136474 = -2147483648;
                    } else {
                        acur_f_res_136474 = 2147483647;
                    }
                    acur_136469 = acur_f_res_136474;
                }
                
                bool cond_136475 = slt64((int64_t) 0, ai_136464);
                int32_t aprev_136476;
                
                if (cond_136475) {
                    int64_t tmp_137812 = sub64(ai_136464, (int64_t) 1);
                    bool x_137813 = sle64((int64_t) 0, tmp_137812);
                    bool y_137814 = slt64(tmp_137812, min_res_136405);
                    bool bounds_check_137815 = x_137813 && y_137814;
                    bool index_certs_137816;
                    
                    if (!bounds_check_137815) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137812, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:129:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:281:82-85\n   #4  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137817 = p_136402 + tmp_137812;
                    int32_t aprev_t_res_137818 = ((int32_t *) a_list_mem_138403.mem)[slice_137817];
                    
                    aprev_136476 = aprev_t_res_137818;
                } else {
                    aprev_136476 = -2147483648;
                }
                
                bool cond_136484 = sle64((int64_t) 0, bi_136465);
                bool cond_t_res_136485 = slt64(bi_136465, min_res_136407);
                bool x_136486 = cond_136484 && cond_t_res_136485;
                int32_t bcur_136487;
                
                if (x_136486) {
                    bool index_certs_137819;
                    
                    if (!x_136486) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bi_136465, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:130:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:281:82-85\n   #4  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137820 = p_136403 + bi_136465;
                    int32_t bcur_t_res_137821 = ((int32_t *) b_list_mem_138404.mem)[slice_137820];
                    
                    bcur_136487 = bcur_t_res_137821;
                } else {
                    bool cond_136491 = slt64(bi_136465, (int64_t) 0);
                    int32_t bcur_f_res_136492;
                    
                    if (cond_136491) {
                        bcur_f_res_136492 = -2147483648;
                    } else {
                        bcur_f_res_136492 = 2147483647;
                    }
                    bcur_136487 = bcur_f_res_136492;
                }
                
                bool cond_136493 = slt64((int64_t) 0, bi_136465);
                int32_t bprev_136494;
                
                if (cond_136493) {
                    int64_t tmp_137822 = sub64(bi_136465, (int64_t) 1);
                    bool x_137823 = sle64((int64_t) 0, tmp_137822);
                    bool y_137824 = slt64(tmp_137822, min_res_136407);
                    bool bounds_check_137825 = x_137823 && y_137824;
                    bool index_certs_137826;
                    
                    if (!bounds_check_137825) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137822, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:131:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:281:82-85\n   #4  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137827 = p_136403 + tmp_137822;
                    int32_t bprev_t_res_137828 = ((int32_t *) b_list_mem_138404.mem)[slice_137827];
                    
                    bprev_136494 = bprev_t_res_137828;
                } else {
                    bprev_136494 = -2147483648;
                }
                
                bool defunc_0_gt_res_136502 = slt32(bprev_136494, acur_136469);
                int64_t loopres_136503;
                int64_t loopres_136504;
                int64_t loopres_136505;
                int64_t loopres_136506;
                int64_t loopres_136507;
                bool loopres_136508;
                
                if (defunc_0_gt_res_136502) {
                    bool defunc_0_leq_res_137829 = sle32(aprev_136476, bcur_136487);
                    int64_t loopres_t_res_137830;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137830 = ai_136464;
                    } else {
                        loopres_t_res_137830 = min_res_136405;
                    }
                    
                    int64_t loopres_t_res_137831;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137831 = bi_136465;
                    } else {
                        loopres_t_res_137831 = min_res_136407;
                    }
                    
                    bool x_137832 = !defunc_0_leq_res_137829;
                    int64_t loopres_t_res_137833;
                    int64_t loopres_t_res_137834;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137833 = p_136459;
                        loopres_t_res_137834 = p_136461;
                    } else {
                        int64_t tmp_137835 = sub64(ai_136464, (int64_t) 1);
                        int64_t tmp_137836 = add64((int64_t) 1, bi_136465);
                        
                        loopres_t_res_137833 = tmp_137835;
                        loopres_t_res_137834 = tmp_137836;
                    }
                    loopres_136503 = p_136457;
                    loopres_136504 = loopres_t_res_137830;
                    loopres_136505 = loopres_t_res_137833;
                    loopres_136506 = loopres_t_res_137831;
                    loopres_136507 = loopres_t_res_137834;
                    loopres_136508 = x_137832;
                } else {
                    int64_t tmp_136517 = add64((int64_t) 1, ai_136464);
                    
                    loopres_136503 = tmp_136517;
                    loopres_136504 = min_res_136405;
                    loopres_136505 = p_136459;
                    loopres_136506 = min_res_136407;
                    loopres_136507 = p_136461;
                    loopres_136508 = 1;
                }
                
                bool loop_while_tmp_139296 = loopres_136508;
                int64_t p_tmp_139297 = loopres_136503;
                int64_t p_tmp_139298 = loopres_136504;
                int64_t p_tmp_139299 = loopres_136505;
                int64_t p_tmp_139300 = loopres_136506;
                int64_t p_tmp_139301 = loopres_136507;
                
                loop_while_136456 = loop_while_tmp_139296;
                p_136457 = p_tmp_139297;
                p_136458 = p_tmp_139298;
                p_136459 = p_tmp_139299;
                p_136460 = p_tmp_139300;
                p_136461 = p_tmp_139301;
            }
            defunc_0_f_res_136450 = loop_while_136456;
            defunc_0_f_res_136451 = p_136457;
            defunc_0_f_res_136452 = p_136458;
            defunc_0_f_res_136453 = p_136459;
            defunc_0_f_res_136454 = p_136460;
            defunc_0_f_res_136455 = p_136461;
            ((int64_t *) mem_138421)[i_138210] = defunc_0_f_res_136452;
            ((int64_t *) mem_138423)[i_138210] = defunc_0_f_res_136454;
        }
        if (mem_138438_cached_sizze_139546 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138438, &mem_138438_cached_sizze_139546, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138441_cached_sizze_139547 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138441, &mem_138441_cached_sizze_139547, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138444_cached_sizze_139548 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138444, &mem_138444_cached_sizze_139548, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138447_cached_sizze_139549 < bytes_138446) {
            err = lexical_realloc(ctx, &mem_138447, &mem_138447_cached_sizze_139549, bytes_138446);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138273 = 0; i_138273 < threads_105159; i_138273++) {
            int64_t defunc_0_f_res_136531 = ((int64_t *) mem_138421)[i_138273];
            int64_t defunc_0_f_res_136532 = ((int64_t *) mem_138423)[i_138273];
            int64_t zl_lhs_136533 = add64((int64_t) 1, i_138273);
            bool cond_136534 = slt64(zl_lhs_136533, threads_105159);
            bool x_136535 = sle64((int64_t) 0, zl_lhs_136533);
            bool bounds_check_136536 = cond_136534 && x_136535;
            bool loop_not_taken_136537 = !cond_136534;
            bool protect_assert_disj_136538 = bounds_check_136536 || loop_not_taken_136537;
            bool index_certs_136539;
            
            if (!protect_assert_disj_136538) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_lhs_136533, "] out of bounds for array of shape [", (long long) threads_105159, "].", "-> #0  ftsort.fut:191:39-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t defunc_0_f_res_t_res_136540;
            
            if (cond_136534) {
                int64_t x_137837 = ((int64_t *) mem_138421)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136540 = x_137837;
            } else {
                defunc_0_f_res_t_res_136540 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_t_res_136542;
            
            if (cond_136534) {
                int64_t x_137838 = ((int64_t *) mem_138423)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136542 = x_137838;
            } else {
                defunc_0_f_res_t_res_136542 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_136544;
            
            if (cond_136534) {
                defunc_0_f_res_136544 = defunc_0_f_res_t_res_136540;
            } else {
                defunc_0_f_res_136544 = defunc_0_f_res_136531;
            }
            
            int64_t defunc_0_f_res_136545;
            
            if (cond_136534) {
                defunc_0_f_res_136545 = defunc_0_f_res_t_res_136542;
            } else {
                defunc_0_f_res_136545 = defunc_0_f_res_136532;
            }
            
            int64_t dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 = sub64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            int64_t dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 = sub64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 = add64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t zm_lhs_136549 = add64(defunc_0_f_res_136544, defunc_0_f_res_136545);
            int64_t zm_rhs_136550 = add64(defunc_0_f_res_136531, defunc_0_f_res_136532);
            int64_t card_136551 = sub64(zm_lhs_136549, zm_rhs_136550);
            bool empty_slice_136552 = dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 == (int64_t) 0;
            int64_t m_136553 = sub64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 1);
            int64_t i_p_m_t_s_136554 = add64(defunc_0_f_res_136531, m_136553);
            bool zzero_leq_i_p_m_t_s_136555 = sle64((int64_t) 0, i_p_m_t_s_136554);
            bool i_p_m_t_s_leq_w_136556 = slt64(i_p_m_t_s_136554, min_res_136405);
            bool zzero_lte_i_136557 = sle64((int64_t) 0, defunc_0_f_res_136531);
            bool i_lte_j_136558 = sle64(defunc_0_f_res_136531, defunc_0_f_res_136544);
            bool y_136559 = i_p_m_t_s_leq_w_136556 && zzero_lte_i_136557;
            bool y_136560 = zzero_leq_i_p_m_t_s_136555 && y_136559;
            bool forwards_ok_136561 = i_lte_j_136558 && y_136560;
            bool ok_or_empty_136562 = empty_slice_136552 || forwards_ok_136561;
            bool index_certs_136563;
            
            if (!ok_or_empty_136562) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136531, ":", (long long) defunc_0_f_res_136544, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:193:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136564 = slt64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            bool valid_136565 = !bounds_invalid_upwards_136564;
            bool range_valid_c_136566;
            
            if (!valid_136565) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136531, "..<", (long long) defunc_0_f_res_136544, " is invalid.", "-> #0  ftsort.fut:193:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_136569 = dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 == (int64_t) 0;
            int64_t m_136570 = sub64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, (int64_t) 1);
            int64_t i_p_m_t_s_136571 = add64(defunc_0_f_res_136532, m_136570);
            bool zzero_leq_i_p_m_t_s_136572 = sle64((int64_t) 0, i_p_m_t_s_136571);
            bool i_p_m_t_s_leq_w_136573 = slt64(i_p_m_t_s_136571, min_res_136407);
            bool zzero_lte_i_136574 = sle64((int64_t) 0, defunc_0_f_res_136532);
            bool i_lte_j_136575 = sle64(defunc_0_f_res_136532, defunc_0_f_res_136545);
            bool y_136576 = i_p_m_t_s_leq_w_136573 && zzero_lte_i_136574;
            bool y_136577 = zzero_leq_i_p_m_t_s_136572 && y_136576;
            bool forwards_ok_136578 = i_lte_j_136575 && y_136577;
            bool ok_or_empty_136579 = empty_slice_136569 || forwards_ok_136578;
            bool index_certs_136580;
            
            if (!ok_or_empty_136579) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136532, ":", (long long) defunc_0_f_res_136545, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:194:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136581 = slt64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            bool valid_136582 = !bounds_invalid_upwards_136581;
            bool range_valid_c_136583;
            
            if (!valid_136582) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136532, "..<", (long long) defunc_0_f_res_136545, " is invalid.", "-> #0  ftsort.fut:194:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_138470 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool cond_136588 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zs_lhs_136589 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zp_rhs_136590 = sdiv_safe64(zs_lhs_136589, (int64_t) 20);
            int64_t min_num_blocks_136591 = add64((int64_t) 1, zp_rhs_136590);
            bool loop_cond_136592 = slt64((int64_t) 1, min_num_blocks_136591);
            bool smallest_pow_2_geq_than_res_136593;
            int64_t smallest_pow_2_geq_than_res_136594;
            bool loop_while_136595;
            int64_t x_136596;
            
            loop_while_136595 = loop_cond_136592;
            x_136596 = (int64_t) 1;
            while (loop_while_136595) {
                int64_t loopres_136597 = mul64((int64_t) 2, x_136596);
                bool loop_cond_136598 = slt64(loopres_136597, min_num_blocks_136591);
                bool loop_while_tmp_139306 = loop_cond_136598;
                int64_t x_tmp_139307 = loopres_136597;
                
                loop_while_136595 = loop_while_tmp_139306;
                x_136596 = x_tmp_139307;
            }
            smallest_pow_2_geq_than_res_136593 = loop_while_136595;
            smallest_pow_2_geq_than_res_136594 = x_136596;
            
            bool zzero_136599 = smallest_pow_2_geq_than_res_136594 == (int64_t) 0;
            bool nonzzero_136600 = !zzero_136599;
            bool protect_assert_disj_136601 = cond_136588 || nonzzero_136600;
            bool nonzzero_cert_136602;
            
            if (!protect_assert_disj_136601) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zp_rhs_136603 = sdiv_safe64(zs_lhs_136589, smallest_pow_2_geq_than_res_136594);
            int64_t block_sizze_136604 = add64((int64_t) 1, zp_rhs_136603);
            bool y_136609 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
            bool protect_assert_disj_139059 = cond_136588 || y_136609;
            bool index_certs_136610;
            
            if (!protect_assert_disj_139059) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136629 = slt64(smallest_pow_2_geq_than_res_136594, (int64_t) 0);
            bool valid_136630 = !bounds_invalid_upwards_136629;
            bool protect_assert_disj_139067 = cond_136588 || valid_136630;
            bool range_valid_c_136631;
            
            if (!protect_assert_disj_139067) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_136594, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:281:82-85\n   #7  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136633 = slt64(block_sizze_136604, (int64_t) 0);
            bool valid_136634 = !bounds_invalid_upwards_136633;
            bool protect_assert_disj_139069 = cond_136588 || valid_136634;
            bool range_valid_c_136635;
            
            if (!protect_assert_disj_139069) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_136604, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool cond_136637 = sle64(block_sizze_136604, (int64_t) 1);
            int64_t tmp_136638 = sub64(block_sizze_136604, (int64_t) 2);
            bool bounds_invalid_upwards_136639 = slt64(tmp_136638, (int64_t) 0);
            bool valid_136641 = !bounds_invalid_upwards_136639;
            bool protect_assert_disj_136642 = cond_136637 || valid_136641;
            bool protect_assert_disj_139071 = cond_136588 || protect_assert_disj_136642;
            bool range_valid_c_136643;
            
            if (!protect_assert_disj_139071) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_136638, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool dim_match_137123 = card_136551 == dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool empty_or_match_cert_137124;
            
            if (!dim_match_137123) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] cannot match shape of type `[", (long long) card_136551, "](i64, i64, i32)`.", "-> #0  ftsort.fut:195:20-196:82\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_137125 = card_136551 == (int64_t) 0;
            int64_t m_137126 = sub64(card_136551, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137127 = sle64((int64_t) 0, m_137126);
            bool i_p_m_t_s_leq_w_137128 = slt64(m_137126, card_136551);
            bool y_137129 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137128;
            bool ok_or_empty_137130 = empty_slice_137125 || y_137129;
            bool index_certs_137131;
            
            if (!ok_or_empty_137130) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) card_136551, "].", "-> #0  ftsort.fut:197:41-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool i_p_m_t_s_leq_w_137132 = slt64(m_137126, perThread_136439);
            bool y_137133 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137132;
            bool ok_or_empty_137134 = empty_slice_137125 || y_137133;
            bool index_certs_137135;
            
            if (!ok_or_empty_137134) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:197:17-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t nest_i_139308 = 0; nest_i_139308 < perThread_136439; nest_i_139308++) {
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + nest_i_139308] = (int64_t) -1;
            }
            for (int64_t nest_i_139309 = 0; nest_i_139309 < perThread_136439; nest_i_139309++) {
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + nest_i_139309] = (int64_t) -1;
            }
            for (int64_t nest_i_139310 = 0; nest_i_139310 < perThread_136439; nest_i_139310++) {
                ((int32_t *) mem_138447)[i_138273 * perThread_136439 + nest_i_139310] = 0;
            }
            
            int64_t slice_136567 = p_136402 + defunc_0_f_res_136531;
            int64_t slice_136584 = p_136403 + defunc_0_f_res_136532;
            
            if (memblock_alloc(ctx, &mem_138471, bytes_138470, "mem_138471")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139311 = 0; i_139311 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_139311++) {
                int64_t x_139312 = (int64_t) 0 + i_139311 * (int64_t) 1;
                
                ((int64_t *) mem_138471.mem)[i_139311] = x_139312;
            }
            
            int64_t flat_dim_136605 = smallest_pow_2_geq_than_res_136594 * block_sizze_136604;
            bool x_139054 = !cond_136588;
            int64_t greatest_divisor_leq_than_arg1_136607 = mul64((int64_t) 2, block_sizze_136604);
            int64_t merge_block_sizze_136608;
            
            if (x_139054) {
                int64_t x_139056;
                
                if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139056, (int64_t) 8, greatest_divisor_leq_than_arg1_136607) != 0) {
                    err = 1;
                    goto cleanup;
                }
                merge_block_sizze_136608 = x_139056;
            } else {
                merge_block_sizze_136608 = (int64_t) 0;
            }
            
            bool index_concat_cmp_136611 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 0);
            bool x_139050 = !index_concat_cmp_136611;
            bool protect_cond_conj_139060 = x_139050 && x_139054;
            int32_t index_concat_136617;
            
            if (protect_cond_conj_139060) {
                int32_t x_139052 = ((int32_t *) a_list_mem_138403.mem)[slice_136567];
                
                index_concat_136617 = x_139052;
            } else {
                index_concat_136617 = 0;
            }
            
            int64_t index_concat_i_137839 = sub64((int64_t) 0, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t slice_137840 = defunc_0_f_res_136532 + index_concat_i_137839;
            int64_t slice_137841 = p_136403 + slice_137840;
            bool protect_cond_conj_139061 = index_concat_cmp_136611 && x_139054;
            int32_t index_concat_137842;
            
            if (protect_cond_conj_139061) {
                int32_t x_139048 = ((int32_t *) b_list_mem_138404.mem)[slice_137841];
                
                index_concat_137842 = x_139048;
            } else {
                index_concat_137842 = 0;
            }
            
            int32_t index_concat_branch_136612;
            
            if (index_concat_cmp_136611) {
                index_concat_branch_136612 = index_concat_137842;
            } else {
                index_concat_branch_136612 = index_concat_136617;
            }
            
            int32_t defunc_0_reduce_res_138002;
            int64_t defunc_0_reduce_res_138003;
            
            if (x_139054) {
                int32_t x_139062;
                int64_t x_139063;
                int32_t redout_138213;
                int64_t redout_138214;
                
                redout_138213 = index_concat_branch_136612;
                redout_138214 = (int64_t) 0;
                for (int64_t i_138215 = 0; i_138215 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138215++) {
                    bool index_concat_cmp_138390 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, i_138215);
                    int32_t index_concat_branch_138394;
                    
                    if (index_concat_cmp_138390) {
                        int64_t index_concat_i_138391 = sub64(i_138215, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                        int64_t slice_138401 = slice_136584 + index_concat_i_138391;
                        int32_t index_concat_138392 = ((int32_t *) b_list_mem_138404.mem)[slice_138401];
                        
                        index_concat_branch_138394 = index_concat_138392;
                    } else {
                        int64_t slice_138402 = slice_136567 + i_138215;
                        int32_t index_concat_138393 = ((int32_t *) a_list_mem_138403.mem)[slice_138402];
                        
                        index_concat_branch_138394 = index_concat_138393;
                    }
                    
                    bool defunc_0_leq_res_136626 = sle32(redout_138213, index_concat_branch_138394);
                    int32_t defunc_0_op_res_136627;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136627 = index_concat_branch_138394;
                    } else {
                        defunc_0_op_res_136627 = redout_138213;
                    }
                    
                    int64_t defunc_0_op_res_136628;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136628 = i_138215;
                    } else {
                        defunc_0_op_res_136628 = redout_138214;
                    }
                    
                    int32_t redout_tmp_139313 = defunc_0_op_res_136627;
                    int64_t redout_tmp_139314 = defunc_0_op_res_136628;
                    
                    redout_138213 = redout_tmp_139313;
                    redout_138214 = redout_tmp_139314;
                }
                x_139062 = redout_138213;
                x_139063 = redout_138214;
                defunc_0_reduce_res_138002 = x_139062;
                defunc_0_reduce_res_138003 = x_139063;
            } else {
                defunc_0_reduce_res_138002 = 0;
                defunc_0_reduce_res_138003 = (int64_t) 0;
            }
            
            int64_t distance_136640 = add64((int64_t) 1, tmp_136638);
            int64_t binop_x_138472 = (int64_t) 4 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138473 = block_sizze_136604 * binop_x_138472;
            int64_t binop_x_138475 = (int64_t) 8 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138476 = block_sizze_136604 * binop_x_138475;
            int64_t bytes_138486 = (int64_t) 4 * block_sizze_136604;
            int64_t bytes_138488 = (int64_t) 8 * block_sizze_136604;
            bool loop_cond_136722 = slt64(block_sizze_136604, flat_dim_136605);
            bool zzero_136723 = merge_block_sizze_136608 == (int64_t) 0;
            bool nonzzero_136724 = !zzero_136723;
            
            if (cond_136588) {
                if (memblock_set(ctx, &ext_mem_138676, &mem_138471, "mem_138471") != 0)
                    return 1;
            } else {
                if (mem_138474_cached_sizze_139550 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138474, &mem_138474_cached_sizze_139550, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138477_cached_sizze_139551 < bytes_138476) {
                    err = lexical_realloc(ctx, &mem_138477, &mem_138477_cached_sizze_139551, bytes_138476);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138487_cached_sizze_139552 < bytes_138486) {
                    err = lexical_realloc(ctx, &mem_138487, &mem_138487_cached_sizze_139552, bytes_138486);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138489_cached_sizze_139553 < bytes_138488) {
                    err = lexical_realloc(ctx, &mem_138489, &mem_138489_cached_sizze_139553, bytes_138488);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                for (int64_t i_138227 = 0; i_138227 < smallest_pow_2_geq_than_res_136594; i_138227++) {
                    int64_t zp_lhs_136647 = mul64(block_sizze_136604, i_138227);
                    
                    for (int64_t i_138220 = 0; i_138220 < block_sizze_136604; i_138220++) {
                        int64_t k_136651 = add64(zp_lhs_136647, i_138220);
                        bool cond_136652 = slt64(k_136651, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                        int32_t lifted_lambda_res_136653;
                        int64_t lifted_lambda_res_136654;
                        
                        if (cond_136652) {
                            bool x_137847 = sle64((int64_t) 0, k_136651);
                            bool bounds_check_137848 = cond_136652 && x_137847;
                            bool index_certs_137849;
                            
                            if (!bounds_check_137848) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_136651, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool index_concat_cmp_137850 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, k_136651);
                            int32_t index_concat_branch_137851;
                            
                            if (index_concat_cmp_137850) {
                                int64_t index_concat_i_137852 = sub64(k_136651, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                                int64_t slice_137853 = defunc_0_f_res_136532 + index_concat_i_137852;
                                int64_t slice_137854 = p_136403 + slice_137853;
                                int32_t index_concat_137855 = ((int32_t *) b_list_mem_138404.mem)[slice_137854];
                                
                                index_concat_branch_137851 = index_concat_137855;
                            } else {
                                int64_t slice_137856 = defunc_0_f_res_136531 + k_136651;
                                int64_t slice_137857 = p_136402 + slice_137856;
                                int32_t index_concat_137858 = ((int32_t *) a_list_mem_138403.mem)[slice_137857];
                                
                                index_concat_branch_137851 = index_concat_137858;
                            }
                            lifted_lambda_res_136653 = index_concat_branch_137851;
                            lifted_lambda_res_136654 = k_136651;
                        } else {
                            lifted_lambda_res_136653 = defunc_0_reduce_res_138002;
                            lifted_lambda_res_136654 = defunc_0_reduce_res_138003;
                        }
                        ((int32_t *) mem_138487)[i_138220] = lifted_lambda_res_136653;
                        ((int64_t *) mem_138489)[i_138220] = lifted_lambda_res_136654;
                    }
                    if (!cond_136637) {
                        for (int64_t i_136671 = 0; i_136671 < distance_136640; i_136671++) {
                            int64_t gt_arg1_136674 = add64((int64_t) 1, i_136671);
                            bool x_136675 = sle64((int64_t) 0, gt_arg1_136674);
                            bool y_136676 = slt64(gt_arg1_136674, block_sizze_136604);
                            bool bounds_check_136677 = x_136675 && y_136676;
                            bool index_certs_136678;
                            
                            if (!bounds_check_136677) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_136674, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool y_136680 = slt64(i_136671, block_sizze_136604);
                            bool index_certs_136681;
                            
                            if (!y_136680) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_136671, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t gt_arg1_136679 = ((int32_t *) mem_138487)[gt_arg1_136674];
                            int32_t gt_arg0_136682 = ((int32_t *) mem_138487)[i_136671];
                            bool defunc_0_leq_res_136683 = sle32(gt_arg0_136682, gt_arg1_136679);
                            bool defunc_0_lifted_gt_res_136684 = !defunc_0_leq_res_136683;
                            bool s_136685;
                            int64_t s_136688;
                            bool loop_while_136689;
                            int64_t j_136692;
                            
                            loop_while_136689 = defunc_0_lifted_gt_res_136684;
                            j_136692 = i_136671;
                            while (loop_while_136689) {
                                bool x_136693 = sle64((int64_t) 0, j_136692);
                                bool y_136694 = slt64(j_136692, block_sizze_136604);
                                bool bounds_check_136695 = x_136693 && y_136694;
                                bool index_certs_136696;
                                
                                if (!bounds_check_136695) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_136692, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t copy_arg0_136699 = add64((int64_t) 1, j_136692);
                                bool x_136700 = sle64((int64_t) 0, copy_arg0_136699);
                                bool y_136701 = slt64(copy_arg0_136699, block_sizze_136604);
                                bool bounds_check_136702 = x_136700 && y_136701;
                                bool index_certs_136703;
                                
                                if (!bounds_check_136702) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_136699, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int32_t copy_arg0_136697 = ((int32_t *) mem_138487)[j_136692];
                                int64_t copy_arg0_136698 = ((int64_t *) mem_138489)[j_136692];
                                int32_t copy_arg0_136704 = ((int32_t *) mem_138487)[copy_arg0_136699];
                                int64_t copy_arg0_136705 = ((int64_t *) mem_138489)[copy_arg0_136699];
                                
                                ((int32_t *) mem_138487)[j_136692] = copy_arg0_136704;
                                ((int64_t *) mem_138489)[j_136692] = copy_arg0_136705;
                                ((int32_t *) mem_138487)[copy_arg0_136699] = copy_arg0_136697;
                                ((int64_t *) mem_138489)[copy_arg0_136699] = copy_arg0_136698;
                                
                                int64_t tmp_136710 = sub64(j_136692, (int64_t) 1);
                                bool cond_136711 = sle64((int64_t) 0, tmp_136710);
                                bool loop_cond_136712;
                                
                                if (cond_136711) {
                                    bool y_137860 = slt64(tmp_136710, block_sizze_136604);
                                    bool bounds_check_137861 = cond_136711 && y_137860;
                                    bool index_certs_137862;
                                    
                                    if (!bounds_check_137861) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136710, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int32_t gt_arg1_137859 = ((int32_t *) mem_138487)[j_136692];
                                    int32_t gt_arg0_137863 = ((int32_t *) mem_138487)[tmp_136710];
                                    bool defunc_0_leq_res_137864 = sle32(gt_arg0_137863, gt_arg1_137859);
                                    bool defunc_0_lifted_gt_res_137865 = !defunc_0_leq_res_137864;
                                    
                                    loop_cond_136712 = defunc_0_lifted_gt_res_137865;
                                } else {
                                    loop_cond_136712 = 0;
                                }
                                
                                bool loop_while_tmp_139321 = loop_cond_136712;
                                int64_t j_tmp_139324 = tmp_136710;
                                
                                loop_while_136689 = loop_while_tmp_139321;
                                j_136692 = j_tmp_139324;
                            }
                            s_136685 = loop_while_136689;
                            s_136688 = j_136692;
                        }
                    }
                    lmad_copy_4b(ctx, 1, (uint32_t *) mem_138474, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138487, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138477, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138489, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                }
                if (memblock_alloc(ctx, &mem_138542, bytes_138473, "mem_138542")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_4b(ctx, 2, (uint32_t *) mem_138542.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint32_t *) mem_138474, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                if (memblock_alloc(ctx, &mem_138546, bytes_138476, "mem_138546")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138546.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138477, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                
                int64_t data_136725;
                bool data_136726;
                int64_t data_136729;
                int64_t loop_dz2084Uz2082U_136730;
                bool loop_while_136731;
                int64_t stride_136734;
                
                if (memblock_set(ctx, &mem_param_138550, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_138553, &mem_138546, "mem_138546") != 0)
                    return 1;
                loop_dz2084Uz2082U_136730 = flat_dim_136605;
                loop_while_136731 = loop_cond_136722;
                stride_136734 = block_sizze_136604;
                while (loop_while_136731) {
                    int64_t next_stride_136735 = mul64((int64_t) 2, stride_136734);
                    bool zzero_136736 = next_stride_136735 == (int64_t) 0;
                    bool nonzzero_136737 = !zzero_136736;
                    bool nonzzero_cert_136738;
                    
                    if (!nonzzero_136737) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_merges_136739 = sdiv64(flat_dim_136605, next_stride_136735);
                    bool bounds_invalid_upwards_136740 = slt64(num_merges_136739, (int64_t) 0);
                    bool valid_136741 = !bounds_invalid_upwards_136740;
                    bool range_valid_c_136742;
                    
                    if (!valid_136741) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_136739, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:281:82-85\n   #7  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t m_136744 = sub64(next_stride_136735, (int64_t) 1);
                    bool zzero_leq_i_p_m_t_s_136745 = sle64((int64_t) 0, m_136744);
                    bool cond_136747 = slt64(next_stride_136735, (int64_t) 10);
                    bool protect_assert_disj_136748 = nonzzero_136724 || cond_136747;
                    bool nonzzero_cert_136749;
                    
                    if (!protect_assert_disj_136748) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t zeze_lhs_136750 = smod_safe64(next_stride_136735, merge_block_sizze_136608);
                    bool num_blocks_136751 = zeze_lhs_136750 == (int64_t) 0;
                    bool protect_assert_disj_136752 = cond_136747 || num_blocks_136751;
                    bool assert_c_136753;
                    
                    if (!protect_assert_disj_136752) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_blocks_136754 = sdiv_safe64(next_stride_136735, merge_block_sizze_136608);
                    int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755 = add64((int64_t) 1, num_blocks_136754);
                    int64_t j_m_i_136756 = sub64(next_stride_136735, stride_136734);
                    int64_t flat_dim_136757 = merge_block_sizze_136608 * num_blocks_136754;
                    bool bounds_invalid_upwards_136758 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, (int64_t) 0);
                    bool empty_slice_136759 = j_m_i_136756 == (int64_t) 0;
                    int64_t m_136760 = sub64(j_m_i_136756, (int64_t) 1);
                    bool zzero_lte_i_136761 = sle64((int64_t) 0, stride_136734);
                    bool i_lte_j_136762 = sle64(stride_136734, next_stride_136735);
                    bool empty_slice_136763 = stride_136734 == (int64_t) 0;
                    int64_t m_136764 = sub64(stride_136734, (int64_t) 1);
                    bool bounds_invalid_upwards_136765 = slt64(num_blocks_136754, (int64_t) 0);
                    bool cond_136766 = slt64((int64_t) 0, stride_136734);
                    bool valid_136767 = !bounds_invalid_upwards_136758;
                    int64_t i_p_m_t_s_136768 = add64(stride_136734, m_136760);
                    bool zzero_leq_i_p_m_t_s_136769 = sle64((int64_t) 0, m_136764);
                    bool i_p_m_t_s_leq_w_136770 = slt64(m_136764, next_stride_136735);
                    bool valid_136771 = !bounds_invalid_upwards_136765;
                    bool i_p_m_t_s_leq_w_136772 = slt64(m_136744, flat_dim_136757);
                    bool y_136773 = slt64((int64_t) 0, j_m_i_136756);
                    bool protect_assert_disj_136774 = cond_136747 || valid_136767;
                    bool range_valid_c_136775;
                    
                    if (!protect_assert_disj_136774) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool zzero_leq_i_p_m_t_s_136776 = sle64((int64_t) 0, i_p_m_t_s_136768);
                    bool i_p_m_t_s_leq_w_136777 = slt64(i_p_m_t_s_136768, next_stride_136735);
                    bool y_136778 = zzero_leq_i_p_m_t_s_136769 && i_p_m_t_s_leq_w_136770;
                    bool protect_assert_disj_136779 = cond_136747 || valid_136771;
                    bool range_valid_c_136780;
                    
                    if (!protect_assert_disj_136779) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_136754, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_136781 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136772;
                    bool y_136782 = zzero_lte_i_136761 && i_p_m_t_s_leq_w_136777;
                    bool forwards_ok_136783 = zzero_lte_i_136761 && y_136778;
                    bool ok_or_empty_136784 = zzero_136736 || y_136781;
                    bool protect_assert_disj_136785 = cond_136766 || y_136773;
                    bool y_136786 = zzero_leq_i_p_m_t_s_136776 && y_136782;
                    bool ok_or_empty_136787 = empty_slice_136763 || forwards_ok_136783;
                    bool protect_assert_disj_136788 = cond_136747 || ok_or_empty_136784;
                    bool index_certs_136789;
                    
                    if (!protect_assert_disj_136788) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) flat_dim_136757, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool loop_not_taken_136790 = !cond_136747;
                    bool protect_assert_disj_136791 = protect_assert_disj_136785 || loop_not_taken_136790;
                    bool index_certs_136792;
                    
                    if (!protect_assert_disj_136791) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool forwards_ok_136793 = i_lte_j_136762 && y_136786;
                    bool protect_assert_disj_136794 = cond_136747 || ok_or_empty_136787;
                    bool index_certs_136795;
                    
                    if (!protect_assert_disj_136794) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136796 = ok_or_empty_136787 || loop_not_taken_136790;
                    bool index_certs_136797;
                    
                    if (!protect_assert_disj_136796) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool ok_or_empty_136798 = empty_slice_136759 || forwards_ok_136793;
                    bool protect_assert_disj_136799 = cond_136747 || ok_or_empty_136798;
                    bool index_certs_136800;
                    
                    if (!protect_assert_disj_136799) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136801 = loop_not_taken_136790 || ok_or_empty_136798;
                    bool index_certs_136802;
                    
                    if (!protect_assert_disj_136801) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_138554 = (int64_t) 4 * num_merges_136739;
                    int64_t bytes_138555 = next_stride_136735 * binop_x_138554;
                    int64_t binop_x_138557 = (int64_t) 8 * num_merges_136739;
                    int64_t bytes_138558 = next_stride_136735 * binop_x_138557;
                    bool i_lte_j_136746 = sle64((int64_t) 0, next_stride_136735);
                    
                    if (mem_138556_cached_sizze_139554 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138556, &mem_138556_cached_sizze_139554, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138559_cached_sizze_139555 < bytes_138558) {
                        err = lexical_realloc(ctx, &mem_138559, &mem_138559_cached_sizze_139555, bytes_138558);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    
                    int64_t bytes_138568 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755;
                    int64_t binop_x_138584 = (int64_t) 4 * num_blocks_136754;
                    int64_t bytes_138585 = merge_block_sizze_136608 * binop_x_138584;
                    int64_t binop_x_138587 = (int64_t) 8 * num_blocks_136754;
                    int64_t bytes_138588 = merge_block_sizze_136608 * binop_x_138587;
                    int64_t bytes_138630 = (int64_t) 8 * stride_136734;
                    int64_t bytes_138632 = (int64_t) 16 * stride_136734;
                    
                    for (int64_t i_138248 = 0; i_138248 < num_merges_136739; i_138248++) {
                        int64_t start_136806 = mul64(next_stride_136735, i_138248);
                        int64_t j_m_i_136807 = sub64(loop_dz2084Uz2082U_136730, start_136806);
                        bool empty_slice_136808 = j_m_i_136807 == (int64_t) 0;
                        int64_t m_136809 = sub64(j_m_i_136807, (int64_t) 1);
                        int64_t i_p_m_t_s_136810 = add64(start_136806, m_136809);
                        bool zzero_leq_i_p_m_t_s_136811 = sle64((int64_t) 0, i_p_m_t_s_136810);
                        bool i_p_m_t_s_leq_w_136812 = slt64(i_p_m_t_s_136810, loop_dz2084Uz2082U_136730);
                        bool zzero_lte_i_136813 = sle64((int64_t) 0, start_136806);
                        bool i_lte_j_136814 = sle64(start_136806, loop_dz2084Uz2082U_136730);
                        bool y_136815 = i_p_m_t_s_leq_w_136812 && zzero_lte_i_136813;
                        bool y_136816 = zzero_leq_i_p_m_t_s_136811 && y_136815;
                        bool forwards_ok_136817 = i_lte_j_136814 && y_136816;
                        bool ok_or_empty_136818 = empty_slice_136808 || forwards_ok_136817;
                        bool index_certs_136819;
                        
                        if (!ok_or_empty_136818) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_136806, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_136730, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool i_p_m_t_s_leq_w_136820 = slt64(m_136744, j_m_i_136807);
                        bool y_136821 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136820;
                        bool forwards_ok_136822 = i_lte_j_136746 && y_136821;
                        bool ok_or_empty_136823 = zzero_136736 || forwards_ok_136822;
                        bool index_certs_136824;
                        
                        if (!ok_or_empty_136823) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) j_m_i_136807, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        if (cond_136747) {
                            int32_t dummy_137891;
                            int64_t dummy_137892;
                            
                            if (cond_136766) {
                                int32_t head_res_137893 = ((int32_t *) mem_param_138550.mem)[start_136806];
                                int64_t head_res_137894 = ((int64_t *) mem_param_138553.mem)[start_136806];
                                
                                dummy_137891 = head_res_137893;
                                dummy_137892 = head_res_137894;
                            } else {
                                int64_t slice_137895 = stride_136734 + start_136806;
                                int32_t head_res_137896 = ((int32_t *) mem_param_138550.mem)[slice_137895];
                                int64_t head_res_137897 = ((int64_t *) mem_param_138553.mem)[slice_137895];
                                
                                dummy_137891 = head_res_137896;
                                dummy_137892 = head_res_137897;
                            }
                            if (memblock_alloc(ctx, &mem_138631, bytes_138630, "mem_138631")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139334 = 0; nest_i_139334 < next_stride_136735; nest_i_139334++) {
                                ((int32_t *) mem_138631.mem)[nest_i_139334] = dummy_137891;
                            }
                            if (memblock_alloc(ctx, &mem_138633, bytes_138632, "mem_138633")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139335 = 0; nest_i_139335 < next_stride_136735; nest_i_139335++) {
                                ((int64_t *) mem_138633.mem)[nest_i_139335] = dummy_137892;
                            }
                            
                            int64_t data_137900;
                            int64_t i_137904 = (int64_t) 0;
                            
                            for (int64_t k_137903 = 0; k_137903 < next_stride_136735; k_137903++) {
                                int64_t j_137907 = sub64(k_137903, i_137904);
                                bool cond_137908 = j_137907 == j_m_i_136756;
                                bool cond_137909;
                                
                                if (cond_137908) {
                                    cond_137909 = 1;
                                } else {
                                    bool cond_137910 = slt64(i_137904, stride_136734);
                                    bool cond_f_res_137911;
                                    
                                    if (cond_137910) {
                                        bool x_137912 = sle64((int64_t) 0, j_137907);
                                        bool y_137913 = slt64(j_137907, j_m_i_136756);
                                        bool bounds_check_137914 = x_137912 && y_137913;
                                        bool index_certs_137915;
                                        
                                        if (!bounds_check_137914) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137919 = sle64((int64_t) 0, i_137904);
                                        bool bounds_check_137920 = cond_137910 && x_137919;
                                        bool index_certs_137921;
                                        
                                        if (!bounds_check_137920) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137916 = stride_136734 + j_137907;
                                        int64_t slice_137917 = start_136806 + slice_137916;
                                        int32_t leq_arg1_137918 = ((int32_t *) mem_param_138550.mem)[slice_137917];
                                        int64_t slice_137922 = start_136806 + i_137904;
                                        int32_t leq_arg0_137923 = ((int32_t *) mem_param_138550.mem)[slice_137922];
                                        bool defunc_0_leq_res_137924 = sle32(leq_arg0_137923, leq_arg1_137918);
                                        
                                        cond_f_res_137911 = defunc_0_leq_res_137924;
                                    } else {
                                        cond_f_res_137911 = 0;
                                    }
                                    cond_137909 = cond_f_res_137911;
                                }
                                
                                int64_t loopres_137925;
                                int32_t loopres_137926;
                                int64_t loopres_137927;
                                
                                if (cond_137909) {
                                    bool x_137929 = sle64((int64_t) 0, i_137904);
                                    bool y_137930 = slt64(i_137904, stride_136734);
                                    bool bounds_check_137931 = x_137929 && y_137930;
                                    bool index_certs_137932;
                                    
                                    if (!bounds_check_137931) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t tmp_137928 = add64((int64_t) 1, i_137904);
                                    int64_t slice_137933 = start_136806 + i_137904;
                                    int32_t tmp_137934 = ((int32_t *) mem_param_138550.mem)[slice_137933];
                                    int64_t tmp_137935 = ((int64_t *) mem_param_138553.mem)[slice_137933];
                                    
                                    loopres_137925 = tmp_137928;
                                    loopres_137926 = tmp_137934;
                                    loopres_137927 = tmp_137935;
                                } else {
                                    bool x_137936 = sle64((int64_t) 0, j_137907);
                                    bool y_137937 = slt64(j_137907, j_m_i_136756);
                                    bool bounds_check_137938 = x_137936 && y_137937;
                                    bool index_certs_137939;
                                    
                                    if (!bounds_check_137938) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137940 = stride_136734 + j_137907;
                                    int64_t slice_137941 = start_136806 + slice_137940;
                                    int32_t tmp_137942 = ((int32_t *) mem_param_138550.mem)[slice_137941];
                                    int64_t tmp_137943 = ((int64_t *) mem_param_138553.mem)[slice_137941];
                                    
                                    loopres_137925 = i_137904;
                                    loopres_137926 = tmp_137942;
                                    loopres_137927 = tmp_137943;
                                }
                                ((int32_t *) mem_138631.mem)[k_137903] = loopres_137926;
                                ((int64_t *) mem_138633.mem)[k_137903] = loopres_137927;
                                
                                int64_t i_tmp_139336 = loopres_137925;
                                
                                i_137904 = i_tmp_139336;
                            }
                            data_137900 = i_137904;
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138631, "mem_138631") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138633, "mem_138633") != 0)
                                return 1;
                        } else {
                            if (mem_138569_cached_sizze_139556 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138569, &mem_138569_cached_sizze_139556, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138571_cached_sizze_139557 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138571, &mem_138571_cached_sizze_139557, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138234 = 0; i_138234 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755; i_138234++) {
                                int64_t split_count_arg3_136886 = mul64(merge_block_sizze_136608, i_138234);
                                int64_t defunc_0_split_count_res_136887;
                                int64_t defunc_0_split_count_res_136888;
                                int64_t defunc_0_split_count_res_136889;
                                int64_t defunc_0_split_count_res_136890;
                                int64_t defunc_0_split_count_res_136891;
                                
                                if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_136887, &defunc_0_split_count_res_136888, &defunc_0_split_count_res_136889, &defunc_0_split_count_res_136890, &defunc_0_split_count_res_136891, (int64_t) 0, stride_136734, (int64_t) 0, j_m_i_136756, split_count_arg3_136886) != 0) {
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                bool loop_cond_136892 = slt64((int64_t) 0, defunc_0_split_count_res_136891);
                                bool defunc_0_split_count_res_136893;
                                int64_t defunc_0_split_count_res_136894;
                                int64_t defunc_0_split_count_res_136895;
                                int64_t defunc_0_split_count_res_136896;
                                int64_t defunc_0_split_count_res_136897;
                                int64_t defunc_0_split_count_res_136898;
                                bool loop_while_136899;
                                int64_t ss_136900;
                                int64_t ss_136901;
                                int64_t tt_136902;
                                int64_t tt_136903;
                                int64_t count_136904;
                                
                                loop_while_136899 = loop_cond_136892;
                                ss_136900 = defunc_0_split_count_res_136887;
                                ss_136901 = defunc_0_split_count_res_136888;
                                tt_136902 = defunc_0_split_count_res_136889;
                                tt_136903 = defunc_0_split_count_res_136890;
                                count_136904 = defunc_0_split_count_res_136891;
                                while (loop_while_136899) {
                                    int64_t zlze_lhs_136905 = sub64(ss_136901, ss_136900);
                                    bool cond_136906 = sle64(zlze_lhs_136905, (int64_t) 0);
                                    int64_t defunc_0_lifted_step_res_136907;
                                    int64_t defunc_0_lifted_step_res_136908;
                                    int64_t defunc_0_lifted_step_res_136909;
                                    int64_t defunc_0_lifted_step_res_136910;
                                    
                                    if (cond_136906) {
                                        int64_t tmp_137946 = add64(tt_136902, count_136904);
                                        
                                        defunc_0_lifted_step_res_136907 = ss_136900;
                                        defunc_0_lifted_step_res_136908 = tmp_137946;
                                        defunc_0_lifted_step_res_136909 = tt_136903;
                                        defunc_0_lifted_step_res_136910 = (int64_t) 0;
                                    } else {
                                        int64_t zlze_lhs_136912 = sub64(tt_136903, tt_136902);
                                        bool cond_136913 = sle64(zlze_lhs_136912, (int64_t) 0);
                                        int64_t defunc_0_lifted_step_res_f_res_136914;
                                        int64_t defunc_0_lifted_step_res_f_res_136915;
                                        int64_t defunc_0_lifted_step_res_f_res_136916;
                                        int64_t defunc_0_lifted_step_res_f_res_136917;
                                        
                                        if (cond_136913) {
                                            int64_t tmp_137947 = add64(ss_136900, count_136904);
                                            
                                            defunc_0_lifted_step_res_f_res_136914 = tmp_137947;
                                            defunc_0_lifted_step_res_f_res_136915 = tt_136902;
                                            defunc_0_lifted_step_res_f_res_136916 = tt_136903;
                                            defunc_0_lifted_step_res_f_res_136917 = (int64_t) 0;
                                        } else {
                                            bool cond_136919 = count_136904 == (int64_t) 1;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136920;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136921;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136922;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136923;
                                            
                                            if (cond_136919) {
                                                bool x_137949 = sle64((int64_t) 0, ss_136900);
                                                bool y_137950 = slt64(ss_136900, stride_136734);
                                                bool bounds_check_137951 = x_137949 && y_137950;
                                                bool index_certs_137952;
                                                
                                                if (!bounds_check_137951) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_136900, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:281:82-85\n   #14 ftsort.fut:275:1-281:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                bool x_137955 = sle64((int64_t) 0, tt_136902);
                                                bool y_137956 = slt64(tt_136902, j_m_i_136756);
                                                bool bounds_check_137957 = x_137955 && y_137956;
                                                bool index_certs_137958;
                                                
                                                if (!bounds_check_137957) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_136902, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:281:82-85\n   #14 ftsort.fut:275:1-281:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                int64_t slice_137953 = start_136806 + ss_136900;
                                                int32_t leq_arg1_137954 = ((int32_t *) mem_param_138550.mem)[slice_137953];
                                                int64_t slice_137959 = stride_136734 + tt_136902;
                                                int64_t slice_137960 = start_136806 + slice_137959;
                                                int32_t leq_arg0_137961 = ((int32_t *) mem_param_138550.mem)[slice_137960];
                                                bool defunc_0_leq_res_137962 = sle32(leq_arg0_137961, leq_arg1_137954);
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                
                                                if (defunc_0_leq_res_137962) {
                                                    int64_t tmp_137965 = add64((int64_t) 1, tt_136902);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = ss_136900;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tmp_137965;
                                                } else {
                                                    int64_t tmp_137966 = add64((int64_t) 1, ss_136900);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = tmp_137966;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tt_136902;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = tt_136903;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = (int64_t) 0;
                                            } else {
                                                int64_t m_136942 = sdiv64(count_136904, (int64_t) 2);
                                                int64_t n_136943 = sub64(count_136904, m_136942);
                                                bool cond_136944 = n_136943 == (int64_t) 0;
                                                int64_t zgze_lhs_136945 = add64(ss_136900, m_136942);
                                                bool cond_f_res_136946 = sle64(ss_136901, zgze_lhs_136945);
                                                bool x_136947 = !cond_136944;
                                                bool y_136948 = cond_f_res_136946 && x_136947;
                                                bool cond_136949 = cond_136944 || y_136948;
                                                bool leq_y_x_136950;
                                                
                                                if (cond_136949) {
                                                    leq_y_x_136950 = 1;
                                                } else {
                                                    bool x_136951 = sle64((int64_t) 0, zgze_lhs_136945);
                                                    bool y_136952 = slt64(zgze_lhs_136945, stride_136734);
                                                    bool bounds_check_136953 = x_136951 && y_136952;
                                                    bool index_certs_136954;
                                                    
                                                    if (!bounds_check_136953) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_136945, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:281:82-85\n   #14 ftsort.fut:275:1-281:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t zm_lhs_136957 = add64(tt_136902, n_136943);
                                                    int64_t leq_arg0_136958 = sub64(zm_lhs_136957, (int64_t) 1);
                                                    bool x_136959 = sle64((int64_t) 0, leq_arg0_136958);
                                                    bool y_136960 = slt64(leq_arg0_136958, j_m_i_136756);
                                                    bool bounds_check_136961 = x_136959 && y_136960;
                                                    bool index_certs_136962;
                                                    
                                                    if (!bounds_check_136961) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_136958, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:281:82-85\n   #14 ftsort.fut:275:1-281:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t slice_136955 = start_136806 + zgze_lhs_136945;
                                                    int32_t leq_arg1_136956 = ((int32_t *) mem_param_138550.mem)[slice_136955];
                                                    int64_t slice_136963 = stride_136734 + leq_arg0_136958;
                                                    int64_t slice_136964 = start_136806 + slice_136963;
                                                    int32_t leq_arg0_136965 = ((int32_t *) mem_param_138550.mem)[slice_136964];
                                                    bool defunc_0_leq_res_136966 = sle32(leq_arg0_136965, leq_arg1_136956);
                                                    
                                                    leq_y_x_136950 = defunc_0_leq_res_136966;
                                                }
                                                
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                                
                                                if (leq_y_x_136950) {
                                                    int64_t tmp_137967 = add64(tt_136902, n_136943);
                                                    int64_t tmp_137968 = sub64(count_136904, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tmp_137967;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tt_136903;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = tmp_137968;
                                                } else {
                                                    int64_t tmp_136972 = add64(tt_136902, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tt_136902;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tmp_136972;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = count_136904;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = ss_136900;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                            }
                                            defunc_0_lifted_step_res_f_res_136914 = defunc_0_lifted_step_res_f_res_f_res_136920;
                                            defunc_0_lifted_step_res_f_res_136915 = defunc_0_lifted_step_res_f_res_f_res_136921;
                                            defunc_0_lifted_step_res_f_res_136916 = defunc_0_lifted_step_res_f_res_f_res_136922;
                                            defunc_0_lifted_step_res_f_res_136917 = defunc_0_lifted_step_res_f_res_f_res_136923;
                                        }
                                        defunc_0_lifted_step_res_136907 = defunc_0_lifted_step_res_f_res_136914;
                                        defunc_0_lifted_step_res_136908 = defunc_0_lifted_step_res_f_res_136915;
                                        defunc_0_lifted_step_res_136909 = defunc_0_lifted_step_res_f_res_136916;
                                        defunc_0_lifted_step_res_136910 = defunc_0_lifted_step_res_f_res_136917;
                                    }
                                    
                                    int64_t loopres_136973;
                                    int64_t loopres_136974;
                                    int64_t loopres_136975;
                                    int64_t loopres_136976;
                                    int64_t loopres_136977;
                                    
                                    if (futrts_lifted_normalizze_8911(ctx, &loopres_136973, &loopres_136974, &loopres_136975, &loopres_136976, &loopres_136977, defunc_0_lifted_step_res_136907, ss_136901, defunc_0_lifted_step_res_136908, defunc_0_lifted_step_res_136909, defunc_0_lifted_step_res_136910) != 0) {
                                        err = 1;
                                        goto cleanup;
                                    }
                                    
                                    bool loop_cond_136978 = slt64((int64_t) 0, loopres_136977);
                                    bool loop_while_tmp_139341 = loop_cond_136978;
                                    int64_t ss_tmp_139342 = loopres_136973;
                                    int64_t ss_tmp_139343 = loopres_136974;
                                    int64_t tt_tmp_139344 = loopres_136975;
                                    int64_t tt_tmp_139345 = loopres_136976;
                                    int64_t count_tmp_139346 = loopres_136977;
                                    
                                    loop_while_136899 = loop_while_tmp_139341;
                                    ss_136900 = ss_tmp_139342;
                                    ss_136901 = ss_tmp_139343;
                                    tt_136902 = tt_tmp_139344;
                                    tt_136903 = tt_tmp_139345;
                                    count_136904 = count_tmp_139346;
                                }
                                defunc_0_split_count_res_136893 = loop_while_136899;
                                defunc_0_split_count_res_136894 = ss_136900;
                                defunc_0_split_count_res_136895 = ss_136901;
                                defunc_0_split_count_res_136896 = tt_136902;
                                defunc_0_split_count_res_136897 = tt_136903;
                                defunc_0_split_count_res_136898 = count_136904;
                                ((int64_t *) mem_138569)[i_138234] = defunc_0_split_count_res_136894;
                                ((int64_t *) mem_138571)[i_138234] = defunc_0_split_count_res_136896;
                            }
                            if (mem_138586_cached_sizze_139558 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138586, &mem_138586_cached_sizze_139558, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138589_cached_sizze_139559 < bytes_138588) {
                                err = lexical_realloc(ctx, &mem_138589, &mem_138589_cached_sizze_139559, bytes_138588);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138241 = 0; i_138241 < num_blocks_136754; i_138241++) {
                                bool y_136984 = slt64(i_138241, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool index_certs_136986;
                                
                                if (!y_136984) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138241, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136987 = ((int64_t *) mem_138569)[i_138241];
                                int64_t defunc_0_f_res_136988 = ((int64_t *) mem_138571)[i_138241];
                                int64_t tmp_136989 = add64((int64_t) 1, i_138241);
                                bool x_136990 = sle64((int64_t) 0, tmp_136989);
                                bool y_136991 = slt64(tmp_136989, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool bounds_check_136992 = x_136990 && y_136991;
                                bool index_certs_136993;
                                
                                if (!bounds_check_136992) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136989, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136994 = ((int64_t *) mem_138569)[tmp_136989];
                                int64_t defunc_0_f_res_136995 = ((int64_t *) mem_138571)[tmp_136989];
                                int64_t merge_sequential_arg2_136996 = add64(stride_136734, defunc_0_f_res_136988);
                                int64_t merge_sequential_arg2_136997 = add64(stride_136734, defunc_0_f_res_136995);
                                int64_t j_m_i_136998 = sub64(merge_sequential_arg2_136997, merge_sequential_arg2_136996);
                                bool empty_slice_136999 = j_m_i_136998 == (int64_t) 0;
                                int64_t m_137000 = sub64(j_m_i_136998, (int64_t) 1);
                                int64_t i_p_m_t_s_137001 = add64(merge_sequential_arg2_136996, m_137000);
                                bool zzero_leq_i_p_m_t_s_137002 = sle64((int64_t) 0, i_p_m_t_s_137001);
                                bool i_p_m_t_s_leq_w_137003 = slt64(i_p_m_t_s_137001, next_stride_136735);
                                bool zzero_lte_i_137004 = sle64((int64_t) 0, merge_sequential_arg2_136996);
                                bool i_lte_j_137005 = sle64(merge_sequential_arg2_136996, merge_sequential_arg2_136997);
                                bool y_137006 = i_p_m_t_s_leq_w_137003 && zzero_lte_i_137004;
                                bool y_137007 = zzero_leq_i_p_m_t_s_137002 && y_137006;
                                bool forwards_ok_137008 = i_lte_j_137005 && y_137007;
                                bool ok_or_empty_137009 = empty_slice_136999 || forwards_ok_137008;
                                bool index_certs_137010;
                                
                                if (!ok_or_empty_137009) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_136996, ":", (long long) merge_sequential_arg2_136997, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t j_m_i_137011 = sub64(defunc_0_f_res_136994, defunc_0_f_res_136987);
                                bool empty_slice_137012 = j_m_i_137011 == (int64_t) 0;
                                int64_t m_137013 = sub64(j_m_i_137011, (int64_t) 1);
                                int64_t i_p_m_t_s_137014 = add64(defunc_0_f_res_136987, m_137013);
                                bool zzero_leq_i_p_m_t_s_137015 = sle64((int64_t) 0, i_p_m_t_s_137014);
                                bool i_p_m_t_s_leq_w_137016 = slt64(i_p_m_t_s_137014, next_stride_136735);
                                bool zzero_lte_i_137017 = sle64((int64_t) 0, defunc_0_f_res_136987);
                                bool i_lte_j_137018 = sle64(defunc_0_f_res_136987, defunc_0_f_res_136994);
                                bool y_137019 = i_p_m_t_s_leq_w_137016 && zzero_lte_i_137017;
                                bool y_137020 = zzero_leq_i_p_m_t_s_137015 && y_137019;
                                bool forwards_ok_137021 = i_lte_j_137018 && y_137020;
                                bool ok_or_empty_137022 = empty_slice_137012 || forwards_ok_137021;
                                bool index_certs_137023;
                                
                                if (!ok_or_empty_137022) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136987, ":", (long long) defunc_0_f_res_136994, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool cond_137024 = slt64((int64_t) 0, j_m_i_137011);
                                int32_t dummy_137025;
                                int64_t dummy_137026;
                                
                                if (cond_137024) {
                                    bool index_certs_137969;
                                    
                                    if (!cond_137024) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:281:82-85\n   #13 ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137970 = start_136806 + defunc_0_f_res_136987;
                                    int32_t head_res_137971 = ((int32_t *) mem_param_138550.mem)[slice_137970];
                                    int64_t head_res_137972 = ((int64_t *) mem_param_138553.mem)[slice_137970];
                                    
                                    dummy_137025 = head_res_137971;
                                    dummy_137026 = head_res_137972;
                                } else {
                                    bool y_137031 = slt64((int64_t) 0, j_m_i_136998);
                                    bool index_certs_137032;
                                    
                                    if (!y_137031) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:281:82-85\n   #13 ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137033 = start_136806 + merge_sequential_arg2_136996;
                                    int32_t head_res_137034 = ((int32_t *) mem_param_138550.mem)[slice_137033];
                                    int64_t head_res_137035 = ((int64_t *) mem_param_138553.mem)[slice_137033];
                                    
                                    dummy_137025 = head_res_137034;
                                    dummy_137026 = head_res_137035;
                                }
                                for (int64_t nest_i_139349 = 0; nest_i_139349 < merge_block_sizze_136608; nest_i_139349++) {
                                    ((int32_t *) mem_138586)[i_138241 * merge_block_sizze_136608 + nest_i_139349] = dummy_137025;
                                }
                                for (int64_t nest_i_139350 = 0; nest_i_139350 < merge_block_sizze_136608; nest_i_139350++) {
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + nest_i_139350] = dummy_137026;
                                }
                                
                                int64_t data_137038;
                                int64_t i_137042 = (int64_t) 0;
                                
                                for (int64_t k_137041 = 0; k_137041 < merge_block_sizze_136608; k_137041++) {
                                    int64_t j_137045 = sub64(k_137041, i_137042);
                                    bool cond_137046 = j_137045 == j_m_i_136998;
                                    bool cond_137047;
                                    
                                    if (cond_137046) {
                                        cond_137047 = 1;
                                    } else {
                                        bool cond_137048 = slt64(i_137042, j_m_i_137011);
                                        bool cond_f_res_137049;
                                        
                                        if (cond_137048) {
                                            bool x_137973 = sle64((int64_t) 0, j_137045);
                                            bool y_137974 = slt64(j_137045, j_m_i_136998);
                                            bool bounds_check_137975 = x_137973 && y_137974;
                                            bool index_certs_137976;
                                            
                                            if (!bounds_check_137975) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            bool x_137980 = sle64((int64_t) 0, i_137042);
                                            bool bounds_check_137981 = cond_137048 && x_137980;
                                            bool index_certs_137982;
                                            
                                            if (!bounds_check_137981) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137977 = merge_sequential_arg2_136996 + j_137045;
                                            int64_t slice_137978 = start_136806 + slice_137977;
                                            int32_t leq_arg1_137979 = ((int32_t *) mem_param_138550.mem)[slice_137978];
                                            int64_t slice_137983 = defunc_0_f_res_136987 + i_137042;
                                            int64_t slice_137984 = start_136806 + slice_137983;
                                            int32_t leq_arg0_137985 = ((int32_t *) mem_param_138550.mem)[slice_137984];
                                            bool defunc_0_leq_res_137986 = sle32(leq_arg0_137985, leq_arg1_137979);
                                            
                                            cond_f_res_137049 = defunc_0_leq_res_137986;
                                        } else {
                                            cond_f_res_137049 = 0;
                                        }
                                        cond_137047 = cond_f_res_137049;
                                    }
                                    
                                    int64_t loopres_137064;
                                    int32_t loopres_137065;
                                    int64_t loopres_137066;
                                    
                                    if (cond_137047) {
                                        bool x_137988 = sle64((int64_t) 0, i_137042);
                                        bool y_137989 = slt64(i_137042, j_m_i_137011);
                                        bool bounds_check_137990 = x_137988 && y_137989;
                                        bool index_certs_137991;
                                        
                                        if (!bounds_check_137990) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t tmp_137987 = add64((int64_t) 1, i_137042);
                                        int64_t slice_137992 = defunc_0_f_res_136987 + i_137042;
                                        int64_t slice_137993 = start_136806 + slice_137992;
                                        int32_t tmp_137994 = ((int32_t *) mem_param_138550.mem)[slice_137993];
                                        int64_t tmp_137995 = ((int64_t *) mem_param_138553.mem)[slice_137993];
                                        
                                        loopres_137064 = tmp_137987;
                                        loopres_137065 = tmp_137994;
                                        loopres_137066 = tmp_137995;
                                    } else {
                                        bool x_137076 = sle64((int64_t) 0, j_137045);
                                        bool y_137077 = slt64(j_137045, j_m_i_136998);
                                        bool bounds_check_137078 = x_137076 && y_137077;
                                        bool index_certs_137079;
                                        
                                        if (!bounds_check_137078) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137080 = merge_sequential_arg2_136996 + j_137045;
                                        int64_t slice_137081 = start_136806 + slice_137080;
                                        int32_t tmp_137082 = ((int32_t *) mem_param_138550.mem)[slice_137081];
                                        int64_t tmp_137083 = ((int64_t *) mem_param_138553.mem)[slice_137081];
                                        
                                        loopres_137064 = i_137042;
                                        loopres_137065 = tmp_137082;
                                        loopres_137066 = tmp_137083;
                                    }
                                    ((int32_t *) mem_138586)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137065;
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137066;
                                    
                                    int64_t i_tmp_139351 = loopres_137064;
                                    
                                    i_137042 = i_tmp_139351;
                                }
                                data_137038 = i_137042;
                            }
                            if (memblock_alloc(ctx, &mem_138624, bytes_138585, "mem_138624")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_4b(ctx, 2, (uint32_t *) mem_138624.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint32_t *) mem_138586, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_alloc(ctx, &mem_138628, bytes_138588, "mem_138628")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138628.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138589, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138624, "mem_138624") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138628, "mem_138628") != 0)
                                return 1;
                        }
                        lmad_copy_4b(ctx, 1, (uint32_t *) mem_138556, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138651.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
                            return 1;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138559, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
                            return 1;
                    }
                    
                    int64_t flat_dim_137090 = next_stride_136735 * num_merges_136739;
                    
                    if (memblock_alloc(ctx, &mem_138662, bytes_138555, "mem_138662")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_138662.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint32_t *) mem_138556, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    if (memblock_alloc(ctx, &mem_138666, bytes_138558, "mem_138666")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138666.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138559, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    
                    bool loop_cond_137093 = slt64(next_stride_136735, flat_dim_136605);
                    
                    if (memblock_set(ctx, &mem_param_tmp_139325, &mem_138662, "mem_138662") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_tmp_139326, &mem_138666, "mem_138666") != 0)
                        return 1;
                    
                    int64_t loop_dz2084Uz2082U_tmp_139327 = flat_dim_137090;
                    bool loop_while_tmp_139328 = loop_cond_137093;
                    int64_t stride_tmp_139331 = next_stride_136735;
                    
                    if (memblock_set(ctx, &mem_param_138550, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_138553, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
                        return 1;
                    loop_dz2084Uz2082U_136730 = loop_dz2084Uz2082U_tmp_139327;
                    loop_while_136731 = loop_while_tmp_139328;
                    stride_136734 = stride_tmp_139331;
                }
                if (memblock_set(ctx, &ext_mem_138673, &mem_param_138550, "mem_param_138550") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_138672, &mem_param_138553, "mem_param_138553") != 0)
                    return 1;
                data_136725 = loop_dz2084Uz2082U_136730;
                data_136726 = loop_while_136731;
                data_136729 = stride_136734;
                if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
                    return 1;
                
                bool empty_slice_137094 = dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 == (int64_t) 0;
                bool zzero_leq_i_p_m_t_s_137095 = sle64((int64_t) 0, zs_lhs_136589);
                bool i_p_m_t_s_leq_w_137096 = slt64(zs_lhs_136589, data_136725);
                bool y_137097 = zzero_leq_i_p_m_t_s_137095 && i_p_m_t_s_leq_w_137096;
                bool ok_or_empty_137098 = empty_slice_137094 || y_137097;
                bool index_certs_137099;
                
                if (!ok_or_empty_137098) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] out of bounds for array of shape [", (long long) data_136725, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:281:82-85\n   #7  ftsort.fut:275:1-281:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_138676, &ext_mem_138672, "ext_mem_138672") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
                return 1;
            for (int64_t i_138257 = 0; i_138257 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138257++) {
                int64_t eta_p_137104 = ((int64_t *) ext_mem_138676.mem)[i_138257];
                bool x_137105 = sle64((int64_t) 0, eta_p_137104);
                bool y_137106 = slt64(eta_p_137104, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                bool bounds_check_137107 = x_137105 && y_137106;
                bool index_certs_137108;
                
                if (!bounds_check_137107) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137104, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool index_concat_cmp_137109 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, eta_p_137104);
                int64_t index_concat_branch_137110 = btoi_bool_i64(index_concat_cmp_137109);
                int64_t index_concat_branch_137111;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138006 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t index_primexp_138007 = add64(defunc_0_f_res_136532, index_concat_i_138006);
                    
                    index_concat_branch_137111 = index_primexp_138007;
                } else {
                    int64_t index_primexp_137114 = add64(defunc_0_f_res_136531, eta_p_137104);
                    
                    index_concat_branch_137111 = index_primexp_137114;
                }
                
                int32_t index_concat_branch_137115;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138008 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t slice_138009 = defunc_0_f_res_136532 + index_concat_i_138008;
                    int64_t slice_138010 = p_136403 + slice_138009;
                    int32_t index_concat_138011 = ((int32_t *) b_list_mem_138404.mem)[slice_138010];
                    
                    index_concat_branch_137115 = index_concat_138011;
                } else {
                    int64_t slice_137120 = defunc_0_f_res_136531 + eta_p_137104;
                    int64_t slice_137121 = p_136402 + slice_137120;
                    int32_t index_concat_137122 = ((int32_t *) a_list_mem_138403.mem)[slice_137121];
                    
                    index_concat_branch_137115 = index_concat_137122;
                }
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137110;
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137111;
                ((int32_t *) mem_138447)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137115;
            }
            if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
                return 1;
            for (int64_t i_138263 = 0; i_138263 < perThread_136439; i_138263++) {
                int64_t lifted_lambda_res_137141 = add64(zm_rhs_136550, i_138263);
                
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + i_138263] = lifted_lambda_res_137141;
            }
            
            bool cond_137142 = card_136551 == zp_rhs_136438;
            
            if (cond_137142) {
                bool y_138012 = slt64(card_136551, perThread_136439);
                bool index_certs_138013;
                
                if (!y_138012) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:199:46-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:281:82-85\n   #3  ftsort.fut:275:1-281:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + card_136551] = (int64_t) -1;
            }
        }
        for (int64_t nest_i_139358 = 0; nest_i_139358 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139358++) {
            ((int32_t *) mem_138410.mem)[lb_merge_136409 + nest_i_139358] = 0;
        }
        if (mem_138728_cached_sizze_139560 < bytes_138727) {
            err = lexical_realloc(ctx, &mem_138728, &mem_138728_cached_sizze_139560, bytes_138727);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_139359 = 0; nest_i_139359 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139359++) {
            ((int64_t *) mem_138728)[nest_i_139359] = (int64_t) -1;
        }
        for (int64_t nest_i_139360 = 0; nest_i_139360 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139360++) {
            ((int64_t *) mem_138406.mem)[lb_merge_136409 + nest_i_139360] = (int64_t) -1;
        }
        for (int64_t write_iter_138278 = 0; write_iter_138278 < dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440; write_iter_138278++) {
            int64_t new_index_138359 = squot64(write_iter_138278, perThread_136439);
            int64_t binop_y_138361 = perThread_136439 * new_index_138359;
            int64_t new_index_138362 = write_iter_138278 - binop_y_138361;
            int64_t write_iv_138282 = ((int64_t *) mem_138438)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138283 = ((int64_t *) mem_138441)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138284 = ((int64_t *) mem_138444)[new_index_138359 * perThread_136439 + new_index_138362];
            int32_t write_iv_138285 = ((int32_t *) mem_138447)[new_index_138359 * perThread_136439 + new_index_138362];
            
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138406.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138283;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138728)[write_iv_138282] = write_iv_138284;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int32_t *) mem_138410.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138285;
            }
        }
        
        int64_t defunc_0_mergeFunc_par_res_137151 = ((int64_t *) mem_138421)[tmp_136386];
        int64_t defunc_0_mergeFunc_par_res_137152 = ((int64_t *) mem_138423)[tmp_136386];
        
        for (int64_t i_138291 = 0; i_138291 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; i_138291++) {
            int64_t eta_p_137164 = ((int64_t *) mem_138406.mem)[lb_merge_136409 + i_138291];
            int64_t eta_p_137165 = ((int64_t *) mem_138728)[i_138291];
            bool cond_137166 = eta_p_137164 == (int64_t) 0;
            int64_t lifted_lambda_res_137167;
            
            if (cond_137166) {
                int64_t tmp_138019 = add64(p_136402, eta_p_137165);
                
                lifted_lambda_res_137167 = tmp_138019;
            } else {
                bool cond_137169 = eta_p_137164 == (int64_t) 1;
                int64_t lifted_lambda_res_f_res_137170;
                
                if (cond_137169) {
                    int64_t tmp_138020 = add64(p_136403, eta_p_137165);
                    
                    lifted_lambda_res_f_res_137170 = tmp_138020;
                } else {
                    lifted_lambda_res_f_res_137170 = eta_p_137165;
                }
                lifted_lambda_res_137167 = lifted_lambda_res_f_res_137170;
            }
            ((int64_t *) mem_138408.mem)[lb_merge_136409 + i_138291] = lifted_lambda_res_137167;
        }
        
        int64_t corrected_ubs_137174 = add64(p_136402, defunc_0_mergeFunc_par_res_137151);
        int64_t corrected_ubs_137175 = add64(p_136403, defunc_0_mergeFunc_par_res_137152);
        bool cond_137194 = slt64(corrected_ubs_137174, zl_rhs_136372);
        bool loop_cond_f_res_137195 = slt64(corrected_ubs_137175, zl_rhs_136374);
        bool x_137196 = !cond_137194;
        bool y_137197 = loop_cond_f_res_137195 && x_137196;
        bool loop_cond_137198 = cond_137194 || y_137197;
        bool loop_while_tmp_139288 = loop_cond_137198;
        int64_t p_tmp_139292 = corrected_ubs_137174;
        int64_t p_tmp_139293 = corrected_ubs_137175;
        
        loop_while_136398 = loop_while_tmp_139288;
        p_136402 = p_tmp_139292;
        p_136403 = p_tmp_139293;
    }
    defunc_0_merge_pipeline_res_136392 = loop_while_136398;
    defunc_0_merge_pipeline_res_136396 = p_136402;
    defunc_0_merge_pipeline_res_136397 = p_136403;
    
    int64_t dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 = sub64(na_105156, defunc_0_merge_pipeline_res_136396);
    int64_t arg_137200 = add64(defunc_0_merge_pipeline_res_136396, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 = sub64(dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, arg_137200);
    int64_t dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 = sub64(nb_105157, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 = add64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202);
    bool empty_slice_137204 = dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 == (int64_t) 0;
    int64_t m_137205 = sub64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 1);
    int64_t i_p_m_t_s_137206 = add64(defunc_0_merge_pipeline_res_136396, m_137205);
    bool zzero_leq_i_p_m_t_s_137207 = sle64((int64_t) 0, i_p_m_t_s_137206);
    bool i_p_m_t_s_leq_w_137208 = slt64(i_p_m_t_s_137206, na_105156);
    bool zzero_lte_i_137209 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136396);
    bool i_lte_j_137210 = sle64(defunc_0_merge_pipeline_res_136396, na_105156);
    bool y_137211 = i_p_m_t_s_leq_w_137208 && zzero_lte_i_137209;
    bool y_137212 = zzero_leq_i_p_m_t_s_137207 && y_137211;
    bool forwards_ok_137213 = i_lte_j_137210 && y_137212;
    bool ok_or_empty_137214 = empty_slice_137204 || forwards_ok_137213;
    bool index_certs_137215;
    
    if (!ok_or_empty_137214) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136396, ":", (long long) na_105156, "] out of bounds for array of shape [", (long long) na_105156, "].", "-> #0  ftsort.fut:256:57-73\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137216 = slt64(na_105156, defunc_0_merge_pipeline_res_136396);
    bool valid_137217 = !bounds_invalid_upwards_137216;
    bool range_valid_c_137218;
    
    if (!valid_137217) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136396, "..<", (long long) na_105156, " is invalid.", "-> #0  ftsort.fut:256:45-55\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137220 = dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 == (int64_t) 0;
    int64_t m_137221 = sub64(dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202, (int64_t) 1);
    int64_t i_p_m_t_s_137222 = add64(defunc_0_merge_pipeline_res_136397, m_137221);
    bool zzero_leq_i_p_m_t_s_137223 = sle64((int64_t) 0, i_p_m_t_s_137222);
    bool i_p_m_t_s_leq_w_137224 = slt64(i_p_m_t_s_137222, nb_105157);
    bool zzero_lte_i_137225 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136397);
    bool i_lte_j_137226 = sle64(defunc_0_merge_pipeline_res_136397, nb_105157);
    bool y_137227 = i_p_m_t_s_leq_w_137224 && zzero_lte_i_137225;
    bool y_137228 = zzero_leq_i_p_m_t_s_137223 && y_137227;
    bool forwards_ok_137229 = i_lte_j_137226 && y_137228;
    bool ok_or_empty_137230 = empty_slice_137220 || forwards_ok_137229;
    bool index_certs_137231;
    
    if (!ok_or_empty_137230) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136397, ":", (long long) nb_105157, "] out of bounds for array of shape [", (long long) nb_105157, "].", "-> #0  ftsort.fut:257:57-73\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137232 = slt64(nb_105157, defunc_0_merge_pipeline_res_136397);
    bool valid_137233 = !bounds_invalid_upwards_137232;
    bool range_valid_c_137234;
    
    if (!valid_137233) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136397, "..<", (long long) nb_105157, " is invalid.", "-> #0  ftsort.fut:257:45-55\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138766 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool cond_137238 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zs_lhs_137239 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zp_rhs_137240 = sdiv_safe64(zs_lhs_137239, (int64_t) 20);
    int64_t min_num_blocks_137241 = add64((int64_t) 1, zp_rhs_137240);
    bool loop_cond_137242 = slt64((int64_t) 1, min_num_blocks_137241);
    bool smallest_pow_2_geq_than_res_137243;
    int64_t smallest_pow_2_geq_than_res_137244;
    bool loop_while_137245;
    int64_t x_137246;
    
    loop_while_137245 = loop_cond_137242;
    x_137246 = (int64_t) 1;
    while (loop_while_137245) {
        int64_t loopres_137247 = mul64((int64_t) 2, x_137246);
        bool loop_cond_137248 = slt64(loopres_137247, min_num_blocks_137241);
        bool loop_while_tmp_139365 = loop_cond_137248;
        int64_t x_tmp_139366 = loopres_137247;
        
        loop_while_137245 = loop_while_tmp_139365;
        x_137246 = x_tmp_139366;
    }
    smallest_pow_2_geq_than_res_137243 = loop_while_137245;
    smallest_pow_2_geq_than_res_137244 = x_137246;
    
    bool zzero_137249 = smallest_pow_2_geq_than_res_137244 == (int64_t) 0;
    bool nonzzero_137250 = !zzero_137249;
    bool protect_assert_disj_137251 = cond_137238 || nonzzero_137250;
    bool nonzzero_cert_137252;
    
    if (!protect_assert_disj_137251) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:281:82-85\n   #5  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_137253 = sdiv_safe64(zs_lhs_137239, smallest_pow_2_geq_than_res_137244);
    int64_t block_sizze_137254 = add64((int64_t) 1, zp_rhs_137253);
    bool y_137259 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
    bool protect_assert_disj_139025 = cond_137238 || y_137259;
    bool index_certs_137260;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:281:82-85\n   #5  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137278 = slt64(smallest_pow_2_geq_than_res_137244, (int64_t) 0);
    bool valid_137279 = !bounds_invalid_upwards_137278;
    bool protect_assert_disj_139033 = cond_137238 || valid_137279;
    bool range_valid_c_137280;
    
    if (!protect_assert_disj_139033) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_137244, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137282 = slt64(block_sizze_137254, (int64_t) 0);
    bool valid_137283 = !bounds_invalid_upwards_137282;
    bool protect_assert_disj_139035 = cond_137238 || valid_137283;
    bool range_valid_c_137284;
    
    if (!protect_assert_disj_139035) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_137254, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_137286 = sle64(block_sizze_137254, (int64_t) 1);
    int64_t tmp_137287 = sub64(block_sizze_137254, (int64_t) 2);
    bool bounds_invalid_upwards_137288 = slt64(tmp_137287, (int64_t) 0);
    bool valid_137290 = !bounds_invalid_upwards_137288;
    bool protect_assert_disj_137291 = cond_137286 || valid_137290;
    bool protect_assert_disj_139037 = cond_137238 || protect_assert_disj_137291;
    bool range_valid_c_137292;
    
    if (!protect_assert_disj_139037) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_137287, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_137768 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool empty_or_match_cert_137769;
    
    if (!dim_match_137768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] cannot match shape of type `[", (long long) dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, "](i64, i64, i32)`.", "-> #0  ftsort.fut:258:20-259:95\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137770 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == (int64_t) 0;
    int64_t m_137771 = sub64(dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, (int64_t) 1);
    int64_t i_p_m_t_s_137772 = add64(arg_137200, m_137771);
    bool zzero_leq_i_p_m_t_s_137773 = sle64((int64_t) 0, i_p_m_t_s_137772);
    bool i_p_m_t_s_leq_w_137774 = slt64(i_p_m_t_s_137772, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool zzero_lte_i_137775 = sle64((int64_t) 0, arg_137200);
    bool i_lte_j_137776 = sle64(arg_137200, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool y_137777 = i_p_m_t_s_leq_w_137774 && zzero_lte_i_137775;
    bool y_137778 = zzero_leq_i_p_m_t_s_137773 && y_137777;
    bool forwards_ok_137779 = i_lte_j_137776 && y_137778;
    bool ok_or_empty_137780 = empty_slice_137770 || forwards_ok_137779;
    bool index_certs_137781;
    
    if (!ok_or_empty_137780) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_137200, ":", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:260:21-79\n   #1  ftsort.fut:281:82-85\n   #2  ftsort.fut:275:1-281:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138767, bytes_138766, "mem_138767")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_139367++) {
        int64_t x_139368 = (int64_t) 0 + i_139367 * (int64_t) 1;
        
        ((int64_t *) mem_138767.mem)[i_139367] = x_139368;
    }
    
    int64_t flat_dim_137255 = smallest_pow_2_geq_than_res_137244 * block_sizze_137254;
    bool x_139020 = !cond_137238;
    int64_t greatest_divisor_leq_than_arg1_137257 = mul64((int64_t) 2, block_sizze_137254);
    int64_t merge_block_sizze_137258;
    
    if (x_139020) {
        int64_t x_139022;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139022, (int64_t) 8, greatest_divisor_leq_than_arg1_137257) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_137258 = x_139022;
    } else {
        merge_block_sizze_137258 = (int64_t) 0;
    }
    
    bool index_concat_cmp_137261 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 0);
    bool x_139016 = !index_concat_cmp_137261;
    bool protect_cond_conj_139026 = x_139016 && x_139020;
    int32_t index_concat_137266;
    
    if (protect_cond_conj_139026) {
        int32_t x_139018 = ((int32_t *) a_list_mem_138403.mem)[defunc_0_merge_pipeline_res_136396];
        
        index_concat_137266 = x_139018;
    } else {
        index_concat_137266 = 0;
    }
    
    int64_t index_concat_i_138035 = sub64((int64_t) 0, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
    int64_t slice_138036 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138035;
    bool protect_cond_conj_139027 = index_concat_cmp_137261 && x_139020;
    int32_t index_concat_138037;
    
    if (protect_cond_conj_139027) {
        int32_t x_139014 = ((int32_t *) b_list_mem_138404.mem)[slice_138036];
        
        index_concat_138037 = x_139014;
    } else {
        index_concat_138037 = 0;
    }
    
    int32_t index_concat_branch_137262;
    
    if (index_concat_cmp_137261) {
        index_concat_branch_137262 = index_concat_138037;
    } else {
        index_concat_branch_137262 = index_concat_137266;
    }
    
    int32_t defunc_0_reduce_res_138194;
    int64_t defunc_0_reduce_res_138195;
    
    if (x_139020) {
        int32_t x_139028;
        int64_t x_139029;
        int32_t redout_138293;
        int64_t redout_138294;
        
        redout_138293 = index_concat_branch_137262;
        redout_138294 = (int64_t) 0;
        for (int64_t i_138295 = 0; i_138295 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138295++) {
            bool index_concat_cmp_138354 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, i_138295);
            int32_t index_concat_branch_138358;
            
            if (index_concat_cmp_138354) {
                int64_t index_concat_i_138355 = sub64(i_138295, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                int64_t slice_138399 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138355;
                int32_t index_concat_138356 = ((int32_t *) b_list_mem_138404.mem)[slice_138399];
                
                index_concat_branch_138358 = index_concat_138356;
            } else {
                int64_t slice_138400 = defunc_0_merge_pipeline_res_136396 + i_138295;
                int32_t index_concat_138357 = ((int32_t *) a_list_mem_138403.mem)[slice_138400];
                
                index_concat_branch_138358 = index_concat_138357;
            }
            
            bool defunc_0_leq_res_137275 = sle32(redout_138293, index_concat_branch_138358);
            int32_t defunc_0_op_res_137276;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137276 = index_concat_branch_138358;
            } else {
                defunc_0_op_res_137276 = redout_138293;
            }
            
            int64_t defunc_0_op_res_137277;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137277 = i_138295;
            } else {
                defunc_0_op_res_137277 = redout_138294;
            }
            
            int32_t redout_tmp_139369 = defunc_0_op_res_137276;
            int64_t redout_tmp_139370 = defunc_0_op_res_137277;
            
            redout_138293 = redout_tmp_139369;
            redout_138294 = redout_tmp_139370;
        }
        x_139028 = redout_138293;
        x_139029 = redout_138294;
        defunc_0_reduce_res_138194 = x_139028;
        defunc_0_reduce_res_138195 = x_139029;
    } else {
        defunc_0_reduce_res_138194 = 0;
        defunc_0_reduce_res_138195 = (int64_t) 0;
    }
    
    int64_t distance_137289 = add64((int64_t) 1, tmp_137287);
    int64_t binop_x_138768 = (int64_t) 4 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138769 = block_sizze_137254 * binop_x_138768;
    int64_t binop_x_138771 = (int64_t) 8 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138772 = block_sizze_137254 * binop_x_138771;
    int64_t bytes_138782 = (int64_t) 4 * block_sizze_137254;
    int64_t bytes_138784 = (int64_t) 8 * block_sizze_137254;
    bool loop_cond_137369 = slt64(block_sizze_137254, flat_dim_137255);
    bool zzero_137370 = merge_block_sizze_137258 == (int64_t) 0;
    bool nonzzero_137371 = !zzero_137370;
    
    if (cond_137238) {
        if (memblock_set(ctx, &ext_mem_138972, &mem_138767, "mem_138767") != 0)
            return 1;
    } else {
        if (mem_138770_cached_sizze_139561 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138770, &mem_138770_cached_sizze_139561, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138773_cached_sizze_139562 < bytes_138772) {
            err = lexical_realloc(ctx, &mem_138773, &mem_138773_cached_sizze_139562, bytes_138772);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138783_cached_sizze_139563 < bytes_138782) {
            err = lexical_realloc(ctx, &mem_138783, &mem_138783_cached_sizze_139563, bytes_138782);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138785_cached_sizze_139564 < bytes_138784) {
            err = lexical_realloc(ctx, &mem_138785, &mem_138785_cached_sizze_139564, bytes_138784);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138307 = 0; i_138307 < smallest_pow_2_geq_than_res_137244; i_138307++) {
            int64_t zp_lhs_137296 = mul64(block_sizze_137254, i_138307);
            
            for (int64_t i_138300 = 0; i_138300 < block_sizze_137254; i_138300++) {
                int64_t k_137300 = add64(zp_lhs_137296, i_138300);
                bool cond_137301 = slt64(k_137300, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
                int32_t lifted_lambda_res_137302;
                int64_t lifted_lambda_res_137303;
                
                if (cond_137301) {
                    bool x_138041 = sle64((int64_t) 0, k_137300);
                    bool bounds_check_138042 = cond_137301 && x_138041;
                    bool index_certs_138043;
                    
                    if (!bounds_check_138042) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_137300, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool index_concat_cmp_138044 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, k_137300);
                    int32_t index_concat_branch_138045;
                    
                    if (index_concat_cmp_138044) {
                        int64_t index_concat_i_138046 = sub64(k_137300, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                        int64_t slice_138047 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138046;
                        int32_t index_concat_138048 = ((int32_t *) b_list_mem_138404.mem)[slice_138047];
                        
                        index_concat_branch_138045 = index_concat_138048;
                    } else {
                        int64_t slice_138049 = defunc_0_merge_pipeline_res_136396 + k_137300;
                        int32_t index_concat_138050 = ((int32_t *) a_list_mem_138403.mem)[slice_138049];
                        
                        index_concat_branch_138045 = index_concat_138050;
                    }
                    lifted_lambda_res_137302 = index_concat_branch_138045;
                    lifted_lambda_res_137303 = k_137300;
                } else {
                    lifted_lambda_res_137302 = defunc_0_reduce_res_138194;
                    lifted_lambda_res_137303 = defunc_0_reduce_res_138195;
                }
                ((int32_t *) mem_138783)[i_138300] = lifted_lambda_res_137302;
                ((int64_t *) mem_138785)[i_138300] = lifted_lambda_res_137303;
            }
            if (!cond_137286) {
                for (int64_t i_137318 = 0; i_137318 < distance_137289; i_137318++) {
                    int64_t gt_arg1_137321 = add64((int64_t) 1, i_137318);
                    bool x_137322 = sle64((int64_t) 0, gt_arg1_137321);
                    bool y_137323 = slt64(gt_arg1_137321, block_sizze_137254);
                    bool bounds_check_137324 = x_137322 && y_137323;
                    bool index_certs_137325;
                    
                    if (!bounds_check_137324) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_137321, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_137327 = slt64(i_137318, block_sizze_137254);
                    bool index_certs_137328;
                    
                    if (!y_137327) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137318, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int32_t gt_arg1_137326 = ((int32_t *) mem_138783)[gt_arg1_137321];
                    int32_t gt_arg0_137329 = ((int32_t *) mem_138783)[i_137318];
                    bool defunc_0_leq_res_137330 = sle32(gt_arg0_137329, gt_arg1_137326);
                    bool defunc_0_lifted_gt_res_137331 = !defunc_0_leq_res_137330;
                    bool s_137332;
                    int64_t s_137335;
                    bool loop_while_137336;
                    int64_t j_137339;
                    
                    loop_while_137336 = defunc_0_lifted_gt_res_137331;
                    j_137339 = i_137318;
                    while (loop_while_137336) {
                        bool x_137340 = sle64((int64_t) 0, j_137339);
                        bool y_137341 = slt64(j_137339, block_sizze_137254);
                        bool bounds_check_137342 = x_137340 && y_137341;
                        bool index_certs_137343;
                        
                        if (!bounds_check_137342) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137339, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_137346 = add64((int64_t) 1, j_137339);
                        bool x_137347 = sle64((int64_t) 0, copy_arg0_137346);
                        bool y_137348 = slt64(copy_arg0_137346, block_sizze_137254);
                        bool bounds_check_137349 = x_137347 && y_137348;
                        bool index_certs_137350;
                        
                        if (!bounds_check_137349) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_137346, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int32_t copy_arg0_137344 = ((int32_t *) mem_138783)[j_137339];
                        int64_t copy_arg0_137345 = ((int64_t *) mem_138785)[j_137339];
                        int32_t copy_arg0_137351 = ((int32_t *) mem_138783)[copy_arg0_137346];
                        int64_t copy_arg0_137352 = ((int64_t *) mem_138785)[copy_arg0_137346];
                        
                        ((int32_t *) mem_138783)[j_137339] = copy_arg0_137351;
                        ((int64_t *) mem_138785)[j_137339] = copy_arg0_137352;
                        ((int32_t *) mem_138783)[copy_arg0_137346] = copy_arg0_137344;
                        ((int64_t *) mem_138785)[copy_arg0_137346] = copy_arg0_137345;
                        
                        int64_t tmp_137357 = sub64(j_137339, (int64_t) 1);
                        bool cond_137358 = sle64((int64_t) 0, tmp_137357);
                        bool loop_cond_137359;
                        
                        if (cond_137358) {
                            bool y_138052 = slt64(tmp_137357, block_sizze_137254);
                            bool bounds_check_138053 = cond_137358 && y_138052;
                            bool index_certs_138054;
                            
                            if (!bounds_check_138053) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137357, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int32_t gt_arg1_138051 = ((int32_t *) mem_138783)[j_137339];
                            int32_t gt_arg0_138055 = ((int32_t *) mem_138783)[tmp_137357];
                            bool defunc_0_leq_res_138056 = sle32(gt_arg0_138055, gt_arg1_138051);
                            bool defunc_0_lifted_gt_res_138057 = !defunc_0_leq_res_138056;
                            
                            loop_cond_137359 = defunc_0_lifted_gt_res_138057;
                        } else {
                            loop_cond_137359 = 0;
                        }
                        
                        bool loop_while_tmp_139377 = loop_cond_137359;
                        int64_t j_tmp_139380 = tmp_137357;
                        
                        loop_while_137336 = loop_while_tmp_139377;
                        j_137339 = j_tmp_139380;
                    }
                    s_137332 = loop_while_137336;
                    s_137335 = j_137339;
                }
            }
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_138770, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138783, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138773, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138785, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
        }
        if (memblock_alloc(ctx, &mem_138838, bytes_138769, "mem_138838")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_4b(ctx, 2, (uint32_t *) mem_138838.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint32_t *) mem_138770, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        if (memblock_alloc(ctx, &mem_138842, bytes_138772, "mem_138842")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138842.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138773, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        
        int64_t data_137372;
        bool data_137373;
        int64_t data_137376;
        int64_t loop_dz2084Uz2082U_137377;
        bool loop_while_137378;
        int64_t stride_137381;
        
        if (memblock_set(ctx, &mem_param_138846, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138849, &mem_138842, "mem_138842") != 0)
            return 1;
        loop_dz2084Uz2082U_137377 = flat_dim_137255;
        loop_while_137378 = loop_cond_137369;
        stride_137381 = block_sizze_137254;
        while (loop_while_137378) {
            int64_t next_stride_137382 = mul64((int64_t) 2, stride_137381);
            bool zzero_137383 = next_stride_137382 == (int64_t) 0;
            bool nonzzero_137384 = !zzero_137383;
            bool nonzzero_cert_137385;
            
            if (!nonzzero_137384) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:281:82-85\n   #5  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_137386 = sdiv64(flat_dim_137255, next_stride_137382);
            bool bounds_invalid_upwards_137387 = slt64(num_merges_137386, (int64_t) 0);
            bool valid_137388 = !bounds_invalid_upwards_137387;
            bool range_valid_c_137389;
            
            if (!valid_137388) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_137386, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_137391 = sub64(next_stride_137382, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137392 = sle64((int64_t) 0, m_137391);
            bool cond_137394 = slt64(next_stride_137382, (int64_t) 10);
            bool protect_assert_disj_137395 = nonzzero_137371 || cond_137394;
            bool nonzzero_cert_137396;
            
            if (!protect_assert_disj_137395) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_137397 = smod_safe64(next_stride_137382, merge_block_sizze_137258);
            bool num_blocks_137398 = zeze_lhs_137397 == (int64_t) 0;
            bool protect_assert_disj_137399 = cond_137394 || num_blocks_137398;
            bool assert_c_137400;
            
            if (!protect_assert_disj_137399) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_137401 = sdiv_safe64(next_stride_137382, merge_block_sizze_137258);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402 = add64((int64_t) 1, num_blocks_137401);
            int64_t j_m_i_137403 = sub64(next_stride_137382, stride_137381);
            int64_t flat_dim_137404 = merge_block_sizze_137258 * num_blocks_137401;
            bool bounds_invalid_upwards_137405 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, (int64_t) 0);
            bool empty_slice_137406 = j_m_i_137403 == (int64_t) 0;
            int64_t m_137407 = sub64(j_m_i_137403, (int64_t) 1);
            bool zzero_lte_i_137408 = sle64((int64_t) 0, stride_137381);
            bool i_lte_j_137409 = sle64(stride_137381, next_stride_137382);
            bool empty_slice_137410 = stride_137381 == (int64_t) 0;
            int64_t m_137411 = sub64(stride_137381, (int64_t) 1);
            bool bounds_invalid_upwards_137412 = slt64(num_blocks_137401, (int64_t) 0);
            bool cond_137413 = slt64((int64_t) 0, stride_137381);
            bool valid_137414 = !bounds_invalid_upwards_137405;
            int64_t i_p_m_t_s_137415 = add64(stride_137381, m_137407);
            bool zzero_leq_i_p_m_t_s_137416 = sle64((int64_t) 0, m_137411);
            bool i_p_m_t_s_leq_w_137417 = slt64(m_137411, next_stride_137382);
            bool valid_137418 = !bounds_invalid_upwards_137412;
            bool i_p_m_t_s_leq_w_137419 = slt64(m_137391, flat_dim_137404);
            bool y_137420 = slt64((int64_t) 0, j_m_i_137403);
            bool protect_assert_disj_137421 = cond_137394 || valid_137414;
            bool range_valid_c_137422;
            
            if (!protect_assert_disj_137421) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_137423 = sle64((int64_t) 0, i_p_m_t_s_137415);
            bool i_p_m_t_s_leq_w_137424 = slt64(i_p_m_t_s_137415, next_stride_137382);
            bool y_137425 = zzero_leq_i_p_m_t_s_137416 && i_p_m_t_s_leq_w_137417;
            bool protect_assert_disj_137426 = cond_137394 || valid_137418;
            bool range_valid_c_137427;
            
            if (!protect_assert_disj_137426) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_137401, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_137428 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137419;
            bool y_137429 = zzero_lte_i_137408 && i_p_m_t_s_leq_w_137424;
            bool forwards_ok_137430 = zzero_lte_i_137408 && y_137425;
            bool ok_or_empty_137431 = zzero_137383 || y_137428;
            bool protect_assert_disj_137432 = cond_137413 || y_137420;
            bool y_137433 = zzero_leq_i_p_m_t_s_137423 && y_137429;
            bool ok_or_empty_137434 = empty_slice_137410 || forwards_ok_137430;
            bool protect_assert_disj_137435 = cond_137394 || ok_or_empty_137431;
            bool index_certs_137436;
            
            if (!protect_assert_disj_137435) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) flat_dim_137404, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_137437 = !cond_137394;
            bool protect_assert_disj_137438 = protect_assert_disj_137432 || loop_not_taken_137437;
            bool index_certs_137439;
            
            if (!protect_assert_disj_137438) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_137440 = i_lte_j_137409 && y_137433;
            bool protect_assert_disj_137441 = cond_137394 || ok_or_empty_137434;
            bool index_certs_137442;
            
            if (!protect_assert_disj_137441) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137443 = ok_or_empty_137434 || loop_not_taken_137437;
            bool index_certs_137444;
            
            if (!protect_assert_disj_137443) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_137445 = empty_slice_137406 || forwards_ok_137440;
            bool protect_assert_disj_137446 = cond_137394 || ok_or_empty_137445;
            bool index_certs_137447;
            
            if (!protect_assert_disj_137446) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137448 = loop_not_taken_137437 || ok_or_empty_137445;
            bool index_certs_137449;
            
            if (!protect_assert_disj_137448) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138850 = (int64_t) 4 * num_merges_137386;
            int64_t bytes_138851 = next_stride_137382 * binop_x_138850;
            int64_t binop_x_138853 = (int64_t) 8 * num_merges_137386;
            int64_t bytes_138854 = next_stride_137382 * binop_x_138853;
            bool i_lte_j_137393 = sle64((int64_t) 0, next_stride_137382);
            
            if (mem_138852_cached_sizze_139565 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138852, &mem_138852_cached_sizze_139565, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138855_cached_sizze_139566 < bytes_138854) {
                err = lexical_realloc(ctx, &mem_138855, &mem_138855_cached_sizze_139566, bytes_138854);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138864 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402;
            int64_t binop_x_138880 = (int64_t) 4 * num_blocks_137401;
            int64_t bytes_138881 = merge_block_sizze_137258 * binop_x_138880;
            int64_t binop_x_138883 = (int64_t) 8 * num_blocks_137401;
            int64_t bytes_138884 = merge_block_sizze_137258 * binop_x_138883;
            int64_t bytes_138926 = (int64_t) 8 * stride_137381;
            int64_t bytes_138928 = (int64_t) 16 * stride_137381;
            
            for (int64_t i_138328 = 0; i_138328 < num_merges_137386; i_138328++) {
                int64_t start_137453 = mul64(next_stride_137382, i_138328);
                int64_t j_m_i_137454 = sub64(loop_dz2084Uz2082U_137377, start_137453);
                bool empty_slice_137455 = j_m_i_137454 == (int64_t) 0;
                int64_t m_137456 = sub64(j_m_i_137454, (int64_t) 1);
                int64_t i_p_m_t_s_137457 = add64(start_137453, m_137456);
                bool zzero_leq_i_p_m_t_s_137458 = sle64((int64_t) 0, i_p_m_t_s_137457);
                bool i_p_m_t_s_leq_w_137459 = slt64(i_p_m_t_s_137457, loop_dz2084Uz2082U_137377);
                bool zzero_lte_i_137460 = sle64((int64_t) 0, start_137453);
                bool i_lte_j_137461 = sle64(start_137453, loop_dz2084Uz2082U_137377);
                bool y_137462 = i_p_m_t_s_leq_w_137459 && zzero_lte_i_137460;
                bool y_137463 = zzero_leq_i_p_m_t_s_137458 && y_137462;
                bool forwards_ok_137464 = i_lte_j_137461 && y_137463;
                bool ok_or_empty_137465 = empty_slice_137455 || forwards_ok_137464;
                bool index_certs_137466;
                
                if (!ok_or_empty_137465) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_137453, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_137377, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_137467 = slt64(m_137391, j_m_i_137454);
                bool y_137468 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137467;
                bool forwards_ok_137469 = i_lte_j_137393 && y_137468;
                bool ok_or_empty_137470 = zzero_137383 || forwards_ok_137469;
                bool index_certs_137471;
                
                if (!ok_or_empty_137470) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) j_m_i_137454, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:281:82-85\n   #8  ftsort.fut:275:1-281:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_137394) {
                    int32_t dummy_138083;
                    int64_t dummy_138084;
                    
                    if (cond_137413) {
                        int32_t head_res_138085 = ((int32_t *) mem_param_138846.mem)[start_137453];
                        int64_t head_res_138086 = ((int64_t *) mem_param_138849.mem)[start_137453];
                        
                        dummy_138083 = head_res_138085;
                        dummy_138084 = head_res_138086;
                    } else {
                        int64_t slice_138087 = stride_137381 + start_137453;
                        int32_t head_res_138088 = ((int32_t *) mem_param_138846.mem)[slice_138087];
                        int64_t head_res_138089 = ((int64_t *) mem_param_138849.mem)[slice_138087];
                        
                        dummy_138083 = head_res_138088;
                        dummy_138084 = head_res_138089;
                    }
                    if (memblock_alloc(ctx, &mem_138927, bytes_138926, "mem_138927")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139390 = 0; nest_i_139390 < next_stride_137382; nest_i_139390++) {
                        ((int32_t *) mem_138927.mem)[nest_i_139390] = dummy_138083;
                    }
                    if (memblock_alloc(ctx, &mem_138929, bytes_138928, "mem_138929")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139391 = 0; nest_i_139391 < next_stride_137382; nest_i_139391++) {
                        ((int64_t *) mem_138929.mem)[nest_i_139391] = dummy_138084;
                    }
                    
                    int64_t data_138092;
                    int64_t i_138096 = (int64_t) 0;
                    
                    for (int64_t k_138095 = 0; k_138095 < next_stride_137382; k_138095++) {
                        int64_t j_138099 = sub64(k_138095, i_138096);
                        bool cond_138100 = j_138099 == j_m_i_137403;
                        bool cond_138101;
                        
                        if (cond_138100) {
                            cond_138101 = 1;
                        } else {
                            bool cond_138102 = slt64(i_138096, stride_137381);
                            bool cond_f_res_138103;
                            
                            if (cond_138102) {
                                bool x_138104 = sle64((int64_t) 0, j_138099);
                                bool y_138105 = slt64(j_138099, j_m_i_137403);
                                bool bounds_check_138106 = x_138104 && y_138105;
                                bool index_certs_138107;
                                
                                if (!bounds_check_138106) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_138111 = sle64((int64_t) 0, i_138096);
                                bool bounds_check_138112 = cond_138102 && x_138111;
                                bool index_certs_138113;
                                
                                if (!bounds_check_138112) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_138108 = stride_137381 + j_138099;
                                int64_t slice_138109 = start_137453 + slice_138108;
                                int32_t leq_arg1_138110 = ((int32_t *) mem_param_138846.mem)[slice_138109];
                                int64_t slice_138114 = start_137453 + i_138096;
                                int32_t leq_arg0_138115 = ((int32_t *) mem_param_138846.mem)[slice_138114];
                                bool defunc_0_leq_res_138116 = sle32(leq_arg0_138115, leq_arg1_138110);
                                
                                cond_f_res_138103 = defunc_0_leq_res_138116;
                            } else {
                                cond_f_res_138103 = 0;
                            }
                            cond_138101 = cond_f_res_138103;
                        }
                        
                        int64_t loopres_138117;
                        int32_t loopres_138118;
                        int64_t loopres_138119;
                        
                        if (cond_138101) {
                            bool x_138121 = sle64((int64_t) 0, i_138096);
                            bool y_138122 = slt64(i_138096, stride_137381);
                            bool bounds_check_138123 = x_138121 && y_138122;
                            bool index_certs_138124;
                            
                            if (!bounds_check_138123) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_138120 = add64((int64_t) 1, i_138096);
                            int64_t slice_138125 = start_137453 + i_138096;
                            int32_t tmp_138126 = ((int32_t *) mem_param_138846.mem)[slice_138125];
                            int64_t tmp_138127 = ((int64_t *) mem_param_138849.mem)[slice_138125];
                            
                            loopres_138117 = tmp_138120;
                            loopres_138118 = tmp_138126;
                            loopres_138119 = tmp_138127;
                        } else {
                            bool x_138128 = sle64((int64_t) 0, j_138099);
                            bool y_138129 = slt64(j_138099, j_m_i_137403);
                            bool bounds_check_138130 = x_138128 && y_138129;
                            bool index_certs_138131;
                            
                            if (!bounds_check_138130) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:281:82-85\n   #9  ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138132 = stride_137381 + j_138099;
                            int64_t slice_138133 = start_137453 + slice_138132;
                            int32_t tmp_138134 = ((int32_t *) mem_param_138846.mem)[slice_138133];
                            int64_t tmp_138135 = ((int64_t *) mem_param_138849.mem)[slice_138133];
                            
                            loopres_138117 = i_138096;
                            loopres_138118 = tmp_138134;
                            loopres_138119 = tmp_138135;
                        }
                        ((int32_t *) mem_138927.mem)[k_138095] = loopres_138118;
                        ((int64_t *) mem_138929.mem)[k_138095] = loopres_138119;
                        
                        int64_t i_tmp_139392 = loopres_138117;
                        
                        i_138096 = i_tmp_139392;
                    }
                    data_138092 = i_138096;
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138927, "mem_138927") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138929, "mem_138929") != 0)
                        return 1;
                } else {
                    if (mem_138865_cached_sizze_139567 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138865, &mem_138865_cached_sizze_139567, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138867_cached_sizze_139568 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138867, &mem_138867_cached_sizze_139568, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138314 = 0; i_138314 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402; i_138314++) {
                        int64_t split_count_arg3_137533 = mul64(merge_block_sizze_137258, i_138314);
                        int64_t defunc_0_split_count_res_137534;
                        int64_t defunc_0_split_count_res_137535;
                        int64_t defunc_0_split_count_res_137536;
                        int64_t defunc_0_split_count_res_137537;
                        int64_t defunc_0_split_count_res_137538;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_137534, &defunc_0_split_count_res_137535, &defunc_0_split_count_res_137536, &defunc_0_split_count_res_137537, &defunc_0_split_count_res_137538, (int64_t) 0, stride_137381, (int64_t) 0, j_m_i_137403, split_count_arg3_137533) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_137539 = slt64((int64_t) 0, defunc_0_split_count_res_137538);
                        bool defunc_0_split_count_res_137540;
                        int64_t defunc_0_split_count_res_137541;
                        int64_t defunc_0_split_count_res_137542;
                        int64_t defunc_0_split_count_res_137543;
                        int64_t defunc_0_split_count_res_137544;
                        int64_t defunc_0_split_count_res_137545;
                        bool loop_while_137546;
                        int64_t ss_137547;
                        int64_t ss_137548;
                        int64_t tt_137549;
                        int64_t tt_137550;
                        int64_t count_137551;
                        
                        loop_while_137546 = loop_cond_137539;
                        ss_137547 = defunc_0_split_count_res_137534;
                        ss_137548 = defunc_0_split_count_res_137535;
                        tt_137549 = defunc_0_split_count_res_137536;
                        tt_137550 = defunc_0_split_count_res_137537;
                        count_137551 = defunc_0_split_count_res_137538;
                        while (loop_while_137546) {
                            int64_t zlze_lhs_137552 = sub64(ss_137548, ss_137547);
                            bool cond_137553 = sle64(zlze_lhs_137552, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_137554;
                            int64_t defunc_0_lifted_step_res_137555;
                            int64_t defunc_0_lifted_step_res_137556;
                            int64_t defunc_0_lifted_step_res_137557;
                            
                            if (cond_137553) {
                                int64_t tmp_138138 = add64(tt_137549, count_137551);
                                
                                defunc_0_lifted_step_res_137554 = ss_137547;
                                defunc_0_lifted_step_res_137555 = tmp_138138;
                                defunc_0_lifted_step_res_137556 = tt_137550;
                                defunc_0_lifted_step_res_137557 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_137559 = sub64(tt_137550, tt_137549);
                                bool cond_137560 = sle64(zlze_lhs_137559, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_137561;
                                int64_t defunc_0_lifted_step_res_f_res_137562;
                                int64_t defunc_0_lifted_step_res_f_res_137563;
                                int64_t defunc_0_lifted_step_res_f_res_137564;
                                
                                if (cond_137560) {
                                    int64_t tmp_138139 = add64(ss_137547, count_137551);
                                    
                                    defunc_0_lifted_step_res_f_res_137561 = tmp_138139;
                                    defunc_0_lifted_step_res_f_res_137562 = tt_137549;
                                    defunc_0_lifted_step_res_f_res_137563 = tt_137550;
                                    defunc_0_lifted_step_res_f_res_137564 = (int64_t) 0;
                                } else {
                                    bool cond_137566 = count_137551 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137567;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137568;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137569;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137570;
                                    
                                    if (cond_137566) {
                                        bool x_138141 = sle64((int64_t) 0, ss_137547);
                                        bool y_138142 = slt64(ss_137547, stride_137381);
                                        bool bounds_check_138143 = x_138141 && y_138142;
                                        bool index_certs_138144;
                                        
                                        if (!bounds_check_138143) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_137547, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:281:82-85\n   #13 ftsort.fut:275:1-281:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_138147 = sle64((int64_t) 0, tt_137549);
                                        bool y_138148 = slt64(tt_137549, j_m_i_137403);
                                        bool bounds_check_138149 = x_138147 && y_138148;
                                        bool index_certs_138150;
                                        
                                        if (!bounds_check_138149) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_137549, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:281:82-85\n   #13 ftsort.fut:275:1-281:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_138145 = start_137453 + ss_137547;
                                        int32_t leq_arg1_138146 = ((int32_t *) mem_param_138846.mem)[slice_138145];
                                        int64_t slice_138151 = stride_137381 + tt_137549;
                                        int64_t slice_138152 = start_137453 + slice_138151;
                                        int32_t leq_arg0_138153 = ((int32_t *) mem_param_138846.mem)[slice_138152];
                                        bool defunc_0_leq_res_138154 = sle32(leq_arg0_138153, leq_arg1_138146);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        
                                        if (defunc_0_leq_res_138154) {
                                            int64_t tmp_138157 = add64((int64_t) 1, tt_137549);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = ss_137547;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tmp_138157;
                                        } else {
                                            int64_t tmp_138158 = add64((int64_t) 1, ss_137547);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = tmp_138158;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tt_137549;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = tt_137550;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = (int64_t) 0;
                                    } else {
                                        int64_t m_137589 = sdiv64(count_137551, (int64_t) 2);
                                        int64_t n_137590 = sub64(count_137551, m_137589);
                                        bool cond_137591 = n_137590 == (int64_t) 0;
                                        int64_t zgze_lhs_137592 = add64(ss_137547, m_137589);
                                        bool cond_f_res_137593 = sle64(ss_137548, zgze_lhs_137592);
                                        bool x_137594 = !cond_137591;
                                        bool y_137595 = cond_f_res_137593 && x_137594;
                                        bool cond_137596 = cond_137591 || y_137595;
                                        bool leq_y_x_137597;
                                        
                                        if (cond_137596) {
                                            leq_y_x_137597 = 1;
                                        } else {
                                            bool x_137598 = sle64((int64_t) 0, zgze_lhs_137592);
                                            bool y_137599 = slt64(zgze_lhs_137592, stride_137381);
                                            bool bounds_check_137600 = x_137598 && y_137599;
                                            bool index_certs_137601;
                                            
                                            if (!bounds_check_137600) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_137592, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:281:82-85\n   #13 ftsort.fut:275:1-281:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_137604 = add64(tt_137549, n_137590);
                                            int64_t leq_arg0_137605 = sub64(zm_lhs_137604, (int64_t) 1);
                                            bool x_137606 = sle64((int64_t) 0, leq_arg0_137605);
                                            bool y_137607 = slt64(leq_arg0_137605, j_m_i_137403);
                                            bool bounds_check_137608 = x_137606 && y_137607;
                                            bool index_certs_137609;
                                            
                                            if (!bounds_check_137608) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_137605, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:281:82-85\n   #13 ftsort.fut:275:1-281:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137602 = start_137453 + zgze_lhs_137592;
                                            int32_t leq_arg1_137603 = ((int32_t *) mem_param_138846.mem)[slice_137602];
                                            int64_t slice_137610 = stride_137381 + leq_arg0_137605;
                                            int64_t slice_137611 = start_137453 + slice_137610;
                                            int32_t leq_arg0_137612 = ((int32_t *) mem_param_138846.mem)[slice_137611];
                                            bool defunc_0_leq_res_137613 = sle32(leq_arg0_137612, leq_arg1_137603);
                                            
                                            leq_y_x_137597 = defunc_0_leq_res_137613;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                        
                                        if (leq_y_x_137597) {
                                            int64_t tmp_138159 = add64(tt_137549, n_137590);
                                            int64_t tmp_138160 = sub64(count_137551, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tmp_138159;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tt_137550;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = tmp_138160;
                                        } else {
                                            int64_t tmp_137619 = add64(tt_137549, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tt_137549;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tmp_137619;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = count_137551;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = ss_137547;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                    }
                                    defunc_0_lifted_step_res_f_res_137561 = defunc_0_lifted_step_res_f_res_f_res_137567;
                                    defunc_0_lifted_step_res_f_res_137562 = defunc_0_lifted_step_res_f_res_f_res_137568;
                                    defunc_0_lifted_step_res_f_res_137563 = defunc_0_lifted_step_res_f_res_f_res_137569;
                                    defunc_0_lifted_step_res_f_res_137564 = defunc_0_lifted_step_res_f_res_f_res_137570;
                                }
                                defunc_0_lifted_step_res_137554 = defunc_0_lifted_step_res_f_res_137561;
                                defunc_0_lifted_step_res_137555 = defunc_0_lifted_step_res_f_res_137562;
                                defunc_0_lifted_step_res_137556 = defunc_0_lifted_step_res_f_res_137563;
                                defunc_0_lifted_step_res_137557 = defunc_0_lifted_step_res_f_res_137564;
                            }
                            
                            int64_t loopres_137620;
                            int64_t loopres_137621;
                            int64_t loopres_137622;
                            int64_t loopres_137623;
                            int64_t loopres_137624;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_137620, &loopres_137621, &loopres_137622, &loopres_137623, &loopres_137624, defunc_0_lifted_step_res_137554, ss_137548, defunc_0_lifted_step_res_137555, defunc_0_lifted_step_res_137556, defunc_0_lifted_step_res_137557) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_137625 = slt64((int64_t) 0, loopres_137624);
                            bool loop_while_tmp_139397 = loop_cond_137625;
                            int64_t ss_tmp_139398 = loopres_137620;
                            int64_t ss_tmp_139399 = loopres_137621;
                            int64_t tt_tmp_139400 = loopres_137622;
                            int64_t tt_tmp_139401 = loopres_137623;
                            int64_t count_tmp_139402 = loopres_137624;
                            
                            loop_while_137546 = loop_while_tmp_139397;
                            ss_137547 = ss_tmp_139398;
                            ss_137548 = ss_tmp_139399;
                            tt_137549 = tt_tmp_139400;
                            tt_137550 = tt_tmp_139401;
                            count_137551 = count_tmp_139402;
                        }
                        defunc_0_split_count_res_137540 = loop_while_137546;
                        defunc_0_split_count_res_137541 = ss_137547;
                        defunc_0_split_count_res_137542 = ss_137548;
                        defunc_0_split_count_res_137543 = tt_137549;
                        defunc_0_split_count_res_137544 = tt_137550;
                        defunc_0_split_count_res_137545 = count_137551;
                        ((int64_t *) mem_138865)[i_138314] = defunc_0_split_count_res_137541;
                        ((int64_t *) mem_138867)[i_138314] = defunc_0_split_count_res_137543;
                    }
                    if (mem_138882_cached_sizze_139569 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138882, &mem_138882_cached_sizze_139569, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138885_cached_sizze_139570 < bytes_138884) {
                        err = lexical_realloc(ctx, &mem_138885, &mem_138885_cached_sizze_139570, bytes_138884);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138321 = 0; i_138321 < num_blocks_137401; i_138321++) {
                        bool y_137631 = slt64(i_138321, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool index_certs_137633;
                        
                        if (!y_137631) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138321, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137634 = ((int64_t *) mem_138865)[i_138321];
                        int64_t defunc_0_f_res_137635 = ((int64_t *) mem_138867)[i_138321];
                        int64_t tmp_137636 = add64((int64_t) 1, i_138321);
                        bool x_137637 = sle64((int64_t) 0, tmp_137636);
                        bool y_137638 = slt64(tmp_137636, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool bounds_check_137639 = x_137637 && y_137638;
                        bool index_certs_137640;
                        
                        if (!bounds_check_137639) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137636, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137641 = ((int64_t *) mem_138865)[tmp_137636];
                        int64_t defunc_0_f_res_137642 = ((int64_t *) mem_138867)[tmp_137636];
                        int64_t merge_sequential_arg2_137643 = add64(stride_137381, defunc_0_f_res_137635);
                        int64_t merge_sequential_arg2_137644 = add64(stride_137381, defunc_0_f_res_137642);
                        int64_t j_m_i_137645 = sub64(merge_sequential_arg2_137644, merge_sequential_arg2_137643);
                        bool empty_slice_137646 = j_m_i_137645 == (int64_t) 0;
                        int64_t m_137647 = sub64(j_m_i_137645, (int64_t) 1);
                        int64_t i_p_m_t_s_137648 = add64(merge_sequential_arg2_137643, m_137647);
                        bool zzero_leq_i_p_m_t_s_137649 = sle64((int64_t) 0, i_p_m_t_s_137648);
                        bool i_p_m_t_s_leq_w_137650 = slt64(i_p_m_t_s_137648, next_stride_137382);
                        bool zzero_lte_i_137651 = sle64((int64_t) 0, merge_sequential_arg2_137643);
                        bool i_lte_j_137652 = sle64(merge_sequential_arg2_137643, merge_sequential_arg2_137644);
                        bool y_137653 = i_p_m_t_s_leq_w_137650 && zzero_lte_i_137651;
                        bool y_137654 = zzero_leq_i_p_m_t_s_137649 && y_137653;
                        bool forwards_ok_137655 = i_lte_j_137652 && y_137654;
                        bool ok_or_empty_137656 = empty_slice_137646 || forwards_ok_137655;
                        bool index_certs_137657;
                        
                        if (!ok_or_empty_137656) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_137643, ":", (long long) merge_sequential_arg2_137644, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_137658 = sub64(defunc_0_f_res_137641, defunc_0_f_res_137634);
                        bool empty_slice_137659 = j_m_i_137658 == (int64_t) 0;
                        int64_t m_137660 = sub64(j_m_i_137658, (int64_t) 1);
                        int64_t i_p_m_t_s_137661 = add64(defunc_0_f_res_137634, m_137660);
                        bool zzero_leq_i_p_m_t_s_137662 = sle64((int64_t) 0, i_p_m_t_s_137661);
                        bool i_p_m_t_s_leq_w_137663 = slt64(i_p_m_t_s_137661, next_stride_137382);
                        bool zzero_lte_i_137664 = sle64((int64_t) 0, defunc_0_f_res_137634);
                        bool i_lte_j_137665 = sle64(defunc_0_f_res_137634, defunc_0_f_res_137641);
                        bool y_137666 = i_p_m_t_s_leq_w_137663 && zzero_lte_i_137664;
                        bool y_137667 = zzero_leq_i_p_m_t_s_137662 && y_137666;
                        bool forwards_ok_137668 = i_lte_j_137665 && y_137667;
                        bool ok_or_empty_137669 = empty_slice_137659 || forwards_ok_137668;
                        bool index_certs_137670;
                        
                        if (!ok_or_empty_137669) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_137634, ":", (long long) defunc_0_f_res_137641, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:281:82-85\n   #10 ftsort.fut:275:1-281:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_137671 = slt64((int64_t) 0, j_m_i_137658);
                        int32_t dummy_137672;
                        int64_t dummy_137673;
                        
                        if (cond_137671) {
                            bool index_certs_138161;
                            
                            if (!cond_137671) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138162 = start_137453 + defunc_0_f_res_137634;
                            int32_t head_res_138163 = ((int32_t *) mem_param_138846.mem)[slice_138162];
                            int64_t head_res_138164 = ((int64_t *) mem_param_138849.mem)[slice_138162];
                            
                            dummy_137672 = head_res_138163;
                            dummy_137673 = head_res_138164;
                        } else {
                            bool y_137678 = slt64((int64_t) 0, j_m_i_137645);
                            bool index_certs_137679;
                            
                            if (!y_137678) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:281:82-85\n   #12 ftsort.fut:275:1-281:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137680 = start_137453 + merge_sequential_arg2_137643;
                            int32_t head_res_137681 = ((int32_t *) mem_param_138846.mem)[slice_137680];
                            int64_t head_res_137682 = ((int64_t *) mem_param_138849.mem)[slice_137680];
                            
                            dummy_137672 = head_res_137681;
                            dummy_137673 = head_res_137682;
                        }
                        for (int64_t nest_i_139405 = 0; nest_i_139405 < merge_block_sizze_137258; nest_i_139405++) {
                            ((int32_t *) mem_138882)[i_138321 * merge_block_sizze_137258 + nest_i_139405] = dummy_137672;
                        }
                        for (int64_t nest_i_139406 = 0; nest_i_139406 < merge_block_sizze_137258; nest_i_139406++) {
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + nest_i_139406] = dummy_137673;
                        }
                        
                        int64_t data_137685;
                        int64_t i_137689 = (int64_t) 0;
                        
                        for (int64_t k_137688 = 0; k_137688 < merge_block_sizze_137258; k_137688++) {
                            int64_t j_137692 = sub64(k_137688, i_137689);
                            bool cond_137693 = j_137692 == j_m_i_137645;
                            bool cond_137694;
                            
                            if (cond_137693) {
                                cond_137694 = 1;
                            } else {
                                bool cond_137695 = slt64(i_137689, j_m_i_137658);
                                bool cond_f_res_137696;
                                
                                if (cond_137695) {
                                    bool x_138165 = sle64((int64_t) 0, j_137692);
                                    bool y_138166 = slt64(j_137692, j_m_i_137645);
                                    bool bounds_check_138167 = x_138165 && y_138166;
                                    bool index_certs_138168;
                                    
                                    if (!bounds_check_138167) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_138172 = sle64((int64_t) 0, i_137689);
                                    bool bounds_check_138173 = cond_137695 && x_138172;
                                    bool index_certs_138174;
                                    
                                    if (!bounds_check_138173) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_138169 = merge_sequential_arg2_137643 + j_137692;
                                    int64_t slice_138170 = start_137453 + slice_138169;
                                    int32_t leq_arg1_138171 = ((int32_t *) mem_param_138846.mem)[slice_138170];
                                    int64_t slice_138175 = defunc_0_f_res_137634 + i_137689;
                                    int64_t slice_138176 = start_137453 + slice_138175;
                                    int32_t leq_arg0_138177 = ((int32_t *) mem_param_138846.mem)[slice_138176];
                                    bool defunc_0_leq_res_138178 = sle32(leq_arg0_138177, leq_arg1_138171);
                                    
                                    cond_f_res_137696 = defunc_0_leq_res_138178;
                                } else {
                                    cond_f_res_137696 = 0;
                                }
                                cond_137694 = cond_f_res_137696;
                            }
                            
                            int64_t loopres_137711;
                            int32_t loopres_137712;
                            int64_t loopres_137713;
                            
                            if (cond_137694) {
                                bool x_138180 = sle64((int64_t) 0, i_137689);
                                bool y_138181 = slt64(i_137689, j_m_i_137658);
                                bool bounds_check_138182 = x_138180 && y_138181;
                                bool index_certs_138183;
                                
                                if (!bounds_check_138182) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_138179 = add64((int64_t) 1, i_137689);
                                int64_t slice_138184 = defunc_0_f_res_137634 + i_137689;
                                int64_t slice_138185 = start_137453 + slice_138184;
                                int32_t tmp_138186 = ((int32_t *) mem_param_138846.mem)[slice_138185];
                                int64_t tmp_138187 = ((int64_t *) mem_param_138849.mem)[slice_138185];
                                
                                loopres_137711 = tmp_138179;
                                loopres_137712 = tmp_138186;
                                loopres_137713 = tmp_138187;
                            } else {
                                bool x_137723 = sle64((int64_t) 0, j_137692);
                                bool y_137724 = slt64(j_137692, j_m_i_137645);
                                bool bounds_check_137725 = x_137723 && y_137724;
                                bool index_certs_137726;
                                
                                if (!bounds_check_137725) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:281:82-85\n   #11 ftsort.fut:275:1-281:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137727 = merge_sequential_arg2_137643 + j_137692;
                                int64_t slice_137728 = start_137453 + slice_137727;
                                int32_t tmp_137729 = ((int32_t *) mem_param_138846.mem)[slice_137728];
                                int64_t tmp_137730 = ((int64_t *) mem_param_138849.mem)[slice_137728];
                                
                                loopres_137711 = i_137689;
                                loopres_137712 = tmp_137729;
                                loopres_137713 = tmp_137730;
                            }
                            ((int32_t *) mem_138882)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137712;
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137713;
                            
                            int64_t i_tmp_139407 = loopres_137711;
                            
                            i_137689 = i_tmp_139407;
                        }
                        data_137685 = i_137689;
                    }
                    if (memblock_alloc(ctx, &mem_138920, bytes_138881, "mem_138920")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_4b(ctx, 2, (uint32_t *) mem_138920.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint32_t *) mem_138882, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_alloc(ctx, &mem_138924, bytes_138884, "mem_138924")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138924.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138885, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138920, "mem_138920") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138924, "mem_138924") != 0)
                        return 1;
                }
                lmad_copy_4b(ctx, 1, (uint32_t *) mem_138852, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138947.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138855, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138944.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
                    return 1;
            }
            
            int64_t flat_dim_137737 = next_stride_137382 * num_merges_137386;
            
            if (memblock_alloc(ctx, &mem_138958, bytes_138851, "mem_138958")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_4b(ctx, 2, (uint32_t *) mem_138958.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint32_t *) mem_138852, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            if (memblock_alloc(ctx, &mem_138962, bytes_138854, "mem_138962")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138962.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138855, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            
            bool loop_cond_137740 = slt64(next_stride_137382, flat_dim_137255);
            
            if (memblock_set(ctx, &mem_param_tmp_139381, &mem_138958, "mem_138958") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139382, &mem_138962, "mem_138962") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139383 = flat_dim_137737;
            bool loop_while_tmp_139384 = loop_cond_137740;
            int64_t stride_tmp_139387 = next_stride_137382;
            
            if (memblock_set(ctx, &mem_param_138846, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138849, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
                return 1;
            loop_dz2084Uz2082U_137377 = loop_dz2084Uz2082U_tmp_139383;
            loop_while_137378 = loop_while_tmp_139384;
            stride_137381 = stride_tmp_139387;
        }
        if (memblock_set(ctx, &ext_mem_138969, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138968, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        data_137372 = loop_dz2084Uz2082U_137377;
        data_137373 = loop_while_137378;
        data_137376 = stride_137381;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        
        bool empty_slice_137741 = dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_137742 = sle64((int64_t) 0, zs_lhs_137239);
        bool i_p_m_t_s_leq_w_137743 = slt64(zs_lhs_137239, data_137372);
        bool y_137744 = zzero_leq_i_p_m_t_s_137742 && i_p_m_t_s_leq_w_137743;
        bool ok_or_empty_137745 = empty_slice_137741 || y_137744;
        bool index_certs_137746;
        
        if (!ok_or_empty_137745) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] out of bounds for array of shape [", (long long) data_137372, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:281:82-85\n   #6  ftsort.fut:275:1-281:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138972, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
        return 1;
    for (int64_t i_138337 = 0; i_138337 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138337++) {
        int64_t eta_p_137751 = ((int64_t *) ext_mem_138972.mem)[i_138337];
        bool x_137752 = sle64((int64_t) 0, eta_p_137751);
        bool y_137753 = slt64(eta_p_137751, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
        bool bounds_check_137754 = x_137752 && y_137753;
        bool index_certs_137755;
        
        if (!bounds_check_137754) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137751, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:281:82-85\n   #5  ftsort.fut:275:1-281:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_concat_cmp_137756 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, eta_p_137751);
        int64_t index_concat_branch_137757 = btoi_bool_i64(index_concat_cmp_137756);
        int64_t index_concat_branch_137758;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138198 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t index_primexp_138199 = add64(defunc_0_merge_pipeline_res_136397, index_concat_i_138198);
            
            index_concat_branch_137758 = index_primexp_138199;
        } else {
            int64_t index_primexp_137761 = add64(defunc_0_merge_pipeline_res_136396, eta_p_137751);
            
            index_concat_branch_137758 = index_primexp_137761;
        }
        
        int32_t index_concat_branch_137762;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138200 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t slice_138201 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138200;
            int32_t index_concat_138202 = ((int32_t *) b_list_mem_138404.mem)[slice_138201];
            
            index_concat_branch_137762 = index_concat_138202;
        } else {
            int64_t slice_137766 = defunc_0_merge_pipeline_res_136396 + eta_p_137751;
            int32_t index_concat_137767 = ((int32_t *) a_list_mem_138403.mem)[slice_137766];
            
            index_concat_branch_137762 = index_concat_137767;
        }
        ((int64_t *) mem_138406.mem)[arg_137200 + i_138337] = index_concat_branch_137757;
        ((int64_t *) mem_138408.mem)[arg_137200 + i_138337] = index_concat_branch_137758;
        ((int32_t *) mem_138410.mem)[arg_137200 + i_138337] = index_concat_branch_137762;
    }
    if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138410, "mem_138410") != 0)
        return 1;
    prim_out_139284 = dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    if (memblock_set(ctx, &*mem_out_p_139540, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139541, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139542, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    *out_prim_out_139543 = prim_out_139284;
    
  cleanup:
    {
        free(mem_138421);
        free(mem_138423);
        free(mem_138438);
        free(mem_138441);
        free(mem_138444);
        free(mem_138447);
        free(mem_138474);
        free(mem_138477);
        free(mem_138487);
        free(mem_138489);
        free(mem_138556);
        free(mem_138559);
        free(mem_138569);
        free(mem_138571);
        free(mem_138586);
        free(mem_138589);
        free(mem_138728);
        free(mem_138770);
        free(mem_138773);
        free(mem_138783);
        free(mem_138785);
        free(mem_138852);
        free(mem_138855);
        free(mem_138865);
        free(mem_138867);
        free(mem_138882);
        free(mem_138885);
        if (memblock_unref(ctx, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138962, "mem_138962") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138958, "mem_138958") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138924, "mem_138924") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138920, "mem_138920") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138929, "mem_138929") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138927, "mem_138927") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138969, "ext_mem_138969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138666, "mem_138666") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138662, "mem_138662") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138628, "mem_138628") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138633, "mem_138633") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138631, "mem_138631") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138553, "mem_param_138553") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138550, "mem_param_138550") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138672, "ext_mem_138672") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138673, "ext_mem_138673") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_long(struct futhark_context *ctx, struct memblock *mem_out_p_139571, struct memblock *mem_out_p_139572, struct memblock *mem_out_p_139573, int64_t *out_prim_out_139574, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_111382, int64_t nb_111383, int64_t window_sizze_111384, int64_t threads_111385)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138421_cached_sizze_139575 = 0;
    unsigned char *mem_138421 = NULL;
    int64_t mem_138423_cached_sizze_139576 = 0;
    unsigned char *mem_138423 = NULL;
    int64_t mem_138438_cached_sizze_139577 = 0;
    unsigned char *mem_138438 = NULL;
    int64_t mem_138441_cached_sizze_139578 = 0;
    unsigned char *mem_138441 = NULL;
    int64_t mem_138444_cached_sizze_139579 = 0;
    unsigned char *mem_138444 = NULL;
    int64_t mem_138447_cached_sizze_139580 = 0;
    unsigned char *mem_138447 = NULL;
    int64_t mem_138474_cached_sizze_139581 = 0;
    unsigned char *mem_138474 = NULL;
    int64_t mem_138477_cached_sizze_139582 = 0;
    unsigned char *mem_138477 = NULL;
    int64_t mem_138487_cached_sizze_139583 = 0;
    unsigned char *mem_138487 = NULL;
    int64_t mem_138489_cached_sizze_139584 = 0;
    unsigned char *mem_138489 = NULL;
    int64_t mem_138556_cached_sizze_139585 = 0;
    unsigned char *mem_138556 = NULL;
    int64_t mem_138559_cached_sizze_139586 = 0;
    unsigned char *mem_138559 = NULL;
    int64_t mem_138569_cached_sizze_139587 = 0;
    unsigned char *mem_138569 = NULL;
    int64_t mem_138571_cached_sizze_139588 = 0;
    unsigned char *mem_138571 = NULL;
    int64_t mem_138586_cached_sizze_139589 = 0;
    unsigned char *mem_138586 = NULL;
    int64_t mem_138589_cached_sizze_139590 = 0;
    unsigned char *mem_138589 = NULL;
    int64_t mem_138728_cached_sizze_139591 = 0;
    unsigned char *mem_138728 = NULL;
    int64_t mem_138770_cached_sizze_139592 = 0;
    unsigned char *mem_138770 = NULL;
    int64_t mem_138773_cached_sizze_139593 = 0;
    unsigned char *mem_138773 = NULL;
    int64_t mem_138783_cached_sizze_139594 = 0;
    unsigned char *mem_138783 = NULL;
    int64_t mem_138785_cached_sizze_139595 = 0;
    unsigned char *mem_138785 = NULL;
    int64_t mem_138852_cached_sizze_139596 = 0;
    unsigned char *mem_138852 = NULL;
    int64_t mem_138855_cached_sizze_139597 = 0;
    unsigned char *mem_138855 = NULL;
    int64_t mem_138865_cached_sizze_139598 = 0;
    unsigned char *mem_138865 = NULL;
    int64_t mem_138867_cached_sizze_139599 = 0;
    unsigned char *mem_138867 = NULL;
    int64_t mem_138882_cached_sizze_139600 = 0;
    unsigned char *mem_138882 = NULL;
    int64_t mem_138885_cached_sizze_139601 = 0;
    unsigned char *mem_138885 = NULL;
    struct memblock mem_param_tmp_139382;
    
    mem_param_tmp_139382.references = NULL;
    
    struct memblock mem_param_tmp_139381;
    
    mem_param_tmp_139381.references = NULL;
    
    struct memblock mem_138962;
    
    mem_138962.references = NULL;
    
    struct memblock mem_138958;
    
    mem_138958.references = NULL;
    
    struct memblock mem_138924;
    
    mem_138924.references = NULL;
    
    struct memblock mem_138920;
    
    mem_138920.references = NULL;
    
    struct memblock mem_138929;
    
    mem_138929.references = NULL;
    
    struct memblock mem_138927;
    
    mem_138927.references = NULL;
    
    struct memblock ext_mem_138944;
    
    ext_mem_138944.references = NULL;
    
    struct memblock ext_mem_138947;
    
    ext_mem_138947.references = NULL;
    
    struct memblock mem_param_138849;
    
    mem_param_138849.references = NULL;
    
    struct memblock mem_param_138846;
    
    mem_param_138846.references = NULL;
    
    struct memblock ext_mem_138968;
    
    ext_mem_138968.references = NULL;
    
    struct memblock ext_mem_138969;
    
    ext_mem_138969.references = NULL;
    
    struct memblock mem_138842;
    
    mem_138842.references = NULL;
    
    struct memblock mem_138838;
    
    mem_138838.references = NULL;
    
    struct memblock ext_mem_138972;
    
    ext_mem_138972.references = NULL;
    
    struct memblock mem_138767;
    
    mem_138767.references = NULL;
    
    struct memblock mem_param_tmp_139326;
    
    mem_param_tmp_139326.references = NULL;
    
    struct memblock mem_param_tmp_139325;
    
    mem_param_tmp_139325.references = NULL;
    
    struct memblock mem_138666;
    
    mem_138666.references = NULL;
    
    struct memblock mem_138662;
    
    mem_138662.references = NULL;
    
    struct memblock mem_138628;
    
    mem_138628.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock mem_138633;
    
    mem_138633.references = NULL;
    
    struct memblock mem_138631;
    
    mem_138631.references = NULL;
    
    struct memblock ext_mem_138648;
    
    ext_mem_138648.references = NULL;
    
    struct memblock ext_mem_138651;
    
    ext_mem_138651.references = NULL;
    
    struct memblock mem_param_138553;
    
    mem_param_138553.references = NULL;
    
    struct memblock mem_param_138550;
    
    mem_param_138550.references = NULL;
    
    struct memblock ext_mem_138672;
    
    ext_mem_138672.references = NULL;
    
    struct memblock ext_mem_138673;
    
    ext_mem_138673.references = NULL;
    
    struct memblock mem_138546;
    
    mem_138546.references = NULL;
    
    struct memblock mem_138542;
    
    mem_138542.references = NULL;
    
    struct memblock ext_mem_138676;
    
    ext_mem_138676.references = NULL;
    
    struct memblock mem_138471;
    
    mem_138471.references = NULL;
    
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t prim_out_139284;
    int64_t dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368 = add64(na_111382, nb_111383);
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139285 = 0; nest_i_139285 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139285++) {
        ((int64_t *) mem_138406.mem)[nest_i_139285] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139286 = 0; nest_i_139286 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139286++) {
        ((int64_t *) mem_138408.mem)[nest_i_139286] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139287 = 0; nest_i_139287 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139287++) {
        ((int64_t *) mem_138410.mem)[nest_i_139287] = (int64_t) 0;
    }
    
    int64_t zl_rhs_136372 = sub64(na_111382, window_sizze_111384);
    bool cond_136373 = slt64((int64_t) 0, zl_rhs_136372);
    int64_t zl_rhs_136374 = sub64(nb_111383, window_sizze_111384);
    bool loop_cond_f_res_136375 = slt64((int64_t) 0, zl_rhs_136374);
    bool x_136376 = !cond_136373;
    bool y_136377 = loop_cond_f_res_136375 && x_136376;
    bool loop_cond_136378 = cond_136373 || y_136377;
    bool zzero_136379 = threads_111385 == (int64_t) 0;
    bool nonzzero_136380 = !zzero_136379;
    bool loop_not_taken_136381 = !loop_cond_136378;
    bool protect_assert_disj_136382 = nonzzero_136380 || loop_not_taken_136381;
    bool nonzzero_cert_136383;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:184:30-38\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool nonzzero_cert_136385;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:117:30-38\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:289:82-85\n   #4  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_136386 = sub64(threads_111385, (int64_t) 1);
    bool x_136387 = sle64((int64_t) 0, tmp_136386);
    bool y_136388 = slt64(tmp_136386, threads_111385);
    bool bounds_check_136389 = x_136387 && y_136388;
    bool protect_assert_disj_136390 = loop_not_taken_136381 || bounds_check_136389;
    bool index_certs_136391;
    
    if (!protect_assert_disj_136390) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136386, "] out of bounds for array of shape [", (long long) threads_111385, "].", "-> #0  ftsort.fut:207:7-33\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138420 = (int64_t) 8 * threads_111385;
    
    if (mem_138421_cached_sizze_139575 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138421, &mem_138421_cached_sizze_139575, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138423_cached_sizze_139576 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138423, &mem_138423_cached_sizze_139576, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    bool defunc_0_merge_pipeline_res_136392;
    int64_t defunc_0_merge_pipeline_res_136396;
    int64_t defunc_0_merge_pipeline_res_136397;
    bool loop_while_136398;
    int64_t p_136402;
    int64_t p_136403;
    
    loop_while_136398 = loop_cond_136378;
    p_136402 = (int64_t) 0;
    p_136403 = (int64_t) 0;
    while (loop_while_136398) {
        int64_t min_arg1_136404 = sub64(na_111382, p_136402);
        int64_t min_res_136405 = smin64(window_sizze_111384, min_arg1_136404);
        int64_t min_arg1_136406 = sub64(nb_111383, p_136403);
        int64_t min_res_136407 = smin64(window_sizze_111384, min_arg1_136406);
        int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408 = add64(min_res_136405, min_res_136407);
        int64_t lb_merge_136409 = add64(p_136402, p_136403);
        int64_t zp_lhs_136410 = add64(min_res_136405, lb_merge_136409);
        int64_t ub_merge_136411 = add64(min_res_136407, zp_lhs_136410);
        int64_t as_136412 = add64(p_136402, min_res_136405);
        bool empty_slice_136413 = min_res_136405 == (int64_t) 0;
        int64_t m_136414 = sub64(min_res_136405, (int64_t) 1);
        int64_t i_p_m_t_s_136415 = add64(p_136402, m_136414);
        bool zzero_leq_i_p_m_t_s_136416 = sle64((int64_t) 0, i_p_m_t_s_136415);
        bool i_p_m_t_s_leq_w_136417 = slt64(i_p_m_t_s_136415, na_111382);
        bool zzero_lte_i_136418 = sle64((int64_t) 0, p_136402);
        bool i_lte_j_136419 = sle64(p_136402, as_136412);
        bool y_136420 = i_p_m_t_s_leq_w_136417 && zzero_lte_i_136418;
        bool y_136421 = zzero_leq_i_p_m_t_s_136416 && y_136420;
        bool forwards_ok_136422 = i_lte_j_136419 && y_136421;
        bool ok_or_empty_136423 = empty_slice_136413 || forwards_ok_136422;
        bool index_certs_136424;
        
        if (!ok_or_empty_136423) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136402, ":", (long long) as_136412, "] out of bounds for array of shape [", (long long) na_111382, "].", "-> #0  ftsort.fut:243:16-46\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bs_136425 = add64(p_136403, min_res_136407);
        bool empty_slice_136426 = min_res_136407 == (int64_t) 0;
        int64_t m_136427 = sub64(min_res_136407, (int64_t) 1);
        int64_t i_p_m_t_s_136428 = add64(p_136403, m_136427);
        bool zzero_leq_i_p_m_t_s_136429 = sle64((int64_t) 0, i_p_m_t_s_136428);
        bool i_p_m_t_s_leq_w_136430 = slt64(i_p_m_t_s_136428, nb_111383);
        bool zzero_lte_i_136431 = sle64((int64_t) 0, p_136403);
        bool i_lte_j_136432 = sle64(p_136403, bs_136425);
        bool y_136433 = i_p_m_t_s_leq_w_136430 && zzero_lte_i_136431;
        bool y_136434 = zzero_leq_i_p_m_t_s_136429 && y_136433;
        bool forwards_ok_136435 = i_lte_j_136432 && y_136434;
        bool ok_or_empty_136436 = empty_slice_136426 || forwards_ok_136435;
        bool index_certs_136437;
        
        if (!ok_or_empty_136436) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136403, ":", (long long) bs_136425, "] out of bounds for array of shape [", (long long) nb_111383, "].", "-> #0  ftsort.fut:244:16-46\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zp_rhs_136438 = sdiv64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, threads_111385);
        int64_t perThread_136439 = add64((int64_t) 1, zp_rhs_136438);
        int64_t bytes_138437 = perThread_136439 * bytes_138420;
        int64_t bytes_138725 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        int64_t j_m_i_137176 = sub64(ub_merge_136411, lb_merge_136409);
        bool empty_slice_137177 = j_m_i_137176 == (int64_t) 0;
        int64_t m_137178 = sub64(j_m_i_137176, (int64_t) 1);
        int64_t i_p_m_t_s_137179 = add64(lb_merge_136409, m_137178);
        bool zzero_leq_i_p_m_t_s_137180 = sle64((int64_t) 0, i_p_m_t_s_137179);
        bool i_p_m_t_s_leq_w_137181 = slt64(i_p_m_t_s_137179, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
        bool zzero_lte_i_137182 = sle64((int64_t) 0, lb_merge_136409);
        bool i_lte_j_137183 = sle64(lb_merge_136409, ub_merge_136411);
        bool y_137184 = i_p_m_t_s_leq_w_137181 && zzero_lte_i_137182;
        bool y_137185 = zzero_leq_i_p_m_t_s_137180 && y_137184;
        bool forwards_ok_137186 = i_lte_j_137183 && y_137185;
        bool ok_or_empty_137187 = empty_slice_137177 || forwards_ok_137186;
        bool index_certs_137188;
        
        if (!ok_or_empty_137187) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lb_merge_136409, ":", (long long) ub_merge_136411, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool dim_match_137189 = j_m_i_137176 == dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        bool empty_or_match_cert_137190;
        
        if (!dim_match_137189) {
            set_error(ctx, msgprintf("Error: %s%s%lld%s%s%s%lld%s%s\n\nBacktrace:\n%s", "Shape ", "[", (long long) j_m_i_137176, "]", " of slice does not match shape ", "[", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, "]", " of value.", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440 = mul64(threads_111385, perThread_136439);
        
        for (int64_t i_138210 = 0; i_138210 < threads_111385; i_138210++) {
            int64_t zs_lhs_136444 = mul64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, i_138210);
            int64_t index_136445 = sdiv64(zs_lhs_136444, threads_111385);
            bool cond_136446 = slt64(min_res_136405, index_136445);
            int64_t atop_136447;
            
            if (cond_136446) {
                atop_136447 = min_res_136405;
            } else {
                atop_136447 = index_136445;
            }
            
            int64_t btop_136448;
            
            if (cond_136446) {
                int64_t btop_t_res_137808 = sub64(index_136445, min_res_136405);
                
                btop_136448 = btop_t_res_137808;
            } else {
                btop_136448 = (int64_t) 0;
            }
            
            bool defunc_0_f_res_136450;
            int64_t defunc_0_f_res_136451;
            int64_t defunc_0_f_res_136452;
            int64_t defunc_0_f_res_136453;
            int64_t defunc_0_f_res_136454;
            int64_t defunc_0_f_res_136455;
            bool loop_while_136456;
            int64_t p_136457;
            int64_t p_136458;
            int64_t p_136459;
            int64_t p_136460;
            int64_t p_136461;
            
            loop_while_136456 = 1;
            p_136457 = btop_136448;
            p_136458 = min_res_136405;
            p_136459 = atop_136447;
            p_136460 = min_res_136407;
            p_136461 = btop_136448;
            while (loop_while_136456) {
                int64_t zs_lhs_136462 = sub64(p_136459, p_136457);
                int64_t offset_136463 = sdiv64(zs_lhs_136462, (int64_t) 2);
                int64_t ai_136464 = sub64(p_136459, offset_136463);
                int64_t bi_136465 = add64(p_136461, offset_136463);
                bool cond_136466 = sle64((int64_t) 0, ai_136464);
                bool cond_t_res_136467 = slt64(ai_136464, min_res_136405);
                bool x_136468 = cond_136466 && cond_t_res_136467;
                int64_t acur_136469;
                
                if (x_136468) {
                    bool index_certs_137809;
                    
                    if (!x_136468) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ai_136464, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:128:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:289:82-85\n   #4  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137810 = p_136402 + ai_136464;
                    int64_t acur_t_res_137811 = ((int64_t *) a_list_mem_138403.mem)[slice_137810];
                    
                    acur_136469 = acur_t_res_137811;
                } else {
                    bool cond_136473 = slt64(ai_136464, (int64_t) 0);
                    int64_t acur_f_res_136474;
                    
                    if (cond_136473) {
                        acur_f_res_136474 = (int64_t) -9223372036854775808;
                    } else {
                        acur_f_res_136474 = (int64_t) 9223372036854775807;
                    }
                    acur_136469 = acur_f_res_136474;
                }
                
                bool cond_136475 = slt64((int64_t) 0, ai_136464);
                int64_t aprev_136476;
                
                if (cond_136475) {
                    int64_t tmp_137812 = sub64(ai_136464, (int64_t) 1);
                    bool x_137813 = sle64((int64_t) 0, tmp_137812);
                    bool y_137814 = slt64(tmp_137812, min_res_136405);
                    bool bounds_check_137815 = x_137813 && y_137814;
                    bool index_certs_137816;
                    
                    if (!bounds_check_137815) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137812, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:129:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:289:82-85\n   #4  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137817 = p_136402 + tmp_137812;
                    int64_t aprev_t_res_137818 = ((int64_t *) a_list_mem_138403.mem)[slice_137817];
                    
                    aprev_136476 = aprev_t_res_137818;
                } else {
                    aprev_136476 = (int64_t) -9223372036854775808;
                }
                
                bool cond_136484 = sle64((int64_t) 0, bi_136465);
                bool cond_t_res_136485 = slt64(bi_136465, min_res_136407);
                bool x_136486 = cond_136484 && cond_t_res_136485;
                int64_t bcur_136487;
                
                if (x_136486) {
                    bool index_certs_137819;
                    
                    if (!x_136486) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bi_136465, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:130:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:289:82-85\n   #4  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137820 = p_136403 + bi_136465;
                    int64_t bcur_t_res_137821 = ((int64_t *) b_list_mem_138404.mem)[slice_137820];
                    
                    bcur_136487 = bcur_t_res_137821;
                } else {
                    bool cond_136491 = slt64(bi_136465, (int64_t) 0);
                    int64_t bcur_f_res_136492;
                    
                    if (cond_136491) {
                        bcur_f_res_136492 = (int64_t) -9223372036854775808;
                    } else {
                        bcur_f_res_136492 = (int64_t) 9223372036854775807;
                    }
                    bcur_136487 = bcur_f_res_136492;
                }
                
                bool cond_136493 = slt64((int64_t) 0, bi_136465);
                int64_t bprev_136494;
                
                if (cond_136493) {
                    int64_t tmp_137822 = sub64(bi_136465, (int64_t) 1);
                    bool x_137823 = sle64((int64_t) 0, tmp_137822);
                    bool y_137824 = slt64(tmp_137822, min_res_136407);
                    bool bounds_check_137825 = x_137823 && y_137824;
                    bool index_certs_137826;
                    
                    if (!bounds_check_137825) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137822, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:131:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:289:82-85\n   #4  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137827 = p_136403 + tmp_137822;
                    int64_t bprev_t_res_137828 = ((int64_t *) b_list_mem_138404.mem)[slice_137827];
                    
                    bprev_136494 = bprev_t_res_137828;
                } else {
                    bprev_136494 = (int64_t) -9223372036854775808;
                }
                
                bool defunc_0_gt_res_136502 = slt64(bprev_136494, acur_136469);
                int64_t loopres_136503;
                int64_t loopres_136504;
                int64_t loopres_136505;
                int64_t loopres_136506;
                int64_t loopres_136507;
                bool loopres_136508;
                
                if (defunc_0_gt_res_136502) {
                    bool defunc_0_leq_res_137829 = sle64(aprev_136476, bcur_136487);
                    int64_t loopres_t_res_137830;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137830 = ai_136464;
                    } else {
                        loopres_t_res_137830 = min_res_136405;
                    }
                    
                    int64_t loopres_t_res_137831;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137831 = bi_136465;
                    } else {
                        loopres_t_res_137831 = min_res_136407;
                    }
                    
                    bool x_137832 = !defunc_0_leq_res_137829;
                    int64_t loopres_t_res_137833;
                    int64_t loopres_t_res_137834;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137833 = p_136459;
                        loopres_t_res_137834 = p_136461;
                    } else {
                        int64_t tmp_137835 = sub64(ai_136464, (int64_t) 1);
                        int64_t tmp_137836 = add64((int64_t) 1, bi_136465);
                        
                        loopres_t_res_137833 = tmp_137835;
                        loopres_t_res_137834 = tmp_137836;
                    }
                    loopres_136503 = p_136457;
                    loopres_136504 = loopres_t_res_137830;
                    loopres_136505 = loopres_t_res_137833;
                    loopres_136506 = loopres_t_res_137831;
                    loopres_136507 = loopres_t_res_137834;
                    loopres_136508 = x_137832;
                } else {
                    int64_t tmp_136517 = add64((int64_t) 1, ai_136464);
                    
                    loopres_136503 = tmp_136517;
                    loopres_136504 = min_res_136405;
                    loopres_136505 = p_136459;
                    loopres_136506 = min_res_136407;
                    loopres_136507 = p_136461;
                    loopres_136508 = 1;
                }
                
                bool loop_while_tmp_139296 = loopres_136508;
                int64_t p_tmp_139297 = loopres_136503;
                int64_t p_tmp_139298 = loopres_136504;
                int64_t p_tmp_139299 = loopres_136505;
                int64_t p_tmp_139300 = loopres_136506;
                int64_t p_tmp_139301 = loopres_136507;
                
                loop_while_136456 = loop_while_tmp_139296;
                p_136457 = p_tmp_139297;
                p_136458 = p_tmp_139298;
                p_136459 = p_tmp_139299;
                p_136460 = p_tmp_139300;
                p_136461 = p_tmp_139301;
            }
            defunc_0_f_res_136450 = loop_while_136456;
            defunc_0_f_res_136451 = p_136457;
            defunc_0_f_res_136452 = p_136458;
            defunc_0_f_res_136453 = p_136459;
            defunc_0_f_res_136454 = p_136460;
            defunc_0_f_res_136455 = p_136461;
            ((int64_t *) mem_138421)[i_138210] = defunc_0_f_res_136452;
            ((int64_t *) mem_138423)[i_138210] = defunc_0_f_res_136454;
        }
        if (mem_138438_cached_sizze_139577 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138438, &mem_138438_cached_sizze_139577, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138441_cached_sizze_139578 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138441, &mem_138441_cached_sizze_139578, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138444_cached_sizze_139579 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138444, &mem_138444_cached_sizze_139579, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138447_cached_sizze_139580 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138447, &mem_138447_cached_sizze_139580, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138273 = 0; i_138273 < threads_111385; i_138273++) {
            int64_t defunc_0_f_res_136531 = ((int64_t *) mem_138421)[i_138273];
            int64_t defunc_0_f_res_136532 = ((int64_t *) mem_138423)[i_138273];
            int64_t zl_lhs_136533 = add64((int64_t) 1, i_138273);
            bool cond_136534 = slt64(zl_lhs_136533, threads_111385);
            bool x_136535 = sle64((int64_t) 0, zl_lhs_136533);
            bool bounds_check_136536 = cond_136534 && x_136535;
            bool loop_not_taken_136537 = !cond_136534;
            bool protect_assert_disj_136538 = bounds_check_136536 || loop_not_taken_136537;
            bool index_certs_136539;
            
            if (!protect_assert_disj_136538) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_lhs_136533, "] out of bounds for array of shape [", (long long) threads_111385, "].", "-> #0  ftsort.fut:191:39-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t defunc_0_f_res_t_res_136540;
            
            if (cond_136534) {
                int64_t x_137837 = ((int64_t *) mem_138421)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136540 = x_137837;
            } else {
                defunc_0_f_res_t_res_136540 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_t_res_136542;
            
            if (cond_136534) {
                int64_t x_137838 = ((int64_t *) mem_138423)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136542 = x_137838;
            } else {
                defunc_0_f_res_t_res_136542 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_136544;
            
            if (cond_136534) {
                defunc_0_f_res_136544 = defunc_0_f_res_t_res_136540;
            } else {
                defunc_0_f_res_136544 = defunc_0_f_res_136531;
            }
            
            int64_t defunc_0_f_res_136545;
            
            if (cond_136534) {
                defunc_0_f_res_136545 = defunc_0_f_res_t_res_136542;
            } else {
                defunc_0_f_res_136545 = defunc_0_f_res_136532;
            }
            
            int64_t dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 = sub64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            int64_t dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 = sub64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 = add64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t zm_lhs_136549 = add64(defunc_0_f_res_136544, defunc_0_f_res_136545);
            int64_t zm_rhs_136550 = add64(defunc_0_f_res_136531, defunc_0_f_res_136532);
            int64_t card_136551 = sub64(zm_lhs_136549, zm_rhs_136550);
            bool empty_slice_136552 = dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 == (int64_t) 0;
            int64_t m_136553 = sub64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 1);
            int64_t i_p_m_t_s_136554 = add64(defunc_0_f_res_136531, m_136553);
            bool zzero_leq_i_p_m_t_s_136555 = sle64((int64_t) 0, i_p_m_t_s_136554);
            bool i_p_m_t_s_leq_w_136556 = slt64(i_p_m_t_s_136554, min_res_136405);
            bool zzero_lte_i_136557 = sle64((int64_t) 0, defunc_0_f_res_136531);
            bool i_lte_j_136558 = sle64(defunc_0_f_res_136531, defunc_0_f_res_136544);
            bool y_136559 = i_p_m_t_s_leq_w_136556 && zzero_lte_i_136557;
            bool y_136560 = zzero_leq_i_p_m_t_s_136555 && y_136559;
            bool forwards_ok_136561 = i_lte_j_136558 && y_136560;
            bool ok_or_empty_136562 = empty_slice_136552 || forwards_ok_136561;
            bool index_certs_136563;
            
            if (!ok_or_empty_136562) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136531, ":", (long long) defunc_0_f_res_136544, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:193:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136564 = slt64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            bool valid_136565 = !bounds_invalid_upwards_136564;
            bool range_valid_c_136566;
            
            if (!valid_136565) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136531, "..<", (long long) defunc_0_f_res_136544, " is invalid.", "-> #0  ftsort.fut:193:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_136569 = dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 == (int64_t) 0;
            int64_t m_136570 = sub64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, (int64_t) 1);
            int64_t i_p_m_t_s_136571 = add64(defunc_0_f_res_136532, m_136570);
            bool zzero_leq_i_p_m_t_s_136572 = sle64((int64_t) 0, i_p_m_t_s_136571);
            bool i_p_m_t_s_leq_w_136573 = slt64(i_p_m_t_s_136571, min_res_136407);
            bool zzero_lte_i_136574 = sle64((int64_t) 0, defunc_0_f_res_136532);
            bool i_lte_j_136575 = sle64(defunc_0_f_res_136532, defunc_0_f_res_136545);
            bool y_136576 = i_p_m_t_s_leq_w_136573 && zzero_lte_i_136574;
            bool y_136577 = zzero_leq_i_p_m_t_s_136572 && y_136576;
            bool forwards_ok_136578 = i_lte_j_136575 && y_136577;
            bool ok_or_empty_136579 = empty_slice_136569 || forwards_ok_136578;
            bool index_certs_136580;
            
            if (!ok_or_empty_136579) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136532, ":", (long long) defunc_0_f_res_136545, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:194:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136581 = slt64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            bool valid_136582 = !bounds_invalid_upwards_136581;
            bool range_valid_c_136583;
            
            if (!valid_136582) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136532, "..<", (long long) defunc_0_f_res_136545, " is invalid.", "-> #0  ftsort.fut:194:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_138470 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool cond_136588 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zs_lhs_136589 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zp_rhs_136590 = sdiv_safe64(zs_lhs_136589, (int64_t) 20);
            int64_t min_num_blocks_136591 = add64((int64_t) 1, zp_rhs_136590);
            bool loop_cond_136592 = slt64((int64_t) 1, min_num_blocks_136591);
            bool smallest_pow_2_geq_than_res_136593;
            int64_t smallest_pow_2_geq_than_res_136594;
            bool loop_while_136595;
            int64_t x_136596;
            
            loop_while_136595 = loop_cond_136592;
            x_136596 = (int64_t) 1;
            while (loop_while_136595) {
                int64_t loopres_136597 = mul64((int64_t) 2, x_136596);
                bool loop_cond_136598 = slt64(loopres_136597, min_num_blocks_136591);
                bool loop_while_tmp_139306 = loop_cond_136598;
                int64_t x_tmp_139307 = loopres_136597;
                
                loop_while_136595 = loop_while_tmp_139306;
                x_136596 = x_tmp_139307;
            }
            smallest_pow_2_geq_than_res_136593 = loop_while_136595;
            smallest_pow_2_geq_than_res_136594 = x_136596;
            
            bool zzero_136599 = smallest_pow_2_geq_than_res_136594 == (int64_t) 0;
            bool nonzzero_136600 = !zzero_136599;
            bool protect_assert_disj_136601 = cond_136588 || nonzzero_136600;
            bool nonzzero_cert_136602;
            
            if (!protect_assert_disj_136601) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zp_rhs_136603 = sdiv_safe64(zs_lhs_136589, smallest_pow_2_geq_than_res_136594);
            int64_t block_sizze_136604 = add64((int64_t) 1, zp_rhs_136603);
            bool y_136609 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
            bool protect_assert_disj_139059 = cond_136588 || y_136609;
            bool index_certs_136610;
            
            if (!protect_assert_disj_139059) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136629 = slt64(smallest_pow_2_geq_than_res_136594, (int64_t) 0);
            bool valid_136630 = !bounds_invalid_upwards_136629;
            bool protect_assert_disj_139067 = cond_136588 || valid_136630;
            bool range_valid_c_136631;
            
            if (!protect_assert_disj_139067) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_136594, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:289:82-85\n   #7  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136633 = slt64(block_sizze_136604, (int64_t) 0);
            bool valid_136634 = !bounds_invalid_upwards_136633;
            bool protect_assert_disj_139069 = cond_136588 || valid_136634;
            bool range_valid_c_136635;
            
            if (!protect_assert_disj_139069) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_136604, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool cond_136637 = sle64(block_sizze_136604, (int64_t) 1);
            int64_t tmp_136638 = sub64(block_sizze_136604, (int64_t) 2);
            bool bounds_invalid_upwards_136639 = slt64(tmp_136638, (int64_t) 0);
            bool valid_136641 = !bounds_invalid_upwards_136639;
            bool protect_assert_disj_136642 = cond_136637 || valid_136641;
            bool protect_assert_disj_139071 = cond_136588 || protect_assert_disj_136642;
            bool range_valid_c_136643;
            
            if (!protect_assert_disj_139071) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_136638, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool dim_match_137123 = card_136551 == dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool empty_or_match_cert_137124;
            
            if (!dim_match_137123) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] cannot match shape of type `[", (long long) card_136551, "](i64, i64, i64)`.", "-> #0  ftsort.fut:195:20-196:82\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_137125 = card_136551 == (int64_t) 0;
            int64_t m_137126 = sub64(card_136551, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137127 = sle64((int64_t) 0, m_137126);
            bool i_p_m_t_s_leq_w_137128 = slt64(m_137126, card_136551);
            bool y_137129 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137128;
            bool ok_or_empty_137130 = empty_slice_137125 || y_137129;
            bool index_certs_137131;
            
            if (!ok_or_empty_137130) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) card_136551, "].", "-> #0  ftsort.fut:197:41-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool i_p_m_t_s_leq_w_137132 = slt64(m_137126, perThread_136439);
            bool y_137133 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137132;
            bool ok_or_empty_137134 = empty_slice_137125 || y_137133;
            bool index_certs_137135;
            
            if (!ok_or_empty_137134) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:197:17-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t nest_i_139308 = 0; nest_i_139308 < perThread_136439; nest_i_139308++) {
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + nest_i_139308] = (int64_t) -1;
            }
            for (int64_t nest_i_139309 = 0; nest_i_139309 < perThread_136439; nest_i_139309++) {
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + nest_i_139309] = (int64_t) -1;
            }
            for (int64_t nest_i_139310 = 0; nest_i_139310 < perThread_136439; nest_i_139310++) {
                ((int64_t *) mem_138447)[i_138273 * perThread_136439 + nest_i_139310] = (int64_t) 0;
            }
            
            int64_t slice_136567 = p_136402 + defunc_0_f_res_136531;
            int64_t slice_136584 = p_136403 + defunc_0_f_res_136532;
            
            if (memblock_alloc(ctx, &mem_138471, bytes_138470, "mem_138471")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139311 = 0; i_139311 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_139311++) {
                int64_t x_139312 = (int64_t) 0 + i_139311 * (int64_t) 1;
                
                ((int64_t *) mem_138471.mem)[i_139311] = x_139312;
            }
            
            int64_t flat_dim_136605 = smallest_pow_2_geq_than_res_136594 * block_sizze_136604;
            bool x_139054 = !cond_136588;
            int64_t greatest_divisor_leq_than_arg1_136607 = mul64((int64_t) 2, block_sizze_136604);
            int64_t merge_block_sizze_136608;
            
            if (x_139054) {
                int64_t x_139056;
                
                if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139056, (int64_t) 8, greatest_divisor_leq_than_arg1_136607) != 0) {
                    err = 1;
                    goto cleanup;
                }
                merge_block_sizze_136608 = x_139056;
            } else {
                merge_block_sizze_136608 = (int64_t) 0;
            }
            
            bool index_concat_cmp_136611 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 0);
            bool x_139050 = !index_concat_cmp_136611;
            bool protect_cond_conj_139060 = x_139050 && x_139054;
            int64_t index_concat_136617;
            
            if (protect_cond_conj_139060) {
                int64_t x_139052 = ((int64_t *) a_list_mem_138403.mem)[slice_136567];
                
                index_concat_136617 = x_139052;
            } else {
                index_concat_136617 = (int64_t) 0;
            }
            
            int64_t index_concat_i_137839 = sub64((int64_t) 0, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t slice_137840 = defunc_0_f_res_136532 + index_concat_i_137839;
            int64_t slice_137841 = p_136403 + slice_137840;
            bool protect_cond_conj_139061 = index_concat_cmp_136611 && x_139054;
            int64_t index_concat_137842;
            
            if (protect_cond_conj_139061) {
                int64_t x_139048 = ((int64_t *) b_list_mem_138404.mem)[slice_137841];
                
                index_concat_137842 = x_139048;
            } else {
                index_concat_137842 = (int64_t) 0;
            }
            
            int64_t index_concat_branch_136612;
            
            if (index_concat_cmp_136611) {
                index_concat_branch_136612 = index_concat_137842;
            } else {
                index_concat_branch_136612 = index_concat_136617;
            }
            
            int64_t defunc_0_reduce_res_138002;
            int64_t defunc_0_reduce_res_138003;
            
            if (x_139054) {
                int64_t x_139062;
                int64_t x_139063;
                int64_t redout_138213;
                int64_t redout_138214;
                
                redout_138213 = index_concat_branch_136612;
                redout_138214 = (int64_t) 0;
                for (int64_t i_138215 = 0; i_138215 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138215++) {
                    bool index_concat_cmp_138390 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, i_138215);
                    int64_t index_concat_branch_138394;
                    
                    if (index_concat_cmp_138390) {
                        int64_t index_concat_i_138391 = sub64(i_138215, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                        int64_t slice_138401 = slice_136584 + index_concat_i_138391;
                        int64_t index_concat_138392 = ((int64_t *) b_list_mem_138404.mem)[slice_138401];
                        
                        index_concat_branch_138394 = index_concat_138392;
                    } else {
                        int64_t slice_138402 = slice_136567 + i_138215;
                        int64_t index_concat_138393 = ((int64_t *) a_list_mem_138403.mem)[slice_138402];
                        
                        index_concat_branch_138394 = index_concat_138393;
                    }
                    
                    bool defunc_0_leq_res_136626 = sle64(redout_138213, index_concat_branch_138394);
                    int64_t defunc_0_op_res_136627;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136627 = index_concat_branch_138394;
                    } else {
                        defunc_0_op_res_136627 = redout_138213;
                    }
                    
                    int64_t defunc_0_op_res_136628;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136628 = i_138215;
                    } else {
                        defunc_0_op_res_136628 = redout_138214;
                    }
                    
                    int64_t redout_tmp_139313 = defunc_0_op_res_136627;
                    int64_t redout_tmp_139314 = defunc_0_op_res_136628;
                    
                    redout_138213 = redout_tmp_139313;
                    redout_138214 = redout_tmp_139314;
                }
                x_139062 = redout_138213;
                x_139063 = redout_138214;
                defunc_0_reduce_res_138002 = x_139062;
                defunc_0_reduce_res_138003 = x_139063;
            } else {
                defunc_0_reduce_res_138002 = (int64_t) 0;
                defunc_0_reduce_res_138003 = (int64_t) 0;
            }
            
            int64_t distance_136640 = add64((int64_t) 1, tmp_136638);
            int64_t binop_x_138472 = (int64_t) 8 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138473 = block_sizze_136604 * binop_x_138472;
            int64_t bytes_138486 = (int64_t) 8 * block_sizze_136604;
            bool loop_cond_136722 = slt64(block_sizze_136604, flat_dim_136605);
            bool zzero_136723 = merge_block_sizze_136608 == (int64_t) 0;
            bool nonzzero_136724 = !zzero_136723;
            
            if (cond_136588) {
                if (memblock_set(ctx, &ext_mem_138676, &mem_138471, "mem_138471") != 0)
                    return 1;
            } else {
                if (mem_138474_cached_sizze_139581 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138474, &mem_138474_cached_sizze_139581, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138477_cached_sizze_139582 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138477, &mem_138477_cached_sizze_139582, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138487_cached_sizze_139583 < bytes_138486) {
                    err = lexical_realloc(ctx, &mem_138487, &mem_138487_cached_sizze_139583, bytes_138486);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138489_cached_sizze_139584 < bytes_138486) {
                    err = lexical_realloc(ctx, &mem_138489, &mem_138489_cached_sizze_139584, bytes_138486);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                for (int64_t i_138227 = 0; i_138227 < smallest_pow_2_geq_than_res_136594; i_138227++) {
                    int64_t zp_lhs_136647 = mul64(block_sizze_136604, i_138227);
                    
                    for (int64_t i_138220 = 0; i_138220 < block_sizze_136604; i_138220++) {
                        int64_t k_136651 = add64(zp_lhs_136647, i_138220);
                        bool cond_136652 = slt64(k_136651, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                        int64_t lifted_lambda_res_136653;
                        int64_t lifted_lambda_res_136654;
                        
                        if (cond_136652) {
                            bool x_137847 = sle64((int64_t) 0, k_136651);
                            bool bounds_check_137848 = cond_136652 && x_137847;
                            bool index_certs_137849;
                            
                            if (!bounds_check_137848) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_136651, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool index_concat_cmp_137850 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, k_136651);
                            int64_t index_concat_branch_137851;
                            
                            if (index_concat_cmp_137850) {
                                int64_t index_concat_i_137852 = sub64(k_136651, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                                int64_t slice_137853 = defunc_0_f_res_136532 + index_concat_i_137852;
                                int64_t slice_137854 = p_136403 + slice_137853;
                                int64_t index_concat_137855 = ((int64_t *) b_list_mem_138404.mem)[slice_137854];
                                
                                index_concat_branch_137851 = index_concat_137855;
                            } else {
                                int64_t slice_137856 = defunc_0_f_res_136531 + k_136651;
                                int64_t slice_137857 = p_136402 + slice_137856;
                                int64_t index_concat_137858 = ((int64_t *) a_list_mem_138403.mem)[slice_137857];
                                
                                index_concat_branch_137851 = index_concat_137858;
                            }
                            lifted_lambda_res_136653 = index_concat_branch_137851;
                            lifted_lambda_res_136654 = k_136651;
                        } else {
                            lifted_lambda_res_136653 = defunc_0_reduce_res_138002;
                            lifted_lambda_res_136654 = defunc_0_reduce_res_138003;
                        }
                        ((int64_t *) mem_138487)[i_138220] = lifted_lambda_res_136653;
                        ((int64_t *) mem_138489)[i_138220] = lifted_lambda_res_136654;
                    }
                    if (!cond_136637) {
                        for (int64_t i_136671 = 0; i_136671 < distance_136640; i_136671++) {
                            int64_t gt_arg1_136674 = add64((int64_t) 1, i_136671);
                            bool x_136675 = sle64((int64_t) 0, gt_arg1_136674);
                            bool y_136676 = slt64(gt_arg1_136674, block_sizze_136604);
                            bool bounds_check_136677 = x_136675 && y_136676;
                            bool index_certs_136678;
                            
                            if (!bounds_check_136677) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_136674, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool y_136680 = slt64(i_136671, block_sizze_136604);
                            bool index_certs_136681;
                            
                            if (!y_136680) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_136671, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t gt_arg1_136679 = ((int64_t *) mem_138487)[gt_arg1_136674];
                            int64_t gt_arg0_136682 = ((int64_t *) mem_138487)[i_136671];
                            bool defunc_0_leq_res_136683 = sle64(gt_arg0_136682, gt_arg1_136679);
                            bool defunc_0_lifted_gt_res_136684 = !defunc_0_leq_res_136683;
                            bool s_136685;
                            int64_t s_136688;
                            bool loop_while_136689;
                            int64_t j_136692;
                            
                            loop_while_136689 = defunc_0_lifted_gt_res_136684;
                            j_136692 = i_136671;
                            while (loop_while_136689) {
                                bool x_136693 = sle64((int64_t) 0, j_136692);
                                bool y_136694 = slt64(j_136692, block_sizze_136604);
                                bool bounds_check_136695 = x_136693 && y_136694;
                                bool index_certs_136696;
                                
                                if (!bounds_check_136695) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_136692, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t copy_arg0_136699 = add64((int64_t) 1, j_136692);
                                bool x_136700 = sle64((int64_t) 0, copy_arg0_136699);
                                bool y_136701 = slt64(copy_arg0_136699, block_sizze_136604);
                                bool bounds_check_136702 = x_136700 && y_136701;
                                bool index_certs_136703;
                                
                                if (!bounds_check_136702) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_136699, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t copy_arg0_136697 = ((int64_t *) mem_138487)[j_136692];
                                int64_t copy_arg0_136698 = ((int64_t *) mem_138489)[j_136692];
                                int64_t copy_arg0_136704 = ((int64_t *) mem_138487)[copy_arg0_136699];
                                int64_t copy_arg0_136705 = ((int64_t *) mem_138489)[copy_arg0_136699];
                                
                                ((int64_t *) mem_138487)[j_136692] = copy_arg0_136704;
                                ((int64_t *) mem_138489)[j_136692] = copy_arg0_136705;
                                ((int64_t *) mem_138487)[copy_arg0_136699] = copy_arg0_136697;
                                ((int64_t *) mem_138489)[copy_arg0_136699] = copy_arg0_136698;
                                
                                int64_t tmp_136710 = sub64(j_136692, (int64_t) 1);
                                bool cond_136711 = sle64((int64_t) 0, tmp_136710);
                                bool loop_cond_136712;
                                
                                if (cond_136711) {
                                    bool y_137860 = slt64(tmp_136710, block_sizze_136604);
                                    bool bounds_check_137861 = cond_136711 && y_137860;
                                    bool index_certs_137862;
                                    
                                    if (!bounds_check_137861) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136710, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t gt_arg1_137859 = ((int64_t *) mem_138487)[j_136692];
                                    int64_t gt_arg0_137863 = ((int64_t *) mem_138487)[tmp_136710];
                                    bool defunc_0_leq_res_137864 = sle64(gt_arg0_137863, gt_arg1_137859);
                                    bool defunc_0_lifted_gt_res_137865 = !defunc_0_leq_res_137864;
                                    
                                    loop_cond_136712 = defunc_0_lifted_gt_res_137865;
                                } else {
                                    loop_cond_136712 = 0;
                                }
                                
                                bool loop_while_tmp_139321 = loop_cond_136712;
                                int64_t j_tmp_139324 = tmp_136710;
                                
                                loop_while_136689 = loop_while_tmp_139321;
                                j_136692 = j_tmp_139324;
                            }
                            s_136685 = loop_while_136689;
                            s_136688 = j_136692;
                        }
                    }
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138474, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138487, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138477, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138489, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                }
                if (memblock_alloc(ctx, &mem_138542, bytes_138473, "mem_138542")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138542.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138474, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                if (memblock_alloc(ctx, &mem_138546, bytes_138473, "mem_138546")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138546.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138477, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                
                int64_t data_136725;
                bool data_136726;
                int64_t data_136729;
                int64_t loop_dz2084Uz2082U_136730;
                bool loop_while_136731;
                int64_t stride_136734;
                
                if (memblock_set(ctx, &mem_param_138550, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_138553, &mem_138546, "mem_138546") != 0)
                    return 1;
                loop_dz2084Uz2082U_136730 = flat_dim_136605;
                loop_while_136731 = loop_cond_136722;
                stride_136734 = block_sizze_136604;
                while (loop_while_136731) {
                    int64_t next_stride_136735 = mul64((int64_t) 2, stride_136734);
                    bool zzero_136736 = next_stride_136735 == (int64_t) 0;
                    bool nonzzero_136737 = !zzero_136736;
                    bool nonzzero_cert_136738;
                    
                    if (!nonzzero_136737) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_merges_136739 = sdiv64(flat_dim_136605, next_stride_136735);
                    bool bounds_invalid_upwards_136740 = slt64(num_merges_136739, (int64_t) 0);
                    bool valid_136741 = !bounds_invalid_upwards_136740;
                    bool range_valid_c_136742;
                    
                    if (!valid_136741) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_136739, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:289:82-85\n   #7  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t m_136744 = sub64(next_stride_136735, (int64_t) 1);
                    bool zzero_leq_i_p_m_t_s_136745 = sle64((int64_t) 0, m_136744);
                    bool cond_136747 = slt64(next_stride_136735, (int64_t) 10);
                    bool protect_assert_disj_136748 = nonzzero_136724 || cond_136747;
                    bool nonzzero_cert_136749;
                    
                    if (!protect_assert_disj_136748) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t zeze_lhs_136750 = smod_safe64(next_stride_136735, merge_block_sizze_136608);
                    bool num_blocks_136751 = zeze_lhs_136750 == (int64_t) 0;
                    bool protect_assert_disj_136752 = cond_136747 || num_blocks_136751;
                    bool assert_c_136753;
                    
                    if (!protect_assert_disj_136752) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_blocks_136754 = sdiv_safe64(next_stride_136735, merge_block_sizze_136608);
                    int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755 = add64((int64_t) 1, num_blocks_136754);
                    int64_t j_m_i_136756 = sub64(next_stride_136735, stride_136734);
                    int64_t flat_dim_136757 = merge_block_sizze_136608 * num_blocks_136754;
                    bool bounds_invalid_upwards_136758 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, (int64_t) 0);
                    bool empty_slice_136759 = j_m_i_136756 == (int64_t) 0;
                    int64_t m_136760 = sub64(j_m_i_136756, (int64_t) 1);
                    bool zzero_lte_i_136761 = sle64((int64_t) 0, stride_136734);
                    bool i_lte_j_136762 = sle64(stride_136734, next_stride_136735);
                    bool empty_slice_136763 = stride_136734 == (int64_t) 0;
                    int64_t m_136764 = sub64(stride_136734, (int64_t) 1);
                    bool bounds_invalid_upwards_136765 = slt64(num_blocks_136754, (int64_t) 0);
                    bool cond_136766 = slt64((int64_t) 0, stride_136734);
                    bool valid_136767 = !bounds_invalid_upwards_136758;
                    int64_t i_p_m_t_s_136768 = add64(stride_136734, m_136760);
                    bool zzero_leq_i_p_m_t_s_136769 = sle64((int64_t) 0, m_136764);
                    bool i_p_m_t_s_leq_w_136770 = slt64(m_136764, next_stride_136735);
                    bool valid_136771 = !bounds_invalid_upwards_136765;
                    bool i_p_m_t_s_leq_w_136772 = slt64(m_136744, flat_dim_136757);
                    bool y_136773 = slt64((int64_t) 0, j_m_i_136756);
                    bool protect_assert_disj_136774 = cond_136747 || valid_136767;
                    bool range_valid_c_136775;
                    
                    if (!protect_assert_disj_136774) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool zzero_leq_i_p_m_t_s_136776 = sle64((int64_t) 0, i_p_m_t_s_136768);
                    bool i_p_m_t_s_leq_w_136777 = slt64(i_p_m_t_s_136768, next_stride_136735);
                    bool y_136778 = zzero_leq_i_p_m_t_s_136769 && i_p_m_t_s_leq_w_136770;
                    bool protect_assert_disj_136779 = cond_136747 || valid_136771;
                    bool range_valid_c_136780;
                    
                    if (!protect_assert_disj_136779) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_136754, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_136781 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136772;
                    bool y_136782 = zzero_lte_i_136761 && i_p_m_t_s_leq_w_136777;
                    bool forwards_ok_136783 = zzero_lte_i_136761 && y_136778;
                    bool ok_or_empty_136784 = zzero_136736 || y_136781;
                    bool protect_assert_disj_136785 = cond_136766 || y_136773;
                    bool y_136786 = zzero_leq_i_p_m_t_s_136776 && y_136782;
                    bool ok_or_empty_136787 = empty_slice_136763 || forwards_ok_136783;
                    bool protect_assert_disj_136788 = cond_136747 || ok_or_empty_136784;
                    bool index_certs_136789;
                    
                    if (!protect_assert_disj_136788) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) flat_dim_136757, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool loop_not_taken_136790 = !cond_136747;
                    bool protect_assert_disj_136791 = protect_assert_disj_136785 || loop_not_taken_136790;
                    bool index_certs_136792;
                    
                    if (!protect_assert_disj_136791) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool forwards_ok_136793 = i_lte_j_136762 && y_136786;
                    bool protect_assert_disj_136794 = cond_136747 || ok_or_empty_136787;
                    bool index_certs_136795;
                    
                    if (!protect_assert_disj_136794) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136796 = ok_or_empty_136787 || loop_not_taken_136790;
                    bool index_certs_136797;
                    
                    if (!protect_assert_disj_136796) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool ok_or_empty_136798 = empty_slice_136759 || forwards_ok_136793;
                    bool protect_assert_disj_136799 = cond_136747 || ok_or_empty_136798;
                    bool index_certs_136800;
                    
                    if (!protect_assert_disj_136799) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136801 = loop_not_taken_136790 || ok_or_empty_136798;
                    bool index_certs_136802;
                    
                    if (!protect_assert_disj_136801) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_138554 = (int64_t) 8 * num_merges_136739;
                    int64_t bytes_138555 = next_stride_136735 * binop_x_138554;
                    bool i_lte_j_136746 = sle64((int64_t) 0, next_stride_136735);
                    
                    if (mem_138556_cached_sizze_139585 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138556, &mem_138556_cached_sizze_139585, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138559_cached_sizze_139586 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138559, &mem_138559_cached_sizze_139586, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    
                    int64_t bytes_138568 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755;
                    int64_t binop_x_138584 = (int64_t) 8 * num_blocks_136754;
                    int64_t bytes_138585 = merge_block_sizze_136608 * binop_x_138584;
                    int64_t bytes_138630 = (int64_t) 16 * stride_136734;
                    
                    for (int64_t i_138248 = 0; i_138248 < num_merges_136739; i_138248++) {
                        int64_t start_136806 = mul64(next_stride_136735, i_138248);
                        int64_t j_m_i_136807 = sub64(loop_dz2084Uz2082U_136730, start_136806);
                        bool empty_slice_136808 = j_m_i_136807 == (int64_t) 0;
                        int64_t m_136809 = sub64(j_m_i_136807, (int64_t) 1);
                        int64_t i_p_m_t_s_136810 = add64(start_136806, m_136809);
                        bool zzero_leq_i_p_m_t_s_136811 = sle64((int64_t) 0, i_p_m_t_s_136810);
                        bool i_p_m_t_s_leq_w_136812 = slt64(i_p_m_t_s_136810, loop_dz2084Uz2082U_136730);
                        bool zzero_lte_i_136813 = sle64((int64_t) 0, start_136806);
                        bool i_lte_j_136814 = sle64(start_136806, loop_dz2084Uz2082U_136730);
                        bool y_136815 = i_p_m_t_s_leq_w_136812 && zzero_lte_i_136813;
                        bool y_136816 = zzero_leq_i_p_m_t_s_136811 && y_136815;
                        bool forwards_ok_136817 = i_lte_j_136814 && y_136816;
                        bool ok_or_empty_136818 = empty_slice_136808 || forwards_ok_136817;
                        bool index_certs_136819;
                        
                        if (!ok_or_empty_136818) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_136806, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_136730, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool i_p_m_t_s_leq_w_136820 = slt64(m_136744, j_m_i_136807);
                        bool y_136821 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136820;
                        bool forwards_ok_136822 = i_lte_j_136746 && y_136821;
                        bool ok_or_empty_136823 = zzero_136736 || forwards_ok_136822;
                        bool index_certs_136824;
                        
                        if (!ok_or_empty_136823) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) j_m_i_136807, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        if (cond_136747) {
                            int64_t dummy_137891;
                            int64_t dummy_137892;
                            
                            if (cond_136766) {
                                int64_t head_res_137893 = ((int64_t *) mem_param_138550.mem)[start_136806];
                                int64_t head_res_137894 = ((int64_t *) mem_param_138553.mem)[start_136806];
                                
                                dummy_137891 = head_res_137893;
                                dummy_137892 = head_res_137894;
                            } else {
                                int64_t slice_137895 = stride_136734 + start_136806;
                                int64_t head_res_137896 = ((int64_t *) mem_param_138550.mem)[slice_137895];
                                int64_t head_res_137897 = ((int64_t *) mem_param_138553.mem)[slice_137895];
                                
                                dummy_137891 = head_res_137896;
                                dummy_137892 = head_res_137897;
                            }
                            if (memblock_alloc(ctx, &mem_138631, bytes_138630, "mem_138631")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139334 = 0; nest_i_139334 < next_stride_136735; nest_i_139334++) {
                                ((int64_t *) mem_138631.mem)[nest_i_139334] = dummy_137891;
                            }
                            if (memblock_alloc(ctx, &mem_138633, bytes_138630, "mem_138633")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139335 = 0; nest_i_139335 < next_stride_136735; nest_i_139335++) {
                                ((int64_t *) mem_138633.mem)[nest_i_139335] = dummy_137892;
                            }
                            
                            int64_t data_137900;
                            int64_t i_137904 = (int64_t) 0;
                            
                            for (int64_t k_137903 = 0; k_137903 < next_stride_136735; k_137903++) {
                                int64_t j_137907 = sub64(k_137903, i_137904);
                                bool cond_137908 = j_137907 == j_m_i_136756;
                                bool cond_137909;
                                
                                if (cond_137908) {
                                    cond_137909 = 1;
                                } else {
                                    bool cond_137910 = slt64(i_137904, stride_136734);
                                    bool cond_f_res_137911;
                                    
                                    if (cond_137910) {
                                        bool x_137912 = sle64((int64_t) 0, j_137907);
                                        bool y_137913 = slt64(j_137907, j_m_i_136756);
                                        bool bounds_check_137914 = x_137912 && y_137913;
                                        bool index_certs_137915;
                                        
                                        if (!bounds_check_137914) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137919 = sle64((int64_t) 0, i_137904);
                                        bool bounds_check_137920 = cond_137910 && x_137919;
                                        bool index_certs_137921;
                                        
                                        if (!bounds_check_137920) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137916 = stride_136734 + j_137907;
                                        int64_t slice_137917 = start_136806 + slice_137916;
                                        int64_t leq_arg1_137918 = ((int64_t *) mem_param_138550.mem)[slice_137917];
                                        int64_t slice_137922 = start_136806 + i_137904;
                                        int64_t leq_arg0_137923 = ((int64_t *) mem_param_138550.mem)[slice_137922];
                                        bool defunc_0_leq_res_137924 = sle64(leq_arg0_137923, leq_arg1_137918);
                                        
                                        cond_f_res_137911 = defunc_0_leq_res_137924;
                                    } else {
                                        cond_f_res_137911 = 0;
                                    }
                                    cond_137909 = cond_f_res_137911;
                                }
                                
                                int64_t loopres_137925;
                                int64_t loopres_137926;
                                int64_t loopres_137927;
                                
                                if (cond_137909) {
                                    bool x_137929 = sle64((int64_t) 0, i_137904);
                                    bool y_137930 = slt64(i_137904, stride_136734);
                                    bool bounds_check_137931 = x_137929 && y_137930;
                                    bool index_certs_137932;
                                    
                                    if (!bounds_check_137931) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t tmp_137928 = add64((int64_t) 1, i_137904);
                                    int64_t slice_137933 = start_136806 + i_137904;
                                    int64_t tmp_137934 = ((int64_t *) mem_param_138550.mem)[slice_137933];
                                    int64_t tmp_137935 = ((int64_t *) mem_param_138553.mem)[slice_137933];
                                    
                                    loopres_137925 = tmp_137928;
                                    loopres_137926 = tmp_137934;
                                    loopres_137927 = tmp_137935;
                                } else {
                                    bool x_137936 = sle64((int64_t) 0, j_137907);
                                    bool y_137937 = slt64(j_137907, j_m_i_136756);
                                    bool bounds_check_137938 = x_137936 && y_137937;
                                    bool index_certs_137939;
                                    
                                    if (!bounds_check_137938) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137940 = stride_136734 + j_137907;
                                    int64_t slice_137941 = start_136806 + slice_137940;
                                    int64_t tmp_137942 = ((int64_t *) mem_param_138550.mem)[slice_137941];
                                    int64_t tmp_137943 = ((int64_t *) mem_param_138553.mem)[slice_137941];
                                    
                                    loopres_137925 = i_137904;
                                    loopres_137926 = tmp_137942;
                                    loopres_137927 = tmp_137943;
                                }
                                ((int64_t *) mem_138631.mem)[k_137903] = loopres_137926;
                                ((int64_t *) mem_138633.mem)[k_137903] = loopres_137927;
                                
                                int64_t i_tmp_139336 = loopres_137925;
                                
                                i_137904 = i_tmp_139336;
                            }
                            data_137900 = i_137904;
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138631, "mem_138631") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138633, "mem_138633") != 0)
                                return 1;
                        } else {
                            if (mem_138569_cached_sizze_139587 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138569, &mem_138569_cached_sizze_139587, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138571_cached_sizze_139588 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138571, &mem_138571_cached_sizze_139588, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138234 = 0; i_138234 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755; i_138234++) {
                                int64_t split_count_arg3_136886 = mul64(merge_block_sizze_136608, i_138234);
                                int64_t defunc_0_split_count_res_136887;
                                int64_t defunc_0_split_count_res_136888;
                                int64_t defunc_0_split_count_res_136889;
                                int64_t defunc_0_split_count_res_136890;
                                int64_t defunc_0_split_count_res_136891;
                                
                                if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_136887, &defunc_0_split_count_res_136888, &defunc_0_split_count_res_136889, &defunc_0_split_count_res_136890, &defunc_0_split_count_res_136891, (int64_t) 0, stride_136734, (int64_t) 0, j_m_i_136756, split_count_arg3_136886) != 0) {
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                bool loop_cond_136892 = slt64((int64_t) 0, defunc_0_split_count_res_136891);
                                bool defunc_0_split_count_res_136893;
                                int64_t defunc_0_split_count_res_136894;
                                int64_t defunc_0_split_count_res_136895;
                                int64_t defunc_0_split_count_res_136896;
                                int64_t defunc_0_split_count_res_136897;
                                int64_t defunc_0_split_count_res_136898;
                                bool loop_while_136899;
                                int64_t ss_136900;
                                int64_t ss_136901;
                                int64_t tt_136902;
                                int64_t tt_136903;
                                int64_t count_136904;
                                
                                loop_while_136899 = loop_cond_136892;
                                ss_136900 = defunc_0_split_count_res_136887;
                                ss_136901 = defunc_0_split_count_res_136888;
                                tt_136902 = defunc_0_split_count_res_136889;
                                tt_136903 = defunc_0_split_count_res_136890;
                                count_136904 = defunc_0_split_count_res_136891;
                                while (loop_while_136899) {
                                    int64_t zlze_lhs_136905 = sub64(ss_136901, ss_136900);
                                    bool cond_136906 = sle64(zlze_lhs_136905, (int64_t) 0);
                                    int64_t defunc_0_lifted_step_res_136907;
                                    int64_t defunc_0_lifted_step_res_136908;
                                    int64_t defunc_0_lifted_step_res_136909;
                                    int64_t defunc_0_lifted_step_res_136910;
                                    
                                    if (cond_136906) {
                                        int64_t tmp_137946 = add64(tt_136902, count_136904);
                                        
                                        defunc_0_lifted_step_res_136907 = ss_136900;
                                        defunc_0_lifted_step_res_136908 = tmp_137946;
                                        defunc_0_lifted_step_res_136909 = tt_136903;
                                        defunc_0_lifted_step_res_136910 = (int64_t) 0;
                                    } else {
                                        int64_t zlze_lhs_136912 = sub64(tt_136903, tt_136902);
                                        bool cond_136913 = sle64(zlze_lhs_136912, (int64_t) 0);
                                        int64_t defunc_0_lifted_step_res_f_res_136914;
                                        int64_t defunc_0_lifted_step_res_f_res_136915;
                                        int64_t defunc_0_lifted_step_res_f_res_136916;
                                        int64_t defunc_0_lifted_step_res_f_res_136917;
                                        
                                        if (cond_136913) {
                                            int64_t tmp_137947 = add64(ss_136900, count_136904);
                                            
                                            defunc_0_lifted_step_res_f_res_136914 = tmp_137947;
                                            defunc_0_lifted_step_res_f_res_136915 = tt_136902;
                                            defunc_0_lifted_step_res_f_res_136916 = tt_136903;
                                            defunc_0_lifted_step_res_f_res_136917 = (int64_t) 0;
                                        } else {
                                            bool cond_136919 = count_136904 == (int64_t) 1;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136920;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136921;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136922;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136923;
                                            
                                            if (cond_136919) {
                                                bool x_137949 = sle64((int64_t) 0, ss_136900);
                                                bool y_137950 = slt64(ss_136900, stride_136734);
                                                bool bounds_check_137951 = x_137949 && y_137950;
                                                bool index_certs_137952;
                                                
                                                if (!bounds_check_137951) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_136900, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:289:82-85\n   #14 ftsort.fut:283:1-289:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                bool x_137955 = sle64((int64_t) 0, tt_136902);
                                                bool y_137956 = slt64(tt_136902, j_m_i_136756);
                                                bool bounds_check_137957 = x_137955 && y_137956;
                                                bool index_certs_137958;
                                                
                                                if (!bounds_check_137957) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_136902, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:289:82-85\n   #14 ftsort.fut:283:1-289:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                int64_t slice_137953 = start_136806 + ss_136900;
                                                int64_t leq_arg1_137954 = ((int64_t *) mem_param_138550.mem)[slice_137953];
                                                int64_t slice_137959 = stride_136734 + tt_136902;
                                                int64_t slice_137960 = start_136806 + slice_137959;
                                                int64_t leq_arg0_137961 = ((int64_t *) mem_param_138550.mem)[slice_137960];
                                                bool defunc_0_leq_res_137962 = sle64(leq_arg0_137961, leq_arg1_137954);
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                
                                                if (defunc_0_leq_res_137962) {
                                                    int64_t tmp_137965 = add64((int64_t) 1, tt_136902);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = ss_136900;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tmp_137965;
                                                } else {
                                                    int64_t tmp_137966 = add64((int64_t) 1, ss_136900);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = tmp_137966;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tt_136902;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = tt_136903;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = (int64_t) 0;
                                            } else {
                                                int64_t m_136942 = sdiv64(count_136904, (int64_t) 2);
                                                int64_t n_136943 = sub64(count_136904, m_136942);
                                                bool cond_136944 = n_136943 == (int64_t) 0;
                                                int64_t zgze_lhs_136945 = add64(ss_136900, m_136942);
                                                bool cond_f_res_136946 = sle64(ss_136901, zgze_lhs_136945);
                                                bool x_136947 = !cond_136944;
                                                bool y_136948 = cond_f_res_136946 && x_136947;
                                                bool cond_136949 = cond_136944 || y_136948;
                                                bool leq_y_x_136950;
                                                
                                                if (cond_136949) {
                                                    leq_y_x_136950 = 1;
                                                } else {
                                                    bool x_136951 = sle64((int64_t) 0, zgze_lhs_136945);
                                                    bool y_136952 = slt64(zgze_lhs_136945, stride_136734);
                                                    bool bounds_check_136953 = x_136951 && y_136952;
                                                    bool index_certs_136954;
                                                    
                                                    if (!bounds_check_136953) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_136945, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:289:82-85\n   #14 ftsort.fut:283:1-289:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t zm_lhs_136957 = add64(tt_136902, n_136943);
                                                    int64_t leq_arg0_136958 = sub64(zm_lhs_136957, (int64_t) 1);
                                                    bool x_136959 = sle64((int64_t) 0, leq_arg0_136958);
                                                    bool y_136960 = slt64(leq_arg0_136958, j_m_i_136756);
                                                    bool bounds_check_136961 = x_136959 && y_136960;
                                                    bool index_certs_136962;
                                                    
                                                    if (!bounds_check_136961) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_136958, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:289:82-85\n   #14 ftsort.fut:283:1-289:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t slice_136955 = start_136806 + zgze_lhs_136945;
                                                    int64_t leq_arg1_136956 = ((int64_t *) mem_param_138550.mem)[slice_136955];
                                                    int64_t slice_136963 = stride_136734 + leq_arg0_136958;
                                                    int64_t slice_136964 = start_136806 + slice_136963;
                                                    int64_t leq_arg0_136965 = ((int64_t *) mem_param_138550.mem)[slice_136964];
                                                    bool defunc_0_leq_res_136966 = sle64(leq_arg0_136965, leq_arg1_136956);
                                                    
                                                    leq_y_x_136950 = defunc_0_leq_res_136966;
                                                }
                                                
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                                
                                                if (leq_y_x_136950) {
                                                    int64_t tmp_137967 = add64(tt_136902, n_136943);
                                                    int64_t tmp_137968 = sub64(count_136904, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tmp_137967;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tt_136903;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = tmp_137968;
                                                } else {
                                                    int64_t tmp_136972 = add64(tt_136902, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tt_136902;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tmp_136972;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = count_136904;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = ss_136900;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                            }
                                            defunc_0_lifted_step_res_f_res_136914 = defunc_0_lifted_step_res_f_res_f_res_136920;
                                            defunc_0_lifted_step_res_f_res_136915 = defunc_0_lifted_step_res_f_res_f_res_136921;
                                            defunc_0_lifted_step_res_f_res_136916 = defunc_0_lifted_step_res_f_res_f_res_136922;
                                            defunc_0_lifted_step_res_f_res_136917 = defunc_0_lifted_step_res_f_res_f_res_136923;
                                        }
                                        defunc_0_lifted_step_res_136907 = defunc_0_lifted_step_res_f_res_136914;
                                        defunc_0_lifted_step_res_136908 = defunc_0_lifted_step_res_f_res_136915;
                                        defunc_0_lifted_step_res_136909 = defunc_0_lifted_step_res_f_res_136916;
                                        defunc_0_lifted_step_res_136910 = defunc_0_lifted_step_res_f_res_136917;
                                    }
                                    
                                    int64_t loopres_136973;
                                    int64_t loopres_136974;
                                    int64_t loopres_136975;
                                    int64_t loopres_136976;
                                    int64_t loopres_136977;
                                    
                                    if (futrts_lifted_normalizze_8911(ctx, &loopres_136973, &loopres_136974, &loopres_136975, &loopres_136976, &loopres_136977, defunc_0_lifted_step_res_136907, ss_136901, defunc_0_lifted_step_res_136908, defunc_0_lifted_step_res_136909, defunc_0_lifted_step_res_136910) != 0) {
                                        err = 1;
                                        goto cleanup;
                                    }
                                    
                                    bool loop_cond_136978 = slt64((int64_t) 0, loopres_136977);
                                    bool loop_while_tmp_139341 = loop_cond_136978;
                                    int64_t ss_tmp_139342 = loopres_136973;
                                    int64_t ss_tmp_139343 = loopres_136974;
                                    int64_t tt_tmp_139344 = loopres_136975;
                                    int64_t tt_tmp_139345 = loopres_136976;
                                    int64_t count_tmp_139346 = loopres_136977;
                                    
                                    loop_while_136899 = loop_while_tmp_139341;
                                    ss_136900 = ss_tmp_139342;
                                    ss_136901 = ss_tmp_139343;
                                    tt_136902 = tt_tmp_139344;
                                    tt_136903 = tt_tmp_139345;
                                    count_136904 = count_tmp_139346;
                                }
                                defunc_0_split_count_res_136893 = loop_while_136899;
                                defunc_0_split_count_res_136894 = ss_136900;
                                defunc_0_split_count_res_136895 = ss_136901;
                                defunc_0_split_count_res_136896 = tt_136902;
                                defunc_0_split_count_res_136897 = tt_136903;
                                defunc_0_split_count_res_136898 = count_136904;
                                ((int64_t *) mem_138569)[i_138234] = defunc_0_split_count_res_136894;
                                ((int64_t *) mem_138571)[i_138234] = defunc_0_split_count_res_136896;
                            }
                            if (mem_138586_cached_sizze_139589 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138586, &mem_138586_cached_sizze_139589, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138589_cached_sizze_139590 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138589, &mem_138589_cached_sizze_139590, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138241 = 0; i_138241 < num_blocks_136754; i_138241++) {
                                bool y_136984 = slt64(i_138241, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool index_certs_136986;
                                
                                if (!y_136984) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138241, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136987 = ((int64_t *) mem_138569)[i_138241];
                                int64_t defunc_0_f_res_136988 = ((int64_t *) mem_138571)[i_138241];
                                int64_t tmp_136989 = add64((int64_t) 1, i_138241);
                                bool x_136990 = sle64((int64_t) 0, tmp_136989);
                                bool y_136991 = slt64(tmp_136989, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool bounds_check_136992 = x_136990 && y_136991;
                                bool index_certs_136993;
                                
                                if (!bounds_check_136992) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136989, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136994 = ((int64_t *) mem_138569)[tmp_136989];
                                int64_t defunc_0_f_res_136995 = ((int64_t *) mem_138571)[tmp_136989];
                                int64_t merge_sequential_arg2_136996 = add64(stride_136734, defunc_0_f_res_136988);
                                int64_t merge_sequential_arg2_136997 = add64(stride_136734, defunc_0_f_res_136995);
                                int64_t j_m_i_136998 = sub64(merge_sequential_arg2_136997, merge_sequential_arg2_136996);
                                bool empty_slice_136999 = j_m_i_136998 == (int64_t) 0;
                                int64_t m_137000 = sub64(j_m_i_136998, (int64_t) 1);
                                int64_t i_p_m_t_s_137001 = add64(merge_sequential_arg2_136996, m_137000);
                                bool zzero_leq_i_p_m_t_s_137002 = sle64((int64_t) 0, i_p_m_t_s_137001);
                                bool i_p_m_t_s_leq_w_137003 = slt64(i_p_m_t_s_137001, next_stride_136735);
                                bool zzero_lte_i_137004 = sle64((int64_t) 0, merge_sequential_arg2_136996);
                                bool i_lte_j_137005 = sle64(merge_sequential_arg2_136996, merge_sequential_arg2_136997);
                                bool y_137006 = i_p_m_t_s_leq_w_137003 && zzero_lte_i_137004;
                                bool y_137007 = zzero_leq_i_p_m_t_s_137002 && y_137006;
                                bool forwards_ok_137008 = i_lte_j_137005 && y_137007;
                                bool ok_or_empty_137009 = empty_slice_136999 || forwards_ok_137008;
                                bool index_certs_137010;
                                
                                if (!ok_or_empty_137009) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_136996, ":", (long long) merge_sequential_arg2_136997, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t j_m_i_137011 = sub64(defunc_0_f_res_136994, defunc_0_f_res_136987);
                                bool empty_slice_137012 = j_m_i_137011 == (int64_t) 0;
                                int64_t m_137013 = sub64(j_m_i_137011, (int64_t) 1);
                                int64_t i_p_m_t_s_137014 = add64(defunc_0_f_res_136987, m_137013);
                                bool zzero_leq_i_p_m_t_s_137015 = sle64((int64_t) 0, i_p_m_t_s_137014);
                                bool i_p_m_t_s_leq_w_137016 = slt64(i_p_m_t_s_137014, next_stride_136735);
                                bool zzero_lte_i_137017 = sle64((int64_t) 0, defunc_0_f_res_136987);
                                bool i_lte_j_137018 = sle64(defunc_0_f_res_136987, defunc_0_f_res_136994);
                                bool y_137019 = i_p_m_t_s_leq_w_137016 && zzero_lte_i_137017;
                                bool y_137020 = zzero_leq_i_p_m_t_s_137015 && y_137019;
                                bool forwards_ok_137021 = i_lte_j_137018 && y_137020;
                                bool ok_or_empty_137022 = empty_slice_137012 || forwards_ok_137021;
                                bool index_certs_137023;
                                
                                if (!ok_or_empty_137022) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136987, ":", (long long) defunc_0_f_res_136994, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool cond_137024 = slt64((int64_t) 0, j_m_i_137011);
                                int64_t dummy_137025;
                                int64_t dummy_137026;
                                
                                if (cond_137024) {
                                    bool index_certs_137969;
                                    
                                    if (!cond_137024) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:289:82-85\n   #13 ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137970 = start_136806 + defunc_0_f_res_136987;
                                    int64_t head_res_137971 = ((int64_t *) mem_param_138550.mem)[slice_137970];
                                    int64_t head_res_137972 = ((int64_t *) mem_param_138553.mem)[slice_137970];
                                    
                                    dummy_137025 = head_res_137971;
                                    dummy_137026 = head_res_137972;
                                } else {
                                    bool y_137031 = slt64((int64_t) 0, j_m_i_136998);
                                    bool index_certs_137032;
                                    
                                    if (!y_137031) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:289:82-85\n   #13 ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137033 = start_136806 + merge_sequential_arg2_136996;
                                    int64_t head_res_137034 = ((int64_t *) mem_param_138550.mem)[slice_137033];
                                    int64_t head_res_137035 = ((int64_t *) mem_param_138553.mem)[slice_137033];
                                    
                                    dummy_137025 = head_res_137034;
                                    dummy_137026 = head_res_137035;
                                }
                                for (int64_t nest_i_139349 = 0; nest_i_139349 < merge_block_sizze_136608; nest_i_139349++) {
                                    ((int64_t *) mem_138586)[i_138241 * merge_block_sizze_136608 + nest_i_139349] = dummy_137025;
                                }
                                for (int64_t nest_i_139350 = 0; nest_i_139350 < merge_block_sizze_136608; nest_i_139350++) {
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + nest_i_139350] = dummy_137026;
                                }
                                
                                int64_t data_137038;
                                int64_t i_137042 = (int64_t) 0;
                                
                                for (int64_t k_137041 = 0; k_137041 < merge_block_sizze_136608; k_137041++) {
                                    int64_t j_137045 = sub64(k_137041, i_137042);
                                    bool cond_137046 = j_137045 == j_m_i_136998;
                                    bool cond_137047;
                                    
                                    if (cond_137046) {
                                        cond_137047 = 1;
                                    } else {
                                        bool cond_137048 = slt64(i_137042, j_m_i_137011);
                                        bool cond_f_res_137049;
                                        
                                        if (cond_137048) {
                                            bool x_137973 = sle64((int64_t) 0, j_137045);
                                            bool y_137974 = slt64(j_137045, j_m_i_136998);
                                            bool bounds_check_137975 = x_137973 && y_137974;
                                            bool index_certs_137976;
                                            
                                            if (!bounds_check_137975) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            bool x_137980 = sle64((int64_t) 0, i_137042);
                                            bool bounds_check_137981 = cond_137048 && x_137980;
                                            bool index_certs_137982;
                                            
                                            if (!bounds_check_137981) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137977 = merge_sequential_arg2_136996 + j_137045;
                                            int64_t slice_137978 = start_136806 + slice_137977;
                                            int64_t leq_arg1_137979 = ((int64_t *) mem_param_138550.mem)[slice_137978];
                                            int64_t slice_137983 = defunc_0_f_res_136987 + i_137042;
                                            int64_t slice_137984 = start_136806 + slice_137983;
                                            int64_t leq_arg0_137985 = ((int64_t *) mem_param_138550.mem)[slice_137984];
                                            bool defunc_0_leq_res_137986 = sle64(leq_arg0_137985, leq_arg1_137979);
                                            
                                            cond_f_res_137049 = defunc_0_leq_res_137986;
                                        } else {
                                            cond_f_res_137049 = 0;
                                        }
                                        cond_137047 = cond_f_res_137049;
                                    }
                                    
                                    int64_t loopres_137064;
                                    int64_t loopres_137065;
                                    int64_t loopres_137066;
                                    
                                    if (cond_137047) {
                                        bool x_137988 = sle64((int64_t) 0, i_137042);
                                        bool y_137989 = slt64(i_137042, j_m_i_137011);
                                        bool bounds_check_137990 = x_137988 && y_137989;
                                        bool index_certs_137991;
                                        
                                        if (!bounds_check_137990) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t tmp_137987 = add64((int64_t) 1, i_137042);
                                        int64_t slice_137992 = defunc_0_f_res_136987 + i_137042;
                                        int64_t slice_137993 = start_136806 + slice_137992;
                                        int64_t tmp_137994 = ((int64_t *) mem_param_138550.mem)[slice_137993];
                                        int64_t tmp_137995 = ((int64_t *) mem_param_138553.mem)[slice_137993];
                                        
                                        loopres_137064 = tmp_137987;
                                        loopres_137065 = tmp_137994;
                                        loopres_137066 = tmp_137995;
                                    } else {
                                        bool x_137076 = sle64((int64_t) 0, j_137045);
                                        bool y_137077 = slt64(j_137045, j_m_i_136998);
                                        bool bounds_check_137078 = x_137076 && y_137077;
                                        bool index_certs_137079;
                                        
                                        if (!bounds_check_137078) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137080 = merge_sequential_arg2_136996 + j_137045;
                                        int64_t slice_137081 = start_136806 + slice_137080;
                                        int64_t tmp_137082 = ((int64_t *) mem_param_138550.mem)[slice_137081];
                                        int64_t tmp_137083 = ((int64_t *) mem_param_138553.mem)[slice_137081];
                                        
                                        loopres_137064 = i_137042;
                                        loopres_137065 = tmp_137082;
                                        loopres_137066 = tmp_137083;
                                    }
                                    ((int64_t *) mem_138586)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137065;
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137066;
                                    
                                    int64_t i_tmp_139351 = loopres_137064;
                                    
                                    i_137042 = i_tmp_139351;
                                }
                                data_137038 = i_137042;
                            }
                            if (memblock_alloc(ctx, &mem_138624, bytes_138585, "mem_138624")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138624.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138586, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_alloc(ctx, &mem_138628, bytes_138585, "mem_138628")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138628.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138589, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138624, "mem_138624") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138628, "mem_138628") != 0)
                                return 1;
                        }
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138556, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138651.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
                            return 1;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138559, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
                            return 1;
                    }
                    
                    int64_t flat_dim_137090 = next_stride_136735 * num_merges_136739;
                    
                    if (memblock_alloc(ctx, &mem_138662, bytes_138555, "mem_138662")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138662.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138556, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    if (memblock_alloc(ctx, &mem_138666, bytes_138555, "mem_138666")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138666.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138559, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    
                    bool loop_cond_137093 = slt64(next_stride_136735, flat_dim_136605);
                    
                    if (memblock_set(ctx, &mem_param_tmp_139325, &mem_138662, "mem_138662") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_tmp_139326, &mem_138666, "mem_138666") != 0)
                        return 1;
                    
                    int64_t loop_dz2084Uz2082U_tmp_139327 = flat_dim_137090;
                    bool loop_while_tmp_139328 = loop_cond_137093;
                    int64_t stride_tmp_139331 = next_stride_136735;
                    
                    if (memblock_set(ctx, &mem_param_138550, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_138553, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
                        return 1;
                    loop_dz2084Uz2082U_136730 = loop_dz2084Uz2082U_tmp_139327;
                    loop_while_136731 = loop_while_tmp_139328;
                    stride_136734 = stride_tmp_139331;
                }
                if (memblock_set(ctx, &ext_mem_138673, &mem_param_138550, "mem_param_138550") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_138672, &mem_param_138553, "mem_param_138553") != 0)
                    return 1;
                data_136725 = loop_dz2084Uz2082U_136730;
                data_136726 = loop_while_136731;
                data_136729 = stride_136734;
                if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
                    return 1;
                
                bool empty_slice_137094 = dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 == (int64_t) 0;
                bool zzero_leq_i_p_m_t_s_137095 = sle64((int64_t) 0, zs_lhs_136589);
                bool i_p_m_t_s_leq_w_137096 = slt64(zs_lhs_136589, data_136725);
                bool y_137097 = zzero_leq_i_p_m_t_s_137095 && i_p_m_t_s_leq_w_137096;
                bool ok_or_empty_137098 = empty_slice_137094 || y_137097;
                bool index_certs_137099;
                
                if (!ok_or_empty_137098) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] out of bounds for array of shape [", (long long) data_136725, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:289:82-85\n   #7  ftsort.fut:283:1-289:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_138676, &ext_mem_138672, "ext_mem_138672") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
                return 1;
            for (int64_t i_138257 = 0; i_138257 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138257++) {
                int64_t eta_p_137104 = ((int64_t *) ext_mem_138676.mem)[i_138257];
                bool x_137105 = sle64((int64_t) 0, eta_p_137104);
                bool y_137106 = slt64(eta_p_137104, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                bool bounds_check_137107 = x_137105 && y_137106;
                bool index_certs_137108;
                
                if (!bounds_check_137107) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137104, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool index_concat_cmp_137109 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, eta_p_137104);
                int64_t index_concat_branch_137110 = btoi_bool_i64(index_concat_cmp_137109);
                int64_t index_concat_branch_137111;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138006 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t index_primexp_138007 = add64(defunc_0_f_res_136532, index_concat_i_138006);
                    
                    index_concat_branch_137111 = index_primexp_138007;
                } else {
                    int64_t index_primexp_137114 = add64(defunc_0_f_res_136531, eta_p_137104);
                    
                    index_concat_branch_137111 = index_primexp_137114;
                }
                
                int64_t index_concat_branch_137115;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138008 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t slice_138009 = defunc_0_f_res_136532 + index_concat_i_138008;
                    int64_t slice_138010 = p_136403 + slice_138009;
                    int64_t index_concat_138011 = ((int64_t *) b_list_mem_138404.mem)[slice_138010];
                    
                    index_concat_branch_137115 = index_concat_138011;
                } else {
                    int64_t slice_137120 = defunc_0_f_res_136531 + eta_p_137104;
                    int64_t slice_137121 = p_136402 + slice_137120;
                    int64_t index_concat_137122 = ((int64_t *) a_list_mem_138403.mem)[slice_137121];
                    
                    index_concat_branch_137115 = index_concat_137122;
                }
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137110;
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137111;
                ((int64_t *) mem_138447)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137115;
            }
            if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
                return 1;
            for (int64_t i_138263 = 0; i_138263 < perThread_136439; i_138263++) {
                int64_t lifted_lambda_res_137141 = add64(zm_rhs_136550, i_138263);
                
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + i_138263] = lifted_lambda_res_137141;
            }
            
            bool cond_137142 = card_136551 == zp_rhs_136438;
            
            if (cond_137142) {
                bool y_138012 = slt64(card_136551, perThread_136439);
                bool index_certs_138013;
                
                if (!y_138012) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:199:46-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:289:82-85\n   #3  ftsort.fut:283:1-289:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + card_136551] = (int64_t) -1;
            }
        }
        for (int64_t nest_i_139358 = 0; nest_i_139358 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139358++) {
            ((int64_t *) mem_138410.mem)[lb_merge_136409 + nest_i_139358] = (int64_t) 0;
        }
        if (mem_138728_cached_sizze_139591 < bytes_138725) {
            err = lexical_realloc(ctx, &mem_138728, &mem_138728_cached_sizze_139591, bytes_138725);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_139359 = 0; nest_i_139359 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139359++) {
            ((int64_t *) mem_138728)[nest_i_139359] = (int64_t) -1;
        }
        for (int64_t nest_i_139360 = 0; nest_i_139360 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139360++) {
            ((int64_t *) mem_138406.mem)[lb_merge_136409 + nest_i_139360] = (int64_t) -1;
        }
        for (int64_t write_iter_138278 = 0; write_iter_138278 < dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440; write_iter_138278++) {
            int64_t new_index_138359 = squot64(write_iter_138278, perThread_136439);
            int64_t binop_y_138361 = perThread_136439 * new_index_138359;
            int64_t new_index_138362 = write_iter_138278 - binop_y_138361;
            int64_t write_iv_138282 = ((int64_t *) mem_138438)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138283 = ((int64_t *) mem_138441)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138284 = ((int64_t *) mem_138444)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138285 = ((int64_t *) mem_138447)[new_index_138359 * perThread_136439 + new_index_138362];
            
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138406.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138283;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138728)[write_iv_138282] = write_iv_138284;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138410.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138285;
            }
        }
        
        int64_t defunc_0_mergeFunc_par_res_137151 = ((int64_t *) mem_138421)[tmp_136386];
        int64_t defunc_0_mergeFunc_par_res_137152 = ((int64_t *) mem_138423)[tmp_136386];
        
        for (int64_t i_138291 = 0; i_138291 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; i_138291++) {
            int64_t eta_p_137164 = ((int64_t *) mem_138406.mem)[lb_merge_136409 + i_138291];
            int64_t eta_p_137165 = ((int64_t *) mem_138728)[i_138291];
            bool cond_137166 = eta_p_137164 == (int64_t) 0;
            int64_t lifted_lambda_res_137167;
            
            if (cond_137166) {
                int64_t tmp_138019 = add64(p_136402, eta_p_137165);
                
                lifted_lambda_res_137167 = tmp_138019;
            } else {
                bool cond_137169 = eta_p_137164 == (int64_t) 1;
                int64_t lifted_lambda_res_f_res_137170;
                
                if (cond_137169) {
                    int64_t tmp_138020 = add64(p_136403, eta_p_137165);
                    
                    lifted_lambda_res_f_res_137170 = tmp_138020;
                } else {
                    lifted_lambda_res_f_res_137170 = eta_p_137165;
                }
                lifted_lambda_res_137167 = lifted_lambda_res_f_res_137170;
            }
            ((int64_t *) mem_138408.mem)[lb_merge_136409 + i_138291] = lifted_lambda_res_137167;
        }
        
        int64_t corrected_ubs_137174 = add64(p_136402, defunc_0_mergeFunc_par_res_137151);
        int64_t corrected_ubs_137175 = add64(p_136403, defunc_0_mergeFunc_par_res_137152);
        bool cond_137194 = slt64(corrected_ubs_137174, zl_rhs_136372);
        bool loop_cond_f_res_137195 = slt64(corrected_ubs_137175, zl_rhs_136374);
        bool x_137196 = !cond_137194;
        bool y_137197 = loop_cond_f_res_137195 && x_137196;
        bool loop_cond_137198 = cond_137194 || y_137197;
        bool loop_while_tmp_139288 = loop_cond_137198;
        int64_t p_tmp_139292 = corrected_ubs_137174;
        int64_t p_tmp_139293 = corrected_ubs_137175;
        
        loop_while_136398 = loop_while_tmp_139288;
        p_136402 = p_tmp_139292;
        p_136403 = p_tmp_139293;
    }
    defunc_0_merge_pipeline_res_136392 = loop_while_136398;
    defunc_0_merge_pipeline_res_136396 = p_136402;
    defunc_0_merge_pipeline_res_136397 = p_136403;
    
    int64_t dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 = sub64(na_111382, defunc_0_merge_pipeline_res_136396);
    int64_t arg_137200 = add64(defunc_0_merge_pipeline_res_136396, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 = sub64(dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, arg_137200);
    int64_t dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 = sub64(nb_111383, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 = add64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202);
    bool empty_slice_137204 = dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 == (int64_t) 0;
    int64_t m_137205 = sub64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 1);
    int64_t i_p_m_t_s_137206 = add64(defunc_0_merge_pipeline_res_136396, m_137205);
    bool zzero_leq_i_p_m_t_s_137207 = sle64((int64_t) 0, i_p_m_t_s_137206);
    bool i_p_m_t_s_leq_w_137208 = slt64(i_p_m_t_s_137206, na_111382);
    bool zzero_lte_i_137209 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136396);
    bool i_lte_j_137210 = sle64(defunc_0_merge_pipeline_res_136396, na_111382);
    bool y_137211 = i_p_m_t_s_leq_w_137208 && zzero_lte_i_137209;
    bool y_137212 = zzero_leq_i_p_m_t_s_137207 && y_137211;
    bool forwards_ok_137213 = i_lte_j_137210 && y_137212;
    bool ok_or_empty_137214 = empty_slice_137204 || forwards_ok_137213;
    bool index_certs_137215;
    
    if (!ok_or_empty_137214) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136396, ":", (long long) na_111382, "] out of bounds for array of shape [", (long long) na_111382, "].", "-> #0  ftsort.fut:256:57-73\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137216 = slt64(na_111382, defunc_0_merge_pipeline_res_136396);
    bool valid_137217 = !bounds_invalid_upwards_137216;
    bool range_valid_c_137218;
    
    if (!valid_137217) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136396, "..<", (long long) na_111382, " is invalid.", "-> #0  ftsort.fut:256:45-55\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137220 = dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 == (int64_t) 0;
    int64_t m_137221 = sub64(dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202, (int64_t) 1);
    int64_t i_p_m_t_s_137222 = add64(defunc_0_merge_pipeline_res_136397, m_137221);
    bool zzero_leq_i_p_m_t_s_137223 = sle64((int64_t) 0, i_p_m_t_s_137222);
    bool i_p_m_t_s_leq_w_137224 = slt64(i_p_m_t_s_137222, nb_111383);
    bool zzero_lte_i_137225 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136397);
    bool i_lte_j_137226 = sle64(defunc_0_merge_pipeline_res_136397, nb_111383);
    bool y_137227 = i_p_m_t_s_leq_w_137224 && zzero_lte_i_137225;
    bool y_137228 = zzero_leq_i_p_m_t_s_137223 && y_137227;
    bool forwards_ok_137229 = i_lte_j_137226 && y_137228;
    bool ok_or_empty_137230 = empty_slice_137220 || forwards_ok_137229;
    bool index_certs_137231;
    
    if (!ok_or_empty_137230) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136397, ":", (long long) nb_111383, "] out of bounds for array of shape [", (long long) nb_111383, "].", "-> #0  ftsort.fut:257:57-73\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137232 = slt64(nb_111383, defunc_0_merge_pipeline_res_136397);
    bool valid_137233 = !bounds_invalid_upwards_137232;
    bool range_valid_c_137234;
    
    if (!valid_137233) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136397, "..<", (long long) nb_111383, " is invalid.", "-> #0  ftsort.fut:257:45-55\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138766 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool cond_137238 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zs_lhs_137239 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zp_rhs_137240 = sdiv_safe64(zs_lhs_137239, (int64_t) 20);
    int64_t min_num_blocks_137241 = add64((int64_t) 1, zp_rhs_137240);
    bool loop_cond_137242 = slt64((int64_t) 1, min_num_blocks_137241);
    bool smallest_pow_2_geq_than_res_137243;
    int64_t smallest_pow_2_geq_than_res_137244;
    bool loop_while_137245;
    int64_t x_137246;
    
    loop_while_137245 = loop_cond_137242;
    x_137246 = (int64_t) 1;
    while (loop_while_137245) {
        int64_t loopres_137247 = mul64((int64_t) 2, x_137246);
        bool loop_cond_137248 = slt64(loopres_137247, min_num_blocks_137241);
        bool loop_while_tmp_139365 = loop_cond_137248;
        int64_t x_tmp_139366 = loopres_137247;
        
        loop_while_137245 = loop_while_tmp_139365;
        x_137246 = x_tmp_139366;
    }
    smallest_pow_2_geq_than_res_137243 = loop_while_137245;
    smallest_pow_2_geq_than_res_137244 = x_137246;
    
    bool zzero_137249 = smallest_pow_2_geq_than_res_137244 == (int64_t) 0;
    bool nonzzero_137250 = !zzero_137249;
    bool protect_assert_disj_137251 = cond_137238 || nonzzero_137250;
    bool nonzzero_cert_137252;
    
    if (!protect_assert_disj_137251) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:289:82-85\n   #5  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_137253 = sdiv_safe64(zs_lhs_137239, smallest_pow_2_geq_than_res_137244);
    int64_t block_sizze_137254 = add64((int64_t) 1, zp_rhs_137253);
    bool y_137259 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
    bool protect_assert_disj_139025 = cond_137238 || y_137259;
    bool index_certs_137260;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:289:82-85\n   #5  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137278 = slt64(smallest_pow_2_geq_than_res_137244, (int64_t) 0);
    bool valid_137279 = !bounds_invalid_upwards_137278;
    bool protect_assert_disj_139033 = cond_137238 || valid_137279;
    bool range_valid_c_137280;
    
    if (!protect_assert_disj_139033) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_137244, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137282 = slt64(block_sizze_137254, (int64_t) 0);
    bool valid_137283 = !bounds_invalid_upwards_137282;
    bool protect_assert_disj_139035 = cond_137238 || valid_137283;
    bool range_valid_c_137284;
    
    if (!protect_assert_disj_139035) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_137254, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_137286 = sle64(block_sizze_137254, (int64_t) 1);
    int64_t tmp_137287 = sub64(block_sizze_137254, (int64_t) 2);
    bool bounds_invalid_upwards_137288 = slt64(tmp_137287, (int64_t) 0);
    bool valid_137290 = !bounds_invalid_upwards_137288;
    bool protect_assert_disj_137291 = cond_137286 || valid_137290;
    bool protect_assert_disj_139037 = cond_137238 || protect_assert_disj_137291;
    bool range_valid_c_137292;
    
    if (!protect_assert_disj_139037) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_137287, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_137768 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool empty_or_match_cert_137769;
    
    if (!dim_match_137768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] cannot match shape of type `[", (long long) dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, "](i64, i64, i64)`.", "-> #0  ftsort.fut:258:20-259:95\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137770 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == (int64_t) 0;
    int64_t m_137771 = sub64(dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, (int64_t) 1);
    int64_t i_p_m_t_s_137772 = add64(arg_137200, m_137771);
    bool zzero_leq_i_p_m_t_s_137773 = sle64((int64_t) 0, i_p_m_t_s_137772);
    bool i_p_m_t_s_leq_w_137774 = slt64(i_p_m_t_s_137772, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool zzero_lte_i_137775 = sle64((int64_t) 0, arg_137200);
    bool i_lte_j_137776 = sle64(arg_137200, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool y_137777 = i_p_m_t_s_leq_w_137774 && zzero_lte_i_137775;
    bool y_137778 = zzero_leq_i_p_m_t_s_137773 && y_137777;
    bool forwards_ok_137779 = i_lte_j_137776 && y_137778;
    bool ok_or_empty_137780 = empty_slice_137770 || forwards_ok_137779;
    bool index_certs_137781;
    
    if (!ok_or_empty_137780) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_137200, ":", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:260:21-79\n   #1  ftsort.fut:289:82-85\n   #2  ftsort.fut:283:1-289:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138767, bytes_138766, "mem_138767")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_139367++) {
        int64_t x_139368 = (int64_t) 0 + i_139367 * (int64_t) 1;
        
        ((int64_t *) mem_138767.mem)[i_139367] = x_139368;
    }
    
    int64_t flat_dim_137255 = smallest_pow_2_geq_than_res_137244 * block_sizze_137254;
    bool x_139020 = !cond_137238;
    int64_t greatest_divisor_leq_than_arg1_137257 = mul64((int64_t) 2, block_sizze_137254);
    int64_t merge_block_sizze_137258;
    
    if (x_139020) {
        int64_t x_139022;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139022, (int64_t) 8, greatest_divisor_leq_than_arg1_137257) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_137258 = x_139022;
    } else {
        merge_block_sizze_137258 = (int64_t) 0;
    }
    
    bool index_concat_cmp_137261 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 0);
    bool x_139016 = !index_concat_cmp_137261;
    bool protect_cond_conj_139026 = x_139016 && x_139020;
    int64_t index_concat_137266;
    
    if (protect_cond_conj_139026) {
        int64_t x_139018 = ((int64_t *) a_list_mem_138403.mem)[defunc_0_merge_pipeline_res_136396];
        
        index_concat_137266 = x_139018;
    } else {
        index_concat_137266 = (int64_t) 0;
    }
    
    int64_t index_concat_i_138035 = sub64((int64_t) 0, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
    int64_t slice_138036 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138035;
    bool protect_cond_conj_139027 = index_concat_cmp_137261 && x_139020;
    int64_t index_concat_138037;
    
    if (protect_cond_conj_139027) {
        int64_t x_139014 = ((int64_t *) b_list_mem_138404.mem)[slice_138036];
        
        index_concat_138037 = x_139014;
    } else {
        index_concat_138037 = (int64_t) 0;
    }
    
    int64_t index_concat_branch_137262;
    
    if (index_concat_cmp_137261) {
        index_concat_branch_137262 = index_concat_138037;
    } else {
        index_concat_branch_137262 = index_concat_137266;
    }
    
    int64_t defunc_0_reduce_res_138194;
    int64_t defunc_0_reduce_res_138195;
    
    if (x_139020) {
        int64_t x_139028;
        int64_t x_139029;
        int64_t redout_138293;
        int64_t redout_138294;
        
        redout_138293 = index_concat_branch_137262;
        redout_138294 = (int64_t) 0;
        for (int64_t i_138295 = 0; i_138295 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138295++) {
            bool index_concat_cmp_138354 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, i_138295);
            int64_t index_concat_branch_138358;
            
            if (index_concat_cmp_138354) {
                int64_t index_concat_i_138355 = sub64(i_138295, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                int64_t slice_138399 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138355;
                int64_t index_concat_138356 = ((int64_t *) b_list_mem_138404.mem)[slice_138399];
                
                index_concat_branch_138358 = index_concat_138356;
            } else {
                int64_t slice_138400 = defunc_0_merge_pipeline_res_136396 + i_138295;
                int64_t index_concat_138357 = ((int64_t *) a_list_mem_138403.mem)[slice_138400];
                
                index_concat_branch_138358 = index_concat_138357;
            }
            
            bool defunc_0_leq_res_137275 = sle64(redout_138293, index_concat_branch_138358);
            int64_t defunc_0_op_res_137276;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137276 = index_concat_branch_138358;
            } else {
                defunc_0_op_res_137276 = redout_138293;
            }
            
            int64_t defunc_0_op_res_137277;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137277 = i_138295;
            } else {
                defunc_0_op_res_137277 = redout_138294;
            }
            
            int64_t redout_tmp_139369 = defunc_0_op_res_137276;
            int64_t redout_tmp_139370 = defunc_0_op_res_137277;
            
            redout_138293 = redout_tmp_139369;
            redout_138294 = redout_tmp_139370;
        }
        x_139028 = redout_138293;
        x_139029 = redout_138294;
        defunc_0_reduce_res_138194 = x_139028;
        defunc_0_reduce_res_138195 = x_139029;
    } else {
        defunc_0_reduce_res_138194 = (int64_t) 0;
        defunc_0_reduce_res_138195 = (int64_t) 0;
    }
    
    int64_t distance_137289 = add64((int64_t) 1, tmp_137287);
    int64_t binop_x_138768 = (int64_t) 8 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138769 = block_sizze_137254 * binop_x_138768;
    int64_t bytes_138782 = (int64_t) 8 * block_sizze_137254;
    bool loop_cond_137369 = slt64(block_sizze_137254, flat_dim_137255);
    bool zzero_137370 = merge_block_sizze_137258 == (int64_t) 0;
    bool nonzzero_137371 = !zzero_137370;
    
    if (cond_137238) {
        if (memblock_set(ctx, &ext_mem_138972, &mem_138767, "mem_138767") != 0)
            return 1;
    } else {
        if (mem_138770_cached_sizze_139592 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138770, &mem_138770_cached_sizze_139592, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138773_cached_sizze_139593 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138773, &mem_138773_cached_sizze_139593, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138783_cached_sizze_139594 < bytes_138782) {
            err = lexical_realloc(ctx, &mem_138783, &mem_138783_cached_sizze_139594, bytes_138782);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138785_cached_sizze_139595 < bytes_138782) {
            err = lexical_realloc(ctx, &mem_138785, &mem_138785_cached_sizze_139595, bytes_138782);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138307 = 0; i_138307 < smallest_pow_2_geq_than_res_137244; i_138307++) {
            int64_t zp_lhs_137296 = mul64(block_sizze_137254, i_138307);
            
            for (int64_t i_138300 = 0; i_138300 < block_sizze_137254; i_138300++) {
                int64_t k_137300 = add64(zp_lhs_137296, i_138300);
                bool cond_137301 = slt64(k_137300, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
                int64_t lifted_lambda_res_137302;
                int64_t lifted_lambda_res_137303;
                
                if (cond_137301) {
                    bool x_138041 = sle64((int64_t) 0, k_137300);
                    bool bounds_check_138042 = cond_137301 && x_138041;
                    bool index_certs_138043;
                    
                    if (!bounds_check_138042) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_137300, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool index_concat_cmp_138044 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, k_137300);
                    int64_t index_concat_branch_138045;
                    
                    if (index_concat_cmp_138044) {
                        int64_t index_concat_i_138046 = sub64(k_137300, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                        int64_t slice_138047 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138046;
                        int64_t index_concat_138048 = ((int64_t *) b_list_mem_138404.mem)[slice_138047];
                        
                        index_concat_branch_138045 = index_concat_138048;
                    } else {
                        int64_t slice_138049 = defunc_0_merge_pipeline_res_136396 + k_137300;
                        int64_t index_concat_138050 = ((int64_t *) a_list_mem_138403.mem)[slice_138049];
                        
                        index_concat_branch_138045 = index_concat_138050;
                    }
                    lifted_lambda_res_137302 = index_concat_branch_138045;
                    lifted_lambda_res_137303 = k_137300;
                } else {
                    lifted_lambda_res_137302 = defunc_0_reduce_res_138194;
                    lifted_lambda_res_137303 = defunc_0_reduce_res_138195;
                }
                ((int64_t *) mem_138783)[i_138300] = lifted_lambda_res_137302;
                ((int64_t *) mem_138785)[i_138300] = lifted_lambda_res_137303;
            }
            if (!cond_137286) {
                for (int64_t i_137318 = 0; i_137318 < distance_137289; i_137318++) {
                    int64_t gt_arg1_137321 = add64((int64_t) 1, i_137318);
                    bool x_137322 = sle64((int64_t) 0, gt_arg1_137321);
                    bool y_137323 = slt64(gt_arg1_137321, block_sizze_137254);
                    bool bounds_check_137324 = x_137322 && y_137323;
                    bool index_certs_137325;
                    
                    if (!bounds_check_137324) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_137321, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_137327 = slt64(i_137318, block_sizze_137254);
                    bool index_certs_137328;
                    
                    if (!y_137327) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137318, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t gt_arg1_137326 = ((int64_t *) mem_138783)[gt_arg1_137321];
                    int64_t gt_arg0_137329 = ((int64_t *) mem_138783)[i_137318];
                    bool defunc_0_leq_res_137330 = sle64(gt_arg0_137329, gt_arg1_137326);
                    bool defunc_0_lifted_gt_res_137331 = !defunc_0_leq_res_137330;
                    bool s_137332;
                    int64_t s_137335;
                    bool loop_while_137336;
                    int64_t j_137339;
                    
                    loop_while_137336 = defunc_0_lifted_gt_res_137331;
                    j_137339 = i_137318;
                    while (loop_while_137336) {
                        bool x_137340 = sle64((int64_t) 0, j_137339);
                        bool y_137341 = slt64(j_137339, block_sizze_137254);
                        bool bounds_check_137342 = x_137340 && y_137341;
                        bool index_certs_137343;
                        
                        if (!bounds_check_137342) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137339, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_137346 = add64((int64_t) 1, j_137339);
                        bool x_137347 = sle64((int64_t) 0, copy_arg0_137346);
                        bool y_137348 = slt64(copy_arg0_137346, block_sizze_137254);
                        bool bounds_check_137349 = x_137347 && y_137348;
                        bool index_certs_137350;
                        
                        if (!bounds_check_137349) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_137346, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_137344 = ((int64_t *) mem_138783)[j_137339];
                        int64_t copy_arg0_137345 = ((int64_t *) mem_138785)[j_137339];
                        int64_t copy_arg0_137351 = ((int64_t *) mem_138783)[copy_arg0_137346];
                        int64_t copy_arg0_137352 = ((int64_t *) mem_138785)[copy_arg0_137346];
                        
                        ((int64_t *) mem_138783)[j_137339] = copy_arg0_137351;
                        ((int64_t *) mem_138785)[j_137339] = copy_arg0_137352;
                        ((int64_t *) mem_138783)[copy_arg0_137346] = copy_arg0_137344;
                        ((int64_t *) mem_138785)[copy_arg0_137346] = copy_arg0_137345;
                        
                        int64_t tmp_137357 = sub64(j_137339, (int64_t) 1);
                        bool cond_137358 = sle64((int64_t) 0, tmp_137357);
                        bool loop_cond_137359;
                        
                        if (cond_137358) {
                            bool y_138052 = slt64(tmp_137357, block_sizze_137254);
                            bool bounds_check_138053 = cond_137358 && y_138052;
                            bool index_certs_138054;
                            
                            if (!bounds_check_138053) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137357, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t gt_arg1_138051 = ((int64_t *) mem_138783)[j_137339];
                            int64_t gt_arg0_138055 = ((int64_t *) mem_138783)[tmp_137357];
                            bool defunc_0_leq_res_138056 = sle64(gt_arg0_138055, gt_arg1_138051);
                            bool defunc_0_lifted_gt_res_138057 = !defunc_0_leq_res_138056;
                            
                            loop_cond_137359 = defunc_0_lifted_gt_res_138057;
                        } else {
                            loop_cond_137359 = 0;
                        }
                        
                        bool loop_while_tmp_139377 = loop_cond_137359;
                        int64_t j_tmp_139380 = tmp_137357;
                        
                        loop_while_137336 = loop_while_tmp_139377;
                        j_137339 = j_tmp_139380;
                    }
                    s_137332 = loop_while_137336;
                    s_137335 = j_137339;
                }
            }
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138770, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138783, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138773, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138785, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
        }
        if (memblock_alloc(ctx, &mem_138838, bytes_138769, "mem_138838")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138838.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138770, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        if (memblock_alloc(ctx, &mem_138842, bytes_138769, "mem_138842")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138842.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138773, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        
        int64_t data_137372;
        bool data_137373;
        int64_t data_137376;
        int64_t loop_dz2084Uz2082U_137377;
        bool loop_while_137378;
        int64_t stride_137381;
        
        if (memblock_set(ctx, &mem_param_138846, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138849, &mem_138842, "mem_138842") != 0)
            return 1;
        loop_dz2084Uz2082U_137377 = flat_dim_137255;
        loop_while_137378 = loop_cond_137369;
        stride_137381 = block_sizze_137254;
        while (loop_while_137378) {
            int64_t next_stride_137382 = mul64((int64_t) 2, stride_137381);
            bool zzero_137383 = next_stride_137382 == (int64_t) 0;
            bool nonzzero_137384 = !zzero_137383;
            bool nonzzero_cert_137385;
            
            if (!nonzzero_137384) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:289:82-85\n   #5  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_137386 = sdiv64(flat_dim_137255, next_stride_137382);
            bool bounds_invalid_upwards_137387 = slt64(num_merges_137386, (int64_t) 0);
            bool valid_137388 = !bounds_invalid_upwards_137387;
            bool range_valid_c_137389;
            
            if (!valid_137388) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_137386, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_137391 = sub64(next_stride_137382, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137392 = sle64((int64_t) 0, m_137391);
            bool cond_137394 = slt64(next_stride_137382, (int64_t) 10);
            bool protect_assert_disj_137395 = nonzzero_137371 || cond_137394;
            bool nonzzero_cert_137396;
            
            if (!protect_assert_disj_137395) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_137397 = smod_safe64(next_stride_137382, merge_block_sizze_137258);
            bool num_blocks_137398 = zeze_lhs_137397 == (int64_t) 0;
            bool protect_assert_disj_137399 = cond_137394 || num_blocks_137398;
            bool assert_c_137400;
            
            if (!protect_assert_disj_137399) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_137401 = sdiv_safe64(next_stride_137382, merge_block_sizze_137258);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402 = add64((int64_t) 1, num_blocks_137401);
            int64_t j_m_i_137403 = sub64(next_stride_137382, stride_137381);
            int64_t flat_dim_137404 = merge_block_sizze_137258 * num_blocks_137401;
            bool bounds_invalid_upwards_137405 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, (int64_t) 0);
            bool empty_slice_137406 = j_m_i_137403 == (int64_t) 0;
            int64_t m_137407 = sub64(j_m_i_137403, (int64_t) 1);
            bool zzero_lte_i_137408 = sle64((int64_t) 0, stride_137381);
            bool i_lte_j_137409 = sle64(stride_137381, next_stride_137382);
            bool empty_slice_137410 = stride_137381 == (int64_t) 0;
            int64_t m_137411 = sub64(stride_137381, (int64_t) 1);
            bool bounds_invalid_upwards_137412 = slt64(num_blocks_137401, (int64_t) 0);
            bool cond_137413 = slt64((int64_t) 0, stride_137381);
            bool valid_137414 = !bounds_invalid_upwards_137405;
            int64_t i_p_m_t_s_137415 = add64(stride_137381, m_137407);
            bool zzero_leq_i_p_m_t_s_137416 = sle64((int64_t) 0, m_137411);
            bool i_p_m_t_s_leq_w_137417 = slt64(m_137411, next_stride_137382);
            bool valid_137418 = !bounds_invalid_upwards_137412;
            bool i_p_m_t_s_leq_w_137419 = slt64(m_137391, flat_dim_137404);
            bool y_137420 = slt64((int64_t) 0, j_m_i_137403);
            bool protect_assert_disj_137421 = cond_137394 || valid_137414;
            bool range_valid_c_137422;
            
            if (!protect_assert_disj_137421) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_137423 = sle64((int64_t) 0, i_p_m_t_s_137415);
            bool i_p_m_t_s_leq_w_137424 = slt64(i_p_m_t_s_137415, next_stride_137382);
            bool y_137425 = zzero_leq_i_p_m_t_s_137416 && i_p_m_t_s_leq_w_137417;
            bool protect_assert_disj_137426 = cond_137394 || valid_137418;
            bool range_valid_c_137427;
            
            if (!protect_assert_disj_137426) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_137401, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_137428 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137419;
            bool y_137429 = zzero_lte_i_137408 && i_p_m_t_s_leq_w_137424;
            bool forwards_ok_137430 = zzero_lte_i_137408 && y_137425;
            bool ok_or_empty_137431 = zzero_137383 || y_137428;
            bool protect_assert_disj_137432 = cond_137413 || y_137420;
            bool y_137433 = zzero_leq_i_p_m_t_s_137423 && y_137429;
            bool ok_or_empty_137434 = empty_slice_137410 || forwards_ok_137430;
            bool protect_assert_disj_137435 = cond_137394 || ok_or_empty_137431;
            bool index_certs_137436;
            
            if (!protect_assert_disj_137435) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) flat_dim_137404, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_137437 = !cond_137394;
            bool protect_assert_disj_137438 = protect_assert_disj_137432 || loop_not_taken_137437;
            bool index_certs_137439;
            
            if (!protect_assert_disj_137438) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_137440 = i_lte_j_137409 && y_137433;
            bool protect_assert_disj_137441 = cond_137394 || ok_or_empty_137434;
            bool index_certs_137442;
            
            if (!protect_assert_disj_137441) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137443 = ok_or_empty_137434 || loop_not_taken_137437;
            bool index_certs_137444;
            
            if (!protect_assert_disj_137443) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_137445 = empty_slice_137406 || forwards_ok_137440;
            bool protect_assert_disj_137446 = cond_137394 || ok_or_empty_137445;
            bool index_certs_137447;
            
            if (!protect_assert_disj_137446) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137448 = loop_not_taken_137437 || ok_or_empty_137445;
            bool index_certs_137449;
            
            if (!protect_assert_disj_137448) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138850 = (int64_t) 8 * num_merges_137386;
            int64_t bytes_138851 = next_stride_137382 * binop_x_138850;
            bool i_lte_j_137393 = sle64((int64_t) 0, next_stride_137382);
            
            if (mem_138852_cached_sizze_139596 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138852, &mem_138852_cached_sizze_139596, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138855_cached_sizze_139597 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138855, &mem_138855_cached_sizze_139597, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138864 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402;
            int64_t binop_x_138880 = (int64_t) 8 * num_blocks_137401;
            int64_t bytes_138881 = merge_block_sizze_137258 * binop_x_138880;
            int64_t bytes_138926 = (int64_t) 16 * stride_137381;
            
            for (int64_t i_138328 = 0; i_138328 < num_merges_137386; i_138328++) {
                int64_t start_137453 = mul64(next_stride_137382, i_138328);
                int64_t j_m_i_137454 = sub64(loop_dz2084Uz2082U_137377, start_137453);
                bool empty_slice_137455 = j_m_i_137454 == (int64_t) 0;
                int64_t m_137456 = sub64(j_m_i_137454, (int64_t) 1);
                int64_t i_p_m_t_s_137457 = add64(start_137453, m_137456);
                bool zzero_leq_i_p_m_t_s_137458 = sle64((int64_t) 0, i_p_m_t_s_137457);
                bool i_p_m_t_s_leq_w_137459 = slt64(i_p_m_t_s_137457, loop_dz2084Uz2082U_137377);
                bool zzero_lte_i_137460 = sle64((int64_t) 0, start_137453);
                bool i_lte_j_137461 = sle64(start_137453, loop_dz2084Uz2082U_137377);
                bool y_137462 = i_p_m_t_s_leq_w_137459 && zzero_lte_i_137460;
                bool y_137463 = zzero_leq_i_p_m_t_s_137458 && y_137462;
                bool forwards_ok_137464 = i_lte_j_137461 && y_137463;
                bool ok_or_empty_137465 = empty_slice_137455 || forwards_ok_137464;
                bool index_certs_137466;
                
                if (!ok_or_empty_137465) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_137453, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_137377, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_137467 = slt64(m_137391, j_m_i_137454);
                bool y_137468 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137467;
                bool forwards_ok_137469 = i_lte_j_137393 && y_137468;
                bool ok_or_empty_137470 = zzero_137383 || forwards_ok_137469;
                bool index_certs_137471;
                
                if (!ok_or_empty_137470) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) j_m_i_137454, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:289:82-85\n   #8  ftsort.fut:283:1-289:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_137394) {
                    int64_t dummy_138083;
                    int64_t dummy_138084;
                    
                    if (cond_137413) {
                        int64_t head_res_138085 = ((int64_t *) mem_param_138846.mem)[start_137453];
                        int64_t head_res_138086 = ((int64_t *) mem_param_138849.mem)[start_137453];
                        
                        dummy_138083 = head_res_138085;
                        dummy_138084 = head_res_138086;
                    } else {
                        int64_t slice_138087 = stride_137381 + start_137453;
                        int64_t head_res_138088 = ((int64_t *) mem_param_138846.mem)[slice_138087];
                        int64_t head_res_138089 = ((int64_t *) mem_param_138849.mem)[slice_138087];
                        
                        dummy_138083 = head_res_138088;
                        dummy_138084 = head_res_138089;
                    }
                    if (memblock_alloc(ctx, &mem_138927, bytes_138926, "mem_138927")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139390 = 0; nest_i_139390 < next_stride_137382; nest_i_139390++) {
                        ((int64_t *) mem_138927.mem)[nest_i_139390] = dummy_138083;
                    }
                    if (memblock_alloc(ctx, &mem_138929, bytes_138926, "mem_138929")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139391 = 0; nest_i_139391 < next_stride_137382; nest_i_139391++) {
                        ((int64_t *) mem_138929.mem)[nest_i_139391] = dummy_138084;
                    }
                    
                    int64_t data_138092;
                    int64_t i_138096 = (int64_t) 0;
                    
                    for (int64_t k_138095 = 0; k_138095 < next_stride_137382; k_138095++) {
                        int64_t j_138099 = sub64(k_138095, i_138096);
                        bool cond_138100 = j_138099 == j_m_i_137403;
                        bool cond_138101;
                        
                        if (cond_138100) {
                            cond_138101 = 1;
                        } else {
                            bool cond_138102 = slt64(i_138096, stride_137381);
                            bool cond_f_res_138103;
                            
                            if (cond_138102) {
                                bool x_138104 = sle64((int64_t) 0, j_138099);
                                bool y_138105 = slt64(j_138099, j_m_i_137403);
                                bool bounds_check_138106 = x_138104 && y_138105;
                                bool index_certs_138107;
                                
                                if (!bounds_check_138106) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_138111 = sle64((int64_t) 0, i_138096);
                                bool bounds_check_138112 = cond_138102 && x_138111;
                                bool index_certs_138113;
                                
                                if (!bounds_check_138112) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_138108 = stride_137381 + j_138099;
                                int64_t slice_138109 = start_137453 + slice_138108;
                                int64_t leq_arg1_138110 = ((int64_t *) mem_param_138846.mem)[slice_138109];
                                int64_t slice_138114 = start_137453 + i_138096;
                                int64_t leq_arg0_138115 = ((int64_t *) mem_param_138846.mem)[slice_138114];
                                bool defunc_0_leq_res_138116 = sle64(leq_arg0_138115, leq_arg1_138110);
                                
                                cond_f_res_138103 = defunc_0_leq_res_138116;
                            } else {
                                cond_f_res_138103 = 0;
                            }
                            cond_138101 = cond_f_res_138103;
                        }
                        
                        int64_t loopres_138117;
                        int64_t loopres_138118;
                        int64_t loopres_138119;
                        
                        if (cond_138101) {
                            bool x_138121 = sle64((int64_t) 0, i_138096);
                            bool y_138122 = slt64(i_138096, stride_137381);
                            bool bounds_check_138123 = x_138121 && y_138122;
                            bool index_certs_138124;
                            
                            if (!bounds_check_138123) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_138120 = add64((int64_t) 1, i_138096);
                            int64_t slice_138125 = start_137453 + i_138096;
                            int64_t tmp_138126 = ((int64_t *) mem_param_138846.mem)[slice_138125];
                            int64_t tmp_138127 = ((int64_t *) mem_param_138849.mem)[slice_138125];
                            
                            loopres_138117 = tmp_138120;
                            loopres_138118 = tmp_138126;
                            loopres_138119 = tmp_138127;
                        } else {
                            bool x_138128 = sle64((int64_t) 0, j_138099);
                            bool y_138129 = slt64(j_138099, j_m_i_137403);
                            bool bounds_check_138130 = x_138128 && y_138129;
                            bool index_certs_138131;
                            
                            if (!bounds_check_138130) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:289:82-85\n   #9  ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138132 = stride_137381 + j_138099;
                            int64_t slice_138133 = start_137453 + slice_138132;
                            int64_t tmp_138134 = ((int64_t *) mem_param_138846.mem)[slice_138133];
                            int64_t tmp_138135 = ((int64_t *) mem_param_138849.mem)[slice_138133];
                            
                            loopres_138117 = i_138096;
                            loopres_138118 = tmp_138134;
                            loopres_138119 = tmp_138135;
                        }
                        ((int64_t *) mem_138927.mem)[k_138095] = loopres_138118;
                        ((int64_t *) mem_138929.mem)[k_138095] = loopres_138119;
                        
                        int64_t i_tmp_139392 = loopres_138117;
                        
                        i_138096 = i_tmp_139392;
                    }
                    data_138092 = i_138096;
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138927, "mem_138927") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138929, "mem_138929") != 0)
                        return 1;
                } else {
                    if (mem_138865_cached_sizze_139598 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138865, &mem_138865_cached_sizze_139598, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138867_cached_sizze_139599 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138867, &mem_138867_cached_sizze_139599, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138314 = 0; i_138314 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402; i_138314++) {
                        int64_t split_count_arg3_137533 = mul64(merge_block_sizze_137258, i_138314);
                        int64_t defunc_0_split_count_res_137534;
                        int64_t defunc_0_split_count_res_137535;
                        int64_t defunc_0_split_count_res_137536;
                        int64_t defunc_0_split_count_res_137537;
                        int64_t defunc_0_split_count_res_137538;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_137534, &defunc_0_split_count_res_137535, &defunc_0_split_count_res_137536, &defunc_0_split_count_res_137537, &defunc_0_split_count_res_137538, (int64_t) 0, stride_137381, (int64_t) 0, j_m_i_137403, split_count_arg3_137533) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_137539 = slt64((int64_t) 0, defunc_0_split_count_res_137538);
                        bool defunc_0_split_count_res_137540;
                        int64_t defunc_0_split_count_res_137541;
                        int64_t defunc_0_split_count_res_137542;
                        int64_t defunc_0_split_count_res_137543;
                        int64_t defunc_0_split_count_res_137544;
                        int64_t defunc_0_split_count_res_137545;
                        bool loop_while_137546;
                        int64_t ss_137547;
                        int64_t ss_137548;
                        int64_t tt_137549;
                        int64_t tt_137550;
                        int64_t count_137551;
                        
                        loop_while_137546 = loop_cond_137539;
                        ss_137547 = defunc_0_split_count_res_137534;
                        ss_137548 = defunc_0_split_count_res_137535;
                        tt_137549 = defunc_0_split_count_res_137536;
                        tt_137550 = defunc_0_split_count_res_137537;
                        count_137551 = defunc_0_split_count_res_137538;
                        while (loop_while_137546) {
                            int64_t zlze_lhs_137552 = sub64(ss_137548, ss_137547);
                            bool cond_137553 = sle64(zlze_lhs_137552, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_137554;
                            int64_t defunc_0_lifted_step_res_137555;
                            int64_t defunc_0_lifted_step_res_137556;
                            int64_t defunc_0_lifted_step_res_137557;
                            
                            if (cond_137553) {
                                int64_t tmp_138138 = add64(tt_137549, count_137551);
                                
                                defunc_0_lifted_step_res_137554 = ss_137547;
                                defunc_0_lifted_step_res_137555 = tmp_138138;
                                defunc_0_lifted_step_res_137556 = tt_137550;
                                defunc_0_lifted_step_res_137557 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_137559 = sub64(tt_137550, tt_137549);
                                bool cond_137560 = sle64(zlze_lhs_137559, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_137561;
                                int64_t defunc_0_lifted_step_res_f_res_137562;
                                int64_t defunc_0_lifted_step_res_f_res_137563;
                                int64_t defunc_0_lifted_step_res_f_res_137564;
                                
                                if (cond_137560) {
                                    int64_t tmp_138139 = add64(ss_137547, count_137551);
                                    
                                    defunc_0_lifted_step_res_f_res_137561 = tmp_138139;
                                    defunc_0_lifted_step_res_f_res_137562 = tt_137549;
                                    defunc_0_lifted_step_res_f_res_137563 = tt_137550;
                                    defunc_0_lifted_step_res_f_res_137564 = (int64_t) 0;
                                } else {
                                    bool cond_137566 = count_137551 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137567;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137568;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137569;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137570;
                                    
                                    if (cond_137566) {
                                        bool x_138141 = sle64((int64_t) 0, ss_137547);
                                        bool y_138142 = slt64(ss_137547, stride_137381);
                                        bool bounds_check_138143 = x_138141 && y_138142;
                                        bool index_certs_138144;
                                        
                                        if (!bounds_check_138143) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_137547, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:289:82-85\n   #13 ftsort.fut:283:1-289:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_138147 = sle64((int64_t) 0, tt_137549);
                                        bool y_138148 = slt64(tt_137549, j_m_i_137403);
                                        bool bounds_check_138149 = x_138147 && y_138148;
                                        bool index_certs_138150;
                                        
                                        if (!bounds_check_138149) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_137549, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:289:82-85\n   #13 ftsort.fut:283:1-289:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_138145 = start_137453 + ss_137547;
                                        int64_t leq_arg1_138146 = ((int64_t *) mem_param_138846.mem)[slice_138145];
                                        int64_t slice_138151 = stride_137381 + tt_137549;
                                        int64_t slice_138152 = start_137453 + slice_138151;
                                        int64_t leq_arg0_138153 = ((int64_t *) mem_param_138846.mem)[slice_138152];
                                        bool defunc_0_leq_res_138154 = sle64(leq_arg0_138153, leq_arg1_138146);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        
                                        if (defunc_0_leq_res_138154) {
                                            int64_t tmp_138157 = add64((int64_t) 1, tt_137549);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = ss_137547;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tmp_138157;
                                        } else {
                                            int64_t tmp_138158 = add64((int64_t) 1, ss_137547);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = tmp_138158;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tt_137549;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = tt_137550;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = (int64_t) 0;
                                    } else {
                                        int64_t m_137589 = sdiv64(count_137551, (int64_t) 2);
                                        int64_t n_137590 = sub64(count_137551, m_137589);
                                        bool cond_137591 = n_137590 == (int64_t) 0;
                                        int64_t zgze_lhs_137592 = add64(ss_137547, m_137589);
                                        bool cond_f_res_137593 = sle64(ss_137548, zgze_lhs_137592);
                                        bool x_137594 = !cond_137591;
                                        bool y_137595 = cond_f_res_137593 && x_137594;
                                        bool cond_137596 = cond_137591 || y_137595;
                                        bool leq_y_x_137597;
                                        
                                        if (cond_137596) {
                                            leq_y_x_137597 = 1;
                                        } else {
                                            bool x_137598 = sle64((int64_t) 0, zgze_lhs_137592);
                                            bool y_137599 = slt64(zgze_lhs_137592, stride_137381);
                                            bool bounds_check_137600 = x_137598 && y_137599;
                                            bool index_certs_137601;
                                            
                                            if (!bounds_check_137600) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_137592, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:289:82-85\n   #13 ftsort.fut:283:1-289:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_137604 = add64(tt_137549, n_137590);
                                            int64_t leq_arg0_137605 = sub64(zm_lhs_137604, (int64_t) 1);
                                            bool x_137606 = sle64((int64_t) 0, leq_arg0_137605);
                                            bool y_137607 = slt64(leq_arg0_137605, j_m_i_137403);
                                            bool bounds_check_137608 = x_137606 && y_137607;
                                            bool index_certs_137609;
                                            
                                            if (!bounds_check_137608) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_137605, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:289:82-85\n   #13 ftsort.fut:283:1-289:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137602 = start_137453 + zgze_lhs_137592;
                                            int64_t leq_arg1_137603 = ((int64_t *) mem_param_138846.mem)[slice_137602];
                                            int64_t slice_137610 = stride_137381 + leq_arg0_137605;
                                            int64_t slice_137611 = start_137453 + slice_137610;
                                            int64_t leq_arg0_137612 = ((int64_t *) mem_param_138846.mem)[slice_137611];
                                            bool defunc_0_leq_res_137613 = sle64(leq_arg0_137612, leq_arg1_137603);
                                            
                                            leq_y_x_137597 = defunc_0_leq_res_137613;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                        
                                        if (leq_y_x_137597) {
                                            int64_t tmp_138159 = add64(tt_137549, n_137590);
                                            int64_t tmp_138160 = sub64(count_137551, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tmp_138159;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tt_137550;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = tmp_138160;
                                        } else {
                                            int64_t tmp_137619 = add64(tt_137549, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tt_137549;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tmp_137619;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = count_137551;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = ss_137547;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                    }
                                    defunc_0_lifted_step_res_f_res_137561 = defunc_0_lifted_step_res_f_res_f_res_137567;
                                    defunc_0_lifted_step_res_f_res_137562 = defunc_0_lifted_step_res_f_res_f_res_137568;
                                    defunc_0_lifted_step_res_f_res_137563 = defunc_0_lifted_step_res_f_res_f_res_137569;
                                    defunc_0_lifted_step_res_f_res_137564 = defunc_0_lifted_step_res_f_res_f_res_137570;
                                }
                                defunc_0_lifted_step_res_137554 = defunc_0_lifted_step_res_f_res_137561;
                                defunc_0_lifted_step_res_137555 = defunc_0_lifted_step_res_f_res_137562;
                                defunc_0_lifted_step_res_137556 = defunc_0_lifted_step_res_f_res_137563;
                                defunc_0_lifted_step_res_137557 = defunc_0_lifted_step_res_f_res_137564;
                            }
                            
                            int64_t loopres_137620;
                            int64_t loopres_137621;
                            int64_t loopres_137622;
                            int64_t loopres_137623;
                            int64_t loopres_137624;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_137620, &loopres_137621, &loopres_137622, &loopres_137623, &loopres_137624, defunc_0_lifted_step_res_137554, ss_137548, defunc_0_lifted_step_res_137555, defunc_0_lifted_step_res_137556, defunc_0_lifted_step_res_137557) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_137625 = slt64((int64_t) 0, loopres_137624);
                            bool loop_while_tmp_139397 = loop_cond_137625;
                            int64_t ss_tmp_139398 = loopres_137620;
                            int64_t ss_tmp_139399 = loopres_137621;
                            int64_t tt_tmp_139400 = loopres_137622;
                            int64_t tt_tmp_139401 = loopres_137623;
                            int64_t count_tmp_139402 = loopres_137624;
                            
                            loop_while_137546 = loop_while_tmp_139397;
                            ss_137547 = ss_tmp_139398;
                            ss_137548 = ss_tmp_139399;
                            tt_137549 = tt_tmp_139400;
                            tt_137550 = tt_tmp_139401;
                            count_137551 = count_tmp_139402;
                        }
                        defunc_0_split_count_res_137540 = loop_while_137546;
                        defunc_0_split_count_res_137541 = ss_137547;
                        defunc_0_split_count_res_137542 = ss_137548;
                        defunc_0_split_count_res_137543 = tt_137549;
                        defunc_0_split_count_res_137544 = tt_137550;
                        defunc_0_split_count_res_137545 = count_137551;
                        ((int64_t *) mem_138865)[i_138314] = defunc_0_split_count_res_137541;
                        ((int64_t *) mem_138867)[i_138314] = defunc_0_split_count_res_137543;
                    }
                    if (mem_138882_cached_sizze_139600 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138882, &mem_138882_cached_sizze_139600, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138885_cached_sizze_139601 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138885, &mem_138885_cached_sizze_139601, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138321 = 0; i_138321 < num_blocks_137401; i_138321++) {
                        bool y_137631 = slt64(i_138321, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool index_certs_137633;
                        
                        if (!y_137631) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138321, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137634 = ((int64_t *) mem_138865)[i_138321];
                        int64_t defunc_0_f_res_137635 = ((int64_t *) mem_138867)[i_138321];
                        int64_t tmp_137636 = add64((int64_t) 1, i_138321);
                        bool x_137637 = sle64((int64_t) 0, tmp_137636);
                        bool y_137638 = slt64(tmp_137636, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool bounds_check_137639 = x_137637 && y_137638;
                        bool index_certs_137640;
                        
                        if (!bounds_check_137639) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137636, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137641 = ((int64_t *) mem_138865)[tmp_137636];
                        int64_t defunc_0_f_res_137642 = ((int64_t *) mem_138867)[tmp_137636];
                        int64_t merge_sequential_arg2_137643 = add64(stride_137381, defunc_0_f_res_137635);
                        int64_t merge_sequential_arg2_137644 = add64(stride_137381, defunc_0_f_res_137642);
                        int64_t j_m_i_137645 = sub64(merge_sequential_arg2_137644, merge_sequential_arg2_137643);
                        bool empty_slice_137646 = j_m_i_137645 == (int64_t) 0;
                        int64_t m_137647 = sub64(j_m_i_137645, (int64_t) 1);
                        int64_t i_p_m_t_s_137648 = add64(merge_sequential_arg2_137643, m_137647);
                        bool zzero_leq_i_p_m_t_s_137649 = sle64((int64_t) 0, i_p_m_t_s_137648);
                        bool i_p_m_t_s_leq_w_137650 = slt64(i_p_m_t_s_137648, next_stride_137382);
                        bool zzero_lte_i_137651 = sle64((int64_t) 0, merge_sequential_arg2_137643);
                        bool i_lte_j_137652 = sle64(merge_sequential_arg2_137643, merge_sequential_arg2_137644);
                        bool y_137653 = i_p_m_t_s_leq_w_137650 && zzero_lte_i_137651;
                        bool y_137654 = zzero_leq_i_p_m_t_s_137649 && y_137653;
                        bool forwards_ok_137655 = i_lte_j_137652 && y_137654;
                        bool ok_or_empty_137656 = empty_slice_137646 || forwards_ok_137655;
                        bool index_certs_137657;
                        
                        if (!ok_or_empty_137656) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_137643, ":", (long long) merge_sequential_arg2_137644, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_137658 = sub64(defunc_0_f_res_137641, defunc_0_f_res_137634);
                        bool empty_slice_137659 = j_m_i_137658 == (int64_t) 0;
                        int64_t m_137660 = sub64(j_m_i_137658, (int64_t) 1);
                        int64_t i_p_m_t_s_137661 = add64(defunc_0_f_res_137634, m_137660);
                        bool zzero_leq_i_p_m_t_s_137662 = sle64((int64_t) 0, i_p_m_t_s_137661);
                        bool i_p_m_t_s_leq_w_137663 = slt64(i_p_m_t_s_137661, next_stride_137382);
                        bool zzero_lte_i_137664 = sle64((int64_t) 0, defunc_0_f_res_137634);
                        bool i_lte_j_137665 = sle64(defunc_0_f_res_137634, defunc_0_f_res_137641);
                        bool y_137666 = i_p_m_t_s_leq_w_137663 && zzero_lte_i_137664;
                        bool y_137667 = zzero_leq_i_p_m_t_s_137662 && y_137666;
                        bool forwards_ok_137668 = i_lte_j_137665 && y_137667;
                        bool ok_or_empty_137669 = empty_slice_137659 || forwards_ok_137668;
                        bool index_certs_137670;
                        
                        if (!ok_or_empty_137669) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_137634, ":", (long long) defunc_0_f_res_137641, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:289:82-85\n   #10 ftsort.fut:283:1-289:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_137671 = slt64((int64_t) 0, j_m_i_137658);
                        int64_t dummy_137672;
                        int64_t dummy_137673;
                        
                        if (cond_137671) {
                            bool index_certs_138161;
                            
                            if (!cond_137671) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138162 = start_137453 + defunc_0_f_res_137634;
                            int64_t head_res_138163 = ((int64_t *) mem_param_138846.mem)[slice_138162];
                            int64_t head_res_138164 = ((int64_t *) mem_param_138849.mem)[slice_138162];
                            
                            dummy_137672 = head_res_138163;
                            dummy_137673 = head_res_138164;
                        } else {
                            bool y_137678 = slt64((int64_t) 0, j_m_i_137645);
                            bool index_certs_137679;
                            
                            if (!y_137678) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:289:82-85\n   #12 ftsort.fut:283:1-289:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137680 = start_137453 + merge_sequential_arg2_137643;
                            int64_t head_res_137681 = ((int64_t *) mem_param_138846.mem)[slice_137680];
                            int64_t head_res_137682 = ((int64_t *) mem_param_138849.mem)[slice_137680];
                            
                            dummy_137672 = head_res_137681;
                            dummy_137673 = head_res_137682;
                        }
                        for (int64_t nest_i_139405 = 0; nest_i_139405 < merge_block_sizze_137258; nest_i_139405++) {
                            ((int64_t *) mem_138882)[i_138321 * merge_block_sizze_137258 + nest_i_139405] = dummy_137672;
                        }
                        for (int64_t nest_i_139406 = 0; nest_i_139406 < merge_block_sizze_137258; nest_i_139406++) {
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + nest_i_139406] = dummy_137673;
                        }
                        
                        int64_t data_137685;
                        int64_t i_137689 = (int64_t) 0;
                        
                        for (int64_t k_137688 = 0; k_137688 < merge_block_sizze_137258; k_137688++) {
                            int64_t j_137692 = sub64(k_137688, i_137689);
                            bool cond_137693 = j_137692 == j_m_i_137645;
                            bool cond_137694;
                            
                            if (cond_137693) {
                                cond_137694 = 1;
                            } else {
                                bool cond_137695 = slt64(i_137689, j_m_i_137658);
                                bool cond_f_res_137696;
                                
                                if (cond_137695) {
                                    bool x_138165 = sle64((int64_t) 0, j_137692);
                                    bool y_138166 = slt64(j_137692, j_m_i_137645);
                                    bool bounds_check_138167 = x_138165 && y_138166;
                                    bool index_certs_138168;
                                    
                                    if (!bounds_check_138167) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_138172 = sle64((int64_t) 0, i_137689);
                                    bool bounds_check_138173 = cond_137695 && x_138172;
                                    bool index_certs_138174;
                                    
                                    if (!bounds_check_138173) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_138169 = merge_sequential_arg2_137643 + j_137692;
                                    int64_t slice_138170 = start_137453 + slice_138169;
                                    int64_t leq_arg1_138171 = ((int64_t *) mem_param_138846.mem)[slice_138170];
                                    int64_t slice_138175 = defunc_0_f_res_137634 + i_137689;
                                    int64_t slice_138176 = start_137453 + slice_138175;
                                    int64_t leq_arg0_138177 = ((int64_t *) mem_param_138846.mem)[slice_138176];
                                    bool defunc_0_leq_res_138178 = sle64(leq_arg0_138177, leq_arg1_138171);
                                    
                                    cond_f_res_137696 = defunc_0_leq_res_138178;
                                } else {
                                    cond_f_res_137696 = 0;
                                }
                                cond_137694 = cond_f_res_137696;
                            }
                            
                            int64_t loopres_137711;
                            int64_t loopres_137712;
                            int64_t loopres_137713;
                            
                            if (cond_137694) {
                                bool x_138180 = sle64((int64_t) 0, i_137689);
                                bool y_138181 = slt64(i_137689, j_m_i_137658);
                                bool bounds_check_138182 = x_138180 && y_138181;
                                bool index_certs_138183;
                                
                                if (!bounds_check_138182) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_138179 = add64((int64_t) 1, i_137689);
                                int64_t slice_138184 = defunc_0_f_res_137634 + i_137689;
                                int64_t slice_138185 = start_137453 + slice_138184;
                                int64_t tmp_138186 = ((int64_t *) mem_param_138846.mem)[slice_138185];
                                int64_t tmp_138187 = ((int64_t *) mem_param_138849.mem)[slice_138185];
                                
                                loopres_137711 = tmp_138179;
                                loopres_137712 = tmp_138186;
                                loopres_137713 = tmp_138187;
                            } else {
                                bool x_137723 = sle64((int64_t) 0, j_137692);
                                bool y_137724 = slt64(j_137692, j_m_i_137645);
                                bool bounds_check_137725 = x_137723 && y_137724;
                                bool index_certs_137726;
                                
                                if (!bounds_check_137725) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:289:82-85\n   #11 ftsort.fut:283:1-289:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137727 = merge_sequential_arg2_137643 + j_137692;
                                int64_t slice_137728 = start_137453 + slice_137727;
                                int64_t tmp_137729 = ((int64_t *) mem_param_138846.mem)[slice_137728];
                                int64_t tmp_137730 = ((int64_t *) mem_param_138849.mem)[slice_137728];
                                
                                loopres_137711 = i_137689;
                                loopres_137712 = tmp_137729;
                                loopres_137713 = tmp_137730;
                            }
                            ((int64_t *) mem_138882)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137712;
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137713;
                            
                            int64_t i_tmp_139407 = loopres_137711;
                            
                            i_137689 = i_tmp_139407;
                        }
                        data_137685 = i_137689;
                    }
                    if (memblock_alloc(ctx, &mem_138920, bytes_138881, "mem_138920")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138920.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138882, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_alloc(ctx, &mem_138924, bytes_138881, "mem_138924")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138924.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138885, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138920, "mem_138920") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138924, "mem_138924") != 0)
                        return 1;
                }
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138852, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138947.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138855, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138944.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
                    return 1;
            }
            
            int64_t flat_dim_137737 = next_stride_137382 * num_merges_137386;
            
            if (memblock_alloc(ctx, &mem_138958, bytes_138851, "mem_138958")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138958.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138852, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            if (memblock_alloc(ctx, &mem_138962, bytes_138851, "mem_138962")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138962.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138855, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            
            bool loop_cond_137740 = slt64(next_stride_137382, flat_dim_137255);
            
            if (memblock_set(ctx, &mem_param_tmp_139381, &mem_138958, "mem_138958") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139382, &mem_138962, "mem_138962") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139383 = flat_dim_137737;
            bool loop_while_tmp_139384 = loop_cond_137740;
            int64_t stride_tmp_139387 = next_stride_137382;
            
            if (memblock_set(ctx, &mem_param_138846, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138849, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
                return 1;
            loop_dz2084Uz2082U_137377 = loop_dz2084Uz2082U_tmp_139383;
            loop_while_137378 = loop_while_tmp_139384;
            stride_137381 = stride_tmp_139387;
        }
        if (memblock_set(ctx, &ext_mem_138969, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138968, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        data_137372 = loop_dz2084Uz2082U_137377;
        data_137373 = loop_while_137378;
        data_137376 = stride_137381;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        
        bool empty_slice_137741 = dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_137742 = sle64((int64_t) 0, zs_lhs_137239);
        bool i_p_m_t_s_leq_w_137743 = slt64(zs_lhs_137239, data_137372);
        bool y_137744 = zzero_leq_i_p_m_t_s_137742 && i_p_m_t_s_leq_w_137743;
        bool ok_or_empty_137745 = empty_slice_137741 || y_137744;
        bool index_certs_137746;
        
        if (!ok_or_empty_137745) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] out of bounds for array of shape [", (long long) data_137372, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:289:82-85\n   #6  ftsort.fut:283:1-289:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138972, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
        return 1;
    for (int64_t i_138337 = 0; i_138337 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138337++) {
        int64_t eta_p_137751 = ((int64_t *) ext_mem_138972.mem)[i_138337];
        bool x_137752 = sle64((int64_t) 0, eta_p_137751);
        bool y_137753 = slt64(eta_p_137751, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
        bool bounds_check_137754 = x_137752 && y_137753;
        bool index_certs_137755;
        
        if (!bounds_check_137754) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137751, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:289:82-85\n   #5  ftsort.fut:283:1-289:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_concat_cmp_137756 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, eta_p_137751);
        int64_t index_concat_branch_137757 = btoi_bool_i64(index_concat_cmp_137756);
        int64_t index_concat_branch_137758;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138198 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t index_primexp_138199 = add64(defunc_0_merge_pipeline_res_136397, index_concat_i_138198);
            
            index_concat_branch_137758 = index_primexp_138199;
        } else {
            int64_t index_primexp_137761 = add64(defunc_0_merge_pipeline_res_136396, eta_p_137751);
            
            index_concat_branch_137758 = index_primexp_137761;
        }
        
        int64_t index_concat_branch_137762;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138200 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t slice_138201 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138200;
            int64_t index_concat_138202 = ((int64_t *) b_list_mem_138404.mem)[slice_138201];
            
            index_concat_branch_137762 = index_concat_138202;
        } else {
            int64_t slice_137766 = defunc_0_merge_pipeline_res_136396 + eta_p_137751;
            int64_t index_concat_137767 = ((int64_t *) a_list_mem_138403.mem)[slice_137766];
            
            index_concat_branch_137762 = index_concat_137767;
        }
        ((int64_t *) mem_138406.mem)[arg_137200 + i_138337] = index_concat_branch_137757;
        ((int64_t *) mem_138408.mem)[arg_137200 + i_138337] = index_concat_branch_137758;
        ((int64_t *) mem_138410.mem)[arg_137200 + i_138337] = index_concat_branch_137762;
    }
    if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138410, "mem_138410") != 0)
        return 1;
    prim_out_139284 = dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    if (memblock_set(ctx, &*mem_out_p_139571, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139572, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139573, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    *out_prim_out_139574 = prim_out_139284;
    
  cleanup:
    {
        free(mem_138421);
        free(mem_138423);
        free(mem_138438);
        free(mem_138441);
        free(mem_138444);
        free(mem_138447);
        free(mem_138474);
        free(mem_138477);
        free(mem_138487);
        free(mem_138489);
        free(mem_138556);
        free(mem_138559);
        free(mem_138569);
        free(mem_138571);
        free(mem_138586);
        free(mem_138589);
        free(mem_138728);
        free(mem_138770);
        free(mem_138773);
        free(mem_138783);
        free(mem_138785);
        free(mem_138852);
        free(mem_138855);
        free(mem_138865);
        free(mem_138867);
        free(mem_138882);
        free(mem_138885);
        if (memblock_unref(ctx, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138962, "mem_138962") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138958, "mem_138958") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138924, "mem_138924") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138920, "mem_138920") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138929, "mem_138929") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138927, "mem_138927") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138969, "ext_mem_138969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138666, "mem_138666") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138662, "mem_138662") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138628, "mem_138628") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138633, "mem_138633") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138631, "mem_138631") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138553, "mem_param_138553") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138550, "mem_param_138550") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138672, "ext_mem_138672") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138673, "ext_mem_138673") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeSorted_short(struct futhark_context *ctx, struct memblock *mem_out_p_139602, struct memblock *mem_out_p_139603, struct memblock *mem_out_p_139604, int64_t *out_prim_out_139605, struct memblock a_list_mem_138403, struct memblock b_list_mem_138404, int64_t na_98868, int64_t nb_98869, int64_t window_sizze_98870, int64_t threads_98871)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138421_cached_sizze_139606 = 0;
    unsigned char *mem_138421 = NULL;
    int64_t mem_138423_cached_sizze_139607 = 0;
    unsigned char *mem_138423 = NULL;
    int64_t mem_138438_cached_sizze_139608 = 0;
    unsigned char *mem_138438 = NULL;
    int64_t mem_138441_cached_sizze_139609 = 0;
    unsigned char *mem_138441 = NULL;
    int64_t mem_138444_cached_sizze_139610 = 0;
    unsigned char *mem_138444 = NULL;
    int64_t mem_138447_cached_sizze_139611 = 0;
    unsigned char *mem_138447 = NULL;
    int64_t mem_138474_cached_sizze_139612 = 0;
    unsigned char *mem_138474 = NULL;
    int64_t mem_138477_cached_sizze_139613 = 0;
    unsigned char *mem_138477 = NULL;
    int64_t mem_138487_cached_sizze_139614 = 0;
    unsigned char *mem_138487 = NULL;
    int64_t mem_138489_cached_sizze_139615 = 0;
    unsigned char *mem_138489 = NULL;
    int64_t mem_138556_cached_sizze_139616 = 0;
    unsigned char *mem_138556 = NULL;
    int64_t mem_138559_cached_sizze_139617 = 0;
    unsigned char *mem_138559 = NULL;
    int64_t mem_138569_cached_sizze_139618 = 0;
    unsigned char *mem_138569 = NULL;
    int64_t mem_138571_cached_sizze_139619 = 0;
    unsigned char *mem_138571 = NULL;
    int64_t mem_138586_cached_sizze_139620 = 0;
    unsigned char *mem_138586 = NULL;
    int64_t mem_138589_cached_sizze_139621 = 0;
    unsigned char *mem_138589 = NULL;
    int64_t mem_138728_cached_sizze_139622 = 0;
    unsigned char *mem_138728 = NULL;
    int64_t mem_138770_cached_sizze_139623 = 0;
    unsigned char *mem_138770 = NULL;
    int64_t mem_138773_cached_sizze_139624 = 0;
    unsigned char *mem_138773 = NULL;
    int64_t mem_138783_cached_sizze_139625 = 0;
    unsigned char *mem_138783 = NULL;
    int64_t mem_138785_cached_sizze_139626 = 0;
    unsigned char *mem_138785 = NULL;
    int64_t mem_138852_cached_sizze_139627 = 0;
    unsigned char *mem_138852 = NULL;
    int64_t mem_138855_cached_sizze_139628 = 0;
    unsigned char *mem_138855 = NULL;
    int64_t mem_138865_cached_sizze_139629 = 0;
    unsigned char *mem_138865 = NULL;
    int64_t mem_138867_cached_sizze_139630 = 0;
    unsigned char *mem_138867 = NULL;
    int64_t mem_138882_cached_sizze_139631 = 0;
    unsigned char *mem_138882 = NULL;
    int64_t mem_138885_cached_sizze_139632 = 0;
    unsigned char *mem_138885 = NULL;
    struct memblock mem_param_tmp_139382;
    
    mem_param_tmp_139382.references = NULL;
    
    struct memblock mem_param_tmp_139381;
    
    mem_param_tmp_139381.references = NULL;
    
    struct memblock mem_138962;
    
    mem_138962.references = NULL;
    
    struct memblock mem_138958;
    
    mem_138958.references = NULL;
    
    struct memblock mem_138924;
    
    mem_138924.references = NULL;
    
    struct memblock mem_138920;
    
    mem_138920.references = NULL;
    
    struct memblock mem_138929;
    
    mem_138929.references = NULL;
    
    struct memblock mem_138927;
    
    mem_138927.references = NULL;
    
    struct memblock ext_mem_138944;
    
    ext_mem_138944.references = NULL;
    
    struct memblock ext_mem_138947;
    
    ext_mem_138947.references = NULL;
    
    struct memblock mem_param_138849;
    
    mem_param_138849.references = NULL;
    
    struct memblock mem_param_138846;
    
    mem_param_138846.references = NULL;
    
    struct memblock ext_mem_138968;
    
    ext_mem_138968.references = NULL;
    
    struct memblock ext_mem_138969;
    
    ext_mem_138969.references = NULL;
    
    struct memblock mem_138842;
    
    mem_138842.references = NULL;
    
    struct memblock mem_138838;
    
    mem_138838.references = NULL;
    
    struct memblock ext_mem_138972;
    
    ext_mem_138972.references = NULL;
    
    struct memblock mem_138767;
    
    mem_138767.references = NULL;
    
    struct memblock mem_param_tmp_139326;
    
    mem_param_tmp_139326.references = NULL;
    
    struct memblock mem_param_tmp_139325;
    
    mem_param_tmp_139325.references = NULL;
    
    struct memblock mem_138666;
    
    mem_138666.references = NULL;
    
    struct memblock mem_138662;
    
    mem_138662.references = NULL;
    
    struct memblock mem_138628;
    
    mem_138628.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock mem_138633;
    
    mem_138633.references = NULL;
    
    struct memblock mem_138631;
    
    mem_138631.references = NULL;
    
    struct memblock ext_mem_138648;
    
    ext_mem_138648.references = NULL;
    
    struct memblock ext_mem_138651;
    
    ext_mem_138651.references = NULL;
    
    struct memblock mem_param_138553;
    
    mem_param_138553.references = NULL;
    
    struct memblock mem_param_138550;
    
    mem_param_138550.references = NULL;
    
    struct memblock ext_mem_138672;
    
    ext_mem_138672.references = NULL;
    
    struct memblock ext_mem_138673;
    
    ext_mem_138673.references = NULL;
    
    struct memblock mem_138546;
    
    mem_138546.references = NULL;
    
    struct memblock mem_138542;
    
    mem_138542.references = NULL;
    
    struct memblock ext_mem_138676;
    
    ext_mem_138676.references = NULL;
    
    struct memblock mem_138471;
    
    mem_138471.references = NULL;
    
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t prim_out_139284;
    int64_t dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368 = add64(na_98868, nb_98869);
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139285 = 0; nest_i_139285 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139285++) {
        ((int64_t *) mem_138406.mem)[nest_i_139285] = (int64_t) -1;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139286 = 0; nest_i_139286 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139286++) {
        ((int64_t *) mem_138408.mem)[nest_i_139286] = (int64_t) -1;
    }
    
    int64_t bytes_138409 = (int64_t) 2 * dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    
    if (memblock_alloc(ctx, &mem_138410, bytes_138409, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t nest_i_139287 = 0; nest_i_139287 < dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368; nest_i_139287++) {
        ((int16_t *) mem_138410.mem)[nest_i_139287] = (int16_t) 0;
    }
    
    int64_t zl_rhs_136372 = sub64(na_98868, window_sizze_98870);
    bool cond_136373 = slt64((int64_t) 0, zl_rhs_136372);
    int64_t zl_rhs_136374 = sub64(nb_98869, window_sizze_98870);
    bool loop_cond_f_res_136375 = slt64((int64_t) 0, zl_rhs_136374);
    bool x_136376 = !cond_136373;
    bool y_136377 = loop_cond_f_res_136375 && x_136376;
    bool loop_cond_136378 = cond_136373 || y_136377;
    bool zzero_136379 = threads_98871 == (int64_t) 0;
    bool nonzzero_136380 = !zzero_136379;
    bool loop_not_taken_136381 = !loop_cond_136378;
    bool protect_assert_disj_136382 = nonzzero_136380 || loop_not_taken_136381;
    bool nonzzero_cert_136383;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:184:30-38\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool nonzzero_cert_136385;
    
    if (!protect_assert_disj_136382) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  ftsort.fut:117:30-38\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:273:82-85\n   #4  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_136386 = sub64(threads_98871, (int64_t) 1);
    bool x_136387 = sle64((int64_t) 0, tmp_136386);
    bool y_136388 = slt64(tmp_136386, threads_98871);
    bool bounds_check_136389 = x_136387 && y_136388;
    bool protect_assert_disj_136390 = loop_not_taken_136381 || bounds_check_136389;
    bool index_certs_136391;
    
    if (!protect_assert_disj_136390) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136386, "] out of bounds for array of shape [", (long long) threads_98871, "].", "-> #0  ftsort.fut:207:7-33\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138420 = (int64_t) 8 * threads_98871;
    int64_t binop_x_138445 = (int64_t) 2 * threads_98871;
    
    if (mem_138421_cached_sizze_139606 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138421, &mem_138421_cached_sizze_139606, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138423_cached_sizze_139607 < bytes_138420) {
        err = lexical_realloc(ctx, &mem_138423, &mem_138423_cached_sizze_139607, bytes_138420);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    bool defunc_0_merge_pipeline_res_136392;
    int64_t defunc_0_merge_pipeline_res_136396;
    int64_t defunc_0_merge_pipeline_res_136397;
    bool loop_while_136398;
    int64_t p_136402;
    int64_t p_136403;
    
    loop_while_136398 = loop_cond_136378;
    p_136402 = (int64_t) 0;
    p_136403 = (int64_t) 0;
    while (loop_while_136398) {
        int64_t min_arg1_136404 = sub64(na_98868, p_136402);
        int64_t min_res_136405 = smin64(window_sizze_98870, min_arg1_136404);
        int64_t min_arg1_136406 = sub64(nb_98869, p_136403);
        int64_t min_res_136407 = smin64(window_sizze_98870, min_arg1_136406);
        int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408 = add64(min_res_136405, min_res_136407);
        int64_t lb_merge_136409 = add64(p_136402, p_136403);
        int64_t zp_lhs_136410 = add64(min_res_136405, lb_merge_136409);
        int64_t ub_merge_136411 = add64(min_res_136407, zp_lhs_136410);
        int64_t as_136412 = add64(p_136402, min_res_136405);
        bool empty_slice_136413 = min_res_136405 == (int64_t) 0;
        int64_t m_136414 = sub64(min_res_136405, (int64_t) 1);
        int64_t i_p_m_t_s_136415 = add64(p_136402, m_136414);
        bool zzero_leq_i_p_m_t_s_136416 = sle64((int64_t) 0, i_p_m_t_s_136415);
        bool i_p_m_t_s_leq_w_136417 = slt64(i_p_m_t_s_136415, na_98868);
        bool zzero_lte_i_136418 = sle64((int64_t) 0, p_136402);
        bool i_lte_j_136419 = sle64(p_136402, as_136412);
        bool y_136420 = i_p_m_t_s_leq_w_136417 && zzero_lte_i_136418;
        bool y_136421 = zzero_leq_i_p_m_t_s_136416 && y_136420;
        bool forwards_ok_136422 = i_lte_j_136419 && y_136421;
        bool ok_or_empty_136423 = empty_slice_136413 || forwards_ok_136422;
        bool index_certs_136424;
        
        if (!ok_or_empty_136423) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136402, ":", (long long) as_136412, "] out of bounds for array of shape [", (long long) na_98868, "].", "-> #0  ftsort.fut:243:16-46\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t bs_136425 = add64(p_136403, min_res_136407);
        bool empty_slice_136426 = min_res_136407 == (int64_t) 0;
        int64_t m_136427 = sub64(min_res_136407, (int64_t) 1);
        int64_t i_p_m_t_s_136428 = add64(p_136403, m_136427);
        bool zzero_leq_i_p_m_t_s_136429 = sle64((int64_t) 0, i_p_m_t_s_136428);
        bool i_p_m_t_s_leq_w_136430 = slt64(i_p_m_t_s_136428, nb_98869);
        bool zzero_lte_i_136431 = sle64((int64_t) 0, p_136403);
        bool i_lte_j_136432 = sle64(p_136403, bs_136425);
        bool y_136433 = i_p_m_t_s_leq_w_136430 && zzero_lte_i_136431;
        bool y_136434 = zzero_leq_i_p_m_t_s_136429 && y_136433;
        bool forwards_ok_136435 = i_lte_j_136432 && y_136434;
        bool ok_or_empty_136436 = empty_slice_136426 || forwards_ok_136435;
        bool index_certs_136437;
        
        if (!ok_or_empty_136436) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) p_136403, ":", (long long) bs_136425, "] out of bounds for array of shape [", (long long) nb_98869, "].", "-> #0  ftsort.fut:244:16-46\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zp_rhs_136438 = sdiv64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, threads_98871);
        int64_t perThread_136439 = add64((int64_t) 1, zp_rhs_136438);
        int64_t bytes_138437 = perThread_136439 * bytes_138420;
        int64_t bytes_138446 = perThread_136439 * binop_x_138445;
        int64_t bytes_138727 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        int64_t j_m_i_137176 = sub64(ub_merge_136411, lb_merge_136409);
        bool empty_slice_137177 = j_m_i_137176 == (int64_t) 0;
        int64_t m_137178 = sub64(j_m_i_137176, (int64_t) 1);
        int64_t i_p_m_t_s_137179 = add64(lb_merge_136409, m_137178);
        bool zzero_leq_i_p_m_t_s_137180 = sle64((int64_t) 0, i_p_m_t_s_137179);
        bool i_p_m_t_s_leq_w_137181 = slt64(i_p_m_t_s_137179, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
        bool zzero_lte_i_137182 = sle64((int64_t) 0, lb_merge_136409);
        bool i_lte_j_137183 = sle64(lb_merge_136409, ub_merge_136411);
        bool y_137184 = i_p_m_t_s_leq_w_137181 && zzero_lte_i_137182;
        bool y_137185 = zzero_leq_i_p_m_t_s_137180 && y_137184;
        bool forwards_ok_137186 = i_lte_j_137183 && y_137185;
        bool ok_or_empty_137187 = empty_slice_137177 || forwards_ok_137186;
        bool index_certs_137188;
        
        if (!ok_or_empty_137187) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) lb_merge_136409, ":", (long long) ub_merge_136411, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool dim_match_137189 = j_m_i_137176 == dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408;
        bool empty_or_match_cert_137190;
        
        if (!dim_match_137189) {
            set_error(ctx, msgprintf("Error: %s%s%lld%s%s%s%lld%s%s\n\nBacktrace:\n%s", "Shape ", "[", (long long) j_m_i_137176, "]", " of slice does not match shape ", "[", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, "]", " of value.", "-> #0  ftsort.fut:253:41-90\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440 = mul64(threads_98871, perThread_136439);
        
        for (int64_t i_138210 = 0; i_138210 < threads_98871; i_138210++) {
            int64_t zs_lhs_136444 = mul64(dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408, i_138210);
            int64_t index_136445 = sdiv64(zs_lhs_136444, threads_98871);
            bool cond_136446 = slt64(min_res_136405, index_136445);
            int64_t atop_136447;
            
            if (cond_136446) {
                atop_136447 = min_res_136405;
            } else {
                atop_136447 = index_136445;
            }
            
            int64_t btop_136448;
            
            if (cond_136446) {
                int64_t btop_t_res_137808 = sub64(index_136445, min_res_136405);
                
                btop_136448 = btop_t_res_137808;
            } else {
                btop_136448 = (int64_t) 0;
            }
            
            bool defunc_0_f_res_136450;
            int64_t defunc_0_f_res_136451;
            int64_t defunc_0_f_res_136452;
            int64_t defunc_0_f_res_136453;
            int64_t defunc_0_f_res_136454;
            int64_t defunc_0_f_res_136455;
            bool loop_while_136456;
            int64_t p_136457;
            int64_t p_136458;
            int64_t p_136459;
            int64_t p_136460;
            int64_t p_136461;
            
            loop_while_136456 = 1;
            p_136457 = btop_136448;
            p_136458 = min_res_136405;
            p_136459 = atop_136447;
            p_136460 = min_res_136407;
            p_136461 = btop_136448;
            while (loop_while_136456) {
                int64_t zs_lhs_136462 = sub64(p_136459, p_136457);
                int64_t offset_136463 = sdiv64(zs_lhs_136462, (int64_t) 2);
                int64_t ai_136464 = sub64(p_136459, offset_136463);
                int64_t bi_136465 = add64(p_136461, offset_136463);
                bool cond_136466 = sle64((int64_t) 0, ai_136464);
                bool cond_t_res_136467 = slt64(ai_136464, min_res_136405);
                bool x_136468 = cond_136466 && cond_t_res_136467;
                int16_t acur_136469;
                
                if (x_136468) {
                    bool index_certs_137809;
                    
                    if (!x_136468) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ai_136464, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:128:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:273:82-85\n   #4  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137810 = p_136402 + ai_136464;
                    int16_t acur_t_res_137811 = ((int16_t *) a_list_mem_138403.mem)[slice_137810];
                    
                    acur_136469 = acur_t_res_137811;
                } else {
                    bool cond_136473 = slt64(ai_136464, (int64_t) 0);
                    int16_t acur_f_res_136474;
                    
                    if (cond_136473) {
                        acur_f_res_136474 = (int16_t) -32768;
                    } else {
                        acur_f_res_136474 = (int16_t) 32767;
                    }
                    acur_136469 = acur_f_res_136474;
                }
                
                bool cond_136475 = slt64((int64_t) 0, ai_136464);
                int16_t aprev_136476;
                
                if (cond_136475) {
                    int64_t tmp_137812 = sub64(ai_136464, (int64_t) 1);
                    bool x_137813 = sle64((int64_t) 0, tmp_137812);
                    bool y_137814 = slt64(tmp_137812, min_res_136405);
                    bool bounds_check_137815 = x_137813 && y_137814;
                    bool index_certs_137816;
                    
                    if (!bounds_check_137815) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137812, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:129:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:273:82-85\n   #4  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137817 = p_136402 + tmp_137812;
                    int16_t aprev_t_res_137818 = ((int16_t *) a_list_mem_138403.mem)[slice_137817];
                    
                    aprev_136476 = aprev_t_res_137818;
                } else {
                    aprev_136476 = (int16_t) -32768;
                }
                
                bool cond_136484 = sle64((int64_t) 0, bi_136465);
                bool cond_t_res_136485 = slt64(bi_136465, min_res_136407);
                bool x_136486 = cond_136484 && cond_t_res_136485;
                int16_t bcur_136487;
                
                if (x_136486) {
                    bool index_certs_137819;
                    
                    if (!x_136486) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) bi_136465, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:130:47-53\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:273:82-85\n   #4  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137820 = p_136403 + bi_136465;
                    int16_t bcur_t_res_137821 = ((int16_t *) b_list_mem_138404.mem)[slice_137820];
                    
                    bcur_136487 = bcur_t_res_137821;
                } else {
                    bool cond_136491 = slt64(bi_136465, (int64_t) 0);
                    int16_t bcur_f_res_136492;
                    
                    if (cond_136491) {
                        bcur_f_res_136492 = (int16_t) -32768;
                    } else {
                        bcur_f_res_136492 = (int16_t) 32767;
                    }
                    bcur_136487 = bcur_f_res_136492;
                }
                
                bool cond_136493 = slt64((int64_t) 0, bi_136465);
                int16_t bprev_136494;
                
                if (cond_136493) {
                    int64_t tmp_137822 = sub64(bi_136465, (int64_t) 1);
                    bool x_137823 = sle64((int64_t) 0, tmp_137822);
                    bool y_137824 = slt64(tmp_137822, min_res_136407);
                    bool bounds_check_137825 = x_137823 && y_137824;
                    bool index_certs_137826;
                    
                    if (!bounds_check_137825) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137822, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:131:36-44\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:115:38-141:6\n   #3  ftsort.fut:273:82-85\n   #4  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t slice_137827 = p_136403 + tmp_137822;
                    int16_t bprev_t_res_137828 = ((int16_t *) b_list_mem_138404.mem)[slice_137827];
                    
                    bprev_136494 = bprev_t_res_137828;
                } else {
                    bprev_136494 = (int16_t) -32768;
                }
                
                bool defunc_0_gt_res_136502 = slt16(bprev_136494, acur_136469);
                int64_t loopres_136503;
                int64_t loopres_136504;
                int64_t loopres_136505;
                int64_t loopres_136506;
                int64_t loopres_136507;
                bool loopres_136508;
                
                if (defunc_0_gt_res_136502) {
                    bool defunc_0_leq_res_137829 = sle16(aprev_136476, bcur_136487);
                    int64_t loopres_t_res_137830;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137830 = ai_136464;
                    } else {
                        loopres_t_res_137830 = min_res_136405;
                    }
                    
                    int64_t loopres_t_res_137831;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137831 = bi_136465;
                    } else {
                        loopres_t_res_137831 = min_res_136407;
                    }
                    
                    bool x_137832 = !defunc_0_leq_res_137829;
                    int64_t loopres_t_res_137833;
                    int64_t loopres_t_res_137834;
                    
                    if (defunc_0_leq_res_137829) {
                        loopres_t_res_137833 = p_136459;
                        loopres_t_res_137834 = p_136461;
                    } else {
                        int64_t tmp_137835 = sub64(ai_136464, (int64_t) 1);
                        int64_t tmp_137836 = add64((int64_t) 1, bi_136465);
                        
                        loopres_t_res_137833 = tmp_137835;
                        loopres_t_res_137834 = tmp_137836;
                    }
                    loopres_136503 = p_136457;
                    loopres_136504 = loopres_t_res_137830;
                    loopres_136505 = loopres_t_res_137833;
                    loopres_136506 = loopres_t_res_137831;
                    loopres_136507 = loopres_t_res_137834;
                    loopres_136508 = x_137832;
                } else {
                    int64_t tmp_136517 = add64((int64_t) 1, ai_136464);
                    
                    loopres_136503 = tmp_136517;
                    loopres_136504 = min_res_136405;
                    loopres_136505 = p_136459;
                    loopres_136506 = min_res_136407;
                    loopres_136507 = p_136461;
                    loopres_136508 = 1;
                }
                
                bool loop_while_tmp_139296 = loopres_136508;
                int64_t p_tmp_139297 = loopres_136503;
                int64_t p_tmp_139298 = loopres_136504;
                int64_t p_tmp_139299 = loopres_136505;
                int64_t p_tmp_139300 = loopres_136506;
                int64_t p_tmp_139301 = loopres_136507;
                
                loop_while_136456 = loop_while_tmp_139296;
                p_136457 = p_tmp_139297;
                p_136458 = p_tmp_139298;
                p_136459 = p_tmp_139299;
                p_136460 = p_tmp_139300;
                p_136461 = p_tmp_139301;
            }
            defunc_0_f_res_136450 = loop_while_136456;
            defunc_0_f_res_136451 = p_136457;
            defunc_0_f_res_136452 = p_136458;
            defunc_0_f_res_136453 = p_136459;
            defunc_0_f_res_136454 = p_136460;
            defunc_0_f_res_136455 = p_136461;
            ((int64_t *) mem_138421)[i_138210] = defunc_0_f_res_136452;
            ((int64_t *) mem_138423)[i_138210] = defunc_0_f_res_136454;
        }
        if (mem_138438_cached_sizze_139608 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138438, &mem_138438_cached_sizze_139608, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138441_cached_sizze_139609 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138441, &mem_138441_cached_sizze_139609, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138444_cached_sizze_139610 < bytes_138437) {
            err = lexical_realloc(ctx, &mem_138444, &mem_138444_cached_sizze_139610, bytes_138437);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138447_cached_sizze_139611 < bytes_138446) {
            err = lexical_realloc(ctx, &mem_138447, &mem_138447_cached_sizze_139611, bytes_138446);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138273 = 0; i_138273 < threads_98871; i_138273++) {
            int64_t defunc_0_f_res_136531 = ((int64_t *) mem_138421)[i_138273];
            int64_t defunc_0_f_res_136532 = ((int64_t *) mem_138423)[i_138273];
            int64_t zl_lhs_136533 = add64((int64_t) 1, i_138273);
            bool cond_136534 = slt64(zl_lhs_136533, threads_98871);
            bool x_136535 = sle64((int64_t) 0, zl_lhs_136533);
            bool bounds_check_136536 = cond_136534 && x_136535;
            bool loop_not_taken_136537 = !cond_136534;
            bool protect_assert_disj_136538 = bounds_check_136536 || loop_not_taken_136537;
            bool index_certs_136539;
            
            if (!protect_assert_disj_136538) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zl_lhs_136533, "] out of bounds for array of shape [", (long long) threads_98871, "].", "-> #0  ftsort.fut:191:39-61\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t defunc_0_f_res_t_res_136540;
            
            if (cond_136534) {
                int64_t x_137837 = ((int64_t *) mem_138421)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136540 = x_137837;
            } else {
                defunc_0_f_res_t_res_136540 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_t_res_136542;
            
            if (cond_136534) {
                int64_t x_137838 = ((int64_t *) mem_138423)[zl_lhs_136533];
                
                defunc_0_f_res_t_res_136542 = x_137838;
            } else {
                defunc_0_f_res_t_res_136542 = (int64_t) 0;
            }
            
            int64_t defunc_0_f_res_136544;
            
            if (cond_136534) {
                defunc_0_f_res_136544 = defunc_0_f_res_t_res_136540;
            } else {
                defunc_0_f_res_136544 = defunc_0_f_res_136531;
            }
            
            int64_t defunc_0_f_res_136545;
            
            if (cond_136534) {
                defunc_0_f_res_136545 = defunc_0_f_res_t_res_136542;
            } else {
                defunc_0_f_res_136545 = defunc_0_f_res_136532;
            }
            
            int64_t dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 = sub64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            int64_t dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 = sub64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 = add64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t zm_lhs_136549 = add64(defunc_0_f_res_136544, defunc_0_f_res_136545);
            int64_t zm_rhs_136550 = add64(defunc_0_f_res_136531, defunc_0_f_res_136532);
            int64_t card_136551 = sub64(zm_lhs_136549, zm_rhs_136550);
            bool empty_slice_136552 = dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547 == (int64_t) 0;
            int64_t m_136553 = sub64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 1);
            int64_t i_p_m_t_s_136554 = add64(defunc_0_f_res_136531, m_136553);
            bool zzero_leq_i_p_m_t_s_136555 = sle64((int64_t) 0, i_p_m_t_s_136554);
            bool i_p_m_t_s_leq_w_136556 = slt64(i_p_m_t_s_136554, min_res_136405);
            bool zzero_lte_i_136557 = sle64((int64_t) 0, defunc_0_f_res_136531);
            bool i_lte_j_136558 = sle64(defunc_0_f_res_136531, defunc_0_f_res_136544);
            bool y_136559 = i_p_m_t_s_leq_w_136556 && zzero_lte_i_136557;
            bool y_136560 = zzero_leq_i_p_m_t_s_136555 && y_136559;
            bool forwards_ok_136561 = i_lte_j_136558 && y_136560;
            bool ok_or_empty_136562 = empty_slice_136552 || forwards_ok_136561;
            bool index_certs_136563;
            
            if (!ok_or_empty_136562) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136531, ":", (long long) defunc_0_f_res_136544, "] out of bounds for array of shape [", (long long) min_res_136405, "].", "-> #0  ftsort.fut:193:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136564 = slt64(defunc_0_f_res_136544, defunc_0_f_res_136531);
            bool valid_136565 = !bounds_invalid_upwards_136564;
            bool range_valid_c_136566;
            
            if (!valid_136565) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136531, "..<", (long long) defunc_0_f_res_136544, " is invalid.", "-> #0  ftsort.fut:193:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_136569 = dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546 == (int64_t) 0;
            int64_t m_136570 = sub64(dzlz7bUZLzmZRz20U1z20U1z7dUzg_136546, (int64_t) 1);
            int64_t i_p_m_t_s_136571 = add64(defunc_0_f_res_136532, m_136570);
            bool zzero_leq_i_p_m_t_s_136572 = sle64((int64_t) 0, i_p_m_t_s_136571);
            bool i_p_m_t_s_leq_w_136573 = slt64(i_p_m_t_s_136571, min_res_136407);
            bool zzero_lte_i_136574 = sle64((int64_t) 0, defunc_0_f_res_136532);
            bool i_lte_j_136575 = sle64(defunc_0_f_res_136532, defunc_0_f_res_136545);
            bool y_136576 = i_p_m_t_s_leq_w_136573 && zzero_lte_i_136574;
            bool y_136577 = zzero_leq_i_p_m_t_s_136572 && y_136576;
            bool forwards_ok_136578 = i_lte_j_136575 && y_136577;
            bool ok_or_empty_136579 = empty_slice_136569 || forwards_ok_136578;
            bool index_certs_136580;
            
            if (!ok_or_empty_136579) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136532, ":", (long long) defunc_0_f_res_136545, "] out of bounds for array of shape [", (long long) min_res_136407, "].", "-> #0  ftsort.fut:194:69-84\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136581 = slt64(defunc_0_f_res_136545, defunc_0_f_res_136532);
            bool valid_136582 = !bounds_invalid_upwards_136581;
            bool range_valid_c_136583;
            
            if (!valid_136582) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_f_res_136532, "..<", (long long) defunc_0_f_res_136545, " is invalid.", "-> #0  ftsort.fut:194:50-67\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t bytes_138470 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool cond_136588 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zs_lhs_136589 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, (int64_t) 1);
            int64_t zp_rhs_136590 = sdiv_safe64(zs_lhs_136589, (int64_t) 20);
            int64_t min_num_blocks_136591 = add64((int64_t) 1, zp_rhs_136590);
            bool loop_cond_136592 = slt64((int64_t) 1, min_num_blocks_136591);
            bool smallest_pow_2_geq_than_res_136593;
            int64_t smallest_pow_2_geq_than_res_136594;
            bool loop_while_136595;
            int64_t x_136596;
            
            loop_while_136595 = loop_cond_136592;
            x_136596 = (int64_t) 1;
            while (loop_while_136595) {
                int64_t loopres_136597 = mul64((int64_t) 2, x_136596);
                bool loop_cond_136598 = slt64(loopres_136597, min_num_blocks_136591);
                bool loop_while_tmp_139306 = loop_cond_136598;
                int64_t x_tmp_139307 = loopres_136597;
                
                loop_while_136595 = loop_while_tmp_139306;
                x_136596 = x_tmp_139307;
            }
            smallest_pow_2_geq_than_res_136593 = loop_while_136595;
            smallest_pow_2_geq_than_res_136594 = x_136596;
            
            bool zzero_136599 = smallest_pow_2_geq_than_res_136594 == (int64_t) 0;
            bool nonzzero_136600 = !zzero_136599;
            bool protect_assert_disj_136601 = cond_136588 || nonzzero_136600;
            bool nonzzero_cert_136602;
            
            if (!protect_assert_disj_136601) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zp_rhs_136603 = sdiv_safe64(zs_lhs_136589, smallest_pow_2_geq_than_res_136594);
            int64_t block_sizze_136604 = add64((int64_t) 1, zp_rhs_136603);
            bool y_136609 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
            bool protect_assert_disj_139059 = cond_136588 || y_136609;
            bool index_certs_136610;
            
            if (!protect_assert_disj_139059) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136629 = slt64(smallest_pow_2_geq_than_res_136594, (int64_t) 0);
            bool valid_136630 = !bounds_invalid_upwards_136629;
            bool protect_assert_disj_139067 = cond_136588 || valid_136630;
            bool range_valid_c_136631;
            
            if (!protect_assert_disj_139067) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_136594, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:273:82-85\n   #7  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool bounds_invalid_upwards_136633 = slt64(block_sizze_136604, (int64_t) 0);
            bool valid_136634 = !bounds_invalid_upwards_136633;
            bool protect_assert_disj_139069 = cond_136588 || valid_136634;
            bool range_valid_c_136635;
            
            if (!protect_assert_disj_139069) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_136604, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool cond_136637 = sle64(block_sizze_136604, (int64_t) 1);
            int64_t tmp_136638 = sub64(block_sizze_136604, (int64_t) 2);
            bool bounds_invalid_upwards_136639 = slt64(tmp_136638, (int64_t) 0);
            bool valid_136641 = !bounds_invalid_upwards_136639;
            bool protect_assert_disj_136642 = cond_136637 || valid_136641;
            bool protect_assert_disj_139071 = cond_136588 || protect_assert_disj_136642;
            bool range_valid_c_136643;
            
            if (!protect_assert_disj_139071) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_136638, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool dim_match_137123 = card_136551 == dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548;
            bool empty_or_match_cert_137124;
            
            if (!dim_match_137123) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] cannot match shape of type `[", (long long) card_136551, "](i64, i64, i16)`.", "-> #0  ftsort.fut:195:20-196:82\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool empty_slice_137125 = card_136551 == (int64_t) 0;
            int64_t m_137126 = sub64(card_136551, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137127 = sle64((int64_t) 0, m_137126);
            bool i_p_m_t_s_leq_w_137128 = slt64(m_137126, card_136551);
            bool y_137129 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137128;
            bool ok_or_empty_137130 = empty_slice_137125 || y_137129;
            bool index_certs_137131;
            
            if (!ok_or_empty_137130) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) card_136551, "].", "-> #0  ftsort.fut:197:41-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool i_p_m_t_s_leq_w_137132 = slt64(m_137126, perThread_136439);
            bool y_137133 = zzero_leq_i_p_m_t_s_137127 && i_p_m_t_s_leq_w_137132;
            bool ok_or_empty_137134 = empty_slice_137125 || y_137133;
            bool index_certs_137135;
            
            if (!ok_or_empty_137134) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:197:17-55\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t nest_i_139308 = 0; nest_i_139308 < perThread_136439; nest_i_139308++) {
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + nest_i_139308] = (int64_t) -1;
            }
            for (int64_t nest_i_139309 = 0; nest_i_139309 < perThread_136439; nest_i_139309++) {
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + nest_i_139309] = (int64_t) -1;
            }
            for (int64_t nest_i_139310 = 0; nest_i_139310 < perThread_136439; nest_i_139310++) {
                ((int16_t *) mem_138447)[i_138273 * perThread_136439 + nest_i_139310] = (int16_t) 0;
            }
            
            int64_t slice_136567 = p_136402 + defunc_0_f_res_136531;
            int64_t slice_136584 = p_136403 + defunc_0_f_res_136532;
            
            if (memblock_alloc(ctx, &mem_138471, bytes_138470, "mem_138471")) {
                err = 1;
                goto cleanup;
            }
            for (int64_t i_139311 = 0; i_139311 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_139311++) {
                int64_t x_139312 = (int64_t) 0 + i_139311 * (int64_t) 1;
                
                ((int64_t *) mem_138471.mem)[i_139311] = x_139312;
            }
            
            int64_t flat_dim_136605 = smallest_pow_2_geq_than_res_136594 * block_sizze_136604;
            bool x_139054 = !cond_136588;
            int64_t greatest_divisor_leq_than_arg1_136607 = mul64((int64_t) 2, block_sizze_136604);
            int64_t merge_block_sizze_136608;
            
            if (x_139054) {
                int64_t x_139056;
                
                if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139056, (int64_t) 8, greatest_divisor_leq_than_arg1_136607) != 0) {
                    err = 1;
                    goto cleanup;
                }
                merge_block_sizze_136608 = x_139056;
            } else {
                merge_block_sizze_136608 = (int64_t) 0;
            }
            
            bool index_concat_cmp_136611 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, (int64_t) 0);
            bool x_139050 = !index_concat_cmp_136611;
            bool protect_cond_conj_139060 = x_139050 && x_139054;
            int16_t index_concat_136617;
            
            if (protect_cond_conj_139060) {
                int16_t x_139052 = ((int16_t *) a_list_mem_138403.mem)[slice_136567];
                
                index_concat_136617 = x_139052;
            } else {
                index_concat_136617 = (int16_t) 0;
            }
            
            int64_t index_concat_i_137839 = sub64((int64_t) 0, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
            int64_t slice_137840 = defunc_0_f_res_136532 + index_concat_i_137839;
            int64_t slice_137841 = p_136403 + slice_137840;
            bool protect_cond_conj_139061 = index_concat_cmp_136611 && x_139054;
            int16_t index_concat_137842;
            
            if (protect_cond_conj_139061) {
                int16_t x_139048 = ((int16_t *) b_list_mem_138404.mem)[slice_137841];
                
                index_concat_137842 = x_139048;
            } else {
                index_concat_137842 = (int16_t) 0;
            }
            
            int16_t index_concat_branch_136612;
            
            if (index_concat_cmp_136611) {
                index_concat_branch_136612 = index_concat_137842;
            } else {
                index_concat_branch_136612 = index_concat_136617;
            }
            
            int16_t defunc_0_reduce_res_138002;
            int64_t defunc_0_reduce_res_138003;
            
            if (x_139054) {
                int16_t x_139062;
                int64_t x_139063;
                int16_t redout_138213;
                int64_t redout_138214;
                
                redout_138213 = index_concat_branch_136612;
                redout_138214 = (int64_t) 0;
                for (int64_t i_138215 = 0; i_138215 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138215++) {
                    bool index_concat_cmp_138390 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, i_138215);
                    int16_t index_concat_branch_138394;
                    
                    if (index_concat_cmp_138390) {
                        int64_t index_concat_i_138391 = sub64(i_138215, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                        int64_t slice_138401 = slice_136584 + index_concat_i_138391;
                        int16_t index_concat_138392 = ((int16_t *) b_list_mem_138404.mem)[slice_138401];
                        
                        index_concat_branch_138394 = index_concat_138392;
                    } else {
                        int64_t slice_138402 = slice_136567 + i_138215;
                        int16_t index_concat_138393 = ((int16_t *) a_list_mem_138403.mem)[slice_138402];
                        
                        index_concat_branch_138394 = index_concat_138393;
                    }
                    
                    bool defunc_0_leq_res_136626 = sle16(redout_138213, index_concat_branch_138394);
                    int16_t defunc_0_op_res_136627;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136627 = index_concat_branch_138394;
                    } else {
                        defunc_0_op_res_136627 = redout_138213;
                    }
                    
                    int64_t defunc_0_op_res_136628;
                    
                    if (defunc_0_leq_res_136626) {
                        defunc_0_op_res_136628 = i_138215;
                    } else {
                        defunc_0_op_res_136628 = redout_138214;
                    }
                    
                    int16_t redout_tmp_139313 = defunc_0_op_res_136627;
                    int64_t redout_tmp_139314 = defunc_0_op_res_136628;
                    
                    redout_138213 = redout_tmp_139313;
                    redout_138214 = redout_tmp_139314;
                }
                x_139062 = redout_138213;
                x_139063 = redout_138214;
                defunc_0_reduce_res_138002 = x_139062;
                defunc_0_reduce_res_138003 = x_139063;
            } else {
                defunc_0_reduce_res_138002 = (int16_t) 0;
                defunc_0_reduce_res_138003 = (int64_t) 0;
            }
            
            int64_t distance_136640 = add64((int64_t) 1, tmp_136638);
            int64_t binop_x_138472 = (int64_t) 2 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138473 = block_sizze_136604 * binop_x_138472;
            int64_t binop_x_138475 = (int64_t) 8 * smallest_pow_2_geq_than_res_136594;
            int64_t bytes_138476 = block_sizze_136604 * binop_x_138475;
            int64_t bytes_138488 = (int64_t) 8 * block_sizze_136604;
            bool loop_cond_136722 = slt64(block_sizze_136604, flat_dim_136605);
            bool zzero_136723 = merge_block_sizze_136608 == (int64_t) 0;
            bool nonzzero_136724 = !zzero_136723;
            
            if (cond_136588) {
                if (memblock_set(ctx, &ext_mem_138676, &mem_138471, "mem_138471") != 0)
                    return 1;
            } else {
                if (mem_138474_cached_sizze_139612 < bytes_138473) {
                    err = lexical_realloc(ctx, &mem_138474, &mem_138474_cached_sizze_139612, bytes_138473);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138477_cached_sizze_139613 < bytes_138476) {
                    err = lexical_realloc(ctx, &mem_138477, &mem_138477_cached_sizze_139613, bytes_138476);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138487_cached_sizze_139614 < greatest_divisor_leq_than_arg1_136607) {
                    err = lexical_realloc(ctx, &mem_138487, &mem_138487_cached_sizze_139614, greatest_divisor_leq_than_arg1_136607);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                if (mem_138489_cached_sizze_139615 < bytes_138488) {
                    err = lexical_realloc(ctx, &mem_138489, &mem_138489_cached_sizze_139615, bytes_138488);
                    if (err != FUTHARK_SUCCESS)
                        goto cleanup;
                }
                for (int64_t i_138227 = 0; i_138227 < smallest_pow_2_geq_than_res_136594; i_138227++) {
                    int64_t zp_lhs_136647 = mul64(block_sizze_136604, i_138227);
                    
                    for (int64_t i_138220 = 0; i_138220 < block_sizze_136604; i_138220++) {
                        int64_t k_136651 = add64(zp_lhs_136647, i_138220);
                        bool cond_136652 = slt64(k_136651, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                        int16_t lifted_lambda_res_136653;
                        int64_t lifted_lambda_res_136654;
                        
                        if (cond_136652) {
                            bool x_137847 = sle64((int64_t) 0, k_136651);
                            bool bounds_check_137848 = cond_136652 && x_137847;
                            bool index_certs_137849;
                            
                            if (!bounds_check_137848) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_136651, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool index_concat_cmp_137850 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, k_136651);
                            int16_t index_concat_branch_137851;
                            
                            if (index_concat_cmp_137850) {
                                int64_t index_concat_i_137852 = sub64(k_136651, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                                int64_t slice_137853 = defunc_0_f_res_136532 + index_concat_i_137852;
                                int64_t slice_137854 = p_136403 + slice_137853;
                                int16_t index_concat_137855 = ((int16_t *) b_list_mem_138404.mem)[slice_137854];
                                
                                index_concat_branch_137851 = index_concat_137855;
                            } else {
                                int64_t slice_137856 = defunc_0_f_res_136531 + k_136651;
                                int64_t slice_137857 = p_136402 + slice_137856;
                                int16_t index_concat_137858 = ((int16_t *) a_list_mem_138403.mem)[slice_137857];
                                
                                index_concat_branch_137851 = index_concat_137858;
                            }
                            lifted_lambda_res_136653 = index_concat_branch_137851;
                            lifted_lambda_res_136654 = k_136651;
                        } else {
                            lifted_lambda_res_136653 = defunc_0_reduce_res_138002;
                            lifted_lambda_res_136654 = defunc_0_reduce_res_138003;
                        }
                        ((int16_t *) mem_138487)[i_138220] = lifted_lambda_res_136653;
                        ((int64_t *) mem_138489)[i_138220] = lifted_lambda_res_136654;
                    }
                    if (!cond_136637) {
                        for (int64_t i_136671 = 0; i_136671 < distance_136640; i_136671++) {
                            int64_t gt_arg1_136674 = add64((int64_t) 1, i_136671);
                            bool x_136675 = sle64((int64_t) 0, gt_arg1_136674);
                            bool y_136676 = slt64(gt_arg1_136674, block_sizze_136604);
                            bool bounds_check_136677 = x_136675 && y_136676;
                            bool index_certs_136678;
                            
                            if (!bounds_check_136677) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_136674, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            bool y_136680 = slt64(i_136671, block_sizze_136604);
                            bool index_certs_136681;
                            
                            if (!y_136680) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_136671, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int16_t gt_arg1_136679 = ((int16_t *) mem_138487)[gt_arg1_136674];
                            int16_t gt_arg0_136682 = ((int16_t *) mem_138487)[i_136671];
                            bool defunc_0_leq_res_136683 = sle16(gt_arg0_136682, gt_arg1_136679);
                            bool defunc_0_lifted_gt_res_136684 = !defunc_0_leq_res_136683;
                            bool s_136685;
                            int64_t s_136688;
                            bool loop_while_136689;
                            int64_t j_136692;
                            
                            loop_while_136689 = defunc_0_lifted_gt_res_136684;
                            j_136692 = i_136671;
                            while (loop_while_136689) {
                                bool x_136693 = sle64((int64_t) 0, j_136692);
                                bool y_136694 = slt64(j_136692, block_sizze_136604);
                                bool bounds_check_136695 = x_136693 && y_136694;
                                bool index_certs_136696;
                                
                                if (!bounds_check_136695) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_136692, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t copy_arg0_136699 = add64((int64_t) 1, j_136692);
                                bool x_136700 = sle64((int64_t) 0, copy_arg0_136699);
                                bool y_136701 = slt64(copy_arg0_136699, block_sizze_136604);
                                bool bounds_check_136702 = x_136700 && y_136701;
                                bool index_certs_136703;
                                
                                if (!bounds_check_136702) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_136699, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int16_t copy_arg0_136697 = ((int16_t *) mem_138487)[j_136692];
                                int64_t copy_arg0_136698 = ((int64_t *) mem_138489)[j_136692];
                                int16_t copy_arg0_136704 = ((int16_t *) mem_138487)[copy_arg0_136699];
                                int64_t copy_arg0_136705 = ((int64_t *) mem_138489)[copy_arg0_136699];
                                
                                ((int16_t *) mem_138487)[j_136692] = copy_arg0_136704;
                                ((int64_t *) mem_138489)[j_136692] = copy_arg0_136705;
                                ((int16_t *) mem_138487)[copy_arg0_136699] = copy_arg0_136697;
                                ((int64_t *) mem_138489)[copy_arg0_136699] = copy_arg0_136698;
                                
                                int64_t tmp_136710 = sub64(j_136692, (int64_t) 1);
                                bool cond_136711 = sle64((int64_t) 0, tmp_136710);
                                bool loop_cond_136712;
                                
                                if (cond_136711) {
                                    bool y_137860 = slt64(tmp_136710, block_sizze_136604);
                                    bool bounds_check_137861 = cond_136711 && y_137860;
                                    bool index_certs_137862;
                                    
                                    if (!bounds_check_137861) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136710, "] out of bounds for array of shape [", (long long) block_sizze_136604, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int16_t gt_arg1_137859 = ((int16_t *) mem_138487)[j_136692];
                                    int16_t gt_arg0_137863 = ((int16_t *) mem_138487)[tmp_136710];
                                    bool defunc_0_leq_res_137864 = sle16(gt_arg0_137863, gt_arg1_137859);
                                    bool defunc_0_lifted_gt_res_137865 = !defunc_0_leq_res_137864;
                                    
                                    loop_cond_136712 = defunc_0_lifted_gt_res_137865;
                                } else {
                                    loop_cond_136712 = 0;
                                }
                                
                                bool loop_while_tmp_139321 = loop_cond_136712;
                                int64_t j_tmp_139324 = tmp_136710;
                                
                                loop_while_136689 = loop_while_tmp_139321;
                                j_136692 = j_tmp_139324;
                            }
                            s_136685 = loop_while_136689;
                            s_136688 = j_136692;
                        }
                    }
                    lmad_copy_2b(ctx, 1, (uint16_t *) mem_138474, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_138487, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138477, i_138227 * block_sizze_136604, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138489, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_136604});
                }
                if (memblock_alloc(ctx, &mem_138542, bytes_138473, "mem_138542")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_2b(ctx, 2, (uint16_t *) mem_138542.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint16_t *) mem_138474, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                if (memblock_alloc(ctx, &mem_138546, bytes_138476, "mem_138546")) {
                    err = 1;
                    goto cleanup;
                }
                lmad_copy_8b(ctx, 2, (uint64_t *) mem_138546.mem, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (uint64_t *) mem_138477, (int64_t) 0, (int64_t []) {block_sizze_136604, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_136594, block_sizze_136604});
                
                int64_t data_136725;
                bool data_136726;
                int64_t data_136729;
                int64_t loop_dz2084Uz2082U_136730;
                bool loop_while_136731;
                int64_t stride_136734;
                
                if (memblock_set(ctx, &mem_param_138550, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_set(ctx, &mem_param_138553, &mem_138546, "mem_138546") != 0)
                    return 1;
                loop_dz2084Uz2082U_136730 = flat_dim_136605;
                loop_while_136731 = loop_cond_136722;
                stride_136734 = block_sizze_136604;
                while (loop_while_136731) {
                    int64_t next_stride_136735 = mul64((int64_t) 2, stride_136734);
                    bool zzero_136736 = next_stride_136735 == (int64_t) 0;
                    bool nonzzero_136737 = !zzero_136736;
                    bool nonzzero_cert_136738;
                    
                    if (!nonzzero_136737) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_merges_136739 = sdiv64(flat_dim_136605, next_stride_136735);
                    bool bounds_invalid_upwards_136740 = slt64(num_merges_136739, (int64_t) 0);
                    bool valid_136741 = !bounds_invalid_upwards_136740;
                    bool range_valid_c_136742;
                    
                    if (!valid_136741) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_136739, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:273:82-85\n   #7  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t m_136744 = sub64(next_stride_136735, (int64_t) 1);
                    bool zzero_leq_i_p_m_t_s_136745 = sle64((int64_t) 0, m_136744);
                    bool cond_136747 = slt64(next_stride_136735, (int64_t) 10);
                    bool protect_assert_disj_136748 = nonzzero_136724 || cond_136747;
                    bool nonzzero_cert_136749;
                    
                    if (!protect_assert_disj_136748) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t zeze_lhs_136750 = smod_safe64(next_stride_136735, merge_block_sizze_136608);
                    bool num_blocks_136751 = zeze_lhs_136750 == (int64_t) 0;
                    bool protect_assert_disj_136752 = cond_136747 || num_blocks_136751;
                    bool assert_c_136753;
                    
                    if (!protect_assert_disj_136752) {
                        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t num_blocks_136754 = sdiv_safe64(next_stride_136735, merge_block_sizze_136608);
                    int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755 = add64((int64_t) 1, num_blocks_136754);
                    int64_t j_m_i_136756 = sub64(next_stride_136735, stride_136734);
                    int64_t flat_dim_136757 = merge_block_sizze_136608 * num_blocks_136754;
                    bool bounds_invalid_upwards_136758 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, (int64_t) 0);
                    bool empty_slice_136759 = j_m_i_136756 == (int64_t) 0;
                    int64_t m_136760 = sub64(j_m_i_136756, (int64_t) 1);
                    bool zzero_lte_i_136761 = sle64((int64_t) 0, stride_136734);
                    bool i_lte_j_136762 = sle64(stride_136734, next_stride_136735);
                    bool empty_slice_136763 = stride_136734 == (int64_t) 0;
                    int64_t m_136764 = sub64(stride_136734, (int64_t) 1);
                    bool bounds_invalid_upwards_136765 = slt64(num_blocks_136754, (int64_t) 0);
                    bool cond_136766 = slt64((int64_t) 0, stride_136734);
                    bool valid_136767 = !bounds_invalid_upwards_136758;
                    int64_t i_p_m_t_s_136768 = add64(stride_136734, m_136760);
                    bool zzero_leq_i_p_m_t_s_136769 = sle64((int64_t) 0, m_136764);
                    bool i_p_m_t_s_leq_w_136770 = slt64(m_136764, next_stride_136735);
                    bool valid_136771 = !bounds_invalid_upwards_136765;
                    bool i_p_m_t_s_leq_w_136772 = slt64(m_136744, flat_dim_136757);
                    bool y_136773 = slt64((int64_t) 0, j_m_i_136756);
                    bool protect_assert_disj_136774 = cond_136747 || valid_136767;
                    bool range_valid_c_136775;
                    
                    if (!protect_assert_disj_136774) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool zzero_leq_i_p_m_t_s_136776 = sle64((int64_t) 0, i_p_m_t_s_136768);
                    bool i_p_m_t_s_leq_w_136777 = slt64(i_p_m_t_s_136768, next_stride_136735);
                    bool y_136778 = zzero_leq_i_p_m_t_s_136769 && i_p_m_t_s_leq_w_136770;
                    bool protect_assert_disj_136779 = cond_136747 || valid_136771;
                    bool range_valid_c_136780;
                    
                    if (!protect_assert_disj_136779) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_136754, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_136781 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136772;
                    bool y_136782 = zzero_lte_i_136761 && i_p_m_t_s_leq_w_136777;
                    bool forwards_ok_136783 = zzero_lte_i_136761 && y_136778;
                    bool ok_or_empty_136784 = zzero_136736 || y_136781;
                    bool protect_assert_disj_136785 = cond_136766 || y_136773;
                    bool y_136786 = zzero_leq_i_p_m_t_s_136776 && y_136782;
                    bool ok_or_empty_136787 = empty_slice_136763 || forwards_ok_136783;
                    bool protect_assert_disj_136788 = cond_136747 || ok_or_empty_136784;
                    bool index_certs_136789;
                    
                    if (!protect_assert_disj_136788) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) flat_dim_136757, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool loop_not_taken_136790 = !cond_136747;
                    bool protect_assert_disj_136791 = protect_assert_disj_136785 || loop_not_taken_136790;
                    bool index_certs_136792;
                    
                    if (!protect_assert_disj_136791) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool forwards_ok_136793 = i_lte_j_136762 && y_136786;
                    bool protect_assert_disj_136794 = cond_136747 || ok_or_empty_136787;
                    bool index_certs_136795;
                    
                    if (!protect_assert_disj_136794) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136796 = ok_or_empty_136787 || loop_not_taken_136790;
                    bool index_certs_136797;
                    
                    if (!protect_assert_disj_136796) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_136734, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool ok_or_empty_136798 = empty_slice_136759 || forwards_ok_136793;
                    bool protect_assert_disj_136799 = cond_136747 || ok_or_empty_136798;
                    bool index_certs_136800;
                    
                    if (!protect_assert_disj_136799) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool protect_assert_disj_136801 = loop_not_taken_136790 || ok_or_empty_136798;
                    bool index_certs_136802;
                    
                    if (!protect_assert_disj_136801) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_136734, ":] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int64_t binop_x_138554 = (int64_t) 2 * num_merges_136739;
                    int64_t bytes_138555 = next_stride_136735 * binop_x_138554;
                    int64_t binop_x_138557 = (int64_t) 8 * num_merges_136739;
                    int64_t bytes_138558 = next_stride_136735 * binop_x_138557;
                    bool i_lte_j_136746 = sle64((int64_t) 0, next_stride_136735);
                    
                    if (mem_138556_cached_sizze_139616 < bytes_138555) {
                        err = lexical_realloc(ctx, &mem_138556, &mem_138556_cached_sizze_139616, bytes_138555);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138559_cached_sizze_139617 < bytes_138558) {
                        err = lexical_realloc(ctx, &mem_138559, &mem_138559_cached_sizze_139617, bytes_138558);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    
                    int64_t bytes_138568 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755;
                    int64_t binop_x_138584 = (int64_t) 2 * num_blocks_136754;
                    int64_t bytes_138585 = merge_block_sizze_136608 * binop_x_138584;
                    int64_t binop_x_138587 = (int64_t) 8 * num_blocks_136754;
                    int64_t bytes_138588 = merge_block_sizze_136608 * binop_x_138587;
                    int64_t bytes_138630 = (int64_t) 4 * stride_136734;
                    int64_t bytes_138632 = (int64_t) 16 * stride_136734;
                    
                    for (int64_t i_138248 = 0; i_138248 < num_merges_136739; i_138248++) {
                        int64_t start_136806 = mul64(next_stride_136735, i_138248);
                        int64_t j_m_i_136807 = sub64(loop_dz2084Uz2082U_136730, start_136806);
                        bool empty_slice_136808 = j_m_i_136807 == (int64_t) 0;
                        int64_t m_136809 = sub64(j_m_i_136807, (int64_t) 1);
                        int64_t i_p_m_t_s_136810 = add64(start_136806, m_136809);
                        bool zzero_leq_i_p_m_t_s_136811 = sle64((int64_t) 0, i_p_m_t_s_136810);
                        bool i_p_m_t_s_leq_w_136812 = slt64(i_p_m_t_s_136810, loop_dz2084Uz2082U_136730);
                        bool zzero_lte_i_136813 = sle64((int64_t) 0, start_136806);
                        bool i_lte_j_136814 = sle64(start_136806, loop_dz2084Uz2082U_136730);
                        bool y_136815 = i_p_m_t_s_leq_w_136812 && zzero_lte_i_136813;
                        bool y_136816 = zzero_leq_i_p_m_t_s_136811 && y_136815;
                        bool forwards_ok_136817 = i_lte_j_136814 && y_136816;
                        bool ok_or_empty_136818 = empty_slice_136808 || forwards_ok_136817;
                        bool index_certs_136819;
                        
                        if (!ok_or_empty_136818) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_136806, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_136730, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool i_p_m_t_s_leq_w_136820 = slt64(m_136744, j_m_i_136807);
                        bool y_136821 = zzero_leq_i_p_m_t_s_136745 && i_p_m_t_s_leq_w_136820;
                        bool forwards_ok_136822 = i_lte_j_136746 && y_136821;
                        bool ok_or_empty_136823 = zzero_136736 || forwards_ok_136822;
                        bool index_certs_136824;
                        
                        if (!ok_or_empty_136823) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_136735, "] out of bounds for array of shape [", (long long) j_m_i_136807, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        if (cond_136747) {
                            int16_t dummy_137891;
                            int64_t dummy_137892;
                            
                            if (cond_136766) {
                                int16_t head_res_137893 = ((int16_t *) mem_param_138550.mem)[start_136806];
                                int64_t head_res_137894 = ((int64_t *) mem_param_138553.mem)[start_136806];
                                
                                dummy_137891 = head_res_137893;
                                dummy_137892 = head_res_137894;
                            } else {
                                int64_t slice_137895 = stride_136734 + start_136806;
                                int16_t head_res_137896 = ((int16_t *) mem_param_138550.mem)[slice_137895];
                                int64_t head_res_137897 = ((int64_t *) mem_param_138553.mem)[slice_137895];
                                
                                dummy_137891 = head_res_137896;
                                dummy_137892 = head_res_137897;
                            }
                            if (memblock_alloc(ctx, &mem_138631, bytes_138630, "mem_138631")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139334 = 0; nest_i_139334 < next_stride_136735; nest_i_139334++) {
                                ((int16_t *) mem_138631.mem)[nest_i_139334] = dummy_137891;
                            }
                            if (memblock_alloc(ctx, &mem_138633, bytes_138632, "mem_138633")) {
                                err = 1;
                                goto cleanup;
                            }
                            for (int64_t nest_i_139335 = 0; nest_i_139335 < next_stride_136735; nest_i_139335++) {
                                ((int64_t *) mem_138633.mem)[nest_i_139335] = dummy_137892;
                            }
                            
                            int64_t data_137900;
                            int64_t i_137904 = (int64_t) 0;
                            
                            for (int64_t k_137903 = 0; k_137903 < next_stride_136735; k_137903++) {
                                int64_t j_137907 = sub64(k_137903, i_137904);
                                bool cond_137908 = j_137907 == j_m_i_136756;
                                bool cond_137909;
                                
                                if (cond_137908) {
                                    cond_137909 = 1;
                                } else {
                                    bool cond_137910 = slt64(i_137904, stride_136734);
                                    bool cond_f_res_137911;
                                    
                                    if (cond_137910) {
                                        bool x_137912 = sle64((int64_t) 0, j_137907);
                                        bool y_137913 = slt64(j_137907, j_m_i_136756);
                                        bool bounds_check_137914 = x_137912 && y_137913;
                                        bool index_certs_137915;
                                        
                                        if (!bounds_check_137914) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_137919 = sle64((int64_t) 0, i_137904);
                                        bool bounds_check_137920 = cond_137910 && x_137919;
                                        bool index_certs_137921;
                                        
                                        if (!bounds_check_137920) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137916 = stride_136734 + j_137907;
                                        int64_t slice_137917 = start_136806 + slice_137916;
                                        int16_t leq_arg1_137918 = ((int16_t *) mem_param_138550.mem)[slice_137917];
                                        int64_t slice_137922 = start_136806 + i_137904;
                                        int16_t leq_arg0_137923 = ((int16_t *) mem_param_138550.mem)[slice_137922];
                                        bool defunc_0_leq_res_137924 = sle16(leq_arg0_137923, leq_arg1_137918);
                                        
                                        cond_f_res_137911 = defunc_0_leq_res_137924;
                                    } else {
                                        cond_f_res_137911 = 0;
                                    }
                                    cond_137909 = cond_f_res_137911;
                                }
                                
                                int64_t loopres_137925;
                                int16_t loopres_137926;
                                int64_t loopres_137927;
                                
                                if (cond_137909) {
                                    bool x_137929 = sle64((int64_t) 0, i_137904);
                                    bool y_137930 = slt64(i_137904, stride_136734);
                                    bool bounds_check_137931 = x_137929 && y_137930;
                                    bool index_certs_137932;
                                    
                                    if (!bounds_check_137931) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137904, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t tmp_137928 = add64((int64_t) 1, i_137904);
                                    int64_t slice_137933 = start_136806 + i_137904;
                                    int16_t tmp_137934 = ((int16_t *) mem_param_138550.mem)[slice_137933];
                                    int64_t tmp_137935 = ((int64_t *) mem_param_138553.mem)[slice_137933];
                                    
                                    loopres_137925 = tmp_137928;
                                    loopres_137926 = tmp_137934;
                                    loopres_137927 = tmp_137935;
                                } else {
                                    bool x_137936 = sle64((int64_t) 0, j_137907);
                                    bool y_137937 = slt64(j_137907, j_m_i_136756);
                                    bool bounds_check_137938 = x_137936 && y_137937;
                                    bool index_certs_137939;
                                    
                                    if (!bounds_check_137938) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137907, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137940 = stride_136734 + j_137907;
                                    int64_t slice_137941 = start_136806 + slice_137940;
                                    int16_t tmp_137942 = ((int16_t *) mem_param_138550.mem)[slice_137941];
                                    int64_t tmp_137943 = ((int64_t *) mem_param_138553.mem)[slice_137941];
                                    
                                    loopres_137925 = i_137904;
                                    loopres_137926 = tmp_137942;
                                    loopres_137927 = tmp_137943;
                                }
                                ((int16_t *) mem_138631.mem)[k_137903] = loopres_137926;
                                ((int64_t *) mem_138633.mem)[k_137903] = loopres_137927;
                                
                                int64_t i_tmp_139336 = loopres_137925;
                                
                                i_137904 = i_tmp_139336;
                            }
                            data_137900 = i_137904;
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138631, "mem_138631") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138633, "mem_138633") != 0)
                                return 1;
                        } else {
                            if (mem_138569_cached_sizze_139618 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138569, &mem_138569_cached_sizze_139618, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138571_cached_sizze_139619 < bytes_138568) {
                                err = lexical_realloc(ctx, &mem_138571, &mem_138571_cached_sizze_139619, bytes_138568);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138234 = 0; i_138234 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755; i_138234++) {
                                int64_t split_count_arg3_136886 = mul64(merge_block_sizze_136608, i_138234);
                                int64_t defunc_0_split_count_res_136887;
                                int64_t defunc_0_split_count_res_136888;
                                int64_t defunc_0_split_count_res_136889;
                                int64_t defunc_0_split_count_res_136890;
                                int64_t defunc_0_split_count_res_136891;
                                
                                if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_136887, &defunc_0_split_count_res_136888, &defunc_0_split_count_res_136889, &defunc_0_split_count_res_136890, &defunc_0_split_count_res_136891, (int64_t) 0, stride_136734, (int64_t) 0, j_m_i_136756, split_count_arg3_136886) != 0) {
                                    err = 1;
                                    goto cleanup;
                                }
                                
                                bool loop_cond_136892 = slt64((int64_t) 0, defunc_0_split_count_res_136891);
                                bool defunc_0_split_count_res_136893;
                                int64_t defunc_0_split_count_res_136894;
                                int64_t defunc_0_split_count_res_136895;
                                int64_t defunc_0_split_count_res_136896;
                                int64_t defunc_0_split_count_res_136897;
                                int64_t defunc_0_split_count_res_136898;
                                bool loop_while_136899;
                                int64_t ss_136900;
                                int64_t ss_136901;
                                int64_t tt_136902;
                                int64_t tt_136903;
                                int64_t count_136904;
                                
                                loop_while_136899 = loop_cond_136892;
                                ss_136900 = defunc_0_split_count_res_136887;
                                ss_136901 = defunc_0_split_count_res_136888;
                                tt_136902 = defunc_0_split_count_res_136889;
                                tt_136903 = defunc_0_split_count_res_136890;
                                count_136904 = defunc_0_split_count_res_136891;
                                while (loop_while_136899) {
                                    int64_t zlze_lhs_136905 = sub64(ss_136901, ss_136900);
                                    bool cond_136906 = sle64(zlze_lhs_136905, (int64_t) 0);
                                    int64_t defunc_0_lifted_step_res_136907;
                                    int64_t defunc_0_lifted_step_res_136908;
                                    int64_t defunc_0_lifted_step_res_136909;
                                    int64_t defunc_0_lifted_step_res_136910;
                                    
                                    if (cond_136906) {
                                        int64_t tmp_137946 = add64(tt_136902, count_136904);
                                        
                                        defunc_0_lifted_step_res_136907 = ss_136900;
                                        defunc_0_lifted_step_res_136908 = tmp_137946;
                                        defunc_0_lifted_step_res_136909 = tt_136903;
                                        defunc_0_lifted_step_res_136910 = (int64_t) 0;
                                    } else {
                                        int64_t zlze_lhs_136912 = sub64(tt_136903, tt_136902);
                                        bool cond_136913 = sle64(zlze_lhs_136912, (int64_t) 0);
                                        int64_t defunc_0_lifted_step_res_f_res_136914;
                                        int64_t defunc_0_lifted_step_res_f_res_136915;
                                        int64_t defunc_0_lifted_step_res_f_res_136916;
                                        int64_t defunc_0_lifted_step_res_f_res_136917;
                                        
                                        if (cond_136913) {
                                            int64_t tmp_137947 = add64(ss_136900, count_136904);
                                            
                                            defunc_0_lifted_step_res_f_res_136914 = tmp_137947;
                                            defunc_0_lifted_step_res_f_res_136915 = tt_136902;
                                            defunc_0_lifted_step_res_f_res_136916 = tt_136903;
                                            defunc_0_lifted_step_res_f_res_136917 = (int64_t) 0;
                                        } else {
                                            bool cond_136919 = count_136904 == (int64_t) 1;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136920;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136921;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136922;
                                            int64_t defunc_0_lifted_step_res_f_res_f_res_136923;
                                            
                                            if (cond_136919) {
                                                bool x_137949 = sle64((int64_t) 0, ss_136900);
                                                bool y_137950 = slt64(ss_136900, stride_136734);
                                                bool bounds_check_137951 = x_137949 && y_137950;
                                                bool index_certs_137952;
                                                
                                                if (!bounds_check_137951) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_136900, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:273:82-85\n   #14 ftsort.fut:267:1-273:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                bool x_137955 = sle64((int64_t) 0, tt_136902);
                                                bool y_137956 = slt64(tt_136902, j_m_i_136756);
                                                bool bounds_check_137957 = x_137955 && y_137956;
                                                bool index_certs_137958;
                                                
                                                if (!bounds_check_137957) {
                                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_136902, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:273:82-85\n   #14 ftsort.fut:267:1-273:85\n"));
                                                    err = FUTHARK_PROGRAM_ERROR;
                                                    goto cleanup;
                                                }
                                                
                                                int64_t slice_137953 = start_136806 + ss_136900;
                                                int16_t leq_arg1_137954 = ((int16_t *) mem_param_138550.mem)[slice_137953];
                                                int64_t slice_137959 = stride_136734 + tt_136902;
                                                int64_t slice_137960 = start_136806 + slice_137959;
                                                int16_t leq_arg0_137961 = ((int16_t *) mem_param_138550.mem)[slice_137960];
                                                bool defunc_0_leq_res_137962 = sle16(leq_arg0_137961, leq_arg1_137954);
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                
                                                if (defunc_0_leq_res_137962) {
                                                    int64_t tmp_137965 = add64((int64_t) 1, tt_136902);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = ss_136900;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tmp_137965;
                                                } else {
                                                    int64_t tmp_137966 = add64((int64_t) 1, ss_136900);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137963 = tmp_137966;
                                                    defunc_0_lifted_step_res_f_res_f_res_t_res_137964 = tt_136902;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = defunc_0_lifted_step_res_f_res_f_res_t_res_137963;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_t_res_137964;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = tt_136903;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = (int64_t) 0;
                                            } else {
                                                int64_t m_136942 = sdiv64(count_136904, (int64_t) 2);
                                                int64_t n_136943 = sub64(count_136904, m_136942);
                                                bool cond_136944 = n_136943 == (int64_t) 0;
                                                int64_t zgze_lhs_136945 = add64(ss_136900, m_136942);
                                                bool cond_f_res_136946 = sle64(ss_136901, zgze_lhs_136945);
                                                bool x_136947 = !cond_136944;
                                                bool y_136948 = cond_f_res_136946 && x_136947;
                                                bool cond_136949 = cond_136944 || y_136948;
                                                bool leq_y_x_136950;
                                                
                                                if (cond_136949) {
                                                    leq_y_x_136950 = 1;
                                                } else {
                                                    bool x_136951 = sle64((int64_t) 0, zgze_lhs_136945);
                                                    bool y_136952 = slt64(zgze_lhs_136945, stride_136734);
                                                    bool bounds_check_136953 = x_136951 && y_136952;
                                                    bool index_certs_136954;
                                                    
                                                    if (!bounds_check_136953) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_136945, "] out of bounds for array of shape [", (long long) stride_136734, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:273:82-85\n   #14 ftsort.fut:267:1-273:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t zm_lhs_136957 = add64(tt_136902, n_136943);
                                                    int64_t leq_arg0_136958 = sub64(zm_lhs_136957, (int64_t) 1);
                                                    bool x_136959 = sle64((int64_t) 0, leq_arg0_136958);
                                                    bool y_136960 = slt64(leq_arg0_136958, j_m_i_136756);
                                                    bool bounds_check_136961 = x_136959 && y_136960;
                                                    bool index_certs_136962;
                                                    
                                                    if (!bounds_check_136961) {
                                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_136958, "] out of bounds for array of shape [", (long long) j_m_i_136756, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 /prelude/functional.fut:9:44-45\n   #13 ftsort.fut:273:82-85\n   #14 ftsort.fut:267:1-273:85\n"));
                                                        err = FUTHARK_PROGRAM_ERROR;
                                                        goto cleanup;
                                                    }
                                                    
                                                    int64_t slice_136955 = start_136806 + zgze_lhs_136945;
                                                    int16_t leq_arg1_136956 = ((int16_t *) mem_param_138550.mem)[slice_136955];
                                                    int64_t slice_136963 = stride_136734 + leq_arg0_136958;
                                                    int64_t slice_136964 = start_136806 + slice_136963;
                                                    int16_t leq_arg0_136965 = ((int16_t *) mem_param_138550.mem)[slice_136964];
                                                    bool defunc_0_leq_res_136966 = sle16(leq_arg0_136965, leq_arg1_136956);
                                                    
                                                    leq_y_x_136950 = defunc_0_leq_res_136966;
                                                }
                                                
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                                
                                                if (leq_y_x_136950) {
                                                    int64_t tmp_137967 = add64(tt_136902, n_136943);
                                                    int64_t tmp_137968 = sub64(count_136904, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tmp_137967;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tt_136903;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = tmp_137968;
                                                } else {
                                                    int64_t tmp_136972 = add64(tt_136902, n_136943);
                                                    
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136967 = tt_136902;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136968 = tmp_136972;
                                                    defunc_0_lifted_step_res_f_res_f_res_f_res_136969 = count_136904;
                                                }
                                                defunc_0_lifted_step_res_f_res_f_res_136920 = ss_136900;
                                                defunc_0_lifted_step_res_f_res_f_res_136921 = defunc_0_lifted_step_res_f_res_f_res_f_res_136967;
                                                defunc_0_lifted_step_res_f_res_f_res_136922 = defunc_0_lifted_step_res_f_res_f_res_f_res_136968;
                                                defunc_0_lifted_step_res_f_res_f_res_136923 = defunc_0_lifted_step_res_f_res_f_res_f_res_136969;
                                            }
                                            defunc_0_lifted_step_res_f_res_136914 = defunc_0_lifted_step_res_f_res_f_res_136920;
                                            defunc_0_lifted_step_res_f_res_136915 = defunc_0_lifted_step_res_f_res_f_res_136921;
                                            defunc_0_lifted_step_res_f_res_136916 = defunc_0_lifted_step_res_f_res_f_res_136922;
                                            defunc_0_lifted_step_res_f_res_136917 = defunc_0_lifted_step_res_f_res_f_res_136923;
                                        }
                                        defunc_0_lifted_step_res_136907 = defunc_0_lifted_step_res_f_res_136914;
                                        defunc_0_lifted_step_res_136908 = defunc_0_lifted_step_res_f_res_136915;
                                        defunc_0_lifted_step_res_136909 = defunc_0_lifted_step_res_f_res_136916;
                                        defunc_0_lifted_step_res_136910 = defunc_0_lifted_step_res_f_res_136917;
                                    }
                                    
                                    int64_t loopres_136973;
                                    int64_t loopres_136974;
                                    int64_t loopres_136975;
                                    int64_t loopres_136976;
                                    int64_t loopres_136977;
                                    
                                    if (futrts_lifted_normalizze_8911(ctx, &loopres_136973, &loopres_136974, &loopres_136975, &loopres_136976, &loopres_136977, defunc_0_lifted_step_res_136907, ss_136901, defunc_0_lifted_step_res_136908, defunc_0_lifted_step_res_136909, defunc_0_lifted_step_res_136910) != 0) {
                                        err = 1;
                                        goto cleanup;
                                    }
                                    
                                    bool loop_cond_136978 = slt64((int64_t) 0, loopres_136977);
                                    bool loop_while_tmp_139341 = loop_cond_136978;
                                    int64_t ss_tmp_139342 = loopres_136973;
                                    int64_t ss_tmp_139343 = loopres_136974;
                                    int64_t tt_tmp_139344 = loopres_136975;
                                    int64_t tt_tmp_139345 = loopres_136976;
                                    int64_t count_tmp_139346 = loopres_136977;
                                    
                                    loop_while_136899 = loop_while_tmp_139341;
                                    ss_136900 = ss_tmp_139342;
                                    ss_136901 = ss_tmp_139343;
                                    tt_136902 = tt_tmp_139344;
                                    tt_136903 = tt_tmp_139345;
                                    count_136904 = count_tmp_139346;
                                }
                                defunc_0_split_count_res_136893 = loop_while_136899;
                                defunc_0_split_count_res_136894 = ss_136900;
                                defunc_0_split_count_res_136895 = ss_136901;
                                defunc_0_split_count_res_136896 = tt_136902;
                                defunc_0_split_count_res_136897 = tt_136903;
                                defunc_0_split_count_res_136898 = count_136904;
                                ((int64_t *) mem_138569)[i_138234] = defunc_0_split_count_res_136894;
                                ((int64_t *) mem_138571)[i_138234] = defunc_0_split_count_res_136896;
                            }
                            if (mem_138586_cached_sizze_139620 < bytes_138585) {
                                err = lexical_realloc(ctx, &mem_138586, &mem_138586_cached_sizze_139620, bytes_138585);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            if (mem_138589_cached_sizze_139621 < bytes_138588) {
                                err = lexical_realloc(ctx, &mem_138589, &mem_138589_cached_sizze_139621, bytes_138588);
                                if (err != FUTHARK_SUCCESS)
                                    goto cleanup;
                            }
                            for (int64_t i_138241 = 0; i_138241 < num_blocks_136754; i_138241++) {
                                bool y_136984 = slt64(i_138241, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool index_certs_136986;
                                
                                if (!y_136984) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138241, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136987 = ((int64_t *) mem_138569)[i_138241];
                                int64_t defunc_0_f_res_136988 = ((int64_t *) mem_138571)[i_138241];
                                int64_t tmp_136989 = add64((int64_t) 1, i_138241);
                                bool x_136990 = sle64((int64_t) 0, tmp_136989);
                                bool y_136991 = slt64(tmp_136989, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755);
                                bool bounds_check_136992 = x_136990 && y_136991;
                                bool index_certs_136993;
                                
                                if (!bounds_check_136992) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_136989, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_136755, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t defunc_0_f_res_136994 = ((int64_t *) mem_138569)[tmp_136989];
                                int64_t defunc_0_f_res_136995 = ((int64_t *) mem_138571)[tmp_136989];
                                int64_t merge_sequential_arg2_136996 = add64(stride_136734, defunc_0_f_res_136988);
                                int64_t merge_sequential_arg2_136997 = add64(stride_136734, defunc_0_f_res_136995);
                                int64_t j_m_i_136998 = sub64(merge_sequential_arg2_136997, merge_sequential_arg2_136996);
                                bool empty_slice_136999 = j_m_i_136998 == (int64_t) 0;
                                int64_t m_137000 = sub64(j_m_i_136998, (int64_t) 1);
                                int64_t i_p_m_t_s_137001 = add64(merge_sequential_arg2_136996, m_137000);
                                bool zzero_leq_i_p_m_t_s_137002 = sle64((int64_t) 0, i_p_m_t_s_137001);
                                bool i_p_m_t_s_leq_w_137003 = slt64(i_p_m_t_s_137001, next_stride_136735);
                                bool zzero_lte_i_137004 = sle64((int64_t) 0, merge_sequential_arg2_136996);
                                bool i_lte_j_137005 = sle64(merge_sequential_arg2_136996, merge_sequential_arg2_136997);
                                bool y_137006 = i_p_m_t_s_leq_w_137003 && zzero_lte_i_137004;
                                bool y_137007 = zzero_leq_i_p_m_t_s_137002 && y_137006;
                                bool forwards_ok_137008 = i_lte_j_137005 && y_137007;
                                bool ok_or_empty_137009 = empty_slice_136999 || forwards_ok_137008;
                                bool index_certs_137010;
                                
                                if (!ok_or_empty_137009) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_136996, ":", (long long) merge_sequential_arg2_136997, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t j_m_i_137011 = sub64(defunc_0_f_res_136994, defunc_0_f_res_136987);
                                bool empty_slice_137012 = j_m_i_137011 == (int64_t) 0;
                                int64_t m_137013 = sub64(j_m_i_137011, (int64_t) 1);
                                int64_t i_p_m_t_s_137014 = add64(defunc_0_f_res_136987, m_137013);
                                bool zzero_leq_i_p_m_t_s_137015 = sle64((int64_t) 0, i_p_m_t_s_137014);
                                bool i_p_m_t_s_leq_w_137016 = slt64(i_p_m_t_s_137014, next_stride_136735);
                                bool zzero_lte_i_137017 = sle64((int64_t) 0, defunc_0_f_res_136987);
                                bool i_lte_j_137018 = sle64(defunc_0_f_res_136987, defunc_0_f_res_136994);
                                bool y_137019 = i_p_m_t_s_leq_w_137016 && zzero_lte_i_137017;
                                bool y_137020 = zzero_leq_i_p_m_t_s_137015 && y_137019;
                                bool forwards_ok_137021 = i_lte_j_137018 && y_137020;
                                bool ok_or_empty_137022 = empty_slice_137012 || forwards_ok_137021;
                                bool index_certs_137023;
                                
                                if (!ok_or_empty_137022) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_136987, ":", (long long) defunc_0_f_res_136994, "] out of bounds for array of shape [", (long long) next_stride_136735, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool cond_137024 = slt64((int64_t) 0, j_m_i_137011);
                                int16_t dummy_137025;
                                int64_t dummy_137026;
                                
                                if (cond_137024) {
                                    bool index_certs_137969;
                                    
                                    if (!cond_137024) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:273:82-85\n   #13 ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137970 = start_136806 + defunc_0_f_res_136987;
                                    int16_t head_res_137971 = ((int16_t *) mem_param_138550.mem)[slice_137970];
                                    int64_t head_res_137972 = ((int64_t *) mem_param_138553.mem)[slice_137970];
                                    
                                    dummy_137025 = head_res_137971;
                                    dummy_137026 = head_res_137972;
                                } else {
                                    bool y_137031 = slt64((int64_t) 0, j_m_i_136998);
                                    bool index_certs_137032;
                                    
                                    if (!y_137031) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:273:82-85\n   #13 ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_137033 = start_136806 + merge_sequential_arg2_136996;
                                    int16_t head_res_137034 = ((int16_t *) mem_param_138550.mem)[slice_137033];
                                    int64_t head_res_137035 = ((int64_t *) mem_param_138553.mem)[slice_137033];
                                    
                                    dummy_137025 = head_res_137034;
                                    dummy_137026 = head_res_137035;
                                }
                                for (int64_t nest_i_139349 = 0; nest_i_139349 < merge_block_sizze_136608; nest_i_139349++) {
                                    ((int16_t *) mem_138586)[i_138241 * merge_block_sizze_136608 + nest_i_139349] = dummy_137025;
                                }
                                for (int64_t nest_i_139350 = 0; nest_i_139350 < merge_block_sizze_136608; nest_i_139350++) {
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + nest_i_139350] = dummy_137026;
                                }
                                
                                int64_t data_137038;
                                int64_t i_137042 = (int64_t) 0;
                                
                                for (int64_t k_137041 = 0; k_137041 < merge_block_sizze_136608; k_137041++) {
                                    int64_t j_137045 = sub64(k_137041, i_137042);
                                    bool cond_137046 = j_137045 == j_m_i_136998;
                                    bool cond_137047;
                                    
                                    if (cond_137046) {
                                        cond_137047 = 1;
                                    } else {
                                        bool cond_137048 = slt64(i_137042, j_m_i_137011);
                                        bool cond_f_res_137049;
                                        
                                        if (cond_137048) {
                                            bool x_137973 = sle64((int64_t) 0, j_137045);
                                            bool y_137974 = slt64(j_137045, j_m_i_136998);
                                            bool bounds_check_137975 = x_137973 && y_137974;
                                            bool index_certs_137976;
                                            
                                            if (!bounds_check_137975) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            bool x_137980 = sle64((int64_t) 0, i_137042);
                                            bool bounds_check_137981 = cond_137048 && x_137980;
                                            bool index_certs_137982;
                                            
                                            if (!bounds_check_137981) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137977 = merge_sequential_arg2_136996 + j_137045;
                                            int64_t slice_137978 = start_136806 + slice_137977;
                                            int16_t leq_arg1_137979 = ((int16_t *) mem_param_138550.mem)[slice_137978];
                                            int64_t slice_137983 = defunc_0_f_res_136987 + i_137042;
                                            int64_t slice_137984 = start_136806 + slice_137983;
                                            int16_t leq_arg0_137985 = ((int16_t *) mem_param_138550.mem)[slice_137984];
                                            bool defunc_0_leq_res_137986 = sle16(leq_arg0_137985, leq_arg1_137979);
                                            
                                            cond_f_res_137049 = defunc_0_leq_res_137986;
                                        } else {
                                            cond_f_res_137049 = 0;
                                        }
                                        cond_137047 = cond_f_res_137049;
                                    }
                                    
                                    int64_t loopres_137064;
                                    int16_t loopres_137065;
                                    int64_t loopres_137066;
                                    
                                    if (cond_137047) {
                                        bool x_137988 = sle64((int64_t) 0, i_137042);
                                        bool y_137989 = slt64(i_137042, j_m_i_137011);
                                        bool bounds_check_137990 = x_137988 && y_137989;
                                        bool index_certs_137991;
                                        
                                        if (!bounds_check_137990) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137042, "] out of bounds for array of shape [", (long long) j_m_i_137011, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t tmp_137987 = add64((int64_t) 1, i_137042);
                                        int64_t slice_137992 = defunc_0_f_res_136987 + i_137042;
                                        int64_t slice_137993 = start_136806 + slice_137992;
                                        int16_t tmp_137994 = ((int16_t *) mem_param_138550.mem)[slice_137993];
                                        int64_t tmp_137995 = ((int64_t *) mem_param_138553.mem)[slice_137993];
                                        
                                        loopres_137064 = tmp_137987;
                                        loopres_137065 = tmp_137994;
                                        loopres_137066 = tmp_137995;
                                    } else {
                                        bool x_137076 = sle64((int64_t) 0, j_137045);
                                        bool y_137077 = slt64(j_137045, j_m_i_136998);
                                        bool bounds_check_137078 = x_137076 && y_137077;
                                        bool index_certs_137079;
                                        
                                        if (!bounds_check_137078) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137045, "] out of bounds for array of shape [", (long long) j_m_i_136998, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_137080 = merge_sequential_arg2_136996 + j_137045;
                                        int64_t slice_137081 = start_136806 + slice_137080;
                                        int16_t tmp_137082 = ((int16_t *) mem_param_138550.mem)[slice_137081];
                                        int64_t tmp_137083 = ((int64_t *) mem_param_138553.mem)[slice_137081];
                                        
                                        loopres_137064 = i_137042;
                                        loopres_137065 = tmp_137082;
                                        loopres_137066 = tmp_137083;
                                    }
                                    ((int16_t *) mem_138586)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137065;
                                    ((int64_t *) mem_138589)[i_138241 * merge_block_sizze_136608 + k_137041] = loopres_137066;
                                    
                                    int64_t i_tmp_139351 = loopres_137064;
                                    
                                    i_137042 = i_tmp_139351;
                                }
                                data_137038 = i_137042;
                            }
                            if (memblock_alloc(ctx, &mem_138624, bytes_138585, "mem_138624")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_2b(ctx, 2, (uint16_t *) mem_138624.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint16_t *) mem_138586, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_alloc(ctx, &mem_138628, bytes_138588, "mem_138628")) {
                                err = 1;
                                goto cleanup;
                            }
                            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138628.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (uint64_t *) mem_138589, (int64_t) 0, (int64_t []) {merge_block_sizze_136608, (int64_t) 1}, (int64_t []) {num_blocks_136754, merge_block_sizze_136608});
                            if (memblock_set(ctx, &ext_mem_138651, &mem_138624, "mem_138624") != 0)
                                return 1;
                            if (memblock_set(ctx, &ext_mem_138648, &mem_138628, "mem_138628") != 0)
                                return 1;
                        }
                        lmad_copy_2b(ctx, 1, (uint16_t *) mem_138556, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_138651.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
                            return 1;
                        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138559, i_138248 * next_stride_136735, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138648.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_136735});
                        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
                            return 1;
                    }
                    
                    int64_t flat_dim_137090 = next_stride_136735 * num_merges_136739;
                    
                    if (memblock_alloc(ctx, &mem_138662, bytes_138555, "mem_138662")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_2b(ctx, 2, (uint16_t *) mem_138662.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint16_t *) mem_138556, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    if (memblock_alloc(ctx, &mem_138666, bytes_138558, "mem_138666")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138666.mem, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (uint64_t *) mem_138559, (int64_t) 0, (int64_t []) {next_stride_136735, (int64_t) 1}, (int64_t []) {num_merges_136739, next_stride_136735});
                    
                    bool loop_cond_137093 = slt64(next_stride_136735, flat_dim_136605);
                    
                    if (memblock_set(ctx, &mem_param_tmp_139325, &mem_138662, "mem_138662") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_tmp_139326, &mem_138666, "mem_138666") != 0)
                        return 1;
                    
                    int64_t loop_dz2084Uz2082U_tmp_139327 = flat_dim_137090;
                    bool loop_while_tmp_139328 = loop_cond_137093;
                    int64_t stride_tmp_139331 = next_stride_136735;
                    
                    if (memblock_set(ctx, &mem_param_138550, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
                        return 1;
                    if (memblock_set(ctx, &mem_param_138553, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
                        return 1;
                    loop_dz2084Uz2082U_136730 = loop_dz2084Uz2082U_tmp_139327;
                    loop_while_136731 = loop_while_tmp_139328;
                    stride_136734 = stride_tmp_139331;
                }
                if (memblock_set(ctx, &ext_mem_138673, &mem_param_138550, "mem_param_138550") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_138672, &mem_param_138553, "mem_param_138553") != 0)
                    return 1;
                data_136725 = loop_dz2084Uz2082U_136730;
                data_136726 = loop_while_136731;
                data_136729 = stride_136734;
                if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
                    return 1;
                
                bool empty_slice_137094 = dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548 == (int64_t) 0;
                bool zzero_leq_i_p_m_t_s_137095 = sle64((int64_t) 0, zs_lhs_136589);
                bool i_p_m_t_s_leq_w_137096 = slt64(zs_lhs_136589, data_136725);
                bool y_137097 = zzero_leq_i_p_m_t_s_137095 && i_p_m_t_s_leq_w_137096;
                bool ok_or_empty_137098 = empty_slice_137094 || y_137097;
                bool index_certs_137099;
                
                if (!ok_or_empty_137098) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "] out of bounds for array of shape [", (long long) data_136725, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  /prelude/functional.fut:9:44-45\n   #6  ftsort.fut:273:82-85\n   #7  ftsort.fut:267:1-273:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_138676, &ext_mem_138672, "ext_mem_138672") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
                return 1;
            for (int64_t i_138257 = 0; i_138257 < dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548; i_138257++) {
                int64_t eta_p_137104 = ((int64_t *) ext_mem_138676.mem)[i_138257];
                bool x_137105 = sle64((int64_t) 0, eta_p_137104);
                bool y_137106 = slt64(eta_p_137104, dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548);
                bool bounds_check_137107 = x_137105 && y_137106;
                bool index_certs_137108;
                
                if (!bounds_check_137107) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137104, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20U0z20U0ZRz20UZLZLzmZRz20U1z20U1ZRz7dUzg_136548, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool index_concat_cmp_137109 = sle64(dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547, eta_p_137104);
                int64_t index_concat_branch_137110 = btoi_bool_i64(index_concat_cmp_137109);
                int64_t index_concat_branch_137111;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138006 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t index_primexp_138007 = add64(defunc_0_f_res_136532, index_concat_i_138006);
                    
                    index_concat_branch_137111 = index_primexp_138007;
                } else {
                    int64_t index_primexp_137114 = add64(defunc_0_f_res_136531, eta_p_137104);
                    
                    index_concat_branch_137111 = index_primexp_137114;
                }
                
                int16_t index_concat_branch_137115;
                
                if (index_concat_cmp_137109) {
                    int64_t index_concat_i_138008 = sub64(eta_p_137104, dzlz7bUZLzmZRz20U0z20U0z7dUzg_136547);
                    int64_t slice_138009 = defunc_0_f_res_136532 + index_concat_i_138008;
                    int64_t slice_138010 = p_136403 + slice_138009;
                    int16_t index_concat_138011 = ((int16_t *) b_list_mem_138404.mem)[slice_138010];
                    
                    index_concat_branch_137115 = index_concat_138011;
                } else {
                    int64_t slice_137120 = defunc_0_f_res_136531 + eta_p_137104;
                    int64_t slice_137121 = p_136402 + slice_137120;
                    int16_t index_concat_137122 = ((int16_t *) a_list_mem_138403.mem)[slice_137121];
                    
                    index_concat_branch_137115 = index_concat_137122;
                }
                ((int64_t *) mem_138441)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137110;
                ((int64_t *) mem_138444)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137111;
                ((int16_t *) mem_138447)[i_138273 * perThread_136439 + i_138257] = index_concat_branch_137115;
            }
            if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
                return 1;
            for (int64_t i_138263 = 0; i_138263 < perThread_136439; i_138263++) {
                int64_t lifted_lambda_res_137141 = add64(zm_rhs_136550, i_138263);
                
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + i_138263] = lifted_lambda_res_137141;
            }
            
            bool cond_137142 = card_136551 == zp_rhs_136438;
            
            if (cond_137142) {
                bool y_138012 = slt64(card_136551, perThread_136439);
                bool index_certs_138013;
                
                if (!y_138012) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) card_136551, "] out of bounds for array of shape [", (long long) perThread_136439, "].", "-> #0  ftsort.fut:199:46-71\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftsort.fut:273:82-85\n   #3  ftsort.fut:267:1-273:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                ((int64_t *) mem_138438)[i_138273 * perThread_136439 + card_136551] = (int64_t) -1;
            }
        }
        for (int64_t nest_i_139358 = 0; nest_i_139358 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139358++) {
            ((int16_t *) mem_138410.mem)[lb_merge_136409 + nest_i_139358] = (int16_t) 0;
        }
        if (mem_138728_cached_sizze_139622 < bytes_138727) {
            err = lexical_realloc(ctx, &mem_138728, &mem_138728_cached_sizze_139622, bytes_138727);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t nest_i_139359 = 0; nest_i_139359 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139359++) {
            ((int64_t *) mem_138728)[nest_i_139359] = (int64_t) -1;
        }
        for (int64_t nest_i_139360 = 0; nest_i_139360 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; nest_i_139360++) {
            ((int64_t *) mem_138406.mem)[lb_merge_136409 + nest_i_139360] = (int64_t) -1;
        }
        for (int64_t write_iter_138278 = 0; write_iter_138278 < dzlz7bUZLztZRz20Uthreadsz20UperThreadz7dUzg_136440; write_iter_138278++) {
            int64_t new_index_138359 = squot64(write_iter_138278, perThread_136439);
            int64_t binop_y_138361 = perThread_136439 * new_index_138359;
            int64_t new_index_138362 = write_iter_138278 - binop_y_138361;
            int64_t write_iv_138282 = ((int64_t *) mem_138438)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138283 = ((int64_t *) mem_138441)[new_index_138359 * perThread_136439 + new_index_138362];
            int64_t write_iv_138284 = ((int64_t *) mem_138444)[new_index_138359 * perThread_136439 + new_index_138362];
            int16_t write_iv_138285 = ((int16_t *) mem_138447)[new_index_138359 * perThread_136439 + new_index_138362];
            
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138406.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138283;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int64_t *) mem_138728)[write_iv_138282] = write_iv_138284;
            }
            if (sle64((int64_t) 0, write_iv_138282) && slt64(write_iv_138282, dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408)) {
                ((int16_t *) mem_138410.mem)[lb_merge_136409 + write_iv_138282] = write_iv_138285;
            }
        }
        
        int64_t defunc_0_mergeFunc_par_res_137151 = ((int64_t *) mem_138421)[tmp_136386];
        int64_t defunc_0_mergeFunc_par_res_137152 = ((int64_t *) mem_138423)[tmp_136386];
        
        for (int64_t i_138291 = 0; i_138291 < dzlz7bUZLzpZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_az20Ucard_aZRz20Ulb_aZRz20UZLZLzmZRz20UZLZLzpZRz20Ulb_bz20Ucard_bZRz20Ulb_bZRz7dUzg_136408; i_138291++) {
            int64_t eta_p_137164 = ((int64_t *) mem_138406.mem)[lb_merge_136409 + i_138291];
            int64_t eta_p_137165 = ((int64_t *) mem_138728)[i_138291];
            bool cond_137166 = eta_p_137164 == (int64_t) 0;
            int64_t lifted_lambda_res_137167;
            
            if (cond_137166) {
                int64_t tmp_138019 = add64(p_136402, eta_p_137165);
                
                lifted_lambda_res_137167 = tmp_138019;
            } else {
                bool cond_137169 = eta_p_137164 == (int64_t) 1;
                int64_t lifted_lambda_res_f_res_137170;
                
                if (cond_137169) {
                    int64_t tmp_138020 = add64(p_136403, eta_p_137165);
                    
                    lifted_lambda_res_f_res_137170 = tmp_138020;
                } else {
                    lifted_lambda_res_f_res_137170 = eta_p_137165;
                }
                lifted_lambda_res_137167 = lifted_lambda_res_f_res_137170;
            }
            ((int64_t *) mem_138408.mem)[lb_merge_136409 + i_138291] = lifted_lambda_res_137167;
        }
        
        int64_t corrected_ubs_137174 = add64(p_136402, defunc_0_mergeFunc_par_res_137151);
        int64_t corrected_ubs_137175 = add64(p_136403, defunc_0_mergeFunc_par_res_137152);
        bool cond_137194 = slt64(corrected_ubs_137174, zl_rhs_136372);
        bool loop_cond_f_res_137195 = slt64(corrected_ubs_137175, zl_rhs_136374);
        bool x_137196 = !cond_137194;
        bool y_137197 = loop_cond_f_res_137195 && x_137196;
        bool loop_cond_137198 = cond_137194 || y_137197;
        bool loop_while_tmp_139288 = loop_cond_137198;
        int64_t p_tmp_139292 = corrected_ubs_137174;
        int64_t p_tmp_139293 = corrected_ubs_137175;
        
        loop_while_136398 = loop_while_tmp_139288;
        p_136402 = p_tmp_139292;
        p_136403 = p_tmp_139293;
    }
    defunc_0_merge_pipeline_res_136392 = loop_while_136398;
    defunc_0_merge_pipeline_res_136396 = p_136402;
    defunc_0_merge_pipeline_res_136397 = p_136403;
    
    int64_t dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 = sub64(na_98868, defunc_0_merge_pipeline_res_136396);
    int64_t arg_137200 = add64(defunc_0_merge_pipeline_res_136396, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 = sub64(dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, arg_137200);
    int64_t dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 = sub64(nb_98869, defunc_0_merge_pipeline_res_136397);
    int64_t dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 = add64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202);
    bool empty_slice_137204 = dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199 == (int64_t) 0;
    int64_t m_137205 = sub64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 1);
    int64_t i_p_m_t_s_137206 = add64(defunc_0_merge_pipeline_res_136396, m_137205);
    bool zzero_leq_i_p_m_t_s_137207 = sle64((int64_t) 0, i_p_m_t_s_137206);
    bool i_p_m_t_s_leq_w_137208 = slt64(i_p_m_t_s_137206, na_98868);
    bool zzero_lte_i_137209 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136396);
    bool i_lte_j_137210 = sle64(defunc_0_merge_pipeline_res_136396, na_98868);
    bool y_137211 = i_p_m_t_s_leq_w_137208 && zzero_lte_i_137209;
    bool y_137212 = zzero_leq_i_p_m_t_s_137207 && y_137211;
    bool forwards_ok_137213 = i_lte_j_137210 && y_137212;
    bool ok_or_empty_137214 = empty_slice_137204 || forwards_ok_137213;
    bool index_certs_137215;
    
    if (!ok_or_empty_137214) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136396, ":", (long long) na_98868, "] out of bounds for array of shape [", (long long) na_98868, "].", "-> #0  ftsort.fut:256:57-73\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137216 = slt64(na_98868, defunc_0_merge_pipeline_res_136396);
    bool valid_137217 = !bounds_invalid_upwards_137216;
    bool range_valid_c_137218;
    
    if (!valid_137217) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136396, "..<", (long long) na_98868, " is invalid.", "-> #0  ftsort.fut:256:45-55\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137220 = dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202 == (int64_t) 0;
    int64_t m_137221 = sub64(dzlz7bUZLzmZRz20Unbz20Uflb_bz7dUzg_137202, (int64_t) 1);
    int64_t i_p_m_t_s_137222 = add64(defunc_0_merge_pipeline_res_136397, m_137221);
    bool zzero_leq_i_p_m_t_s_137223 = sle64((int64_t) 0, i_p_m_t_s_137222);
    bool i_p_m_t_s_leq_w_137224 = slt64(i_p_m_t_s_137222, nb_98869);
    bool zzero_lte_i_137225 = sle64((int64_t) 0, defunc_0_merge_pipeline_res_136397);
    bool i_lte_j_137226 = sle64(defunc_0_merge_pipeline_res_136397, nb_98869);
    bool y_137227 = i_p_m_t_s_leq_w_137224 && zzero_lte_i_137225;
    bool y_137228 = zzero_leq_i_p_m_t_s_137223 && y_137227;
    bool forwards_ok_137229 = i_lte_j_137226 && y_137228;
    bool ok_or_empty_137230 = empty_slice_137220 || forwards_ok_137229;
    bool index_certs_137231;
    
    if (!ok_or_empty_137230) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_merge_pipeline_res_136397, ":", (long long) nb_98869, "] out of bounds for array of shape [", (long long) nb_98869, "].", "-> #0  ftsort.fut:257:57-73\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137232 = slt64(nb_98869, defunc_0_merge_pipeline_res_136397);
    bool valid_137233 = !bounds_invalid_upwards_137232;
    bool range_valid_c_137234;
    
    if (!valid_137233) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) defunc_0_merge_pipeline_res_136397, "..<", (long long) nb_98869, " is invalid.", "-> #0  ftsort.fut:257:45-55\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138766 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool cond_137238 = sle64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zs_lhs_137239 = sub64(dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, (int64_t) 1);
    int64_t zp_rhs_137240 = sdiv_safe64(zs_lhs_137239, (int64_t) 20);
    int64_t min_num_blocks_137241 = add64((int64_t) 1, zp_rhs_137240);
    bool loop_cond_137242 = slt64((int64_t) 1, min_num_blocks_137241);
    bool smallest_pow_2_geq_than_res_137243;
    int64_t smallest_pow_2_geq_than_res_137244;
    bool loop_while_137245;
    int64_t x_137246;
    
    loop_while_137245 = loop_cond_137242;
    x_137246 = (int64_t) 1;
    while (loop_while_137245) {
        int64_t loopres_137247 = mul64((int64_t) 2, x_137246);
        bool loop_cond_137248 = slt64(loopres_137247, min_num_blocks_137241);
        bool loop_while_tmp_139365 = loop_cond_137248;
        int64_t x_tmp_139366 = loopres_137247;
        
        loop_while_137245 = loop_while_tmp_139365;
        x_137246 = x_tmp_139366;
    }
    smallest_pow_2_geq_than_res_137243 = loop_while_137245;
    smallest_pow_2_geq_than_res_137244 = x_137246;
    
    bool zzero_137249 = smallest_pow_2_geq_than_res_137244 == (int64_t) 0;
    bool nonzzero_137250 = !zzero_137249;
    bool protect_assert_disj_137251 = cond_137238 || nonzzero_137250;
    bool nonzzero_cert_137252;
    
    if (!protect_assert_disj_137251) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:234:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:273:82-85\n   #5  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t zp_rhs_137253 = sdiv_safe64(zs_lhs_137239, smallest_pow_2_geq_than_res_137244);
    int64_t block_sizze_137254 = add64((int64_t) 1, zp_rhs_137253);
    bool y_137259 = slt64((int64_t) 0, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
    bool protect_assert_disj_139025 = cond_137238 || y_137259;
    bool index_certs_137260;
    
    if (!protect_assert_disj_139025) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:240:60-64\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:273:82-85\n   #5  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137278 = slt64(smallest_pow_2_geq_than_res_137244, (int64_t) 0);
    bool valid_137279 = !bounds_invalid_upwards_137278;
    bool protect_assert_disj_139033 = cond_137238 || valid_137279;
    bool range_valid_c_137280;
    
    if (!protect_assert_disj_139033) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) smallest_pow_2_geq_than_res_137244, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_137282 = slt64(block_sizze_137254, (int64_t) 0);
    bool valid_137283 = !bounds_invalid_upwards_137282;
    bool protect_assert_disj_139035 = cond_137238 || valid_137283;
    bool range_valid_c_137284;
    
    if (!protect_assert_disj_139035) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) block_sizze_137254, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_137286 = sle64(block_sizze_137254, (int64_t) 1);
    int64_t tmp_137287 = sub64(block_sizze_137254, (int64_t) 2);
    bool bounds_invalid_upwards_137288 = slt64(tmp_137287, (int64_t) 0);
    bool valid_137290 = !bounds_invalid_upwards_137288;
    bool protect_assert_disj_137291 = cond_137286 || valid_137290;
    bool protect_assert_disj_139037 = cond_137238 || protect_assert_disj_137291;
    bool range_valid_c_137292;
    
    if (!protect_assert_disj_139037) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "...", (long long) tmp_137287, " is invalid.", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:166:19-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_137768 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203;
    bool empty_or_match_cert_137769;
    
    if (!dim_match_137768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] cannot match shape of type `[", (long long) dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, "](i64, i64, i16)`.", "-> #0  ftsort.fut:258:20-259:95\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_137770 = dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201 == (int64_t) 0;
    int64_t m_137771 = sub64(dzlz7bUZLzmZRz20UZLZLzpZRz20Unaz20UnbZRz20UZLZLzpZRz20Uflb_az20Uflb_bZRz7dUzg_137201, (int64_t) 1);
    int64_t i_p_m_t_s_137772 = add64(arg_137200, m_137771);
    bool zzero_leq_i_p_m_t_s_137773 = sle64((int64_t) 0, i_p_m_t_s_137772);
    bool i_p_m_t_s_leq_w_137774 = slt64(i_p_m_t_s_137772, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool zzero_lte_i_137775 = sle64((int64_t) 0, arg_137200);
    bool i_lte_j_137776 = sle64(arg_137200, dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368);
    bool y_137777 = i_p_m_t_s_leq_w_137774 && zzero_lte_i_137775;
    bool y_137778 = zzero_leq_i_p_m_t_s_137773 && y_137777;
    bool forwards_ok_137779 = i_lte_j_137776 && y_137778;
    bool ok_or_empty_137780 = empty_slice_137770 || forwards_ok_137779;
    bool index_certs_137781;
    
    if (!ok_or_empty_137780) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_137200, ":", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368, "].", "-> #0  ftsort.fut:260:21-79\n   #1  ftsort.fut:273:82-85\n   #2  ftsort.fut:267:1-273:85\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138767, bytes_138766, "mem_138767")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139367 = 0; i_139367 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_139367++) {
        int64_t x_139368 = (int64_t) 0 + i_139367 * (int64_t) 1;
        
        ((int64_t *) mem_138767.mem)[i_139367] = x_139368;
    }
    
    int64_t flat_dim_137255 = smallest_pow_2_geq_than_res_137244 * block_sizze_137254;
    bool x_139020 = !cond_137238;
    int64_t greatest_divisor_leq_than_arg1_137257 = mul64((int64_t) 2, block_sizze_137254);
    int64_t merge_block_sizze_137258;
    
    if (x_139020) {
        int64_t x_139022;
        
        if (futrts_greatest_divisor_leq_than_4833(ctx, &x_139022, (int64_t) 8, greatest_divisor_leq_than_arg1_137257) != 0) {
            err = 1;
            goto cleanup;
        }
        merge_block_sizze_137258 = x_139022;
    } else {
        merge_block_sizze_137258 = (int64_t) 0;
    }
    
    bool index_concat_cmp_137261 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, (int64_t) 0);
    bool x_139016 = !index_concat_cmp_137261;
    bool protect_cond_conj_139026 = x_139016 && x_139020;
    int16_t index_concat_137266;
    
    if (protect_cond_conj_139026) {
        int16_t x_139018 = ((int16_t *) a_list_mem_138403.mem)[defunc_0_merge_pipeline_res_136396];
        
        index_concat_137266 = x_139018;
    } else {
        index_concat_137266 = (int16_t) 0;
    }
    
    int64_t index_concat_i_138035 = sub64((int64_t) 0, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
    int64_t slice_138036 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138035;
    bool protect_cond_conj_139027 = index_concat_cmp_137261 && x_139020;
    int16_t index_concat_138037;
    
    if (protect_cond_conj_139027) {
        int16_t x_139014 = ((int16_t *) b_list_mem_138404.mem)[slice_138036];
        
        index_concat_138037 = x_139014;
    } else {
        index_concat_138037 = (int16_t) 0;
    }
    
    int16_t index_concat_branch_137262;
    
    if (index_concat_cmp_137261) {
        index_concat_branch_137262 = index_concat_138037;
    } else {
        index_concat_branch_137262 = index_concat_137266;
    }
    
    int16_t defunc_0_reduce_res_138194;
    int64_t defunc_0_reduce_res_138195;
    
    if (x_139020) {
        int16_t x_139028;
        int64_t x_139029;
        int16_t redout_138293;
        int64_t redout_138294;
        
        redout_138293 = index_concat_branch_137262;
        redout_138294 = (int64_t) 0;
        for (int64_t i_138295 = 0; i_138295 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138295++) {
            bool index_concat_cmp_138354 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, i_138295);
            int16_t index_concat_branch_138358;
            
            if (index_concat_cmp_138354) {
                int64_t index_concat_i_138355 = sub64(i_138295, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                int64_t slice_138399 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138355;
                int16_t index_concat_138356 = ((int16_t *) b_list_mem_138404.mem)[slice_138399];
                
                index_concat_branch_138358 = index_concat_138356;
            } else {
                int64_t slice_138400 = defunc_0_merge_pipeline_res_136396 + i_138295;
                int16_t index_concat_138357 = ((int16_t *) a_list_mem_138403.mem)[slice_138400];
                
                index_concat_branch_138358 = index_concat_138357;
            }
            
            bool defunc_0_leq_res_137275 = sle16(redout_138293, index_concat_branch_138358);
            int16_t defunc_0_op_res_137276;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137276 = index_concat_branch_138358;
            } else {
                defunc_0_op_res_137276 = redout_138293;
            }
            
            int64_t defunc_0_op_res_137277;
            
            if (defunc_0_leq_res_137275) {
                defunc_0_op_res_137277 = i_138295;
            } else {
                defunc_0_op_res_137277 = redout_138294;
            }
            
            int16_t redout_tmp_139369 = defunc_0_op_res_137276;
            int64_t redout_tmp_139370 = defunc_0_op_res_137277;
            
            redout_138293 = redout_tmp_139369;
            redout_138294 = redout_tmp_139370;
        }
        x_139028 = redout_138293;
        x_139029 = redout_138294;
        defunc_0_reduce_res_138194 = x_139028;
        defunc_0_reduce_res_138195 = x_139029;
    } else {
        defunc_0_reduce_res_138194 = (int16_t) 0;
        defunc_0_reduce_res_138195 = (int64_t) 0;
    }
    
    int64_t distance_137289 = add64((int64_t) 1, tmp_137287);
    int64_t binop_x_138768 = (int64_t) 2 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138769 = block_sizze_137254 * binop_x_138768;
    int64_t binop_x_138771 = (int64_t) 8 * smallest_pow_2_geq_than_res_137244;
    int64_t bytes_138772 = block_sizze_137254 * binop_x_138771;
    int64_t bytes_138784 = (int64_t) 8 * block_sizze_137254;
    bool loop_cond_137369 = slt64(block_sizze_137254, flat_dim_137255);
    bool zzero_137370 = merge_block_sizze_137258 == (int64_t) 0;
    bool nonzzero_137371 = !zzero_137370;
    
    if (cond_137238) {
        if (memblock_set(ctx, &ext_mem_138972, &mem_138767, "mem_138767") != 0)
            return 1;
    } else {
        if (mem_138770_cached_sizze_139623 < bytes_138769) {
            err = lexical_realloc(ctx, &mem_138770, &mem_138770_cached_sizze_139623, bytes_138769);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138773_cached_sizze_139624 < bytes_138772) {
            err = lexical_realloc(ctx, &mem_138773, &mem_138773_cached_sizze_139624, bytes_138772);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138783_cached_sizze_139625 < greatest_divisor_leq_than_arg1_137257) {
            err = lexical_realloc(ctx, &mem_138783, &mem_138783_cached_sizze_139625, greatest_divisor_leq_than_arg1_137257);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_138785_cached_sizze_139626 < bytes_138784) {
            err = lexical_realloc(ctx, &mem_138785, &mem_138785_cached_sizze_139626, bytes_138784);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_138307 = 0; i_138307 < smallest_pow_2_geq_than_res_137244; i_138307++) {
            int64_t zp_lhs_137296 = mul64(block_sizze_137254, i_138307);
            
            for (int64_t i_138300 = 0; i_138300 < block_sizze_137254; i_138300++) {
                int64_t k_137300 = add64(zp_lhs_137296, i_138300);
                bool cond_137301 = slt64(k_137300, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
                int16_t lifted_lambda_res_137302;
                int64_t lifted_lambda_res_137303;
                
                if (cond_137301) {
                    bool x_138041 = sle64((int64_t) 0, k_137300);
                    bool bounds_check_138042 = cond_137301 && x_138041;
                    bool index_certs_138043;
                    
                    if (!bounds_check_138042) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) k_137300, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:246:26-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool index_concat_cmp_138044 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, k_137300);
                    int16_t index_concat_branch_138045;
                    
                    if (index_concat_cmp_138044) {
                        int64_t index_concat_i_138046 = sub64(k_137300, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
                        int64_t slice_138047 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138046;
                        int16_t index_concat_138048 = ((int16_t *) b_list_mem_138404.mem)[slice_138047];
                        
                        index_concat_branch_138045 = index_concat_138048;
                    } else {
                        int64_t slice_138049 = defunc_0_merge_pipeline_res_136396 + k_137300;
                        int16_t index_concat_138050 = ((int16_t *) a_list_mem_138403.mem)[slice_138049];
                        
                        index_concat_branch_138045 = index_concat_138050;
                    }
                    lifted_lambda_res_137302 = index_concat_branch_138045;
                    lifted_lambda_res_137303 = k_137300;
                } else {
                    lifted_lambda_res_137302 = defunc_0_reduce_res_138194;
                    lifted_lambda_res_137303 = defunc_0_reduce_res_138195;
                }
                ((int16_t *) mem_138783)[i_138300] = lifted_lambda_res_137302;
                ((int64_t *) mem_138785)[i_138300] = lifted_lambda_res_137303;
            }
            if (!cond_137286) {
                for (int64_t i_137318 = 0; i_137318 < distance_137289; i_137318++) {
                    int64_t gt_arg1_137321 = add64((int64_t) 1, i_137318);
                    bool x_137322 = sle64((int64_t) 0, gt_arg1_137321);
                    bool y_137323 = slt64(gt_arg1_137321, block_sizze_137254);
                    bool bounds_check_137324 = x_137322 && y_137323;
                    bool index_certs_137325;
                    
                    if (!bounds_check_137324) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gt_arg1_137321, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:31-37\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    bool y_137327 = slt64(i_137318, block_sizze_137254);
                    bool index_certs_137328;
                    
                    if (!y_137327) {
                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137318, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                        err = FUTHARK_PROGRAM_ERROR;
                        goto cleanup;
                    }
                    
                    int16_t gt_arg1_137326 = ((int16_t *) mem_138783)[gt_arg1_137321];
                    int16_t gt_arg0_137329 = ((int16_t *) mem_138783)[i_137318];
                    bool defunc_0_leq_res_137330 = sle16(gt_arg0_137329, gt_arg1_137326);
                    bool defunc_0_lifted_gt_res_137331 = !defunc_0_leq_res_137330;
                    bool s_137332;
                    int64_t s_137335;
                    bool loop_while_137336;
                    int64_t j_137339;
                    
                    loop_while_137336 = defunc_0_lifted_gt_res_137331;
                    j_137339 = i_137318;
                    while (loop_while_137336) {
                        bool x_137340 = sle64((int64_t) 0, j_137339);
                        bool y_137341 = slt64(j_137339, block_sizze_137254);
                        bool bounds_check_137342 = x_137340 && y_137341;
                        bool index_certs_137343;
                        
                        if (!bounds_check_137342) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137339, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:170:24-28\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t copy_arg0_137346 = add64((int64_t) 1, j_137339);
                        bool x_137347 = sle64((int64_t) 0, copy_arg0_137346);
                        bool y_137348 = slt64(copy_arg0_137346, block_sizze_137254);
                        bool bounds_check_137349 = x_137347 && y_137348;
                        bool index_certs_137350;
                        
                        if (!bounds_check_137349) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) copy_arg0_137346, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:171:35-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int16_t copy_arg0_137344 = ((int16_t *) mem_138783)[j_137339];
                        int64_t copy_arg0_137345 = ((int64_t *) mem_138785)[j_137339];
                        int16_t copy_arg0_137351 = ((int16_t *) mem_138783)[copy_arg0_137346];
                        int64_t copy_arg0_137352 = ((int64_t *) mem_138785)[copy_arg0_137346];
                        
                        ((int16_t *) mem_138783)[j_137339] = copy_arg0_137351;
                        ((int64_t *) mem_138785)[j_137339] = copy_arg0_137352;
                        ((int16_t *) mem_138783)[copy_arg0_137346] = copy_arg0_137344;
                        ((int64_t *) mem_138785)[copy_arg0_137346] = copy_arg0_137345;
                        
                        int64_t tmp_137357 = sub64(j_137339, (int64_t) 1);
                        bool cond_137358 = sle64((int64_t) 0, tmp_137357);
                        bool loop_cond_137359;
                        
                        if (cond_137358) {
                            bool y_138052 = slt64(tmp_137357, block_sizze_137254);
                            bool bounds_check_138053 = cond_137358 && y_138052;
                            bool index_certs_138054;
                            
                            if (!bounds_check_138053) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137357, "] out of bounds for array of shape [", (long long) block_sizze_137254, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:169:26-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:248:32-37\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int16_t gt_arg1_138051 = ((int16_t *) mem_138783)[j_137339];
                            int16_t gt_arg0_138055 = ((int16_t *) mem_138783)[tmp_137357];
                            bool defunc_0_leq_res_138056 = sle16(gt_arg0_138055, gt_arg1_138051);
                            bool defunc_0_lifted_gt_res_138057 = !defunc_0_leq_res_138056;
                            
                            loop_cond_137359 = defunc_0_lifted_gt_res_138057;
                        } else {
                            loop_cond_137359 = 0;
                        }
                        
                        bool loop_while_tmp_139377 = loop_cond_137359;
                        int64_t j_tmp_139380 = tmp_137357;
                        
                        loop_while_137336 = loop_while_tmp_139377;
                        j_137339 = j_tmp_139380;
                    }
                    s_137332 = loop_while_137336;
                    s_137335 = j_137339;
                }
            }
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_138770, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_138783, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138773, i_138307 * block_sizze_137254, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138785, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {block_sizze_137254});
        }
        if (memblock_alloc(ctx, &mem_138838, bytes_138769, "mem_138838")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_2b(ctx, 2, (uint16_t *) mem_138838.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint16_t *) mem_138770, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        if (memblock_alloc(ctx, &mem_138842, bytes_138772, "mem_138842")) {
            err = 1;
            goto cleanup;
        }
        lmad_copy_8b(ctx, 2, (uint64_t *) mem_138842.mem, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (uint64_t *) mem_138773, (int64_t) 0, (int64_t []) {block_sizze_137254, (int64_t) 1}, (int64_t []) {smallest_pow_2_geq_than_res_137244, block_sizze_137254});
        
        int64_t data_137372;
        bool data_137373;
        int64_t data_137376;
        int64_t loop_dz2084Uz2082U_137377;
        bool loop_while_137378;
        int64_t stride_137381;
        
        if (memblock_set(ctx, &mem_param_138846, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138849, &mem_138842, "mem_138842") != 0)
            return 1;
        loop_dz2084Uz2082U_137377 = flat_dim_137255;
        loop_while_137378 = loop_cond_137369;
        stride_137381 = block_sizze_137254;
        while (loop_while_137378) {
            int64_t next_stride_137382 = mul64((int64_t) 2, stride_137381);
            bool zzero_137383 = next_stride_137382 == (int64_t) 0;
            bool nonzzero_137384 = !zzero_137383;
            bool nonzzero_cert_137385;
            
            if (!nonzzero_137384) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:254:33-46\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #2  /prelude/functional.fut:9:44-45\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:273:82-85\n   #5  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_merges_137386 = sdiv64(flat_dim_137255, next_stride_137382);
            bool bounds_invalid_upwards_137387 = slt64(num_merges_137386, (int64_t) 0);
            bool valid_137388 = !bounds_invalid_upwards_137387;
            bool range_valid_c_137389;
            
            if (!valid_137388) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_merges_137386, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t m_137391 = sub64(next_stride_137382, (int64_t) 1);
            bool zzero_leq_i_p_m_t_s_137392 = sle64((int64_t) 0, m_137391);
            bool cond_137394 = slt64(next_stride_137382, (int64_t) 10);
            bool protect_assert_disj_137395 = nonzzero_137371 || cond_137394;
            bool nonzzero_cert_137396;
            
            if (!protect_assert_disj_137395) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:30-42\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t zeze_lhs_137397 = smod_safe64(next_stride_137382, merge_block_sizze_137258);
            bool num_blocks_137398 = zeze_lhs_137397 == (int64_t) 0;
            bool protect_assert_disj_137399 = cond_137394 || num_blocks_137398;
            bool assert_c_137400;
            
            if (!protect_assert_disj_137399) {
                set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (n % block_size == 0)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:147:20-65\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t num_blocks_137401 = sdiv_safe64(next_stride_137382, merge_block_sizze_137258);
            int64_t dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402 = add64((int64_t) 1, num_blocks_137401);
            int64_t j_m_i_137403 = sub64(next_stride_137382, stride_137381);
            int64_t flat_dim_137404 = merge_block_sizze_137258 * num_blocks_137401;
            bool bounds_invalid_upwards_137405 = slt64(dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, (int64_t) 0);
            bool empty_slice_137406 = j_m_i_137403 == (int64_t) 0;
            int64_t m_137407 = sub64(j_m_i_137403, (int64_t) 1);
            bool zzero_lte_i_137408 = sle64((int64_t) 0, stride_137381);
            bool i_lte_j_137409 = sle64(stride_137381, next_stride_137382);
            bool empty_slice_137410 = stride_137381 == (int64_t) 0;
            int64_t m_137411 = sub64(stride_137381, (int64_t) 1);
            bool bounds_invalid_upwards_137412 = slt64(num_blocks_137401, (int64_t) 0);
            bool cond_137413 = slt64((int64_t) 0, stride_137381);
            bool valid_137414 = !bounds_invalid_upwards_137405;
            int64_t i_p_m_t_s_137415 = add64(stride_137381, m_137407);
            bool zzero_leq_i_p_m_t_s_137416 = sle64((int64_t) 0, m_137411);
            bool i_p_m_t_s_leq_w_137417 = slt64(m_137411, next_stride_137382);
            bool valid_137418 = !bounds_invalid_upwards_137412;
            bool i_p_m_t_s_leq_w_137419 = slt64(m_137391, flat_dim_137404);
            bool y_137420 = slt64((int64_t) 0, j_m_i_137403);
            bool protect_assert_disj_137421 = cond_137394 || valid_137414;
            bool range_valid_c_137422;
            
            if (!protect_assert_disj_137421) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool zzero_leq_i_p_m_t_s_137423 = sle64((int64_t) 0, i_p_m_t_s_137415);
            bool i_p_m_t_s_leq_w_137424 = slt64(i_p_m_t_s_137415, next_stride_137382);
            bool y_137425 = zzero_leq_i_p_m_t_s_137416 && i_p_m_t_s_leq_w_137417;
            bool protect_assert_disj_137426 = cond_137394 || valid_137418;
            bool range_valid_c_137427;
            
            if (!protect_assert_disj_137426) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) num_blocks_137401, " is invalid.", "-> #0  /prelude/array.fut:94:3-11\n   #1  /prelude/array.fut:241:11-17\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool y_137428 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137419;
            bool y_137429 = zzero_lte_i_137408 && i_p_m_t_s_leq_w_137424;
            bool forwards_ok_137430 = zzero_lte_i_137408 && y_137425;
            bool ok_or_empty_137431 = zzero_137383 || y_137428;
            bool protect_assert_disj_137432 = cond_137413 || y_137420;
            bool y_137433 = zzero_leq_i_p_m_t_s_137423 && y_137429;
            bool ok_or_empty_137434 = empty_slice_137410 || forwards_ok_137430;
            bool protect_assert_disj_137435 = cond_137394 || ok_or_empty_137431;
            bool index_certs_137436;
            
            if (!protect_assert_disj_137435) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) flat_dim_137404, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:155:3-46\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool loop_not_taken_137437 = !cond_137394;
            bool protect_assert_disj_137438 = protect_assert_disj_137432 || loop_not_taken_137437;
            bool index_certs_137439;
            
            if (!protect_assert_disj_137438) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool forwards_ok_137440 = i_lte_j_137409 && y_137433;
            bool protect_assert_disj_137441 = cond_137394 || ok_or_empty_137434;
            bool index_certs_137442;
            
            if (!protect_assert_disj_137441) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:52-59\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137443 = ok_or_empty_137434 || loop_not_taken_137437;
            bool index_certs_137444;
            
            if (!protect_assert_disj_137443) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) stride_137381, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:26-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool ok_or_empty_137445 = empty_slice_137406 || forwards_ok_137440;
            bool protect_assert_disj_137446 = cond_137394 || ok_or_empty_137445;
            bool index_certs_137447;
            
            if (!protect_assert_disj_137446) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:149:60-67\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool protect_assert_disj_137448 = loop_not_taken_137437 || ok_or_empty_137445;
            bool index_certs_137449;
            
            if (!protect_assert_disj_137448) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) stride_137381, ":] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:145:34-41\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t binop_x_138850 = (int64_t) 2 * num_merges_137386;
            int64_t bytes_138851 = next_stride_137382 * binop_x_138850;
            int64_t binop_x_138853 = (int64_t) 8 * num_merges_137386;
            int64_t bytes_138854 = next_stride_137382 * binop_x_138853;
            bool i_lte_j_137393 = sle64((int64_t) 0, next_stride_137382);
            
            if (mem_138852_cached_sizze_139627 < bytes_138851) {
                err = lexical_realloc(ctx, &mem_138852, &mem_138852_cached_sizze_139627, bytes_138851);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            if (mem_138855_cached_sizze_139628 < bytes_138854) {
                err = lexical_realloc(ctx, &mem_138855, &mem_138855_cached_sizze_139628, bytes_138854);
                if (err != FUTHARK_SUCCESS)
                    goto cleanup;
            }
            
            int64_t bytes_138864 = (int64_t) 8 * dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402;
            int64_t binop_x_138880 = (int64_t) 2 * num_blocks_137401;
            int64_t bytes_138881 = merge_block_sizze_137258 * binop_x_138880;
            int64_t binop_x_138883 = (int64_t) 8 * num_blocks_137401;
            int64_t bytes_138884 = merge_block_sizze_137258 * binop_x_138883;
            int64_t bytes_138926 = (int64_t) 4 * stride_137381;
            int64_t bytes_138928 = (int64_t) 16 * stride_137381;
            
            for (int64_t i_138328 = 0; i_138328 < num_merges_137386; i_138328++) {
                int64_t start_137453 = mul64(next_stride_137382, i_138328);
                int64_t j_m_i_137454 = sub64(loop_dz2084Uz2082U_137377, start_137453);
                bool empty_slice_137455 = j_m_i_137454 == (int64_t) 0;
                int64_t m_137456 = sub64(j_m_i_137454, (int64_t) 1);
                int64_t i_p_m_t_s_137457 = add64(start_137453, m_137456);
                bool zzero_leq_i_p_m_t_s_137458 = sle64((int64_t) 0, i_p_m_t_s_137457);
                bool i_p_m_t_s_leq_w_137459 = slt64(i_p_m_t_s_137457, loop_dz2084Uz2082U_137377);
                bool zzero_lte_i_137460 = sle64((int64_t) 0, start_137453);
                bool i_lte_j_137461 = sle64(start_137453, loop_dz2084Uz2082U_137377);
                bool y_137462 = i_p_m_t_s_leq_w_137459 && zzero_lte_i_137460;
                bool y_137463 = zzero_leq_i_p_m_t_s_137458 && y_137462;
                bool forwards_ok_137464 = i_lte_j_137461 && y_137463;
                bool ok_or_empty_137465 = empty_slice_137455 || forwards_ok_137464;
                bool index_certs_137466;
                
                if (!ok_or_empty_137465) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) start_137453, ":] out of bounds for array of shape [", (long long) loop_dz2084Uz2082U_137377, "].", "-> #0  /prelude/array.fut:52:49-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:41-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                bool i_p_m_t_s_leq_w_137467 = slt64(m_137391, j_m_i_137454);
                bool y_137468 = zzero_leq_i_p_m_t_s_137392 && i_p_m_t_s_leq_w_137467;
                bool forwards_ok_137469 = i_lte_j_137393 && y_137468;
                bool ok_or_empty_137470 = zzero_137383 || forwards_ok_137469;
                bool index_certs_137471;
                
                if (!ok_or_empty_137470) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) next_stride_137382, "] out of bounds for array of shape [", (long long) j_m_i_137454, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:258:23-56\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #5  /prelude/functional.fut:9:44-45\n   #6  /prelude/functional.fut:9:44-45\n   #7  ftsort.fut:273:82-85\n   #8  ftsort.fut:267:1-273:85\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                if (cond_137394) {
                    int16_t dummy_138083;
                    int64_t dummy_138084;
                    
                    if (cond_137413) {
                        int16_t head_res_138085 = ((int16_t *) mem_param_138846.mem)[start_137453];
                        int64_t head_res_138086 = ((int64_t *) mem_param_138849.mem)[start_137453];
                        
                        dummy_138083 = head_res_138085;
                        dummy_138084 = head_res_138086;
                    } else {
                        int64_t slice_138087 = stride_137381 + start_137453;
                        int16_t head_res_138088 = ((int16_t *) mem_param_138846.mem)[slice_138087];
                        int64_t head_res_138089 = ((int64_t *) mem_param_138849.mem)[slice_138087];
                        
                        dummy_138083 = head_res_138088;
                        dummy_138084 = head_res_138089;
                    }
                    if (memblock_alloc(ctx, &mem_138927, bytes_138926, "mem_138927")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139390 = 0; nest_i_139390 < next_stride_137382; nest_i_139390++) {
                        ((int16_t *) mem_138927.mem)[nest_i_139390] = dummy_138083;
                    }
                    if (memblock_alloc(ctx, &mem_138929, bytes_138928, "mem_138929")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t nest_i_139391 = 0; nest_i_139391 < next_stride_137382; nest_i_139391++) {
                        ((int64_t *) mem_138929.mem)[nest_i_139391] = dummy_138084;
                    }
                    
                    int64_t data_138092;
                    int64_t i_138096 = (int64_t) 0;
                    
                    for (int64_t k_138095 = 0; k_138095 < next_stride_137382; k_138095++) {
                        int64_t j_138099 = sub64(k_138095, i_138096);
                        bool cond_138100 = j_138099 == j_m_i_137403;
                        bool cond_138101;
                        
                        if (cond_138100) {
                            cond_138101 = 1;
                        } else {
                            bool cond_138102 = slt64(i_138096, stride_137381);
                            bool cond_f_res_138103;
                            
                            if (cond_138102) {
                                bool x_138104 = sle64((int64_t) 0, j_138099);
                                bool y_138105 = slt64(j_138099, j_m_i_137403);
                                bool bounds_check_138106 = x_138104 && y_138105;
                                bool index_certs_138107;
                                
                                if (!bounds_check_138106) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                bool x_138111 = sle64((int64_t) 0, i_138096);
                                bool bounds_check_138112 = cond_138102 && x_138111;
                                bool index_certs_138113;
                                
                                if (!bounds_check_138112) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_138108 = stride_137381 + j_138099;
                                int64_t slice_138109 = start_137453 + slice_138108;
                                int16_t leq_arg1_138110 = ((int16_t *) mem_param_138846.mem)[slice_138109];
                                int64_t slice_138114 = start_137453 + i_138096;
                                int16_t leq_arg0_138115 = ((int16_t *) mem_param_138846.mem)[slice_138114];
                                bool defunc_0_leq_res_138116 = sle16(leq_arg0_138115, leq_arg1_138110);
                                
                                cond_f_res_138103 = defunc_0_leq_res_138116;
                            } else {
                                cond_f_res_138103 = 0;
                            }
                            cond_138101 = cond_f_res_138103;
                        }
                        
                        int64_t loopres_138117;
                        int16_t loopres_138118;
                        int64_t loopres_138119;
                        
                        if (cond_138101) {
                            bool x_138121 = sle64((int64_t) 0, i_138096);
                            bool y_138122 = slt64(i_138096, stride_137381);
                            bool bounds_check_138123 = x_138121 && y_138122;
                            bool index_certs_138124;
                            
                            if (!bounds_check_138123) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138096, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t tmp_138120 = add64((int64_t) 1, i_138096);
                            int64_t slice_138125 = start_137453 + i_138096;
                            int16_t tmp_138126 = ((int16_t *) mem_param_138846.mem)[slice_138125];
                            int64_t tmp_138127 = ((int64_t *) mem_param_138849.mem)[slice_138125];
                            
                            loopres_138117 = tmp_138120;
                            loopres_138118 = tmp_138126;
                            loopres_138119 = tmp_138127;
                        } else {
                            bool x_138128 = sle64((int64_t) 0, j_138099);
                            bool y_138129 = slt64(j_138099, j_m_i_137403);
                            bool bounds_check_138130 = x_138128 && y_138129;
                            bool index_certs_138131;
                            
                            if (!bounds_check_138130) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_138099, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:145:42-43\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #6  /prelude/functional.fut:9:44-45\n   #7  /prelude/functional.fut:9:44-45\n   #8  ftsort.fut:273:82-85\n   #9  ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138132 = stride_137381 + j_138099;
                            int64_t slice_138133 = start_137453 + slice_138132;
                            int16_t tmp_138134 = ((int16_t *) mem_param_138846.mem)[slice_138133];
                            int64_t tmp_138135 = ((int64_t *) mem_param_138849.mem)[slice_138133];
                            
                            loopres_138117 = i_138096;
                            loopres_138118 = tmp_138134;
                            loopres_138119 = tmp_138135;
                        }
                        ((int16_t *) mem_138927.mem)[k_138095] = loopres_138118;
                        ((int64_t *) mem_138929.mem)[k_138095] = loopres_138119;
                        
                        int64_t i_tmp_139392 = loopres_138117;
                        
                        i_138096 = i_tmp_139392;
                    }
                    data_138092 = i_138096;
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138927, "mem_138927") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138929, "mem_138929") != 0)
                        return 1;
                } else {
                    if (mem_138865_cached_sizze_139629 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138865, &mem_138865_cached_sizze_139629, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138867_cached_sizze_139630 < bytes_138864) {
                        err = lexical_realloc(ctx, &mem_138867, &mem_138867_cached_sizze_139630, bytes_138864);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138314 = 0; i_138314 < dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402; i_138314++) {
                        int64_t split_count_arg3_137533 = mul64(merge_block_sizze_137258, i_138314);
                        int64_t defunc_0_split_count_res_137534;
                        int64_t defunc_0_split_count_res_137535;
                        int64_t defunc_0_split_count_res_137536;
                        int64_t defunc_0_split_count_res_137537;
                        int64_t defunc_0_split_count_res_137538;
                        
                        if (futrts_lifted_normalizze_8911(ctx, &defunc_0_split_count_res_137534, &defunc_0_split_count_res_137535, &defunc_0_split_count_res_137536, &defunc_0_split_count_res_137537, &defunc_0_split_count_res_137538, (int64_t) 0, stride_137381, (int64_t) 0, j_m_i_137403, split_count_arg3_137533) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        bool loop_cond_137539 = slt64((int64_t) 0, defunc_0_split_count_res_137538);
                        bool defunc_0_split_count_res_137540;
                        int64_t defunc_0_split_count_res_137541;
                        int64_t defunc_0_split_count_res_137542;
                        int64_t defunc_0_split_count_res_137543;
                        int64_t defunc_0_split_count_res_137544;
                        int64_t defunc_0_split_count_res_137545;
                        bool loop_while_137546;
                        int64_t ss_137547;
                        int64_t ss_137548;
                        int64_t tt_137549;
                        int64_t tt_137550;
                        int64_t count_137551;
                        
                        loop_while_137546 = loop_cond_137539;
                        ss_137547 = defunc_0_split_count_res_137534;
                        ss_137548 = defunc_0_split_count_res_137535;
                        tt_137549 = defunc_0_split_count_res_137536;
                        tt_137550 = defunc_0_split_count_res_137537;
                        count_137551 = defunc_0_split_count_res_137538;
                        while (loop_while_137546) {
                            int64_t zlze_lhs_137552 = sub64(ss_137548, ss_137547);
                            bool cond_137553 = sle64(zlze_lhs_137552, (int64_t) 0);
                            int64_t defunc_0_lifted_step_res_137554;
                            int64_t defunc_0_lifted_step_res_137555;
                            int64_t defunc_0_lifted_step_res_137556;
                            int64_t defunc_0_lifted_step_res_137557;
                            
                            if (cond_137553) {
                                int64_t tmp_138138 = add64(tt_137549, count_137551);
                                
                                defunc_0_lifted_step_res_137554 = ss_137547;
                                defunc_0_lifted_step_res_137555 = tmp_138138;
                                defunc_0_lifted_step_res_137556 = tt_137550;
                                defunc_0_lifted_step_res_137557 = (int64_t) 0;
                            } else {
                                int64_t zlze_lhs_137559 = sub64(tt_137550, tt_137549);
                                bool cond_137560 = sle64(zlze_lhs_137559, (int64_t) 0);
                                int64_t defunc_0_lifted_step_res_f_res_137561;
                                int64_t defunc_0_lifted_step_res_f_res_137562;
                                int64_t defunc_0_lifted_step_res_f_res_137563;
                                int64_t defunc_0_lifted_step_res_f_res_137564;
                                
                                if (cond_137560) {
                                    int64_t tmp_138139 = add64(ss_137547, count_137551);
                                    
                                    defunc_0_lifted_step_res_f_res_137561 = tmp_138139;
                                    defunc_0_lifted_step_res_f_res_137562 = tt_137549;
                                    defunc_0_lifted_step_res_f_res_137563 = tt_137550;
                                    defunc_0_lifted_step_res_f_res_137564 = (int64_t) 0;
                                } else {
                                    bool cond_137566 = count_137551 == (int64_t) 1;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137567;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137568;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137569;
                                    int64_t defunc_0_lifted_step_res_f_res_f_res_137570;
                                    
                                    if (cond_137566) {
                                        bool x_138141 = sle64((int64_t) 0, ss_137547);
                                        bool y_138142 = slt64(ss_137547, stride_137381);
                                        bool bounds_check_138143 = x_138141 && y_138142;
                                        bool index_certs_138144;
                                        
                                        if (!bounds_check_138143) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) ss_137547, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:21-27\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:273:82-85\n   #13 ftsort.fut:267:1-273:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        bool x_138147 = sle64((int64_t) 0, tt_137549);
                                        bool y_138148 = slt64(tt_137549, j_m_i_137403);
                                        bool bounds_check_138149 = x_138147 && y_138148;
                                        bool index_certs_138150;
                                        
                                        if (!bounds_check_138149) {
                                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tt_137549, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:53:14-20\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:273:82-85\n   #13 ftsort.fut:267:1-273:85\n"));
                                            err = FUTHARK_PROGRAM_ERROR;
                                            goto cleanup;
                                        }
                                        
                                        int64_t slice_138145 = start_137453 + ss_137547;
                                        int16_t leq_arg1_138146 = ((int16_t *) mem_param_138846.mem)[slice_138145];
                                        int64_t slice_138151 = stride_137381 + tt_137549;
                                        int64_t slice_138152 = start_137453 + slice_138151;
                                        int16_t leq_arg0_138153 = ((int16_t *) mem_param_138846.mem)[slice_138152];
                                        bool defunc_0_leq_res_138154 = sle16(leq_arg0_138153, leq_arg1_138146);
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        
                                        if (defunc_0_leq_res_138154) {
                                            int64_t tmp_138157 = add64((int64_t) 1, tt_137549);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = ss_137547;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tmp_138157;
                                        } else {
                                            int64_t tmp_138158 = add64((int64_t) 1, ss_137547);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138155 = tmp_138158;
                                            defunc_0_lifted_step_res_f_res_f_res_t_res_138156 = tt_137549;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = defunc_0_lifted_step_res_f_res_f_res_t_res_138155;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_t_res_138156;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = tt_137550;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = (int64_t) 0;
                                    } else {
                                        int64_t m_137589 = sdiv64(count_137551, (int64_t) 2);
                                        int64_t n_137590 = sub64(count_137551, m_137589);
                                        bool cond_137591 = n_137590 == (int64_t) 0;
                                        int64_t zgze_lhs_137592 = add64(ss_137547, m_137589);
                                        bool cond_f_res_137593 = sle64(ss_137548, zgze_lhs_137592);
                                        bool x_137594 = !cond_137591;
                                        bool y_137595 = cond_f_res_137593 && x_137594;
                                        bool cond_137596 = cond_137591 || y_137595;
                                        bool leq_y_x_137597;
                                        
                                        if (cond_137596) {
                                            leq_y_x_137597 = 1;
                                        } else {
                                            bool x_137598 = sle64((int64_t) 0, zgze_lhs_137592);
                                            bool y_137599 = slt64(zgze_lhs_137592, stride_137381);
                                            bool bounds_check_137600 = x_137598 && y_137599;
                                            bool index_certs_137601;
                                            
                                            if (!bounds_check_137600) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) zgze_lhs_137592, "] out of bounds for array of shape [", (long long) stride_137381, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:22-30\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:273:82-85\n   #13 ftsort.fut:267:1-273:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t zm_lhs_137604 = add64(tt_137549, n_137590);
                                            int64_t leq_arg0_137605 = sub64(zm_lhs_137604, (int64_t) 1);
                                            bool x_137606 = sle64((int64_t) 0, leq_arg0_137605);
                                            bool y_137607 = slt64(leq_arg0_137605, j_m_i_137403);
                                            bool bounds_check_137608 = x_137606 && y_137607;
                                            bool index_certs_137609;
                                            
                                            if (!bounds_check_137608) {
                                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) leq_arg0_137605, "] out of bounds for array of shape [", (long long) j_m_i_137403, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:73:11-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:83:23-38\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:149:71-83\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:149:30-84\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #7  /prelude/soacs.fut:59:9-11\n   #8  /prelude/array.fut:241:11-17\n   #9  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #10 /prelude/functional.fut:9:44-45\n   #11 /prelude/functional.fut:9:44-45\n   #12 ftsort.fut:273:82-85\n   #13 ftsort.fut:267:1-273:85\n"));
                                                err = FUTHARK_PROGRAM_ERROR;
                                                goto cleanup;
                                            }
                                            
                                            int64_t slice_137602 = start_137453 + zgze_lhs_137592;
                                            int16_t leq_arg1_137603 = ((int16_t *) mem_param_138846.mem)[slice_137602];
                                            int64_t slice_137610 = stride_137381 + leq_arg0_137605;
                                            int64_t slice_137611 = start_137453 + slice_137610;
                                            int16_t leq_arg0_137612 = ((int16_t *) mem_param_138846.mem)[slice_137611];
                                            bool defunc_0_leq_res_137613 = sle16(leq_arg0_137612, leq_arg1_137603);
                                            
                                            leq_y_x_137597 = defunc_0_leq_res_137613;
                                        }
                                        
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        int64_t defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                        
                                        if (leq_y_x_137597) {
                                            int64_t tmp_138159 = add64(tt_137549, n_137590);
                                            int64_t tmp_138160 = sub64(count_137551, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tmp_138159;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tt_137550;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = tmp_138160;
                                        } else {
                                            int64_t tmp_137619 = add64(tt_137549, n_137590);
                                            
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137614 = tt_137549;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137615 = tmp_137619;
                                            defunc_0_lifted_step_res_f_res_f_res_f_res_137616 = count_137551;
                                        }
                                        defunc_0_lifted_step_res_f_res_f_res_137567 = ss_137547;
                                        defunc_0_lifted_step_res_f_res_f_res_137568 = defunc_0_lifted_step_res_f_res_f_res_f_res_137614;
                                        defunc_0_lifted_step_res_f_res_f_res_137569 = defunc_0_lifted_step_res_f_res_f_res_f_res_137615;
                                        defunc_0_lifted_step_res_f_res_f_res_137570 = defunc_0_lifted_step_res_f_res_f_res_f_res_137616;
                                    }
                                    defunc_0_lifted_step_res_f_res_137561 = defunc_0_lifted_step_res_f_res_f_res_137567;
                                    defunc_0_lifted_step_res_f_res_137562 = defunc_0_lifted_step_res_f_res_f_res_137568;
                                    defunc_0_lifted_step_res_f_res_137563 = defunc_0_lifted_step_res_f_res_f_res_137569;
                                    defunc_0_lifted_step_res_f_res_137564 = defunc_0_lifted_step_res_f_res_f_res_137570;
                                }
                                defunc_0_lifted_step_res_137554 = defunc_0_lifted_step_res_f_res_137561;
                                defunc_0_lifted_step_res_137555 = defunc_0_lifted_step_res_f_res_137562;
                                defunc_0_lifted_step_res_137556 = defunc_0_lifted_step_res_f_res_137563;
                                defunc_0_lifted_step_res_137557 = defunc_0_lifted_step_res_f_res_137564;
                            }
                            
                            int64_t loopres_137620;
                            int64_t loopres_137621;
                            int64_t loopres_137622;
                            int64_t loopres_137623;
                            int64_t loopres_137624;
                            
                            if (futrts_lifted_normalizze_8911(ctx, &loopres_137620, &loopres_137621, &loopres_137622, &loopres_137623, &loopres_137624, defunc_0_lifted_step_res_137554, ss_137548, defunc_0_lifted_step_res_137555, defunc_0_lifted_step_res_137556, defunc_0_lifted_step_res_137557) != 0) {
                                err = 1;
                                goto cleanup;
                            }
                            
                            bool loop_cond_137625 = slt64((int64_t) 0, loopres_137624);
                            bool loop_while_tmp_139397 = loop_cond_137625;
                            int64_t ss_tmp_139398 = loopres_137620;
                            int64_t ss_tmp_139399 = loopres_137621;
                            int64_t tt_tmp_139400 = loopres_137622;
                            int64_t tt_tmp_139401 = loopres_137623;
                            int64_t count_tmp_139402 = loopres_137624;
                            
                            loop_while_137546 = loop_while_tmp_139397;
                            ss_137547 = ss_tmp_139398;
                            ss_137548 = ss_tmp_139399;
                            tt_137549 = tt_tmp_139400;
                            tt_137550 = tt_tmp_139401;
                            count_137551 = count_tmp_139402;
                        }
                        defunc_0_split_count_res_137540 = loop_while_137546;
                        defunc_0_split_count_res_137541 = ss_137547;
                        defunc_0_split_count_res_137542 = ss_137548;
                        defunc_0_split_count_res_137543 = tt_137549;
                        defunc_0_split_count_res_137544 = tt_137550;
                        defunc_0_split_count_res_137545 = count_137551;
                        ((int64_t *) mem_138865)[i_138314] = defunc_0_split_count_res_137541;
                        ((int64_t *) mem_138867)[i_138314] = defunc_0_split_count_res_137543;
                    }
                    if (mem_138882_cached_sizze_139631 < bytes_138881) {
                        err = lexical_realloc(ctx, &mem_138882, &mem_138882_cached_sizze_139631, bytes_138881);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    if (mem_138885_cached_sizze_139632 < bytes_138884) {
                        err = lexical_realloc(ctx, &mem_138885, &mem_138885_cached_sizze_139632, bytes_138884);
                        if (err != FUTHARK_SUCCESS)
                            goto cleanup;
                    }
                    for (int64_t i_138321 = 0; i_138321 < num_blocks_137401; i_138321++) {
                        bool y_137631 = slt64(i_138321, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool index_certs_137633;
                        
                        if (!y_137631) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_138321, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:151:22-34\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137634 = ((int64_t *) mem_138865)[i_138321];
                        int64_t defunc_0_f_res_137635 = ((int64_t *) mem_138867)[i_138321];
                        int64_t tmp_137636 = add64((int64_t) 1, i_138321);
                        bool x_137637 = sle64((int64_t) 0, tmp_137636);
                        bool y_137638 = slt64(tmp_137636, dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402);
                        bool bounds_check_137639 = x_137637 && y_137638;
                        bool index_certs_137640;
                        
                        if (!bounds_check_137639) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_137636, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20U1z20Unum_blocksz7dUzg_137402, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:152:22-36\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t defunc_0_f_res_137641 = ((int64_t *) mem_138865)[tmp_137636];
                        int64_t defunc_0_f_res_137642 = ((int64_t *) mem_138867)[tmp_137636];
                        int64_t merge_sequential_arg2_137643 = add64(stride_137381, defunc_0_f_res_137635);
                        int64_t merge_sequential_arg2_137644 = add64(stride_137381, defunc_0_f_res_137642);
                        int64_t j_m_i_137645 = sub64(merge_sequential_arg2_137644, merge_sequential_arg2_137643);
                        bool empty_slice_137646 = j_m_i_137645 == (int64_t) 0;
                        int64_t m_137647 = sub64(j_m_i_137645, (int64_t) 1);
                        int64_t i_p_m_t_s_137648 = add64(merge_sequential_arg2_137643, m_137647);
                        bool zzero_leq_i_p_m_t_s_137649 = sle64((int64_t) 0, i_p_m_t_s_137648);
                        bool i_p_m_t_s_leq_w_137650 = slt64(i_p_m_t_s_137648, next_stride_137382);
                        bool zzero_lte_i_137651 = sle64((int64_t) 0, merge_sequential_arg2_137643);
                        bool i_lte_j_137652 = sle64(merge_sequential_arg2_137643, merge_sequential_arg2_137644);
                        bool y_137653 = i_p_m_t_s_leq_w_137650 && zzero_lte_i_137651;
                        bool y_137654 = zzero_leq_i_p_m_t_s_137649 && y_137653;
                        bool forwards_ok_137655 = i_lte_j_137652 && y_137654;
                        bool ok_or_empty_137656 = empty_slice_137646 || forwards_ok_137655;
                        bool index_certs_137657;
                        
                        if (!ok_or_empty_137656) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) merge_sequential_arg2_137643, ":", (long long) merge_sequential_arg2_137644, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:40-58\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        int64_t j_m_i_137658 = sub64(defunc_0_f_res_137641, defunc_0_f_res_137634);
                        bool empty_slice_137659 = j_m_i_137658 == (int64_t) 0;
                        int64_t m_137660 = sub64(j_m_i_137658, (int64_t) 1);
                        int64_t i_p_m_t_s_137661 = add64(defunc_0_f_res_137634, m_137660);
                        bool zzero_leq_i_p_m_t_s_137662 = sle64((int64_t) 0, i_p_m_t_s_137661);
                        bool i_p_m_t_s_leq_w_137663 = slt64(i_p_m_t_s_137661, next_stride_137382);
                        bool zzero_lte_i_137664 = sle64((int64_t) 0, defunc_0_f_res_137634);
                        bool i_lte_j_137665 = sle64(defunc_0_f_res_137634, defunc_0_f_res_137641);
                        bool y_137666 = i_p_m_t_s_leq_w_137663 && zzero_lte_i_137664;
                        bool y_137667 = zzero_leq_i_p_m_t_s_137662 && y_137666;
                        bool forwards_ok_137668 = i_lte_j_137665 && y_137667;
                        bool ok_or_empty_137669 = empty_slice_137659 || forwards_ok_137668;
                        bool index_certs_137670;
                        
                        if (!ok_or_empty_137669) {
                            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) defunc_0_f_res_137634, ":", (long long) defunc_0_f_res_137641, "] out of bounds for array of shape [", (long long) next_stride_137382, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:153:29-39\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #4  /prelude/soacs.fut:59:9-11\n   #5  /prelude/array.fut:241:11-17\n   #6  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #7  /prelude/functional.fut:9:44-45\n   #8  /prelude/functional.fut:9:44-45\n   #9  ftsort.fut:273:82-85\n   #10 ftsort.fut:267:1-273:85\n"));
                            err = FUTHARK_PROGRAM_ERROR;
                            goto cleanup;
                        }
                        
                        bool cond_137671 = slt64((int64_t) 0, j_m_i_137658);
                        int16_t dummy_137672;
                        int64_t dummy_137673;
                        
                        if (cond_137671) {
                            bool index_certs_138161;
                            
                            if (!cond_137671) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:36-42\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_138162 = start_137453 + defunc_0_f_res_137634;
                            int16_t head_res_138163 = ((int16_t *) mem_param_138846.mem)[slice_138162];
                            int64_t head_res_138164 = ((int64_t *) mem_param_138849.mem)[slice_138162];
                            
                            dummy_137672 = head_res_138163;
                            dummy_137673 = head_res_138164;
                        } else {
                            bool y_137678 = slt64((int64_t) 0, j_m_i_137645);
                            bool index_certs_137679;
                            
                            if (!y_137678) {
                                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  /prelude/array.fut:22:29-33\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:100:48-54\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #3  /prelude/soacs.fut:59:9-11\n   #4  /prelude/array.fut:241:11-17\n   #5  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #6  /prelude/soacs.fut:59:9-11\n   #7  /prelude/array.fut:241:11-17\n   #8  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #9  /prelude/functional.fut:9:44-45\n   #10 /prelude/functional.fut:9:44-45\n   #11 ftsort.fut:273:82-85\n   #12 ftsort.fut:267:1-273:85\n"));
                                err = FUTHARK_PROGRAM_ERROR;
                                goto cleanup;
                            }
                            
                            int64_t slice_137680 = start_137453 + merge_sequential_arg2_137643;
                            int16_t head_res_137681 = ((int16_t *) mem_param_138846.mem)[slice_137680];
                            int64_t head_res_137682 = ((int64_t *) mem_param_138849.mem)[slice_137680];
                            
                            dummy_137672 = head_res_137681;
                            dummy_137673 = head_res_137682;
                        }
                        for (int64_t nest_i_139405 = 0; nest_i_139405 < merge_block_sizze_137258; nest_i_139405++) {
                            ((int16_t *) mem_138882)[i_138321 * merge_block_sizze_137258 + nest_i_139405] = dummy_137672;
                        }
                        for (int64_t nest_i_139406 = 0; nest_i_139406 < merge_block_sizze_137258; nest_i_139406++) {
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + nest_i_139406] = dummy_137673;
                        }
                        
                        int64_t data_137685;
                        int64_t i_137689 = (int64_t) 0;
                        
                        for (int64_t k_137688 = 0; k_137688 < merge_block_sizze_137258; k_137688++) {
                            int64_t j_137692 = sub64(k_137688, i_137689);
                            bool cond_137693 = j_137692 == j_m_i_137645;
                            bool cond_137694;
                            
                            if (cond_137693) {
                                cond_137694 = 1;
                            } else {
                                bool cond_137695 = slt64(i_137689, j_m_i_137658);
                                bool cond_f_res_137696;
                                
                                if (cond_137695) {
                                    bool x_138165 = sle64((int64_t) 0, j_137692);
                                    bool y_138166 = slt64(j_137692, j_m_i_137645);
                                    bool bounds_check_138167 = x_138165 && y_138166;
                                    bool index_certs_138168;
                                    
                                    if (!bounds_check_138167) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:55-59\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    bool x_138172 = sle64((int64_t) 0, i_137689);
                                    bool bounds_check_138173 = cond_137695 && x_138172;
                                    bool index_certs_138174;
                                    
                                    if (!bounds_check_138173) {
                                        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:105:50-54\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                        err = FUTHARK_PROGRAM_ERROR;
                                        goto cleanup;
                                    }
                                    
                                    int64_t slice_138169 = merge_sequential_arg2_137643 + j_137692;
                                    int64_t slice_138170 = start_137453 + slice_138169;
                                    int16_t leq_arg1_138171 = ((int16_t *) mem_param_138846.mem)[slice_138170];
                                    int64_t slice_138175 = defunc_0_f_res_137634 + i_137689;
                                    int64_t slice_138176 = start_137453 + slice_138175;
                                    int16_t leq_arg0_138177 = ((int16_t *) mem_param_138846.mem)[slice_138176];
                                    bool defunc_0_leq_res_138178 = sle16(leq_arg0_138177, leq_arg1_138171);
                                    
                                    cond_f_res_137696 = defunc_0_leq_res_138178;
                                } else {
                                    cond_f_res_137696 = 0;
                                }
                                cond_137694 = cond_f_res_137696;
                            }
                            
                            int64_t loopres_137711;
                            int16_t loopres_137712;
                            int64_t loopres_137713;
                            
                            if (cond_137694) {
                                bool x_138180 = sle64((int64_t) 0, i_137689);
                                bool y_138181 = slt64(i_137689, j_m_i_137658);
                                bool bounds_check_138182 = x_138180 && y_138181;
                                bool index_certs_138183;
                                
                                if (!bounds_check_138182) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_137689, "] out of bounds for array of shape [", (long long) j_m_i_137658, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:106:17-21\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t tmp_138179 = add64((int64_t) 1, i_137689);
                                int64_t slice_138184 = defunc_0_f_res_137634 + i_137689;
                                int64_t slice_138185 = start_137453 + slice_138184;
                                int16_t tmp_138186 = ((int16_t *) mem_param_138846.mem)[slice_138185];
                                int64_t tmp_138187 = ((int64_t *) mem_param_138849.mem)[slice_138185];
                                
                                loopres_137711 = tmp_138179;
                                loopres_137712 = tmp_138186;
                                loopres_137713 = tmp_138187;
                            } else {
                                bool x_137723 = sle64((int64_t) 0, j_137692);
                                bool y_137724 = slt64(j_137692, j_m_i_137645);
                                bool bounds_check_137725 = x_137723 && y_137724;
                                bool index_certs_137726;
                                
                                if (!bounds_check_137725) {
                                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_137692, "] out of bounds for array of shape [", (long long) j_m_i_137645, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:108:15-19\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:153:59-69\n   #2  /prelude/soacs.fut:59:9-11\n   #3  /prelude/array.fut:241:11-17\n   #4  lib/github.com/diku-dk/sorts/merge_sort.fut:260:43-59\n   #5  /prelude/soacs.fut:59:9-11\n   #6  /prelude/array.fut:241:11-17\n   #7  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #8  /prelude/functional.fut:9:44-45\n   #9  /prelude/functional.fut:9:44-45\n   #10 ftsort.fut:273:82-85\n   #11 ftsort.fut:267:1-273:85\n"));
                                    err = FUTHARK_PROGRAM_ERROR;
                                    goto cleanup;
                                }
                                
                                int64_t slice_137727 = merge_sequential_arg2_137643 + j_137692;
                                int64_t slice_137728 = start_137453 + slice_137727;
                                int16_t tmp_137729 = ((int16_t *) mem_param_138846.mem)[slice_137728];
                                int64_t tmp_137730 = ((int64_t *) mem_param_138849.mem)[slice_137728];
                                
                                loopres_137711 = i_137689;
                                loopres_137712 = tmp_137729;
                                loopres_137713 = tmp_137730;
                            }
                            ((int16_t *) mem_138882)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137712;
                            ((int64_t *) mem_138885)[i_138321 * merge_block_sizze_137258 + k_137688] = loopres_137713;
                            
                            int64_t i_tmp_139407 = loopres_137711;
                            
                            i_137689 = i_tmp_139407;
                        }
                        data_137685 = i_137689;
                    }
                    if (memblock_alloc(ctx, &mem_138920, bytes_138881, "mem_138920")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_2b(ctx, 2, (uint16_t *) mem_138920.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint16_t *) mem_138882, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_alloc(ctx, &mem_138924, bytes_138884, "mem_138924")) {
                        err = 1;
                        goto cleanup;
                    }
                    lmad_copy_8b(ctx, 2, (uint64_t *) mem_138924.mem, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (uint64_t *) mem_138885, (int64_t) 0, (int64_t []) {merge_block_sizze_137258, (int64_t) 1}, (int64_t []) {num_blocks_137401, merge_block_sizze_137258});
                    if (memblock_set(ctx, &ext_mem_138947, &mem_138920, "mem_138920") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_138944, &mem_138924, "mem_138924") != 0)
                        return 1;
                }
                lmad_copy_2b(ctx, 1, (uint16_t *) mem_138852, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_138947.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
                    return 1;
                lmad_copy_8b(ctx, 1, (uint64_t *) mem_138855, i_138328 * next_stride_137382, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138944.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {next_stride_137382});
                if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
                    return 1;
            }
            
            int64_t flat_dim_137737 = next_stride_137382 * num_merges_137386;
            
            if (memblock_alloc(ctx, &mem_138958, bytes_138851, "mem_138958")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_2b(ctx, 2, (uint16_t *) mem_138958.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint16_t *) mem_138852, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            if (memblock_alloc(ctx, &mem_138962, bytes_138854, "mem_138962")) {
                err = 1;
                goto cleanup;
            }
            lmad_copy_8b(ctx, 2, (uint64_t *) mem_138962.mem, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (uint64_t *) mem_138855, (int64_t) 0, (int64_t []) {next_stride_137382, (int64_t) 1}, (int64_t []) {num_merges_137386, next_stride_137382});
            
            bool loop_cond_137740 = slt64(next_stride_137382, flat_dim_137255);
            
            if (memblock_set(ctx, &mem_param_tmp_139381, &mem_138958, "mem_138958") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_139382, &mem_138962, "mem_138962") != 0)
                return 1;
            
            int64_t loop_dz2084Uz2082U_tmp_139383 = flat_dim_137737;
            bool loop_while_tmp_139384 = loop_cond_137740;
            int64_t stride_tmp_139387 = next_stride_137382;
            
            if (memblock_set(ctx, &mem_param_138846, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_138849, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
                return 1;
            loop_dz2084Uz2082U_137377 = loop_dz2084Uz2082U_tmp_139383;
            loop_while_137378 = loop_while_tmp_139384;
            stride_137381 = stride_tmp_139387;
        }
        if (memblock_set(ctx, &ext_mem_138969, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_138968, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        data_137372 = loop_dz2084Uz2082U_137377;
        data_137373 = loop_while_137378;
        data_137376 = stride_137381;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        
        bool empty_slice_137741 = dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203 == (int64_t) 0;
        bool zzero_leq_i_p_m_t_s_137742 = sle64((int64_t) 0, zs_lhs_137239);
        bool i_p_m_t_s_leq_w_137743 = slt64(zs_lhs_137239, data_137372);
        bool y_137744 = zzero_leq_i_p_m_t_s_137742 && i_p_m_t_s_leq_w_137743;
        bool ok_or_empty_137745 = empty_slice_137741 || y_137744;
        bool index_certs_137746;
        
        if (!ok_or_empty_137745) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "] out of bounds for array of shape [", (long long) data_137372, "].", "-> #0  /prelude/array.fut:46:45-51\n   #1  lib/github.com/diku-dk/sorts/merge_sort.fut:265:3-14\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:272:74-75\n   #3  /prelude/functional.fut:9:44-45\n   #4  /prelude/functional.fut:9:44-45\n   #5  ftsort.fut:273:82-85\n   #6  ftsort.fut:267:1-273:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        if (memblock_set(ctx, &ext_mem_138972, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
        return 1;
    for (int64_t i_138337 = 0; i_138337 < dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203; i_138337++) {
        int64_t eta_p_137751 = ((int64_t *) ext_mem_138972.mem)[i_138337];
        bool x_137752 = sle64((int64_t) 0, eta_p_137751);
        bool y_137753 = slt64(eta_p_137751, dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203);
        bool bounds_check_137754 = x_137752 && y_137753;
        bool index_certs_137755;
        
        if (!bounds_check_137754) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_137751, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLzmZRz20Unaz20Uflb_aZRz20UZLZLzmZRz20Unbz20Uflb_bZRz7dUzg_137203, "].", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:277:24-28\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/merge_sort.fut:277:8-29\n   #3  /prelude/functional.fut:9:44-45\n   #4  ftsort.fut:273:82-85\n   #5  ftsort.fut:267:1-273:85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        bool index_concat_cmp_137756 = sle64(dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199, eta_p_137751);
        int64_t index_concat_branch_137757 = btoi_bool_i64(index_concat_cmp_137756);
        int64_t index_concat_branch_137758;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138198 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t index_primexp_138199 = add64(defunc_0_merge_pipeline_res_136397, index_concat_i_138198);
            
            index_concat_branch_137758 = index_primexp_138199;
        } else {
            int64_t index_primexp_137761 = add64(defunc_0_merge_pipeline_res_136396, eta_p_137751);
            
            index_concat_branch_137758 = index_primexp_137761;
        }
        
        int16_t index_concat_branch_137762;
        
        if (index_concat_cmp_137756) {
            int64_t index_concat_i_138200 = sub64(eta_p_137751, dzlz7bUZLzmZRz20Unaz20Uflb_az7dUzg_137199);
            int64_t slice_138201 = defunc_0_merge_pipeline_res_136397 + index_concat_i_138200;
            int16_t index_concat_138202 = ((int16_t *) b_list_mem_138404.mem)[slice_138201];
            
            index_concat_branch_137762 = index_concat_138202;
        } else {
            int64_t slice_137766 = defunc_0_merge_pipeline_res_136396 + eta_p_137751;
            int16_t index_concat_137767 = ((int16_t *) a_list_mem_138403.mem)[slice_137766];
            
            index_concat_branch_137762 = index_concat_137767;
        }
        ((int64_t *) mem_138406.mem)[arg_137200 + i_138337] = index_concat_branch_137757;
        ((int64_t *) mem_138408.mem)[arg_137200 + i_138337] = index_concat_branch_137758;
        ((int16_t *) mem_138410.mem)[arg_137200 + i_138337] = index_concat_branch_137762;
    }
    if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138410, "mem_138410") != 0)
        return 1;
    prim_out_139284 = dzlz7bUZLzpZRz20Unaz20Unbz7dUzg_136368;
    if (memblock_set(ctx, &*mem_out_p_139602, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139603, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139604, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    *out_prim_out_139605 = prim_out_139284;
    
  cleanup:
    {
        free(mem_138421);
        free(mem_138423);
        free(mem_138438);
        free(mem_138441);
        free(mem_138444);
        free(mem_138447);
        free(mem_138474);
        free(mem_138477);
        free(mem_138487);
        free(mem_138489);
        free(mem_138556);
        free(mem_138559);
        free(mem_138569);
        free(mem_138571);
        free(mem_138586);
        free(mem_138589);
        free(mem_138728);
        free(mem_138770);
        free(mem_138773);
        free(mem_138783);
        free(mem_138785);
        free(mem_138852);
        free(mem_138855);
        free(mem_138865);
        free(mem_138867);
        free(mem_138882);
        free(mem_138885);
        if (memblock_unref(ctx, &mem_param_tmp_139382, "mem_param_tmp_139382") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139381, "mem_param_tmp_139381") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138962, "mem_138962") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138958, "mem_138958") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138924, "mem_138924") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138920, "mem_138920") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138929, "mem_138929") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138927, "mem_138927") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138944, "ext_mem_138944") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138947, "ext_mem_138947") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138849, "mem_param_138849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138846, "mem_param_138846") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138968, "ext_mem_138968") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138969, "ext_mem_138969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138842, "mem_138842") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138838, "mem_138838") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138972, "ext_mem_138972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138767, "mem_138767") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139326, "mem_param_tmp_139326") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139325, "mem_param_tmp_139325") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138666, "mem_138666") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138662, "mem_138662") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138628, "mem_138628") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138633, "mem_138633") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138631, "mem_138631") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138648, "ext_mem_138648") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138651, "ext_mem_138651") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138553, "mem_param_138553") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138550, "mem_param_138550") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138672, "ext_mem_138672") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138673, "ext_mem_138673") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138546, "mem_138546") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138542, "mem_138542") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138676, "ext_mem_138676") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138471, "mem_138471") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_double(struct futhark_context *ctx, struct memblock *mem_out_p_139633, struct memblock *mem_out_p_139634, struct memblock *mem_out_p_139635, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_126289, int64_t w2_126290)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * w1_126289;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138216 = 0; i_138216 < w1_126289; i_138216++) {
        double eta_p_127256 = ((double *) xs_mem_138403.mem)[i_138216];
        int64_t defunc_0_reduce_comm_res_137808;
        double defunc_0_reduce_comm_res_137809;
        int64_t defunc_0_reduce_comm_res_137810;
        int64_t redout_138206;
        double redout_138207;
        int64_t redout_138208;
        
        redout_138206 = (int64_t) -1;
        redout_138207 = eta_p_127256;
        redout_138208 = (int64_t) 0;
        for (int64_t i_138209 = 0; i_138209 < w2_126290; i_138209++) {
            double x_127261 = ((double *) ys_mem_138404.mem)[i_138209];
            bool defunc_0_neq_res_127269 = redout_138207 == eta_p_127256;
            bool defunc_0_neq_res_127270 = !defunc_0_neq_res_127269;
            bool cond_f_res_127271 = slt64(redout_138206, (int64_t) 0);
            bool y_127272 = defunc_0_neq_res_127269 && cond_f_res_127271;
            bool cond_127273 = defunc_0_neq_res_127270 || y_127272;
            bool defunc_0_neq_res_127274 = x_127261 == eta_p_127256;
            bool defunc_0_neq_res_127275 = !defunc_0_neq_res_127274;
            bool cond_t_res_f_res_127276 = slt64(i_138209, (int64_t) 0);
            bool y_127277 = defunc_0_neq_res_127274 && cond_t_res_f_res_127276;
            bool cond_t_res_127278 = defunc_0_neq_res_127275 || y_127277;
            bool x_127279 = cond_127273 && cond_t_res_127278;
            int64_t defunc_0_op_res_127280;
            double defunc_0_op_res_127281;
            int64_t defunc_0_op_res_127282;
            
            if (x_127279) {
                defunc_0_op_res_127280 = (int64_t) -1;
                defunc_0_op_res_127281 = eta_p_127256;
                defunc_0_op_res_127282 = (int64_t) 0;
            } else {
                bool x_127283 = !cond_f_res_127271;
                bool y_127284 = defunc_0_neq_res_127270 && x_127283;
                bool cond_127285 = cond_f_res_127271 || y_127284;
                int64_t defunc_0_op_res_f_res_127286;
                double defunc_0_op_res_f_res_127287;
                int64_t defunc_0_op_res_f_res_127288;
                
                if (cond_127285) {
                    defunc_0_op_res_f_res_127286 = i_138209;
                    defunc_0_op_res_f_res_127287 = x_127261;
                    defunc_0_op_res_f_res_127288 = (int64_t) 1;
                } else {
                    bool x_127289 = !cond_t_res_f_res_127276;
                    bool y_127290 = defunc_0_neq_res_127275 && x_127289;
                    bool cond_127291 = cond_t_res_f_res_127276 || y_127290;
                    double defunc_0_op_res_f_res_f_res_127292;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127292 = redout_138207;
                    } else {
                        defunc_0_op_res_f_res_f_res_127292 = eta_p_127256;
                    }
                    
                    int64_t defunc_0_op_res_f_res_f_res_127293;
                    int64_t defunc_0_op_res_f_res_f_res_127294;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127293 = redout_138206;
                        defunc_0_op_res_f_res_f_res_127294 = redout_138208;
                    } else {
                        bool cond_127295 = slt64(redout_138206, i_138209);
                        bool x_127296 = !cond_127295;
                        bool y_127297 = cond_t_res_f_res_127276 && x_127296;
                        bool cond_127298 = cond_127295 || y_127297;
                        int64_t tmp_127299;
                        
                        if (cond_127298) {
                            tmp_127299 = redout_138206;
                        } else {
                            tmp_127299 = i_138209;
                        }
                        
                        int64_t tmp_127300 = add64((int64_t) 1, redout_138208);
                        
                        defunc_0_op_res_f_res_f_res_127293 = tmp_127299;
                        defunc_0_op_res_f_res_f_res_127294 = tmp_127300;
                    }
                    defunc_0_op_res_f_res_127286 = defunc_0_op_res_f_res_f_res_127293;
                    defunc_0_op_res_f_res_127287 = defunc_0_op_res_f_res_f_res_127292;
                    defunc_0_op_res_f_res_127288 = defunc_0_op_res_f_res_f_res_127294;
                }
                defunc_0_op_res_127280 = defunc_0_op_res_f_res_127286;
                defunc_0_op_res_127281 = defunc_0_op_res_f_res_127287;
                defunc_0_op_res_127282 = defunc_0_op_res_f_res_127288;
            }
            
            int64_t redout_tmp_139287 = defunc_0_op_res_127280;
            double redout_tmp_139288 = defunc_0_op_res_127281;
            int64_t redout_tmp_139289 = defunc_0_op_res_127282;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
            redout_138208 = redout_tmp_139289;
        }
        defunc_0_reduce_comm_res_137808 = redout_138206;
        defunc_0_reduce_comm_res_137809 = redout_138207;
        defunc_0_reduce_comm_res_137810 = redout_138208;
        ((int64_t *) mem_138406.mem)[i_138216] = defunc_0_reduce_comm_res_137808;
        ((double *) mem_138408.mem)[i_138216] = defunc_0_reduce_comm_res_137809;
        ((int64_t *) mem_138410.mem)[i_138216] = defunc_0_reduce_comm_res_137810;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138410, "mem_138410") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139633, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139634, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139635, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_float(struct futhark_context *ctx, struct memblock *mem_out_p_139636, struct memblock *mem_out_p_139637, struct memblock *mem_out_p_139638, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_125790, int64_t w2_125791)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * w1_125790;
    int64_t bytes_138407 = (int64_t) 4 * w1_125790;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138407, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138216 = 0; i_138216 < w1_125790; i_138216++) {
        float eta_p_127256 = ((float *) xs_mem_138403.mem)[i_138216];
        int64_t defunc_0_reduce_comm_res_137808;
        float defunc_0_reduce_comm_res_137809;
        int64_t defunc_0_reduce_comm_res_137810;
        int64_t redout_138206;
        float redout_138207;
        int64_t redout_138208;
        
        redout_138206 = (int64_t) -1;
        redout_138207 = eta_p_127256;
        redout_138208 = (int64_t) 0;
        for (int64_t i_138209 = 0; i_138209 < w2_125791; i_138209++) {
            float x_127261 = ((float *) ys_mem_138404.mem)[i_138209];
            bool defunc_0_neq_res_127269 = redout_138207 == eta_p_127256;
            bool defunc_0_neq_res_127270 = !defunc_0_neq_res_127269;
            bool cond_f_res_127271 = slt64(redout_138206, (int64_t) 0);
            bool y_127272 = defunc_0_neq_res_127269 && cond_f_res_127271;
            bool cond_127273 = defunc_0_neq_res_127270 || y_127272;
            bool defunc_0_neq_res_127274 = x_127261 == eta_p_127256;
            bool defunc_0_neq_res_127275 = !defunc_0_neq_res_127274;
            bool cond_t_res_f_res_127276 = slt64(i_138209, (int64_t) 0);
            bool y_127277 = defunc_0_neq_res_127274 && cond_t_res_f_res_127276;
            bool cond_t_res_127278 = defunc_0_neq_res_127275 || y_127277;
            bool x_127279 = cond_127273 && cond_t_res_127278;
            int64_t defunc_0_op_res_127280;
            float defunc_0_op_res_127281;
            int64_t defunc_0_op_res_127282;
            
            if (x_127279) {
                defunc_0_op_res_127280 = (int64_t) -1;
                defunc_0_op_res_127281 = eta_p_127256;
                defunc_0_op_res_127282 = (int64_t) 0;
            } else {
                bool x_127283 = !cond_f_res_127271;
                bool y_127284 = defunc_0_neq_res_127270 && x_127283;
                bool cond_127285 = cond_f_res_127271 || y_127284;
                int64_t defunc_0_op_res_f_res_127286;
                float defunc_0_op_res_f_res_127287;
                int64_t defunc_0_op_res_f_res_127288;
                
                if (cond_127285) {
                    defunc_0_op_res_f_res_127286 = i_138209;
                    defunc_0_op_res_f_res_127287 = x_127261;
                    defunc_0_op_res_f_res_127288 = (int64_t) 1;
                } else {
                    bool x_127289 = !cond_t_res_f_res_127276;
                    bool y_127290 = defunc_0_neq_res_127275 && x_127289;
                    bool cond_127291 = cond_t_res_f_res_127276 || y_127290;
                    float defunc_0_op_res_f_res_f_res_127292;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127292 = redout_138207;
                    } else {
                        defunc_0_op_res_f_res_f_res_127292 = eta_p_127256;
                    }
                    
                    int64_t defunc_0_op_res_f_res_f_res_127293;
                    int64_t defunc_0_op_res_f_res_f_res_127294;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127293 = redout_138206;
                        defunc_0_op_res_f_res_f_res_127294 = redout_138208;
                    } else {
                        bool cond_127295 = slt64(redout_138206, i_138209);
                        bool x_127296 = !cond_127295;
                        bool y_127297 = cond_t_res_f_res_127276 && x_127296;
                        bool cond_127298 = cond_127295 || y_127297;
                        int64_t tmp_127299;
                        
                        if (cond_127298) {
                            tmp_127299 = redout_138206;
                        } else {
                            tmp_127299 = i_138209;
                        }
                        
                        int64_t tmp_127300 = add64((int64_t) 1, redout_138208);
                        
                        defunc_0_op_res_f_res_f_res_127293 = tmp_127299;
                        defunc_0_op_res_f_res_f_res_127294 = tmp_127300;
                    }
                    defunc_0_op_res_f_res_127286 = defunc_0_op_res_f_res_f_res_127293;
                    defunc_0_op_res_f_res_127287 = defunc_0_op_res_f_res_f_res_127292;
                    defunc_0_op_res_f_res_127288 = defunc_0_op_res_f_res_f_res_127294;
                }
                defunc_0_op_res_127280 = defunc_0_op_res_f_res_127286;
                defunc_0_op_res_127281 = defunc_0_op_res_f_res_127287;
                defunc_0_op_res_127282 = defunc_0_op_res_f_res_127288;
            }
            
            int64_t redout_tmp_139287 = defunc_0_op_res_127280;
            float redout_tmp_139288 = defunc_0_op_res_127281;
            int64_t redout_tmp_139289 = defunc_0_op_res_127282;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
            redout_138208 = redout_tmp_139289;
        }
        defunc_0_reduce_comm_res_137808 = redout_138206;
        defunc_0_reduce_comm_res_137809 = redout_138207;
        defunc_0_reduce_comm_res_137810 = redout_138208;
        ((int64_t *) mem_138406.mem)[i_138216] = defunc_0_reduce_comm_res_137808;
        ((float *) mem_138408.mem)[i_138216] = defunc_0_reduce_comm_res_137809;
        ((int64_t *) mem_138410.mem)[i_138216] = defunc_0_reduce_comm_res_137810;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138410, "mem_138410") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139636, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139637, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139638, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_int(struct futhark_context *ctx, struct memblock *mem_out_p_139639, struct memblock *mem_out_p_139640, struct memblock *mem_out_p_139641, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_124976, int64_t w2_124977)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * w1_124976;
    int64_t bytes_138407 = (int64_t) 4 * w1_124976;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138407, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138216 = 0; i_138216 < w1_124976; i_138216++) {
        int32_t eta_p_127256 = ((int32_t *) xs_mem_138403.mem)[i_138216];
        int64_t defunc_0_reduce_comm_res_137808;
        int32_t defunc_0_reduce_comm_res_137809;
        int64_t defunc_0_reduce_comm_res_137810;
        int64_t redout_138206;
        int32_t redout_138207;
        int64_t redout_138208;
        
        redout_138206 = (int64_t) -1;
        redout_138207 = eta_p_127256;
        redout_138208 = (int64_t) 0;
        for (int64_t i_138209 = 0; i_138209 < w2_124977; i_138209++) {
            int32_t x_127261 = ((int32_t *) ys_mem_138404.mem)[i_138209];
            bool defunc_0_neq_res_127269 = redout_138207 == eta_p_127256;
            bool defunc_0_neq_res_127270 = !defunc_0_neq_res_127269;
            bool cond_f_res_127271 = slt64(redout_138206, (int64_t) 0);
            bool y_127272 = defunc_0_neq_res_127269 && cond_f_res_127271;
            bool cond_127273 = defunc_0_neq_res_127270 || y_127272;
            bool defunc_0_neq_res_127274 = x_127261 == eta_p_127256;
            bool defunc_0_neq_res_127275 = !defunc_0_neq_res_127274;
            bool cond_t_res_f_res_127276 = slt64(i_138209, (int64_t) 0);
            bool y_127277 = defunc_0_neq_res_127274 && cond_t_res_f_res_127276;
            bool cond_t_res_127278 = defunc_0_neq_res_127275 || y_127277;
            bool x_127279 = cond_127273 && cond_t_res_127278;
            int64_t defunc_0_op_res_127280;
            int32_t defunc_0_op_res_127281;
            int64_t defunc_0_op_res_127282;
            
            if (x_127279) {
                defunc_0_op_res_127280 = (int64_t) -1;
                defunc_0_op_res_127281 = eta_p_127256;
                defunc_0_op_res_127282 = (int64_t) 0;
            } else {
                bool x_127283 = !cond_f_res_127271;
                bool y_127284 = defunc_0_neq_res_127270 && x_127283;
                bool cond_127285 = cond_f_res_127271 || y_127284;
                int64_t defunc_0_op_res_f_res_127286;
                int32_t defunc_0_op_res_f_res_127287;
                int64_t defunc_0_op_res_f_res_127288;
                
                if (cond_127285) {
                    defunc_0_op_res_f_res_127286 = i_138209;
                    defunc_0_op_res_f_res_127287 = x_127261;
                    defunc_0_op_res_f_res_127288 = (int64_t) 1;
                } else {
                    bool x_127289 = !cond_t_res_f_res_127276;
                    bool y_127290 = defunc_0_neq_res_127275 && x_127289;
                    bool cond_127291 = cond_t_res_f_res_127276 || y_127290;
                    int32_t defunc_0_op_res_f_res_f_res_127292;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127292 = redout_138207;
                    } else {
                        defunc_0_op_res_f_res_f_res_127292 = eta_p_127256;
                    }
                    
                    int64_t defunc_0_op_res_f_res_f_res_127293;
                    int64_t defunc_0_op_res_f_res_f_res_127294;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127293 = redout_138206;
                        defunc_0_op_res_f_res_f_res_127294 = redout_138208;
                    } else {
                        bool cond_127295 = slt64(redout_138206, i_138209);
                        bool x_127296 = !cond_127295;
                        bool y_127297 = cond_t_res_f_res_127276 && x_127296;
                        bool cond_127298 = cond_127295 || y_127297;
                        int64_t tmp_127299;
                        
                        if (cond_127298) {
                            tmp_127299 = redout_138206;
                        } else {
                            tmp_127299 = i_138209;
                        }
                        
                        int64_t tmp_127300 = add64((int64_t) 1, redout_138208);
                        
                        defunc_0_op_res_f_res_f_res_127293 = tmp_127299;
                        defunc_0_op_res_f_res_f_res_127294 = tmp_127300;
                    }
                    defunc_0_op_res_f_res_127286 = defunc_0_op_res_f_res_f_res_127293;
                    defunc_0_op_res_f_res_127287 = defunc_0_op_res_f_res_f_res_127292;
                    defunc_0_op_res_f_res_127288 = defunc_0_op_res_f_res_f_res_127294;
                }
                defunc_0_op_res_127280 = defunc_0_op_res_f_res_127286;
                defunc_0_op_res_127281 = defunc_0_op_res_f_res_127287;
                defunc_0_op_res_127282 = defunc_0_op_res_f_res_127288;
            }
            
            int64_t redout_tmp_139287 = defunc_0_op_res_127280;
            int32_t redout_tmp_139288 = defunc_0_op_res_127281;
            int64_t redout_tmp_139289 = defunc_0_op_res_127282;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
            redout_138208 = redout_tmp_139289;
        }
        defunc_0_reduce_comm_res_137808 = redout_138206;
        defunc_0_reduce_comm_res_137809 = redout_138207;
        defunc_0_reduce_comm_res_137810 = redout_138208;
        ((int64_t *) mem_138406.mem)[i_138216] = defunc_0_reduce_comm_res_137808;
        ((int32_t *) mem_138408.mem)[i_138216] = defunc_0_reduce_comm_res_137809;
        ((int64_t *) mem_138410.mem)[i_138216] = defunc_0_reduce_comm_res_137810;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138410, "mem_138410") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139639, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139640, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139641, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_long(struct futhark_context *ctx, struct memblock *mem_out_p_139642, struct memblock *mem_out_p_139643, struct memblock *mem_out_p_139644, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_125291, int64_t w2_125292)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * w1_125291;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138405, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138216 = 0; i_138216 < w1_125291; i_138216++) {
        int64_t eta_p_127256 = ((int64_t *) xs_mem_138403.mem)[i_138216];
        int64_t defunc_0_reduce_comm_res_137808;
        int64_t defunc_0_reduce_comm_res_137809;
        int64_t defunc_0_reduce_comm_res_137810;
        int64_t redout_138206;
        int64_t redout_138207;
        int64_t redout_138208;
        
        redout_138206 = (int64_t) -1;
        redout_138207 = eta_p_127256;
        redout_138208 = (int64_t) 0;
        for (int64_t i_138209 = 0; i_138209 < w2_125292; i_138209++) {
            int64_t x_127261 = ((int64_t *) ys_mem_138404.mem)[i_138209];
            bool defunc_0_neq_res_127269 = redout_138207 == eta_p_127256;
            bool defunc_0_neq_res_127270 = !defunc_0_neq_res_127269;
            bool cond_f_res_127271 = slt64(redout_138206, (int64_t) 0);
            bool y_127272 = defunc_0_neq_res_127269 && cond_f_res_127271;
            bool cond_127273 = defunc_0_neq_res_127270 || y_127272;
            bool defunc_0_neq_res_127274 = x_127261 == eta_p_127256;
            bool defunc_0_neq_res_127275 = !defunc_0_neq_res_127274;
            bool cond_t_res_f_res_127276 = slt64(i_138209, (int64_t) 0);
            bool y_127277 = defunc_0_neq_res_127274 && cond_t_res_f_res_127276;
            bool cond_t_res_127278 = defunc_0_neq_res_127275 || y_127277;
            bool x_127279 = cond_127273 && cond_t_res_127278;
            int64_t defunc_0_op_res_127280;
            int64_t defunc_0_op_res_127281;
            int64_t defunc_0_op_res_127282;
            
            if (x_127279) {
                defunc_0_op_res_127280 = (int64_t) -1;
                defunc_0_op_res_127281 = eta_p_127256;
                defunc_0_op_res_127282 = (int64_t) 0;
            } else {
                bool x_127283 = !cond_f_res_127271;
                bool y_127284 = defunc_0_neq_res_127270 && x_127283;
                bool cond_127285 = cond_f_res_127271 || y_127284;
                int64_t defunc_0_op_res_f_res_127286;
                int64_t defunc_0_op_res_f_res_127287;
                int64_t defunc_0_op_res_f_res_127288;
                
                if (cond_127285) {
                    defunc_0_op_res_f_res_127286 = i_138209;
                    defunc_0_op_res_f_res_127287 = x_127261;
                    defunc_0_op_res_f_res_127288 = (int64_t) 1;
                } else {
                    bool x_127289 = !cond_t_res_f_res_127276;
                    bool y_127290 = defunc_0_neq_res_127275 && x_127289;
                    bool cond_127291 = cond_t_res_f_res_127276 || y_127290;
                    int64_t defunc_0_op_res_f_res_f_res_127292;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127292 = redout_138207;
                    } else {
                        defunc_0_op_res_f_res_f_res_127292 = eta_p_127256;
                    }
                    
                    int64_t defunc_0_op_res_f_res_f_res_127293;
                    int64_t defunc_0_op_res_f_res_f_res_127294;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127293 = redout_138206;
                        defunc_0_op_res_f_res_f_res_127294 = redout_138208;
                    } else {
                        bool cond_127295 = slt64(redout_138206, i_138209);
                        bool x_127296 = !cond_127295;
                        bool y_127297 = cond_t_res_f_res_127276 && x_127296;
                        bool cond_127298 = cond_127295 || y_127297;
                        int64_t tmp_127299;
                        
                        if (cond_127298) {
                            tmp_127299 = redout_138206;
                        } else {
                            tmp_127299 = i_138209;
                        }
                        
                        int64_t tmp_127300 = add64((int64_t) 1, redout_138208);
                        
                        defunc_0_op_res_f_res_f_res_127293 = tmp_127299;
                        defunc_0_op_res_f_res_f_res_127294 = tmp_127300;
                    }
                    defunc_0_op_res_f_res_127286 = defunc_0_op_res_f_res_f_res_127293;
                    defunc_0_op_res_f_res_127287 = defunc_0_op_res_f_res_f_res_127292;
                    defunc_0_op_res_f_res_127288 = defunc_0_op_res_f_res_f_res_127294;
                }
                defunc_0_op_res_127280 = defunc_0_op_res_f_res_127286;
                defunc_0_op_res_127281 = defunc_0_op_res_f_res_127287;
                defunc_0_op_res_127282 = defunc_0_op_res_f_res_127288;
            }
            
            int64_t redout_tmp_139287 = defunc_0_op_res_127280;
            int64_t redout_tmp_139288 = defunc_0_op_res_127281;
            int64_t redout_tmp_139289 = defunc_0_op_res_127282;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
            redout_138208 = redout_tmp_139289;
        }
        defunc_0_reduce_comm_res_137808 = redout_138206;
        defunc_0_reduce_comm_res_137809 = redout_138207;
        defunc_0_reduce_comm_res_137810 = redout_138208;
        ((int64_t *) mem_138406.mem)[i_138216] = defunc_0_reduce_comm_res_137808;
        ((int64_t *) mem_138408.mem)[i_138216] = defunc_0_reduce_comm_res_137809;
        ((int64_t *) mem_138410.mem)[i_138216] = defunc_0_reduce_comm_res_137810;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138410, "mem_138410") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139642, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139643, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139644, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_mergeTups_short(struct futhark_context *ctx, struct memblock *mem_out_p_139645, struct memblock *mem_out_p_139646, struct memblock *mem_out_p_139647, struct memblock xs_mem_138403, struct memblock ys_mem_138404, int64_t w1_124477, int64_t w2_124478)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138410;
    
    mem_138410.references = NULL;
    
    struct memblock mem_138408;
    
    mem_138408.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * w1_124477;
    int64_t bytes_138407 = (int64_t) 2 * w1_124477;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138408, bytes_138407, "mem_138408")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138410, bytes_138405, "mem_138410")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138216 = 0; i_138216 < w1_124477; i_138216++) {
        int16_t eta_p_127256 = ((int16_t *) xs_mem_138403.mem)[i_138216];
        int64_t defunc_0_reduce_comm_res_137808;
        int16_t defunc_0_reduce_comm_res_137809;
        int64_t defunc_0_reduce_comm_res_137810;
        int64_t redout_138206;
        int16_t redout_138207;
        int64_t redout_138208;
        
        redout_138206 = (int64_t) -1;
        redout_138207 = eta_p_127256;
        redout_138208 = (int64_t) 0;
        for (int64_t i_138209 = 0; i_138209 < w2_124478; i_138209++) {
            int16_t x_127261 = ((int16_t *) ys_mem_138404.mem)[i_138209];
            bool defunc_0_neq_res_127269 = redout_138207 == eta_p_127256;
            bool defunc_0_neq_res_127270 = !defunc_0_neq_res_127269;
            bool cond_f_res_127271 = slt64(redout_138206, (int64_t) 0);
            bool y_127272 = defunc_0_neq_res_127269 && cond_f_res_127271;
            bool cond_127273 = defunc_0_neq_res_127270 || y_127272;
            bool defunc_0_neq_res_127274 = x_127261 == eta_p_127256;
            bool defunc_0_neq_res_127275 = !defunc_0_neq_res_127274;
            bool cond_t_res_f_res_127276 = slt64(i_138209, (int64_t) 0);
            bool y_127277 = defunc_0_neq_res_127274 && cond_t_res_f_res_127276;
            bool cond_t_res_127278 = defunc_0_neq_res_127275 || y_127277;
            bool x_127279 = cond_127273 && cond_t_res_127278;
            int64_t defunc_0_op_res_127280;
            int16_t defunc_0_op_res_127281;
            int64_t defunc_0_op_res_127282;
            
            if (x_127279) {
                defunc_0_op_res_127280 = (int64_t) -1;
                defunc_0_op_res_127281 = eta_p_127256;
                defunc_0_op_res_127282 = (int64_t) 0;
            } else {
                bool x_127283 = !cond_f_res_127271;
                bool y_127284 = defunc_0_neq_res_127270 && x_127283;
                bool cond_127285 = cond_f_res_127271 || y_127284;
                int64_t defunc_0_op_res_f_res_127286;
                int16_t defunc_0_op_res_f_res_127287;
                int64_t defunc_0_op_res_f_res_127288;
                
                if (cond_127285) {
                    defunc_0_op_res_f_res_127286 = i_138209;
                    defunc_0_op_res_f_res_127287 = x_127261;
                    defunc_0_op_res_f_res_127288 = (int64_t) 1;
                } else {
                    bool x_127289 = !cond_t_res_f_res_127276;
                    bool y_127290 = defunc_0_neq_res_127275 && x_127289;
                    bool cond_127291 = cond_t_res_f_res_127276 || y_127290;
                    int16_t defunc_0_op_res_f_res_f_res_127292;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127292 = redout_138207;
                    } else {
                        defunc_0_op_res_f_res_f_res_127292 = eta_p_127256;
                    }
                    
                    int64_t defunc_0_op_res_f_res_f_res_127293;
                    int64_t defunc_0_op_res_f_res_f_res_127294;
                    
                    if (cond_127291) {
                        defunc_0_op_res_f_res_f_res_127293 = redout_138206;
                        defunc_0_op_res_f_res_f_res_127294 = redout_138208;
                    } else {
                        bool cond_127295 = slt64(redout_138206, i_138209);
                        bool x_127296 = !cond_127295;
                        bool y_127297 = cond_t_res_f_res_127276 && x_127296;
                        bool cond_127298 = cond_127295 || y_127297;
                        int64_t tmp_127299;
                        
                        if (cond_127298) {
                            tmp_127299 = redout_138206;
                        } else {
                            tmp_127299 = i_138209;
                        }
                        
                        int64_t tmp_127300 = add64((int64_t) 1, redout_138208);
                        
                        defunc_0_op_res_f_res_f_res_127293 = tmp_127299;
                        defunc_0_op_res_f_res_f_res_127294 = tmp_127300;
                    }
                    defunc_0_op_res_f_res_127286 = defunc_0_op_res_f_res_f_res_127293;
                    defunc_0_op_res_f_res_127287 = defunc_0_op_res_f_res_f_res_127292;
                    defunc_0_op_res_f_res_127288 = defunc_0_op_res_f_res_f_res_127294;
                }
                defunc_0_op_res_127280 = defunc_0_op_res_f_res_127286;
                defunc_0_op_res_127281 = defunc_0_op_res_f_res_127287;
                defunc_0_op_res_127282 = defunc_0_op_res_f_res_127288;
            }
            
            int64_t redout_tmp_139287 = defunc_0_op_res_127280;
            int16_t redout_tmp_139288 = defunc_0_op_res_127281;
            int64_t redout_tmp_139289 = defunc_0_op_res_127282;
            
            redout_138206 = redout_tmp_139287;
            redout_138207 = redout_tmp_139288;
            redout_138208 = redout_tmp_139289;
        }
        defunc_0_reduce_comm_res_137808 = redout_138206;
        defunc_0_reduce_comm_res_137809 = redout_138207;
        defunc_0_reduce_comm_res_137810 = redout_138208;
        ((int64_t *) mem_138406.mem)[i_138216] = defunc_0_reduce_comm_res_137808;
        ((int16_t *) mem_138408.mem)[i_138216] = defunc_0_reduce_comm_res_137809;
        ((int64_t *) mem_138410.mem)[i_138216] = defunc_0_reduce_comm_res_137810;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138410, "mem_138410") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139283, &mem_138408, "mem_138408") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139645, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139646, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139647, &mem_out_139283, "mem_out_139283") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138410, "mem_138410") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138408, "mem_138408") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139283, "mem_out_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_double(struct futhark_context *ctx, struct memblock *mem_out_p_139648, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91649, int64_t incr_91650, int64_t block_sizze_91651)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138442;
    
    mem_138442.references = NULL;
    
    struct memblock mem_param_tmp_139284;
    
    mem_param_tmp_139284.references = NULL;
    
    struct memblock mem_param_tmp_139283;
    
    mem_param_tmp_139283.references = NULL;
    
    struct memblock mem_138422;
    
    mem_138422.references = NULL;
    
    struct memblock mem_138420;
    
    mem_138420.references = NULL;
    
    struct memblock mem_param_138418;
    
    mem_param_138418.references = NULL;
    
    struct memblock mem_param_138415;
    
    mem_param_138415.references = NULL;
    
    struct memblock ext_mem_138439;
    
    ext_mem_138439.references = NULL;
    
    struct memblock ext_mem_138440;
    
    ext_mem_138440.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_91649;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138208 = 0; i_138208 < n_91649; i_138208++) {
        int64_t eta_p_127132 = ((int64_t *) is_mem_138403.mem)[i_138208];
        int64_t lifted_lambda_res_127133 = sub64(eta_p_127132, incr_91650);
        
        ((int64_t *) mem_138406.mem)[i_138208] = lifted_lambda_res_127133;
    }
    
    bool loop_cond_127134 = slt64((int64_t) 0, n_91649);
    bool partitioned_gather_res_127135;
    int64_t partitioned_gather_res_127136;
    bool loop_while_127139;
    int64_t p_127140;
    
    if (memblock_set(ctx, &mem_param_138415, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_138418, &ys_mem_138404, "ys_mem_138404") != 0)
        return 1;
    loop_while_127139 = loop_cond_127134;
    p_127140 = (int64_t) 0;
    while (loop_while_127139) {
        int64_t min_arg0_127143 = add64(block_sizze_91651, p_127140);
        int64_t min_res_127144 = smin64(n_91649, min_arg0_127143);
        
        if (memblock_alloc(ctx, &mem_138420, bytes_138405, "mem_138420")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_138422, bytes_138405, "mem_138422")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_138214 = 0; i_138214 < n_91649; i_138214++) {
            int64_t eta_p_127147 = ((int64_t *) mem_param_138415.mem)[i_138214];
            double eta_p_127148 = ((double *) mem_param_138418.mem)[i_138214];
            bool cond_127149 = sle64(p_127140, eta_p_127147);
            bool cond_t_res_127150 = slt64(eta_p_127147, min_res_127144);
            bool x_127151 = cond_127149 && cond_t_res_127150;
            int64_t lifted_lambda_res_127152;
            
            if (x_127151) {
                lifted_lambda_res_127152 = (int64_t) -1;
            } else {
                lifted_lambda_res_127152 = eta_p_127147;
            }
            
            double lifted_lambda_res_127153;
            
            if (x_127151) {
                bool x_137808 = sle64((int64_t) 0, eta_p_127147);
                bool y_137809 = slt64(eta_p_127147, n_91649);
                bool bounds_check_137810 = x_137808 && y_137809;
                bool index_certs_137811;
                
                if (!bounds_check_137810) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_127147, "] out of bounds for array of shape [", (long long) n_91649, "].", "-> #0  ftbasics.fut:58:23-29\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:54:14-60:12\n   #3  ftsort.fut:12:3-38\n   #4  ftsort.fut:63:1-65:44\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                double tmp_137812 = ((double *) ys_mem_138404.mem)[eta_p_127147];
                
                lifted_lambda_res_127153 = tmp_137812;
            } else {
                lifted_lambda_res_127153 = eta_p_127148;
            }
            ((int64_t *) mem_138420.mem)[i_138214] = lifted_lambda_res_127152;
            ((double *) mem_138422.mem)[i_138214] = lifted_lambda_res_127153;
        }
        
        bool loop_cond_127159 = slt64(min_res_127144, n_91649);
        
        if (memblock_set(ctx, &mem_param_tmp_139283, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_139284, &mem_138422, "mem_138422") != 0)
            return 1;
        
        bool loop_while_tmp_139285 = loop_cond_127159;
        int64_t p_tmp_139286 = min_res_127144;
        
        if (memblock_set(ctx, &mem_param_138415, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138418, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        loop_while_127139 = loop_while_tmp_139285;
        p_127140 = p_tmp_139286;
    }
    if (memblock_set(ctx, &ext_mem_138440, &mem_param_138415, "mem_param_138415") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_138439, &mem_param_138418, "mem_param_138418") != 0)
        return 1;
    partitioned_gather_res_127135 = loop_while_127139;
    partitioned_gather_res_127136 = p_127140;
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138442, bytes_138405, "mem_138442")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138442.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138439.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_91649});
    if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138442, "mem_138442") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139648, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138442, "mem_138442") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138422, "mem_138422") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138418, "mem_param_138418") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138415, "mem_param_138415") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138440, "ext_mem_138440") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_float(struct futhark_context *ctx, struct memblock *mem_out_p_139649, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91432, int64_t incr_91433, int64_t block_sizze_91434)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138442;
    
    mem_138442.references = NULL;
    
    struct memblock mem_param_tmp_139284;
    
    mem_param_tmp_139284.references = NULL;
    
    struct memblock mem_param_tmp_139283;
    
    mem_param_tmp_139283.references = NULL;
    
    struct memblock mem_138422;
    
    mem_138422.references = NULL;
    
    struct memblock mem_138420;
    
    mem_138420.references = NULL;
    
    struct memblock mem_param_138418;
    
    mem_param_138418.references = NULL;
    
    struct memblock mem_param_138415;
    
    mem_param_138415.references = NULL;
    
    struct memblock ext_mem_138439;
    
    ext_mem_138439.references = NULL;
    
    struct memblock ext_mem_138440;
    
    ext_mem_138440.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_91432;
    int64_t bytes_138441 = (int64_t) 4 * n_91432;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138208 = 0; i_138208 < n_91432; i_138208++) {
        int64_t eta_p_127132 = ((int64_t *) is_mem_138403.mem)[i_138208];
        int64_t lifted_lambda_res_127133 = sub64(eta_p_127132, incr_91433);
        
        ((int64_t *) mem_138406.mem)[i_138208] = lifted_lambda_res_127133;
    }
    
    bool loop_cond_127134 = slt64((int64_t) 0, n_91432);
    bool partitioned_gather_res_127135;
    int64_t partitioned_gather_res_127136;
    bool loop_while_127139;
    int64_t p_127140;
    
    if (memblock_set(ctx, &mem_param_138415, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_138418, &ys_mem_138404, "ys_mem_138404") != 0)
        return 1;
    loop_while_127139 = loop_cond_127134;
    p_127140 = (int64_t) 0;
    while (loop_while_127139) {
        int64_t min_arg0_127143 = add64(block_sizze_91434, p_127140);
        int64_t min_res_127144 = smin64(n_91432, min_arg0_127143);
        
        if (memblock_alloc(ctx, &mem_138420, bytes_138405, "mem_138420")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_138422, bytes_138441, "mem_138422")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_138214 = 0; i_138214 < n_91432; i_138214++) {
            int64_t eta_p_127147 = ((int64_t *) mem_param_138415.mem)[i_138214];
            float eta_p_127148 = ((float *) mem_param_138418.mem)[i_138214];
            bool cond_127149 = sle64(p_127140, eta_p_127147);
            bool cond_t_res_127150 = slt64(eta_p_127147, min_res_127144);
            bool x_127151 = cond_127149 && cond_t_res_127150;
            int64_t lifted_lambda_res_127152;
            
            if (x_127151) {
                lifted_lambda_res_127152 = (int64_t) -1;
            } else {
                lifted_lambda_res_127152 = eta_p_127147;
            }
            
            float lifted_lambda_res_127153;
            
            if (x_127151) {
                bool x_137808 = sle64((int64_t) 0, eta_p_127147);
                bool y_137809 = slt64(eta_p_127147, n_91432);
                bool bounds_check_137810 = x_137808 && y_137809;
                bool index_certs_137811;
                
                if (!bounds_check_137810) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_127147, "] out of bounds for array of shape [", (long long) n_91432, "].", "-> #0  ftbasics.fut:58:23-29\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:54:14-60:12\n   #3  ftsort.fut:12:3-38\n   #4  ftsort.fut:59:1-61:44\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float tmp_137812 = ((float *) ys_mem_138404.mem)[eta_p_127147];
                
                lifted_lambda_res_127153 = tmp_137812;
            } else {
                lifted_lambda_res_127153 = eta_p_127148;
            }
            ((int64_t *) mem_138420.mem)[i_138214] = lifted_lambda_res_127152;
            ((float *) mem_138422.mem)[i_138214] = lifted_lambda_res_127153;
        }
        
        bool loop_cond_127159 = slt64(min_res_127144, n_91432);
        
        if (memblock_set(ctx, &mem_param_tmp_139283, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_139284, &mem_138422, "mem_138422") != 0)
            return 1;
        
        bool loop_while_tmp_139285 = loop_cond_127159;
        int64_t p_tmp_139286 = min_res_127144;
        
        if (memblock_set(ctx, &mem_param_138415, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138418, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        loop_while_127139 = loop_while_tmp_139285;
        p_127140 = p_tmp_139286;
    }
    if (memblock_set(ctx, &ext_mem_138440, &mem_param_138415, "mem_param_138415") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_138439, &mem_param_138418, "mem_param_138418") != 0)
        return 1;
    partitioned_gather_res_127135 = loop_while_127139;
    partitioned_gather_res_127136 = p_127140;
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138442, bytes_138441, "mem_138442")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_138442.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138439.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_91432});
    if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138442, "mem_138442") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139649, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138442, "mem_138442") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138422, "mem_138422") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138418, "mem_param_138418") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138415, "mem_param_138415") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138440, "ext_mem_138440") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_int(struct futhark_context *ctx, struct memblock *mem_out_p_139650, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91011, int64_t incr_91012, int64_t block_sizze_91013)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138442;
    
    mem_138442.references = NULL;
    
    struct memblock mem_param_tmp_139284;
    
    mem_param_tmp_139284.references = NULL;
    
    struct memblock mem_param_tmp_139283;
    
    mem_param_tmp_139283.references = NULL;
    
    struct memblock mem_138422;
    
    mem_138422.references = NULL;
    
    struct memblock mem_138420;
    
    mem_138420.references = NULL;
    
    struct memblock mem_param_138418;
    
    mem_param_138418.references = NULL;
    
    struct memblock mem_param_138415;
    
    mem_param_138415.references = NULL;
    
    struct memblock ext_mem_138439;
    
    ext_mem_138439.references = NULL;
    
    struct memblock ext_mem_138440;
    
    ext_mem_138440.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_91011;
    int64_t bytes_138441 = (int64_t) 4 * n_91011;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138208 = 0; i_138208 < n_91011; i_138208++) {
        int64_t eta_p_127132 = ((int64_t *) is_mem_138403.mem)[i_138208];
        int64_t lifted_lambda_res_127133 = sub64(eta_p_127132, incr_91012);
        
        ((int64_t *) mem_138406.mem)[i_138208] = lifted_lambda_res_127133;
    }
    
    bool loop_cond_127134 = slt64((int64_t) 0, n_91011);
    bool partitioned_gather_res_127135;
    int64_t partitioned_gather_res_127136;
    bool loop_while_127139;
    int64_t p_127140;
    
    if (memblock_set(ctx, &mem_param_138415, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_138418, &ys_mem_138404, "ys_mem_138404") != 0)
        return 1;
    loop_while_127139 = loop_cond_127134;
    p_127140 = (int64_t) 0;
    while (loop_while_127139) {
        int64_t min_arg0_127143 = add64(block_sizze_91013, p_127140);
        int64_t min_res_127144 = smin64(n_91011, min_arg0_127143);
        
        if (memblock_alloc(ctx, &mem_138420, bytes_138405, "mem_138420")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_138422, bytes_138441, "mem_138422")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_138214 = 0; i_138214 < n_91011; i_138214++) {
            int64_t eta_p_127147 = ((int64_t *) mem_param_138415.mem)[i_138214];
            int32_t eta_p_127148 = ((int32_t *) mem_param_138418.mem)[i_138214];
            bool cond_127149 = sle64(p_127140, eta_p_127147);
            bool cond_t_res_127150 = slt64(eta_p_127147, min_res_127144);
            bool x_127151 = cond_127149 && cond_t_res_127150;
            int64_t lifted_lambda_res_127152;
            
            if (x_127151) {
                lifted_lambda_res_127152 = (int64_t) -1;
            } else {
                lifted_lambda_res_127152 = eta_p_127147;
            }
            
            int32_t lifted_lambda_res_127153;
            
            if (x_127151) {
                bool x_137808 = sle64((int64_t) 0, eta_p_127147);
                bool y_137809 = slt64(eta_p_127147, n_91011);
                bool bounds_check_137810 = x_137808 && y_137809;
                bool index_certs_137811;
                
                if (!bounds_check_137810) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_127147, "] out of bounds for array of shape [", (long long) n_91011, "].", "-> #0  ftbasics.fut:58:23-29\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:54:14-60:12\n   #3  ftsort.fut:12:3-38\n   #4  ftsort.fut:51:1-53:44\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int32_t tmp_137812 = ((int32_t *) ys_mem_138404.mem)[eta_p_127147];
                
                lifted_lambda_res_127153 = tmp_137812;
            } else {
                lifted_lambda_res_127153 = eta_p_127148;
            }
            ((int64_t *) mem_138420.mem)[i_138214] = lifted_lambda_res_127152;
            ((int32_t *) mem_138422.mem)[i_138214] = lifted_lambda_res_127153;
        }
        
        bool loop_cond_127159 = slt64(min_res_127144, n_91011);
        
        if (memblock_set(ctx, &mem_param_tmp_139283, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_139284, &mem_138422, "mem_138422") != 0)
            return 1;
        
        bool loop_while_tmp_139285 = loop_cond_127159;
        int64_t p_tmp_139286 = min_res_127144;
        
        if (memblock_set(ctx, &mem_param_138415, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138418, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        loop_while_127139 = loop_while_tmp_139285;
        p_127140 = p_tmp_139286;
    }
    if (memblock_set(ctx, &ext_mem_138440, &mem_param_138415, "mem_param_138415") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_138439, &mem_param_138418, "mem_param_138418") != 0)
        return 1;
    partitioned_gather_res_127135 = loop_while_127139;
    partitioned_gather_res_127136 = p_127140;
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138442, bytes_138441, "mem_138442")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_138442.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) ext_mem_138439.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_91011});
    if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138442, "mem_138442") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139650, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138442, "mem_138442") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138422, "mem_138422") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138418, "mem_param_138418") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138415, "mem_param_138415") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138440, "ext_mem_138440") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_long(struct futhark_context *ctx, struct memblock *mem_out_p_139651, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_91215, int64_t incr_91216, int64_t block_sizze_91217)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138442;
    
    mem_138442.references = NULL;
    
    struct memblock mem_param_tmp_139284;
    
    mem_param_tmp_139284.references = NULL;
    
    struct memblock mem_param_tmp_139283;
    
    mem_param_tmp_139283.references = NULL;
    
    struct memblock mem_138422;
    
    mem_138422.references = NULL;
    
    struct memblock mem_138420;
    
    mem_138420.references = NULL;
    
    struct memblock mem_param_138418;
    
    mem_param_138418.references = NULL;
    
    struct memblock mem_param_138415;
    
    mem_param_138415.references = NULL;
    
    struct memblock ext_mem_138439;
    
    ext_mem_138439.references = NULL;
    
    struct memblock ext_mem_138440;
    
    ext_mem_138440.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_91215;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138208 = 0; i_138208 < n_91215; i_138208++) {
        int64_t eta_p_127132 = ((int64_t *) is_mem_138403.mem)[i_138208];
        int64_t lifted_lambda_res_127133 = sub64(eta_p_127132, incr_91216);
        
        ((int64_t *) mem_138406.mem)[i_138208] = lifted_lambda_res_127133;
    }
    
    bool loop_cond_127134 = slt64((int64_t) 0, n_91215);
    bool partitioned_gather_res_127135;
    int64_t partitioned_gather_res_127136;
    bool loop_while_127139;
    int64_t p_127140;
    
    if (memblock_set(ctx, &mem_param_138415, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_138418, &ys_mem_138404, "ys_mem_138404") != 0)
        return 1;
    loop_while_127139 = loop_cond_127134;
    p_127140 = (int64_t) 0;
    while (loop_while_127139) {
        int64_t min_arg0_127143 = add64(block_sizze_91217, p_127140);
        int64_t min_res_127144 = smin64(n_91215, min_arg0_127143);
        
        if (memblock_alloc(ctx, &mem_138420, bytes_138405, "mem_138420")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_138422, bytes_138405, "mem_138422")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_138214 = 0; i_138214 < n_91215; i_138214++) {
            int64_t eta_p_127147 = ((int64_t *) mem_param_138415.mem)[i_138214];
            int64_t eta_p_127148 = ((int64_t *) mem_param_138418.mem)[i_138214];
            bool cond_127149 = sle64(p_127140, eta_p_127147);
            bool cond_t_res_127150 = slt64(eta_p_127147, min_res_127144);
            bool x_127151 = cond_127149 && cond_t_res_127150;
            int64_t lifted_lambda_res_127152;
            
            if (x_127151) {
                lifted_lambda_res_127152 = (int64_t) -1;
            } else {
                lifted_lambda_res_127152 = eta_p_127147;
            }
            
            int64_t lifted_lambda_res_127153;
            
            if (x_127151) {
                bool x_137808 = sle64((int64_t) 0, eta_p_127147);
                bool y_137809 = slt64(eta_p_127147, n_91215);
                bool bounds_check_137810 = x_137808 && y_137809;
                bool index_certs_137811;
                
                if (!bounds_check_137810) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_127147, "] out of bounds for array of shape [", (long long) n_91215, "].", "-> #0  ftbasics.fut:58:23-29\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:54:14-60:12\n   #3  ftsort.fut:12:3-38\n   #4  ftsort.fut:55:1-57:44\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int64_t tmp_137812 = ((int64_t *) ys_mem_138404.mem)[eta_p_127147];
                
                lifted_lambda_res_127153 = tmp_137812;
            } else {
                lifted_lambda_res_127153 = eta_p_127148;
            }
            ((int64_t *) mem_138420.mem)[i_138214] = lifted_lambda_res_127152;
            ((int64_t *) mem_138422.mem)[i_138214] = lifted_lambda_res_127153;
        }
        
        bool loop_cond_127159 = slt64(min_res_127144, n_91215);
        
        if (memblock_set(ctx, &mem_param_tmp_139283, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_139284, &mem_138422, "mem_138422") != 0)
            return 1;
        
        bool loop_while_tmp_139285 = loop_cond_127159;
        int64_t p_tmp_139286 = min_res_127144;
        
        if (memblock_set(ctx, &mem_param_138415, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138418, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        loop_while_127139 = loop_while_tmp_139285;
        p_127140 = p_tmp_139286;
    }
    if (memblock_set(ctx, &ext_mem_138440, &mem_param_138415, "mem_param_138415") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_138439, &mem_param_138418, "mem_param_138418") != 0)
        return 1;
    partitioned_gather_res_127135 = loop_while_127139;
    partitioned_gather_res_127136 = p_127140;
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138442, bytes_138405, "mem_138442")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138442.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) ext_mem_138439.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_91215});
    if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138442, "mem_138442") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139651, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138442, "mem_138442") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138422, "mem_138422") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138418, "mem_param_138418") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138415, "mem_param_138415") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138440, "ext_mem_138440") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_orderByIndices_short(struct futhark_context *ctx, struct memblock *mem_out_p_139652, struct memblock is_mem_138403, struct memblock ys_mem_138404, int64_t n_90794, int64_t incr_90795, int64_t block_sizze_90796)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138442;
    
    mem_138442.references = NULL;
    
    struct memblock mem_param_tmp_139284;
    
    mem_param_tmp_139284.references = NULL;
    
    struct memblock mem_param_tmp_139283;
    
    mem_param_tmp_139283.references = NULL;
    
    struct memblock mem_138422;
    
    mem_138422.references = NULL;
    
    struct memblock mem_138420;
    
    mem_138420.references = NULL;
    
    struct memblock mem_param_138418;
    
    mem_param_138418.references = NULL;
    
    struct memblock mem_param_138415;
    
    mem_param_138415.references = NULL;
    
    struct memblock ext_mem_138439;
    
    ext_mem_138439.references = NULL;
    
    struct memblock ext_mem_138440;
    
    ext_mem_138440.references = NULL;
    
    struct memblock mem_138406;
    
    mem_138406.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t bytes_138405 = (int64_t) 8 * n_90794;
    int64_t bytes_138441 = (int64_t) 2 * n_90794;
    
    if (memblock_alloc(ctx, &mem_138406, bytes_138405, "mem_138406")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138208 = 0; i_138208 < n_90794; i_138208++) {
        int64_t eta_p_127132 = ((int64_t *) is_mem_138403.mem)[i_138208];
        int64_t lifted_lambda_res_127133 = sub64(eta_p_127132, incr_90795);
        
        ((int64_t *) mem_138406.mem)[i_138208] = lifted_lambda_res_127133;
    }
    
    bool loop_cond_127134 = slt64((int64_t) 0, n_90794);
    bool partitioned_gather_res_127135;
    int64_t partitioned_gather_res_127136;
    bool loop_while_127139;
    int64_t p_127140;
    
    if (memblock_set(ctx, &mem_param_138415, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_138418, &ys_mem_138404, "ys_mem_138404") != 0)
        return 1;
    loop_while_127139 = loop_cond_127134;
    p_127140 = (int64_t) 0;
    while (loop_while_127139) {
        int64_t min_arg0_127143 = add64(block_sizze_90796, p_127140);
        int64_t min_res_127144 = smin64(n_90794, min_arg0_127143);
        
        if (memblock_alloc(ctx, &mem_138420, bytes_138405, "mem_138420")) {
            err = 1;
            goto cleanup;
        }
        if (memblock_alloc(ctx, &mem_138422, bytes_138441, "mem_138422")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_138214 = 0; i_138214 < n_90794; i_138214++) {
            int64_t eta_p_127147 = ((int64_t *) mem_param_138415.mem)[i_138214];
            int16_t eta_p_127148 = ((int16_t *) mem_param_138418.mem)[i_138214];
            bool cond_127149 = sle64(p_127140, eta_p_127147);
            bool cond_t_res_127150 = slt64(eta_p_127147, min_res_127144);
            bool x_127151 = cond_127149 && cond_t_res_127150;
            int64_t lifted_lambda_res_127152;
            
            if (x_127151) {
                lifted_lambda_res_127152 = (int64_t) -1;
            } else {
                lifted_lambda_res_127152 = eta_p_127147;
            }
            
            int16_t lifted_lambda_res_127153;
            
            if (x_127151) {
                bool x_137808 = sle64((int64_t) 0, eta_p_127147);
                bool y_137809 = slt64(eta_p_127147, n_90794);
                bool bounds_check_137810 = x_137808 && y_137809;
                bool index_certs_137811;
                
                if (!bounds_check_137810) {
                    set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_127147, "] out of bounds for array of shape [", (long long) n_90794, "].", "-> #0  ftbasics.fut:58:23-29\n   #1  /prelude/functional.fut:9:44-45\n   #2  ftbasics.fut:54:14-60:12\n   #3  ftsort.fut:12:3-38\n   #4  ftsort.fut:47:1-49:44\n"));
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                int16_t tmp_137812 = ((int16_t *) ys_mem_138404.mem)[eta_p_127147];
                
                lifted_lambda_res_127153 = tmp_137812;
            } else {
                lifted_lambda_res_127153 = eta_p_127148;
            }
            ((int64_t *) mem_138420.mem)[i_138214] = lifted_lambda_res_127152;
            ((int16_t *) mem_138422.mem)[i_138214] = lifted_lambda_res_127153;
        }
        
        bool loop_cond_127159 = slt64(min_res_127144, n_90794);
        
        if (memblock_set(ctx, &mem_param_tmp_139283, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_139284, &mem_138422, "mem_138422") != 0)
            return 1;
        
        bool loop_while_tmp_139285 = loop_cond_127159;
        int64_t p_tmp_139286 = min_res_127144;
        
        if (memblock_set(ctx, &mem_param_138415, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_138418, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        loop_while_127139 = loop_while_tmp_139285;
        p_127140 = p_tmp_139286;
    }
    if (memblock_set(ctx, &ext_mem_138440, &mem_param_138415, "mem_param_138415") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_138439, &mem_param_138418, "mem_param_138418") != 0)
        return 1;
    partitioned_gather_res_127135 = loop_while_127139;
    partitioned_gather_res_127136 = p_127140;
    if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
        return 1;
    if (memblock_alloc(ctx, &mem_138442, bytes_138441, "mem_138442")) {
        err = 1;
        goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_138442.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) ext_mem_138439.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {n_90794});
    if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138442, "mem_138442") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139652, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138442, "mem_138442") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139284, "mem_param_tmp_139284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_139283, "mem_param_tmp_139283") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138422, "mem_138422") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138420, "mem_138420") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138418, "mem_param_138418") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_138415, "mem_param_138415") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138439, "ext_mem_138439") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138440, "ext_mem_138440") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138406, "mem_138406") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_double(struct futhark_context *ctx, struct memblock *mem_out_p_139653, struct memblock *mem_out_p_139654, struct memblock xs_mem_138403, int64_t n_78735, int64_t incr_78736, int16_t block_sizze_78737)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138406_cached_sizze_139655 = 0;
    unsigned char *mem_138406 = NULL;
    int64_t mem_138408_cached_sizze_139656 = 0;
    unsigned char *mem_138408 = NULL;
    int64_t mem_138416_cached_sizze_139657 = 0;
    unsigned char *mem_138416 = NULL;
    int64_t mem_138418_cached_sizze_139658 = 0;
    unsigned char *mem_138418 = NULL;
    int64_t mem_138420_cached_sizze_139659 = 0;
    unsigned char *mem_138420 = NULL;
    int64_t mem_138422_cached_sizze_139660 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139661 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138456_cached_sizze_139662 = 0;
    unsigned char *mem_138456 = NULL;
    int64_t mem_138458_cached_sizze_139663 = 0;
    unsigned char *mem_138458 = NULL;
    int64_t mem_138471_cached_sizze_139664 = 0;
    unsigned char *mem_138471 = NULL;
    int64_t mem_138472_cached_sizze_139665 = 0;
    unsigned char *mem_138472 = NULL;
    int64_t mem_138479_cached_sizze_139666 = 0;
    unsigned char *mem_138479 = NULL;
    int64_t mem_138482_cached_sizze_139667 = 0;
    unsigned char *mem_138482 = NULL;
    int64_t mem_138485_cached_sizze_139668 = 0;
    unsigned char *mem_138485 = NULL;
    int64_t mem_138488_cached_sizze_139669 = 0;
    unsigned char *mem_138488 = NULL;
    int64_t mem_138491_cached_sizze_139670 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138513_cached_sizze_139671 = 0;
    unsigned char *mem_138513 = NULL;
    int64_t mem_138515_cached_sizze_139672 = 0;
    unsigned char *mem_138515 = NULL;
    int64_t mem_138517_cached_sizze_139673 = 0;
    unsigned char *mem_138517 = NULL;
    int64_t mem_138519_cached_sizze_139674 = 0;
    unsigned char *mem_138519 = NULL;
    int64_t mem_138521_cached_sizze_139675 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138564_cached_sizze_139676 = 0;
    unsigned char *mem_138564 = NULL;
    int64_t mem_138565_cached_sizze_139677 = 0;
    unsigned char *mem_138565 = NULL;
    int64_t mem_138590_cached_sizze_139678 = 0;
    unsigned char *mem_138590 = NULL;
    int64_t mem_138598_cached_sizze_139679 = 0;
    unsigned char *mem_138598 = NULL;
    struct memblock mem_138626;
    
    mem_138626.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    bool cond_132761 = n_78735 == (int64_t) 0;
    int32_t iters_132762;
    
    if (cond_132761) {
        iters_132762 = 0;
    } else {
        iters_132762 = 32;
    }
    
    int64_t i16_res_132763 = sext_i16_i64(block_sizze_78737);
    bool zzero_132764 = i16_res_132763 == (int64_t) 0;
    bool nonzzero_132765 = !zzero_132764;
    bool nonzzero_cert_132766;
    
    if (!nonzzero_132765) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:222:20-27\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #4  ftbasics.fut:199:95-98\n   #5  ftsort.fut:28:3-47\n   #6  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t n_blocks_132767 = sdiv64(n_78735, i16_res_132763);
    int64_t rest_132768 = smod64(n_78735, i16_res_132763);
    int64_t arg_132769 = mul64(i16_res_132763, n_blocks_132767);
    int64_t dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770 = add64(rest_132768, arg_132769);
    bool dim_match_132771 = dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770 == n_78735;
    bool empty_or_match_cert_132772;
    
    if (!dim_match_132771) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) n_78735, "] cannot match shape of type `[", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "](f64, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:224:12-46\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #3  /prelude/functional.fut:9:44-45\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #5  ftbasics.fut:199:95-98\n   #6  ftsort.fut:28:3-47\n   #7  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770;
    bool loop_nonempty_132776 = slt32(0, iters_132762);
    int64_t dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777 = add64((int64_t) 1, n_blocks_132767);
    int64_t dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778 = mul64((int64_t) 4, dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777);
    bool empty_slice_132779 = arg_132769 == (int64_t) 0;
    int64_t m_132780 = sub64(arg_132769, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_132781 = sle64((int64_t) 0, m_132780);
    bool i_p_m_t_s_leq_w_132782 = slt64(m_132780, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770);
    bool i_lte_j_132783 = sle64((int64_t) 0, arg_132769);
    bool y_132784 = zzero_leq_i_p_m_t_s_132781 && i_p_m_t_s_leq_w_132782;
    bool forwards_ok_132785 = i_lte_j_132783 && y_132784;
    bool ok_or_empty_132786 = empty_slice_132779 || forwards_ok_132785;
    bool loop_not_taken_132787 = !loop_nonempty_132776;
    bool protect_assert_disj_132788 = ok_or_empty_132786 || loop_not_taken_132787;
    bool index_certs_132789;
    
    if (!protect_assert_disj_132788) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) arg_132769, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "].", "-> #0  /prelude/array.fut:65:4-11\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:28:3-47\n   #8  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_132790 = rest_132768 == (int64_t) 0;
    int64_t m_132791 = sub64(rest_132768, (int64_t) 1);
    int64_t i_p_m_t_s_132792 = add64(arg_132769, m_132791);
    bool zzero_leq_i_p_m_t_s_132793 = sle64((int64_t) 0, i_p_m_t_s_132792);
    bool i_p_m_t_s_leq_w_132794 = slt64(i_p_m_t_s_132792, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770);
    bool i_lte_j_132795 = sle64(arg_132769, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770);
    bool y_132796 = zzero_leq_i_p_m_t_s_132793 && i_p_m_t_s_leq_w_132794;
    bool forwards_ok_132797 = i_lte_j_132795 && y_132796;
    bool ok_or_empty_132798 = empty_slice_132790 || forwards_ok_132797;
    bool protect_assert_disj_132799 = loop_not_taken_132787 || ok_or_empty_132798;
    bool index_certs_132800;
    
    if (!protect_assert_disj_132799) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_132769, ":", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "].", "-> #0  /prelude/array.fut:65:13-24\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:28:3-47\n   #8  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool binop_x_132801 = sle64((int64_t) 0, n_blocks_132767);
    bool binop_y_132802 = sle64((int64_t) 0, i16_res_132763);
    bool binop_y_132803 = binop_x_132801 && binop_y_132802;
    bool protect_assert_disj_132804 = loop_not_taken_132787 || binop_y_132803;
    bool dim_ok_cert_132805;
    
    if (!protect_assert_disj_132804) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Cannot unflatten array of shape [", (long long) arg_132769, "] to array of shape [", (long long) n_blocks_132767, "][", (long long) i16_res_132763, "]", "-> #0  /prelude/array.fut:184:3-30\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-168:21\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:28:3-47\n   #8  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_132806 = sub64(i16_res_132763, (int64_t) 1);
    bool x_132807 = sle64((int64_t) 0, tmp_132806);
    bool y_132808 = slt64(tmp_132806, i16_res_132763);
    bool bounds_check_132809 = x_132807 && y_132808;
    bool protect_assert_disj_132810 = zzero_132764 || bounds_check_132809;
    bool protect_assert_disj_132811 = loop_not_taken_132787 || protect_assert_disj_132810;
    bool index_certs_132812;
    
    if (!protect_assert_disj_132811) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132806, "] out of bounds for array of shape [", (long long) i16_res_132763, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:28:3-47\n   #9  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool y_132814 = slt64((int64_t) 0, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778);
    bool protect_assert_disj_132815 = loop_not_taken_132787 || y_132814;
    bool index_certs_132816;
    
    if (!protect_assert_disj_132815) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:122:3-123:7\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:178:8-20\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:28:3-47\n   #9  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool protect_assert_disj_132818 = nonzzero_132765 || loop_not_taken_132787;
    bool nonzzero_cert_132819;
    
    if (!protect_assert_disj_132818) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:186:27-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:28:3-47\n   #9  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_132820 = sle64((int64_t) 0, m_132791);
    bool y_132821 = slt64(m_132791, rest_132768);
    bool bounds_check_132822 = x_132820 && y_132821;
    bool protect_assert_disj_132823 = empty_slice_132790 || bounds_check_132822;
    bool protect_assert_disj_132824 = loop_not_taken_132787 || protect_assert_disj_132823;
    bool index_certs_132825;
    
    if (!protect_assert_disj_132824) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_132791, "] out of bounds for array of shape [", (long long) rest_132768, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:28:3-47\n   #8  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138415 = (int64_t) 2 * rest_132768;
    int64_t bytes_138455 = (int64_t) 8 * rest_132768;
    int64_t binop_x_138480 = (int64_t) 8 * n_blocks_132767;
    int64_t bytes_138481 = i16_res_132763 * binop_x_138480;
    int64_t bytes_138487 = (int64_t) 32 * n_blocks_132767;
    int64_t bytes_138512 = (int64_t) 2 * i16_res_132763;
    int64_t bytes_138589 = (int64_t) 32 * dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777;
    bool dim_match_133098 = n_78735 == dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770;
    bool empty_or_match_cert_133099;
    
    if (!dim_match_133098) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "] cannot match shape of type `[", (long long) n_78735, "](f64, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:225:6-11\n   #2  /prelude/functional.fut:26:41-42\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:226:6-227:50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:28:3-47\n   #9  ftsort.fut:27:1-28:47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138623 = (int64_t) 8 * n_78735;
    
    if (futrts_indicesWithIncrement_9447(ctx, &ext_mem_138404, xs_mem_138403, n_78735, incr_78736) != 0) {
        err = 1;
        goto cleanup;
    }
    if (mem_138406_cached_sizze_139655 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138406, &mem_138406_cached_sizze_139655, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138406, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) xs_mem_138403.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770});
    if (mem_138408_cached_sizze_139656 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138408, &mem_138408_cached_sizze_139656, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139283 = 0; i_139283 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770; i_139283++) {
        int64_t x_139284 = (int64_t) 0 + i_139283 * (int64_t) 1;
        
        ((int64_t *) mem_138408)[i_139283] = x_139284;
    }
    if (mem_138416_cached_sizze_139657 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138416, &mem_138416_cached_sizze_139657, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138418_cached_sizze_139658 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138418, &mem_138418_cached_sizze_139658, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138420_cached_sizze_139659 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138420, &mem_138420_cached_sizze_139659, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138422_cached_sizze_139660 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139660, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138424_cached_sizze_139661 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139661, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138456_cached_sizze_139662 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138456, &mem_138456_cached_sizze_139662, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138458_cached_sizze_139663 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138458, &mem_138458_cached_sizze_139663, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138471_cached_sizze_139664 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138471, &mem_138471_cached_sizze_139664, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138472_cached_sizze_139665 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138472, &mem_138472_cached_sizze_139665, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138479_cached_sizze_139666 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138479, &mem_138479_cached_sizze_139666, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138482_cached_sizze_139667 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138482, &mem_138482_cached_sizze_139667, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138485_cached_sizze_139668 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138485, &mem_138485_cached_sizze_139668, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138488_cached_sizze_139669 < bytes_138487) {
        err = lexical_realloc(ctx, &mem_138488, &mem_138488_cached_sizze_139669, bytes_138487);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138491_cached_sizze_139670 < binop_x_138480) {
        err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139670, binop_x_138480);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138513_cached_sizze_139671 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138513, &mem_138513_cached_sizze_139671, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138515_cached_sizze_139672 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138515, &mem_138515_cached_sizze_139672, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138517_cached_sizze_139673 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138517, &mem_138517_cached_sizze_139673, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138519_cached_sizze_139674 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138519, &mem_138519_cached_sizze_139674, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138521_cached_sizze_139675 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139675, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138564_cached_sizze_139676 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138564, &mem_138564_cached_sizze_139676, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138565_cached_sizze_139677 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138565, &mem_138565_cached_sizze_139677, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138590_cached_sizze_139678 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138590, &mem_138590_cached_sizze_139678, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138598_cached_sizze_139679 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138598, &mem_138598_cached_sizze_139679, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_132828 = 0; i_132828 < iters_132762; i_132828++) {
        int32_t blocked_radix_sort_step_arg1_132831 = mul32(2, i_132828);
        int32_t get_bit_arg0_132836 = add32(1, blocked_radix_sort_step_arg1_132831);
        int64_t unsign_arg0_132837 = zext_i32_i64(get_bit_arg0_132836);
        bool cond_f_res_132838 = get_bit_arg0_132836 == 63;
        int64_t unsign_arg0_132839 = zext_i32_i64(blocked_radix_sort_step_arg1_132831);
        bool cond_f_res_132840 = blocked_radix_sort_step_arg1_132831 == 63;
        int16_t discard_138226;
        int16_t discard_138227;
        int16_t discard_138228;
        int16_t discard_138229;
        int16_t scanacc_138211;
        int16_t scanacc_138212;
        int16_t scanacc_138213;
        int16_t scanacc_138214;
        
        scanacc_138211 = (int16_t) 0;
        scanacc_138212 = (int16_t) 0;
        scanacc_138213 = (int16_t) 0;
        scanacc_138214 = (int16_t) 0;
        for (int64_t i_138220 = 0; i_138220 < rest_132768; i_138220++) {
            int64_t slice_138369 = arg_132769 + i_138220;
            double eta_p_137892 = ((double *) mem_138406)[slice_138369];
            int64_t i64_arg0_137893 = futrts_to_bits64(eta_p_137892);
            int64_t unsign_arg0_137894 = ashr64(i64_arg0_137893, unsign_arg0_132837);
            int64_t unsign_arg0_137895 = (int64_t) 1 & unsign_arg0_137894;
            int32_t to_i32_res_137896 = zext_i64_i32(unsign_arg0_137895);
            int64_t unsign_arg0_137897 = ashr64(i64_arg0_137893, (int64_t) 63);
            int64_t unsign_arg0_137898 = (int64_t) 1 & unsign_arg0_137897;
            int32_t to_i32_res_137899 = zext_i64_i32(unsign_arg0_137898);
            bool cond_137900 = to_i32_res_137899 == 1;
            bool x_137901 = !cond_137900;
            bool y_137902 = cond_f_res_132838 && x_137901;
            bool cond_137903 = cond_137900 || y_137902;
            int32_t defunc_0_get_bit_res_137904;
            
            if (cond_137903) {
                int32_t defunc_0_get_bit_res_t_res_138034 = 1 ^ to_i32_res_137896;
                
                defunc_0_get_bit_res_137904 = defunc_0_get_bit_res_t_res_138034;
            } else {
                defunc_0_get_bit_res_137904 = to_i32_res_137896;
            }
            
            int32_t zp_lhs_137906 = mul32(2, defunc_0_get_bit_res_137904);
            int64_t unsign_arg0_137907 = ashr64(i64_arg0_137893, unsign_arg0_132839);
            int64_t unsign_arg0_137908 = (int64_t) 1 & unsign_arg0_137907;
            int32_t to_i32_res_137909 = zext_i64_i32(unsign_arg0_137908);
            bool y_137910 = cond_f_res_132840 && x_137901;
            bool cond_137911 = cond_137900 || y_137910;
            int32_t defunc_0_get_bit_res_137912;
            
            if (cond_137911) {
                int32_t defunc_0_get_bit_res_t_res_138035 = 1 ^ to_i32_res_137909;
                
                defunc_0_get_bit_res_137912 = defunc_0_get_bit_res_t_res_138035;
            } else {
                defunc_0_get_bit_res_137912 = to_i32_res_137909;
            }
            
            int32_t i32_arg0_137914 = add32(zp_lhs_137906, defunc_0_get_bit_res_137912);
            int16_t i32_res_137915 = sext_i32_i16(i32_arg0_137914);
            int16_t defunc_0_f_res_137917;
            int16_t defunc_0_f_res_137918;
            int16_t defunc_0_f_res_137919;
            int16_t defunc_0_f_res_137920;
            
            if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137917, &defunc_0_f_res_137918, &defunc_0_f_res_137919, &defunc_0_f_res_137920, i32_res_137915) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int16_t defunc_0_op_res_132891 = add16(defunc_0_f_res_137917, scanacc_138211);
            int16_t defunc_0_op_res_132892 = add16(defunc_0_f_res_137918, scanacc_138212);
            int16_t defunc_0_op_res_132893 = add16(defunc_0_f_res_137919, scanacc_138213);
            int16_t defunc_0_op_res_132894 = add16(defunc_0_f_res_137920, scanacc_138214);
            
            ((int16_t *) mem_138416)[i_138220] = defunc_0_op_res_132891;
            ((int16_t *) mem_138418)[i_138220] = defunc_0_op_res_132892;
            ((int16_t *) mem_138420)[i_138220] = defunc_0_op_res_132893;
            ((int16_t *) mem_138422)[i_138220] = defunc_0_op_res_132894;
            ((int16_t *) mem_138424)[i_138220] = i32_res_137915;
            
            int16_t scanacc_tmp_139287 = defunc_0_op_res_132891;
            int16_t scanacc_tmp_139288 = defunc_0_op_res_132892;
            int16_t scanacc_tmp_139289 = defunc_0_op_res_132893;
            int16_t scanacc_tmp_139290 = defunc_0_op_res_132894;
            
            scanacc_138211 = scanacc_tmp_139287;
            scanacc_138212 = scanacc_tmp_139288;
            scanacc_138213 = scanacc_tmp_139289;
            scanacc_138214 = scanacc_tmp_139290;
        }
        discard_138226 = scanacc_138211;
        discard_138227 = scanacc_138212;
        discard_138228 = scanacc_138213;
        discard_138229 = scanacc_138214;
        
        int16_t defunc_0_radix_sort_step_i16_res_132895;
        int16_t defunc_0_radix_sort_step_i16_res_132896;
        int16_t defunc_0_radix_sort_step_i16_res_132897;
        int16_t defunc_0_radix_sort_step_i16_res_132898;
        
        if (empty_slice_132790) {
            defunc_0_radix_sort_step_i16_res_132895 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_132896 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_132897 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_132898 = (int16_t) 0;
        } else {
            int16_t last_res_132899 = ((int16_t *) mem_138416)[m_132791];
            int16_t last_res_132900 = ((int16_t *) mem_138418)[m_132791];
            int16_t last_res_132901 = ((int16_t *) mem_138420)[m_132791];
            int16_t last_res_132902 = ((int16_t *) mem_138422)[m_132791];
            
            defunc_0_radix_sort_step_i16_res_132895 = last_res_132899;
            defunc_0_radix_sort_step_i16_res_132896 = last_res_132900;
            defunc_0_radix_sort_step_i16_res_132897 = last_res_132901;
            defunc_0_radix_sort_step_i16_res_132898 = last_res_132902;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138456, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + (int64_t) 1 * arg_132769, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_132768});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138458, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138406, (int64_t) 0 + (int64_t) 1 * arg_132769, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_132768});
        for (int64_t write_iter_138230 = 0; write_iter_138230 < rest_132768; write_iter_138230++) {
            int16_t write_iv_138233 = ((int16_t *) mem_138424)[write_iter_138230];
            int16_t write_iv_138234 = ((int16_t *) mem_138416)[write_iter_138230];
            int16_t write_iv_138235 = ((int16_t *) mem_138418)[write_iter_138230];
            int16_t write_iv_138236 = ((int16_t *) mem_138420)[write_iter_138230];
            int16_t write_iv_138237 = ((int16_t *) mem_138422)[write_iter_138230];
            int64_t slice_138368 = arg_132769 + write_iter_138230;
            double write_iv_138238 = ((double *) mem_138406)[slice_138368];
            int64_t write_iv_138239 = ((int64_t *) mem_138408)[slice_138368];
            int64_t defunc_0_f_res_137876;
            
            if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137876, defunc_0_radix_sort_step_i16_res_132895, defunc_0_radix_sort_step_i16_res_132896, defunc_0_radix_sort_step_i16_res_132897, write_iv_138233, write_iv_138234, write_iv_138235, write_iv_138236, write_iv_138237) != 0) {
                err = 1;
                goto cleanup;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137876) && slt64(defunc_0_f_res_137876, rest_132768)) {
                ((double *) mem_138458)[defunc_0_f_res_137876] = write_iv_138238;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137876) && slt64(defunc_0_f_res_137876, rest_132768)) {
                ((int64_t *) mem_138456)[defunc_0_f_res_137876] = write_iv_138239;
            }
        }
        ((int16_t *) mem_138471)[(int64_t) 0] = defunc_0_radix_sort_step_i16_res_132895;
        ((int16_t *) mem_138471)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_132896;
        ((int16_t *) mem_138471)[(int64_t) 2] = defunc_0_radix_sort_step_i16_res_132897;
        ((int16_t *) mem_138471)[(int64_t) 3] = defunc_0_radix_sort_step_i16_res_132898;
        for (int64_t i_138244 = 0; i_138244 < (int64_t) 4; i_138244++) {
            int16_t eta_p_132919 = ((int16_t *) mem_138471)[i_138244];
            int64_t i16_res_132920 = sext_i16_i64(eta_p_132919);
            
            ((int64_t *) mem_138472)[i_138244] = i16_res_132920;
        }
        
        int16_t tmp_132921 = add16(defunc_0_radix_sort_step_i16_res_132895, defunc_0_radix_sort_step_i16_res_132896);
        int16_t tmp_132922 = add16(defunc_0_radix_sort_step_i16_res_132897, tmp_132921);
        
        ((int16_t *) mem_138479)[(int64_t) 0] = (int16_t) 0;
        ((int16_t *) mem_138479)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_132895;
        ((int16_t *) mem_138479)[(int64_t) 2] = tmp_132921;
        ((int16_t *) mem_138479)[(int64_t) 3] = tmp_132922;
        for (int64_t i_138294 = 0; i_138294 < n_blocks_132767; i_138294++) {
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138482, i_138294 * i16_res_132763, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138406, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_132763), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_132763});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138485, i_138294 * i16_res_132763, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_132763), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_132763});
            
            int64_t binop_x_138382 = i16_res_132763 * i_138294;
            int16_t discard_138266;
            int16_t discard_138267;
            int16_t discard_138268;
            int16_t discard_138269;
            int16_t scanacc_138251;
            int16_t scanacc_138252;
            int16_t scanacc_138253;
            int16_t scanacc_138254;
            
            scanacc_138251 = (int16_t) 0;
            scanacc_138252 = (int16_t) 0;
            scanacc_138253 = (int16_t) 0;
            scanacc_138254 = (int16_t) 0;
            for (int64_t i_138260 = 0; i_138260 < i16_res_132763; i_138260++) {
                int64_t new_index_138383 = i_138260 + binop_x_138382;
                double eta_p_137951 = ((double *) mem_138406)[new_index_138383];
                int64_t i64_arg0_137952 = futrts_to_bits64(eta_p_137951);
                int64_t unsign_arg0_137953 = ashr64(i64_arg0_137952, unsign_arg0_132837);
                int64_t unsign_arg0_137954 = (int64_t) 1 & unsign_arg0_137953;
                int32_t to_i32_res_137955 = zext_i64_i32(unsign_arg0_137954);
                int64_t unsign_arg0_137956 = ashr64(i64_arg0_137952, (int64_t) 63);
                int64_t unsign_arg0_137957 = (int64_t) 1 & unsign_arg0_137956;
                int32_t to_i32_res_137958 = zext_i64_i32(unsign_arg0_137957);
                bool cond_137959 = to_i32_res_137958 == 1;
                bool x_137960 = !cond_137959;
                bool y_137961 = cond_f_res_132838 && x_137960;
                bool cond_137962 = cond_137959 || y_137961;
                int32_t defunc_0_get_bit_res_137963;
                
                if (cond_137962) {
                    int32_t defunc_0_get_bit_res_t_res_138036 = 1 ^ to_i32_res_137955;
                    
                    defunc_0_get_bit_res_137963 = defunc_0_get_bit_res_t_res_138036;
                } else {
                    defunc_0_get_bit_res_137963 = to_i32_res_137955;
                }
                
                int32_t zp_lhs_137965 = mul32(2, defunc_0_get_bit_res_137963);
                int64_t unsign_arg0_137966 = ashr64(i64_arg0_137952, unsign_arg0_132839);
                int64_t unsign_arg0_137967 = (int64_t) 1 & unsign_arg0_137966;
                int32_t to_i32_res_137968 = zext_i64_i32(unsign_arg0_137967);
                bool y_137969 = cond_f_res_132840 && x_137960;
                bool cond_137970 = cond_137959 || y_137969;
                int32_t defunc_0_get_bit_res_137971;
                
                if (cond_137970) {
                    int32_t defunc_0_get_bit_res_t_res_138037 = 1 ^ to_i32_res_137968;
                    
                    defunc_0_get_bit_res_137971 = defunc_0_get_bit_res_t_res_138037;
                } else {
                    defunc_0_get_bit_res_137971 = to_i32_res_137968;
                }
                
                int32_t i32_arg0_137973 = add32(zp_lhs_137965, defunc_0_get_bit_res_137971);
                int16_t i32_res_137974 = sext_i32_i16(i32_arg0_137973);
                int16_t defunc_0_f_res_137976;
                int16_t defunc_0_f_res_137977;
                int16_t defunc_0_f_res_137978;
                int16_t defunc_0_f_res_137979;
                
                if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137976, &defunc_0_f_res_137977, &defunc_0_f_res_137978, &defunc_0_f_res_137979, i32_res_137974) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int16_t defunc_0_op_res_132986 = add16(defunc_0_f_res_137976, scanacc_138251);
                int16_t defunc_0_op_res_132987 = add16(defunc_0_f_res_137977, scanacc_138252);
                int16_t defunc_0_op_res_132988 = add16(defunc_0_f_res_137978, scanacc_138253);
                int16_t defunc_0_op_res_132989 = add16(defunc_0_f_res_137979, scanacc_138254);
                
                ((int16_t *) mem_138513)[i_138260] = defunc_0_op_res_132986;
                ((int16_t *) mem_138515)[i_138260] = defunc_0_op_res_132987;
                ((int16_t *) mem_138517)[i_138260] = defunc_0_op_res_132988;
                ((int16_t *) mem_138519)[i_138260] = defunc_0_op_res_132989;
                ((int16_t *) mem_138521)[i_138260] = i32_res_137974;
                
                int16_t scanacc_tmp_139303 = defunc_0_op_res_132986;
                int16_t scanacc_tmp_139304 = defunc_0_op_res_132987;
                int16_t scanacc_tmp_139305 = defunc_0_op_res_132988;
                int16_t scanacc_tmp_139306 = defunc_0_op_res_132989;
                
                scanacc_138251 = scanacc_tmp_139303;
                scanacc_138252 = scanacc_tmp_139304;
                scanacc_138253 = scanacc_tmp_139305;
                scanacc_138254 = scanacc_tmp_139306;
            }
            discard_138266 = scanacc_138251;
            discard_138267 = scanacc_138252;
            discard_138268 = scanacc_138253;
            discard_138269 = scanacc_138254;
            
            int16_t defunc_0_f_res_132990;
            int16_t defunc_0_f_res_132991;
            int16_t defunc_0_f_res_132992;
            int16_t defunc_0_f_res_132993;
            
            if (zzero_132764) {
                defunc_0_f_res_132990 = (int16_t) 0;
                defunc_0_f_res_132991 = (int16_t) 0;
                defunc_0_f_res_132992 = (int16_t) 0;
                defunc_0_f_res_132993 = (int16_t) 0;
            } else {
                int16_t last_res_132994 = ((int16_t *) mem_138513)[tmp_132806];
                int16_t last_res_132995 = ((int16_t *) mem_138515)[tmp_132806];
                int16_t last_res_132996 = ((int16_t *) mem_138517)[tmp_132806];
                int16_t last_res_132997 = ((int16_t *) mem_138519)[tmp_132806];
                
                defunc_0_f_res_132990 = last_res_132994;
                defunc_0_f_res_132991 = last_res_132995;
                defunc_0_f_res_132992 = last_res_132996;
                defunc_0_f_res_132993 = last_res_132997;
            }
            for (int64_t write_iter_138270 = 0; write_iter_138270 < i16_res_132763; write_iter_138270++) {
                int16_t write_iv_138273 = ((int16_t *) mem_138521)[write_iter_138270];
                int16_t write_iv_138274 = ((int16_t *) mem_138513)[write_iter_138270];
                int16_t write_iv_138275 = ((int16_t *) mem_138515)[write_iter_138270];
                int16_t write_iv_138276 = ((int16_t *) mem_138517)[write_iter_138270];
                int16_t write_iv_138277 = ((int16_t *) mem_138519)[write_iter_138270];
                int64_t new_index_138379 = write_iter_138270 + binop_x_138382;
                double write_iv_138278 = ((double *) mem_138406)[new_index_138379];
                int64_t write_iv_138279 = ((int64_t *) mem_138408)[new_index_138379];
                int64_t defunc_0_f_res_137935;
                
                if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137935, defunc_0_f_res_132990, defunc_0_f_res_132991, defunc_0_f_res_132992, write_iv_138273, write_iv_138274, write_iv_138275, write_iv_138276, write_iv_138277) != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137935) && slt64(defunc_0_f_res_137935, i16_res_132763)) {
                    ((double *) mem_138482)[i_138294 * i16_res_132763 + defunc_0_f_res_137935] = write_iv_138278;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137935) && slt64(defunc_0_f_res_137935, i16_res_132763)) {
                    ((int64_t *) mem_138485)[i_138294 * i16_res_132763 + defunc_0_f_res_137935] = write_iv_138279;
                }
            }
            ((int16_t *) mem_138564)[(int64_t) 0] = defunc_0_f_res_132990;
            ((int16_t *) mem_138564)[(int64_t) 1] = defunc_0_f_res_132991;
            ((int16_t *) mem_138564)[(int64_t) 2] = defunc_0_f_res_132992;
            ((int16_t *) mem_138564)[(int64_t) 3] = defunc_0_f_res_132993;
            for (int64_t i_138284 = 0; i_138284 < (int64_t) 4; i_138284++) {
                int16_t eta_p_133012 = ((int16_t *) mem_138564)[i_138284];
                int64_t i16_res_133013 = sext_i16_i64(eta_p_133012);
                
                ((int64_t *) mem_138565)[i_138284] = i16_res_133013;
            }
            
            int16_t tmp_133014 = add16(defunc_0_f_res_132990, defunc_0_f_res_132991);
            int16_t tmp_133015 = add16(defunc_0_f_res_132992, tmp_133014);
            
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4] = (int16_t) 0;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 1] = defunc_0_f_res_132990;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 2] = tmp_133014;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 3] = tmp_133015;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138488, i_138294 * (int64_t) 4, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138565, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 4});
        }
        
        int64_t discard_138306;
        int64_t scanacc_138302 = (int64_t) 0;
        
        for (int64_t i_138304 = 0; i_138304 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778; i_138304++) {
            int64_t new_index_138357 = squot64(i_138304, dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777);
            int64_t binop_y_138359 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777 * new_index_138357;
            int64_t new_index_138360 = i_138304 - binop_y_138359;
            bool index_concat_cmp_138362 = sle64(n_blocks_132767, new_index_138360);
            int64_t index_concat_branch_138366;
            
            if (index_concat_cmp_138362) {
                int64_t index_concat_138364 = ((int64_t *) mem_138472)[new_index_138357];
                
                index_concat_branch_138366 = index_concat_138364;
            } else {
                int64_t index_concat_138365 = ((int64_t *) mem_138488)[new_index_138360 * (int64_t) 4 + new_index_138357];
                
                index_concat_branch_138366 = index_concat_138365;
            }
            
            int64_t defunc_0_op_res_133029 = add64(scanacc_138302, index_concat_branch_138366);
            
            ((int64_t *) mem_138590)[i_138304] = defunc_0_op_res_133029;
            
            int64_t scanacc_tmp_139315 = defunc_0_op_res_133029;
            
            scanacc_138302 = scanacc_tmp_139315;
        }
        discard_138306 = scanacc_138302;
        for (int64_t i_138309 = 0; i_138309 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778; i_138309++) {
            int64_t zv_lhs_133032 = add64((int64_t) -1, i_138309);
            int64_t tmp_133033 = smod64(zv_lhs_133032, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778);
            int64_t lifted_lambda_res_133034 = ((int64_t *) mem_138590)[tmp_133033];
            
            ((int64_t *) mem_138598)[i_138309] = lifted_lambda_res_133034;
        }
        ((int64_t *) mem_138598)[(int64_t) 0] = (int64_t) 0;
        for (int64_t write_iter_138311 = 0; write_iter_138311 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770; write_iter_138311++) {
            bool index_concat_cmp_138348 = sle64(arg_132769, write_iter_138311);
            double index_concat_branch_137817;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138046 = sub64(write_iter_138311, arg_132769);
                double index_concat_138047 = ((double *) mem_138458)[index_concat_i_138046];
                
                index_concat_branch_137817 = index_concat_138047;
            } else {
                int64_t new_index_137820 = squot64(write_iter_138311, i16_res_132763);
                int64_t binop_y_137821 = i16_res_132763 * new_index_137820;
                int64_t new_index_137822 = write_iter_138311 - binop_y_137821;
                double index_concat_137823 = ((double *) mem_138482)[new_index_137820 * i16_res_132763 + new_index_137822];
                
                index_concat_branch_137817 = index_concat_137823;
            }
            
            int64_t i64_arg0_137824 = futrts_to_bits64(index_concat_branch_137817);
            int64_t unsign_arg0_137825 = ashr64(i64_arg0_137824, (int64_t) 63);
            int64_t unsign_arg0_137826 = (int64_t) 1 & unsign_arg0_137825;
            int32_t to_i32_res_137827 = zext_i64_i32(unsign_arg0_137826);
            bool cond_137828 = to_i32_res_137827 == 1;
            bool x_137829 = !cond_137828;
            int32_t zlzb_rhs_137830;
            int32_t acc_137832 = 0;
            
            for (int32_t i_137831 = 0; i_137831 < 2; i_137831++) {
                int32_t get_bit_arg0_137833 = add32(blocked_radix_sort_step_arg1_132831, i_137831);
                int64_t unsign_arg0_137834 = zext_i32_i64(get_bit_arg0_137833);
                int64_t unsign_arg0_137835 = ashr64(i64_arg0_137824, unsign_arg0_137834);
                int64_t unsign_arg0_137836 = (int64_t) 1 & unsign_arg0_137835;
                int32_t to_i32_res_137837 = zext_i64_i32(unsign_arg0_137836);
                bool cond_f_res_137838 = get_bit_arg0_137833 == 63;
                bool y_137839 = x_137829 && cond_f_res_137838;
                bool cond_137840 = cond_137828 || y_137839;
                int32_t defunc_0_get_bit_res_137841;
                
                if (cond_137840) {
                    int32_t defunc_0_get_bit_res_t_res_138048 = 1 ^ to_i32_res_137837;
                    
                    defunc_0_get_bit_res_137841 = defunc_0_get_bit_res_t_res_138048;
                } else {
                    defunc_0_get_bit_res_137841 = to_i32_res_137837;
                }
                
                int32_t zp_rhs_137843 = shl32(defunc_0_get_bit_res_137841, i_137831);
                int32_t loopres_137844 = add32(acc_137832, zp_rhs_137843);
                int32_t acc_tmp_139320 = loopres_137844;
                
                acc_137832 = acc_tmp_139320;
            }
            zlzb_rhs_137830 = acc_137832;
            
            int64_t i32_res_137845 = sext_i32_i64(zlzb_rhs_137830);
            int64_t block_idx_137846 = sdiv64(write_iter_138311, i16_res_132763);
            bool x_137847 = sle64((int64_t) 0, block_idx_137846);
            bool y_137848 = slt64(block_idx_137846, dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777);
            bool bounds_check_137849 = x_137847 && y_137848;
            bool index_certs_137850;
            
            if (!bounds_check_137849) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) block_idx_137846, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-48\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:28:3-47\n   #9  ftsort.fut:27:1-28:47\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_137851 = sle64((int64_t) 0, i32_res_137845);
            bool y_137852 = slt64(i32_res_137845, (int64_t) 4);
            bool bounds_check_137853 = x_137851 && y_137852;
            bool index_certs_137854;
            
            if (!bounds_check_137853) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_137845, "] out of bounds for array of shape [", (long long) (int64_t) 4, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-53\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:28:3-47\n   #9  ftsort.fut:27:1-28:47\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            double index_concat_branch_138352;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138349 = sub64(write_iter_138311, arg_132769);
                double index_concat_138350 = ((double *) mem_138458)[index_concat_i_138349];
                
                index_concat_branch_138352 = index_concat_138350;
            } else {
                int64_t new_index_138374 = squot64(write_iter_138311, i16_res_132763);
                int64_t binop_y_138376 = i16_res_132763 * new_index_138374;
                int64_t new_index_138377 = write_iter_138311 - binop_y_138376;
                double index_concat_138351 = ((double *) mem_138482)[new_index_138374 * i16_res_132763 + new_index_138377];
                
                index_concat_branch_138352 = index_concat_138351;
            }
            
            int64_t index_concat_branch_138346;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138343 = sub64(write_iter_138311, arg_132769);
                int64_t index_concat_138344 = ((int64_t *) mem_138456)[index_concat_i_138343];
                
                index_concat_branch_138346 = index_concat_138344;
            } else {
                int64_t new_index_138370 = squot64(write_iter_138311, i16_res_132763);
                int64_t binop_y_138372 = i16_res_132763 * new_index_138370;
                int64_t new_index_138373 = write_iter_138311 - binop_y_138372;
                int64_t index_concat_138345 = ((int64_t *) mem_138485)[new_index_138370 * i16_res_132763 + new_index_138373];
                
                index_concat_branch_138346 = index_concat_138345;
            }
            
            int64_t binop_x_137855 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777 * i32_res_137845;
            int64_t new_index_137856 = block_idx_137846 + binop_x_137855;
            int64_t new_offset_137857 = ((int64_t *) mem_138598)[new_index_137856];
            bool index_concat_cmp_137858 = sle64(n_blocks_132767, block_idx_137846);
            int16_t index_concat_branch_137859;
            
            if (index_concat_cmp_137858) {
                int16_t index_concat_138049 = ((int16_t *) mem_138479)[i32_res_137845];
                
                index_concat_branch_137859 = index_concat_138049;
            } else {
                int16_t index_concat_137861 = ((int16_t *) mem_138491)[block_idx_137846 * (int64_t) 4 + i32_res_137845];
                
                index_concat_branch_137859 = index_concat_137861;
            }
            
            int64_t i16_res_137862 = sext_i16_i64(index_concat_branch_137859);
            int64_t zp_lhs_137863 = mul64(i16_res_132763, block_idx_137846);
            int64_t old_offset_137864 = add64(i16_res_137862, zp_lhs_137863);
            int64_t zp_lhs_137865 = sub64(write_iter_138311, old_offset_137864);
            int64_t idx_137866 = add64(new_offset_137857, zp_lhs_137865);
            
            if (sle64((int64_t) 0, idx_137866) && slt64(idx_137866, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770)) {
                ((double *) mem_138406)[idx_137866] = index_concat_branch_138352;
            }
            if (sle64((int64_t) 0, idx_137866) && slt64(idx_137866, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770)) {
                ((int64_t *) mem_138408)[idx_137866] = index_concat_branch_138346;
            }
        }
    }
    if (memblock_alloc(ctx, &mem_138624, bytes_138623, "mem_138624")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138626, bytes_138623, "mem_138626")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138323 = 0; i_138323 < n_78735; i_138323++) {
        int64_t eta_p_133103 = ((int64_t *) mem_138408)[i_138323];
        bool x_133104 = sle64((int64_t) 0, eta_p_133103);
        bool y_133105 = slt64(eta_p_133103, n_78735);
        bool bounds_check_133106 = x_133104 && y_133105;
        bool index_certs_133107;
        
        if (!bounds_check_133106) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133103, "] out of bounds for array of shape [", (long long) n_78735, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:68:27-32\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:68:6-33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #4  ftbasics.fut:199:95-98\n   #5  ftsort.fut:28:3-47\n   #6  ftsort.fut:27:1-28:47\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133108 = ((int64_t *) ext_mem_138404.mem)[eta_p_133103];
        double lifted_lambda_res_133109 = ((double *) xs_mem_138403.mem)[eta_p_133103];
        
        ((int64_t *) mem_138624.mem)[i_138323] = lifted_lambda_res_133108;
        ((double *) mem_138626.mem)[i_138323] = lifted_lambda_res_133109;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138624, "mem_138624") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138626, "mem_138626") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139653, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139654, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138406);
        free(mem_138408);
        free(mem_138416);
        free(mem_138418);
        free(mem_138420);
        free(mem_138422);
        free(mem_138424);
        free(mem_138456);
        free(mem_138458);
        free(mem_138471);
        free(mem_138472);
        free(mem_138479);
        free(mem_138482);
        free(mem_138485);
        free(mem_138488);
        free(mem_138491);
        free(mem_138513);
        free(mem_138515);
        free(mem_138517);
        free(mem_138519);
        free(mem_138521);
        free(mem_138564);
        free(mem_138565);
        free(mem_138590);
        free(mem_138598);
        if (memblock_unref(ctx, &mem_138626, "mem_138626") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_float(struct futhark_context *ctx, struct memblock *mem_out_p_139680, struct memblock *mem_out_p_139681, struct memblock xs_mem_138403, int64_t n_75980, int64_t incr_75981, int16_t block_sizze_75982)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138406_cached_sizze_139682 = 0;
    unsigned char *mem_138406 = NULL;
    int64_t mem_138408_cached_sizze_139683 = 0;
    unsigned char *mem_138408 = NULL;
    int64_t mem_138416_cached_sizze_139684 = 0;
    unsigned char *mem_138416 = NULL;
    int64_t mem_138418_cached_sizze_139685 = 0;
    unsigned char *mem_138418 = NULL;
    int64_t mem_138420_cached_sizze_139686 = 0;
    unsigned char *mem_138420 = NULL;
    int64_t mem_138422_cached_sizze_139687 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139688 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138456_cached_sizze_139689 = 0;
    unsigned char *mem_138456 = NULL;
    int64_t mem_138458_cached_sizze_139690 = 0;
    unsigned char *mem_138458 = NULL;
    int64_t mem_138471_cached_sizze_139691 = 0;
    unsigned char *mem_138471 = NULL;
    int64_t mem_138472_cached_sizze_139692 = 0;
    unsigned char *mem_138472 = NULL;
    int64_t mem_138479_cached_sizze_139693 = 0;
    unsigned char *mem_138479 = NULL;
    int64_t mem_138482_cached_sizze_139694 = 0;
    unsigned char *mem_138482 = NULL;
    int64_t mem_138485_cached_sizze_139695 = 0;
    unsigned char *mem_138485 = NULL;
    int64_t mem_138488_cached_sizze_139696 = 0;
    unsigned char *mem_138488 = NULL;
    int64_t mem_138491_cached_sizze_139697 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138513_cached_sizze_139698 = 0;
    unsigned char *mem_138513 = NULL;
    int64_t mem_138515_cached_sizze_139699 = 0;
    unsigned char *mem_138515 = NULL;
    int64_t mem_138517_cached_sizze_139700 = 0;
    unsigned char *mem_138517 = NULL;
    int64_t mem_138519_cached_sizze_139701 = 0;
    unsigned char *mem_138519 = NULL;
    int64_t mem_138521_cached_sizze_139702 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138564_cached_sizze_139703 = 0;
    unsigned char *mem_138564 = NULL;
    int64_t mem_138565_cached_sizze_139704 = 0;
    unsigned char *mem_138565 = NULL;
    int64_t mem_138590_cached_sizze_139705 = 0;
    unsigned char *mem_138590 = NULL;
    int64_t mem_138598_cached_sizze_139706 = 0;
    unsigned char *mem_138598 = NULL;
    struct memblock mem_138626;
    
    mem_138626.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    bool cond_132761 = n_75980 == (int64_t) 0;
    int32_t iters_132762;
    
    if (cond_132761) {
        iters_132762 = 0;
    } else {
        iters_132762 = 16;
    }
    
    int64_t i16_res_132763 = sext_i16_i64(block_sizze_75982);
    bool zzero_132764 = i16_res_132763 == (int64_t) 0;
    bool nonzzero_132765 = !zzero_132764;
    bool nonzzero_cert_132766;
    
    if (!nonzzero_132765) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:222:20-27\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #4  ftbasics.fut:199:95-98\n   #5  ftsort.fut:25:3-46\n   #6  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t n_blocks_132767 = sdiv64(n_75980, i16_res_132763);
    int64_t rest_132768 = smod64(n_75980, i16_res_132763);
    int64_t arg_132769 = mul64(i16_res_132763, n_blocks_132767);
    int64_t dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770 = add64(rest_132768, arg_132769);
    bool dim_match_132771 = dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770 == n_75980;
    bool empty_or_match_cert_132772;
    
    if (!dim_match_132771) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) n_75980, "] cannot match shape of type `[", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "](f32, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:224:12-46\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #3  /prelude/functional.fut:9:44-45\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #5  ftbasics.fut:199:95-98\n   #6  ftsort.fut:25:3-46\n   #7  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138405 = (int64_t) 4 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770;
    int64_t bytes_138407 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770;
    bool loop_nonempty_132776 = slt32(0, iters_132762);
    int64_t dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777 = add64((int64_t) 1, n_blocks_132767);
    int64_t dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778 = mul64((int64_t) 4, dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777);
    bool empty_slice_132779 = arg_132769 == (int64_t) 0;
    int64_t m_132780 = sub64(arg_132769, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_132781 = sle64((int64_t) 0, m_132780);
    bool i_p_m_t_s_leq_w_132782 = slt64(m_132780, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770);
    bool i_lte_j_132783 = sle64((int64_t) 0, arg_132769);
    bool y_132784 = zzero_leq_i_p_m_t_s_132781 && i_p_m_t_s_leq_w_132782;
    bool forwards_ok_132785 = i_lte_j_132783 && y_132784;
    bool ok_or_empty_132786 = empty_slice_132779 || forwards_ok_132785;
    bool loop_not_taken_132787 = !loop_nonempty_132776;
    bool protect_assert_disj_132788 = ok_or_empty_132786 || loop_not_taken_132787;
    bool index_certs_132789;
    
    if (!protect_assert_disj_132788) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) arg_132769, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "].", "-> #0  /prelude/array.fut:65:4-11\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:25:3-46\n   #8  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_132790 = rest_132768 == (int64_t) 0;
    int64_t m_132791 = sub64(rest_132768, (int64_t) 1);
    int64_t i_p_m_t_s_132792 = add64(arg_132769, m_132791);
    bool zzero_leq_i_p_m_t_s_132793 = sle64((int64_t) 0, i_p_m_t_s_132792);
    bool i_p_m_t_s_leq_w_132794 = slt64(i_p_m_t_s_132792, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770);
    bool i_lte_j_132795 = sle64(arg_132769, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770);
    bool y_132796 = zzero_leq_i_p_m_t_s_132793 && i_p_m_t_s_leq_w_132794;
    bool forwards_ok_132797 = i_lte_j_132795 && y_132796;
    bool ok_or_empty_132798 = empty_slice_132790 || forwards_ok_132797;
    bool protect_assert_disj_132799 = loop_not_taken_132787 || ok_or_empty_132798;
    bool index_certs_132800;
    
    if (!protect_assert_disj_132799) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_132769, ":", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "].", "-> #0  /prelude/array.fut:65:13-24\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:25:3-46\n   #8  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool binop_x_132801 = sle64((int64_t) 0, n_blocks_132767);
    bool binop_y_132802 = sle64((int64_t) 0, i16_res_132763);
    bool binop_y_132803 = binop_x_132801 && binop_y_132802;
    bool protect_assert_disj_132804 = loop_not_taken_132787 || binop_y_132803;
    bool dim_ok_cert_132805;
    
    if (!protect_assert_disj_132804) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Cannot unflatten array of shape [", (long long) arg_132769, "] to array of shape [", (long long) n_blocks_132767, "][", (long long) i16_res_132763, "]", "-> #0  /prelude/array.fut:184:3-30\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-168:21\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:25:3-46\n   #8  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_132806 = sub64(i16_res_132763, (int64_t) 1);
    bool x_132807 = sle64((int64_t) 0, tmp_132806);
    bool y_132808 = slt64(tmp_132806, i16_res_132763);
    bool bounds_check_132809 = x_132807 && y_132808;
    bool protect_assert_disj_132810 = zzero_132764 || bounds_check_132809;
    bool protect_assert_disj_132811 = loop_not_taken_132787 || protect_assert_disj_132810;
    bool index_certs_132812;
    
    if (!protect_assert_disj_132811) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_132806, "] out of bounds for array of shape [", (long long) i16_res_132763, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:25:3-46\n   #9  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool y_132814 = slt64((int64_t) 0, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778);
    bool protect_assert_disj_132815 = loop_not_taken_132787 || y_132814;
    bool index_certs_132816;
    
    if (!protect_assert_disj_132815) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:122:3-123:7\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:178:8-20\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:25:3-46\n   #9  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool protect_assert_disj_132818 = nonzzero_132765 || loop_not_taken_132787;
    bool nonzzero_cert_132819;
    
    if (!protect_assert_disj_132818) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:186:27-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:25:3-46\n   #9  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_132820 = sle64((int64_t) 0, m_132791);
    bool y_132821 = slt64(m_132791, rest_132768);
    bool bounds_check_132822 = x_132820 && y_132821;
    bool protect_assert_disj_132823 = empty_slice_132790 || bounds_check_132822;
    bool protect_assert_disj_132824 = loop_not_taken_132787 || protect_assert_disj_132823;
    bool index_certs_132825;
    
    if (!protect_assert_disj_132824) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_132791, "] out of bounds for array of shape [", (long long) rest_132768, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #6  ftbasics.fut:199:95-98\n   #7  ftsort.fut:25:3-46\n   #8  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138415 = (int64_t) 2 * rest_132768;
    int64_t bytes_138455 = (int64_t) 8 * rest_132768;
    int64_t bytes_138457 = (int64_t) 4 * rest_132768;
    int64_t binop_x_138480 = (int64_t) 4 * n_blocks_132767;
    int64_t bytes_138481 = i16_res_132763 * binop_x_138480;
    int64_t binop_x_138483 = (int64_t) 8 * n_blocks_132767;
    int64_t bytes_138484 = i16_res_132763 * binop_x_138483;
    int64_t bytes_138487 = (int64_t) 32 * n_blocks_132767;
    int64_t bytes_138512 = (int64_t) 2 * i16_res_132763;
    int64_t bytes_138589 = (int64_t) 32 * dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777;
    bool dim_match_133087 = n_75980 == dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770;
    bool empty_or_match_cert_133088;
    
    if (!dim_match_133087) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770, "] cannot match shape of type `[", (long long) n_75980, "](f32, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:225:6-11\n   #2  /prelude/functional.fut:26:41-42\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:226:6-227:50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:25:3-46\n   #9  ftsort.fut:24:1-25:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138623 = (int64_t) 8 * n_75980;
    int64_t bytes_138625 = (int64_t) 4 * n_75980;
    
    if (futrts_indicesWithIncrement_9338(ctx, &ext_mem_138404, xs_mem_138403, n_75980, incr_75981) != 0) {
        err = 1;
        goto cleanup;
    }
    if (mem_138406_cached_sizze_139682 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138406, &mem_138406_cached_sizze_139682, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_138406, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) xs_mem_138403.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770});
    if (mem_138408_cached_sizze_139683 < bytes_138407) {
        err = lexical_realloc(ctx, &mem_138408, &mem_138408_cached_sizze_139683, bytes_138407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139283 = 0; i_139283 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770; i_139283++) {
        int64_t x_139284 = (int64_t) 0 + i_139283 * (int64_t) 1;
        
        ((int64_t *) mem_138408)[i_139283] = x_139284;
    }
    if (mem_138416_cached_sizze_139684 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138416, &mem_138416_cached_sizze_139684, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138418_cached_sizze_139685 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138418, &mem_138418_cached_sizze_139685, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138420_cached_sizze_139686 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138420, &mem_138420_cached_sizze_139686, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138422_cached_sizze_139687 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139687, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138424_cached_sizze_139688 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139688, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138456_cached_sizze_139689 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138456, &mem_138456_cached_sizze_139689, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138458_cached_sizze_139690 < bytes_138457) {
        err = lexical_realloc(ctx, &mem_138458, &mem_138458_cached_sizze_139690, bytes_138457);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138471_cached_sizze_139691 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138471, &mem_138471_cached_sizze_139691, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138472_cached_sizze_139692 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138472, &mem_138472_cached_sizze_139692, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138479_cached_sizze_139693 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138479, &mem_138479_cached_sizze_139693, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138482_cached_sizze_139694 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138482, &mem_138482_cached_sizze_139694, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138485_cached_sizze_139695 < bytes_138484) {
        err = lexical_realloc(ctx, &mem_138485, &mem_138485_cached_sizze_139695, bytes_138484);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138488_cached_sizze_139696 < bytes_138487) {
        err = lexical_realloc(ctx, &mem_138488, &mem_138488_cached_sizze_139696, bytes_138487);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138491_cached_sizze_139697 < binop_x_138483) {
        err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139697, binop_x_138483);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138513_cached_sizze_139698 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138513, &mem_138513_cached_sizze_139698, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138515_cached_sizze_139699 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138515, &mem_138515_cached_sizze_139699, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138517_cached_sizze_139700 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138517, &mem_138517_cached_sizze_139700, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138519_cached_sizze_139701 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138519, &mem_138519_cached_sizze_139701, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138521_cached_sizze_139702 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139702, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138564_cached_sizze_139703 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138564, &mem_138564_cached_sizze_139703, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138565_cached_sizze_139704 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138565, &mem_138565_cached_sizze_139704, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138590_cached_sizze_139705 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138590, &mem_138590_cached_sizze_139705, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138598_cached_sizze_139706 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138598, &mem_138598_cached_sizze_139706, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_132828 = 0; i_132828 < iters_132762; i_132828++) {
        int32_t blocked_radix_sort_step_arg1_132831 = mul32(2, i_132828);
        int32_t get_bit_arg0_132836 = add32(1, blocked_radix_sort_step_arg1_132831);
        bool cond_f_res_132837 = get_bit_arg0_132836 == 31;
        bool cond_f_res_132838 = blocked_radix_sort_step_arg1_132831 == 31;
        int16_t discard_138226;
        int16_t discard_138227;
        int16_t discard_138228;
        int16_t discard_138229;
        int16_t scanacc_138211;
        int16_t scanacc_138212;
        int16_t scanacc_138213;
        int16_t scanacc_138214;
        
        scanacc_138211 = (int16_t) 0;
        scanacc_138212 = (int16_t) 0;
        scanacc_138213 = (int16_t) 0;
        scanacc_138214 = (int16_t) 0;
        for (int64_t i_138220 = 0; i_138220 < rest_132768; i_138220++) {
            int64_t slice_138369 = arg_132769 + i_138220;
            float eta_p_137889 = ((float *) mem_138406)[slice_138369];
            int32_t i32_arg0_137890 = futrts_to_bits32(eta_p_137889);
            int32_t unsign_arg0_137891 = ashr32(i32_arg0_137890, get_bit_arg0_132836);
            int32_t unsign_arg0_137892 = 1 & unsign_arg0_137891;
            int32_t unsign_arg0_137893 = ashr32(i32_arg0_137890, 31);
            int32_t unsign_arg0_137894 = 1 & unsign_arg0_137893;
            bool cond_137895 = unsign_arg0_137894 == 1;
            bool x_137896 = !cond_137895;
            bool y_137897 = cond_f_res_132837 && x_137896;
            bool cond_137898 = cond_137895 || y_137897;
            int32_t defunc_0_get_bit_res_137899;
            
            if (cond_137898) {
                int32_t defunc_0_get_bit_res_t_res_138025 = 1 ^ unsign_arg0_137892;
                
                defunc_0_get_bit_res_137899 = defunc_0_get_bit_res_t_res_138025;
            } else {
                defunc_0_get_bit_res_137899 = unsign_arg0_137892;
            }
            
            int32_t zp_lhs_137901 = mul32(2, defunc_0_get_bit_res_137899);
            int32_t unsign_arg0_137902 = ashr32(i32_arg0_137890, blocked_radix_sort_step_arg1_132831);
            int32_t unsign_arg0_137903 = 1 & unsign_arg0_137902;
            bool y_137904 = cond_f_res_132838 && x_137896;
            bool cond_137905 = cond_137895 || y_137904;
            int32_t defunc_0_get_bit_res_137906;
            
            if (cond_137905) {
                int32_t defunc_0_get_bit_res_t_res_138026 = 1 ^ unsign_arg0_137903;
                
                defunc_0_get_bit_res_137906 = defunc_0_get_bit_res_t_res_138026;
            } else {
                defunc_0_get_bit_res_137906 = unsign_arg0_137903;
            }
            
            int32_t i32_arg0_137908 = add32(zp_lhs_137901, defunc_0_get_bit_res_137906);
            int16_t i32_res_137909 = sext_i32_i16(i32_arg0_137908);
            int16_t defunc_0_f_res_137911;
            int16_t defunc_0_f_res_137912;
            int16_t defunc_0_f_res_137913;
            int16_t defunc_0_f_res_137914;
            
            if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137911, &defunc_0_f_res_137912, &defunc_0_f_res_137913, &defunc_0_f_res_137914, i32_res_137909) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int16_t defunc_0_op_res_132886 = add16(defunc_0_f_res_137911, scanacc_138211);
            int16_t defunc_0_op_res_132887 = add16(defunc_0_f_res_137912, scanacc_138212);
            int16_t defunc_0_op_res_132888 = add16(defunc_0_f_res_137913, scanacc_138213);
            int16_t defunc_0_op_res_132889 = add16(defunc_0_f_res_137914, scanacc_138214);
            
            ((int16_t *) mem_138416)[i_138220] = defunc_0_op_res_132886;
            ((int16_t *) mem_138418)[i_138220] = defunc_0_op_res_132887;
            ((int16_t *) mem_138420)[i_138220] = defunc_0_op_res_132888;
            ((int16_t *) mem_138422)[i_138220] = defunc_0_op_res_132889;
            ((int16_t *) mem_138424)[i_138220] = i32_res_137909;
            
            int16_t scanacc_tmp_139287 = defunc_0_op_res_132886;
            int16_t scanacc_tmp_139288 = defunc_0_op_res_132887;
            int16_t scanacc_tmp_139289 = defunc_0_op_res_132888;
            int16_t scanacc_tmp_139290 = defunc_0_op_res_132889;
            
            scanacc_138211 = scanacc_tmp_139287;
            scanacc_138212 = scanacc_tmp_139288;
            scanacc_138213 = scanacc_tmp_139289;
            scanacc_138214 = scanacc_tmp_139290;
        }
        discard_138226 = scanacc_138211;
        discard_138227 = scanacc_138212;
        discard_138228 = scanacc_138213;
        discard_138229 = scanacc_138214;
        
        int16_t defunc_0_radix_sort_step_i16_res_132890;
        int16_t defunc_0_radix_sort_step_i16_res_132891;
        int16_t defunc_0_radix_sort_step_i16_res_132892;
        int16_t defunc_0_radix_sort_step_i16_res_132893;
        
        if (empty_slice_132790) {
            defunc_0_radix_sort_step_i16_res_132890 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_132891 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_132892 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_132893 = (int16_t) 0;
        } else {
            int16_t last_res_132894 = ((int16_t *) mem_138416)[m_132791];
            int16_t last_res_132895 = ((int16_t *) mem_138418)[m_132791];
            int16_t last_res_132896 = ((int16_t *) mem_138420)[m_132791];
            int16_t last_res_132897 = ((int16_t *) mem_138422)[m_132791];
            
            defunc_0_radix_sort_step_i16_res_132890 = last_res_132894;
            defunc_0_radix_sort_step_i16_res_132891 = last_res_132895;
            defunc_0_radix_sort_step_i16_res_132892 = last_res_132896;
            defunc_0_radix_sort_step_i16_res_132893 = last_res_132897;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138456, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + (int64_t) 1 * arg_132769, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_132768});
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_138458, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138406, (int64_t) 0 + (int64_t) 1 * arg_132769, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_132768});
        for (int64_t write_iter_138230 = 0; write_iter_138230 < rest_132768; write_iter_138230++) {
            int16_t write_iv_138233 = ((int16_t *) mem_138424)[write_iter_138230];
            int16_t write_iv_138234 = ((int16_t *) mem_138416)[write_iter_138230];
            int16_t write_iv_138235 = ((int16_t *) mem_138418)[write_iter_138230];
            int16_t write_iv_138236 = ((int16_t *) mem_138420)[write_iter_138230];
            int16_t write_iv_138237 = ((int16_t *) mem_138422)[write_iter_138230];
            int64_t slice_138368 = arg_132769 + write_iter_138230;
            float write_iv_138238 = ((float *) mem_138406)[slice_138368];
            int64_t write_iv_138239 = ((int64_t *) mem_138408)[slice_138368];
            int64_t defunc_0_f_res_137873;
            
            if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137873, defunc_0_radix_sort_step_i16_res_132890, defunc_0_radix_sort_step_i16_res_132891, defunc_0_radix_sort_step_i16_res_132892, write_iv_138233, write_iv_138234, write_iv_138235, write_iv_138236, write_iv_138237) != 0) {
                err = 1;
                goto cleanup;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137873) && slt64(defunc_0_f_res_137873, rest_132768)) {
                ((float *) mem_138458)[defunc_0_f_res_137873] = write_iv_138238;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137873) && slt64(defunc_0_f_res_137873, rest_132768)) {
                ((int64_t *) mem_138456)[defunc_0_f_res_137873] = write_iv_138239;
            }
        }
        ((int16_t *) mem_138471)[(int64_t) 0] = defunc_0_radix_sort_step_i16_res_132890;
        ((int16_t *) mem_138471)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_132891;
        ((int16_t *) mem_138471)[(int64_t) 2] = defunc_0_radix_sort_step_i16_res_132892;
        ((int16_t *) mem_138471)[(int64_t) 3] = defunc_0_radix_sort_step_i16_res_132893;
        for (int64_t i_138244 = 0; i_138244 < (int64_t) 4; i_138244++) {
            int16_t eta_p_132914 = ((int16_t *) mem_138471)[i_138244];
            int64_t i16_res_132915 = sext_i16_i64(eta_p_132914);
            
            ((int64_t *) mem_138472)[i_138244] = i16_res_132915;
        }
        
        int16_t tmp_132916 = add16(defunc_0_radix_sort_step_i16_res_132890, defunc_0_radix_sort_step_i16_res_132891);
        int16_t tmp_132917 = add16(defunc_0_radix_sort_step_i16_res_132892, tmp_132916);
        
        ((int16_t *) mem_138479)[(int64_t) 0] = (int16_t) 0;
        ((int16_t *) mem_138479)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_132890;
        ((int16_t *) mem_138479)[(int64_t) 2] = tmp_132916;
        ((int16_t *) mem_138479)[(int64_t) 3] = tmp_132917;
        for (int64_t i_138294 = 0; i_138294 < n_blocks_132767; i_138294++) {
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_138482, i_138294 * i16_res_132763, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138406, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_132763), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_132763});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138485, i_138294 * i16_res_132763, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_132763), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_132763});
            
            int64_t binop_x_138382 = i16_res_132763 * i_138294;
            int16_t discard_138266;
            int16_t discard_138267;
            int16_t discard_138268;
            int16_t discard_138269;
            int16_t scanacc_138251;
            int16_t scanacc_138252;
            int16_t scanacc_138253;
            int16_t scanacc_138254;
            
            scanacc_138251 = (int16_t) 0;
            scanacc_138252 = (int16_t) 0;
            scanacc_138253 = (int16_t) 0;
            scanacc_138254 = (int16_t) 0;
            for (int64_t i_138260 = 0; i_138260 < i16_res_132763; i_138260++) {
                int64_t new_index_138383 = i_138260 + binop_x_138382;
                float eta_p_137945 = ((float *) mem_138406)[new_index_138383];
                int32_t i32_arg0_137946 = futrts_to_bits32(eta_p_137945);
                int32_t unsign_arg0_137947 = ashr32(i32_arg0_137946, get_bit_arg0_132836);
                int32_t unsign_arg0_137948 = 1 & unsign_arg0_137947;
                int32_t unsign_arg0_137949 = ashr32(i32_arg0_137946, 31);
                int32_t unsign_arg0_137950 = 1 & unsign_arg0_137949;
                bool cond_137951 = unsign_arg0_137950 == 1;
                bool x_137952 = !cond_137951;
                bool y_137953 = cond_f_res_132837 && x_137952;
                bool cond_137954 = cond_137951 || y_137953;
                int32_t defunc_0_get_bit_res_137955;
                
                if (cond_137954) {
                    int32_t defunc_0_get_bit_res_t_res_138027 = 1 ^ unsign_arg0_137948;
                    
                    defunc_0_get_bit_res_137955 = defunc_0_get_bit_res_t_res_138027;
                } else {
                    defunc_0_get_bit_res_137955 = unsign_arg0_137948;
                }
                
                int32_t zp_lhs_137957 = mul32(2, defunc_0_get_bit_res_137955);
                int32_t unsign_arg0_137958 = ashr32(i32_arg0_137946, blocked_radix_sort_step_arg1_132831);
                int32_t unsign_arg0_137959 = 1 & unsign_arg0_137958;
                bool y_137960 = cond_f_res_132838 && x_137952;
                bool cond_137961 = cond_137951 || y_137960;
                int32_t defunc_0_get_bit_res_137962;
                
                if (cond_137961) {
                    int32_t defunc_0_get_bit_res_t_res_138028 = 1 ^ unsign_arg0_137959;
                    
                    defunc_0_get_bit_res_137962 = defunc_0_get_bit_res_t_res_138028;
                } else {
                    defunc_0_get_bit_res_137962 = unsign_arg0_137959;
                }
                
                int32_t i32_arg0_137964 = add32(zp_lhs_137957, defunc_0_get_bit_res_137962);
                int16_t i32_res_137965 = sext_i32_i16(i32_arg0_137964);
                int16_t defunc_0_f_res_137967;
                int16_t defunc_0_f_res_137968;
                int16_t defunc_0_f_res_137969;
                int16_t defunc_0_f_res_137970;
                
                if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137967, &defunc_0_f_res_137968, &defunc_0_f_res_137969, &defunc_0_f_res_137970, i32_res_137965) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int16_t defunc_0_op_res_132978 = add16(defunc_0_f_res_137967, scanacc_138251);
                int16_t defunc_0_op_res_132979 = add16(defunc_0_f_res_137968, scanacc_138252);
                int16_t defunc_0_op_res_132980 = add16(defunc_0_f_res_137969, scanacc_138253);
                int16_t defunc_0_op_res_132981 = add16(defunc_0_f_res_137970, scanacc_138254);
                
                ((int16_t *) mem_138513)[i_138260] = defunc_0_op_res_132978;
                ((int16_t *) mem_138515)[i_138260] = defunc_0_op_res_132979;
                ((int16_t *) mem_138517)[i_138260] = defunc_0_op_res_132980;
                ((int16_t *) mem_138519)[i_138260] = defunc_0_op_res_132981;
                ((int16_t *) mem_138521)[i_138260] = i32_res_137965;
                
                int16_t scanacc_tmp_139303 = defunc_0_op_res_132978;
                int16_t scanacc_tmp_139304 = defunc_0_op_res_132979;
                int16_t scanacc_tmp_139305 = defunc_0_op_res_132980;
                int16_t scanacc_tmp_139306 = defunc_0_op_res_132981;
                
                scanacc_138251 = scanacc_tmp_139303;
                scanacc_138252 = scanacc_tmp_139304;
                scanacc_138253 = scanacc_tmp_139305;
                scanacc_138254 = scanacc_tmp_139306;
            }
            discard_138266 = scanacc_138251;
            discard_138267 = scanacc_138252;
            discard_138268 = scanacc_138253;
            discard_138269 = scanacc_138254;
            
            int16_t defunc_0_f_res_132982;
            int16_t defunc_0_f_res_132983;
            int16_t defunc_0_f_res_132984;
            int16_t defunc_0_f_res_132985;
            
            if (zzero_132764) {
                defunc_0_f_res_132982 = (int16_t) 0;
                defunc_0_f_res_132983 = (int16_t) 0;
                defunc_0_f_res_132984 = (int16_t) 0;
                defunc_0_f_res_132985 = (int16_t) 0;
            } else {
                int16_t last_res_132986 = ((int16_t *) mem_138513)[tmp_132806];
                int16_t last_res_132987 = ((int16_t *) mem_138515)[tmp_132806];
                int16_t last_res_132988 = ((int16_t *) mem_138517)[tmp_132806];
                int16_t last_res_132989 = ((int16_t *) mem_138519)[tmp_132806];
                
                defunc_0_f_res_132982 = last_res_132986;
                defunc_0_f_res_132983 = last_res_132987;
                defunc_0_f_res_132984 = last_res_132988;
                defunc_0_f_res_132985 = last_res_132989;
            }
            for (int64_t write_iter_138270 = 0; write_iter_138270 < i16_res_132763; write_iter_138270++) {
                int16_t write_iv_138273 = ((int16_t *) mem_138521)[write_iter_138270];
                int16_t write_iv_138274 = ((int16_t *) mem_138513)[write_iter_138270];
                int16_t write_iv_138275 = ((int16_t *) mem_138515)[write_iter_138270];
                int16_t write_iv_138276 = ((int16_t *) mem_138517)[write_iter_138270];
                int16_t write_iv_138277 = ((int16_t *) mem_138519)[write_iter_138270];
                int64_t new_index_138379 = write_iter_138270 + binop_x_138382;
                float write_iv_138278 = ((float *) mem_138406)[new_index_138379];
                int64_t write_iv_138279 = ((int64_t *) mem_138408)[new_index_138379];
                int64_t defunc_0_f_res_137929;
                
                if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137929, defunc_0_f_res_132982, defunc_0_f_res_132983, defunc_0_f_res_132984, write_iv_138273, write_iv_138274, write_iv_138275, write_iv_138276, write_iv_138277) != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137929) && slt64(defunc_0_f_res_137929, i16_res_132763)) {
                    ((float *) mem_138482)[i_138294 * i16_res_132763 + defunc_0_f_res_137929] = write_iv_138278;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137929) && slt64(defunc_0_f_res_137929, i16_res_132763)) {
                    ((int64_t *) mem_138485)[i_138294 * i16_res_132763 + defunc_0_f_res_137929] = write_iv_138279;
                }
            }
            ((int16_t *) mem_138564)[(int64_t) 0] = defunc_0_f_res_132982;
            ((int16_t *) mem_138564)[(int64_t) 1] = defunc_0_f_res_132983;
            ((int16_t *) mem_138564)[(int64_t) 2] = defunc_0_f_res_132984;
            ((int16_t *) mem_138564)[(int64_t) 3] = defunc_0_f_res_132985;
            for (int64_t i_138284 = 0; i_138284 < (int64_t) 4; i_138284++) {
                int16_t eta_p_133004 = ((int16_t *) mem_138564)[i_138284];
                int64_t i16_res_133005 = sext_i16_i64(eta_p_133004);
                
                ((int64_t *) mem_138565)[i_138284] = i16_res_133005;
            }
            
            int16_t tmp_133006 = add16(defunc_0_f_res_132982, defunc_0_f_res_132983);
            int16_t tmp_133007 = add16(defunc_0_f_res_132984, tmp_133006);
            
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4] = (int16_t) 0;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 1] = defunc_0_f_res_132982;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 2] = tmp_133006;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 3] = tmp_133007;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138488, i_138294 * (int64_t) 4, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138565, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 4});
        }
        
        int64_t discard_138306;
        int64_t scanacc_138302 = (int64_t) 0;
        
        for (int64_t i_138304 = 0; i_138304 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778; i_138304++) {
            int64_t new_index_138357 = squot64(i_138304, dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777);
            int64_t binop_y_138359 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777 * new_index_138357;
            int64_t new_index_138360 = i_138304 - binop_y_138359;
            bool index_concat_cmp_138362 = sle64(n_blocks_132767, new_index_138360);
            int64_t index_concat_branch_138366;
            
            if (index_concat_cmp_138362) {
                int64_t index_concat_138364 = ((int64_t *) mem_138472)[new_index_138357];
                
                index_concat_branch_138366 = index_concat_138364;
            } else {
                int64_t index_concat_138365 = ((int64_t *) mem_138488)[new_index_138360 * (int64_t) 4 + new_index_138357];
                
                index_concat_branch_138366 = index_concat_138365;
            }
            
            int64_t defunc_0_op_res_133021 = add64(scanacc_138302, index_concat_branch_138366);
            
            ((int64_t *) mem_138590)[i_138304] = defunc_0_op_res_133021;
            
            int64_t scanacc_tmp_139315 = defunc_0_op_res_133021;
            
            scanacc_138302 = scanacc_tmp_139315;
        }
        discard_138306 = scanacc_138302;
        for (int64_t i_138309 = 0; i_138309 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778; i_138309++) {
            int64_t zv_lhs_133024 = add64((int64_t) -1, i_138309);
            int64_t tmp_133025 = smod64(zv_lhs_133024, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_132778);
            int64_t lifted_lambda_res_133026 = ((int64_t *) mem_138590)[tmp_133025];
            
            ((int64_t *) mem_138598)[i_138309] = lifted_lambda_res_133026;
        }
        ((int64_t *) mem_138598)[(int64_t) 0] = (int64_t) 0;
        for (int64_t write_iter_138311 = 0; write_iter_138311 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770; write_iter_138311++) {
            bool index_concat_cmp_138348 = sle64(arg_132769, write_iter_138311);
            float index_concat_branch_137817;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138037 = sub64(write_iter_138311, arg_132769);
                float index_concat_138038 = ((float *) mem_138458)[index_concat_i_138037];
                
                index_concat_branch_137817 = index_concat_138038;
            } else {
                int64_t new_index_137820 = squot64(write_iter_138311, i16_res_132763);
                int64_t binop_y_137821 = i16_res_132763 * new_index_137820;
                int64_t new_index_137822 = write_iter_138311 - binop_y_137821;
                float index_concat_137823 = ((float *) mem_138482)[new_index_137820 * i16_res_132763 + new_index_137822];
                
                index_concat_branch_137817 = index_concat_137823;
            }
            
            int32_t i32_arg0_137824 = futrts_to_bits32(index_concat_branch_137817);
            int32_t unsign_arg0_137825 = ashr32(i32_arg0_137824, 31);
            int32_t unsign_arg0_137826 = 1 & unsign_arg0_137825;
            bool cond_137827 = unsign_arg0_137826 == 1;
            bool x_137828 = !cond_137827;
            int32_t zlzb_rhs_137829;
            int32_t acc_137831 = 0;
            
            for (int32_t i_137830 = 0; i_137830 < 2; i_137830++) {
                int32_t get_bit_arg0_137832 = add32(blocked_radix_sort_step_arg1_132831, i_137830);
                int32_t unsign_arg0_137833 = ashr32(i32_arg0_137824, get_bit_arg0_137832);
                int32_t unsign_arg0_137834 = 1 & unsign_arg0_137833;
                bool cond_f_res_137835 = get_bit_arg0_137832 == 31;
                bool y_137836 = x_137828 && cond_f_res_137835;
                bool cond_137837 = cond_137827 || y_137836;
                int32_t defunc_0_get_bit_res_137838;
                
                if (cond_137837) {
                    int32_t defunc_0_get_bit_res_t_res_138039 = 1 ^ unsign_arg0_137834;
                    
                    defunc_0_get_bit_res_137838 = defunc_0_get_bit_res_t_res_138039;
                } else {
                    defunc_0_get_bit_res_137838 = unsign_arg0_137834;
                }
                
                int32_t zp_rhs_137840 = shl32(defunc_0_get_bit_res_137838, i_137830);
                int32_t loopres_137841 = add32(acc_137831, zp_rhs_137840);
                int32_t acc_tmp_139320 = loopres_137841;
                
                acc_137831 = acc_tmp_139320;
            }
            zlzb_rhs_137829 = acc_137831;
            
            int64_t i32_res_137842 = sext_i32_i64(zlzb_rhs_137829);
            int64_t block_idx_137843 = sdiv64(write_iter_138311, i16_res_132763);
            bool x_137844 = sle64((int64_t) 0, block_idx_137843);
            bool y_137845 = slt64(block_idx_137843, dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777);
            bool bounds_check_137846 = x_137844 && y_137845;
            bool index_certs_137847;
            
            if (!bounds_check_137846) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) block_idx_137843, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-48\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:25:3-46\n   #9  ftsort.fut:24:1-25:46\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_137848 = sle64((int64_t) 0, i32_res_137842);
            bool y_137849 = slt64(i32_res_137842, (int64_t) 4);
            bool bounds_check_137850 = x_137848 && y_137849;
            bool index_certs_137851;
            
            if (!bounds_check_137850) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_137842, "] out of bounds for array of shape [", (long long) (int64_t) 4, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-53\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:270:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #7  ftbasics.fut:199:95-98\n   #8  ftsort.fut:25:3-46\n   #9  ftsort.fut:24:1-25:46\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            float index_concat_branch_138352;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138349 = sub64(write_iter_138311, arg_132769);
                float index_concat_138350 = ((float *) mem_138458)[index_concat_i_138349];
                
                index_concat_branch_138352 = index_concat_138350;
            } else {
                int64_t new_index_138374 = squot64(write_iter_138311, i16_res_132763);
                int64_t binop_y_138376 = i16_res_132763 * new_index_138374;
                int64_t new_index_138377 = write_iter_138311 - binop_y_138376;
                float index_concat_138351 = ((float *) mem_138482)[new_index_138374 * i16_res_132763 + new_index_138377];
                
                index_concat_branch_138352 = index_concat_138351;
            }
            
            int64_t index_concat_branch_138346;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138343 = sub64(write_iter_138311, arg_132769);
                int64_t index_concat_138344 = ((int64_t *) mem_138456)[index_concat_i_138343];
                
                index_concat_branch_138346 = index_concat_138344;
            } else {
                int64_t new_index_138370 = squot64(write_iter_138311, i16_res_132763);
                int64_t binop_y_138372 = i16_res_132763 * new_index_138370;
                int64_t new_index_138373 = write_iter_138311 - binop_y_138372;
                int64_t index_concat_138345 = ((int64_t *) mem_138485)[new_index_138370 * i16_res_132763 + new_index_138373];
                
                index_concat_branch_138346 = index_concat_138345;
            }
            
            int64_t binop_x_137852 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_132777 * i32_res_137842;
            int64_t new_index_137853 = block_idx_137843 + binop_x_137852;
            int64_t new_offset_137854 = ((int64_t *) mem_138598)[new_index_137853];
            bool index_concat_cmp_137855 = sle64(n_blocks_132767, block_idx_137843);
            int16_t index_concat_branch_137856;
            
            if (index_concat_cmp_137855) {
                int16_t index_concat_138040 = ((int16_t *) mem_138479)[i32_res_137842];
                
                index_concat_branch_137856 = index_concat_138040;
            } else {
                int16_t index_concat_137858 = ((int16_t *) mem_138491)[block_idx_137843 * (int64_t) 4 + i32_res_137842];
                
                index_concat_branch_137856 = index_concat_137858;
            }
            
            int64_t i16_res_137859 = sext_i16_i64(index_concat_branch_137856);
            int64_t zp_lhs_137860 = mul64(i16_res_132763, block_idx_137843);
            int64_t old_offset_137861 = add64(i16_res_137859, zp_lhs_137860);
            int64_t zp_lhs_137862 = sub64(write_iter_138311, old_offset_137861);
            int64_t idx_137863 = add64(new_offset_137854, zp_lhs_137862);
            
            if (sle64((int64_t) 0, idx_137863) && slt64(idx_137863, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770)) {
                ((float *) mem_138406)[idx_137863] = index_concat_branch_138352;
            }
            if (sle64((int64_t) 0, idx_137863) && slt64(idx_137863, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_132770)) {
                ((int64_t *) mem_138408)[idx_137863] = index_concat_branch_138346;
            }
        }
    }
    if (memblock_alloc(ctx, &mem_138624, bytes_138623, "mem_138624")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138626, bytes_138625, "mem_138626")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138323 = 0; i_138323 < n_75980; i_138323++) {
        int64_t eta_p_133092 = ((int64_t *) mem_138408)[i_138323];
        bool x_133093 = sle64((int64_t) 0, eta_p_133092);
        bool y_133094 = slt64(eta_p_133092, n_75980);
        bool bounds_check_133095 = x_133093 && y_133094;
        bool index_certs_133096;
        
        if (!bounds_check_133095) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_133092, "] out of bounds for array of shape [", (long long) n_75980, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:68:27-32\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:68:6-33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:280:49-51\n   #4  ftbasics.fut:199:95-98\n   #5  ftsort.fut:25:3-46\n   #6  ftsort.fut:24:1-25:46\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_133097 = ((int64_t *) ext_mem_138404.mem)[eta_p_133092];
        float lifted_lambda_res_133098 = ((float *) xs_mem_138403.mem)[eta_p_133092];
        
        ((int64_t *) mem_138624.mem)[i_138323] = lifted_lambda_res_133097;
        ((float *) mem_138626.mem)[i_138323] = lifted_lambda_res_133098;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138624, "mem_138624") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138626, "mem_138626") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139680, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139681, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138406);
        free(mem_138408);
        free(mem_138416);
        free(mem_138418);
        free(mem_138420);
        free(mem_138422);
        free(mem_138424);
        free(mem_138456);
        free(mem_138458);
        free(mem_138471);
        free(mem_138472);
        free(mem_138479);
        free(mem_138482);
        free(mem_138485);
        free(mem_138488);
        free(mem_138491);
        free(mem_138513);
        free(mem_138515);
        free(mem_138517);
        free(mem_138519);
        free(mem_138521);
        free(mem_138564);
        free(mem_138565);
        free(mem_138590);
        free(mem_138598);
        if (memblock_unref(ctx, &mem_138626, "mem_138626") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_int(struct futhark_context *ctx, struct memblock *mem_out_p_139707, struct memblock *mem_out_p_139708, struct memblock xs_mem_138403, int64_t n_70629, int64_t incr_70630, int16_t block_sizze_70631)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138406_cached_sizze_139709 = 0;
    unsigned char *mem_138406 = NULL;
    int64_t mem_138408_cached_sizze_139710 = 0;
    unsigned char *mem_138408 = NULL;
    int64_t mem_138416_cached_sizze_139711 = 0;
    unsigned char *mem_138416 = NULL;
    int64_t mem_138418_cached_sizze_139712 = 0;
    unsigned char *mem_138418 = NULL;
    int64_t mem_138420_cached_sizze_139713 = 0;
    unsigned char *mem_138420 = NULL;
    int64_t mem_138422_cached_sizze_139714 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139715 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138456_cached_sizze_139716 = 0;
    unsigned char *mem_138456 = NULL;
    int64_t mem_138458_cached_sizze_139717 = 0;
    unsigned char *mem_138458 = NULL;
    int64_t mem_138471_cached_sizze_139718 = 0;
    unsigned char *mem_138471 = NULL;
    int64_t mem_138472_cached_sizze_139719 = 0;
    unsigned char *mem_138472 = NULL;
    int64_t mem_138479_cached_sizze_139720 = 0;
    unsigned char *mem_138479 = NULL;
    int64_t mem_138482_cached_sizze_139721 = 0;
    unsigned char *mem_138482 = NULL;
    int64_t mem_138485_cached_sizze_139722 = 0;
    unsigned char *mem_138485 = NULL;
    int64_t mem_138488_cached_sizze_139723 = 0;
    unsigned char *mem_138488 = NULL;
    int64_t mem_138491_cached_sizze_139724 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138513_cached_sizze_139725 = 0;
    unsigned char *mem_138513 = NULL;
    int64_t mem_138515_cached_sizze_139726 = 0;
    unsigned char *mem_138515 = NULL;
    int64_t mem_138517_cached_sizze_139727 = 0;
    unsigned char *mem_138517 = NULL;
    int64_t mem_138519_cached_sizze_139728 = 0;
    unsigned char *mem_138519 = NULL;
    int64_t mem_138521_cached_sizze_139729 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138564_cached_sizze_139730 = 0;
    unsigned char *mem_138564 = NULL;
    int64_t mem_138565_cached_sizze_139731 = 0;
    unsigned char *mem_138565 = NULL;
    int64_t mem_138590_cached_sizze_139732 = 0;
    unsigned char *mem_138590 = NULL;
    int64_t mem_138598_cached_sizze_139733 = 0;
    unsigned char *mem_138598 = NULL;
    struct memblock mem_138626;
    
    mem_138626.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    bool cond_130509 = n_70629 == (int64_t) 0;
    int32_t iters_130510;
    
    if (cond_130509) {
        iters_130510 = 0;
    } else {
        iters_130510 = 16;
    }
    
    int64_t i16_res_130511 = sext_i16_i64(block_sizze_70631);
    bool zzero_130512 = i16_res_130511 == (int64_t) 0;
    bool nonzzero_130513 = !zzero_130512;
    bool nonzzero_cert_130514;
    
    if (!nonzzero_130513) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:222:20-27\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #4  ftbasics.fut:146:93-96\n   #5  ftsort.fut:19:3-44\n   #6  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t n_blocks_130515 = sdiv64(n_70629, i16_res_130511);
    int64_t rest_130516 = smod64(n_70629, i16_res_130511);
    int64_t arg_130517 = mul64(i16_res_130511, n_blocks_130515);
    int64_t dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518 = add64(rest_130516, arg_130517);
    bool dim_match_130519 = dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518 == n_70629;
    bool empty_or_match_cert_130520;
    
    if (!dim_match_130519) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) n_70629, "] cannot match shape of type `[", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "](i32, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:224:12-46\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #3  /prelude/functional.fut:9:44-45\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #5  ftbasics.fut:146:93-96\n   #6  ftsort.fut:19:3-44\n   #7  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138405 = (int64_t) 4 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    int64_t bytes_138407 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    bool loop_nonempty_130524 = slt32(0, iters_130510);
    int64_t dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 = add64((int64_t) 1, n_blocks_130515);
    int64_t dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526 = mul64((int64_t) 4, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
    bool empty_slice_130527 = arg_130517 == (int64_t) 0;
    int64_t m_130528 = sub64(arg_130517, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_130529 = sle64((int64_t) 0, m_130528);
    bool i_p_m_t_s_leq_w_130530 = slt64(m_130528, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool i_lte_j_130531 = sle64((int64_t) 0, arg_130517);
    bool y_130532 = zzero_leq_i_p_m_t_s_130529 && i_p_m_t_s_leq_w_130530;
    bool forwards_ok_130533 = i_lte_j_130531 && y_130532;
    bool ok_or_empty_130534 = empty_slice_130527 || forwards_ok_130533;
    bool loop_not_taken_130535 = !loop_nonempty_130524;
    bool protect_assert_disj_130536 = ok_or_empty_130534 || loop_not_taken_130535;
    bool index_certs_130537;
    
    if (!protect_assert_disj_130536) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) arg_130517, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "].", "-> #0  /prelude/array.fut:65:4-11\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:19:3-44\n   #8  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_130538 = rest_130516 == (int64_t) 0;
    int64_t m_130539 = sub64(rest_130516, (int64_t) 1);
    int64_t i_p_m_t_s_130540 = add64(arg_130517, m_130539);
    bool zzero_leq_i_p_m_t_s_130541 = sle64((int64_t) 0, i_p_m_t_s_130540);
    bool i_p_m_t_s_leq_w_130542 = slt64(i_p_m_t_s_130540, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool i_lte_j_130543 = sle64(arg_130517, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool y_130544 = zzero_leq_i_p_m_t_s_130541 && i_p_m_t_s_leq_w_130542;
    bool forwards_ok_130545 = i_lte_j_130543 && y_130544;
    bool ok_or_empty_130546 = empty_slice_130538 || forwards_ok_130545;
    bool protect_assert_disj_130547 = loop_not_taken_130535 || ok_or_empty_130546;
    bool index_certs_130548;
    
    if (!protect_assert_disj_130547) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_130517, ":", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "].", "-> #0  /prelude/array.fut:65:13-24\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:19:3-44\n   #8  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool binop_x_130549 = sle64((int64_t) 0, n_blocks_130515);
    bool binop_y_130550 = sle64((int64_t) 0, i16_res_130511);
    bool binop_y_130551 = binop_x_130549 && binop_y_130550;
    bool protect_assert_disj_130552 = loop_not_taken_130535 || binop_y_130551;
    bool dim_ok_cert_130553;
    
    if (!protect_assert_disj_130552) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Cannot unflatten array of shape [", (long long) arg_130517, "] to array of shape [", (long long) n_blocks_130515, "][", (long long) i16_res_130511, "]", "-> #0  /prelude/array.fut:184:3-30\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-168:21\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:19:3-44\n   #8  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_130554 = sub64(i16_res_130511, (int64_t) 1);
    bool x_130555 = sle64((int64_t) 0, tmp_130554);
    bool y_130556 = slt64(tmp_130554, i16_res_130511);
    bool bounds_check_130557 = x_130555 && y_130556;
    bool protect_assert_disj_130558 = zzero_130512 || bounds_check_130557;
    bool protect_assert_disj_130559 = loop_not_taken_130535 || protect_assert_disj_130558;
    bool index_certs_130560;
    
    if (!protect_assert_disj_130559) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_130554, "] out of bounds for array of shape [", (long long) i16_res_130511, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:19:3-44\n   #9  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool y_130562 = slt64((int64_t) 0, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526);
    bool protect_assert_disj_130563 = loop_not_taken_130535 || y_130562;
    bool index_certs_130564;
    
    if (!protect_assert_disj_130563) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:122:3-123:7\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:178:8-20\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:19:3-44\n   #9  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool protect_assert_disj_130566 = nonzzero_130513 || loop_not_taken_130535;
    bool nonzzero_cert_130567;
    
    if (!protect_assert_disj_130566) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:186:27-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:19:3-44\n   #10 ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_130568 = sle64((int64_t) 0, m_130539);
    bool y_130569 = slt64(m_130539, rest_130516);
    bool bounds_check_130570 = x_130568 && y_130569;
    bool protect_assert_disj_130571 = empty_slice_130538 || bounds_check_130570;
    bool protect_assert_disj_130572 = loop_not_taken_130535 || protect_assert_disj_130571;
    bool index_certs_130573;
    
    if (!protect_assert_disj_130572) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_130539, "] out of bounds for array of shape [", (long long) rest_130516, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:166:41-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:19:3-44\n   #9  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138415 = (int64_t) 2 * rest_130516;
    int64_t bytes_138455 = (int64_t) 8 * rest_130516;
    int64_t bytes_138457 = (int64_t) 4 * rest_130516;
    int64_t binop_x_138480 = (int64_t) 4 * n_blocks_130515;
    int64_t bytes_138481 = i16_res_130511 * binop_x_138480;
    int64_t binop_x_138483 = (int64_t) 8 * n_blocks_130515;
    int64_t bytes_138484 = i16_res_130511 * binop_x_138483;
    int64_t bytes_138487 = (int64_t) 32 * n_blocks_130515;
    int64_t bytes_138512 = (int64_t) 2 * i16_res_130511;
    int64_t bytes_138589 = (int64_t) 32 * dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525;
    bool dim_match_130805 = n_70629 == dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    bool empty_or_match_cert_130806;
    
    if (!dim_match_130805) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "] cannot match shape of type `[", (long long) n_70629, "](i32, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:225:6-11\n   #2  /prelude/functional.fut:26:41-42\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:226:6-227:50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:19:3-44\n   #9  ftsort.fut:18:1-19:44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138623 = (int64_t) 8 * n_70629;
    int64_t bytes_138625 = (int64_t) 4 * n_70629;
    
    if (futrts_indicesWithIncrement_9128(ctx, &ext_mem_138404, xs_mem_138403, n_70629, incr_70630) != 0) {
        err = 1;
        goto cleanup;
    }
    if (mem_138406_cached_sizze_139709 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138406, &mem_138406_cached_sizze_139709, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_4b(ctx, 1, (uint32_t *) mem_138406, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) xs_mem_138403.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518});
    if (mem_138408_cached_sizze_139710 < bytes_138407) {
        err = lexical_realloc(ctx, &mem_138408, &mem_138408_cached_sizze_139710, bytes_138407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139283 = 0; i_139283 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518; i_139283++) {
        int64_t x_139284 = (int64_t) 0 + i_139283 * (int64_t) 1;
        
        ((int64_t *) mem_138408)[i_139283] = x_139284;
    }
    if (mem_138416_cached_sizze_139711 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138416, &mem_138416_cached_sizze_139711, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138418_cached_sizze_139712 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138418, &mem_138418_cached_sizze_139712, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138420_cached_sizze_139713 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138420, &mem_138420_cached_sizze_139713, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138422_cached_sizze_139714 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139714, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138424_cached_sizze_139715 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139715, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138456_cached_sizze_139716 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138456, &mem_138456_cached_sizze_139716, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138458_cached_sizze_139717 < bytes_138457) {
        err = lexical_realloc(ctx, &mem_138458, &mem_138458_cached_sizze_139717, bytes_138457);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138471_cached_sizze_139718 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138471, &mem_138471_cached_sizze_139718, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138472_cached_sizze_139719 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138472, &mem_138472_cached_sizze_139719, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138479_cached_sizze_139720 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138479, &mem_138479_cached_sizze_139720, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138482_cached_sizze_139721 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138482, &mem_138482_cached_sizze_139721, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138485_cached_sizze_139722 < bytes_138484) {
        err = lexical_realloc(ctx, &mem_138485, &mem_138485_cached_sizze_139722, bytes_138484);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138488_cached_sizze_139723 < bytes_138487) {
        err = lexical_realloc(ctx, &mem_138488, &mem_138488_cached_sizze_139723, bytes_138487);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138491_cached_sizze_139724 < binop_x_138483) {
        err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139724, binop_x_138483);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138513_cached_sizze_139725 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138513, &mem_138513_cached_sizze_139725, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138515_cached_sizze_139726 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138515, &mem_138515_cached_sizze_139726, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138517_cached_sizze_139727 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138517, &mem_138517_cached_sizze_139727, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138519_cached_sizze_139728 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138519, &mem_138519_cached_sizze_139728, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138521_cached_sizze_139729 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139729, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138564_cached_sizze_139730 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138564, &mem_138564_cached_sizze_139730, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138565_cached_sizze_139731 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138565, &mem_138565_cached_sizze_139731, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138590_cached_sizze_139732 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138590, &mem_138590_cached_sizze_139732, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138598_cached_sizze_139733 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138598, &mem_138598_cached_sizze_139733, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_130576 = 0; i_130576 < iters_130510; i_130576++) {
        int32_t blocked_radix_sort_step_arg1_130579 = mul32(2, i_130576);
        int32_t get_bit_arg0_130584 = add32(1, blocked_radix_sort_step_arg1_130579);
        bool cond_130585 = get_bit_arg0_130584 == 31;
        bool cond_130586 = blocked_radix_sort_step_arg1_130579 == 31;
        int16_t discard_138226;
        int16_t discard_138227;
        int16_t discard_138228;
        int16_t discard_138229;
        int16_t scanacc_138211;
        int16_t scanacc_138212;
        int16_t scanacc_138213;
        int16_t scanacc_138214;
        
        scanacc_138211 = (int16_t) 0;
        scanacc_138212 = (int16_t) 0;
        scanacc_138213 = (int16_t) 0;
        scanacc_138214 = (int16_t) 0;
        for (int64_t i_138220 = 0; i_138220 < rest_130516; i_138220++) {
            int64_t slice_138369 = arg_130517 + i_138220;
            int32_t eta_p_137882 = ((int32_t *) mem_138406)[slice_138369];
            int32_t zgzg_res_137883 = ashr32(eta_p_137882, get_bit_arg0_130584);
            int32_t za_res_137884 = 1 & zgzg_res_137883;
            int32_t defunc_0_get_bit_res_137885;
            
            if (cond_130585) {
                int32_t defunc_0_get_bit_res_t_res_138000 = 1 ^ za_res_137884;
                
                defunc_0_get_bit_res_137885 = defunc_0_get_bit_res_t_res_138000;
            } else {
                defunc_0_get_bit_res_137885 = za_res_137884;
            }
            
            int32_t zp_lhs_137887 = mul32(2, defunc_0_get_bit_res_137885);
            int32_t zgzg_res_137888 = ashr32(eta_p_137882, blocked_radix_sort_step_arg1_130579);
            int32_t za_res_137889 = 1 & zgzg_res_137888;
            int32_t defunc_0_get_bit_res_137890;
            
            if (cond_130586) {
                int32_t defunc_0_get_bit_res_t_res_138001 = 1 ^ za_res_137889;
                
                defunc_0_get_bit_res_137890 = defunc_0_get_bit_res_t_res_138001;
            } else {
                defunc_0_get_bit_res_137890 = za_res_137889;
            }
            
            int32_t i32_arg0_137892 = add32(zp_lhs_137887, defunc_0_get_bit_res_137890);
            int16_t i32_res_137893 = sext_i32_i16(i32_arg0_137892);
            int16_t defunc_0_f_res_137895;
            int16_t defunc_0_f_res_137896;
            int16_t defunc_0_f_res_137897;
            int16_t defunc_0_f_res_137898;
            
            if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137895, &defunc_0_f_res_137896, &defunc_0_f_res_137897, &defunc_0_f_res_137898, i32_res_137893) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int16_t defunc_0_op_res_130623 = add16(defunc_0_f_res_137895, scanacc_138211);
            int16_t defunc_0_op_res_130624 = add16(defunc_0_f_res_137896, scanacc_138212);
            int16_t defunc_0_op_res_130625 = add16(defunc_0_f_res_137897, scanacc_138213);
            int16_t defunc_0_op_res_130626 = add16(defunc_0_f_res_137898, scanacc_138214);
            
            ((int16_t *) mem_138416)[i_138220] = defunc_0_op_res_130623;
            ((int16_t *) mem_138418)[i_138220] = defunc_0_op_res_130624;
            ((int16_t *) mem_138420)[i_138220] = defunc_0_op_res_130625;
            ((int16_t *) mem_138422)[i_138220] = defunc_0_op_res_130626;
            ((int16_t *) mem_138424)[i_138220] = i32_res_137893;
            
            int16_t scanacc_tmp_139287 = defunc_0_op_res_130623;
            int16_t scanacc_tmp_139288 = defunc_0_op_res_130624;
            int16_t scanacc_tmp_139289 = defunc_0_op_res_130625;
            int16_t scanacc_tmp_139290 = defunc_0_op_res_130626;
            
            scanacc_138211 = scanacc_tmp_139287;
            scanacc_138212 = scanacc_tmp_139288;
            scanacc_138213 = scanacc_tmp_139289;
            scanacc_138214 = scanacc_tmp_139290;
        }
        discard_138226 = scanacc_138211;
        discard_138227 = scanacc_138212;
        discard_138228 = scanacc_138213;
        discard_138229 = scanacc_138214;
        
        int16_t defunc_0_radix_sort_step_i16_res_130627;
        int16_t defunc_0_radix_sort_step_i16_res_130628;
        int16_t defunc_0_radix_sort_step_i16_res_130629;
        int16_t defunc_0_radix_sort_step_i16_res_130630;
        
        if (empty_slice_130538) {
            defunc_0_radix_sort_step_i16_res_130627 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130628 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130629 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130630 = (int16_t) 0;
        } else {
            int16_t last_res_130631 = ((int16_t *) mem_138416)[m_130539];
            int16_t last_res_130632 = ((int16_t *) mem_138418)[m_130539];
            int16_t last_res_130633 = ((int16_t *) mem_138420)[m_130539];
            int16_t last_res_130634 = ((int16_t *) mem_138422)[m_130539];
            
            defunc_0_radix_sort_step_i16_res_130627 = last_res_130631;
            defunc_0_radix_sort_step_i16_res_130628 = last_res_130632;
            defunc_0_radix_sort_step_i16_res_130629 = last_res_130633;
            defunc_0_radix_sort_step_i16_res_130630 = last_res_130634;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138456, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + (int64_t) 1 * arg_130517, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_130516});
        lmad_copy_4b(ctx, 1, (uint32_t *) mem_138458, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138406, (int64_t) 0 + (int64_t) 1 * arg_130517, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_130516});
        for (int64_t write_iter_138230 = 0; write_iter_138230 < rest_130516; write_iter_138230++) {
            int16_t write_iv_138233 = ((int16_t *) mem_138424)[write_iter_138230];
            int16_t write_iv_138234 = ((int16_t *) mem_138416)[write_iter_138230];
            int16_t write_iv_138235 = ((int16_t *) mem_138418)[write_iter_138230];
            int16_t write_iv_138236 = ((int16_t *) mem_138420)[write_iter_138230];
            int16_t write_iv_138237 = ((int16_t *) mem_138422)[write_iter_138230];
            int64_t slice_138368 = arg_130517 + write_iter_138230;
            int32_t write_iv_138238 = ((int32_t *) mem_138406)[slice_138368];
            int64_t write_iv_138239 = ((int64_t *) mem_138408)[slice_138368];
            int64_t defunc_0_f_res_137866;
            
            if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137866, defunc_0_radix_sort_step_i16_res_130627, defunc_0_radix_sort_step_i16_res_130628, defunc_0_radix_sort_step_i16_res_130629, write_iv_138233, write_iv_138234, write_iv_138235, write_iv_138236, write_iv_138237) != 0) {
                err = 1;
                goto cleanup;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137866) && slt64(defunc_0_f_res_137866, rest_130516)) {
                ((int32_t *) mem_138458)[defunc_0_f_res_137866] = write_iv_138238;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137866) && slt64(defunc_0_f_res_137866, rest_130516)) {
                ((int64_t *) mem_138456)[defunc_0_f_res_137866] = write_iv_138239;
            }
        }
        ((int16_t *) mem_138471)[(int64_t) 0] = defunc_0_radix_sort_step_i16_res_130627;
        ((int16_t *) mem_138471)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_130628;
        ((int16_t *) mem_138471)[(int64_t) 2] = defunc_0_radix_sort_step_i16_res_130629;
        ((int16_t *) mem_138471)[(int64_t) 3] = defunc_0_radix_sort_step_i16_res_130630;
        for (int64_t i_138244 = 0; i_138244 < (int64_t) 4; i_138244++) {
            int16_t eta_p_130651 = ((int16_t *) mem_138471)[i_138244];
            int64_t i16_res_130652 = sext_i16_i64(eta_p_130651);
            
            ((int64_t *) mem_138472)[i_138244] = i16_res_130652;
        }
        
        int16_t tmp_130653 = add16(defunc_0_radix_sort_step_i16_res_130627, defunc_0_radix_sort_step_i16_res_130628);
        int16_t tmp_130654 = add16(defunc_0_radix_sort_step_i16_res_130629, tmp_130653);
        
        ((int16_t *) mem_138479)[(int64_t) 0] = (int16_t) 0;
        ((int16_t *) mem_138479)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_130627;
        ((int16_t *) mem_138479)[(int64_t) 2] = tmp_130653;
        ((int16_t *) mem_138479)[(int64_t) 3] = tmp_130654;
        for (int64_t i_138294 = 0; i_138294 < n_blocks_130515; i_138294++) {
            lmad_copy_4b(ctx, 1, (uint32_t *) mem_138482, i_138294 * i16_res_130511, (int64_t []) {(int64_t) 1}, (uint32_t *) mem_138406, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_130511), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_130511});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138485, i_138294 * i16_res_130511, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_130511), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_130511});
            
            int64_t binop_x_138382 = i16_res_130511 * i_138294;
            int16_t discard_138266;
            int16_t discard_138267;
            int16_t discard_138268;
            int16_t discard_138269;
            int16_t scanacc_138251;
            int16_t scanacc_138252;
            int16_t scanacc_138253;
            int16_t scanacc_138254;
            
            scanacc_138251 = (int16_t) 0;
            scanacc_138252 = (int16_t) 0;
            scanacc_138253 = (int16_t) 0;
            scanacc_138254 = (int16_t) 0;
            for (int64_t i_138260 = 0; i_138260 < i16_res_130511; i_138260++) {
                int64_t new_index_138383 = i_138260 + binop_x_138382;
                int32_t eta_p_137929 = ((int32_t *) mem_138406)[new_index_138383];
                int32_t zgzg_res_137930 = ashr32(eta_p_137929, get_bit_arg0_130584);
                int32_t za_res_137931 = 1 & zgzg_res_137930;
                int32_t defunc_0_get_bit_res_137932;
                
                if (cond_130585) {
                    int32_t defunc_0_get_bit_res_t_res_138002 = 1 ^ za_res_137931;
                    
                    defunc_0_get_bit_res_137932 = defunc_0_get_bit_res_t_res_138002;
                } else {
                    defunc_0_get_bit_res_137932 = za_res_137931;
                }
                
                int32_t zp_lhs_137934 = mul32(2, defunc_0_get_bit_res_137932);
                int32_t zgzg_res_137935 = ashr32(eta_p_137929, blocked_radix_sort_step_arg1_130579);
                int32_t za_res_137936 = 1 & zgzg_res_137935;
                int32_t defunc_0_get_bit_res_137937;
                
                if (cond_130586) {
                    int32_t defunc_0_get_bit_res_t_res_138003 = 1 ^ za_res_137936;
                    
                    defunc_0_get_bit_res_137937 = defunc_0_get_bit_res_t_res_138003;
                } else {
                    defunc_0_get_bit_res_137937 = za_res_137936;
                }
                
                int32_t i32_arg0_137939 = add32(zp_lhs_137934, defunc_0_get_bit_res_137937);
                int16_t i32_res_137940 = sext_i32_i16(i32_arg0_137939);
                int16_t defunc_0_f_res_137942;
                int16_t defunc_0_f_res_137943;
                int16_t defunc_0_f_res_137944;
                int16_t defunc_0_f_res_137945;
                
                if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137942, &defunc_0_f_res_137943, &defunc_0_f_res_137944, &defunc_0_f_res_137945, i32_res_137940) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int16_t defunc_0_op_res_130704 = add16(defunc_0_f_res_137942, scanacc_138251);
                int16_t defunc_0_op_res_130705 = add16(defunc_0_f_res_137943, scanacc_138252);
                int16_t defunc_0_op_res_130706 = add16(defunc_0_f_res_137944, scanacc_138253);
                int16_t defunc_0_op_res_130707 = add16(defunc_0_f_res_137945, scanacc_138254);
                
                ((int16_t *) mem_138513)[i_138260] = defunc_0_op_res_130704;
                ((int16_t *) mem_138515)[i_138260] = defunc_0_op_res_130705;
                ((int16_t *) mem_138517)[i_138260] = defunc_0_op_res_130706;
                ((int16_t *) mem_138519)[i_138260] = defunc_0_op_res_130707;
                ((int16_t *) mem_138521)[i_138260] = i32_res_137940;
                
                int16_t scanacc_tmp_139303 = defunc_0_op_res_130704;
                int16_t scanacc_tmp_139304 = defunc_0_op_res_130705;
                int16_t scanacc_tmp_139305 = defunc_0_op_res_130706;
                int16_t scanacc_tmp_139306 = defunc_0_op_res_130707;
                
                scanacc_138251 = scanacc_tmp_139303;
                scanacc_138252 = scanacc_tmp_139304;
                scanacc_138253 = scanacc_tmp_139305;
                scanacc_138254 = scanacc_tmp_139306;
            }
            discard_138266 = scanacc_138251;
            discard_138267 = scanacc_138252;
            discard_138268 = scanacc_138253;
            discard_138269 = scanacc_138254;
            
            int16_t defunc_0_f_res_130708;
            int16_t defunc_0_f_res_130709;
            int16_t defunc_0_f_res_130710;
            int16_t defunc_0_f_res_130711;
            
            if (zzero_130512) {
                defunc_0_f_res_130708 = (int16_t) 0;
                defunc_0_f_res_130709 = (int16_t) 0;
                defunc_0_f_res_130710 = (int16_t) 0;
                defunc_0_f_res_130711 = (int16_t) 0;
            } else {
                int16_t last_res_130712 = ((int16_t *) mem_138513)[tmp_130554];
                int16_t last_res_130713 = ((int16_t *) mem_138515)[tmp_130554];
                int16_t last_res_130714 = ((int16_t *) mem_138517)[tmp_130554];
                int16_t last_res_130715 = ((int16_t *) mem_138519)[tmp_130554];
                
                defunc_0_f_res_130708 = last_res_130712;
                defunc_0_f_res_130709 = last_res_130713;
                defunc_0_f_res_130710 = last_res_130714;
                defunc_0_f_res_130711 = last_res_130715;
            }
            for (int64_t write_iter_138270 = 0; write_iter_138270 < i16_res_130511; write_iter_138270++) {
                int16_t write_iv_138273 = ((int16_t *) mem_138521)[write_iter_138270];
                int16_t write_iv_138274 = ((int16_t *) mem_138513)[write_iter_138270];
                int16_t write_iv_138275 = ((int16_t *) mem_138515)[write_iter_138270];
                int16_t write_iv_138276 = ((int16_t *) mem_138517)[write_iter_138270];
                int16_t write_iv_138277 = ((int16_t *) mem_138519)[write_iter_138270];
                int64_t new_index_138379 = write_iter_138270 + binop_x_138382;
                int32_t write_iv_138278 = ((int32_t *) mem_138406)[new_index_138379];
                int64_t write_iv_138279 = ((int64_t *) mem_138408)[new_index_138379];
                int64_t defunc_0_f_res_137913;
                
                if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137913, defunc_0_f_res_130708, defunc_0_f_res_130709, defunc_0_f_res_130710, write_iv_138273, write_iv_138274, write_iv_138275, write_iv_138276, write_iv_138277) != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137913) && slt64(defunc_0_f_res_137913, i16_res_130511)) {
                    ((int32_t *) mem_138482)[i_138294 * i16_res_130511 + defunc_0_f_res_137913] = write_iv_138278;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137913) && slt64(defunc_0_f_res_137913, i16_res_130511)) {
                    ((int64_t *) mem_138485)[i_138294 * i16_res_130511 + defunc_0_f_res_137913] = write_iv_138279;
                }
            }
            ((int16_t *) mem_138564)[(int64_t) 0] = defunc_0_f_res_130708;
            ((int16_t *) mem_138564)[(int64_t) 1] = defunc_0_f_res_130709;
            ((int16_t *) mem_138564)[(int64_t) 2] = defunc_0_f_res_130710;
            ((int16_t *) mem_138564)[(int64_t) 3] = defunc_0_f_res_130711;
            for (int64_t i_138284 = 0; i_138284 < (int64_t) 4; i_138284++) {
                int16_t eta_p_130730 = ((int16_t *) mem_138564)[i_138284];
                int64_t i16_res_130731 = sext_i16_i64(eta_p_130730);
                
                ((int64_t *) mem_138565)[i_138284] = i16_res_130731;
            }
            
            int16_t tmp_130732 = add16(defunc_0_f_res_130708, defunc_0_f_res_130709);
            int16_t tmp_130733 = add16(defunc_0_f_res_130710, tmp_130732);
            
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4] = (int16_t) 0;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 1] = defunc_0_f_res_130708;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 2] = tmp_130732;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 3] = tmp_130733;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138488, i_138294 * (int64_t) 4, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138565, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 4});
        }
        
        int64_t discard_138306;
        int64_t scanacc_138302 = (int64_t) 0;
        
        for (int64_t i_138304 = 0; i_138304 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526; i_138304++) {
            int64_t new_index_138357 = squot64(i_138304, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
            int64_t binop_y_138359 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 * new_index_138357;
            int64_t new_index_138360 = i_138304 - binop_y_138359;
            bool index_concat_cmp_138362 = sle64(n_blocks_130515, new_index_138360);
            int64_t index_concat_branch_138366;
            
            if (index_concat_cmp_138362) {
                int64_t index_concat_138364 = ((int64_t *) mem_138472)[new_index_138357];
                
                index_concat_branch_138366 = index_concat_138364;
            } else {
                int64_t index_concat_138365 = ((int64_t *) mem_138488)[new_index_138360 * (int64_t) 4 + new_index_138357];
                
                index_concat_branch_138366 = index_concat_138365;
            }
            
            int64_t defunc_0_op_res_130745 = add64(scanacc_138302, index_concat_branch_138366);
            
            ((int64_t *) mem_138590)[i_138304] = defunc_0_op_res_130745;
            
            int64_t scanacc_tmp_139315 = defunc_0_op_res_130745;
            
            scanacc_138302 = scanacc_tmp_139315;
        }
        discard_138306 = scanacc_138302;
        for (int64_t i_138309 = 0; i_138309 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526; i_138309++) {
            int64_t zv_lhs_130748 = add64((int64_t) -1, i_138309);
            int64_t tmp_130749 = smod64(zv_lhs_130748, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526);
            int64_t lifted_lambda_res_130750 = ((int64_t *) mem_138590)[tmp_130749];
            
            ((int64_t *) mem_138598)[i_138309] = lifted_lambda_res_130750;
        }
        ((int64_t *) mem_138598)[(int64_t) 0] = (int64_t) 0;
        for (int64_t write_iter_138311 = 0; write_iter_138311 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518; write_iter_138311++) {
            bool index_concat_cmp_138348 = sle64(arg_130517, write_iter_138311);
            int32_t index_concat_branch_137817;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138012 = sub64(write_iter_138311, arg_130517);
                int32_t index_concat_138013 = ((int32_t *) mem_138458)[index_concat_i_138012];
                
                index_concat_branch_137817 = index_concat_138013;
            } else {
                int64_t new_index_137820 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_137821 = i16_res_130511 * new_index_137820;
                int64_t new_index_137822 = write_iter_138311 - binop_y_137821;
                int32_t index_concat_137823 = ((int32_t *) mem_138482)[new_index_137820 * i16_res_130511 + new_index_137822];
                
                index_concat_branch_137817 = index_concat_137823;
            }
            
            int32_t zlzb_rhs_137824;
            int32_t acc_137826 = 0;
            
            for (int32_t i_137825 = 0; i_137825 < 2; i_137825++) {
                int32_t get_bit_arg0_137827 = add32(blocked_radix_sort_step_arg1_130579, i_137825);
                int32_t zgzg_res_137828 = ashr32(index_concat_branch_137817, get_bit_arg0_137827);
                int32_t za_res_137829 = 1 & zgzg_res_137828;
                bool cond_137830 = get_bit_arg0_137827 == 31;
                int32_t defunc_0_get_bit_res_137831;
                
                if (cond_137830) {
                    int32_t defunc_0_get_bit_res_t_res_138014 = 1 ^ za_res_137829;
                    
                    defunc_0_get_bit_res_137831 = defunc_0_get_bit_res_t_res_138014;
                } else {
                    defunc_0_get_bit_res_137831 = za_res_137829;
                }
                
                int32_t zp_rhs_137833 = shl32(defunc_0_get_bit_res_137831, i_137825);
                int32_t loopres_137834 = add32(acc_137826, zp_rhs_137833);
                int32_t acc_tmp_139320 = loopres_137834;
                
                acc_137826 = acc_tmp_139320;
            }
            zlzb_rhs_137824 = acc_137826;
            
            int64_t i32_res_137835 = sext_i32_i64(zlzb_rhs_137824);
            int64_t block_idx_137836 = sdiv64(write_iter_138311, i16_res_130511);
            bool x_137837 = sle64((int64_t) 0, block_idx_137836);
            bool y_137838 = slt64(block_idx_137836, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
            bool bounds_check_137839 = x_137837 && y_137838;
            bool index_certs_137840;
            
            if (!bounds_check_137839) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) block_idx_137836, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-48\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:19:3-44\n   #10 ftsort.fut:18:1-19:44\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_137841 = sle64((int64_t) 0, i32_res_137835);
            bool y_137842 = slt64(i32_res_137835, (int64_t) 4);
            bool bounds_check_137843 = x_137841 && y_137842;
            bool index_certs_137844;
            
            if (!bounds_check_137843) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_137835, "] out of bounds for array of shape [", (long long) (int64_t) 4, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-53\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:19:3-44\n   #10 ftsort.fut:18:1-19:44\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t index_concat_branch_138352;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138349 = sub64(write_iter_138311, arg_130517);
                int32_t index_concat_138350 = ((int32_t *) mem_138458)[index_concat_i_138349];
                
                index_concat_branch_138352 = index_concat_138350;
            } else {
                int64_t new_index_138374 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_138376 = i16_res_130511 * new_index_138374;
                int64_t new_index_138377 = write_iter_138311 - binop_y_138376;
                int32_t index_concat_138351 = ((int32_t *) mem_138482)[new_index_138374 * i16_res_130511 + new_index_138377];
                
                index_concat_branch_138352 = index_concat_138351;
            }
            
            int64_t index_concat_branch_138346;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138343 = sub64(write_iter_138311, arg_130517);
                int64_t index_concat_138344 = ((int64_t *) mem_138456)[index_concat_i_138343];
                
                index_concat_branch_138346 = index_concat_138344;
            } else {
                int64_t new_index_138370 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_138372 = i16_res_130511 * new_index_138370;
                int64_t new_index_138373 = write_iter_138311 - binop_y_138372;
                int64_t index_concat_138345 = ((int64_t *) mem_138485)[new_index_138370 * i16_res_130511 + new_index_138373];
                
                index_concat_branch_138346 = index_concat_138345;
            }
            
            int64_t binop_x_137845 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 * i32_res_137835;
            int64_t new_index_137846 = block_idx_137836 + binop_x_137845;
            int64_t new_offset_137847 = ((int64_t *) mem_138598)[new_index_137846];
            bool index_concat_cmp_137848 = sle64(n_blocks_130515, block_idx_137836);
            int16_t index_concat_branch_137849;
            
            if (index_concat_cmp_137848) {
                int16_t index_concat_138015 = ((int16_t *) mem_138479)[i32_res_137835];
                
                index_concat_branch_137849 = index_concat_138015;
            } else {
                int16_t index_concat_137851 = ((int16_t *) mem_138491)[block_idx_137836 * (int64_t) 4 + i32_res_137835];
                
                index_concat_branch_137849 = index_concat_137851;
            }
            
            int64_t i16_res_137852 = sext_i16_i64(index_concat_branch_137849);
            int64_t zp_lhs_137853 = mul64(i16_res_130511, block_idx_137836);
            int64_t old_offset_137854 = add64(i16_res_137852, zp_lhs_137853);
            int64_t zp_lhs_137855 = sub64(write_iter_138311, old_offset_137854);
            int64_t idx_137856 = add64(new_offset_137847, zp_lhs_137855);
            
            if (sle64((int64_t) 0, idx_137856) && slt64(idx_137856, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518)) {
                ((int32_t *) mem_138406)[idx_137856] = index_concat_branch_138352;
            }
            if (sle64((int64_t) 0, idx_137856) && slt64(idx_137856, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518)) {
                ((int64_t *) mem_138408)[idx_137856] = index_concat_branch_138346;
            }
        }
    }
    if (memblock_alloc(ctx, &mem_138624, bytes_138623, "mem_138624")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138626, bytes_138625, "mem_138626")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138323 = 0; i_138323 < n_70629; i_138323++) {
        int64_t eta_p_130810 = ((int64_t *) mem_138408)[i_138323];
        bool x_130811 = sle64((int64_t) 0, eta_p_130810);
        bool y_130812 = slt64(eta_p_130810, n_70629);
        bool bounds_check_130813 = x_130811 && y_130812;
        bool index_certs_130814;
        
        if (!bounds_check_130813) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130810, "] out of bounds for array of shape [", (long long) n_70629, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:68:27-32\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:68:6-33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #4  ftbasics.fut:146:93-96\n   #5  ftsort.fut:19:3-44\n   #6  ftsort.fut:18:1-19:44\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130815 = ((int64_t *) ext_mem_138404.mem)[eta_p_130810];
        int32_t lifted_lambda_res_130816 = ((int32_t *) xs_mem_138403.mem)[eta_p_130810];
        
        ((int64_t *) mem_138624.mem)[i_138323] = lifted_lambda_res_130815;
        ((int32_t *) mem_138626.mem)[i_138323] = lifted_lambda_res_130816;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138624, "mem_138624") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138626, "mem_138626") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139707, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139708, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138406);
        free(mem_138408);
        free(mem_138416);
        free(mem_138418);
        free(mem_138420);
        free(mem_138422);
        free(mem_138424);
        free(mem_138456);
        free(mem_138458);
        free(mem_138471);
        free(mem_138472);
        free(mem_138479);
        free(mem_138482);
        free(mem_138485);
        free(mem_138488);
        free(mem_138491);
        free(mem_138513);
        free(mem_138515);
        free(mem_138517);
        free(mem_138519);
        free(mem_138521);
        free(mem_138564);
        free(mem_138565);
        free(mem_138590);
        free(mem_138598);
        if (memblock_unref(ctx, &mem_138626, "mem_138626") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_long(struct futhark_context *ctx, struct memblock *mem_out_p_139734, struct memblock *mem_out_p_139735, struct memblock xs_mem_138403, int64_t n_73229, int64_t incr_73230, int16_t block_sizze_73231)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138406_cached_sizze_139736 = 0;
    unsigned char *mem_138406 = NULL;
    int64_t mem_138408_cached_sizze_139737 = 0;
    unsigned char *mem_138408 = NULL;
    int64_t mem_138416_cached_sizze_139738 = 0;
    unsigned char *mem_138416 = NULL;
    int64_t mem_138418_cached_sizze_139739 = 0;
    unsigned char *mem_138418 = NULL;
    int64_t mem_138420_cached_sizze_139740 = 0;
    unsigned char *mem_138420 = NULL;
    int64_t mem_138422_cached_sizze_139741 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139742 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138456_cached_sizze_139743 = 0;
    unsigned char *mem_138456 = NULL;
    int64_t mem_138458_cached_sizze_139744 = 0;
    unsigned char *mem_138458 = NULL;
    int64_t mem_138471_cached_sizze_139745 = 0;
    unsigned char *mem_138471 = NULL;
    int64_t mem_138472_cached_sizze_139746 = 0;
    unsigned char *mem_138472 = NULL;
    int64_t mem_138479_cached_sizze_139747 = 0;
    unsigned char *mem_138479 = NULL;
    int64_t mem_138482_cached_sizze_139748 = 0;
    unsigned char *mem_138482 = NULL;
    int64_t mem_138485_cached_sizze_139749 = 0;
    unsigned char *mem_138485 = NULL;
    int64_t mem_138488_cached_sizze_139750 = 0;
    unsigned char *mem_138488 = NULL;
    int64_t mem_138491_cached_sizze_139751 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138513_cached_sizze_139752 = 0;
    unsigned char *mem_138513 = NULL;
    int64_t mem_138515_cached_sizze_139753 = 0;
    unsigned char *mem_138515 = NULL;
    int64_t mem_138517_cached_sizze_139754 = 0;
    unsigned char *mem_138517 = NULL;
    int64_t mem_138519_cached_sizze_139755 = 0;
    unsigned char *mem_138519 = NULL;
    int64_t mem_138521_cached_sizze_139756 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138564_cached_sizze_139757 = 0;
    unsigned char *mem_138564 = NULL;
    int64_t mem_138565_cached_sizze_139758 = 0;
    unsigned char *mem_138565 = NULL;
    int64_t mem_138590_cached_sizze_139759 = 0;
    unsigned char *mem_138590 = NULL;
    int64_t mem_138598_cached_sizze_139760 = 0;
    unsigned char *mem_138598 = NULL;
    struct memblock mem_138626;
    
    mem_138626.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    bool cond_130509 = n_73229 == (int64_t) 0;
    int32_t iters_130510;
    
    if (cond_130509) {
        iters_130510 = 0;
    } else {
        iters_130510 = 32;
    }
    
    int64_t i16_res_130511 = sext_i16_i64(block_sizze_73231);
    bool zzero_130512 = i16_res_130511 == (int64_t) 0;
    bool nonzzero_130513 = !zzero_130512;
    bool nonzzero_cert_130514;
    
    if (!nonzzero_130513) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:222:20-27\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #4  ftbasics.fut:146:93-96\n   #5  ftsort.fut:22:3-45\n   #6  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t n_blocks_130515 = sdiv64(n_73229, i16_res_130511);
    int64_t rest_130516 = smod64(n_73229, i16_res_130511);
    int64_t arg_130517 = mul64(i16_res_130511, n_blocks_130515);
    int64_t dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518 = add64(rest_130516, arg_130517);
    bool dim_match_130519 = dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518 == n_73229;
    bool empty_or_match_cert_130520;
    
    if (!dim_match_130519) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) n_73229, "] cannot match shape of type `[", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "](i64, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:224:12-46\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #3  /prelude/functional.fut:9:44-45\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #5  ftbasics.fut:146:93-96\n   #6  ftsort.fut:22:3-45\n   #7  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138405 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    bool loop_nonempty_130524 = slt32(0, iters_130510);
    int64_t dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 = add64((int64_t) 1, n_blocks_130515);
    int64_t dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526 = mul64((int64_t) 4, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
    bool empty_slice_130527 = arg_130517 == (int64_t) 0;
    int64_t m_130528 = sub64(arg_130517, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_130529 = sle64((int64_t) 0, m_130528);
    bool i_p_m_t_s_leq_w_130530 = slt64(m_130528, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool i_lte_j_130531 = sle64((int64_t) 0, arg_130517);
    bool y_130532 = zzero_leq_i_p_m_t_s_130529 && i_p_m_t_s_leq_w_130530;
    bool forwards_ok_130533 = i_lte_j_130531 && y_130532;
    bool ok_or_empty_130534 = empty_slice_130527 || forwards_ok_130533;
    bool loop_not_taken_130535 = !loop_nonempty_130524;
    bool protect_assert_disj_130536 = ok_or_empty_130534 || loop_not_taken_130535;
    bool index_certs_130537;
    
    if (!protect_assert_disj_130536) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) arg_130517, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "].", "-> #0  /prelude/array.fut:65:4-11\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:22:3-45\n   #8  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_130538 = rest_130516 == (int64_t) 0;
    int64_t m_130539 = sub64(rest_130516, (int64_t) 1);
    int64_t i_p_m_t_s_130540 = add64(arg_130517, m_130539);
    bool zzero_leq_i_p_m_t_s_130541 = sle64((int64_t) 0, i_p_m_t_s_130540);
    bool i_p_m_t_s_leq_w_130542 = slt64(i_p_m_t_s_130540, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool i_lte_j_130543 = sle64(arg_130517, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool y_130544 = zzero_leq_i_p_m_t_s_130541 && i_p_m_t_s_leq_w_130542;
    bool forwards_ok_130545 = i_lte_j_130543 && y_130544;
    bool ok_or_empty_130546 = empty_slice_130538 || forwards_ok_130545;
    bool protect_assert_disj_130547 = loop_not_taken_130535 || ok_or_empty_130546;
    bool index_certs_130548;
    
    if (!protect_assert_disj_130547) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_130517, ":", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "].", "-> #0  /prelude/array.fut:65:13-24\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:22:3-45\n   #8  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool binop_x_130549 = sle64((int64_t) 0, n_blocks_130515);
    bool binop_y_130550 = sle64((int64_t) 0, i16_res_130511);
    bool binop_y_130551 = binop_x_130549 && binop_y_130550;
    bool protect_assert_disj_130552 = loop_not_taken_130535 || binop_y_130551;
    bool dim_ok_cert_130553;
    
    if (!protect_assert_disj_130552) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Cannot unflatten array of shape [", (long long) arg_130517, "] to array of shape [", (long long) n_blocks_130515, "][", (long long) i16_res_130511, "]", "-> #0  /prelude/array.fut:184:3-30\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-168:21\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:22:3-45\n   #8  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_130554 = sub64(i16_res_130511, (int64_t) 1);
    bool x_130555 = sle64((int64_t) 0, tmp_130554);
    bool y_130556 = slt64(tmp_130554, i16_res_130511);
    bool bounds_check_130557 = x_130555 && y_130556;
    bool protect_assert_disj_130558 = zzero_130512 || bounds_check_130557;
    bool protect_assert_disj_130559 = loop_not_taken_130535 || protect_assert_disj_130558;
    bool index_certs_130560;
    
    if (!protect_assert_disj_130559) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_130554, "] out of bounds for array of shape [", (long long) i16_res_130511, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:22:3-45\n   #9  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool y_130562 = slt64((int64_t) 0, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526);
    bool protect_assert_disj_130563 = loop_not_taken_130535 || y_130562;
    bool index_certs_130564;
    
    if (!protect_assert_disj_130563) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:122:3-123:7\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:178:8-20\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:22:3-45\n   #9  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool protect_assert_disj_130566 = nonzzero_130513 || loop_not_taken_130535;
    bool nonzzero_cert_130567;
    
    if (!protect_assert_disj_130566) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:186:27-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:22:3-45\n   #10 ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_130568 = sle64((int64_t) 0, m_130539);
    bool y_130569 = slt64(m_130539, rest_130516);
    bool bounds_check_130570 = x_130568 && y_130569;
    bool protect_assert_disj_130571 = empty_slice_130538 || bounds_check_130570;
    bool protect_assert_disj_130572 = loop_not_taken_130535 || protect_assert_disj_130571;
    bool index_certs_130573;
    
    if (!protect_assert_disj_130572) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_130539, "] out of bounds for array of shape [", (long long) rest_130516, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:166:41-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:22:3-45\n   #9  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138415 = (int64_t) 2 * rest_130516;
    int64_t bytes_138455 = (int64_t) 8 * rest_130516;
    int64_t binop_x_138480 = (int64_t) 8 * n_blocks_130515;
    int64_t bytes_138481 = i16_res_130511 * binop_x_138480;
    int64_t bytes_138487 = (int64_t) 32 * n_blocks_130515;
    int64_t bytes_138512 = (int64_t) 2 * i16_res_130511;
    int64_t bytes_138589 = (int64_t) 32 * dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525;
    bool dim_match_130805 = n_73229 == dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    bool empty_or_match_cert_130806;
    
    if (!dim_match_130805) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "] cannot match shape of type `[", (long long) n_73229, "](i64, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:225:6-11\n   #2  /prelude/functional.fut:26:41-42\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:226:6-227:50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:22:3-45\n   #9  ftsort.fut:21:1-22:45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138623 = (int64_t) 8 * n_73229;
    
    if (futrts_indicesWithIncrement_9238(ctx, &ext_mem_138404, xs_mem_138403, n_73229, incr_73230) != 0) {
        err = 1;
        goto cleanup;
    }
    if (mem_138406_cached_sizze_139736 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138406, &mem_138406_cached_sizze_139736, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_8b(ctx, 1, (uint64_t *) mem_138406, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) xs_mem_138403.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518});
    if (mem_138408_cached_sizze_139737 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138408, &mem_138408_cached_sizze_139737, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139283 = 0; i_139283 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518; i_139283++) {
        int64_t x_139284 = (int64_t) 0 + i_139283 * (int64_t) 1;
        
        ((int64_t *) mem_138408)[i_139283] = x_139284;
    }
    if (mem_138416_cached_sizze_139738 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138416, &mem_138416_cached_sizze_139738, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138418_cached_sizze_139739 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138418, &mem_138418_cached_sizze_139739, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138420_cached_sizze_139740 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138420, &mem_138420_cached_sizze_139740, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138422_cached_sizze_139741 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139741, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138424_cached_sizze_139742 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139742, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138456_cached_sizze_139743 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138456, &mem_138456_cached_sizze_139743, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138458_cached_sizze_139744 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138458, &mem_138458_cached_sizze_139744, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138471_cached_sizze_139745 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138471, &mem_138471_cached_sizze_139745, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138472_cached_sizze_139746 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138472, &mem_138472_cached_sizze_139746, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138479_cached_sizze_139747 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138479, &mem_138479_cached_sizze_139747, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138482_cached_sizze_139748 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138482, &mem_138482_cached_sizze_139748, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138485_cached_sizze_139749 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138485, &mem_138485_cached_sizze_139749, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138488_cached_sizze_139750 < bytes_138487) {
        err = lexical_realloc(ctx, &mem_138488, &mem_138488_cached_sizze_139750, bytes_138487);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138491_cached_sizze_139751 < binop_x_138480) {
        err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139751, binop_x_138480);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138513_cached_sizze_139752 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138513, &mem_138513_cached_sizze_139752, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138515_cached_sizze_139753 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138515, &mem_138515_cached_sizze_139753, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138517_cached_sizze_139754 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138517, &mem_138517_cached_sizze_139754, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138519_cached_sizze_139755 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138519, &mem_138519_cached_sizze_139755, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138521_cached_sizze_139756 < bytes_138512) {
        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139756, bytes_138512);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138564_cached_sizze_139757 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138564, &mem_138564_cached_sizze_139757, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138565_cached_sizze_139758 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138565, &mem_138565_cached_sizze_139758, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138590_cached_sizze_139759 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138590, &mem_138590_cached_sizze_139759, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138598_cached_sizze_139760 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138598, &mem_138598_cached_sizze_139760, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_130576 = 0; i_130576 < iters_130510; i_130576++) {
        int32_t blocked_radix_sort_step_arg1_130579 = mul32(2, i_130576);
        int32_t get_bit_arg0_130584 = add32(1, blocked_radix_sort_step_arg1_130579);
        bool cond_130585 = get_bit_arg0_130584 == 63;
        bool cond_130586 = blocked_radix_sort_step_arg1_130579 == 63;
        int16_t discard_138226;
        int16_t discard_138227;
        int16_t discard_138228;
        int16_t discard_138229;
        int16_t scanacc_138211;
        int16_t scanacc_138212;
        int16_t scanacc_138213;
        int16_t scanacc_138214;
        
        scanacc_138211 = (int16_t) 0;
        scanacc_138212 = (int16_t) 0;
        scanacc_138213 = (int16_t) 0;
        scanacc_138214 = (int16_t) 0;
        for (int64_t i_138220 = 0; i_138220 < rest_130516; i_138220++) {
            int64_t slice_138369 = arg_130517 + i_138220;
            int64_t eta_p_137881 = ((int64_t *) mem_138406)[slice_138369];
            int32_t defunc_0_get_bit_res_137882;
            
            if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_137882, get_bit_arg0_130584, eta_p_137881) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t defunc_0_get_bit_res_137883;
            
            if (cond_130585) {
                int32_t defunc_0_get_bit_res_t_res_137995 = 1 ^ defunc_0_get_bit_res_137882;
                
                defunc_0_get_bit_res_137883 = defunc_0_get_bit_res_t_res_137995;
            } else {
                defunc_0_get_bit_res_137883 = defunc_0_get_bit_res_137882;
            }
            
            int32_t zp_lhs_137885 = mul32(2, defunc_0_get_bit_res_137883);
            int32_t defunc_0_get_bit_res_137886;
            
            if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_137886, blocked_radix_sort_step_arg1_130579, eta_p_137881) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t defunc_0_get_bit_res_137887;
            
            if (cond_130586) {
                int32_t defunc_0_get_bit_res_t_res_137996 = 1 ^ defunc_0_get_bit_res_137886;
                
                defunc_0_get_bit_res_137887 = defunc_0_get_bit_res_t_res_137996;
            } else {
                defunc_0_get_bit_res_137887 = defunc_0_get_bit_res_137886;
            }
            
            int32_t i32_arg0_137889 = add32(zp_lhs_137885, defunc_0_get_bit_res_137887);
            int16_t i32_res_137890 = sext_i32_i16(i32_arg0_137889);
            int16_t defunc_0_f_res_137892;
            int16_t defunc_0_f_res_137893;
            int16_t defunc_0_f_res_137894;
            int16_t defunc_0_f_res_137895;
            
            if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137892, &defunc_0_f_res_137893, &defunc_0_f_res_137894, &defunc_0_f_res_137895, i32_res_137890) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int16_t defunc_0_op_res_130623 = add16(defunc_0_f_res_137892, scanacc_138211);
            int16_t defunc_0_op_res_130624 = add16(defunc_0_f_res_137893, scanacc_138212);
            int16_t defunc_0_op_res_130625 = add16(defunc_0_f_res_137894, scanacc_138213);
            int16_t defunc_0_op_res_130626 = add16(defunc_0_f_res_137895, scanacc_138214);
            
            ((int16_t *) mem_138416)[i_138220] = defunc_0_op_res_130623;
            ((int16_t *) mem_138418)[i_138220] = defunc_0_op_res_130624;
            ((int16_t *) mem_138420)[i_138220] = defunc_0_op_res_130625;
            ((int16_t *) mem_138422)[i_138220] = defunc_0_op_res_130626;
            ((int16_t *) mem_138424)[i_138220] = i32_res_137890;
            
            int16_t scanacc_tmp_139287 = defunc_0_op_res_130623;
            int16_t scanacc_tmp_139288 = defunc_0_op_res_130624;
            int16_t scanacc_tmp_139289 = defunc_0_op_res_130625;
            int16_t scanacc_tmp_139290 = defunc_0_op_res_130626;
            
            scanacc_138211 = scanacc_tmp_139287;
            scanacc_138212 = scanacc_tmp_139288;
            scanacc_138213 = scanacc_tmp_139289;
            scanacc_138214 = scanacc_tmp_139290;
        }
        discard_138226 = scanacc_138211;
        discard_138227 = scanacc_138212;
        discard_138228 = scanacc_138213;
        discard_138229 = scanacc_138214;
        
        int16_t defunc_0_radix_sort_step_i16_res_130627;
        int16_t defunc_0_radix_sort_step_i16_res_130628;
        int16_t defunc_0_radix_sort_step_i16_res_130629;
        int16_t defunc_0_radix_sort_step_i16_res_130630;
        
        if (empty_slice_130538) {
            defunc_0_radix_sort_step_i16_res_130627 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130628 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130629 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130630 = (int16_t) 0;
        } else {
            int16_t last_res_130631 = ((int16_t *) mem_138416)[m_130539];
            int16_t last_res_130632 = ((int16_t *) mem_138418)[m_130539];
            int16_t last_res_130633 = ((int16_t *) mem_138420)[m_130539];
            int16_t last_res_130634 = ((int16_t *) mem_138422)[m_130539];
            
            defunc_0_radix_sort_step_i16_res_130627 = last_res_130631;
            defunc_0_radix_sort_step_i16_res_130628 = last_res_130632;
            defunc_0_radix_sort_step_i16_res_130629 = last_res_130633;
            defunc_0_radix_sort_step_i16_res_130630 = last_res_130634;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138456, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + (int64_t) 1 * arg_130517, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_130516});
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138458, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138406, (int64_t) 0 + (int64_t) 1 * arg_130517, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_130516});
        for (int64_t write_iter_138230 = 0; write_iter_138230 < rest_130516; write_iter_138230++) {
            int16_t write_iv_138233 = ((int16_t *) mem_138424)[write_iter_138230];
            int16_t write_iv_138234 = ((int16_t *) mem_138416)[write_iter_138230];
            int16_t write_iv_138235 = ((int16_t *) mem_138418)[write_iter_138230];
            int16_t write_iv_138236 = ((int16_t *) mem_138420)[write_iter_138230];
            int16_t write_iv_138237 = ((int16_t *) mem_138422)[write_iter_138230];
            int64_t slice_138368 = arg_130517 + write_iter_138230;
            int64_t write_iv_138238 = ((int64_t *) mem_138406)[slice_138368];
            int64_t write_iv_138239 = ((int64_t *) mem_138408)[slice_138368];
            int64_t defunc_0_f_res_137865;
            
            if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137865, defunc_0_radix_sort_step_i16_res_130627, defunc_0_radix_sort_step_i16_res_130628, defunc_0_radix_sort_step_i16_res_130629, write_iv_138233, write_iv_138234, write_iv_138235, write_iv_138236, write_iv_138237) != 0) {
                err = 1;
                goto cleanup;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137865) && slt64(defunc_0_f_res_137865, rest_130516)) {
                ((int64_t *) mem_138458)[defunc_0_f_res_137865] = write_iv_138238;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137865) && slt64(defunc_0_f_res_137865, rest_130516)) {
                ((int64_t *) mem_138456)[defunc_0_f_res_137865] = write_iv_138239;
            }
        }
        ((int16_t *) mem_138471)[(int64_t) 0] = defunc_0_radix_sort_step_i16_res_130627;
        ((int16_t *) mem_138471)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_130628;
        ((int16_t *) mem_138471)[(int64_t) 2] = defunc_0_radix_sort_step_i16_res_130629;
        ((int16_t *) mem_138471)[(int64_t) 3] = defunc_0_radix_sort_step_i16_res_130630;
        for (int64_t i_138244 = 0; i_138244 < (int64_t) 4; i_138244++) {
            int16_t eta_p_130651 = ((int16_t *) mem_138471)[i_138244];
            int64_t i16_res_130652 = sext_i16_i64(eta_p_130651);
            
            ((int64_t *) mem_138472)[i_138244] = i16_res_130652;
        }
        
        int16_t tmp_130653 = add16(defunc_0_radix_sort_step_i16_res_130627, defunc_0_radix_sort_step_i16_res_130628);
        int16_t tmp_130654 = add16(defunc_0_radix_sort_step_i16_res_130629, tmp_130653);
        
        ((int16_t *) mem_138479)[(int64_t) 0] = (int16_t) 0;
        ((int16_t *) mem_138479)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_130627;
        ((int16_t *) mem_138479)[(int64_t) 2] = tmp_130653;
        ((int16_t *) mem_138479)[(int64_t) 3] = tmp_130654;
        for (int64_t i_138294 = 0; i_138294 < n_blocks_130515; i_138294++) {
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138482, i_138294 * i16_res_130511, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138406, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_130511), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_130511});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138485, i_138294 * i16_res_130511, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_130511), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_130511});
            
            int64_t binop_x_138382 = i16_res_130511 * i_138294;
            int16_t discard_138266;
            int16_t discard_138267;
            int16_t discard_138268;
            int16_t discard_138269;
            int16_t scanacc_138251;
            int16_t scanacc_138252;
            int16_t scanacc_138253;
            int16_t scanacc_138254;
            
            scanacc_138251 = (int16_t) 0;
            scanacc_138252 = (int16_t) 0;
            scanacc_138253 = (int16_t) 0;
            scanacc_138254 = (int16_t) 0;
            for (int64_t i_138260 = 0; i_138260 < i16_res_130511; i_138260++) {
                int64_t new_index_138383 = i_138260 + binop_x_138382;
                int64_t eta_p_137926 = ((int64_t *) mem_138406)[new_index_138383];
                int32_t defunc_0_get_bit_res_137927;
                
                if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_137927, get_bit_arg0_130584, eta_p_137926) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int32_t defunc_0_get_bit_res_137928;
                
                if (cond_130585) {
                    int32_t defunc_0_get_bit_res_t_res_137997 = 1 ^ defunc_0_get_bit_res_137927;
                    
                    defunc_0_get_bit_res_137928 = defunc_0_get_bit_res_t_res_137997;
                } else {
                    defunc_0_get_bit_res_137928 = defunc_0_get_bit_res_137927;
                }
                
                int32_t zp_lhs_137930 = mul32(2, defunc_0_get_bit_res_137928);
                int32_t defunc_0_get_bit_res_137931;
                
                if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_137931, blocked_radix_sort_step_arg1_130579, eta_p_137926) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int32_t defunc_0_get_bit_res_137932;
                
                if (cond_130586) {
                    int32_t defunc_0_get_bit_res_t_res_137998 = 1 ^ defunc_0_get_bit_res_137931;
                    
                    defunc_0_get_bit_res_137932 = defunc_0_get_bit_res_t_res_137998;
                } else {
                    defunc_0_get_bit_res_137932 = defunc_0_get_bit_res_137931;
                }
                
                int32_t i32_arg0_137934 = add32(zp_lhs_137930, defunc_0_get_bit_res_137932);
                int16_t i32_res_137935 = sext_i32_i16(i32_arg0_137934);
                int16_t defunc_0_f_res_137937;
                int16_t defunc_0_f_res_137938;
                int16_t defunc_0_f_res_137939;
                int16_t defunc_0_f_res_137940;
                
                if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137937, &defunc_0_f_res_137938, &defunc_0_f_res_137939, &defunc_0_f_res_137940, i32_res_137935) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int16_t defunc_0_op_res_130704 = add16(defunc_0_f_res_137937, scanacc_138251);
                int16_t defunc_0_op_res_130705 = add16(defunc_0_f_res_137938, scanacc_138252);
                int16_t defunc_0_op_res_130706 = add16(defunc_0_f_res_137939, scanacc_138253);
                int16_t defunc_0_op_res_130707 = add16(defunc_0_f_res_137940, scanacc_138254);
                
                ((int16_t *) mem_138513)[i_138260] = defunc_0_op_res_130704;
                ((int16_t *) mem_138515)[i_138260] = defunc_0_op_res_130705;
                ((int16_t *) mem_138517)[i_138260] = defunc_0_op_res_130706;
                ((int16_t *) mem_138519)[i_138260] = defunc_0_op_res_130707;
                ((int16_t *) mem_138521)[i_138260] = i32_res_137935;
                
                int16_t scanacc_tmp_139303 = defunc_0_op_res_130704;
                int16_t scanacc_tmp_139304 = defunc_0_op_res_130705;
                int16_t scanacc_tmp_139305 = defunc_0_op_res_130706;
                int16_t scanacc_tmp_139306 = defunc_0_op_res_130707;
                
                scanacc_138251 = scanacc_tmp_139303;
                scanacc_138252 = scanacc_tmp_139304;
                scanacc_138253 = scanacc_tmp_139305;
                scanacc_138254 = scanacc_tmp_139306;
            }
            discard_138266 = scanacc_138251;
            discard_138267 = scanacc_138252;
            discard_138268 = scanacc_138253;
            discard_138269 = scanacc_138254;
            
            int16_t defunc_0_f_res_130708;
            int16_t defunc_0_f_res_130709;
            int16_t defunc_0_f_res_130710;
            int16_t defunc_0_f_res_130711;
            
            if (zzero_130512) {
                defunc_0_f_res_130708 = (int16_t) 0;
                defunc_0_f_res_130709 = (int16_t) 0;
                defunc_0_f_res_130710 = (int16_t) 0;
                defunc_0_f_res_130711 = (int16_t) 0;
            } else {
                int16_t last_res_130712 = ((int16_t *) mem_138513)[tmp_130554];
                int16_t last_res_130713 = ((int16_t *) mem_138515)[tmp_130554];
                int16_t last_res_130714 = ((int16_t *) mem_138517)[tmp_130554];
                int16_t last_res_130715 = ((int16_t *) mem_138519)[tmp_130554];
                
                defunc_0_f_res_130708 = last_res_130712;
                defunc_0_f_res_130709 = last_res_130713;
                defunc_0_f_res_130710 = last_res_130714;
                defunc_0_f_res_130711 = last_res_130715;
            }
            for (int64_t write_iter_138270 = 0; write_iter_138270 < i16_res_130511; write_iter_138270++) {
                int16_t write_iv_138273 = ((int16_t *) mem_138521)[write_iter_138270];
                int16_t write_iv_138274 = ((int16_t *) mem_138513)[write_iter_138270];
                int16_t write_iv_138275 = ((int16_t *) mem_138515)[write_iter_138270];
                int16_t write_iv_138276 = ((int16_t *) mem_138517)[write_iter_138270];
                int16_t write_iv_138277 = ((int16_t *) mem_138519)[write_iter_138270];
                int64_t new_index_138379 = write_iter_138270 + binop_x_138382;
                int64_t write_iv_138278 = ((int64_t *) mem_138406)[new_index_138379];
                int64_t write_iv_138279 = ((int64_t *) mem_138408)[new_index_138379];
                int64_t defunc_0_f_res_137910;
                
                if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137910, defunc_0_f_res_130708, defunc_0_f_res_130709, defunc_0_f_res_130710, write_iv_138273, write_iv_138274, write_iv_138275, write_iv_138276, write_iv_138277) != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137910) && slt64(defunc_0_f_res_137910, i16_res_130511)) {
                    ((int64_t *) mem_138482)[i_138294 * i16_res_130511 + defunc_0_f_res_137910] = write_iv_138278;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137910) && slt64(defunc_0_f_res_137910, i16_res_130511)) {
                    ((int64_t *) mem_138485)[i_138294 * i16_res_130511 + defunc_0_f_res_137910] = write_iv_138279;
                }
            }
            ((int16_t *) mem_138564)[(int64_t) 0] = defunc_0_f_res_130708;
            ((int16_t *) mem_138564)[(int64_t) 1] = defunc_0_f_res_130709;
            ((int16_t *) mem_138564)[(int64_t) 2] = defunc_0_f_res_130710;
            ((int16_t *) mem_138564)[(int64_t) 3] = defunc_0_f_res_130711;
            for (int64_t i_138284 = 0; i_138284 < (int64_t) 4; i_138284++) {
                int16_t eta_p_130730 = ((int16_t *) mem_138564)[i_138284];
                int64_t i16_res_130731 = sext_i16_i64(eta_p_130730);
                
                ((int64_t *) mem_138565)[i_138284] = i16_res_130731;
            }
            
            int16_t tmp_130732 = add16(defunc_0_f_res_130708, defunc_0_f_res_130709);
            int16_t tmp_130733 = add16(defunc_0_f_res_130710, tmp_130732);
            
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4] = (int16_t) 0;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 1] = defunc_0_f_res_130708;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 2] = tmp_130732;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 3] = tmp_130733;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138488, i_138294 * (int64_t) 4, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138565, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 4});
        }
        
        int64_t discard_138306;
        int64_t scanacc_138302 = (int64_t) 0;
        
        for (int64_t i_138304 = 0; i_138304 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526; i_138304++) {
            int64_t new_index_138357 = squot64(i_138304, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
            int64_t binop_y_138359 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 * new_index_138357;
            int64_t new_index_138360 = i_138304 - binop_y_138359;
            bool index_concat_cmp_138362 = sle64(n_blocks_130515, new_index_138360);
            int64_t index_concat_branch_138366;
            
            if (index_concat_cmp_138362) {
                int64_t index_concat_138364 = ((int64_t *) mem_138472)[new_index_138357];
                
                index_concat_branch_138366 = index_concat_138364;
            } else {
                int64_t index_concat_138365 = ((int64_t *) mem_138488)[new_index_138360 * (int64_t) 4 + new_index_138357];
                
                index_concat_branch_138366 = index_concat_138365;
            }
            
            int64_t defunc_0_op_res_130745 = add64(scanacc_138302, index_concat_branch_138366);
            
            ((int64_t *) mem_138590)[i_138304] = defunc_0_op_res_130745;
            
            int64_t scanacc_tmp_139315 = defunc_0_op_res_130745;
            
            scanacc_138302 = scanacc_tmp_139315;
        }
        discard_138306 = scanacc_138302;
        for (int64_t i_138309 = 0; i_138309 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526; i_138309++) {
            int64_t zv_lhs_130748 = add64((int64_t) -1, i_138309);
            int64_t tmp_130749 = smod64(zv_lhs_130748, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526);
            int64_t lifted_lambda_res_130750 = ((int64_t *) mem_138590)[tmp_130749];
            
            ((int64_t *) mem_138598)[i_138309] = lifted_lambda_res_130750;
        }
        ((int64_t *) mem_138598)[(int64_t) 0] = (int64_t) 0;
        for (int64_t write_iter_138311 = 0; write_iter_138311 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518; write_iter_138311++) {
            bool index_concat_cmp_138348 = sle64(arg_130517, write_iter_138311);
            int64_t index_concat_branch_137817;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138007 = sub64(write_iter_138311, arg_130517);
                int64_t index_concat_138008 = ((int64_t *) mem_138458)[index_concat_i_138007];
                
                index_concat_branch_137817 = index_concat_138008;
            } else {
                int64_t new_index_137820 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_137821 = i16_res_130511 * new_index_137820;
                int64_t new_index_137822 = write_iter_138311 - binop_y_137821;
                int64_t index_concat_137823 = ((int64_t *) mem_138482)[new_index_137820 * i16_res_130511 + new_index_137822];
                
                index_concat_branch_137817 = index_concat_137823;
            }
            
            int32_t zlzb_rhs_137824;
            int32_t acc_137826 = 0;
            
            for (int32_t i_137825 = 0; i_137825 < 2; i_137825++) {
                int32_t get_bit_arg0_137827 = add32(blocked_radix_sort_step_arg1_130579, i_137825);
                int32_t defunc_0_get_bit_res_137828;
                
                if (futrts_get_bit_2253(ctx, &defunc_0_get_bit_res_137828, get_bit_arg0_137827, index_concat_branch_137817) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                bool cond_137829 = get_bit_arg0_137827 == 63;
                int32_t defunc_0_get_bit_res_137830;
                
                if (cond_137829) {
                    int32_t defunc_0_get_bit_res_t_res_138009 = 1 ^ defunc_0_get_bit_res_137828;
                    
                    defunc_0_get_bit_res_137830 = defunc_0_get_bit_res_t_res_138009;
                } else {
                    defunc_0_get_bit_res_137830 = defunc_0_get_bit_res_137828;
                }
                
                int32_t zp_rhs_137832 = shl32(defunc_0_get_bit_res_137830, i_137825);
                int32_t loopres_137833 = add32(acc_137826, zp_rhs_137832);
                int32_t acc_tmp_139320 = loopres_137833;
                
                acc_137826 = acc_tmp_139320;
            }
            zlzb_rhs_137824 = acc_137826;
            
            int64_t i32_res_137834 = sext_i32_i64(zlzb_rhs_137824);
            int64_t block_idx_137835 = sdiv64(write_iter_138311, i16_res_130511);
            bool x_137836 = sle64((int64_t) 0, block_idx_137835);
            bool y_137837 = slt64(block_idx_137835, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
            bool bounds_check_137838 = x_137836 && y_137837;
            bool index_certs_137839;
            
            if (!bounds_check_137838) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) block_idx_137835, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-48\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:22:3-45\n   #10 ftsort.fut:21:1-22:45\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_137840 = sle64((int64_t) 0, i32_res_137834);
            bool y_137841 = slt64(i32_res_137834, (int64_t) 4);
            bool bounds_check_137842 = x_137840 && y_137841;
            bool index_certs_137843;
            
            if (!bounds_check_137842) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_137834, "] out of bounds for array of shape [", (long long) (int64_t) 4, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-53\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:22:3-45\n   #10 ftsort.fut:21:1-22:45\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int64_t index_concat_branch_138352;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138349 = sub64(write_iter_138311, arg_130517);
                int64_t index_concat_138350 = ((int64_t *) mem_138458)[index_concat_i_138349];
                
                index_concat_branch_138352 = index_concat_138350;
            } else {
                int64_t new_index_138374 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_138376 = i16_res_130511 * new_index_138374;
                int64_t new_index_138377 = write_iter_138311 - binop_y_138376;
                int64_t index_concat_138351 = ((int64_t *) mem_138482)[new_index_138374 * i16_res_130511 + new_index_138377];
                
                index_concat_branch_138352 = index_concat_138351;
            }
            
            int64_t index_concat_branch_138346;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138343 = sub64(write_iter_138311, arg_130517);
                int64_t index_concat_138344 = ((int64_t *) mem_138456)[index_concat_i_138343];
                
                index_concat_branch_138346 = index_concat_138344;
            } else {
                int64_t new_index_138370 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_138372 = i16_res_130511 * new_index_138370;
                int64_t new_index_138373 = write_iter_138311 - binop_y_138372;
                int64_t index_concat_138345 = ((int64_t *) mem_138485)[new_index_138370 * i16_res_130511 + new_index_138373];
                
                index_concat_branch_138346 = index_concat_138345;
            }
            
            int64_t binop_x_137844 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 * i32_res_137834;
            int64_t new_index_137845 = block_idx_137835 + binop_x_137844;
            int64_t new_offset_137846 = ((int64_t *) mem_138598)[new_index_137845];
            bool index_concat_cmp_137847 = sle64(n_blocks_130515, block_idx_137835);
            int16_t index_concat_branch_137848;
            
            if (index_concat_cmp_137847) {
                int16_t index_concat_138010 = ((int16_t *) mem_138479)[i32_res_137834];
                
                index_concat_branch_137848 = index_concat_138010;
            } else {
                int16_t index_concat_137850 = ((int16_t *) mem_138491)[block_idx_137835 * (int64_t) 4 + i32_res_137834];
                
                index_concat_branch_137848 = index_concat_137850;
            }
            
            int64_t i16_res_137851 = sext_i16_i64(index_concat_branch_137848);
            int64_t zp_lhs_137852 = mul64(i16_res_130511, block_idx_137835);
            int64_t old_offset_137853 = add64(i16_res_137851, zp_lhs_137852);
            int64_t zp_lhs_137854 = sub64(write_iter_138311, old_offset_137853);
            int64_t idx_137855 = add64(new_offset_137846, zp_lhs_137854);
            
            if (sle64((int64_t) 0, idx_137855) && slt64(idx_137855, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518)) {
                ((int64_t *) mem_138406)[idx_137855] = index_concat_branch_138352;
            }
            if (sle64((int64_t) 0, idx_137855) && slt64(idx_137855, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518)) {
                ((int64_t *) mem_138408)[idx_137855] = index_concat_branch_138346;
            }
        }
    }
    if (memblock_alloc(ctx, &mem_138624, bytes_138623, "mem_138624")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138626, bytes_138623, "mem_138626")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138323 = 0; i_138323 < n_73229; i_138323++) {
        int64_t eta_p_130810 = ((int64_t *) mem_138408)[i_138323];
        bool x_130811 = sle64((int64_t) 0, eta_p_130810);
        bool y_130812 = slt64(eta_p_130810, n_73229);
        bool bounds_check_130813 = x_130811 && y_130812;
        bool index_certs_130814;
        
        if (!bounds_check_130813) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130810, "] out of bounds for array of shape [", (long long) n_73229, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:68:27-32\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:68:6-33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #4  ftbasics.fut:146:93-96\n   #5  ftsort.fut:22:3-45\n   #6  ftsort.fut:21:1-22:45\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130815 = ((int64_t *) ext_mem_138404.mem)[eta_p_130810];
        int64_t lifted_lambda_res_130816 = ((int64_t *) xs_mem_138403.mem)[eta_p_130810];
        
        ((int64_t *) mem_138624.mem)[i_138323] = lifted_lambda_res_130815;
        ((int64_t *) mem_138626.mem)[i_138323] = lifted_lambda_res_130816;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138624, "mem_138624") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138626, "mem_138626") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139734, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139735, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138406);
        free(mem_138408);
        free(mem_138416);
        free(mem_138418);
        free(mem_138420);
        free(mem_138422);
        free(mem_138424);
        free(mem_138456);
        free(mem_138458);
        free(mem_138471);
        free(mem_138472);
        free(mem_138479);
        free(mem_138482);
        free(mem_138485);
        free(mem_138488);
        free(mem_138491);
        free(mem_138513);
        free(mem_138515);
        free(mem_138517);
        free(mem_138519);
        free(mem_138521);
        free(mem_138564);
        free(mem_138565);
        free(mem_138590);
        free(mem_138598);
        if (memblock_unref(ctx, &mem_138626, "mem_138626") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_entry_radixSortColumn_short(struct futhark_context *ctx, struct memblock *mem_out_p_139761, struct memblock *mem_out_p_139762, struct memblock xs_mem_138403, int64_t n_68012, int64_t incr_68013, int16_t block_sizze_68014)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_138406_cached_sizze_139763 = 0;
    unsigned char *mem_138406 = NULL;
    int64_t mem_138408_cached_sizze_139764 = 0;
    unsigned char *mem_138408 = NULL;
    int64_t mem_138416_cached_sizze_139765 = 0;
    unsigned char *mem_138416 = NULL;
    int64_t mem_138418_cached_sizze_139766 = 0;
    unsigned char *mem_138418 = NULL;
    int64_t mem_138420_cached_sizze_139767 = 0;
    unsigned char *mem_138420 = NULL;
    int64_t mem_138422_cached_sizze_139768 = 0;
    unsigned char *mem_138422 = NULL;
    int64_t mem_138424_cached_sizze_139769 = 0;
    unsigned char *mem_138424 = NULL;
    int64_t mem_138456_cached_sizze_139770 = 0;
    unsigned char *mem_138456 = NULL;
    int64_t mem_138458_cached_sizze_139771 = 0;
    unsigned char *mem_138458 = NULL;
    int64_t mem_138471_cached_sizze_139772 = 0;
    unsigned char *mem_138471 = NULL;
    int64_t mem_138472_cached_sizze_139773 = 0;
    unsigned char *mem_138472 = NULL;
    int64_t mem_138479_cached_sizze_139774 = 0;
    unsigned char *mem_138479 = NULL;
    int64_t mem_138482_cached_sizze_139775 = 0;
    unsigned char *mem_138482 = NULL;
    int64_t mem_138485_cached_sizze_139776 = 0;
    unsigned char *mem_138485 = NULL;
    int64_t mem_138488_cached_sizze_139777 = 0;
    unsigned char *mem_138488 = NULL;
    int64_t mem_138491_cached_sizze_139778 = 0;
    unsigned char *mem_138491 = NULL;
    int64_t mem_138513_cached_sizze_139779 = 0;
    unsigned char *mem_138513 = NULL;
    int64_t mem_138515_cached_sizze_139780 = 0;
    unsigned char *mem_138515 = NULL;
    int64_t mem_138517_cached_sizze_139781 = 0;
    unsigned char *mem_138517 = NULL;
    int64_t mem_138519_cached_sizze_139782 = 0;
    unsigned char *mem_138519 = NULL;
    int64_t mem_138521_cached_sizze_139783 = 0;
    unsigned char *mem_138521 = NULL;
    int64_t mem_138564_cached_sizze_139784 = 0;
    unsigned char *mem_138564 = NULL;
    int64_t mem_138565_cached_sizze_139785 = 0;
    unsigned char *mem_138565 = NULL;
    int64_t mem_138590_cached_sizze_139786 = 0;
    unsigned char *mem_138590 = NULL;
    int64_t mem_138598_cached_sizze_139787 = 0;
    unsigned char *mem_138598 = NULL;
    struct memblock mem_138626;
    
    mem_138626.references = NULL;
    
    struct memblock mem_138624;
    
    mem_138624.references = NULL;
    
    struct memblock ext_mem_138404;
    
    ext_mem_138404.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    bool cond_130509 = n_68012 == (int64_t) 0;
    int32_t iters_130510;
    
    if (cond_130509) {
        iters_130510 = 0;
    } else {
        iters_130510 = 8;
    }
    
    int64_t i16_res_130511 = sext_i16_i64(block_sizze_68014);
    bool zzero_130512 = i16_res_130511 == (int64_t) 0;
    bool nonzzero_130513 = !zzero_130512;
    bool nonzzero_cert_130514;
    
    if (!nonzzero_130513) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:222:20-27\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #4  ftbasics.fut:146:93-96\n   #5  ftsort.fut:16:3-46\n   #6  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t n_blocks_130515 = sdiv64(n_68012, i16_res_130511);
    int64_t rest_130516 = smod64(n_68012, i16_res_130511);
    int64_t arg_130517 = mul64(i16_res_130511, n_blocks_130515);
    int64_t dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518 = add64(rest_130516, arg_130517);
    bool dim_match_130519 = dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518 == n_68012;
    bool empty_or_match_cert_130520;
    
    if (!dim_match_130519) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) n_68012, "] cannot match shape of type `[", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "](i16, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:224:12-46\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #3  /prelude/functional.fut:9:44-45\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #5  ftbasics.fut:146:93-96\n   #6  ftsort.fut:16:3-46\n   #7  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138405 = (int64_t) 2 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    int64_t bytes_138407 = (int64_t) 8 * dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    bool loop_nonempty_130524 = slt32(0, iters_130510);
    int64_t dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 = add64((int64_t) 1, n_blocks_130515);
    int64_t dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526 = mul64((int64_t) 4, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
    bool empty_slice_130527 = arg_130517 == (int64_t) 0;
    int64_t m_130528 = sub64(arg_130517, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_130529 = sle64((int64_t) 0, m_130528);
    bool i_p_m_t_s_leq_w_130530 = slt64(m_130528, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool i_lte_j_130531 = sle64((int64_t) 0, arg_130517);
    bool y_130532 = zzero_leq_i_p_m_t_s_130529 && i_p_m_t_s_leq_w_130530;
    bool forwards_ok_130533 = i_lte_j_130531 && y_130532;
    bool ok_or_empty_130534 = empty_slice_130527 || forwards_ok_130533;
    bool loop_not_taken_130535 = !loop_nonempty_130524;
    bool protect_assert_disj_130536 = ok_or_empty_130534 || loop_not_taken_130535;
    bool index_certs_130537;
    
    if (!protect_assert_disj_130536) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, ":", (long long) arg_130517, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "].", "-> #0  /prelude/array.fut:65:4-11\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:16:3-46\n   #8  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_slice_130538 = rest_130516 == (int64_t) 0;
    int64_t m_130539 = sub64(rest_130516, (int64_t) 1);
    int64_t i_p_m_t_s_130540 = add64(arg_130517, m_130539);
    bool zzero_leq_i_p_m_t_s_130541 = sle64((int64_t) 0, i_p_m_t_s_130540);
    bool i_p_m_t_s_leq_w_130542 = slt64(i_p_m_t_s_130540, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool i_lte_j_130543 = sle64(arg_130517, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518);
    bool y_130544 = zzero_leq_i_p_m_t_s_130541 && i_p_m_t_s_leq_w_130542;
    bool forwards_ok_130545 = i_lte_j_130543 && y_130544;
    bool ok_or_empty_130546 = empty_slice_130538 || forwards_ok_130545;
    bool protect_assert_disj_130547 = loop_not_taken_130535 || ok_or_empty_130546;
    bool index_certs_130548;
    
    if (!protect_assert_disj_130547) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) arg_130517, ":", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "].", "-> #0  /prelude/array.fut:65:13-24\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-164:32\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:16:3-46\n   #8  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool binop_x_130549 = sle64((int64_t) 0, n_blocks_130515);
    bool binop_y_130550 = sle64((int64_t) 0, i16_res_130511);
    bool binop_y_130551 = binop_x_130549 && binop_y_130550;
    bool protect_assert_disj_130552 = loop_not_taken_130535 || binop_y_130551;
    bool dim_ok_cert_130553;
    
    if (!protect_assert_disj_130552) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Cannot unflatten array of shape [", (long long) arg_130517, "] to array of shape [", (long long) n_blocks_130515, "][", (long long) i16_res_130511, "]", "-> #0  /prelude/array.fut:184:3-30\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:163:34-168:21\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #4  /prelude/functional.fut:9:44-45\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #6  ftbasics.fut:146:93-96\n   #7  ftsort.fut:16:3-46\n   #8  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t tmp_130554 = sub64(i16_res_130511, (int64_t) 1);
    bool x_130555 = sle64((int64_t) 0, tmp_130554);
    bool y_130556 = slt64(tmp_130554, i16_res_130511);
    bool bounds_check_130557 = x_130555 && y_130556;
    bool protect_assert_disj_130558 = zzero_130512 || bounds_check_130557;
    bool protect_assert_disj_130559 = loop_not_taken_130535 || protect_assert_disj_130558;
    bool index_certs_130560;
    
    if (!protect_assert_disj_130559) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) tmp_130554, "] out of bounds for array of shape [", (long long) i16_res_130511, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  /prelude/functional.fut:9:44-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:16:3-46\n   #9  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool y_130562 = slt64((int64_t) 0, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526);
    bool protect_assert_disj_130563 = loop_not_taken_130535 || y_130562;
    bool index_certs_130564;
    
    if (!protect_assert_disj_130563) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) (int64_t) 0, "] out of bounds for array of shape [", (long long) dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:122:3-123:7\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:178:8-20\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:16:3-46\n   #9  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool protect_assert_disj_130566 = nonzzero_130513 || loop_not_taken_130535;
    bool nonzzero_cert_130567;
    
    if (!protect_assert_disj_130566) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:186:27-30\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:16:3-46\n   #10 ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool x_130568 = sle64((int64_t) 0, m_130539);
    bool y_130569 = slt64(m_130539, rest_130516);
    bool bounds_check_130570 = x_130568 && y_130569;
    bool protect_assert_disj_130571 = empty_slice_130538 || bounds_check_130570;
    bool protect_assert_disj_130572 = loop_not_taken_130535 || protect_assert_disj_130571;
    bool index_certs_130573;
    
    if (!protect_assert_disj_130572) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) m_130539, "] out of bounds for array of shape [", (long long) rest_130516, "].", "-> #0  /prelude/array.fut:28:29-37\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:149:53-65\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:166:41-45\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:16:3-46\n   #9  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138415 = (int64_t) 2 * rest_130516;
    int64_t bytes_138455 = (int64_t) 8 * rest_130516;
    int64_t binop_x_138480 = (int64_t) 2 * n_blocks_130515;
    int64_t bytes_138481 = i16_res_130511 * binop_x_138480;
    int64_t binop_x_138483 = (int64_t) 8 * n_blocks_130515;
    int64_t bytes_138484 = i16_res_130511 * binop_x_138483;
    int64_t bytes_138487 = (int64_t) 32 * n_blocks_130515;
    int64_t bytes_138508 = (int64_t) 2 * i16_res_130511;
    int64_t bytes_138589 = (int64_t) 32 * dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525;
    bool dim_match_130805 = n_68012 == dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518;
    bool empty_or_match_cert_130806;
    
    if (!dim_match_130805) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (desugared) shape [", (long long) dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518, "] cannot match shape of type `[", (long long) n_68012, "](i16, i64)`.", "-> #0  /prelude/array.fut:58:47-57\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:225:6-11\n   #2  /prelude/functional.fut:26:41-42\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:226:6-227:50\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #5  /prelude/functional.fut:9:44-45\n   #6  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #7  ftbasics.fut:146:93-96\n   #8  ftsort.fut:16:3-46\n   #9  ftsort.fut:15:1-16:46\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138623 = (int64_t) 8 * n_68012;
    int64_t bytes_138625 = (int64_t) 2 * n_68012;
    
    if (futrts_indicesWithIncrement_8973(ctx, &ext_mem_138404, xs_mem_138403, n_68012, incr_68013) != 0) {
        err = 1;
        goto cleanup;
    }
    if (mem_138406_cached_sizze_139763 < bytes_138405) {
        err = lexical_realloc(ctx, &mem_138406, &mem_138406_cached_sizze_139763, bytes_138405);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    lmad_copy_2b(ctx, 1, (uint16_t *) mem_138406, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) xs_mem_138403.mem, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518});
    if (mem_138408_cached_sizze_139764 < bytes_138407) {
        err = lexical_realloc(ctx, &mem_138408, &mem_138408_cached_sizze_139764, bytes_138407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_139283 = 0; i_139283 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518; i_139283++) {
        int64_t x_139284 = (int64_t) 0 + i_139283 * (int64_t) 1;
        
        ((int64_t *) mem_138408)[i_139283] = x_139284;
    }
    if (mem_138416_cached_sizze_139765 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138416, &mem_138416_cached_sizze_139765, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138418_cached_sizze_139766 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138418, &mem_138418_cached_sizze_139766, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138420_cached_sizze_139767 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138420, &mem_138420_cached_sizze_139767, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138422_cached_sizze_139768 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138422, &mem_138422_cached_sizze_139768, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138424_cached_sizze_139769 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138424, &mem_138424_cached_sizze_139769, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138456_cached_sizze_139770 < bytes_138455) {
        err = lexical_realloc(ctx, &mem_138456, &mem_138456_cached_sizze_139770, bytes_138455);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138458_cached_sizze_139771 < bytes_138415) {
        err = lexical_realloc(ctx, &mem_138458, &mem_138458_cached_sizze_139771, bytes_138415);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138471_cached_sizze_139772 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138471, &mem_138471_cached_sizze_139772, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138472_cached_sizze_139773 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138472, &mem_138472_cached_sizze_139773, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138479_cached_sizze_139774 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138479, &mem_138479_cached_sizze_139774, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138482_cached_sizze_139775 < bytes_138481) {
        err = lexical_realloc(ctx, &mem_138482, &mem_138482_cached_sizze_139775, bytes_138481);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138485_cached_sizze_139776 < bytes_138484) {
        err = lexical_realloc(ctx, &mem_138485, &mem_138485_cached_sizze_139776, bytes_138484);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138488_cached_sizze_139777 < bytes_138487) {
        err = lexical_realloc(ctx, &mem_138488, &mem_138488_cached_sizze_139777, bytes_138487);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138491_cached_sizze_139778 < binop_x_138483) {
        err = lexical_realloc(ctx, &mem_138491, &mem_138491_cached_sizze_139778, binop_x_138483);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138513_cached_sizze_139779 < bytes_138508) {
        err = lexical_realloc(ctx, &mem_138513, &mem_138513_cached_sizze_139779, bytes_138508);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138515_cached_sizze_139780 < bytes_138508) {
        err = lexical_realloc(ctx, &mem_138515, &mem_138515_cached_sizze_139780, bytes_138508);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138517_cached_sizze_139781 < bytes_138508) {
        err = lexical_realloc(ctx, &mem_138517, &mem_138517_cached_sizze_139781, bytes_138508);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138519_cached_sizze_139782 < bytes_138508) {
        err = lexical_realloc(ctx, &mem_138519, &mem_138519_cached_sizze_139782, bytes_138508);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138521_cached_sizze_139783 < bytes_138508) {
        err = lexical_realloc(ctx, &mem_138521, &mem_138521_cached_sizze_139783, bytes_138508);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138564_cached_sizze_139784 < (int64_t) 8) {
        err = lexical_realloc(ctx, &mem_138564, &mem_138564_cached_sizze_139784, (int64_t) 8);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138565_cached_sizze_139785 < (int64_t) 32) {
        err = lexical_realloc(ctx, &mem_138565, &mem_138565_cached_sizze_139785, (int64_t) 32);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138590_cached_sizze_139786 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138590, &mem_138590_cached_sizze_139786, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_138598_cached_sizze_139787 < bytes_138589) {
        err = lexical_realloc(ctx, &mem_138598, &mem_138598_cached_sizze_139787, bytes_138589);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_130576 = 0; i_130576 < iters_130510; i_130576++) {
        int32_t blocked_radix_sort_step_arg1_130579 = mul32(2, i_130576);
        int32_t get_bit_arg0_130584 = add32(1, blocked_radix_sort_step_arg1_130579);
        bool cond_130585 = get_bit_arg0_130584 == 15;
        bool cond_130586 = blocked_radix_sort_step_arg1_130579 == 15;
        int16_t discard_138226;
        int16_t discard_138227;
        int16_t discard_138228;
        int16_t discard_138229;
        int16_t scanacc_138211;
        int16_t scanacc_138212;
        int16_t scanacc_138213;
        int16_t scanacc_138214;
        
        scanacc_138211 = (int16_t) 0;
        scanacc_138212 = (int16_t) 0;
        scanacc_138213 = (int16_t) 0;
        scanacc_138214 = (int16_t) 0;
        for (int64_t i_138220 = 0; i_138220 < rest_130516; i_138220++) {
            int64_t slice_138369 = arg_130517 + i_138220;
            int16_t eta_p_137881 = ((int16_t *) mem_138406)[slice_138369];
            int32_t defunc_0_get_bit_res_137882;
            
            if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_137882, get_bit_arg0_130584, eta_p_137881) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t defunc_0_get_bit_res_137883;
            
            if (cond_130585) {
                int32_t defunc_0_get_bit_res_t_res_137995 = 1 ^ defunc_0_get_bit_res_137882;
                
                defunc_0_get_bit_res_137883 = defunc_0_get_bit_res_t_res_137995;
            } else {
                defunc_0_get_bit_res_137883 = defunc_0_get_bit_res_137882;
            }
            
            int32_t zp_lhs_137885 = mul32(2, defunc_0_get_bit_res_137883);
            int32_t defunc_0_get_bit_res_137886;
            
            if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_137886, blocked_radix_sort_step_arg1_130579, eta_p_137881) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t defunc_0_get_bit_res_137887;
            
            if (cond_130586) {
                int32_t defunc_0_get_bit_res_t_res_137996 = 1 ^ defunc_0_get_bit_res_137886;
                
                defunc_0_get_bit_res_137887 = defunc_0_get_bit_res_t_res_137996;
            } else {
                defunc_0_get_bit_res_137887 = defunc_0_get_bit_res_137886;
            }
            
            int32_t i32_arg0_137889 = add32(zp_lhs_137885, defunc_0_get_bit_res_137887);
            int16_t i32_res_137890 = sext_i32_i16(i32_arg0_137889);
            int16_t defunc_0_f_res_137892;
            int16_t defunc_0_f_res_137893;
            int16_t defunc_0_f_res_137894;
            int16_t defunc_0_f_res_137895;
            
            if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137892, &defunc_0_f_res_137893, &defunc_0_f_res_137894, &defunc_0_f_res_137895, i32_res_137890) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int16_t defunc_0_op_res_130623 = add16(defunc_0_f_res_137892, scanacc_138211);
            int16_t defunc_0_op_res_130624 = add16(defunc_0_f_res_137893, scanacc_138212);
            int16_t defunc_0_op_res_130625 = add16(defunc_0_f_res_137894, scanacc_138213);
            int16_t defunc_0_op_res_130626 = add16(defunc_0_f_res_137895, scanacc_138214);
            
            ((int16_t *) mem_138416)[i_138220] = defunc_0_op_res_130623;
            ((int16_t *) mem_138418)[i_138220] = defunc_0_op_res_130624;
            ((int16_t *) mem_138420)[i_138220] = defunc_0_op_res_130625;
            ((int16_t *) mem_138422)[i_138220] = defunc_0_op_res_130626;
            ((int16_t *) mem_138424)[i_138220] = i32_res_137890;
            
            int16_t scanacc_tmp_139287 = defunc_0_op_res_130623;
            int16_t scanacc_tmp_139288 = defunc_0_op_res_130624;
            int16_t scanacc_tmp_139289 = defunc_0_op_res_130625;
            int16_t scanacc_tmp_139290 = defunc_0_op_res_130626;
            
            scanacc_138211 = scanacc_tmp_139287;
            scanacc_138212 = scanacc_tmp_139288;
            scanacc_138213 = scanacc_tmp_139289;
            scanacc_138214 = scanacc_tmp_139290;
        }
        discard_138226 = scanacc_138211;
        discard_138227 = scanacc_138212;
        discard_138228 = scanacc_138213;
        discard_138229 = scanacc_138214;
        
        int16_t defunc_0_radix_sort_step_i16_res_130627;
        int16_t defunc_0_radix_sort_step_i16_res_130628;
        int16_t defunc_0_radix_sort_step_i16_res_130629;
        int16_t defunc_0_radix_sort_step_i16_res_130630;
        
        if (empty_slice_130538) {
            defunc_0_radix_sort_step_i16_res_130627 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130628 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130629 = (int16_t) 0;
            defunc_0_radix_sort_step_i16_res_130630 = (int16_t) 0;
        } else {
            int16_t last_res_130631 = ((int16_t *) mem_138416)[m_130539];
            int16_t last_res_130632 = ((int16_t *) mem_138418)[m_130539];
            int16_t last_res_130633 = ((int16_t *) mem_138420)[m_130539];
            int16_t last_res_130634 = ((int16_t *) mem_138422)[m_130539];
            
            defunc_0_radix_sort_step_i16_res_130627 = last_res_130631;
            defunc_0_radix_sort_step_i16_res_130628 = last_res_130632;
            defunc_0_radix_sort_step_i16_res_130629 = last_res_130633;
            defunc_0_radix_sort_step_i16_res_130630 = last_res_130634;
        }
        lmad_copy_8b(ctx, 1, (uint64_t *) mem_138456, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + (int64_t) 1 * arg_130517, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_130516});
        lmad_copy_2b(ctx, 1, (uint16_t *) mem_138458, (int64_t) 0, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_138406, (int64_t) 0 + (int64_t) 1 * arg_130517, (int64_t []) {(int64_t) 1}, (int64_t []) {rest_130516});
        for (int64_t write_iter_138230 = 0; write_iter_138230 < rest_130516; write_iter_138230++) {
            int16_t write_iv_138233 = ((int16_t *) mem_138424)[write_iter_138230];
            int16_t write_iv_138234 = ((int16_t *) mem_138416)[write_iter_138230];
            int16_t write_iv_138235 = ((int16_t *) mem_138418)[write_iter_138230];
            int16_t write_iv_138236 = ((int16_t *) mem_138420)[write_iter_138230];
            int16_t write_iv_138237 = ((int16_t *) mem_138422)[write_iter_138230];
            int64_t slice_138368 = arg_130517 + write_iter_138230;
            int16_t write_iv_138238 = ((int16_t *) mem_138406)[slice_138368];
            int64_t write_iv_138239 = ((int64_t *) mem_138408)[slice_138368];
            int64_t defunc_0_f_res_137865;
            
            if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137865, defunc_0_radix_sort_step_i16_res_130627, defunc_0_radix_sort_step_i16_res_130628, defunc_0_radix_sort_step_i16_res_130629, write_iv_138233, write_iv_138234, write_iv_138235, write_iv_138236, write_iv_138237) != 0) {
                err = 1;
                goto cleanup;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137865) && slt64(defunc_0_f_res_137865, rest_130516)) {
                ((int16_t *) mem_138458)[defunc_0_f_res_137865] = write_iv_138238;
            }
            if (sle64((int64_t) 0, defunc_0_f_res_137865) && slt64(defunc_0_f_res_137865, rest_130516)) {
                ((int64_t *) mem_138456)[defunc_0_f_res_137865] = write_iv_138239;
            }
        }
        ((int16_t *) mem_138471)[(int64_t) 0] = defunc_0_radix_sort_step_i16_res_130627;
        ((int16_t *) mem_138471)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_130628;
        ((int16_t *) mem_138471)[(int64_t) 2] = defunc_0_radix_sort_step_i16_res_130629;
        ((int16_t *) mem_138471)[(int64_t) 3] = defunc_0_radix_sort_step_i16_res_130630;
        for (int64_t i_138244 = 0; i_138244 < (int64_t) 4; i_138244++) {
            int16_t eta_p_130651 = ((int16_t *) mem_138471)[i_138244];
            int64_t i16_res_130652 = sext_i16_i64(eta_p_130651);
            
            ((int64_t *) mem_138472)[i_138244] = i16_res_130652;
        }
        
        int16_t tmp_130653 = add16(defunc_0_radix_sort_step_i16_res_130627, defunc_0_radix_sort_step_i16_res_130628);
        int16_t tmp_130654 = add16(defunc_0_radix_sort_step_i16_res_130629, tmp_130653);
        
        ((int16_t *) mem_138479)[(int64_t) 0] = (int16_t) 0;
        ((int16_t *) mem_138479)[(int64_t) 1] = defunc_0_radix_sort_step_i16_res_130627;
        ((int16_t *) mem_138479)[(int64_t) 2] = tmp_130653;
        ((int16_t *) mem_138479)[(int64_t) 3] = tmp_130654;
        for (int64_t i_138294 = 0; i_138294 < n_blocks_130515; i_138294++) {
            lmad_copy_2b(ctx, 1, (uint16_t *) mem_138482, i_138294 * i16_res_130511, (int64_t []) {(int64_t) 1}, (uint16_t *) mem_138406, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_130511), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_130511});
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138485, i_138294 * i16_res_130511, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138408, (int64_t) 0 + i_138294 * ((int64_t) 1 * i16_res_130511), (int64_t []) {(int64_t) 1}, (int64_t []) {i16_res_130511});
            
            int64_t binop_x_138382 = i16_res_130511 * i_138294;
            int16_t discard_138266;
            int16_t discard_138267;
            int16_t discard_138268;
            int16_t discard_138269;
            int16_t scanacc_138251;
            int16_t scanacc_138252;
            int16_t scanacc_138253;
            int16_t scanacc_138254;
            
            scanacc_138251 = (int16_t) 0;
            scanacc_138252 = (int16_t) 0;
            scanacc_138253 = (int16_t) 0;
            scanacc_138254 = (int16_t) 0;
            for (int64_t i_138260 = 0; i_138260 < i16_res_130511; i_138260++) {
                int64_t new_index_138383 = i_138260 + binop_x_138382;
                int16_t eta_p_137926 = ((int16_t *) mem_138406)[new_index_138383];
                int32_t defunc_0_get_bit_res_137927;
                
                if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_137927, get_bit_arg0_130584, eta_p_137926) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int32_t defunc_0_get_bit_res_137928;
                
                if (cond_130585) {
                    int32_t defunc_0_get_bit_res_t_res_137997 = 1 ^ defunc_0_get_bit_res_137927;
                    
                    defunc_0_get_bit_res_137928 = defunc_0_get_bit_res_t_res_137997;
                } else {
                    defunc_0_get_bit_res_137928 = defunc_0_get_bit_res_137927;
                }
                
                int32_t zp_lhs_137930 = mul32(2, defunc_0_get_bit_res_137928);
                int32_t defunc_0_get_bit_res_137931;
                
                if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_137931, blocked_radix_sort_step_arg1_130579, eta_p_137926) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int32_t defunc_0_get_bit_res_137932;
                
                if (cond_130586) {
                    int32_t defunc_0_get_bit_res_t_res_137998 = 1 ^ defunc_0_get_bit_res_137931;
                    
                    defunc_0_get_bit_res_137932 = defunc_0_get_bit_res_t_res_137998;
                } else {
                    defunc_0_get_bit_res_137932 = defunc_0_get_bit_res_137931;
                }
                
                int32_t i32_arg0_137934 = add32(zp_lhs_137930, defunc_0_get_bit_res_137932);
                int16_t i32_res_137935 = sext_i32_i16(i32_arg0_137934);
                int16_t defunc_0_f_res_137937;
                int16_t defunc_0_f_res_137938;
                int16_t defunc_0_f_res_137939;
                int16_t defunc_0_f_res_137940;
                
                if (futrts_lifted_lambda_8934(ctx, &defunc_0_f_res_137937, &defunc_0_f_res_137938, &defunc_0_f_res_137939, &defunc_0_f_res_137940, i32_res_137935) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                int16_t defunc_0_op_res_130704 = add16(defunc_0_f_res_137937, scanacc_138251);
                int16_t defunc_0_op_res_130705 = add16(defunc_0_f_res_137938, scanacc_138252);
                int16_t defunc_0_op_res_130706 = add16(defunc_0_f_res_137939, scanacc_138253);
                int16_t defunc_0_op_res_130707 = add16(defunc_0_f_res_137940, scanacc_138254);
                
                ((int16_t *) mem_138513)[i_138260] = defunc_0_op_res_130704;
                ((int16_t *) mem_138515)[i_138260] = defunc_0_op_res_130705;
                ((int16_t *) mem_138517)[i_138260] = defunc_0_op_res_130706;
                ((int16_t *) mem_138519)[i_138260] = defunc_0_op_res_130707;
                ((int16_t *) mem_138521)[i_138260] = i32_res_137935;
                
                int16_t scanacc_tmp_139303 = defunc_0_op_res_130704;
                int16_t scanacc_tmp_139304 = defunc_0_op_res_130705;
                int16_t scanacc_tmp_139305 = defunc_0_op_res_130706;
                int16_t scanacc_tmp_139306 = defunc_0_op_res_130707;
                
                scanacc_138251 = scanacc_tmp_139303;
                scanacc_138252 = scanacc_tmp_139304;
                scanacc_138253 = scanacc_tmp_139305;
                scanacc_138254 = scanacc_tmp_139306;
            }
            discard_138266 = scanacc_138251;
            discard_138267 = scanacc_138252;
            discard_138268 = scanacc_138253;
            discard_138269 = scanacc_138254;
            
            int16_t defunc_0_f_res_130708;
            int16_t defunc_0_f_res_130709;
            int16_t defunc_0_f_res_130710;
            int16_t defunc_0_f_res_130711;
            
            if (zzero_130512) {
                defunc_0_f_res_130708 = (int16_t) 0;
                defunc_0_f_res_130709 = (int16_t) 0;
                defunc_0_f_res_130710 = (int16_t) 0;
                defunc_0_f_res_130711 = (int16_t) 0;
            } else {
                int16_t last_res_130712 = ((int16_t *) mem_138513)[tmp_130554];
                int16_t last_res_130713 = ((int16_t *) mem_138515)[tmp_130554];
                int16_t last_res_130714 = ((int16_t *) mem_138517)[tmp_130554];
                int16_t last_res_130715 = ((int16_t *) mem_138519)[tmp_130554];
                
                defunc_0_f_res_130708 = last_res_130712;
                defunc_0_f_res_130709 = last_res_130713;
                defunc_0_f_res_130710 = last_res_130714;
                defunc_0_f_res_130711 = last_res_130715;
            }
            for (int64_t write_iter_138270 = 0; write_iter_138270 < i16_res_130511; write_iter_138270++) {
                int16_t write_iv_138273 = ((int16_t *) mem_138521)[write_iter_138270];
                int16_t write_iv_138274 = ((int16_t *) mem_138513)[write_iter_138270];
                int16_t write_iv_138275 = ((int16_t *) mem_138515)[write_iter_138270];
                int16_t write_iv_138276 = ((int16_t *) mem_138517)[write_iter_138270];
                int16_t write_iv_138277 = ((int16_t *) mem_138519)[write_iter_138270];
                int64_t new_index_138379 = write_iter_138270 + binop_x_138382;
                int16_t write_iv_138278 = ((int16_t *) mem_138406)[new_index_138379];
                int64_t write_iv_138279 = ((int64_t *) mem_138408)[new_index_138379];
                int64_t defunc_0_f_res_137910;
                
                if (futrts_lifted_f_8935(ctx, &defunc_0_f_res_137910, defunc_0_f_res_130708, defunc_0_f_res_130709, defunc_0_f_res_130710, write_iv_138273, write_iv_138274, write_iv_138275, write_iv_138276, write_iv_138277) != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137910) && slt64(defunc_0_f_res_137910, i16_res_130511)) {
                    ((int16_t *) mem_138482)[i_138294 * i16_res_130511 + defunc_0_f_res_137910] = write_iv_138278;
                }
                if (sle64((int64_t) 0, defunc_0_f_res_137910) && slt64(defunc_0_f_res_137910, i16_res_130511)) {
                    ((int64_t *) mem_138485)[i_138294 * i16_res_130511 + defunc_0_f_res_137910] = write_iv_138279;
                }
            }
            ((int16_t *) mem_138564)[(int64_t) 0] = defunc_0_f_res_130708;
            ((int16_t *) mem_138564)[(int64_t) 1] = defunc_0_f_res_130709;
            ((int16_t *) mem_138564)[(int64_t) 2] = defunc_0_f_res_130710;
            ((int16_t *) mem_138564)[(int64_t) 3] = defunc_0_f_res_130711;
            for (int64_t i_138284 = 0; i_138284 < (int64_t) 4; i_138284++) {
                int16_t eta_p_130730 = ((int16_t *) mem_138564)[i_138284];
                int64_t i16_res_130731 = sext_i16_i64(eta_p_130730);
                
                ((int64_t *) mem_138565)[i_138284] = i16_res_130731;
            }
            
            int16_t tmp_130732 = add16(defunc_0_f_res_130708, defunc_0_f_res_130709);
            int16_t tmp_130733 = add16(defunc_0_f_res_130710, tmp_130732);
            
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4] = (int16_t) 0;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 1] = defunc_0_f_res_130708;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 2] = tmp_130732;
            ((int16_t *) mem_138491)[i_138294 * (int64_t) 4 + (int64_t) 3] = tmp_130733;
            lmad_copy_8b(ctx, 1, (uint64_t *) mem_138488, i_138294 * (int64_t) 4, (int64_t []) {(int64_t) 1}, (uint64_t *) mem_138565, (int64_t) 0, (int64_t []) {(int64_t) 1}, (int64_t []) {(int64_t) 4});
        }
        
        int64_t discard_138306;
        int64_t scanacc_138302 = (int64_t) 0;
        
        for (int64_t i_138304 = 0; i_138304 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526; i_138304++) {
            int64_t new_index_138357 = squot64(i_138304, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
            int64_t binop_y_138359 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 * new_index_138357;
            int64_t new_index_138360 = i_138304 - binop_y_138359;
            bool index_concat_cmp_138362 = sle64(n_blocks_130515, new_index_138360);
            int64_t index_concat_branch_138366;
            
            if (index_concat_cmp_138362) {
                int64_t index_concat_138364 = ((int64_t *) mem_138472)[new_index_138357];
                
                index_concat_branch_138366 = index_concat_138364;
            } else {
                int64_t index_concat_138365 = ((int64_t *) mem_138488)[new_index_138360 * (int64_t) 4 + new_index_138357];
                
                index_concat_branch_138366 = index_concat_138365;
            }
            
            int64_t defunc_0_op_res_130745 = add64(scanacc_138302, index_concat_branch_138366);
            
            ((int64_t *) mem_138590)[i_138304] = defunc_0_op_res_130745;
            
            int64_t scanacc_tmp_139315 = defunc_0_op_res_130745;
            
            scanacc_138302 = scanacc_tmp_139315;
        }
        discard_138306 = scanacc_138302;
        for (int64_t i_138309 = 0; i_138309 < dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526; i_138309++) {
            int64_t zv_lhs_130748 = add64((int64_t) -1, i_138309);
            int64_t tmp_130749 = smod64(zv_lhs_130748, dzlz7bUZLztZRz20U4z20UZLZLzpZRz20Unz20U1ZRz7dUzg_130526);
            int64_t lifted_lambda_res_130750 = ((int64_t *) mem_138590)[tmp_130749];
            
            ((int64_t *) mem_138598)[i_138309] = lifted_lambda_res_130750;
        }
        ((int64_t *) mem_138598)[(int64_t) 0] = (int64_t) 0;
        for (int64_t write_iter_138311 = 0; write_iter_138311 < dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518; write_iter_138311++) {
            bool index_concat_cmp_138348 = sle64(arg_130517, write_iter_138311);
            int16_t index_concat_branch_137817;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138007 = sub64(write_iter_138311, arg_130517);
                int16_t index_concat_138008 = ((int16_t *) mem_138458)[index_concat_i_138007];
                
                index_concat_branch_137817 = index_concat_138008;
            } else {
                int64_t new_index_137820 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_137821 = i16_res_130511 * new_index_137820;
                int64_t new_index_137822 = write_iter_138311 - binop_y_137821;
                int16_t index_concat_137823 = ((int16_t *) mem_138482)[new_index_137820 * i16_res_130511 + new_index_137822];
                
                index_concat_branch_137817 = index_concat_137823;
            }
            
            int32_t zlzb_rhs_137824;
            int32_t acc_137826 = 0;
            
            for (int32_t i_137825 = 0; i_137825 < 2; i_137825++) {
                int32_t get_bit_arg0_137827 = add32(blocked_radix_sort_step_arg1_130579, i_137825);
                int32_t defunc_0_get_bit_res_137828;
                
                if (futrts_get_bit_1844(ctx, &defunc_0_get_bit_res_137828, get_bit_arg0_137827, index_concat_branch_137817) != 0) {
                    err = 1;
                    goto cleanup;
                }
                
                bool cond_137829 = get_bit_arg0_137827 == 15;
                int32_t defunc_0_get_bit_res_137830;
                
                if (cond_137829) {
                    int32_t defunc_0_get_bit_res_t_res_138009 = 1 ^ defunc_0_get_bit_res_137828;
                    
                    defunc_0_get_bit_res_137830 = defunc_0_get_bit_res_t_res_138009;
                } else {
                    defunc_0_get_bit_res_137830 = defunc_0_get_bit_res_137828;
                }
                
                int32_t zp_rhs_137832 = shl32(defunc_0_get_bit_res_137830, i_137825);
                int32_t loopres_137833 = add32(acc_137826, zp_rhs_137832);
                int32_t acc_tmp_139320 = loopres_137833;
                
                acc_137826 = acc_tmp_139320;
            }
            zlzb_rhs_137824 = acc_137826;
            
            int64_t i32_res_137834 = sext_i32_i64(zlzb_rhs_137824);
            int64_t block_idx_137835 = sdiv64(write_iter_138311, i16_res_130511);
            bool x_137836 = sle64((int64_t) 0, block_idx_137835);
            bool y_137837 = slt64(block_idx_137835, dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525);
            bool bounds_check_137838 = x_137836 && y_137837;
            bool index_certs_137839;
            
            if (!bounds_check_137838) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) block_idx_137835, "] out of bounds for array of shape [", (long long) dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-48\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:16:3-46\n   #10 ftsort.fut:15:1-16:46\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            bool x_137840 = sle64((int64_t) 0, i32_res_137834);
            bool y_137841 = slt64(i32_res_137834, (int64_t) 4);
            bool bounds_check_137842 = x_137840 && y_137841;
            bool index_certs_137843;
            
            if (!bounds_check_137842) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i32_res_137834, "] out of bounds for array of shape [", (long long) (int64_t) 4, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:187:26-53\n   #1  /prelude/soacs.fut:59:9-11\n   #2  /prelude/array.fut:241:11-17\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:183:7-191:15\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:227:48-50\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:248:49-51\n   #6  /prelude/functional.fut:9:44-45\n   #7  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #8  ftbasics.fut:146:93-96\n   #9  ftsort.fut:16:3-46\n   #10 ftsort.fut:15:1-16:46\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int16_t index_concat_branch_138352;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138349 = sub64(write_iter_138311, arg_130517);
                int16_t index_concat_138350 = ((int16_t *) mem_138458)[index_concat_i_138349];
                
                index_concat_branch_138352 = index_concat_138350;
            } else {
                int64_t new_index_138374 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_138376 = i16_res_130511 * new_index_138374;
                int64_t new_index_138377 = write_iter_138311 - binop_y_138376;
                int16_t index_concat_138351 = ((int16_t *) mem_138482)[new_index_138374 * i16_res_130511 + new_index_138377];
                
                index_concat_branch_138352 = index_concat_138351;
            }
            
            int64_t index_concat_branch_138346;
            
            if (index_concat_cmp_138348) {
                int64_t index_concat_i_138343 = sub64(write_iter_138311, arg_130517);
                int64_t index_concat_138344 = ((int64_t *) mem_138456)[index_concat_i_138343];
                
                index_concat_branch_138346 = index_concat_138344;
            } else {
                int64_t new_index_138370 = squot64(write_iter_138311, i16_res_130511);
                int64_t binop_y_138372 = i16_res_130511 * new_index_138370;
                int64_t new_index_138373 = write_iter_138311 - binop_y_138372;
                int64_t index_concat_138345 = ((int64_t *) mem_138485)[new_index_138370 * i16_res_130511 + new_index_138373];
                
                index_concat_branch_138346 = index_concat_138345;
            }
            
            int64_t binop_x_137844 = dzlz7bUZLzpZRz20Unz20U1z7dUzg_130525 * i32_res_137834;
            int64_t new_index_137845 = block_idx_137835 + binop_x_137844;
            int64_t new_offset_137846 = ((int64_t *) mem_138598)[new_index_137845];
            bool index_concat_cmp_137847 = sle64(n_blocks_130515, block_idx_137835);
            int16_t index_concat_branch_137848;
            
            if (index_concat_cmp_137847) {
                int16_t index_concat_138010 = ((int16_t *) mem_138479)[i32_res_137834];
                
                index_concat_branch_137848 = index_concat_138010;
            } else {
                int16_t index_concat_137850 = ((int16_t *) mem_138491)[block_idx_137835 * (int64_t) 4 + i32_res_137834];
                
                index_concat_branch_137848 = index_concat_137850;
            }
            
            int64_t i16_res_137851 = sext_i16_i64(index_concat_branch_137848);
            int64_t zp_lhs_137852 = mul64(i16_res_130511, block_idx_137835);
            int64_t old_offset_137853 = add64(i16_res_137851, zp_lhs_137852);
            int64_t zp_lhs_137854 = sub64(write_iter_138311, old_offset_137853);
            int64_t idx_137855 = add64(new_offset_137846, zp_lhs_137854);
            
            if (sle64((int64_t) 0, idx_137855) && slt64(idx_137855, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518)) {
                ((int16_t *) mem_138406)[idx_137855] = index_concat_branch_138352;
            }
            if (sle64((int64_t) 0, idx_137855) && slt64(idx_137855, dzlz7bUZLzpZRz20UZLZLztZRz20Un_blocksz20UblockZRz20Urestz7dUzg_130518)) {
                ((int64_t *) mem_138408)[idx_137855] = index_concat_branch_138346;
            }
        }
    }
    if (memblock_alloc(ctx, &mem_138624, bytes_138623, "mem_138624")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_138626, bytes_138625, "mem_138626")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_138323 = 0; i_138323 < n_68012; i_138323++) {
        int64_t eta_p_130810 = ((int64_t *) mem_138408)[i_138323];
        bool x_130811 = sle64((int64_t) 0, eta_p_130810);
        bool y_130812 = slt64(eta_p_130810, n_68012);
        bool bounds_check_130813 = x_130811 && y_130812;
        bool index_certs_130814;
        
        if (!bounds_check_130813) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) eta_p_130810, "] out of bounds for array of shape [", (long long) n_68012, "].", "-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:68:27-32\n   #1  /prelude/functional.fut:9:44-45\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:68:6-33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:258:49-51\n   #4  ftbasics.fut:146:93-96\n   #5  ftsort.fut:16:3-46\n   #6  ftsort.fut:15:1-16:46\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t lifted_lambda_res_130815 = ((int64_t *) ext_mem_138404.mem)[eta_p_130810];
        int16_t lifted_lambda_res_130816 = ((int16_t *) xs_mem_138403.mem)[eta_p_130810];
        
        ((int64_t *) mem_138624.mem)[i_138323] = lifted_lambda_res_130815;
        ((int16_t *) mem_138626.mem)[i_138323] = lifted_lambda_res_130816;
    }
    if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139281, &mem_138624, "mem_138624") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_139282, &mem_138626, "mem_138626") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139761, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139762, &mem_out_139282, "mem_out_139282") != 0)
        return 1;
    
  cleanup:
    {
        free(mem_138406);
        free(mem_138408);
        free(mem_138416);
        free(mem_138418);
        free(mem_138420);
        free(mem_138422);
        free(mem_138424);
        free(mem_138456);
        free(mem_138458);
        free(mem_138471);
        free(mem_138472);
        free(mem_138479);
        free(mem_138482);
        free(mem_138485);
        free(mem_138488);
        free(mem_138491);
        free(mem_138513);
        free(mem_138515);
        free(mem_138517);
        free(mem_138519);
        free(mem_138521);
        free(mem_138564);
        free(mem_138565);
        free(mem_138590);
        free(mem_138598);
        if (memblock_unref(ctx, &mem_138626, "mem_138626") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_138624, "mem_138624") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_138404, "ext_mem_138404") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139282, "mem_out_139282") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_get_bit_1844(struct futhark_context *ctx, int32_t *out_prim_out_139788, int32_t bit_65860, int16_t x_65861)
{
    (void) ctx;
    
    int err = 0;
    int32_t prim_out_139281;
    int16_t i32_res_126329 = sext_i32_i16(bit_65860);
    int16_t zgzg_res_126332 = ashr16(x_65861, i32_res_126329);
    int16_t za_res_126337 = (int16_t) 1 & zgzg_res_126332;
    int32_t to_i32_res_126339 = sext_i16_i32(za_res_126337);
    
    prim_out_139281 = to_i32_res_126339;
    *out_prim_out_139788 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_get_bit_2253(struct futhark_context *ctx, int32_t *out_prim_out_139789, int32_t bit_71077, int64_t x_71078)
{
    (void) ctx;
    
    int err = 0;
    int32_t prim_out_139281;
    int64_t i32_res_126329 = sext_i32_i64(bit_71077);
    int64_t zgzg_res_126332 = ashr64(x_71078, i32_res_126329);
    int64_t za_res_126337 = (int64_t) 1 & zgzg_res_126332;
    int32_t to_i32_res_126339 = sext_i64_i32(za_res_126337);
    
    prim_out_139281 = to_i32_res_126339;
    *out_prim_out_139789 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_greatest_divisor_leq_than_4833(struct futhark_context *ctx, int64_t *out_prim_out_139790, int64_t upper_bound_78759, int64_t n_78760)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    bool upper_bound_78761 = sle64((int64_t) 1, upper_bound_78759);
    bool assert_c_78763;
    
    if (!upper_bound_78761) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Assertion is false: (upper_bound >= 1)", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:189:21-58\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool cond_78772 = slt64(upper_bound_78759, n_78760);
    bool d_78781;
    int64_t d_78782;
    bool loop_while_78783;
    int64_t d_78784;
    
    loop_while_78783 = cond_78772;
    d_78784 = (int64_t) 1;
    while (loop_while_78783) {
        int64_t loopres_78785 = add64((int64_t) 1, d_78784);
        bool zzero_78787 = loopres_78785 == (int64_t) 0;
        bool nonzzero_78788 = !zzero_78787;
        bool nonzzero_cert_78789;
        
        if (!nonzzero_78788) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:190:36-38\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t zg_lhs_78790 = sdiv64(n_78760, loopres_78785);
        bool cond_78792 = slt64(upper_bound_78759, zg_lhs_78790);
        bool loop_cond_78793;
        
        if (cond_78792) {
            loop_cond_78793 = 1;
        } else {
            int64_t znze_lhs_78797 = smod64(n_78760, loopres_78785);
            bool loop_cond_f_res_78799 = znze_lhs_78797 == (int64_t) 0;
            bool loop_cond_f_res_78800 = !loop_cond_f_res_78799;
            
            loop_cond_78793 = loop_cond_f_res_78800;
        }
        
        bool loop_while_tmp_139282 = loop_cond_78793;
        int64_t d_tmp_139283 = loopres_78785;
        
        loop_while_78783 = loop_while_tmp_139282;
        d_78784 = d_tmp_139283;
    }
    d_78781 = loop_while_78783;
    d_78782 = d_78784;
    
    bool zzero_78802 = d_78782 == (int64_t) 0;
    bool nonzzero_78803 = !zzero_78802;
    bool nonzzero_cert_78804;
    
    if (!nonzzero_78803) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  lib/github.com/diku-dk/sorts/merge_sort.fut:191:7-9\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t greatest_divisor_leq_than_res_78805 = sdiv64(n_78760, d_78782);
    
    prim_out_139281 = greatest_divisor_leq_than_res_78805;
    *out_prim_out_139790 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_8973(struct futhark_context *ctx, struct memblock *mem_out_p_139791, struct memblock xs_mem_138403, int64_t n_65157, int64_t incr_65158)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138405;
    
    mem_138405.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t rng_65163 = add64(n_65157, incr_65158);
    bool bounds_invalid_upwards_65167 = slt64(rng_65163, incr_65158);
    bool valid_65172 = !bounds_invalid_upwards_65167;
    bool range_valid_c_65173;
    
    if (!valid_65172) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_65158, "..<", (long long) rng_65163, " is invalid.", "-> #0  ftbasics.fut:21:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138404 = (int64_t) 8 * n_65157;
    
    if (memblock_alloc(ctx, &mem_138405, bytes_138404, "mem_138405")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139282 = 0; i_139282 < n_65157; i_139282++) {
        int64_t x_139283 = incr_65158 + i_139282 * (int64_t) 1;
        
        ((int64_t *) mem_138405.mem)[i_139282] = x_139283;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138405, "mem_138405") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139791, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138405, "mem_138405") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9128(struct futhark_context *ctx, struct memblock *mem_out_p_139792, struct memblock xs_mem_138403, int64_t n_68037, int64_t incr_68038)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138405;
    
    mem_138405.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t rng_68043 = add64(n_68037, incr_68038);
    bool bounds_invalid_upwards_68047 = slt64(rng_68043, incr_68038);
    bool valid_68052 = !bounds_invalid_upwards_68047;
    bool range_valid_c_68053;
    
    if (!valid_68052) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_68038, "..<", (long long) rng_68043, " is invalid.", "-> #0  ftbasics.fut:21:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138404 = (int64_t) 8 * n_68037;
    
    if (memblock_alloc(ctx, &mem_138405, bytes_138404, "mem_138405")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139282 = 0; i_139282 < n_68037; i_139282++) {
        int64_t x_139283 = incr_68038 + i_139282 * (int64_t) 1;
        
        ((int64_t *) mem_138405.mem)[i_139282] = x_139283;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138405, "mem_138405") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139792, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138405, "mem_138405") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9238(struct futhark_context *ctx, struct memblock *mem_out_p_139793, struct memblock xs_mem_138403, int64_t n_70654, int64_t incr_70655)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138405;
    
    mem_138405.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t rng_70660 = add64(n_70654, incr_70655);
    bool bounds_invalid_upwards_70664 = slt64(rng_70660, incr_70655);
    bool valid_70669 = !bounds_invalid_upwards_70664;
    bool range_valid_c_70670;
    
    if (!valid_70669) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_70655, "..<", (long long) rng_70660, " is invalid.", "-> #0  ftbasics.fut:21:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138404 = (int64_t) 8 * n_70654;
    
    if (memblock_alloc(ctx, &mem_138405, bytes_138404, "mem_138405")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139282 = 0; i_139282 < n_70654; i_139282++) {
        int64_t x_139283 = incr_70655 + i_139282 * (int64_t) 1;
        
        ((int64_t *) mem_138405.mem)[i_139282] = x_139283;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138405, "mem_138405") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139793, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138405, "mem_138405") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9338(struct futhark_context *ctx, struct memblock *mem_out_p_139794, struct memblock xs_mem_138403, int64_t n_73254, int64_t incr_73255)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138405;
    
    mem_138405.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t rng_73260 = add64(n_73254, incr_73255);
    bool bounds_invalid_upwards_73264 = slt64(rng_73260, incr_73255);
    bool valid_73269 = !bounds_invalid_upwards_73264;
    bool range_valid_c_73270;
    
    if (!valid_73269) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_73255, "..<", (long long) rng_73260, " is invalid.", "-> #0  ftbasics.fut:21:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138404 = (int64_t) 8 * n_73254;
    
    if (memblock_alloc(ctx, &mem_138405, bytes_138404, "mem_138405")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139282 = 0; i_139282 < n_73254; i_139282++) {
        int64_t x_139283 = incr_73255 + i_139282 * (int64_t) 1;
        
        ((int64_t *) mem_138405.mem)[i_139282] = x_139283;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138405, "mem_138405") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139794, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138405, "mem_138405") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_indicesWithIncrement_9447(struct futhark_context *ctx, struct memblock *mem_out_p_139795, struct memblock xs_mem_138403, int64_t n_76005, int64_t incr_76006)
{
    (void) ctx;
    
    int err = 0;
    struct memblock mem_138405;
    
    mem_138405.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    int64_t rng_76011 = add64(n_76005, incr_76006);
    bool bounds_invalid_upwards_76015 = slt64(rng_76011, incr_76006);
    bool valid_76020 = !bounds_invalid_upwards_76015;
    bool range_valid_c_76021;
    
    if (!valid_76020) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) incr_76006, "..<", (long long) rng_76011, " is invalid.", "-> #0  ftbasics.fut:21:25-40\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t bytes_138404 = (int64_t) 8 * n_76005;
    
    if (memblock_alloc(ctx, &mem_138405, bytes_138404, "mem_138405")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_139282 = 0; i_139282 < n_76005; i_139282++) {
        int64_t x_139283 = incr_76006 + i_139282 * (int64_t) 1;
        
        ((int64_t *) mem_138405.mem)[i_139282] = x_139283;
    }
    if (memblock_set(ctx, &mem_out_139281, &mem_138405, "mem_138405") != 0)
        return 1;
    if (memblock_set(ctx, &*mem_out_p_139795, &mem_out_139281, "mem_out_139281") != 0)
        return 1;
    
  cleanup:
    {
        if (memblock_unref(ctx, &mem_138405, "mem_138405") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_139281, "mem_out_139281") != 0)
            return 1;
    }
    return err;
}
FUTHARK_FUN_ATTR int futrts_lifted_f_8935(struct futhark_context *ctx, int64_t *out_prim_out_139796, int16_t na_65384, int16_t nb_65385, int16_t nc_65386, int16_t bin_65387, int16_t a_65388, int16_t b_65389, int16_t c_65390, int16_t d_65391)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    bool bool_arg0_65392 = bin_65387 == (int16_t) 0;
    int16_t bool_res_126329 = btoi_bool_i16(bool_arg0_65392);
    int16_t zp_rhs_65396 = mul16(a_65388, bool_res_126329);
    int16_t zp_lhs_65399 = add16((int16_t) -1, zp_rhs_65396);
    bool bool_arg0_65401 = slt16((int16_t) 0, bin_65387);
    int16_t bool_res_126331 = btoi_bool_i16(bool_arg0_65401);
    int16_t zp_rhs_65405 = mul16(na_65384, bool_res_126331);
    int16_t zp_lhs_65407 = add16(zp_lhs_65399, zp_rhs_65405);
    bool bool_arg0_65409 = bin_65387 == (int16_t) 1;
    int16_t bool_res_126333 = btoi_bool_i16(bool_arg0_65409);
    int16_t zp_rhs_65413 = mul16(b_65389, bool_res_126333);
    int16_t zp_lhs_65415 = add16(zp_lhs_65407, zp_rhs_65413);
    bool bool_arg0_65417 = slt16((int16_t) 1, bin_65387);
    int16_t bool_res_126335 = btoi_bool_i16(bool_arg0_65417);
    int16_t zp_rhs_65421 = mul16(nb_65385, bool_res_126335);
    int16_t zp_lhs_65423 = add16(zp_lhs_65415, zp_rhs_65421);
    bool bool_arg0_65425 = bin_65387 == (int16_t) 2;
    int16_t bool_res_126337 = btoi_bool_i16(bool_arg0_65425);
    int16_t zp_rhs_65429 = mul16(c_65390, bool_res_126337);
    int16_t zp_lhs_65431 = add16(zp_lhs_65423, zp_rhs_65429);
    bool bool_arg0_65433 = slt16((int16_t) 2, bin_65387);
    int16_t bool_res_126339 = btoi_bool_i16(bool_arg0_65433);
    int16_t zp_rhs_65437 = mul16(nc_65386, bool_res_126339);
    int16_t zp_lhs_65439 = add16(zp_lhs_65431, zp_rhs_65437);
    bool bool_arg0_65441 = bin_65387 == (int16_t) 3;
    int16_t bool_res_126341 = btoi_bool_i16(bool_arg0_65441);
    int16_t zp_rhs_65445 = mul16(d_65391, bool_res_126341);
    int16_t i16_arg0_65447 = add16(zp_lhs_65439, zp_rhs_65445);
    int64_t i16_res_126343 = sext_i16_i64(i16_arg0_65447);
    
    prim_out_139281 = i16_res_126343;
    *out_prim_out_139796 = prim_out_139281;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_lifted_lambda_8934(struct futhark_context *ctx, int16_t *out_prim_out_139797, int16_t *out_prim_out_139798, int16_t *out_prim_out_139799, int16_t *out_prim_out_139800, int16_t x_65327)
{
    (void) ctx;
    
    int err = 0;
    int16_t prim_out_139281;
    int16_t prim_out_139282;
    int16_t prim_out_139283;
    int16_t prim_out_139284;
    bool bool_arg0_65328 = x_65327 == (int16_t) 0;
    int16_t bool_res_126329 = btoi_bool_i16(bool_arg0_65328);
    bool bool_arg0_65332 = x_65327 == (int16_t) 1;
    int16_t bool_res_126331 = btoi_bool_i16(bool_arg0_65332);
    bool bool_arg0_65336 = x_65327 == (int16_t) 2;
    int16_t bool_res_126333 = btoi_bool_i16(bool_arg0_65336);
    bool bool_arg0_65340 = x_65327 == (int16_t) 3;
    int16_t bool_res_126335 = btoi_bool_i16(bool_arg0_65340);
    
    prim_out_139281 = bool_res_126329;
    prim_out_139282 = bool_res_126331;
    prim_out_139283 = bool_res_126333;
    prim_out_139284 = bool_res_126335;
    *out_prim_out_139797 = prim_out_139281;
    *out_prim_out_139798 = prim_out_139282;
    *out_prim_out_139799 = prim_out_139283;
    *out_prim_out_139800 = prim_out_139284;
    
  cleanup:
    { }
    return err;
}
FUTHARK_FUN_ATTR int futrts_lifted_normalizze_8911(struct futhark_context *ctx, int64_t *out_prim_out_139801, int64_t *out_prim_out_139802, int64_t *out_prim_out_139803, int64_t *out_prim_out_139804, int64_t *out_prim_out_139805, int64_t slo_78978, int64_t shi_78979, int64_t tlo_78980, int64_t thi_78981, int64_t count_78982)
{
    (void) ctx;
    
    int err = 0;
    int64_t prim_out_139281;
    int64_t prim_out_139282;
    int64_t prim_out_139283;
    int64_t prim_out_139284;
    int64_t prim_out_139285;
    int64_t min_arg1_78985 = add64(slo_78978, count_78982);
    int64_t min_res_126330 = smin64(shi_78979, min_arg1_78985);
    int64_t min_arg1_78989 = add64(tlo_78980, count_78982);
    int64_t min_res_126333 = smin64(thi_78981, min_arg1_78989);
    int64_t zp_lhs_78993 = sub64(min_res_126330, slo_78978);
    int64_t zp_rhs_78995 = sub64(min_res_126333, tlo_78980);
    int64_t zm_lhs_78997 = add64(zp_lhs_78993, zp_rhs_78995);
    int64_t slack_78999 = sub64(zm_lhs_78997, count_78982);
    int64_t min_res_126336 = smin64(zp_lhs_78993, slack_78999);
    int64_t min_res_126339 = smin64(zp_rhs_78995, min_res_126336);
    int64_t max_arg1_79009 = sub64(min_res_126330, min_res_126339);
    int64_t max_res_126342 = smax64(slo_78978, max_arg1_79009);
    int64_t max_arg1_79013 = sub64(min_res_126333, min_res_126339);
    int64_t max_res_126345 = smax64(tlo_78980, max_arg1_79013);
    int64_t zm_rhs_79017 = sub64(max_res_126342, slo_78978);
    int64_t zm_lhs_79019 = sub64(count_78982, zm_rhs_79017);
    int64_t zm_rhs_79021 = sub64(max_res_126345, tlo_78980);
    int64_t count_79023 = sub64(zm_lhs_79019, zm_rhs_79021);
    
    prim_out_139281 = max_res_126342;
    prim_out_139282 = min_res_126330;
    prim_out_139283 = max_res_126345;
    prim_out_139284 = min_res_126333;
    prim_out_139285 = count_79023;
    *out_prim_out_139801 = prim_out_139281;
    *out_prim_out_139802 = prim_out_139282;
    *out_prim_out_139803 = prim_out_139283;
    *out_prim_out_139804 = prim_out_139284;
    *out_prim_out_139805 = prim_out_139285;
    
  cleanup:
    { }
    return err;
}

int futhark_entry_argmin_double(struct futhark_context *ctx, int64_t *out0, const struct futhark_f64_1d *in0)
{
    int64_t n_92488 = (int64_t) 0;
    int64_t prim_out_139281 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_138403;
    
    ks_mem_138403.references = NULL;
    ks_mem_138403 = in0->mem;
    n_92488 = in0->shape[0];
    if (!(n_92488 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_double(ctx, &prim_out_139281, ks_mem_138403, n_92488);
        if (ret == 0) {
            *out0 = prim_out_139281;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_float(struct futhark_context *ctx, int64_t *out0, const struct futhark_f32_1d *in0)
{
    int64_t n_92319 = (int64_t) 0;
    int64_t prim_out_139281 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_138403;
    
    ks_mem_138403.references = NULL;
    ks_mem_138403 = in0->mem;
    n_92319 = in0->shape[0];
    if (!(n_92319 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_float(ctx, &prim_out_139281, ks_mem_138403, n_92319);
        if (ret == 0) {
            *out0 = prim_out_139281;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_int(struct futhark_context *ctx, int64_t *out0, const struct futhark_i32_1d *in0)
{
    int64_t n_91984 = (int64_t) 0;
    int64_t prim_out_139281 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_138403;
    
    ks_mem_138403.references = NULL;
    ks_mem_138403 = in0->mem;
    n_91984 = in0->shape[0];
    if (!(n_91984 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_int(ctx, &prim_out_139281, ks_mem_138403, n_91984);
        if (ret == 0) {
            *out0 = prim_out_139281;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_long(struct futhark_context *ctx, int64_t *out0, const struct futhark_i64_1d *in0)
{
    int64_t n_92150 = (int64_t) 0;
    int64_t prim_out_139281 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_138403;
    
    ks_mem_138403.references = NULL;
    ks_mem_138403 = in0->mem;
    n_92150 = in0->shape[0];
    if (!(n_92150 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_long(ctx, &prim_out_139281, ks_mem_138403, n_92150);
        if (ret == 0) {
            *out0 = prim_out_139281;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_argmin_short(struct futhark_context *ctx, int64_t *out0, const struct futhark_i16_1d *in0)
{
    int64_t n_91818 = (int64_t) 0;
    int64_t prim_out_139281 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock ks_mem_138403;
    
    ks_mem_138403.references = NULL;
    ks_mem_138403 = in0->mem;
    n_91818 = in0->shape[0];
    if (!(n_91818 == in0->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_argmin_short(ctx, &prim_out_139281, ks_mem_138403, n_91818);
        if (ret == 0) {
            *out0 = prim_out_139281;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const struct futhark_f64_1d *in1)
{
    int64_t n_90566 = (int64_t) 0;
    int64_t incr_90567 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_90567 = in0;
    xs_mem_138403 = in1->mem;
    n_90566 = in1->shape[0];
    if (!(n_90566 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_double(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_90566, incr_90567);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_double *) malloc(sizeof(struct futhark_opaque_sortInfo_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_90566;
            assert(((*out0)->v1 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_90566;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const struct futhark_f32_1d *in1)
{
    int64_t n_88222 = (int64_t) 0;
    int64_t incr_88223 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_88223 = in0;
    xs_mem_138403 = in1->mem;
    n_88222 = in1->shape[0];
    if (!(n_88222 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_float(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_88222, incr_88223);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_float *) malloc(sizeof(struct futhark_opaque_sortInfo_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_88222;
            assert(((*out0)->v1 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_88222;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const struct futhark_i32_1d *in1)
{
    int64_t n_83535 = (int64_t) 0;
    int64_t incr_83536 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_83536 = in0;
    xs_mem_138403 = in1->mem;
    n_83535 = in1->shape[0];
    if (!(n_83535 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_int(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_83535, incr_83536);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_int *) malloc(sizeof(struct futhark_opaque_sortInfo_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_83535;
            assert(((*out0)->v1 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_83535;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const struct futhark_i64_1d *in1)
{
    int64_t n_85878 = (int64_t) 0;
    int64_t incr_85879 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_85879 = in0;
    xs_mem_138403 = in1->mem;
    n_85878 = in1->shape[0];
    if (!(n_85878 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_long(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_85878, incr_85879);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_long *) malloc(sizeof(struct futhark_opaque_sortInfo_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_85878;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_85878;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const struct futhark_i16_1d *in1)
{
    int64_t n_81191 = (int64_t) 0;
    int64_t incr_81192 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_81192 = in0;
    xs_mem_138403 = in1->mem;
    n_81191 = in1->shape[0];
    if (!(n_81191 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSortColumn_short(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_81191, incr_81192);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_short *) malloc(sizeof(struct futhark_opaque_sortInfo_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_81191;
            assert(((*out0)->v1 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_81191;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSorted_double(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_double **out0, const int64_t in0, const int64_t in1, const struct futhark_f64_1d *in2, const struct futhark_f64_1d *in3)
{
    int64_t na_123952 = (int64_t) 0;
    int64_t nb_123953 = (int64_t) 0;
    int64_t window_sizze_123954 = (int64_t) 0;
    int64_t threads_123955 = (int64_t) 0;
    int64_t prim_out_139284 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock b_list_mem_138404;
    
    b_list_mem_138404.references = NULL;
    
    struct memblock a_list_mem_138403;
    
    a_list_mem_138403.references = NULL;
    window_sizze_123954 = in0;
    threads_123955 = in1;
    a_list_mem_138403 = in2->mem;
    na_123952 = in2->shape[0];
    b_list_mem_138404 = in3->mem;
    nb_123953 = in3->shape[0];
    if (!(na_123952 == in2->shape[0] && nb_123953 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSorted_double(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, &prim_out_139284, a_list_mem_138403, b_list_mem_138404, na_123952, nb_123953, window_sizze_123954, threads_123955);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeInfo_double *) malloc(sizeof(struct futhark_opaque_mergeInfo_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = prim_out_139284;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = prim_out_139284;
            assert(((*out0)->v2 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = prim_out_139284;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSorted_float(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_float **out0, const int64_t in0, const int64_t in1, const struct futhark_f32_1d *in2, const struct futhark_f32_1d *in3)
{
    int64_t na_117667 = (int64_t) 0;
    int64_t nb_117668 = (int64_t) 0;
    int64_t window_sizze_117669 = (int64_t) 0;
    int64_t threads_117670 = (int64_t) 0;
    int64_t prim_out_139284 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock b_list_mem_138404;
    
    b_list_mem_138404.references = NULL;
    
    struct memblock a_list_mem_138403;
    
    a_list_mem_138403.references = NULL;
    window_sizze_117669 = in0;
    threads_117670 = in1;
    a_list_mem_138403 = in2->mem;
    na_117667 = in2->shape[0];
    b_list_mem_138404 = in3->mem;
    nb_117668 = in3->shape[0];
    if (!(na_117667 == in2->shape[0] && nb_117668 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSorted_float(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, &prim_out_139284, a_list_mem_138403, b_list_mem_138404, na_117667, nb_117668, window_sizze_117669, threads_117670);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeInfo_float *) malloc(sizeof(struct futhark_opaque_mergeInfo_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = prim_out_139284;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = prim_out_139284;
            assert(((*out0)->v2 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = prim_out_139284;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSorted_int(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_int **out0, const int64_t in0, const int64_t in1, const struct futhark_i32_1d *in2, const struct futhark_i32_1d *in3)
{
    int64_t na_105156 = (int64_t) 0;
    int64_t nb_105157 = (int64_t) 0;
    int64_t window_sizze_105158 = (int64_t) 0;
    int64_t threads_105159 = (int64_t) 0;
    int64_t prim_out_139284 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock b_list_mem_138404;
    
    b_list_mem_138404.references = NULL;
    
    struct memblock a_list_mem_138403;
    
    a_list_mem_138403.references = NULL;
    window_sizze_105158 = in0;
    threads_105159 = in1;
    a_list_mem_138403 = in2->mem;
    na_105156 = in2->shape[0];
    b_list_mem_138404 = in3->mem;
    nb_105157 = in3->shape[0];
    if (!(na_105156 == in2->shape[0] && nb_105157 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSorted_int(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, &prim_out_139284, a_list_mem_138403, b_list_mem_138404, na_105156, nb_105157, window_sizze_105158, threads_105159);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeInfo_int *) malloc(sizeof(struct futhark_opaque_mergeInfo_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = prim_out_139284;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = prim_out_139284;
            assert(((*out0)->v2 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = prim_out_139284;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSorted_long(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_long **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3)
{
    int64_t na_111382 = (int64_t) 0;
    int64_t nb_111383 = (int64_t) 0;
    int64_t window_sizze_111384 = (int64_t) 0;
    int64_t threads_111385 = (int64_t) 0;
    int64_t prim_out_139284 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock b_list_mem_138404;
    
    b_list_mem_138404.references = NULL;
    
    struct memblock a_list_mem_138403;
    
    a_list_mem_138403.references = NULL;
    window_sizze_111384 = in0;
    threads_111385 = in1;
    a_list_mem_138403 = in2->mem;
    na_111382 = in2->shape[0];
    b_list_mem_138404 = in3->mem;
    nb_111383 = in3->shape[0];
    if (!(na_111382 == in2->shape[0] && nb_111383 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSorted_long(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, &prim_out_139284, a_list_mem_138403, b_list_mem_138404, na_111382, nb_111383, window_sizze_111384, threads_111385);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeInfo_long *) malloc(sizeof(struct futhark_opaque_mergeInfo_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = prim_out_139284;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = prim_out_139284;
            assert(((*out0)->v2 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = prim_out_139284;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeSorted_short(struct futhark_context *ctx, struct futhark_opaque_mergeInfo_short **out0, const int64_t in0, const int64_t in1, const struct futhark_i16_1d *in2, const struct futhark_i16_1d *in3)
{
    int64_t na_98868 = (int64_t) 0;
    int64_t nb_98869 = (int64_t) 0;
    int64_t window_sizze_98870 = (int64_t) 0;
    int64_t threads_98871 = (int64_t) 0;
    int64_t prim_out_139284 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock b_list_mem_138404;
    
    b_list_mem_138404.references = NULL;
    
    struct memblock a_list_mem_138403;
    
    a_list_mem_138403.references = NULL;
    window_sizze_98870 = in0;
    threads_98871 = in1;
    a_list_mem_138403 = in2->mem;
    na_98868 = in2->shape[0];
    b_list_mem_138404 = in3->mem;
    nb_98869 = in3->shape[0];
    if (!(na_98868 == in2->shape[0] && nb_98869 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeSorted_short(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, &prim_out_139284, a_list_mem_138403, b_list_mem_138404, na_98868, nb_98869, window_sizze_98870, threads_98871);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeInfo_short *) malloc(sizeof(struct futhark_opaque_mergeInfo_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = prim_out_139284;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = prim_out_139284;
            assert(((*out0)->v2 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = prim_out_139284;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeTups_double(struct futhark_context *ctx, struct futhark_opaque_mergeTup_double **out0, const struct futhark_f64_1d *in0, const struct futhark_f64_1d *in1)
{
    int64_t w1_126289 = (int64_t) 0;
    int64_t w2_126290 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    xs_mem_138403 = in0->mem;
    w1_126289 = in0->shape[0];
    ys_mem_138404 = in1->mem;
    w2_126290 = in1->shape[0];
    if (!(w1_126289 == in0->shape[0] && w2_126290 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeTups_double(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, xs_mem_138403, ys_mem_138404, w1_126289, w2_126290);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeTup_double *) malloc(sizeof(struct futhark_opaque_mergeTup_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = w1_126289;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = w1_126289;
            assert(((*out0)->v2 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = w1_126289;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeTups_float(struct futhark_context *ctx, struct futhark_opaque_mergeTup_float **out0, const struct futhark_f32_1d *in0, const struct futhark_f32_1d *in1)
{
    int64_t w1_125790 = (int64_t) 0;
    int64_t w2_125791 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    xs_mem_138403 = in0->mem;
    w1_125790 = in0->shape[0];
    ys_mem_138404 = in1->mem;
    w2_125791 = in1->shape[0];
    if (!(w1_125790 == in0->shape[0] && w2_125791 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeTups_float(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, xs_mem_138403, ys_mem_138404, w1_125790, w2_125791);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeTup_float *) malloc(sizeof(struct futhark_opaque_mergeTup_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = w1_125790;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = w1_125790;
            assert(((*out0)->v2 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = w1_125790;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeTups_int(struct futhark_context *ctx, struct futhark_opaque_mergeTup_int **out0, const struct futhark_i32_1d *in0, const struct futhark_i32_1d *in1)
{
    int64_t w1_124976 = (int64_t) 0;
    int64_t w2_124977 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    xs_mem_138403 = in0->mem;
    w1_124976 = in0->shape[0];
    ys_mem_138404 = in1->mem;
    w2_124977 = in1->shape[0];
    if (!(w1_124976 == in0->shape[0] && w2_124977 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeTups_int(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, xs_mem_138403, ys_mem_138404, w1_124976, w2_124977);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeTup_int *) malloc(sizeof(struct futhark_opaque_mergeTup_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = w1_124976;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = w1_124976;
            assert(((*out0)->v2 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = w1_124976;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeTups_long(struct futhark_context *ctx, struct futhark_opaque_mergeTup_long **out0, const struct futhark_i64_1d *in0, const struct futhark_i64_1d *in1)
{
    int64_t w1_125291 = (int64_t) 0;
    int64_t w2_125292 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    xs_mem_138403 = in0->mem;
    w1_125291 = in0->shape[0];
    ys_mem_138404 = in1->mem;
    w2_125292 = in1->shape[0];
    if (!(w1_125291 == in0->shape[0] && w2_125292 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeTups_long(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, xs_mem_138403, ys_mem_138404, w1_125291, w2_125292);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeTup_long *) malloc(sizeof(struct futhark_opaque_mergeTup_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = w1_125291;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = w1_125291;
            assert(((*out0)->v2 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = w1_125291;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_mergeTups_short(struct futhark_context *ctx, struct futhark_opaque_mergeTup_short **out0, const struct futhark_i16_1d *in0, const struct futhark_i16_1d *in1)
{
    int64_t w1_124477 = (int64_t) 0;
    int64_t w2_124478 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139283;
    
    mem_out_139283.references = NULL;
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    xs_mem_138403 = in0->mem;
    w1_124477 = in0->shape[0];
    ys_mem_138404 = in1->mem;
    w2_124478 = in1->shape[0];
    if (!(w1_124477 == in0->shape[0] && w2_124478 == in1->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_mergeTups_short(ctx, &mem_out_139281, &mem_out_139282, &mem_out_139283, xs_mem_138403, ys_mem_138404, w1_124477, w2_124478);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_mergeTup_short *) malloc(sizeof(struct futhark_opaque_mergeTup_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = w1_124477;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = w1_124477;
            assert(((*out0)->v2 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v2->mem = mem_out_139283;
            (*out0)->v2->shape[0] = w1_124477;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_double(struct futhark_context *ctx, struct futhark_f64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f64_1d *in3)
{
    int64_t n_91649 = (int64_t) 0;
    int64_t incr_91650 = (int64_t) 0;
    int64_t block_sizze_91651 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock is_mem_138403;
    
    is_mem_138403.references = NULL;
    incr_91650 = in0;
    block_sizze_91651 = in1;
    is_mem_138403 = in2->mem;
    n_91649 = in2->shape[0];
    ys_mem_138404 = in3->mem;
    n_91649 = in3->shape[0];
    if (!(n_91649 == in2->shape[0] && n_91649 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_double(ctx, &mem_out_139281, is_mem_138403, ys_mem_138404, n_91649, incr_91650, block_sizze_91651);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->mem = mem_out_139281;
            (*out0)->shape[0] = n_91649;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_float(struct futhark_context *ctx, struct futhark_f32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_f32_1d *in3)
{
    int64_t n_91432 = (int64_t) 0;
    int64_t incr_91433 = (int64_t) 0;
    int64_t block_sizze_91434 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock is_mem_138403;
    
    is_mem_138403.references = NULL;
    incr_91433 = in0;
    block_sizze_91434 = in1;
    is_mem_138403 = in2->mem;
    n_91432 = in2->shape[0];
    ys_mem_138404 = in3->mem;
    n_91432 = in3->shape[0];
    if (!(n_91432 == in2->shape[0] && n_91432 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_float(ctx, &mem_out_139281, is_mem_138403, ys_mem_138404, n_91432, incr_91433, block_sizze_91434);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->mem = mem_out_139281;
            (*out0)->shape[0] = n_91432;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_int(struct futhark_context *ctx, struct futhark_i32_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i32_1d *in3)
{
    int64_t n_91011 = (int64_t) 0;
    int64_t incr_91012 = (int64_t) 0;
    int64_t block_sizze_91013 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock is_mem_138403;
    
    is_mem_138403.references = NULL;
    incr_91012 = in0;
    block_sizze_91013 = in1;
    is_mem_138403 = in2->mem;
    n_91011 = in2->shape[0];
    ys_mem_138404 = in3->mem;
    n_91011 = in3->shape[0];
    if (!(n_91011 == in2->shape[0] && n_91011 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_int(ctx, &mem_out_139281, is_mem_138403, ys_mem_138404, n_91011, incr_91012, block_sizze_91013);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->mem = mem_out_139281;
            (*out0)->shape[0] = n_91011;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_long(struct futhark_context *ctx, struct futhark_i64_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i64_1d *in3)
{
    int64_t n_91215 = (int64_t) 0;
    int64_t incr_91216 = (int64_t) 0;
    int64_t block_sizze_91217 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock is_mem_138403;
    
    is_mem_138403.references = NULL;
    incr_91216 = in0;
    block_sizze_91217 = in1;
    is_mem_138403 = in2->mem;
    n_91215 = in2->shape[0];
    ys_mem_138404 = in3->mem;
    n_91215 = in3->shape[0];
    if (!(n_91215 == in2->shape[0] && n_91215 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_long(ctx, &mem_out_139281, is_mem_138403, ys_mem_138404, n_91215, incr_91216, block_sizze_91217);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->mem = mem_out_139281;
            (*out0)->shape[0] = n_91215;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_orderByIndices_short(struct futhark_context *ctx, struct futhark_i16_1d **out0, const int64_t in0, const int64_t in1, const struct futhark_i64_1d *in2, const struct futhark_i16_1d *in3)
{
    int64_t n_90794 = (int64_t) 0;
    int64_t incr_90795 = (int64_t) 0;
    int64_t block_sizze_90796 = (int64_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock ys_mem_138404;
    
    ys_mem_138404.references = NULL;
    
    struct memblock is_mem_138403;
    
    is_mem_138403.references = NULL;
    incr_90795 = in0;
    block_sizze_90796 = in1;
    is_mem_138403 = in2->mem;
    n_90794 = in2->shape[0];
    ys_mem_138404 = in3->mem;
    n_90794 = in3->shape[0];
    if (!(n_90794 == in2->shape[0] && n_90794 == in3->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_orderByIndices_short(ctx, &mem_out_139281, is_mem_138403, ys_mem_138404, n_90794, incr_90795, block_sizze_90796);
        if (ret == 0) {
            assert((*out0 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->mem = mem_out_139281;
            (*out0)->shape[0] = n_90794;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_double(struct futhark_context *ctx, struct futhark_opaque_sortInfo_double **out0, const int64_t in0, const int16_t in1, const struct futhark_f64_1d *in2)
{
    int64_t n_78735 = (int64_t) 0;
    int64_t incr_78736 = (int64_t) 0;
    int16_t block_sizze_78737 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_78736 = in0;
    block_sizze_78737 = in1;
    xs_mem_138403 = in2->mem;
    n_78735 = in2->shape[0];
    if (!(n_78735 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_double(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_78735, incr_78736, block_sizze_78737);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_double *) malloc(sizeof(struct futhark_opaque_sortInfo_double))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_78735;
            assert(((*out0)->v1 = (struct futhark_f64_1d *) malloc(sizeof(struct futhark_f64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_78735;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_float(struct futhark_context *ctx, struct futhark_opaque_sortInfo_float **out0, const int64_t in0, const int16_t in1, const struct futhark_f32_1d *in2)
{
    int64_t n_75980 = (int64_t) 0;
    int64_t incr_75981 = (int64_t) 0;
    int16_t block_sizze_75982 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_75981 = in0;
    block_sizze_75982 = in1;
    xs_mem_138403 = in2->mem;
    n_75980 = in2->shape[0];
    if (!(n_75980 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_float(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_75980, incr_75981, block_sizze_75982);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_float *) malloc(sizeof(struct futhark_opaque_sortInfo_float))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_75980;
            assert(((*out0)->v1 = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_75980;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_int(struct futhark_context *ctx, struct futhark_opaque_sortInfo_int **out0, const int64_t in0, const int16_t in1, const struct futhark_i32_1d *in2)
{
    int64_t n_70629 = (int64_t) 0;
    int64_t incr_70630 = (int64_t) 0;
    int16_t block_sizze_70631 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_70630 = in0;
    block_sizze_70631 = in1;
    xs_mem_138403 = in2->mem;
    n_70629 = in2->shape[0];
    if (!(n_70629 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_int(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_70629, incr_70630, block_sizze_70631);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_int *) malloc(sizeof(struct futhark_opaque_sortInfo_int))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_70629;
            assert(((*out0)->v1 = (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_70629;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_long(struct futhark_context *ctx, struct futhark_opaque_sortInfo_long **out0, const int64_t in0, const int16_t in1, const struct futhark_i64_1d *in2)
{
    int64_t n_73229 = (int64_t) 0;
    int64_t incr_73230 = (int64_t) 0;
    int16_t block_sizze_73231 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_73230 = in0;
    block_sizze_73231 = in1;
    xs_mem_138403 = in2->mem;
    n_73229 = in2->shape[0];
    if (!(n_73229 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_long(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_73229, incr_73230, block_sizze_73231);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_long *) malloc(sizeof(struct futhark_opaque_sortInfo_long))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_73229;
            assert(((*out0)->v1 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_73229;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_radixSortColumn_short(struct futhark_context *ctx, struct futhark_opaque_sortInfo_short **out0, const int64_t in0, const int16_t in1, const struct futhark_i16_1d *in2)
{
    int64_t n_68012 = (int64_t) 0;
    int64_t incr_68013 = (int64_t) 0;
    int16_t block_sizze_68014 = (int16_t) 0;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_139282;
    
    mem_out_139282.references = NULL;
    
    struct memblock mem_out_139281;
    
    mem_out_139281.references = NULL;
    
    struct memblock xs_mem_138403;
    
    xs_mem_138403.references = NULL;
    incr_68013 = in0;
    block_sizze_68014 = in1;
    xs_mem_138403 = in2->mem;
    n_68012 = in2->shape[0];
    if (!(n_68012 == in2->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_radixSortColumn_short(ctx, &mem_out_139281, &mem_out_139282, xs_mem_138403, n_68012, incr_68013, block_sizze_68014);
        if (ret == 0) {
            assert((*out0 = (struct futhark_opaque_sortInfo_short *) malloc(sizeof(struct futhark_opaque_sortInfo_short))) != NULL);
            assert(((*out0)->v0 = (struct futhark_i64_1d *) malloc(sizeof(struct futhark_i64_1d))) != NULL);
            (*out0)->v0->mem = mem_out_139281;
            (*out0)->v0->shape[0] = n_68012;
            assert(((*out0)->v1 = (struct futhark_i16_1d *) malloc(sizeof(struct futhark_i16_1d))) != NULL);
            (*out0)->v1->mem = mem_out_139282;
            (*out0)->v1->shape[0] = n_68012;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
